{"version":3,"file":"pb-message-a461d7ee.js","sources":["../node_modules/@polymer/iron-image/iron-image.js","../node_modules/@polymer/paper-card/paper-card.js","../node_modules/lit-html/directives/unsafe-html.js","../node_modules/@polymer/iron-icons/iron-icons.js","../node_modules/@polymer/iron-collapse/iron-collapse.js","../src/pb-collapse.js","../node_modules/@polymer/paper-item/paper-item-shared-styles.js","../node_modules/@polymer/paper-item/paper-item-behavior.js","../node_modules/@polymer/paper-item/paper-item.js","../node_modules/@polymer/paper-material/paper-material-shared-styles.js","../node_modules/@polymer/paper-material/paper-material.js","../node_modules/@cwmr/paper-autocomplete/paper-autocomplete-suggestions.js","../node_modules/hotkeys-js/dist/hotkeys.esm.js","../src/pb-hotkeys.js","../node_modules/@polymer/paper-icon-button/paper-icon-button.js","../node_modules/@cwmr/paper-autocomplete/paper-autocomplete.js","../src/pb-edit-xml.js","../node_modules/@vaadin/vaadin-lumo-styles/version.js","../node_modules/@vaadin/vaadin-lumo-styles/font-icons.js","../node_modules/@vaadin/vaadin-lumo-styles/color.js","../node_modules/@vaadin/vaadin-lumo-styles/sizing.js","../node_modules/@vaadin/vaadin-lumo-styles/spacing.js","../node_modules/@vaadin/vaadin-lumo-styles/style.js","../node_modules/@vaadin/vaadin-lumo-styles/typography.js","../node_modules/@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js","../node_modules/@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js","../node_modules/@vaadin/vaadin-element-mixin/vaadin-dir-helper.js","../node_modules/@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js","../node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","../node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","../node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","../node_modules/codemirror/src/util/browser.js","../node_modules/codemirror/src/util/dom.js","../node_modules/codemirror/src/util/misc.js","../node_modules/codemirror/src/util/bidi.js","../node_modules/codemirror/src/util/event.js","../node_modules/codemirror/src/util/feature_detection.js","../node_modules/codemirror/src/modes.js","../node_modules/codemirror/src/util/StringStream.js","../node_modules/codemirror/src/line/utils_line.js","../node_modules/codemirror/src/line/pos.js","../node_modules/codemirror/src/line/highlight.js","../node_modules/codemirror/src/line/saw_special_spans.js","../node_modules/codemirror/src/line/spans.js","../node_modules/codemirror/src/line/line_data.js","../node_modules/codemirror/src/util/operation_group.js","../node_modules/codemirror/src/display/update_line.js","../node_modules/codemirror/src/measurement/widgets.js","../node_modules/codemirror/src/measurement/position_measurement.js","../node_modules/codemirror/src/display/view_tracking.js","../node_modules/codemirror/src/display/selection.js","../node_modules/codemirror/src/display/focus.js","../node_modules/codemirror/src/display/update_lines.js","../node_modules/codemirror/src/display/scrolling.js","../node_modules/codemirror/src/display/scrollbars.js","../node_modules/codemirror/src/display/operations.js","../node_modules/codemirror/src/display/highlight_worker.js","../node_modules/codemirror/src/display/update_display.js","../node_modules/codemirror/src/display/line_numbers.js","../node_modules/codemirror/src/display/gutters.js","../node_modules/codemirror/src/display/Display.js","../node_modules/codemirror/src/display/scroll_events.js","../node_modules/codemirror/src/model/selection.js","../node_modules/codemirror/src/model/change_measurement.js","../node_modules/codemirror/src/display/mode_state.js","../node_modules/codemirror/src/model/document_data.js","../node_modules/codemirror/src/model/history.js","../node_modules/codemirror/src/model/selection_updates.js","../node_modules/codemirror/src/model/changes.js","../node_modules/codemirror/src/model/chunk.js","../node_modules/codemirror/src/model/line_widget.js","../node_modules/codemirror/src/model/mark_text.js","../node_modules/codemirror/src/model/Doc.js","../node_modules/codemirror/src/edit/drop_events.js","../node_modules/codemirror/src/edit/global_events.js","../node_modules/codemirror/src/input/keynames.js","../node_modules/codemirror/src/input/keymap.js","../node_modules/codemirror/src/edit/deleteNearSelection.js","../node_modules/codemirror/src/input/movement.js","../node_modules/codemirror/src/edit/commands.js","../node_modules/codemirror/src/edit/key_events.js","../node_modules/codemirror/src/edit/mouse_events.js","../node_modules/codemirror/src/edit/utils.js","../node_modules/codemirror/src/edit/options.js","../node_modules/codemirror/src/edit/CodeMirror.js","../node_modules/codemirror/src/input/indent.js","../node_modules/codemirror/src/input/input.js","../node_modules/codemirror/src/edit/methods.js","../node_modules/codemirror/src/input/ContentEditableInput.js","../node_modules/codemirror/src/input/TextareaInput.js","../node_modules/codemirror/src/edit/fromTextArea.js","../node_modules/codemirror/src/edit/legacy.js","../node_modules/codemirror/src/edit/main.js","../lib/codemirror/mode/xquery/xquery.js","../lib/codemirror/mode/css/css.js","../lib/codemirror/mode/xml/xml.js","../lib/codemirror/mode/stex/stex.js","../lib/codemirror/addon/display/placeholder.js","../lib/codemirror/addon/edit/matchbrackets.js","../lib/codemirror/addon/lint/lint.js","../src/pb-code-editor.js","../src/pb-message.js"],"sourcesContent":["/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {resolveUrl} from '@polymer/polymer/lib/utils/resolve-url.js';\n\n/**\n`iron-image` is an element for displaying an image that provides useful sizing and\npreloading options not found on the standard `<img>` tag.\n\nThe `sizing` option allows the image to be either cropped (`cover`) or\nletterboxed (`contain`) to fill a fixed user-size placed on the element.\n\nThe `preload` option prevents the browser from rendering the image until the\nimage is fully loaded.  In the interim, either the element's CSS `background-color`\ncan be be used as the placeholder, or the `placeholder` property can be\nset to a URL (preferably a data-URI, for instant rendering) for an\nplaceholder image.\n\nThe `fade` option (only valid when `preload` is set) will cause the placeholder\nimage/color to be faded out once the image is rendered.\n\nExamples:\n\n  Basically identical to `<img src=\"...\">` tag:\n\n    <iron-image src=\"http://lorempixel.com/400/400\"></iron-image>\n\n  Will letterbox the image to fit:\n\n    <iron-image style=\"width:400px; height:400px;\" sizing=\"contain\"\n      src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will crop the image to fit:\n\n    <iron-image style=\"width:400px; height:400px;\" sizing=\"cover\"\n      src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will show light-gray background until the image loads:\n\n    <iron-image style=\"width:400px; height:400px; background-color: lightgray;\"\n      sizing=\"cover\" preload src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will show a base-64 encoded placeholder image until the image loads:\n\n    <iron-image style=\"width:400px; height:400px;\" placeholder=\"data:image/gif;base64,...\"\n      sizing=\"cover\" preload src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will fade the light-gray background out once the image is loaded:\n\n    <iron-image style=\"width:400px; height:400px; background-color: lightgray;\"\n      sizing=\"cover\" preload fade src=\"http://lorempixel.com/600/400\"></iron-image>\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--iron-image-placeholder` | Mixin applied to #placeholder | `{}`\n`--iron-image-width` | Sets the width of the wrapped image | `auto`\n`--iron-image-height` | Sets the height of the wrapped image | `auto`\n\n@group Iron Elements\n@element iron-image\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        overflow: hidden;\n        position: relative;\n      }\n\n      #baseURIAnchor {\n        display: none;\n      }\n\n      #sizedImgDiv {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n\n        display: none;\n      }\n\n      #img {\n        display: block;\n        width: var(--iron-image-width, auto);\n        height: var(--iron-image-height, auto);\n      }\n\n      :host([sizing]) #sizedImgDiv {\n        display: block;\n      }\n\n      :host([sizing]) #img {\n        display: none;\n      }\n\n      #placeholder {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n\n        background-color: inherit;\n        opacity: 1;\n\n        @apply --iron-image-placeholder;\n      }\n\n      #placeholder.faded-out {\n        transition: opacity 0.5s linear;\n        opacity: 0;\n      }\n    </style>\n\n    <a id=\"baseURIAnchor\" href=\"#\"></a>\n    <div id=\"sizedImgDiv\" role=\"img\" hidden$=\"[[_computeImgDivHidden(sizing)]]\" aria-hidden$=\"[[_computeImgDivARIAHidden(alt)]]\" aria-label$=\"[[_computeImgDivARIALabel(alt, src)]]\"></div>\n    <img id=\"img\" alt$=\"[[alt]]\" hidden$=\"[[_computeImgHidden(sizing)]]\" crossorigin$=\"[[crossorigin]]\" on-load=\"_imgOnLoad\" on-error=\"_imgOnError\">\n    <div id=\"placeholder\" hidden$=\"[[_computePlaceholderHidden(preload, fade, loading, loaded)]]\" class$=\"[[_computePlaceholderClassName(preload, fade, loading, loaded)]]\"></div>\n`,\n\n  is: 'iron-image',\n\n  properties: {\n    /**\n     * The URL of an image.\n     */\n    src: {type: String, value: ''},\n\n    /**\n     * A short text alternative for the image.\n     */\n    alt: {type: String, value: null},\n\n    /**\n     * CORS enabled images support:\n     * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image\n     */\n    crossorigin: {type: String, value: null},\n\n    /**\n     * When true, the image is prevented from loading and any placeholder is\n     * shown.  This may be useful when a binding to the src property is known to\n     * be invalid, to prevent 404 requests.\n     */\n    preventLoad: {type: Boolean, value: false},\n\n    /**\n     * Sets a sizing option for the image.  Valid values are `contain` (full\n     * aspect ratio of the image is contained within the element and\n     * letterboxed) or `cover` (image is cropped in order to fully cover the\n     * bounds of the element), or `null` (default: image takes natural size).\n     */\n    sizing: {type: String, value: null, reflectToAttribute: true},\n\n    /**\n     * When a sizing option is used (`cover` or `contain`), this determines\n     * how the image is aligned within the element bounds.\n     */\n    position: {type: String, value: 'center'},\n\n    /**\n     * When `true`, any change to the `src` property will cause the\n     * `placeholder` image to be shown until the new image has loaded.\n     */\n    preload: {type: Boolean, value: false},\n\n    /**\n     * This image will be used as a background/placeholder until the src image\n     * has loaded.  Use of a data-URI for placeholder is encouraged for instant\n     * rendering.\n     */\n    placeholder: {type: String, value: null, observer: '_placeholderChanged'},\n\n    /**\n     * When `preload` is true, setting `fade` to true will cause the image to\n     * fade into place.\n     */\n    fade: {type: Boolean, value: false},\n\n    /**\n     * Read-only value that is true when the image is loaded.\n     */\n    loaded: {notify: true, readOnly: true, type: Boolean, value: false},\n\n    /**\n     * Read-only value that tracks the loading state of the image when the\n     * `preload` option is used.\n     */\n    loading: {notify: true, readOnly: true, type: Boolean, value: false},\n\n    /**\n     * Read-only value that indicates that the last set `src` failed to load.\n     */\n    error: {notify: true, readOnly: true, type: Boolean, value: false},\n\n    /**\n     * Can be used to set the width of image (e.g. via binding); size may also\n     * be set via CSS.\n     */\n    width: {observer: '_widthChanged', type: Number, value: null},\n\n    /**\n     * Can be used to set the height of image (e.g. via binding); size may also\n     * be set via CSS.\n     *\n     * @attribute height\n     * @type number\n     * @default null\n     */\n    height: {observer: '_heightChanged', type: Number, value: null},\n  },\n\n  observers: [\n    '_transformChanged(sizing, position)',\n    '_loadStateObserver(src, preventLoad)'\n  ],\n\n  created: function() {\n    this._resolvedSrc = '';\n  },\n\n  _imgOnLoad: function() {\n    if (this.$.img.src !== this._resolveSrc(this.src)) {\n      return;\n    }\n\n    this._setLoading(false);\n    this._setLoaded(true);\n    this._setError(false);\n  },\n\n  _imgOnError: function() {\n    if (this.$.img.src !== this._resolveSrc(this.src)) {\n      return;\n    }\n\n    this.$.img.removeAttribute('src');\n    this.$.sizedImgDiv.style.backgroundImage = '';\n\n    this._setLoading(false);\n    this._setLoaded(false);\n    this._setError(true);\n  },\n\n  _computePlaceholderHidden: function() {\n    return !this.preload || (!this.fade && !this.loading && this.loaded);\n  },\n\n  _computePlaceholderClassName: function() {\n    return (this.preload && this.fade && !this.loading && this.loaded) ?\n        'faded-out' :\n        '';\n  },\n\n  _computeImgDivHidden: function() {\n    return !this.sizing;\n  },\n\n  _computeImgDivARIAHidden: function() {\n    return this.alt === '' ? 'true' : undefined;\n  },\n\n  _computeImgDivARIALabel: function() {\n    if (this.alt !== null) {\n      return this.alt;\n    }\n\n    // Polymer.ResolveUrl.resolveUrl will resolve '' relative to a URL x to\n    // that URL x, but '' is the default for src.\n    if (this.src === '') {\n      return '';\n    }\n\n    // NOTE: Use of `URL` was removed here because IE11 doesn't support\n    // constructing it. If this ends up being problematic, we should\n    // consider reverting and adding the URL polyfill as a dev dependency.\n    var resolved = this._resolveSrc(this.src);\n    // Remove query parts, get file name.\n    return resolved.replace(/[?|#].*/g, '').split('/').pop();\n  },\n\n  _computeImgHidden: function() {\n    return !!this.sizing;\n  },\n\n  _widthChanged: function() {\n    this.style.width = isNaN(this.width) ? this.width : this.width + 'px';\n  },\n\n  _heightChanged: function() {\n    this.style.height = isNaN(this.height) ? this.height : this.height + 'px';\n  },\n\n  _loadStateObserver: function(src, preventLoad) {\n    var newResolvedSrc = this._resolveSrc(src);\n    if (newResolvedSrc === this._resolvedSrc) {\n      return;\n    }\n\n    this._resolvedSrc = '';\n    this.$.img.removeAttribute('src');\n    this.$.sizedImgDiv.style.backgroundImage = '';\n\n    if (src === '' || preventLoad) {\n      this._setLoading(false);\n      this._setLoaded(false);\n      this._setError(false);\n    } else {\n      this._resolvedSrc = newResolvedSrc;\n      this.$.img.src = this._resolvedSrc;\n      this.$.sizedImgDiv.style.backgroundImage =\n          'url(\"' + this._resolvedSrc + '\")';\n\n      this._setLoading(true);\n      this._setLoaded(false);\n      this._setError(false);\n    }\n  },\n\n  _placeholderChanged: function() {\n    this.$.placeholder.style.backgroundImage =\n        this.placeholder ? 'url(\"' + this.placeholder + '\")' : '';\n  },\n\n  _transformChanged: function() {\n    var sizedImgDivStyle = this.$.sizedImgDiv.style;\n    var placeholderStyle = this.$.placeholder.style;\n\n    sizedImgDivStyle.backgroundSize = placeholderStyle.backgroundSize =\n        this.sizing;\n\n    sizedImgDivStyle.backgroundPosition = placeholderStyle.backgroundPosition =\n        this.sizing ? this.position : '';\n\n    sizedImgDivStyle.backgroundRepeat = placeholderStyle.backgroundRepeat =\n        this.sizing ? 'no-repeat' : '';\n  },\n\n  _resolveSrc: function(testSrc) {\n    var resolved = resolveUrl(testSrc, this.$.baseURIAnchor.href);\n    // NOTE: Use of `URL` was removed here because IE11 doesn't support\n    // constructing it. If this ends up being problematic, we should\n    // consider reverting and adding the URL polyfill as a dev dependency.\n    if (resolved.length >= 2 && resolved[0] === '/' && resolved[1] !== '/') {\n      // In IE location.origin might not work\n      // https://connect.microsoft.com/IE/feedback/details/1763802/location-origin-is-undefined-in-ie-11-on-windows-10-but-works-on-windows-7\n      resolved = (location.origin || location.protocol + '//' + location.host) +\n          resolved;\n    }\n    return resolved;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/iron-image/iron-image.js';\nimport '@polymer/paper-styles/element-styles/paper-material-styles.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Cards](https://www.google.com/design/spec/components/cards.html)\n\n`paper-card` is a container with a drop shadow.\n\nExample:\n\n    <paper-card heading=\"Card Title\">\n      <div class=\"card-content\">Some content</div>\n      <div class=\"card-actions\">\n        <paper-button>Some action</paper-button>\n      </div>\n    </paper-card>\n\nExample - top card image:\n\n    <paper-card heading=\"Card Title\" image=\"/path/to/image.png\" alt=\"image\">\n      ...\n    </paper-card>\n\n### Accessibility\n\nBy default, the `aria-label` will be set to the value of the `heading`\nattribute.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-card-background-color` | The background color of the card | `--primary-background-color`\n`--paper-card-header-color` | The color of the header text | `#000`\n`--paper-card-header` | Mixin applied to the card header section | `{}`\n`--paper-card-header-text` | Mixin applied to the title in the card header section | `{}`\n`--paper-card-header-image` | Mixin applied to the image in the card header section | `{}`\n`--paper-card-header-image-text` | Mixin applied to the text overlapping the image in the card header section | `{}`\n`--paper-card-content` | Mixin applied to the card content section| `{}`\n`--paper-card-actions` | Mixin applied to the card action section | `{}`\n`--paper-card` | Mixin applied to the card | `{}`\n\n@group Paper Elements\n@element paper-card\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-material-styles\">\n      :host {\n        display: inline-block;\n        position: relative;\n        box-sizing: border-box;\n        background-color: var(--paper-card-background-color, var(--primary-background-color));\n        border-radius: 2px;\n\n        @apply --paper-font-common-base;\n        @apply --paper-card;\n      }\n\n      /* IE 10 support for HTML5 hidden attr */\n      :host([hidden]), [hidden] {\n        display: none !important;\n      }\n\n      .header {\n        position: relative;\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n        overflow: hidden;\n\n        @apply --paper-card-header;\n      }\n\n      .header iron-image {\n        display: block;\n        width: 100%;\n        --iron-image-width: 100%;\n        pointer-events: none;\n\n        @apply --paper-card-header-image;\n      }\n\n      .header .title-text {\n        padding: 16px;\n        font-size: 24px;\n        font-weight: 400;\n        color: var(--paper-card-header-color, #000);\n\n        @apply --paper-card-header-text;\n      }\n\n      .header .title-text.over-image {\n        position: absolute;\n        bottom: 0px;\n\n        @apply --paper-card-header-image-text;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n        position:relative;\n\n        @apply --paper-card-content;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n        position:relative;\n\n        @apply --paper-card-actions;\n      }\n\n      :host([elevation=\"1\"]) {\n        @apply --paper-material-elevation-1;\n      }\n\n      :host([elevation=\"2\"]) {\n        @apply --paper-material-elevation-2;\n      }\n\n      :host([elevation=\"3\"]) {\n        @apply --paper-material-elevation-3;\n      }\n\n      :host([elevation=\"4\"]) {\n        @apply --paper-material-elevation-4;\n      }\n\n      :host([elevation=\"5\"]) {\n        @apply --paper-material-elevation-5;\n      }\n    </style>\n\n    <div class=\"header\">\n      <iron-image hidden\\$=\"[[!image]]\" aria-hidden\\$=\"[[_isHidden(image)]]\" src=\"[[image]]\" alt=\"[[alt]]\" placeholder=\"[[placeholderImage]]\" preload=\"[[preloadImage]]\" fade=\"[[fadeImage]]\"></iron-image>\n      <div hidden\\$=\"[[!heading]]\" class\\$=\"title-text [[_computeHeadingClass(image)]]\">[[heading]]</div>\n    </div>\n\n    <slot></slot>\n`,\n\n  is: 'paper-card',\n\n  properties: {\n    /**\n     * The title of the card.\n     */\n    heading: {type: String, value: '', observer: '_headingChanged'},\n\n    /**\n     * The url of the title image of the card.\n     */\n    image: {type: String, value: ''},\n\n    /**\n     * The text alternative of the card's title image.\n     */\n    alt: {type: String},\n\n    /**\n     * When `true`, any change to the image url property will cause the\n     * `placeholder` image to be shown until the image is fully rendered.\n     */\n    preloadImage: {type: Boolean, value: false},\n\n    /**\n     * When `preloadImage` is true, setting `fadeImage` to true will cause the\n     * image to fade into place.\n     */\n    fadeImage: {type: Boolean, value: false},\n\n    /**\n     * This image will be used as a background/placeholder until the src image\n     * has loaded. Use of a data-URI for placeholder is encouraged for instant\n     * rendering.\n     */\n    placeholderImage: {type: String, value: null},\n\n    /**\n     * The z-depth of the card, from 0-5.\n     */\n    elevation: {type: Number, value: 1, reflectToAttribute: true},\n\n    /**\n     * Set this to true to animate the card shadow when setting a new\n     * `z` value.\n     */\n    animatedShadow: {type: Boolean, value: false},\n\n    /**\n     * Read-only property used to pass down the `animatedShadow` value to\n     * the underlying paper-material style (since they have different names).\n     */\n    animated: {\n      type: Boolean,\n      reflectToAttribute: true,\n      readOnly: true,\n      computed: '_computeAnimated(animatedShadow)'\n    }\n  },\n\n  /**\n   * Format function for aria-hidden. Use the ! operator results in the\n   * empty string when given a falsy value.\n   */\n  _isHidden: function(image) {\n    return image ? 'false' : 'true';\n  },\n\n  _headingChanged: function(heading) {\n    var currentHeading = this.getAttribute('heading'),\n        currentLabel = this.getAttribute('aria-label');\n\n    if (typeof currentLabel !== 'string' || currentLabel === currentHeading) {\n      this.setAttribute('aria-label', heading);\n    }\n  },\n\n  _computeHeadingClass: function(image) {\n    return image ? ' over-image' : '';\n  },\n\n  _computeAnimated: function(animatedShadow) {\n    return animatedShadow;\n  }\n});\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isPrimitive } from '../lib/parts.js';\nimport { directive, NodePart } from '../lit-html.js';\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues = new WeakMap();\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nexport const unsafeHTML = directive((value) => (part) => {\n    if (!(part instanceof NodePart)) {\n        throw new Error('unsafeHTML can only be used in text bindings');\n    }\n    const previousValue = previousValues.get(part);\n    if (previousValue !== undefined && isPrimitive(value) &&\n        value === previousValue.value && part.value === previousValue.fragment) {\n        return;\n    }\n    const template = document.createElement('template');\n    template.innerHTML = value; // innerHTML casts to string internally\n    const fragment = document.importNode(template.content, true);\n    part.setValue(fragment);\n    previousValues.set(part, { value, fragment });\n});\n//# sourceMappingURL=unsafe-html.js.map","/**\n@license\nCopyright (c) 2014 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/iron-iconset-svg/iron-iconset-svg.js';\n\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n\n`iron-icons` is a utility import that includes the definition for the\n`iron-icon` element, `iron-iconset-svg` element, as well as an import for the\ndefault icon set.\n\nThe `iron-icons` directory also includes imports for additional icon sets that\ncan be loaded into your project.\n\nExample loading icon set:\n\n    <script type=\"module\">\n      import '@polymer/iron-icons/maps-icons.js';\n    </script>\n\nTo use an icon from one of these sets, first prefix your `iron-icon` with the\nicon set name, followed by a colon, \":\", and then the icon id.\n\nExample using the directions-bus icon from the maps icon set:\n\n    <iron-icon icon=\"maps:directions-bus\"></iron-icon>\n\nSee [iron-icon](https://www.webcomponents.org/element/@polymer/iron-icon) for\nmore information about working with icons.\n\nSee [iron-iconset](https://www.webcomponents.org/element/@polymer/iron-iconset)\nand\n[iron-iconset-svg](https://www.webcomponents.org/element/@polymer/iron-iconset-svg)\nfor more information about how to create a custom iconset.\n\n@group Iron Elements\n@pseudoElement iron-icons\n@demo demo/index.html\n*/\n\nconst template = html`<iron-iconset-svg name=\"icons\" size=\"24\">\n<svg><defs>\n<g id=\"3d-rotation\"><path d=\"M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z\"></path></g>\n<g id=\"accessibility\"><path d=\"M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z\"></path></g>\n<g id=\"accessible\"><circle cx=\"12\" cy=\"4\" r=\"2\"></circle><path d=\"M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z\"></path></g>\n<g id=\"account-balance\"><path d=\"M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z\"></path></g>\n<g id=\"account-balance-wallet\"><path d=\"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z\"></path></g>\n<g id=\"account-box\"><path d=\"M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z\"></path></g>\n<g id=\"account-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\"></path></g>\n<g id=\"add\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"></path></g>\n<g id=\"add-alert\"><path d=\"M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z\"></path></g>\n<g id=\"add-box\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"></path></g>\n<g id=\"add-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"></path></g>\n<g id=\"add-circle-outline\"><path d=\"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"></path></g>\n<g id=\"add-shopping-cart\"><path d=\"M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z\"></path></g>\n<g id=\"alarm\"><path d=\"M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"></path></g>\n<g id=\"alarm-add\"><path d=\"M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z\"></path></g>\n<g id=\"alarm-off\"><path d=\"M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z\"></path></g>\n<g id=\"alarm-on\"><path d=\"M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z\"></path></g>\n<g id=\"all-out\"><path d=\"M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z\"></path></g>\n<g id=\"android\"><path d=\"M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z\"></path></g>\n<g id=\"announcement\"><path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z\"></path></g>\n<g id=\"apps\"><path d=\"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z\"></path></g>\n<g id=\"archive\"><path d=\"M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z\"></path></g>\n<g id=\"arrow-back\"><path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"></path></g>\n<g id=\"arrow-downward\"><path d=\"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\"></path></g>\n<g id=\"arrow-drop-down\"><path d=\"M7 10l5 5 5-5z\"></path></g>\n<g id=\"arrow-drop-down-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z\"></path></g>\n<g id=\"arrow-drop-up\"><path d=\"M7 14l5-5 5 5z\"></path></g>\n<g id=\"arrow-forward\"><path d=\"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\"></path></g>\n<g id=\"arrow-upward\"><path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"></path></g>\n<g id=\"aspect-ratio\"><path d=\"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z\"></path></g>\n<g id=\"assessment\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"></path></g>\n<g id=\"assignment\"><path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"></path></g>\n<g id=\"assignment-ind\"><path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z\"></path></g>\n<g id=\"assignment-late\"><path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"></path></g>\n<g id=\"assignment-return\"><path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z\"></path></g>\n<g id=\"assignment-returned\"><path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z\"></path></g>\n<g id=\"assignment-turned-in\"><path d=\"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z\"></path></g>\n<g id=\"attachment\"><path d=\"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z\"></path></g>\n<g id=\"autorenew\"><path d=\"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z\"></path></g>\n<g id=\"backspace\"><path d=\"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z\"></path></g>\n<g id=\"backup\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z\"></path></g>\n<g id=\"block\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\"></path></g>\n<g id=\"book\"><path d=\"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z\"></path></g>\n<g id=\"bookmark\"><path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"bookmark-border\"><path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z\"></path></g>\n<g id=\"bug-report\"><path d=\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z\"></path></g>\n<g id=\"build\"><path d=\"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z\"></path></g>\n<g id=\"cached\"><path d=\"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z\"></path></g>\n<g id=\"camera-enhance\"><path d=\"M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z\"></path></g>\n<g id=\"cancel\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"></path></g>\n<g id=\"card-giftcard\"><path d=\"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z\"></path></g>\n<g id=\"card-membership\"><path d=\"M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z\"></path></g>\n<g id=\"card-travel\"><path d=\"M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z\"></path></g>\n<g id=\"change-history\"><path d=\"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z\"></path></g>\n<g id=\"check\"><path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"></path></g>\n<g id=\"check-box\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></g>\n<g id=\"check-box-outline-blank\"><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"check-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></g>\n<g id=\"chevron-left\"><path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"></path></g>\n<g id=\"chevron-right\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"></path></g>\n<g id=\"chrome-reader-mode\"><path d=\"M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z\"></path></g>\n<g id=\"class\"><path d=\"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z\"></path></g>\n<g id=\"clear\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></g>\n<g id=\"close\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></g>\n<g id=\"cloud\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z\"></path></g>\n<g id=\"cloud-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z\"></path></g>\n<g id=\"cloud-done\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z\"></path></g>\n<g id=\"cloud-download\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"></path></g>\n<g id=\"cloud-off\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z\"></path></g>\n<g id=\"cloud-queue\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z\"></path></g>\n<g id=\"cloud-upload\"><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z\"></path></g>\n<g id=\"code\"><path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"></path></g>\n<g id=\"compare-arrows\"><path d=\"M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z\"></path></g>\n<g id=\"content-copy\"><path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"></path></g>\n<g id=\"content-cut\"><path d=\"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z\"></path></g>\n<g id=\"content-paste\"><path d=\"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z\"></path></g>\n<g id=\"copyright\"><path d=\"M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"></path></g>\n<g id=\"create\"><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"></path></g>\n<g id=\"create-new-folder\"><path d=\"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z\"></path></g>\n<g id=\"credit-card\"><path d=\"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"></path></g>\n<g id=\"dashboard\"><path d=\"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z\"></path></g>\n<g id=\"date-range\"><path d=\"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z\"></path></g>\n<g id=\"delete\"><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"></path></g>\n<g id=\"delete-forever\"><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"></path></g>\n<g id=\"delete-sweep\"><path d=\"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z\"></path></g>\n<g id=\"description\"><path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"></path></g>\n<g id=\"dns\"><path d=\"M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\"></path></g>\n<g id=\"done\"><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"></path></g>\n<g id=\"done-all\"><path d=\"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z\"></path></g>\n<g id=\"donut-large\"><path d=\"M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z\"></path></g>\n<g id=\"donut-small\"><path d=\"M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z\"></path></g>\n<g id=\"drafts\"><path d=\"M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z\"></path></g>\n<g id=\"eject\"><path d=\"M5 17h14v2H5zm7-12L5.33 15h13.34z\"></path></g>\n<g id=\"error\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"></path></g>\n<g id=\"error-outline\"><path d=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></g>\n<g id=\"euro-symbol\"><path d=\"M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1 0 .34.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z\"></path></g>\n<g id=\"event\"><path d=\"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z\"></path></g>\n<g id=\"event-seat\"><path d=\"M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z\"></path></g>\n<g id=\"exit-to-app\"><path d=\"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"expand-less\"><path d=\"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z\"></path></g>\n<g id=\"expand-more\"><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"></path></g>\n<g id=\"explore\"><path d=\"M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z\"></path></g>\n<g id=\"extension\"><path d=\"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z\"></path></g>\n<g id=\"face\"><path d=\"M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z\"></path></g>\n<g id=\"favorite\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"></path></g>\n<g id=\"favorite-border\"><path d=\"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"></path></g>\n<g id=\"feedback\"><path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z\"></path></g>\n<g id=\"file-download\"><path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"></path></g>\n<g id=\"file-upload\"><path d=\"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z\"></path></g>\n<g id=\"filter-list\"><path d=\"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z\"></path></g>\n<g id=\"find-in-page\"><path d=\"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z\"></path></g>\n<g id=\"find-replace\"><path d=\"M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z\"></path></g>\n<g id=\"fingerprint\"><path d=\"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z\"></path></g>\n<g id=\"first-page\"><path d=\"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z\"></path></g>\n<g id=\"flag\"><path d=\"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z\"></path></g>\n<g id=\"flight-land\"><path d=\"M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z\"></path></g>\n<g id=\"flight-takeoff\"><path d=\"M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z\"></path></g>\n<g id=\"flip-to-back\"><path d=\"M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z\"></path></g>\n<g id=\"flip-to-front\"><path d=\"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z\"></path></g>\n<g id=\"folder\"><path d=\"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"></path></g>\n<g id=\"folder-open\"><path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\"></path></g>\n<g id=\"folder-shared\"><path d=\"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z\"></path></g>\n<g id=\"font-download\"><path d=\"M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z\"></path></g>\n<g id=\"forward\"><path d=\"M12 8V4l8 8-8 8v-4H4V8z\"></path></g>\n<g id=\"fullscreen\"><path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"></path></g>\n<g id=\"fullscreen-exit\"><path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"></path></g>\n<g id=\"g-translate\"><path d=\"M20 5h-9.12L10 2H4c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h7l1 3h8c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM7.17 14.59c-2.25 0-4.09-1.83-4.09-4.09s1.83-4.09 4.09-4.09c1.04 0 1.99.37 2.74 1.07l.07.06-1.23 1.18-.06-.05c-.29-.27-.78-.59-1.52-.59-1.31 0-2.38 1.09-2.38 2.42s1.07 2.42 2.38 2.42c1.37 0 1.96-.87 2.12-1.46H7.08V9.91h3.95l.01.07c.04.21.05.4.05.61 0 2.35-1.61 4-3.92 4zm6.03-1.71c.33.6.74 1.18 1.19 1.7l-.54.53-.65-2.23zm.77-.76h-.99l-.31-1.04h3.99s-.34 1.31-1.56 2.74c-.52-.62-.89-1.23-1.13-1.7zM21 20c0 .55-.45 1-1 1h-7l2-2-.81-2.77.92-.92L17.79 18l.73-.73-2.71-2.68c.9-1.03 1.6-2.25 1.92-3.51H19v-1.04h-3.64V9h-1.04v1.04h-1.96L11.18 6H20c.55 0 1 .45 1 1v13z\"></path></g>\n<g id=\"gavel\"><path d=\"M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z\"></path></g>\n<g id=\"gesture\"><path d=\"M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z\"></path></g>\n<g id=\"get-app\"><path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"></path></g>\n<g id=\"gif\"><path d=\"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z\"></path></g>\n<g id=\"grade\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"></path></g>\n<g id=\"group-work\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"></path></g>\n<g id=\"help\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"></path></g>\n<g id=\"help-outline\"><path d=\"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z\"></path></g>\n<g id=\"highlight-off\"><path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"></path></g>\n<g id=\"history\"><path d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\"></path></g>\n<g id=\"home\"><path d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"></path></g>\n<g id=\"hourglass-empty\"><path d=\"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"></path></g>\n<g id=\"hourglass-full\"><path d=\"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z\"></path></g>\n<g id=\"http\"><path d=\"M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z\"></path></g>\n<g id=\"https\"><path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z\"></path></g>\n<g id=\"important-devices\"><path d=\"M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z\"></path></g>\n<g id=\"inbox\"><path d=\"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z\"></path></g>\n<g id=\"indeterminate-check-box\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z\"></path></g>\n<g id=\"info\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"></path></g>\n<g id=\"info-outline\"><path d=\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\"></path></g>\n<g id=\"input\"><path d=\"M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z\"></path></g>\n<g id=\"invert-colors\"><path d=\"M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z\"></path></g>\n<g id=\"label\"><path d=\"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z\"></path></g>\n<g id=\"label-outline\"><path d=\"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z\"></path></g>\n<g id=\"language\"><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z\"></path></g>\n<g id=\"last-page\"><path d=\"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z\"></path></g>\n<g id=\"launch\"><path d=\"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\"></path></g>\n<g id=\"lightbulb-outline\"><path d=\"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z\"></path></g>\n<g id=\"line-style\"><path d=\"M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z\"></path></g>\n<g id=\"line-weight\"><path d=\"M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z\"></path></g>\n<g id=\"link\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></g>\n<g id=\"list\"><path d=\"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"></path></g>\n<g id=\"lock\"><path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z\"></path></g>\n<g id=\"lock-open\"><path d=\"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z\"></path></g>\n<g id=\"lock-outline\"><path d=\"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z\"></path></g>\n<g id=\"low-priority\"><path d=\"M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z\"></path></g>\n<g id=\"loyalty\"><path d=\"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z\"></path></g>\n<g id=\"mail\"><path d=\"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z\"></path></g>\n<g id=\"markunread\"><path d=\"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z\"></path></g>\n<g id=\"markunread-mailbox\"><path d=\"M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"menu\"><path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"></path></g>\n<g id=\"more-horiz\"><path d=\"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"></path></g>\n<g id=\"more-vert\"><path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"></path></g>\n<g id=\"motorcycle\"><path d=\"M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z\"></path></g>\n<g id=\"move-to-inbox\"><path d=\"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z\"></path></g>\n<g id=\"next-week\"><path d=\"M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z\"></path></g>\n<g id=\"note-add\"><path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z\"></path></g>\n<g id=\"offline-pin\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z\"></path></g>\n<g id=\"opacity\"><path d=\"M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z\"></path></g>\n<g id=\"open-in-browser\"><path d=\"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z\"></path></g>\n<g id=\"open-in-new\"><path d=\"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\"></path></g>\n<g id=\"open-with\"><path d=\"M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z\"></path></g>\n<g id=\"pageview\"><path d=\"M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z\"></path></g>\n<g id=\"pan-tool\"><path d=\"M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z\"></path></g>\n<g id=\"payment\"><path d=\"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"></path></g>\n<g id=\"perm-camera-mic\"><path d=\"M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z\"></path></g>\n<g id=\"perm-contact-calendar\"><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z\"></path></g>\n<g id=\"perm-data-setting\"><path d=\"M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z\"></path></g>\n<g id=\"perm-device-information\"><path d=\"M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z\"></path></g>\n<g id=\"perm-identity\"><path d=\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\"></path></g>\n<g id=\"perm-media\"><path d=\"M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z\"></path></g>\n<g id=\"perm-phone-msg\"><path d=\"M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z\"></path></g>\n<g id=\"perm-scan-wifi\"><path d=\"M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z\"></path></g>\n<g id=\"pets\"><circle cx=\"4.5\" cy=\"9.5\" r=\"2.5\"></circle><circle cx=\"9\" cy=\"5.5\" r=\"2.5\"></circle><circle cx=\"15\" cy=\"5.5\" r=\"2.5\"></circle><circle cx=\"19.5\" cy=\"9.5\" r=\"2.5\"></circle><path d=\"M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z\"></path></g>\n<g id=\"picture-in-picture\"><path d=\"M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z\"></path></g>\n<g id=\"picture-in-picture-alt\"><path d=\"M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z\"></path></g>\n<g id=\"play-for-work\"><path d=\"M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z\"></path></g>\n<g id=\"polymer\"><path d=\"M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z\"></path></g>\n<g id=\"power-settings-new\"><path d=\"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z\"></path></g>\n<g id=\"pregnant-woman\"><path d=\"M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z\"></path></g>\n<g id=\"print\"><path d=\"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z\"></path></g>\n<g id=\"query-builder\"><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"></path></g>\n<g id=\"question-answer\"><path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"></path></g>\n<g id=\"radio-button-checked\"><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></g>\n<g id=\"radio-button-unchecked\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"></path></g>\n<g id=\"receipt\"><path d=\"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z\"></path></g>\n<g id=\"record-voice-over\"><circle cx=\"9\" cy=\"9\" r=\"4\"></circle><path d=\"M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z\"></path></g>\n<g id=\"redeem\"><path d=\"M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z\"></path></g>\n<g id=\"redo\"><path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"></path></g>\n<g id=\"refresh\"><path d=\"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"></path></g>\n<g id=\"remove\"><path d=\"M19 13H5v-2h14v2z\"></path></g>\n<g id=\"remove-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z\"></path></g>\n<g id=\"remove-circle-outline\"><path d=\"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"></path></g>\n<g id=\"remove-shopping-cart\"><path d=\"M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z\"></path></g>\n<g id=\"reorder\"><path d=\"M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z\"></path></g>\n<g id=\"reply\"><path d=\"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z\"></path></g>\n<g id=\"reply-all\"><path d=\"M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z\"></path></g>\n<g id=\"report\"><path d=\"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z\"></path></g>\n<g id=\"report-problem\"><path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"></path></g>\n<g id=\"restore\"><path d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\"></path></g>\n<g id=\"restore-page\"><path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z\"></path></g>\n<g id=\"room\"><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"></path></g>\n<g id=\"rounded-corner\"><path d=\"M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z\"></path></g>\n<g id=\"rowing\"><path d=\"M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z\"></path></g>\n<g id=\"save\"><path d=\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"></path></g>\n<g id=\"schedule\"><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"></path></g>\n<g id=\"search\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path></g>\n<g id=\"select-all\"><path d=\"M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\"></path></g>\n<g id=\"send\"><path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"></path></g>\n<g id=\"settings\"><path d=\"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z\"></path></g>\n<g id=\"settings-applications\"><path d=\"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z\"></path></g>\n<g id=\"settings-backup-restore\"><path d=\"M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z\"></path></g>\n<g id=\"settings-bluetooth\"><path d=\"M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z\"></path></g>\n<g id=\"settings-brightness\"><path d=\"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z\"></path></g>\n<g id=\"settings-cell\"><path d=\"M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z\"></path></g>\n<g id=\"settings-ethernet\"><path d=\"M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z\"></path></g>\n<g id=\"settings-input-antenna\"><path d=\"M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z\"></path></g>\n<g id=\"settings-input-component\"><path d=\"M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z\"></path></g>\n<g id=\"settings-input-composite\"><path d=\"M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z\"></path></g>\n<g id=\"settings-input-hdmi\"><path d=\"M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z\"></path></g>\n<g id=\"settings-input-svideo\"><path d=\"M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z\"></path></g>\n<g id=\"settings-overscan\"><path d=\"M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z\"></path></g>\n<g id=\"settings-phone\"><path d=\"M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z\"></path></g>\n<g id=\"settings-power\"><path d=\"M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z\"></path></g>\n<g id=\"settings-remote\"><path d=\"M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z\"></path></g>\n<g id=\"settings-voice\"><path d=\"M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z\"></path></g>\n<g id=\"shop\"><path d=\"M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z\"></path></g>\n<g id=\"shop-two\"><path d=\"M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z\"></path></g>\n<g id=\"shopping-basket\"><path d=\"M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\"></path></g>\n<g id=\"shopping-cart\"><path d=\"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"></path></g>\n<g id=\"sort\"><path d=\"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z\"></path></g>\n<g id=\"speaker-notes\"><path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z\"></path></g>\n<g id=\"speaker-notes-off\"><path d=\"M10.54 11l-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"spellcheck\"><path d=\"M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z\"></path></g>\n<g id=\"star\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"></path></g>\n<g id=\"star-border\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"></path></g>\n<g id=\"star-half\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"></path></g>\n<g id=\"stars\"><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z\"></path></g>\n<g id=\"store\"><path d=\"M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z\"></path></g>\n<g id=\"subdirectory-arrow-left\"><path d=\"M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z\"></path></g>\n<g id=\"subdirectory-arrow-right\"><path d=\"M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z\"></path></g>\n<g id=\"subject\"><path d=\"M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z\"></path></g>\n<g id=\"supervisor-account\"><path d=\"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z\"></path></g>\n<g id=\"swap-horiz\"><path d=\"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z\"></path></g>\n<g id=\"swap-vert\"><path d=\"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z\"></path></g>\n<g id=\"swap-vertical-circle\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z\"></path></g>\n<g id=\"system-update-alt\"><path d=\"M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"tab\"><path d=\"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z\"></path></g>\n<g id=\"tab-unselected\"><path d=\"M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z\"></path></g>\n<g id=\"text-format\"><path d=\"M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z\"></path></g>\n<g id=\"theaters\"><path d=\"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z\"></path></g>\n<g id=\"thumb-down\"><path d=\"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z\"></path></g>\n<g id=\"thumb-up\"><path d=\"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z\"></path></g>\n<g id=\"thumbs-up-down\"><path d=\"M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z\"></path></g>\n<g id=\"timeline\"><path d=\"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z\"></path></g>\n<g id=\"toc\"><path d=\"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z\"></path></g>\n<g id=\"today\"><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\"></path></g>\n<g id=\"toll\"><path d=\"M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z\"></path></g>\n<g id=\"touch-app\"><path d=\"M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z\"></path></g>\n<g id=\"track-changes\"><path d=\"M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z\"></path></g>\n<g id=\"translate\"><path d=\"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z\"></path></g>\n<g id=\"trending-down\"><path d=\"M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z\"></path></g>\n<g id=\"trending-flat\"><path d=\"M22 12l-4-4v3H3v2h15v3z\"></path></g>\n<g id=\"trending-up\"><path d=\"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z\"></path></g>\n<g id=\"turned-in\"><path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"turned-in-not\"><path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z\"></path></g>\n<g id=\"unarchive\"><path d=\"M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z\"></path></g>\n<g id=\"undo\"><path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"></path></g>\n<g id=\"unfold-less\"><path d=\"M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z\"></path></g>\n<g id=\"unfold-more\"><path d=\"M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z\"></path></g>\n<g id=\"update\"><path d=\"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z\"></path></g>\n<g id=\"verified-user\"><path d=\"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z\"></path></g>\n<g id=\"view-agenda\"><path d=\"M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z\"></path></g>\n<g id=\"view-array\"><path d=\"M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z\"></path></g>\n<g id=\"view-carousel\"><path d=\"M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z\"></path></g>\n<g id=\"view-column\"><path d=\"M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z\"></path></g>\n<g id=\"view-day\"><path d=\"M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z\"></path></g>\n<g id=\"view-headline\"><path d=\"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z\"></path></g>\n<g id=\"view-list\"><path d=\"M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z\"></path></g>\n<g id=\"view-module\"><path d=\"M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z\"></path></g>\n<g id=\"view-quilt\"><path d=\"M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z\"></path></g>\n<g id=\"view-stream\"><path d=\"M4 18h17v-6H4v6zM4 5v6h17V5H4z\"></path></g>\n<g id=\"view-week\"><path d=\"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z\"></path></g>\n<g id=\"visibility\"><path d=\"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"></path></g>\n<g id=\"visibility-off\"><path d=\"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"></path></g>\n<g id=\"warning\"><path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"></path></g>\n<g id=\"watch-later\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z\"></path></g>\n<g id=\"weekend\"><path d=\"M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z\"></path></g>\n<g id=\"work\"><path d=\"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z\"></path></g>\n<g id=\"youtube-searched-for\"><path d=\"M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z\"></path></g>\n<g id=\"zoom-in\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z\"></path></g>\n<g id=\"zoom-out\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"></path></g>\n</defs></svg>\n</iron-iconset-svg>`;\n\ndocument.head.appendChild(template.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport {IronResizableBehavior} from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {Base} from '@polymer/polymer/polymer-legacy.js';\n\n/**\n`iron-collapse` creates a collapsible block of content.  By default, the content\nwill be collapsed.  Use `opened` or `toggle()` to show/hide the content.\n\n    <button on-click=\"toggle\">toggle collapse</button>\n\n    <iron-collapse id=\"collapse\">\n      <div>Content goes here...</div>\n    </iron-collapse>\n\n    ...\n\n    toggle: function() {\n      this.$.collapse.toggle();\n    }\n\n`iron-collapse` adjusts the max-height/max-width of the collapsible element to\nshow/hide the content.  So avoid putting padding/margin/border on the\ncollapsible directly, and instead put a div inside and style that.\n\n    <style>\n      .collapse-content {\n        padding: 15px;\n        border: 1px solid #dedede;\n      }\n    </style>\n\n    <iron-collapse>\n      <div class=\"collapse-content\">\n        <div>Content goes here...</div>\n      </div>\n    </iron-collapse>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--iron-collapse-transition-duration` | Animation transition duration | `300ms`\n\n@group Iron Elements\n@hero hero.svg\n@demo demo/index.html\n@element iron-collapse\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        transition-duration: var(--iron-collapse-transition-duration, 300ms);\n        /* Safari 10 needs this property prefixed to correctly apply the custom property */\n        -webkit-transition-duration: var(--iron-collapse-transition-duration, 300ms);\n        overflow: visible;\n      }\n\n      :host(.iron-collapse-closed) {\n        display: none;\n      }\n\n      :host(:not(.iron-collapse-opened)) {\n        overflow: hidden;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'iron-collapse',\n  behaviors: [IronResizableBehavior],\n\n  properties: {\n\n    /**\n     * If true, the orientation is horizontal; otherwise is vertical.\n     *\n     * @attribute horizontal\n     */\n    horizontal: {type: Boolean, value: false, observer: '_horizontalChanged'},\n\n    /**\n     * Set opened to true to show the collapse element and to false to hide it.\n     *\n     * @attribute opened\n     */\n    opened:\n        {type: Boolean, value: false, notify: true, observer: '_openedChanged'},\n\n    /**\n     * When true, the element is transitioning its opened state. When false,\n     * the element has finished opening/closing.\n     *\n     * @attribute transitioning\n     */\n    transitioning: {type: Boolean, notify: true, readOnly: true},\n\n    /**\n     * Set noAnimation to true to disable animations.\n     *\n     * @attribute noAnimation\n     */\n    noAnimation: {type: Boolean},\n\n    /**\n     * Stores the desired size of the collapse body.\n     * @private\n     */\n    _desiredSize: {type: String, value: ''}\n  },\n\n  get dimension() {\n    return this.horizontal ? 'width' : 'height';\n  },\n\n  /**\n   * `maxWidth` or `maxHeight`.\n   * @private\n   */\n  get _dimensionMax() {\n    return this.horizontal ? 'maxWidth' : 'maxHeight';\n  },\n\n  /**\n   * `max-width` or `max-height`.\n   * @private\n   */\n  get _dimensionMaxCss() {\n    return this.horizontal ? 'max-width' : 'max-height';\n  },\n\n  hostAttributes: {\n    role: 'group',\n    'aria-hidden': 'true',\n  },\n\n  listeners: {transitionend: '_onTransitionEnd'},\n\n  /**\n   * Toggle the opened state.\n   *\n   * @method toggle\n   */\n  toggle: function() {\n    this.opened = !this.opened;\n  },\n\n  show: function() {\n    this.opened = true;\n  },\n\n  hide: function() {\n    this.opened = false;\n  },\n\n  /**\n   * Updates the size of the element.\n   * @param {string} size The new value for `maxWidth`/`maxHeight` as css property value, usually `auto` or `0px`.\n   * @param {boolean=} animated if `true` updates the size with an animation, otherwise without.\n   */\n  updateSize: function(size, animated) {\n    // Consider 'auto' as '', to take full size.\n    size = size === 'auto' ? '' : size;\n\n    var willAnimate = animated && !this.noAnimation && this.isAttached &&\n        this._desiredSize !== size;\n\n    this._desiredSize = size;\n\n    this._updateTransition(false);\n    // If we can animate, must do some prep work.\n    if (willAnimate) {\n      // Animation will start at the current size.\n      var startSize = this._calcSize();\n      // For `auto` we must calculate what is the final size for the animation.\n      // After the transition is done, _transitionEnd will set the size back to\n      // `auto`.\n      if (size === '') {\n        this.style[this._dimensionMax] = '';\n        size = this._calcSize();\n      }\n      // Go to startSize without animation.\n      this.style[this._dimensionMax] = startSize;\n      // Force layout to ensure transition will go. Set scrollTop to itself\n      // so that compilers won't remove it.\n      this.scrollTop = this.scrollTop;\n      // Enable animation.\n      this._updateTransition(true);\n      // If final size is the same as startSize it will not animate.\n      willAnimate = (size !== startSize);\n    }\n    // Set the final size.\n    this.style[this._dimensionMax] = size;\n    // If it won't animate, call transitionEnd to set correct classes.\n    if (!willAnimate) {\n      this._transitionEnd();\n    }\n  },\n\n  /**\n   * enableTransition() is deprecated, but left over so it doesn't break\n   * existing code. Please use `noAnimation` property instead.\n   *\n   * @method enableTransition\n   * @deprecated since version 1.0.4\n   */\n  enableTransition: function(enabled) {\n    Base._warn(\n        '`enableTransition()` is deprecated, use `noAnimation` instead.');\n    this.noAnimation = !enabled;\n  },\n\n  _updateTransition: function(enabled) {\n    this.style.transitionDuration = (enabled && !this.noAnimation) ? '' : '0s';\n  },\n\n  _horizontalChanged: function() {\n    this.style.transitionProperty = this._dimensionMaxCss;\n    var otherDimension =\n        this._dimensionMax === 'maxWidth' ? 'maxHeight' : 'maxWidth';\n    this.style[otherDimension] = '';\n    this.updateSize(this.opened ? 'auto' : '0px', false);\n  },\n\n  _openedChanged: function() {\n    this.setAttribute('aria-hidden', !this.opened);\n\n    this._setTransitioning(true);\n    this.toggleClass('iron-collapse-closed', false);\n    this.toggleClass('iron-collapse-opened', false);\n    this.updateSize(this.opened ? 'auto' : '0px', true);\n\n    // Focus the current collapse.\n    if (this.opened) {\n      this.focus();\n    }\n  },\n\n  _transitionEnd: function() {\n    this.style[this._dimensionMax] = this._desiredSize;\n    this.toggleClass('iron-collapse-closed', !this.opened);\n    this.toggleClass('iron-collapse-opened', this.opened);\n    this._updateTransition(false);\n    this.notifyResize();\n    this._setTransitioning(false);\n  },\n\n  _onTransitionEnd: function(event) {\n    if (dom(event).rootTarget === this) {\n      this._transitionEnd();\n    }\n  },\n\n  _calcSize: function() {\n    return this.getBoundingClientRect()[this.dimension] + 'px';\n  }\n});\n","import { LitElement, html, css } from 'lit-element';\nimport { pbMixin } from './pb-mixin.js';\nimport '@polymer/iron-icon';\nimport '@polymer/iron-icons';\nimport '@polymer/iron-collapse';\n\n\n/**\n * A collapsible block: in collapsed state it only shows a header and expands if clicked.\n * The header should go into slot `collapse-trigger`, the content into `collapse-content`.\n * Example:\n * \n * ```html\n * <pb-collapse>\n *   <div slot=\"collapse-trigger\">\n *       Metadata\n *   </div>\n *   <pb-view slot=\"collapse-content\" src=\"document1\" subscribe=\"transcription\" xpath=\"//teiHeader\"></pb-view>\n * </pb-collapse>\n * ```\n *\n * @slot collapse-trigger - trigger toggling collapsed content on/off\n * @slot collapse-content - content to be collapsed\n * @cssprop [--pb-collapse-icon-padding=0 4px 0 0] - padding in px for the \"caret-down\" icon left to the collapsible item\n * @fires pb-collapse-open - Fires opening the collapsed section\n */\nexport class PbCollapse extends pbMixin(LitElement) {\n    static get properties() {\n        return {\n            ...super.properties,\n            /**\n             * @deprecated\n             * Corresponds to the iron-collapse's horizontal property.\n             */\n            horizontal: {\n                type: Boolean\n            },\n            /**\n             * Corresponds to the iron-collapse's noAnimation property.\n             *\n             */\n            noAnimation: {\n                type: Boolean,\n                attribute: 'no-animation'\n            },\n            /**\n             * Whether currently expanded.\n             *\n             */\n            opened: {\n                type: Boolean\n            },\n            /**\n             * By default, an open collapse is closed if another pb-collapse is expanded on the same event channel.\n             * Set to true to keep multiple pb-collapse open at the same time.\n             */\n            toggles: {\n                type: Boolean\n            },\n            /**\n             * The iron-icon when collapsed. Value must be one of the icons defined by iron-icons\n             */\n            expandIcon: {\n                type: String,\n                attribute: 'expand-icon'\n            },\n            /**\n             * The icon when expanded.\n             */\n            collapseIcon: {\n                type: String,\n                attribute: 'collapse-icon'\n            },\n            /**\n             * Whether to hide the expand/collapse icon.\n             */\n            noIcons: {\n                type: Boolean,\n                attribute: 'no-icons'\n            }\n        };\n    }\n\n    constructor() {\n        super();\n        this.horizontal = false;\n        this.noAnimation = false;\n        this.opened = false;\n        this.expandIcon = 'icons:expand-more';\n        this.collapseIcon = 'icons:expand-less';\n        this.noIcons = false;\n        this.toggles = false;\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('pb-collapse-open', () => {\n            this.open();\n        });\n        if (this.toggles) {\n            this.subscribeTo('pb-collapse-open', (ev) => {\n                if (!ev.detail || ev.detail._source === this) {\n                    return;\n                }\n                for (const collapse of this.querySelectorAll('pb-collapse')) {\n                    if (collapse === ev.detail._source) {\n                        return;\n                    }\n                }\n                this.close();\n            });\n        }\n    }\n\n    /**\n             * opens the collapsible section\n             */\n    open() {\n        if (this.opened) {\n            return;\n        }\n        this.opened = true;\n\n        this.emitTo('pb-collapse-open', this);\n    }\n\n    /**\n     * closes the collapsible section\n     */\n    close() {\n        if (this.opened) {\n            this.opened = false;\n        }\n    }\n\n    /**\n     * toggles the collapsible state\n     */\n    toggle() {\n        this.opened = !this.opened;\n        if (this.opened) {\n            this.emitTo('pb-collapse-open', this.data);\n        }\n    }\n\n    render() {\n        return html`\n            <div id=\"trigger\" @click=\"${this.toggle}\" class=\"collapse-trigger\">\n                ${\n            !this.noIcons ?\n                html`<iron-icon icon=\"${this.opened ? this.collapseIcon : this.expandIcon}\"></iron-icon>` :\n                null\n            }\n                <slot id=\"collapseTrigger\" name=\"collapse-trigger\"></slot>\n            </div>\n            <iron-collapse id=\"collapse\" horizontal=\"${this.horizontal}\" no-animation=\"${this.noAnimation}\" .opened=\"${this.opened}\">\n                <slot name=\"collapse-content\"></slot>\n            </iron-collapse>\n        `;\n    }\n\n    static get styles() {\n        return css`\n            :host {\n                display: block;\n            }\n\n            #trigger {\n                display: table-row;\n            }\n\n            #trigger iron-icon {\n                display: table-cell;\n                padding: var(--pb-collapse-icon-padding, 0 4px 0 0);\n            }\n\n            slot[name=\"collapse-trigger\"] {\n                display: table-cell;\n            }\n        `;\n    }\n}\ncustomElements.define('pb-collapse', PbCollapse);","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\n/*\n`PaperItemBehavior` is a convenience behavior shared by <paper-item> and\n<paper-icon-item> that manages the shared control states and attributes of\nthe items.\n*/\n/** @polymerBehavior PaperItemBehavior */\nexport const PaperItemBehaviorImpl = {\n  hostAttributes: {role: 'option', tabindex: '0'}\n};\n\n/** @polymerBehavior */\nexport const PaperItemBehavior =\n    [IronButtonState, IronControlState, PaperItemBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/**\nMaterial design:\n[Lists](https://www.google.com/design/spec/components/lists.html)\n\n`<paper-item>` is an interactive list item. By default, it is a horizontal\nflexbox.\n\n    <paper-item>Item</paper-item>\n\nUse this element with `<paper-item-body>` to make Material Design styled\ntwo-line and three-line items.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n      <iron-icon icon=\"warning\"></iron-icon>\n    </paper-item>\n\nTo use `paper-item` as a link, wrap it in an anchor tag. Since `paper-item` will\nalready receive focus, you may want to prevent the anchor tag from receiving\nfocus as well by setting its tabindex to -1.\n\n    <a href=\"https://www.polymer-project.org/\" tabindex=\"-1\">\n      <paper-item raised>Polymer Project</paper-item>\n    </a>\n\nIf you are concerned about performance and want to use `paper-item` in a\n`paper-listbox` with many items, you can just use a native `button` with the\n`paper-item` class applied (provided you have correctly included the shared\nstyles):\n\n    <style is=\"custom-style\" include=\"paper-item-shared-styles\"></style>\n\n    <paper-listbox>\n      <button class=\"paper-item\" role=\"option\">Inbox</button>\n      <button class=\"paper-item\" role=\"option\">Starred</button>\n      <button class=\"paper-item\" role=\"option\">Sent mail</button>\n    </paper-listbox>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-min-height` | Minimum height of the item | `48px`\n`--paper-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n### Accessibility\n\nThis element has `role=\"listitem\"` by default. Depending on usage, it may be\nmore appropriate to set `role=\"menuitem\"`, `role=\"menuitemcheckbox\"` or\n`role=\"menuitemradio\"`.\n\n    <paper-item role=\"menuitemcheckbox\">\n      <paper-item-body>\n        Show your status\n      </paper-item-body>\n      <paper-checkbox></paper-checkbox>\n    </paper-item>\n\n@group Paper Elements\n@element paper-item\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\">\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n      }\n    </style>\n    <slot></slot>\n`,\n\n  is: 'paper-item',\n  behaviors: [PaperItemBehavior]\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n\nimport '@polymer/paper-styles/shadow.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nconst template = html`\n<dom-module id=\"paper-material-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        position: relative;\n      }\n\n      :host([elevation=\"1\"]) {\n        @apply --shadow-elevation-2dp;\n      }\n\n      :host([elevation=\"2\"]) {\n        @apply --shadow-elevation-4dp;\n      }\n\n      :host([elevation=\"3\"]) {\n        @apply --shadow-elevation-6dp;\n      }\n\n      :host([elevation=\"4\"]) {\n        @apply --shadow-elevation-8dp;\n      }\n\n      :host([elevation=\"5\"]) {\n        @apply --shadow-elevation-16dp;\n      }\n    </style>\n  </template>\n</dom-module>\n`;\ntemplate.setAttribute('style', 'display: none;');\ndocument.body.appendChild(template.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/paper-styles/shadow.js';\nimport './paper-material-shared-styles.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Cards](https://www.google.com/design/spec/components/cards.html)\n\n`paper-material` is a container that renders two shadows on top of each other to\ncreate the effect of a lifted piece of paper.\n\nExample:\n\n    <paper-material elevation=\"1\">\n      ... content ...\n    </paper-material>\n\n@group Paper Elements\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-material-shared-styles\"></style>\n    <style>\n      :host([animated]) {\n        @apply --shadow-transition;\n      }\n      :host {\n        @apply --paper-material;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-material',\n\n  properties: {\n    /**\n     * The z-depth of this element, from 0-5. Setting to 0 will remove the\n     * shadow, and each increasing number greater than 0 will be \"deeper\"\n     * than the last.\n     *\n     * @attribute elevation\n     * @type number\n     * @default 1\n     */\n    elevation: {type: Number, reflectToAttribute: true, value: 1},\n\n    /**\n     * Set this to true to animate the shadow when setting a new\n     * `elevation` value.\n     *\n     * @attribute animated\n     * @type boolean\n     * @default false\n     */\n    animated: {type: Boolean, reflectToAttribute: true, value: false}\n  }\n});\n","import '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-ripple/paper-ripple.js';\nimport '@polymer/paper-material/paper-material.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { Templatizer } from '@polymer/polymer/lib/legacy/templatizer-behavior.js';\nimport { dom, flush } from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\nvar DIRECTION = {\n  UP: 'up',\n  DOWN: 'down'\n};\n\nvar KEY_CODES = {\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39,\n  UP_ARROW: 38,\n  DOWN_ARROW: 40,\n  ENTER: 13,\n  ESCAPE: 27\n};\n\n/**\n  `paper-autocomplete-suggestions`\n\n  **From v4.x.x, this component only works with Polymer 3.0+.**\n\n  [![Published on webcomponents.org](https://img.shields.io/badge/webcomponents.org-published-blue.svg)](https://www.webcomponents.org/element/@cwmr/paper-autocomplete)\n\n  Allows to add autocomplete capabilities to any input field. This is desirable when you have an input field with custom\n  logic and you just want to add the feature to help users with the selection. If you want to use it in combination with\n  a regular `<paper-input>`, you can use `<paper-autocomplete>`.\n\n  Example:\n  ```\n  <div class=\"autocomplete-wrapper\">\n    <paper-input id=\"myInput\" label=\"Select State\"></paper-input>\n\n    <paper-autocomplete-suggestions\n      for=\"myInput\"\n      source=\"[[accounts]]\"></paper-autocomplete-suggestions>\n  </div>\n  ```\n\n  It is **important to provide both `textProperty` and `valueProperty` when working with a custom search function and\n  or custom templates.** They are needed to keep the component accessible and for the events (e.g. onSelect) to keep\n  working.\n\n  ### Custom search\n  This component has the public method `queryFn` that is called in each key stroke and it is responsible to query\n  all items in the `source` and returns only those items that matches certain filtering criteria. By default, this\n  component search for items that start with the recent query (case insensitive).\n  You can override this behavior providing your own query function, as long as these two requirements are fulfill:\n\n  - The query function is synchronous.\n  - The API is respected and the method always return an Array.\n\n  The template use to render each suggestion depends on the structure of each object that this method returns. For the\n  default template, each suggestion should follow this object structure:\n\n  ```\n    {\n      text: objText,\n      value: objValue\n    }\n  ```\n\n  This function is only used when a local data source is used. When using a `remoteDataSource` user is responsible of\n  doing the search and specify suggestions manually.\n\n  ### Custom templates\n  A template for each suggestion can be provided, but for now, there are limitations in the way you can customize\n  the template. Please read the the following sections carefully.\n  In order to set your own template, you need to add a `<template>` tag with the slot name\n  `autocomplete-custom-template` and a structure equivalent to the one shown in the `<account-autocomplete>` component in\n  the demo.\n\n  You need to always maintain this structure. Then you can customize the content of paper-item. These are the reasons\n  why you need to maintain it:\n\n  - `onSelectHandler` it is very important because it will notify the `autocomplete` component when user selects one item.\n  If you don't add this option, when user clicks in one of the items, nothing will happen.\n  - `id`, `role` and `aria-selected` need to be there for accessibility reasons. If you don't set them, the component\n  will continue working but it will not be accessible for user with disabilities.\n\n  It is important to clarify that methods `_onSelect` and `_getSuggestionId` do not need to be implemented. They are\n  part of the logic of `paper-autocomplete-suggestions`.\n\n  When providing your own custom template, you might also need to provide your own custom search function. The reason\n  for that is that the default search function only exposes text and value in the results. If each item in your data\n  source contains more information, then you won't be able to access it. See the code of `<address-autocomplete>`\n  element in the demo folder for a complete example.\n\n  Another important thing to point out is related to the height of each suggestion item in the results. The height of\n  the suggestion template changes dynamically depending on the height of a suggestion item. However, the following\n  assumptions were made:\n  - All suggestions items have the same height\n  - The height of each item is fixed and can be determined at any time. For example, if you want to use images in the\n  results, make sure they have a placeholder or a fixed height.\n\n  ### Styling\n\n  `<paper-autocomplete-suggestions>` provides the following custom properties and mixins\n  for styling:\n\n  Custom property | Description | Default\n  ----------------|-------------|----------\n  `--paper-item-min-height` | paper item min height | `36px`\n  `--suggestions-wrapper` | mixin to apply to the suggestions container | `{}`\n  `--suggestions-item` | mixin to apply to the suggestions items | `{}`\n\n  ### Accessibility\n  This component exposes certain necessary values in order to make your component accessible. When checking the ARIA\n  specs, it is said that you need to inform users of the following changes:\n  - Whether the popup with suggestions is open or not.\n  - Id of the currently highlighted element\n\n You can access these values using the following properties: `isOpen` and `highlightedSuggestion`. The id of each\n element in highlightedSuggestion a random and unique id.\n\n In addition, as long as developers follow the general structure of each suggestion template, the following A11Y\n features are set in each suggestion:\n - `role=\"option\"`\n - `aria-selected=\"true|false\"`. This value will be false for all suggestion except in the one which is currently\n highlighted.\n\n By default, suggestions are only displayed after the user types, even if the current input should display them. If\n  you want to show suggestions on focus (when available), you should add the property `show-results-on-focus`.\n\n  @demo demo/paper-autocomplete-suggestions-demo.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      paper-material {\n        display: none;\n        position: absolute;\n        width: 100%;\n        z-index: 1000;\n        background-color: white;\n        max-height: 252px;\n        overflow-y: auto;\n\n        @apply --suggestions-wrapper;\n      }\n\n      paper-item,\n      :host ::slotted(paper-item) {\n        min-height: var(--paper-item-min-height, 36px);\n        padding: 0 16px;\n        position: relative;\n        line-height: 18px;\n\n        @apply --suggestions-item;\n      }\n\n      paper-item:hover,\n      :host ::slotted(paper-item:hover) {\n        background: #eee;\n        color: #333;\n        cursor: pointer;\n      }\n\n      paper-item.active,\n      :host ::slotted(paper-item.active) {\n        background: #eee;\n        color: #333;\n      }\n\n      /**\n       * IE11 paper-item min-height bug: https://github.com/PolymerElements/paper-item/issues/35\n       */\n      @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n        paper-item {\n          height: var(--paper-item-min-height, 36px);\n        }\n      }\n    </style>\n    <div>\n      <!-- unselectable is needed to fix an issue related to the focus being taken away when clicking in the\n       results scrollbar -->\n      <paper-material elevation=\"1\" id=\"suggestionsWrapper\" unselectable=\"on\"></paper-material>\n\n      <!-- Default suggestion template -->\n      <template id=\"defaultTemplate\">\n        <paper-item id\\$=\"[[_getSuggestionId(index)]]\" role=\"option\" aria-selected=\"false\" on-tap=\"_onSelect\">\n          <div>[[_getItemText(item)]]</div>\n          <paper-ripple></paper-ripple>\n        </paper-item>\n      </template>\n\n  <!-- Custom template -->\n  <slot id=\"templates\" name=\"autocomplete-custom-template\"></slot>\n  </div>\n`,\n\n  is: 'paper-autocomplete-suggestions',\n\n  behaviors: [\n    Templatizer\n  ],\n\n  properties: {\n    /**\n     * Id of input\n     */\n    'for': {\n      type: String\n    },\n\n    /**\n     * `true` if the suggestions list is open, `false otherwise`\n     */\n    isOpen: {\n      type: Boolean,\n      value: false,\n      notify: true\n    },\n\n    /**\n     * Minimum length to trigger suggestions\n     */\n    minLength: {\n      type: Number,\n      value: 1\n    },\n\n    /**\n     * Max number of suggestions to be displayed without scrolling\n     */\n    maxViewableItems: {\n      type: Number,\n      value: 7\n    },\n\n    /**\n     * Property of local datasource to as the text property\n     */\n    textProperty: {\n      type: String,\n      value: 'text'\n    },\n\n    /**\n     * Property of local datasource to as the value property\n     */\n    valueProperty: {\n      type: String,\n      value: 'value'\n    },\n\n    /**\n     * `source` Array of objects with the options to execute the autocomplete feature\n     */\n    source: {\n      type: Array\n    },\n\n    /**\n     *  Object containing information about the current selected option. The structure of the object depends on the\n     *  structure of each element in the data source.\n     */\n    selectedOption: {\n      type: Object,\n      notify: true\n    },\n\n    /**\n     * Binds to a remote data source\n     */\n    remoteSource: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Event type separator\n     */\n    eventNamespace: {\n      type: String,\n      value: '-'\n    },\n\n    /**\n     * Current highlighted suggestion. The structure of the object is:\n     * ```\n     * {\n     *    elementId: ID // id of the highlighted DOM element\n     *    option: // highlighted option data\n     * }\n     * ```\n     */\n    highlightedSuggestion: {\n      type: Object,\n      value: {},\n      notify: true\n    },\n\n    /**\n     * Function used to filter available items. This function is actually used by paper-autocomplete-suggestions,\n     * it is also exposed here so it is possible to provide a custom queryFn.\n     */\n     queryFn: {\n      type: Function\n    },\n\n    /**\n     * If `true`, it will always highlight the first result each time new suggestions are presented.\n     */\n    highlightFirst: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Set to `true` to show available suggestions on focus. This overrides the default behavior that only shows\n     * notifications after user types\n     */\n    showResultsOnFocus: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `_suggestions` Array with the actual suggestions to display\n     */\n    _suggestions: {\n      type: Array,\n      observer: '_onSuggestionsChanged'\n    },\n\n    /**\n     * Indicates the position in the suggestions popup of the currently highlighted element, being `0` the first one,\n     * and `this._suggestions.length - 1` the position of the last one.\n     */\n    _currentIndex: {\n      type: Number,\n      value: -1\n    },\n\n    /**\n     * Indicates the current position of the scroll. Then the `scrollTop` position is calculated multiplying the\n     * `_itemHeight` with the current index.\n     */\n    _scrollIndex: {\n      type: Number,\n      value: 0\n    },\n\n    /**\n     * Height of each suggestion element in pixels\n     */\n    _itemHeight: {\n      type: Number,\n      value: 36,\n      observer: '_itemHeightChanged'\n    },\n\n    _value: {\n      value: undefined\n    },\n\n    _text: {\n      value: undefined\n    },\n\n    /**\n     * This value is used as a base to generate unique individual ids that need to be added to each suggestion for\n     * accessibility reasons.\n     */\n    _idItemSeed: {\n      type: String,\n      value: 'aria-' + new Date().getTime() + '-' + (Math.floor(Math.random() * 1000)),\n      readOnly: true\n    },\n\n    /**\n     * Reference to binded functions so we can call removeEventListener on element detached\n     */\n    _bindedFunctions: {\n      type: Object,\n      value: function () {\n        return {\n          _onKeypress: null,\n          _onFocus: null,\n          _onBlur: null\n        };\n      }\n    },\n\n    /**\n     * Indicates if the the height of each suggestion item has been already calculated.\n     * The assumption is that item height is fixed and it will not change.\n     */\n    _hasItemHighBeenCalculated: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * To avoid unnecessary access to the DOM, we keep a reference to the current template being used\n     */\n    __customTplRef: Object\n  },\n\n  // Element Lifecycle\n\n  ready: function () {\n    this._value = this.value;\n\n    // This is important to be able to access component methods inside the templates used with Templatizer\n    this.dataHost = this;\n\n    // Need to capture mousedown to prevent the focus to switch from input field when user clicks in the scrollbar\n    // and the autosuggest is a child of an element with tabindex.\n    this.$.suggestionsWrapper.addEventListener('mousedown', function (event) {\n      event.preventDefault();\n    });\n\n    // We need to enforce that dataHost is the suggestions and not the custom polymer element where the template\n    // is defined. If we do not do this, it won't be possible to access paperSuggestions from the custom template\n    // TODO: find a way to achieve this without modifying Polymer internal properties\n    this._suggestionTemplate.__dataHost = this;\n    this.templatize(this._suggestionTemplate);\n  },\n\n  attached: function () {\n    this._input = this.parentNode.querySelector('#' + this.for);\n\n    if (this._input === null) {\n      throw new Error('Cannot find input field with id: ' + this.for);\n    }\n\n    this._bindedFunctions._onKeypress = this._onKeypress.bind(this);\n    this._bindedFunctions._onFocus = this._onFocus.bind(this);\n    this._bindedFunctions._onBlur = this._onBlur.bind(this);\n\n    this._input.addEventListener('keyup', this._bindedFunctions._onKeypress);\n    this._input.addEventListener('focus', this._bindedFunctions._onFocus);\n    this._input.addEventListener('blur', this._bindedFunctions._onBlur);\n  },\n\n  detached: function () {\n    this.cancelDebouncer('_onSuggestionChanged');\n\n    this._input.removeEventListener('keyup', this._bindedFunctions._onKeypress);\n    this._input.removeEventListener('focus', this._bindedFunctions._onFocus);\n    this._input.removeEventListener('blur', this._bindedFunctions._onBlur);\n\n    this._input = null;\n    this.__customTplRef = null;\n  },\n\n  // Element Behavior\n\n  /**\n   * Get the text property from the suggestion\n   * @param {Object} suggestion The suggestion item\n   * @return {String}\n   */\n  _getItemText: function (suggestion) {\n    return suggestion[this.textProperty];\n  },\n\n  /**\n   * Show the suggestions wrapper\n   */\n  _showSuggestionsWrapper: function () {\n    var suggestionsWrapper = this.$.suggestionsWrapper;\n\n    suggestionsWrapper.style.display = 'block';\n    suggestionsWrapper.setAttribute('role', 'listbox');\n\n    this.isOpen = true;\n  },\n\n  /**\n   * Hide the suggestions wrapper\n   */\n  _hideSuggestionsWrapper: function () {\n    var suggestionsWrapper = this.$.suggestionsWrapper;\n\n    suggestionsWrapper.style.display = 'none';\n    suggestionsWrapper.removeAttribute('role');\n\n    this.isOpen = false;\n    this.highlightedSuggestion = {};\n\n    this._clearSuggestions();\n  },\n\n  _handleSuggestions: function (event) {\n    if (!this.remoteSource) this._createSuggestions(event);\n    else this._remoteSuggestions();\n  },\n\n  _remoteSuggestions: function () {\n    var value = this._input.value;\n\n    var option = {\n      text: value,\n      value: value\n    };\n\n    if (value && value.length >= this.minLength) {\n      this._fireEvent(option, 'change');\n    } else {\n      this._suggestions = [];\n    }\n  },\n\n  _bindSuggestions: function (arr) {\n    if (arr.length && arr.length > 0) {\n      this._suggestions = arr;\n      this._currentIndex = -1;\n      this._scrollIndex = 0;\n    } else {\n      this._suggestions = [];\n    }\n  },\n\n  _createSuggestions: function (event) {\n    this._currentIndex = -1;\n    this._scrollIndex = 0;\n\n    var value = event.target.value;\n\n    if (value !== null && value.length >= this.minLength) {\n      value = value.toLowerCase();\n\n      // Search for the word in the source properties.\n      if (this.source && this.source.length > 0) {\n        // Call queryFn. User can override queryFn() to provide custom search functionality\n        this._suggestions = this.queryFn(this.source, value);\n      }\n    } else {\n      this._suggestions = [];\n    }\n  },\n\n  get _suggestionTemplate() {\n    if (this.__customTplRef) {\n      return this.__customTplRef;\n    }\n    var customTemplate = this.getEffectiveChildren();\n    this.__customTplRef = customTemplate.length > 0 ? customTemplate[0] : this.$.defaultTemplate;\n\n    return this.__customTplRef;\n  },\n\n  /**\n   * Render suggestions in the suggestionsWrapper container\n   * @param {Array} suggestions An array containing the suggestions to be rendered. This value is not optional, so\n   *    in case no suggestions need to be rendered, you should either not call this method or provide an empty array.\n   */\n  _renderSuggestions: function (suggestions) {\n    var suggestionsContainer = dom(this.$.suggestionsWrapper);\n\n    this._clearSuggestions();\n\n    [].slice.call(suggestions).forEach(function (result, index) {\n      // clone the template and bind with the model\n      var clone = this.stamp();\n      clone.item = result;\n      clone.index = index;\n\n      suggestionsContainer.appendChild(clone.root);\n\n    }.bind(this));\n  },\n\n  _clearSuggestions: function () {\n    var suggestionsContainer = dom(this.$.suggestionsWrapper),\n      last;\n    while (last = suggestionsContainer.lastChild) suggestionsContainer.removeChild(last);\n  },\n\n  /**\n   * Listener to changes to _suggestions state\n   */\n  _onSuggestionsChanged: function () {\n    this.debounce('_onSuggestionChanged', () => {\n      this._renderSuggestions(this._suggestions);\n\n      if (this._suggestions.length > 0) {\n        this._showSuggestionsWrapper();\n      } else {\n        this._hideSuggestionsWrapper();\n      }\n\n      flush();\n\n      this._resetScroll();\n\n      if (!this._hasItemHighBeenCalculated) {\n        var firstSuggestionElement = this.$.suggestionsWrapper.querySelector('paper-item');\n\n        if (firstSuggestionElement !== null) {\n          // Update maxHeight of suggestions wrapper depending on the height of each item result\n          this._itemHeight = firstSuggestionElement.offsetHeight;\n\n          this._hasItemHighBeenCalculated = true;\n        }\n      }\n\n      if (this.highlightFirst) {\n        this._moveHighlighted(DIRECTION.DOWN);\n      }\n    }, 100);\n  },\n\n  _selection: function (index) {\n    var selectedOption = this._suggestions[index];\n\n    this._input.value = selectedOption[this.textProperty];\n    this.selectedOption = selectedOption;\n\n    this._value = this.value;\n    this._text = this.text;\n    this._emptyItems();\n\n    this._fireEvent(selectedOption, 'selected');\n\n    this.hideSuggestions();\n  },\n\n  /**\n   * Get all suggestion elements\n   * @return {Array} a list of all suggestion elements\n   */\n  _getItems: function () {\n    return this.$.suggestionsWrapper.querySelectorAll('paper-item');\n  },\n\n  /**\n   * Empty the list of current suggestions being displayed\n   */\n  _emptyItems: function () {\n    this._suggestions = [];\n  },\n\n  _getId: function () {\n    var id = this.getAttribute('id');\n    if (!id) id = this.dataset.id;\n    return id;\n  },\n\n  /**\n   * Remove the the active state from all suggestion items\n   */\n  _removeActive: function (items) {\n    [].slice.call(items).forEach(function (item) {\n      item.classList.remove('active');\n      item.setAttribute('aria-selected', 'false');\n    });\n  },\n\n  /**\n   * Key press event handler\n   */\n  _onKeypress: function (event) {\n    var keyCode = event.which || event.keyCode;\n\n    switch (keyCode) {\n    case KEY_CODES.DOWN_ARROW:\n      this._moveHighlighted(DIRECTION.DOWN);\n      break;\n    case KEY_CODES.UP_ARROW:\n      this._moveHighlighted(DIRECTION.UP);\n      break;\n    case KEY_CODES.ENTER:\n      this._keyenter();\n      break;\n    case KEY_CODES.ESCAPE:\n      this._hideSuggestionsWrapper();\n      break;\n      // For left and right arrow, component should do nothing\n    case KEY_CODES.LEFT_ARROW:\n      // fall through\n    case KEY_CODES.RIGHT_ARROW:\n      break;\n    default:\n      this._handleSuggestions(event);\n    }\n  },\n\n  /**\n   * Event handler for the key ENTER press event\n   */\n  _keyenter: function () {\n    if (this.$.suggestionsWrapper.style.display === 'block' && this._currentIndex > -1) {\n      var index = this._currentIndex;\n      this._selection(index);\n    }\n  },\n\n  /**\n   *  Move the current highlighted suggestion up or down\n   *  @param {string} direction Possible values are DIRECTION.UP or DIRECTION.DOWN\n   */\n  _moveHighlighted: function (direction) {\n    var items = this._getItems();\n\n    if (items.length === 0) {\n      return;\n    }\n\n    var numberOfItems = items.length - 1;\n\n    var isFirstItem = this._currentIndex === 0;\n    var isLastItem = this._currentIndex === numberOfItems;\n    var isNoItemHighlighted = this._currentIndex === -1;\n\n    if ((isNoItemHighlighted || isFirstItem) && direction === DIRECTION.UP) {\n      this._currentIndex = numberOfItems;\n    } else if (isLastItem && direction === DIRECTION.DOWN) {\n      this._currentIndex = 0;\n    } else {\n      var modifier = direction === DIRECTION.DOWN ? 1 : -1;\n      this._currentIndex = this._currentIndex + modifier;\n    }\n\n    var highlightedOption = this._suggestions[this._currentIndex];\n    var highlightedItem = items[this._currentIndex];\n\n    this._removeActive(items);\n\n    highlightedItem.classList.add('active');\n    highlightedItem.setAttribute('aria-selected', 'true');\n\n    this._setHighlightedSuggestion(highlightedOption, highlightedItem.id);\n\n    this._scroll(direction);\n  },\n\n  /**\n   * Move scroll (if needed) to display the active element in the suggestions list.\n   * @param {string} direction Direction to scroll. Possible values are `DIRECTION.UP` and `DIRECTION.DOWN`.\n   */\n  _scroll: function (direction) {\n    var newScrollValue, isSelectedOutOfView;\n\n    var viewIndex = this._currentIndex - this._scrollIndex;\n\n    // This happens only when user switch from last item to first one\n    var isFirstItemAndOutOfView = this._currentIndex === 0 && viewIndex < 0;\n\n    // This happens only when user switch from first or no item to last one\n    var isLastItemAndOutOfView =\n      this._currentIndex === this._suggestions.length - 1 && viewIndex >= this.maxViewableItems;\n\n    if (isFirstItemAndOutOfView && direction === DIRECTION.DOWN) {\n      newScrollValue = 0;\n      isSelectedOutOfView = true;\n    } else if (isLastItemAndOutOfView && direction === DIRECTION.UP) {\n      newScrollValue = this._suggestions.length - this.maxViewableItems;\n      isSelectedOutOfView = true;\n    } else if (direction === DIRECTION.UP) {\n      newScrollValue = this._scrollIndex - 1;\n      isSelectedOutOfView = viewIndex < 0;\n    } else {\n      newScrollValue = this._scrollIndex + 1;\n      isSelectedOutOfView = viewIndex >= this.maxViewableItems;\n    }\n\n    // Only when the current active element is out of view, we need to move the position of the scroll\n    if (isSelectedOutOfView) {\n      this._scrollIndex = newScrollValue;\n      this.$.suggestionsWrapper.scrollTop = this._scrollIndex * this._itemHeight;\n    }\n  },\n\n  /**\n   * Reset scroll back to zero\n   */\n  _resetScroll: function () {\n    this.$.suggestionsWrapper.scrollTop = 0;\n  },\n\n  /**\n   * Set the current highlighted suggestion\n   * @param {Object} option Data of the highlighted option\n   * @param {string} elementId id of the highlighted dom element.\n   */\n  _setHighlightedSuggestion: function (option, elementId) {\n    this.highlightedSuggestion = {\n      option: option,\n      elementId: elementId,\n      textValue: option[this.textProperty],\n      value: option[this.valueProperty]\n    };\n  },\n\n  _fireEvent: function (option, evt) {\n    var id = this._getId();\n    var event = 'autocomplete' + this.eventNamespace + evt;\n\n    this.fire(event, {\n      id: id,\n      value: option[this.valueProperty] || option.value,\n      text: option[this.textProperty] || option.text,\n      target: this,\n      option: option\n    });\n  },\n\n  _onSelect: function (event) {\n    var index = this.modelForElement(event.currentTarget).index;\n    this._selection(index);\n  },\n\n  /**\n   * Event handler for the onBlur event\n   */\n  _onBlur: function () {\n    var option = {\n      text: this.text,\n      value: this.value\n    };\n\n    this._fireEvent(option, 'blur');\n\n    this.hideSuggestions();\n  },\n\n  /**\n   * Event handler for the onFocus event\n   */\n  _onFocus: function (event) {\n    var option = {\n      text: this.text,\n      value: this.value\n    };\n\n    if (this.showResultsOnFocus) {\n      this._handleSuggestions(event);\n    }\n\n    this._fireEvent(option, 'focus');\n  },\n\n  /**\n   * Generate a suggestion id for a certain index\n   * @param {number} index Position of the element in the suggestions list\n   * @returns {string} a unique id based on the _idItemSeed and the position of that element in the suggestions popup\n   * @private\n   */\n  _getSuggestionId: function (index) {\n    return this._idItemSeed + '-' + index;\n  },\n\n  /**\n   * When item height is changed, the maxHeight of the suggestionWrapper need to be updated\n   */\n  _itemHeightChanged: function () {\n    this.$.suggestionsWrapper.style.maxHeight = this._itemHeight * this.maxViewableItems + 'px';\n  },\n\n  /****************************\n   * PUBLIC\n   ****************************/\n\n  /**\n   * Sets the component's current suggestions\n   * @param {Array} arr\n   */\n  suggestions: function (arr) {\n    this._bindSuggestions(arr);\n  },\n\n  /**\n   * Hides the suggestions popup\n   */\n  hideSuggestions: function () {\n    setTimeout(function () {\n      this._hideSuggestionsWrapper();\n    }.bind(this), 0);\n  },\n\n  /**\n   * Query function is called on each keystroke to query the data source and returns the suggestions that matches\n   * with the filtering logic included.\n   * @param {Array} datasource An array containing all items before filtering\n   * @param {string} query Current value in the input field\n   * @returns {Array} an array containing only those items in the data source that matches the filtering logic.\n   */\n  queryFn: function (datasource, query) {\n    var queryResult = [];\n\n    datasource.forEach(function (item) {\n      var objText, objValue;\n\n      if (typeof item === 'object') {\n        objText = item[this.textProperty];\n        objValue = item[this.valueProperty];\n      } else {\n        objText = item.toString();\n        objValue = objText;\n      }\n\n      if (objText.toLowerCase().indexOf(query) === 0) {\n        // NOTE: the structure of the result object matches with the current template. For custom templates, you\n        // might need to return more data\n        var resultItem = {};\n        resultItem[this.textProperty] = objText;\n        resultItem[this.valueProperty] = objValue;\n        queryResult.push(resultItem);\n      }\n    }.bind(this));\n\n    return queryResult;\n  }\n\n  /**\n   * Fired when a selection is made\n   *\n   * @event autocomplete-selected\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input change\n   *\n   * @event autocomplete-change\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input focus\n   *\n   * @event autocomplete-focus\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input blur\n   *\n   * @event autocomplete-blur\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input reset/clear\n   *\n   * @event autocomplete-reset-blur\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n});\n","/*!\n * hotkeys-js v3.8.7\n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.\n * \n * Copyright (c) 2021 kenny wong <wowohoo@qq.com>\n * http://jaywcjlove.github.io/hotkeys\n * \n * Licensed under the MIT license.\n */\n\nvar isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\nfunction addEvent(object, event, method) {\n  if (object.addEventListener) {\n    object.addEventListener(event, method, false);\n  } else if (object.attachEvent) {\n    object.attachEvent(\"on\".concat(event), function () {\n      method(window.event);\n    });\n  }\n} // 修饰键转换成对应的键码\n\n\nfunction getMods(modifier, key) {\n  var mods = key.slice(0, key.length - 1);\n\n  for (var i = 0; i < mods.length; i++) {\n    mods[i] = modifier[mods[i].toLowerCase()];\n  }\n\n  return mods;\n} // 处理传的key字符串转换成数组\n\n\nfunction getKeys(key) {\n  if (typeof key !== 'string') key = '';\n  key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n  var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n  var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n  for (; index >= 0;) {\n    keys[index - 1] += ',';\n    keys.splice(index, 1);\n    index = keys.lastIndexOf('');\n  }\n\n  return keys;\n} // 比较修饰键的数组\n\n\nfunction compareArray(a1, a2) {\n  var arr1 = a1.length >= a2.length ? a1 : a2;\n  var arr2 = a1.length >= a2.length ? a2 : a1;\n  var isIndex = true;\n\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n  }\n\n  return isIndex;\n}\n\nvar _keyMap = {\n  backspace: 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '⇪': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': isff ? 173 : 189,\n  '=': isff ? 61 : 187,\n  ';': isff ? 59 : 186,\n  '\\'': 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220\n}; // Modifier Keys\n\nvar _modifier = {\n  // shiftKey\n  '⇧': 16,\n  shift: 16,\n  // altKey\n  '⌥': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '⌃': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '⌘': 91,\n  cmd: 91,\n  command: 91\n};\nvar modifierMap = {\n  16: 'shiftKey',\n  18: 'altKey',\n  17: 'ctrlKey',\n  91: 'metaKey',\n  shiftKey: 16,\n  ctrlKey: 17,\n  altKey: 18,\n  metaKey: 91\n};\nvar _mods = {\n  16: false,\n  18: false,\n  17: false,\n  91: false\n};\nvar _handlers = {}; // F1~F12 special key\n\nfor (var k = 1; k < 20; k++) {\n  _keyMap[\"f\".concat(k)] = 111 + k;\n}\n\nvar _downKeys = []; // 记录摁下的绑定键\n\nvar _scope = 'all'; // 默认热键范围\n\nvar elementHasBindEvent = []; // 已绑定事件的节点记录\n// 返回键码\n\nvar code = function code(x) {\n  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n}; // 设置获取当前范围（默认为'所有'）\n\n\nfunction setScope(scope) {\n  _scope = scope || 'all';\n} // 获取当前范围\n\n\nfunction getScope() {\n  return _scope || 'all';\n} // 获取摁下绑定键的键值\n\n\nfunction getPressedKeyCodes() {\n  return _downKeys.slice(0);\n} // 表单控件控件判断 返回 Boolean\n// hotkey is effective only when filter return true\n\n\nfunction filter(event) {\n  var target = event.target || event.srcElement;\n  var tagName = target.tagName;\n  var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n  if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n    flag = false;\n  }\n\n  return flag;\n} // 判断摁下的键是否为某个键，返回true或者false\n\n\nfunction isPressed(keyCode) {\n  if (typeof keyCode === 'string') {\n    keyCode = code(keyCode); // 转换成键码\n  }\n\n  return _downKeys.indexOf(keyCode) !== -1;\n} // 循环删除handlers中的所有 scope(范围)\n\n\nfunction deleteScope(scope, newScope) {\n  var handlers;\n  var i; // 没有指定scope，获取scope\n\n  if (!scope) scope = getScope();\n\n  for (var key in _handlers) {\n    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n      handlers = _handlers[key];\n\n      for (i = 0; i < handlers.length;) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n      }\n    }\n  } // 如果scope被删除，将scope重置为all\n\n\n  if (getScope() === scope) setScope(newScope || 'all');\n} // 清除修饰键\n\n\nfunction clearModifier(event) {\n  var key = event.keyCode || event.which || event.charCode;\n\n  var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n  if (i >= 0) {\n    _downKeys.splice(i, 1);\n  } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n  if (event.key && event.key.toLowerCase() === 'meta') {\n    _downKeys.splice(0, _downKeys.length);\n  } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n  if (key === 93 || key === 224) key = 91;\n\n  if (key in _mods) {\n    _mods[key] = false; // 将修饰键重置为false\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = false;\n    }\n  }\n}\n\nfunction unbind(keysInfo) {\n  // unbind(), unbind all keys\n  if (!keysInfo) {\n    Object.keys(_handlers).forEach(function (key) {\n      return delete _handlers[key];\n    });\n  } else if (Array.isArray(keysInfo)) {\n    // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n    keysInfo.forEach(function (info) {\n      if (info.key) eachUnbind(info);\n    });\n  } else if (typeof keysInfo === 'object') {\n    // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n    if (keysInfo.key) eachUnbind(keysInfo);\n  } else if (typeof keysInfo === 'string') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // support old method\n    // eslint-disable-line\n    var scope = args[0],\n        method = args[1];\n\n    if (typeof scope === 'function') {\n      method = scope;\n      scope = '';\n    }\n\n    eachUnbind({\n      key: keysInfo,\n      scope: scope,\n      method: method,\n      splitKey: '+'\n    });\n  }\n} // 解除绑定某个范围的快捷键\n\n\nvar eachUnbind = function eachUnbind(_ref) {\n  var key = _ref.key,\n      scope = _ref.scope,\n      method = _ref.method,\n      _ref$splitKey = _ref.splitKey,\n      splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n  var multipleKeys = getKeys(key);\n  multipleKeys.forEach(function (originKey) {\n    var unbindKeys = originKey.split(splitKey);\n    var len = unbindKeys.length;\n    var lastKey = unbindKeys[len - 1];\n    var keyCode = lastKey === '*' ? '*' : code(lastKey);\n    if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n    if (!scope) scope = getScope();\n    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n    _handlers[keyCode] = _handlers[keyCode].map(function (record) {\n      // 通过函数判断，是否解除绑定，函数相等直接返回\n      var isMatchingMethod = method ? record.method === method : true;\n\n      if (isMatchingMethod && record.scope === scope && compareArray(record.mods, mods)) {\n        return {};\n      }\n\n      return record;\n    });\n  });\n}; // 对监听对应快捷键的回调函数进行处理\n\n\nfunction eventHandler(event, handler, scope) {\n  var modifiersMatch; // 看它是否在当前范围\n\n  if (handler.scope === scope || handler.scope === 'all') {\n    // 检查是否匹配修饰符（如果有返回true）\n    modifiersMatch = handler.mods.length > 0;\n\n    for (var y in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n          modifiersMatch = false;\n        }\n      }\n    } // 调用处理程序，如果是修饰键不做处理\n\n\n    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n      if (handler.method(event, handler) === false) {\n        if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.cancelBubble) event.cancelBubble = true;\n      }\n    }\n  }\n} // 处理keydown事件\n\n\nfunction dispatch(event) {\n  var asterisk = _handlers['*'];\n  var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n  if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n  // Webkit左右 command 键值不一样\n\n  if (key === 93 || key === 224) key = 91;\n  /**\n   * Collect bound keys\n   * If an Input Method Editor is processing key input and the event is keydown, return 229.\n   * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n   * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n   */\n\n  if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n  /**\n   * Jest test cases are required.\n   * ===============================\n   */\n\n  ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n    var keyNum = modifierMap[keyName];\n\n    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n      _downKeys.push(keyNum);\n    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n      _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n    } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n      /**\n       * Fix if Command is pressed:\n       * ===============================\n       */\n      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n      }\n    }\n  });\n  /**\n   * -------------------------------\n   */\n\n  if (key in _mods) {\n    _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = true;\n    }\n\n    if (!asterisk) return;\n  } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n  for (var e in _mods) {\n    if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n      _mods[e] = event[modifierMap[e]];\n    }\n  }\n  /**\n   * https://github.com/jaywcjlove/hotkeys/pull/129\n   * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n   * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n   * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n   */\n\n\n  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n    if (_downKeys.indexOf(17) === -1) {\n      _downKeys.push(17);\n    }\n\n    if (_downKeys.indexOf(18) === -1) {\n      _downKeys.push(18);\n    }\n\n    _mods[17] = true;\n    _mods[18] = true;\n  } // 获取范围 默认为 `all`\n\n\n  var scope = getScope(); // 对任何快捷键都需要做的处理\n\n  if (asterisk) {\n    for (var i = 0; i < asterisk.length; i++) {\n      if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n        eventHandler(event, asterisk[i], scope);\n      }\n    }\n  } // key 不在 _handlers 中返回\n\n\n  if (!(key in _handlers)) return;\n\n  for (var _i = 0; _i < _handlers[key].length; _i++) {\n    if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n      if (_handlers[key][_i].key) {\n        var record = _handlers[key][_i];\n        var splitKey = record.splitKey;\n        var keyShortcut = record.key.split(splitKey);\n        var _downKeysCurrent = []; // 记录当前按键键值\n\n        for (var a = 0; a < keyShortcut.length; a++) {\n          _downKeysCurrent.push(code(keyShortcut[a]));\n        }\n\n        if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n          // 找到处理内容\n          eventHandler(event, record, scope);\n        }\n      }\n    }\n  }\n} // 判断 element 是否已经绑定事件\n\n\nfunction isElementBind(element) {\n  return elementHasBindEvent.indexOf(element) > -1;\n}\n\nfunction hotkeys(key, option, method) {\n  _downKeys = [];\n  var keys = getKeys(key); // 需要处理的快捷键列表\n\n  var mods = [];\n  var scope = 'all'; // scope默认为all，所有范围都有效\n\n  var element = document; // 快捷键事件绑定节点\n\n  var i = 0;\n  var keyup = false;\n  var keydown = true;\n  var splitKey = '+'; // 对为设定范围的判断\n\n  if (method === undefined && typeof option === 'function') {\n    method = option;\n  }\n\n  if (Object.prototype.toString.call(option) === '[object Object]') {\n    if (option.scope) scope = option.scope; // eslint-disable-line\n\n    if (option.element) element = option.element; // eslint-disable-line\n\n    if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n    if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n    if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n  }\n\n  if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n  for (; i < keys.length; i++) {\n    key = keys[i].split(splitKey); // 按键列表\n\n    mods = []; // 如果是组合快捷键取得组合快捷键\n\n    if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n    key = key[key.length - 1];\n    key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n    // 判断key是否在_handlers中，不在就赋一个空数组\n\n    if (!(key in _handlers)) _handlers[key] = [];\n\n    _handlers[key].push({\n      keyup: keyup,\n      keydown: keydown,\n      scope: scope,\n      mods: mods,\n      shortcut: keys[i],\n      method: method,\n      key: keys[i],\n      splitKey: splitKey\n    });\n  } // 在全局document上设置快捷键\n\n\n  if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n    elementHasBindEvent.push(element);\n    addEvent(element, 'keydown', function (e) {\n      dispatch(e);\n    });\n    addEvent(window, 'focus', function () {\n      _downKeys = [];\n    });\n    addEvent(element, 'keyup', function (e) {\n      dispatch(e);\n      clearModifier(e);\n    });\n  }\n}\n\nvar _api = {\n  setScope: setScope,\n  getScope: getScope,\n  deleteScope: deleteScope,\n  getPressedKeyCodes: getPressedKeyCodes,\n  isPressed: isPressed,\n  filter: filter,\n  unbind: unbind\n};\n\nfor (var a in _api) {\n  if (Object.prototype.hasOwnProperty.call(_api, a)) {\n    hotkeys[a] = _api[a];\n  }\n}\n\nif (typeof window !== 'undefined') {\n  var _hotkeys = window.hotkeys;\n\n  hotkeys.noConflict = function (deep) {\n    if (deep && window.hotkeys === hotkeys) {\n      window.hotkeys = _hotkeys;\n    }\n\n    return hotkeys;\n  };\n\n  window.hotkeys = hotkeys;\n}\n\nexport default hotkeys;\n","import hotkeys from 'hotkeys-js';\n\nconst EXCLUDED_TAGS = [\n    'INPUT', 'SELECT', 'TEXTAREA', 'PAPER-INPUT', 'PAPER-TEXTAREA', 'PB-SEARCH'\n];\nconst excluded = new Set(EXCLUDED_TAGS);\n\n// disable hotkeys for form elements\nlet firstLoad = true;\nif (firstLoad) {\n    hotkeys.filter = (event) => {\n        const tagName = (event.target || event.srcElement).tagName;\n        return !(tagName.isContentEditable || excluded.has(tagName));\n    }\n    firstLoad = false;\n}\n\n/**\n * Mixin to register handlers for keyboard shortcuts. Property `hotkeys` should be an object\n * containing a symbolic name for the action as key and a keyboard shortcut as value. Subclasses\n * can then map the symbolic name to a function by calling `registerHotkey`.\n *\n */\nexport const pbHotkeys = (superclass) => class PbHotkeys extends superclass {\n\n    static get properties() {\n        return {\n            ...super.properties,\n            hotkeys: {\n                type: Object\n            }\n        };\n    };\n\n    constructor() {\n        super();\n        this.hotkeys = {};\n    }\n\n    /**\n     * \n     * @param {String} name symbolic name, must be defined in `this.hotkeys`\n     * @param {import('hotkeys-js').KeyHandler} callback a callback function\n     */\n    registerHotkey(name, callback, target) {\n        if (name && this.hotkeys[name]) {\n            if (target) {\n                hotkeys(this.hotkeys[name], { element: target }, callback);\n            } else {\n                hotkeys(this.hotkeys[name], callback);\n            }\n        }\n    }\n\n    display(name) {\n        if (name && this.hotkeys[name]) {\n            let output = [];\n            const keys = this.hotkeys[name].split(/\\s*,\\s*/);\n            keys.forEach((key) => {\n                output.push(key.replace('+', '-'));\n            });\n            return output.join(', ');\n        }\n        return '';\n    }\n}\n\nexport function registerHotkey(name, callback, target) {\n    if (target) {\n        hotkeys(name, { element: target }, callback);\n    } else {\n        hotkeys(name, callback);\n    }\n}\n\nwindow.pbKeyboard = registerHotkey;","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {PaperInkyFocusBehavior} from '@polymer/paper-behaviors/paper-inky-focus-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design: [Icon\ntoggles](https://www.google.com/design/spec/components/buttons.html#buttons-toggle-buttons)\n\n`paper-icon-button` is a button with an image placed at the center. When the\nuser touches the button, a ripple effect emanates from the center of the button.\n\n`paper-icon-button` does not include a default icon set. To use icons from the\ndefault set, include `PolymerElements/iron-icons/iron-icons.html`, and use the\n`icon` attribute to specify which icon from the icon set to use.\n\n    <paper-icon-button icon=\"menu\"></paper-icon-button>\n\nSee [`iron-iconset`](iron-iconset) for more information about\nhow to use a custom icon set.\n\nExample:\n\n    <script type=\"module\">\n      import '@polymer/iron-icons/iron-icons.js';\n    </script>\n\n    <paper-icon-button icon=\"favorite\"></paper-icon-button>\n    <paper-icon-button src=\"star.png\"></paper-icon-button>\n\nTo use `paper-icon-button` as a link, wrap it in an anchor tag. Since\n`paper-icon-button` will already receive focus, you may want to prevent the\nanchor tag from receiving focus as well by setting its tabindex to -1.\n\n    <a href=\"https://www.polymer-project.org\" tabindex=\"-1\">\n      <paper-icon-button icon=\"polymer\"></paper-icon-button>\n    </a>\n\n### Styling\n\nStyle the button with CSS as you would a normal DOM element. If you are using\nthe icons provided by `iron-icons`, they will inherit the foreground color of\nthe button.\n\n    /* make a red \"favorite\" button *\\/\n    <paper-icon-button icon=\"favorite\" style=\"color: red;\"></paper-icon-button>\n\nBy default, the ripple is the same color as the foreground at 25% opacity. You\nmay customize the color using the `--paper-icon-button-ink-color` custom\nproperty.\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-icon-button-disabled-text` | The color of the disabled button | `--disabled-text-color`\n`--paper-icon-button-ink-color` | Selected/focus ripple color | `--primary-text-color`\n`--paper-icon-button` | Mixin for a button | `{}`\n`--paper-icon-button-disabled` | Mixin for a disabled button | `{}`\n`--paper-icon-button-hover` | Mixin for button on hover | `{}`\n\n@group Paper Elements\n@element paper-icon-button\n@demo demo/index.html\n*/\nPolymer({\n  is: 'paper-icon-button',\n\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        padding: 8px;\n        outline: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        cursor: pointer;\n        z-index: 0;\n        line-height: 1;\n\n        width: 40px;\n        height: 40px;\n\n        /*\n          NOTE: Both values are needed, since some phones require the value to\n          be \\`transparent\\`.\n        */\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n        -webkit-tap-highlight-color: transparent;\n\n        /* Because of polymer/2558, this style has lower specificity than * */\n        box-sizing: border-box !important;\n\n        @apply --paper-icon-button;\n      }\n\n      :host #ink {\n        color: var(--paper-icon-button-ink-color, var(--primary-text-color));\n        opacity: 0.6;\n      }\n\n      :host([disabled]) {\n        color: var(--paper-icon-button-disabled-text, var(--disabled-text-color));\n        pointer-events: none;\n        cursor: auto;\n\n        @apply --paper-icon-button-disabled;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host(:hover) {\n        @apply --paper-icon-button-hover;\n      }\n\n      iron-icon {\n        --iron-icon-width: 100%;\n        --iron-icon-height: 100%;\n      }\n    </style>\n\n    <iron-icon id=\"icon\" src=\"[[src]]\" icon=\"[[icon]]\"\n               alt$=\"[[alt]]\"></iron-icon>\n  `,\n\n  hostAttributes: {role: 'button', tabindex: '0'},\n\n  behaviors: [PaperInkyFocusBehavior],\n\n  registered: function() {\n    this._template.setAttribute('strip-whitespace', '');\n  },\n\n  properties: {\n    /**\n     * The URL of an image for the icon. If the src property is specified,\n     * the icon property should not be.\n     */\n    src: {type: String},\n\n    /**\n     * Specifies the icon name or index in the set of icons available in\n     * the icon's icon set. If the icon property is specified,\n     * the src property should not be.\n     */\n    icon: {type: String},\n\n    /**\n     * Specifies the alternate text for the button, for accessibility.\n     */\n    alt: {type: String, observer: '_altChanged'}\n  },\n\n  _altChanged: function(newValue, oldValue) {\n    var label = this.getAttribute('aria-label');\n\n    // Don't stomp over a user-set aria-label.\n    if (!label || oldValue == label) {\n      this.setAttribute('aria-label', newValue);\n    }\n  }\n});\n","import '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/iron-icons/iron-icons.js';\nimport './paper-autocomplete-suggestions.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-ripple/paper-ripple.js';\nimport '@polymer/paper-material/paper-material.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n  `paper-autocomplete`\n\n  **From v4.x.x, this component only works with Polymer 3.0+.**\n\n  [![Published on webcomponents.org](https://img.shields.io/badge/webcomponents.org-published-blue.svg)](https://www.webcomponents.org/element/@cwmr/paper-autocomplete)\n\n  paper-autocomplete extends earlier efforts such as this (https://github.com/rodo1111/paper-input-autocomplete)\n  to provide keyboard support, remote binding and results scrolling.\n\n  It is **important to provide both `textProperty` and `valueProperty` when working with a custom search function and\n  or custom templates.** They are needed to keep the component accessible and for the events (e.g. onSelect) to keep\n  working.\n\n  To integrate with `iron-input`, you must set the `name` option. The selected `value` will be exposed, **not** the\n  `text` value,\n\n  ### Custom search\n  This component has the public method `queryFn` that is called in each key stroke and it is responsible to query\n  all items in the `source` and returns only those items that matches certain filtering criteria. By default, this\n  component searches for items that start with the recent query (case insensitive).\n  You can override this behavior providing your own query function, as long as these two requirements are fulfilled:\n  - The query function is synchronous.\n  - The API is respected and the method always returns an Array.\n  The template used to render each suggestion depends on the structure of each object that this method returns. For the\n  default template, each suggestion should follow this object structure:\n  ```\n    {\n      text: objText,\n      value: objValue\n    }\n  ```\n\n  This function is only used when a local data source is used. When using a `remoteDataSource` user is responsible for\n  doing the search and specify suggestions manually.\n\n  ### Custom templates\n  A template for each suggestion can be provided, but for now, there are limitations in the way you can customize\n  the template. Please, read this section carefully to know them.\n  In order to set your own template, you need to add a `<template>` tag with the attribute\n  `autocomplete-custom-template` and the following structure:\n\n  ```html\n  <paper-autocomplete>\n    <template autocomplete-custom-template>\n      <paper-item on-tap=\"_onSelect\" id$=\"[[_getSuggestionId(index)]]\" role=\"option\" aria-selected=\"false\">\n        <style>\n          /** Styles for your custom template here **\\/\n        </style>\n\n        YOUR CUSTOM TEMPLATE\n        <paper-ripple></paper-ripple>\n      </paper-item>\n    </template>\n  </paper-autocomplete>\n  ```\n\n  You need to always maintain this structure. Then you can customize the content of paper-item. These are the reasons\n  why you need to maintain it:\n\n  - `_onSelect` it is very important because it will notify the `autocomplete` component when user selects one item.\n  If you don't add this option, when user clicks in one of the items, nothing will happen.\n  - `id`, `role` and `aria-selected` need to be there for accessibility reasons. If you don't set them, the component\n  will continue working but it will not be accessible for users with disabilities.\n\n  It is important to clarify that methods `_onSelect` and `_getSuggestionId` do not need to be implemented. They are\n  part of the logic of `paper-autocomplete`.\n\n  When providing your own custom template, you might also need to provide your own custom search function. The reason\n  for that is that the default search function only exposes text and value in the results. If each item in your data\n  source contains more information, then you won't be able to access it. See the code of the `<address-autocomplete>`\n  element in the demo folder for a complete example.\n\n  Another important thing to point out is related to the height of each suggestion item in the results. The height of\n  the suggestion template changes dynamically depending on the height of a suggestion item. However, the following\n  assumptions were made:\n  - All suggestions items have the same height\n  - The height of each item is fixed and can be determined at any time. For example, if you want to use images in the\n  results, make sure they have a placeholder or a fixed height.\n\n  By default, suggestions are only displayed after the user types, even if the current input should display them. If\n  you want to show suggestions on focus (when available), you should add the property `show-results-on-focus`.\n\n  ### Styling\n\n  `<paper-autocomplete>` provides the following custom properties and mixins\n  for styling:\n\n  Custom property | Description | Default\n  ----------------|-------------|----------\n  `--paper-input-container-focus-color` | sets the components input container focus color | `var(--primary-color)`\n  `--paper-autocomplete-suggestions-item-min-height` | min height of each suggestion item | `36px`\n  `--paper-autocomplete-suggestions-wrapper` | mixin to apply to the suggestions container | `{}`\n\n  ### Accessibility\n\n  This component is friendly with screen readers (tested only with VoiceOver and NVDA in Windows): current selection\n  and active suggestion are announced.\n\n  @demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        box-sizing: border-box;\n        position: relative;\n\n        --paper-input-container-focus-color: var(--primary-color);\n\n        --paper-icon-button: {\n          height: 24px;\n          width: 24px;\n          padding: 2px;\n        }\n\n        --paper-input-container-ms-clear: {\n          display: none;\n        }\n      }\n\n      .input-wrapper {\n        @apply --layout-horizontal;\n      }\n\n      .input-wrapper paper-input {\n        @apply --layout-flex;\n      }\n\n      #clear {\n        display: none;\n        line-height: 8px;\n      }\n\n      .sr-only {\n        position: absolute;\n        clip: rect(1px, 1px, 1px, 1px);\n      }\n\n      paper-autocomplete-suggestions {\n        --suggestions-wrapper: {\n          @apply --paper-autocomplete-suggestions-wrapper;\n        };\n\n        --paper-item-min-height: var(--paper-autocomplete-suggestions-item-min-height, 36px);\n      }\n    </style>\n\n    <div class=\"input-wrapper\" role=\"combobox\" aria-haspopup=\"true\" aria-owns=\"suggestionsWrapper\" aria-expanded\\$=\"[[_isSuggestionsOpened]]\">\n      <!-- For accessibility, it is needed to have a label or aria-label. Label is preferred -->\n      <label for=\"autocompleteInput\" class=\"sr-only\">[[label]]</label>\n\n      <!-- Adding a hidden input to integrate with iron-form, if required -->\n      <input type=\"hidden\" name\\$=\"[[name]]\" value\\$=\"[[value]]\">\n\n      <paper-input id=\"autocompleteInput\" label=\"[[label]]\" autocapitalize=\"[[autocapitalize]]\" no-label-float=\"[[noLabelFloat]]\" disabled=\"{{disabled}}\" readonly=\"[[readonly]]\" focused=\"{{focused}}\" auto-validate\\$=\"[[autoValidate]]\" error-message\\$=\"[[errorMessage]]\" required\\$=\"[[required]]\" value=\"{{text}}\" allowed-pattern=\"[[allowedPattern]]\" pattern=\"[[pattern]]\" always-float-label=\"[[alwaysFloatLabel]]\" char-counter\\$=\"[[charCounter]]\" maxlength\\$=\"[[maxlength]]\" placeholder=\"[[placeholder]]\" invalid=\"{{invalid}}\" role=\"textbox\" aria-autocomplete=\"list\" aria-multiline=\"false\" aria-activedescendant\\$=\"[[_highlightedSuggestion.elementId]]\" aria-disabled\\$=\"[[disabled]]\" aria-controls=\"autocompleteStatus suggestionsWrapper\">\n\n        <slot name=\"prefix\" slot=\"prefix\"></slot>\n        <!-- TODO: remove tabindex workaround when  is fixed https://github.com/PolymerElements/paper-input/issues/324 -->\n        <paper-icon-button slot=\"suffix\" suffix=\"\" id=\"clear\" icon=\"clear\" on-click=\"_clear\" tabindex=\"-1\"></paper-icon-button>\n        <slot name=\"suffix\" slot=\"suffix\"></slot>\n      </paper-input>\n      <!-- to announce current selection to screen reader -->\n      <span id=\"autocompleteStatus\" role=\"status\" class=\"sr-only\">[[_highlightedSuggestion.textValue]]</span>\n    </div>\n\n    <paper-autocomplete-suggestions for=\"autocompleteInput\" id=\"paperAutocompleteSuggestions\" min-length=\"[[minLength]]\" text-property=\"[[textProperty]]\" value-property=\"[[valueProperty]]\" selected-option=\"{{selectedOption}}\" source=\"[[source]]\" remote-source=\"[[remoteSource]]\" query-fn=\"[[queryFn]]\" event-namespace=\"[[eventNamespace]]\" highlighted-suggestion=\"{{_highlightedSuggestion}}\" is-open=\"{{_isSuggestionsOpened}}\" highlight-first=\"[[highlightFirst]]\" show-results-on-focus=\"[[showResultsOnFocus]]\">\n\n      <slot id=\"templates\" name=\"autocomplete-custom-template\"></slot>\n\n    </paper-autocomplete-suggestions>\n`,\n\n  is: 'paper-autocomplete',\n\n  properties: {\n    /**\n     * `autoValidate` Set to true to auto-validate the input value.\n     */\n    autoValidate: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Setter/getter manually invalid input\n     */\n    invalid : {\n      type: Boolean,\n      notify: true,\n      value: false\n    },\n    /**\n     * `autocapitalize` Sets auto-capitalization for the input element.\n     */\n    autocapitalize: String,\n\n    /**\n     * `errorMessage` The error message to display when the input is invalid.\n     */\n    errorMessage: {\n      type: String\n    },\n\n    /**\n     * `label` Text to display as the input label\n     */\n    label: String,\n\n    /**\n     * `noLabelFloat` Set to true to disable the floating label.\n     */\n    noLabelFloat: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `alwaysFloatLabel` Set to true to always float label\n     */\n    alwaysFloatLabel: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * The placeholder text\n     */\n    placeholder: String,\n\n    /**\n     * `required` Set to true to mark the input as required.\n     */\n    required: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `readonly` Set to true to mark the input as readonly.\n     */\n    readonly: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `focused` If true, the element currently has focus.\n     */\n    focused: {\n      type: Boolean,\n      value: false,\n      notify: true\n    },\n\n    /**\n     * `disabled` Set to true to mark the input as disabled.\n     */\n    disabled: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `source` Array of objects with the options to execute the autocomplete feature\n     */\n    source: {\n      type: Array,\n      observer: '_sourceChanged'\n    },\n\n    /**\n     * Property of local datasource to as the text property\n     */\n    textProperty: {\n      type: String,\n      value: 'text'\n    },\n\n    /**\n     * Property of local datasource to as the value property\n     */\n    valueProperty: {\n      type: String,\n      value: 'value'\n    },\n\n    /**\n     * `value` Selected object from the suggestions\n     */\n    value: {\n      type: Object,\n      notify: true\n    },\n\n    /**\n     * The current/selected text of the input\n     */\n    text: {\n      type: String,\n      notify: true,\n      value: ''\n    },\n\n    /**\n     * Disable showing the clear X button\n     */\n    disableShowClear: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Binds to a remote data source\n     */\n    remoteSource: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Event type separator\n     */\n    eventNamespace: {\n      type: String,\n      value: '-'\n    },\n\n    /**\n     * Minimum length to trigger suggestions\n     */\n    minLength: {\n      type: Number,\n      value: 1\n    },\n\n    /**\n     * `pattern` Pattern to validate input field\n     */\n    pattern: String,\n\n    /**\n     * allowedPattern` allowedPattern to validate input field\n     */\n    allowedPattern: String,\n\n    /**\n     * Set to `true` to show a character counter.\n     */\n    charCounter: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * The maximum length of the input value.\n     */\n    maxlength: {\n      type: Number\n    },\n\n    /**\n     * Name to be used by the autocomplete input. This is necessary if wanted to be integrated with iron-form.\n     */\n    name: String,\n\n    /**\n     * Function used to filter available items. This function is actually used by paper-autocomplete-suggestions,\n     * it is also exposed here so it is possible to provide a custom queryFn.\n     */\n    queryFn: {\n      type: Function\n    },\n\n    /**\n     * If `true`, it will always highlight the first result each time new suggestions are presented.\n     */\n     highlightFirst: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Set to `true` to show available suggestions on focus. This overrides the default behavior that only shows\n     * notifications after user types\n     */\n    showResultsOnFocus: {\n      type: Boolean,\n      value: false\n    },\n\n    /*************\n    * PRIVATE\n    *************/\n    // TODO: check if we need _value and _text properties. It seems they can be removed\n    _value: {\n      value: undefined\n    },\n\n    _text: {\n      value: undefined\n    },\n\n    /**\n     * Indicates whether the clear button is visible or not\n     */\n    _isClearButtonVisible: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Indicates whether the suggestion popup is visible or not.\n     */\n    _isSuggestionsOpened: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Object containing the information of the currently selected option\n     */\n    selectedOption: {\n      type: Object,\n      notify: true\n    }\n  },\n\n  observers: [\n    '_textObserver(text)'\n  ],\n\n  _sourceChanged: function (newSource) {\n    var text = this.text;\n    if (!Array.isArray(newSource) || newSource.length === 0 || text === null || text.length < this.minLength) {\n      return;\n    }\n    if (!this.$.autocompleteInput.focused) {\n      return;\n    }\n    this.$.paperAutocompleteSuggestions._handleSuggestions({\n      target: {\n        value: text\n      }\n    });\n  },\n\n  // Element Lifecycle\n  ready: function () {\n    this._value = this.value;\n\n    this.addEventListener(\n      'autocomplete' + this.eventNamespace + 'selected',\n      this._onAutocompleteSelected.bind(this)\n    );\n  },\n\n  /**\n   * Clears the input text\n   */\n  _clear: function () {\n    var option = {\n      text: this.text,\n      value: this.value\n    };\n\n    this.value = null;\n    this._value = null;\n    this.text = '';\n    this._text = '';\n\n    this._fireEvent(option, 'reset-blur');\n\n    this._hideClearButton();\n\n    // Fix: https://github.com/PolymerElements/paper-input/issues/493\n    if (!this.$.autocompleteInput.focused) {\n      this.$.autocompleteInput.focus();\n    }\n  },\n\n  /**\n   * Dispatches autocomplete events\n   */\n  _fireEvent: function (option, evt) {\n    var id = this._getId();\n    var event = 'autocomplete' + this.eventNamespace + evt;\n\n    this.fire(event, {\n      id: id,\n      value: option[this.valueProperty] || option.value,\n      text: option[this.textProperty] || option.text,\n      target: this,\n      option: option\n    });\n  },\n\n  /**\n   * On text event handler\n   */\n  _textObserver: function (text) {\n    if (text && text.trim()) {\n      this._showClearButton();\n    } else {\n      this._hideClearButton();\n    }\n  },\n\n  /**\n   * On autocomplete selection\n   */\n  _onAutocompleteSelected: function (event) {\n    var selection = event.detail;\n\n    this.value = selection.value;\n    this.text = selection.text;\n  },\n\n  /**\n   * Show the clear button (X)\n   */\n  _showClearButton: function () {\n    if (this.disableShowClear) {\n      return;\n    }\n\n    if (this._isClearButtonVisible) {\n      return;\n    }\n\n    this.$.clear.style.display = 'inline-block';\n    this._isClearButtonVisible = true;\n  },\n\n  /**\n   * Hide the clear button (X)\n   */\n  _hideClearButton: function () {\n    if (!this._isClearButtonVisible) {\n      return;\n    }\n\n    this.$.clear.style.display = 'none';\n    this._isClearButtonVisible = false;\n  },\n\n  _getId: function () {\n    var id = this.getAttribute('id');\n    if (!id) id = this.dataset.id;\n    return id;\n  },\n\n  /****************************\n   * PUBLIC\n   ****************************/\n\n  /**\n   * Gets the current text/value option of the input\n   * @returns {Object}\n   */\n  getOption: function () {\n    return {\n      text: this.text,\n      value: this.value\n    };\n  },\n\n  /**\n   * Sets the current text/value option of the input\n   * @param {Object} option\n   */\n  setOption: function (option) {\n    this.text = option[this.textProperty] || option.text;\n    this.value = option[this.valueProperty] || option.value;\n    this._showClearButton();\n  },\n\n  /**\n   * Disables the input\n   */\n  disable: function () {\n    this.disabled = true;\n  },\n\n  /**\n   * Enables the input\n   */\n  enable: function () {\n    this.disabled = false;\n  },\n\n  /**\n   * Sets the component's current suggestions\n   * @param {Array} arr\n   */\n  suggestions: function (arr) {\n    this.$.paperAutocompleteSuggestions.suggestions(arr);\n  },\n\n  /**\n   * Validates the input\n   * @returns {Boolean}\n   */\n  validate: function () {\n    return this.$.autocompleteInput.validate();\n  },\n\n  /**\n   * Clears the current input\n   */\n  clear: function () {\n    this._value = '';\n    this._text = '';\n    this._clear();\n  },\n\n  /**\n   * Resets the current input (DEPRECATED: please use clear)\n   */\n  reset: function () {\n    this._clear();\n  },\n\n  /**\n   * Hides the suggestions popup\n   */\n  hideSuggestions: function () {\n    this._hideClearButton();\n    this.$.paperAutocompleteSuggestions.hideSuggestions();\n  },\n\n  /**\n   * Allows calling the onSelect function from outside\n   * This in time triggers the autocomplete-selected event\n   * with all the data required\n   */\n  onSelectHandler: function (event) {\n    this.$.paperAutocompleteSuggestions._onSelect(event);\n  }\n\n  /**\n   * Fired when a selection is made\n   *\n   * @event autocomplete-selected\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input change\n   *\n   * @event autocomplete-change\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input focus\n   *\n   * @event autocomplete-focus\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input blur\n   *\n   * @event autocomplete-blur\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n\n  /**\n   * Fired on input reset/clear\n   *\n   * @event autocomplete-reset-blur\n   * @param {String} id\n   * @param {String} text\n   * @param {Element} target\n   * @param {Object} option\n   */\n});\n","import { LitElement, html, css } from 'lit-element';\nimport { pbMixin } from './pb-mixin';\n\n\n/**\n * Open eXide to edit a given source document.\n *\n * @slot - unnamed default slot for the link text\n * @slot - unnamed slot for the link text when eXide tab is already opened\n */\nexport class PbEditXml extends pbMixin(LitElement) {\n    static get properties() {\n        return {\n            ...super.properties,\n            /**\n             * expects a context-absolute path to the document to edit e.g. '/db/apps/tei-publisher/mytext.xml'\n             */\n            path: {\n                type: String\n            },\n            /**\n             * optional id reference to a pb-document\n             */\n            src: {\n                type: String\n            },\n            /**\n             * HTML title to be used\n             */\n            title: {\n                type: String\n            },\n            _href: {\n                type: String\n            }\n        };\n    }\n\n    constructor() {\n        super();\n        this.title = '';\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        PbEditXml.waitOnce('pb-page-ready', (options) => {\n            if (options.endpoint === '.') {\n                this._href = '/exist/apps/eXide/';\n            } else {\n                const host = /^(.*:\\/+[^/]+)\\/.*$/.exec(options.endpoint);\n                if (host) {\n                    this._href = `${host[1]}/exist/apps/eXide/`;\n                } else {\n                    this._href = '/exist/apps/eXide/';\n                }\n            }\n        });\n    }\n\n    render() {\n        // if the target is within the same origin as the current page, we can communicate with an \n        // already opened eXide, if not, only option is to open a new window.\n        if (new URL(this._href, window.location.href).origin === this.getUrl().origin) {\n            return html`<a href=\"${this._href}\" target=\"eXide\" title=\"${this.title}\" @click=\"${this.open}\"><slot></slot></a>`;\n        }\n        return html`<a href=\"${this._href}/index.html?open=${this.path}\" title=\"${this.title}\"><slot></slot></a>`;\n    }\n\n    static get styles() {\n        return css`\n            :host {\n                display: inline;\n            }\n\n            a {\n                color: inherit;\n                text-decoration: none;\n            }\n        `;\n    }\n\n    setPath(path) {\n        this.path = path;\n    }\n\n    open(ev) {\n        ev.preventDefault();\n        let href = this._href;\n        let path = this.path;\n        if (this.src) {\n            const sourceComponent = document.getElementById(this.src);\n            path = sourceComponent.getFullPath();\n            href = sourceComponent.sourceView;\n        }\n\n        // try to retrieve existing eXide window\n        const exide = window.open(\"\", \"eXide\");\n        if (exide && !exide.closed) {\n            // check if eXide is really available or it's an empty page\n            const app = exide.eXide;\n            if (app) {\n                console.log(\"<pb-edit-xml> using existing eXide to open %s\", path);\n                // eXide is there\n                exide.eXide.app.findDocument(path);\n                exide.focus();\n            } else {\n                console.log(\"<pb-edit-xml> opening new eXide for %s\", path);\n                window.eXide_onload = function () {\n                    exide.eXide.app.findDocument(path);\n                };\n                // empty page\n                exide.location = href;\n            }\n        }\n    }\n}\ncustomElements.define('pb-edit-xml', PbEditXml);","class Lumo extends HTMLElement {\n  static get version() {\n    return '1.6.1';\n  }\n}\n\ncustomElements.define('vaadin-lumo-styles', Lumo);\n\nexport { Lumo };\n","import '@polymer/polymer/lib/elements/custom-style.js';\nimport './version.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    @font-face {\n      font-family: 'lumo-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --lumo-icons-align-center: \"\\\\ea01\";\n      --lumo-icons-align-left: \"\\\\ea02\";\n      --lumo-icons-align-right: \"\\\\ea03\";\n      --lumo-icons-angle-down: \"\\\\ea04\";\n      --lumo-icons-angle-left: \"\\\\ea05\";\n      --lumo-icons-angle-right: \"\\\\ea06\";\n      --lumo-icons-angle-up: \"\\\\ea07\";\n      --lumo-icons-arrow-down: \"\\\\ea08\";\n      --lumo-icons-arrow-left: \"\\\\ea09\";\n      --lumo-icons-arrow-right: \"\\\\ea0a\";\n      --lumo-icons-arrow-up: \"\\\\ea0b\";\n      --lumo-icons-bar-chart: \"\\\\ea0c\";\n      --lumo-icons-bell: \"\\\\ea0d\";\n      --lumo-icons-calendar: \"\\\\ea0e\";\n      --lumo-icons-checkmark: \"\\\\ea0f\";\n      --lumo-icons-chevron-down: \"\\\\ea10\";\n      --lumo-icons-chevron-left: \"\\\\ea11\";\n      --lumo-icons-chevron-right: \"\\\\ea12\";\n      --lumo-icons-chevron-up: \"\\\\ea13\";\n      --lumo-icons-clock: \"\\\\ea14\";\n      --lumo-icons-cog: \"\\\\ea15\";\n      --lumo-icons-cross: \"\\\\ea16\";\n      --lumo-icons-download: \"\\\\ea17\";\n      --lumo-icons-dropdown: \"\\\\ea18\";\n      --lumo-icons-edit: \"\\\\ea19\";\n      --lumo-icons-error: \"\\\\ea1a\";\n      --lumo-icons-eye: \"\\\\ea1b\";\n      --lumo-icons-eye-disabled: \"\\\\ea1c\";\n      --lumo-icons-menu: \"\\\\ea1d\";\n      --lumo-icons-minus: \"\\\\ea1e\";\n      --lumo-icons-ordered-list: \"\\\\ea1f\";\n      --lumo-icons-phone: \"\\\\ea20\";\n      --lumo-icons-photo: \"\\\\ea21\";\n      --lumo-icons-play: \"\\\\ea22\";\n      --lumo-icons-plus: \"\\\\ea23\";\n      --lumo-icons-redo: \"\\\\ea24\";\n      --lumo-icons-reload: \"\\\\ea25\";\n      --lumo-icons-search: \"\\\\ea26\";\n      --lumo-icons-undo: \"\\\\ea27\";\n      --lumo-icons-unordered-list: \"\\\\ea28\";\n      --lumo-icons-upload: \"\\\\ea29\";\n      --lumo-icons-user: \"\\\\ea2a\";\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\n/* NOTICE: Generated with 'gulp icons' */\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\n;\n","import './version.js';\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport '@polymer/polymer/lib/elements/dom-module.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id=\"lumo-color\">\n  <template>\n    <style>\n      [theme~=\"dark\"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~=\"dark\"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"lumo-color-legacy\">\n  <template>\n    <style include=\"lumo-color\">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\n/* Only needed for IE11 when you want to use the dark palette inside the light palette */\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\n;\n","import './version.js';\nimport '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './version.js';\nimport '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './version.js';\nimport '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './version.js';\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport '@polymer/polymer/lib/elements/dom-module.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    html {\n      /* Font families */\n      --lumo-font-family: -apple-system, BlinkMacSystemFont, \"Roboto\", \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n\n      /* Font sizes */\n      --lumo-font-size-xxs: .75rem;\n      --lumo-font-size-xs: .8125rem;\n      --lumo-font-size-s: .875rem;\n      --lumo-font-size-m: 1rem;\n      --lumo-font-size-l: 1.125rem;\n      --lumo-font-size-xl: 1.375rem;\n      --lumo-font-size-xxl: 1.75rem;\n      --lumo-font-size-xxxl: 2.5rem;\n\n      /* Line heights */\n      --lumo-line-height-xs: 1.25;\n      --lumo-line-height-s: 1.375;\n      --lumo-line-height-m: 1.625;\n    }\n\n  </style>\n</custom-style><dom-module id=\"lumo-typography\">\n  <template>\n    <style>\n      html {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      small,\n      [theme~=\"font-size-s\"] {\n        font-size: var(--lumo-font-size-s);\n        line-height: var(--lumo-line-height-s);\n      }\n\n      [theme~=\"font-size-xs\"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-weight: 600;\n        line-height: var(--lumo-line-height-xs);\n        margin-top: 1.25em;\n      }\n\n      h1 {\n        font-size: var(--lumo-font-size-xxxl);\n        margin-bottom: 0.75em;\n      }\n\n      h2 {\n        font-size: var(--lumo-font-size-xxl);\n        margin-bottom: 0.5em;\n      }\n\n      h3 {\n        font-size: var(--lumo-font-size-xl);\n        margin-bottom: 0.5em;\n      }\n\n      h4 {\n        font-size: var(--lumo-font-size-l);\n        margin-bottom: 0.5em;\n      }\n\n      h5 {\n        font-size: var(--lumo-font-size-m);\n        margin-bottom: 0.25em;\n      }\n\n      h6 {\n        font-size: var(--lumo-font-size-xs);\n        margin-bottom: 0;\n        text-transform: uppercase;\n        letter-spacing: 0.03em;\n      }\n\n      p,\n      blockquote {\n        margin-top: 0.5em;\n        margin-bottom: 0.75em;\n      }\n\n      a {\n        text-decoration: none;\n      }\n\n      a:hover {\n        text-decoration: underline;\n      }\n\n      hr {\n        display: block;\n        align-self: stretch;\n        height: 1px;\n        border: 0;\n        padding: 0;\n        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      blockquote {\n        border-left: 2px solid var(--lumo-contrast-30pct);\n      }\n\n      b,\n      strong {\n        font-weight: 600;\n      }\n\n      /* RTL specific styles */\n\n      blockquote[dir=\"rtl\"] {\n        border-left: none;\n        border-right: 2px solid var(--lumo-contrast-30pct);\n      }\n\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n * @polymerMixin\n */\nexport const ThemePropertyMixin = superClass => class VaadinThemePropertyMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * Helper property with theme attribute value facilitating propagation\n       * in shadow DOM.\n       *\n       * Enables the component implementation to propagate the `theme`\n       * attribute value to the subcomponents in Shadow DOM by binding\n       * the subcomponent’s \"theme\" attribute to the `theme` property of\n       * the host.\n       *\n       * **NOTE:** Extending the mixin only provides the property for binding,\n       * and does not make the propagation alone.\n       *\n       * See [Theme Attribute and Subcomponents](https://github.com/vaadin/vaadin-themable-mixin/wiki/5.-Theme-Attribute-and-Subcomponents).\n       * page for more information.\n       *\n       * @protected\n       */\n      theme: {\n        type: String,\n        readOnly: true\n      }\n    };\n  }\n\n  /** @protected */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n\n    if (name === 'theme') {\n      this._setTheme(newValue);\n    }\n  }\n};\n","import { DomModule } from '@polymer/polymer/lib/elements/dom-module.js';\nimport { ThemePropertyMixin } from './vaadin-theme-property-mixin.js';\n\n/**\n * @polymerMixin\n * @mixes ThemePropertyMixin\n */\nexport const ThemableMixin = superClass => class VaadinThemableMixin extends ThemePropertyMixin(superClass) {\n\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    const template = this.prototype._template;\n\n    const hasOwnTemplate = this.template && this.template.parentElement && this.template.parentElement.id === this.is;\n    const inheritedTemplate = Object.getPrototypeOf(this.prototype)._template;\n    if (inheritedTemplate && !hasOwnTemplate) {\n      // The element doesn't define its own template -> include the theme modules from the inherited template\n      Array.from(inheritedTemplate.content.querySelectorAll('style[include]')).forEach(s => {\n        this._includeStyle(s.getAttribute('include'), template);\n      });\n    }\n\n    this._includeMatchingThemes(template);\n  }\n\n  /** @private */\n  static _includeMatchingThemes(template) {\n    const domModule = DomModule;\n    const modules = domModule.prototype.modules;\n\n    let hasThemes = false;\n    const defaultModuleName = this.is + '-default-theme';\n\n    Object.keys(modules)\n      .sort((moduleNameA, moduleNameB) => {\n        const vaadinA = moduleNameA.indexOf('vaadin-') === 0;\n        const vaadinB = moduleNameB.indexOf('vaadin-') === 0;\n\n        const vaadinThemePrefixes = ['lumo-', 'material-'];\n        const vaadinThemeA = vaadinThemePrefixes.filter(prefix => moduleNameA.indexOf(prefix) === 0).length > 0;\n        const vaadinThemeB = vaadinThemePrefixes.filter(prefix => moduleNameB.indexOf(prefix) === 0).length > 0;\n\n        if (vaadinA !== vaadinB) {\n          // Include vaadin core styles first\n          return vaadinA ? -1 : 1;\n        } else if (vaadinThemeA !== vaadinThemeB) {\n          // Include vaadin theme styles after that\n          return vaadinThemeA ? -1 : 1;\n        } else {\n          // Lastly include custom styles so they override all vaadin styles\n          return 0;\n        }\n      })\n      .forEach(moduleName => {\n        if (moduleName !== defaultModuleName) {\n          const themeFor = modules[moduleName].getAttribute('theme-for');\n          if (themeFor) {\n            themeFor.split(' ').forEach(themeForToken => {\n              if (new RegExp('^' + themeForToken.split('*').join('.*') + '$').test(this.is)) {\n                hasThemes = true;\n                this._includeStyle(moduleName, template);\n              }\n            });\n          }\n        }\n      });\n\n    if (!hasThemes && modules[defaultModuleName]) {\n      // No theme modules found, include the default module if it exists\n      this._includeStyle(defaultModuleName, template);\n    }\n  }\n\n  /** @private */\n  static _includeStyle(moduleName, template) {\n    if (template && !template.content.querySelector(`style[include=\"${moduleName}\"]`)) {\n      const styleEl = document.createElement('style');\n      styleEl.setAttribute('include', moduleName);\n      template.content.appendChild(styleEl);\n    }\n  }\n\n};\n","/**\n@license\nCopyright (c) 2020 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * Helper that provides a set of functions for RTL.\n */\nclass DirHelper {\n  /**\n   * Get the scroll type in the current browser view.\n   *\n   * @return {string} the scroll type. Possible values are `default|reverse|negative`\n   */\n  static detectScrollType() {\n    const dummy = document.createElement('div');\n    dummy.textContent = 'ABCD';\n    dummy.dir = 'rtl';\n    dummy.style.fontSize = '14px';\n    dummy.style.width = '4px';\n    dummy.style.height = '1px';\n    dummy.style.position = 'absolute';\n    dummy.style.top = '-1000px';\n    dummy.style.overflow = 'scroll';\n    document.body.appendChild(dummy);\n\n    let cachedType = 'reverse';\n    if (dummy.scrollLeft > 0) {\n      cachedType = 'default';\n    } else {\n      dummy.scrollLeft = 2;\n      if (dummy.scrollLeft < 2) {\n        cachedType = 'negative';\n      }\n    }\n    document.body.removeChild(dummy);\n    return cachedType;\n  }\n\n  /**\n   * Get the scrollLeft value of the element relative to the direction\n   *\n   * @param {string} scrollType type of the scroll detected with `detectScrollType`\n   * @param {string} direction current direction of the element\n   * @param {Element} element\n   * @return {number} the scrollLeft value.\n  */\n  static getNormalizedScrollLeft(scrollType, direction, element) {\n    const {scrollLeft} = element;\n    if (direction !== 'rtl' || !scrollType) {\n      return scrollLeft;\n    }\n\n    switch (scrollType) {\n      case 'negative':\n        return element.scrollWidth - element.clientWidth + scrollLeft;\n      case 'reverse':\n        return element.scrollWidth - element.clientWidth - scrollLeft;\n    }\n    return scrollLeft;\n  }\n\n  /**\n   * Set the scrollLeft value of the element relative to the direction\n   *\n   * @param {string} scrollType type of the scroll detected with `detectScrollType`\n   * @param {string} direction current direction of the element\n   * @param {Element} element\n   * @param {number} scrollLeft the scrollLeft value to be set\n   */\n  static setNormalizedScrollLeft(scrollType, direction, element, scrollLeft) {\n    if (direction !== 'rtl' || !scrollType) {\n      element.scrollLeft = scrollLeft;\n      return;\n    }\n\n    switch (scrollType) {\n      case 'negative':\n        element.scrollLeft = element.clientWidth - element.scrollWidth + scrollLeft;\n        break;\n      case 'reverse':\n        element.scrollLeft = element.scrollWidth - element.clientWidth - scrollLeft;\n        break;\n      default:\n        element.scrollLeft = scrollLeft;\n        break;\n    }\n  }\n}\n\nexport { DirHelper };\n","import { DirHelper } from './vaadin-dir-helper.js';\n/**\n * Array of Vaadin custom element classes that have been subscribed to the dir changes.\n */\nconst directionSubscribers = [];\nconst directionUpdater = function() {\n  const documentDir = getDocumentDir();\n  directionSubscribers.forEach(element => {\n    alignDirs(element, documentDir);\n  });\n};\n\nlet scrollType;\n\nconst directionObserver = new MutationObserver(directionUpdater);\ndirectionObserver.observe(document.documentElement, {attributes: true, attributeFilter: ['dir']});\n\nconst alignDirs = function(element, documentDir) {\n  if (documentDir) {\n    element.setAttribute('dir', documentDir);\n  } else {\n    element.removeAttribute('dir');\n  }\n};\n\nconst getDocumentDir = function() {\n  return document.documentElement.getAttribute('dir');\n};\n\n/**\n * @polymerMixin\n */\nexport const DirMixin = superClass => class VaadinDirMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * @protected\n       */\n      dir: {\n        type: String,\n        readOnly: true\n      }\n    };\n  }\n\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    if (!scrollType) {\n      scrollType = DirHelper.detectScrollType();\n    }\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hasAttribute('dir')) {\n      this.__subscribe();\n      alignDirs(this, getDocumentDir());\n    }\n  }\n\n  /** @protected */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name !== 'dir') {\n      return;\n    }\n\n    // New value equals to the document direction and the element is not subscribed to the changes\n    const newValueEqlDocDir = newValue === getDocumentDir() && directionSubscribers.indexOf(this) === -1;\n    // Value was emptied and the element is not subscribed to the changes\n    const newValueEmptied = !newValue && oldValue && directionSubscribers.indexOf(this) === -1;\n    // New value is different and the old equals to document direction and the element is not subscribed to the changes\n    const newDiffValue = newValue !== getDocumentDir() && oldValue === getDocumentDir();\n\n    if (newValueEqlDocDir || newValueEmptied) {\n      this.__subscribe();\n      alignDirs(this, getDocumentDir());\n    } else if (newDiffValue) {\n      this.__subscribe(false);\n    }\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.__subscribe(false);\n    this.removeAttribute('dir');\n  }\n\n  /** @private */\n  __subscribe(push = true) {\n    if (push) {\n      directionSubscribers.indexOf(this) === -1 &&\n        directionSubscribers.push(this);\n    } else {\n      directionSubscribers.indexOf(this) > -1 &&\n        directionSubscribers.splice(directionSubscribers.indexOf(this), 1);\n    }\n  }\n\n  /**\n   * @param {Element} element\n   * @return {number}\n   * @protected\n   */\n  __getNormalizedScrollLeft(element) {\n    return DirHelper.getNormalizedScrollLeft(scrollType, this.getAttribute('dir') || 'ltr', element);\n  }\n\n  /**\n   * @param {Element} element\n   * @param {number} scrollLeft\n   * @protected\n   */\n  __setNormalizedScrollLeft(element, scrollLeft) {\n    return DirHelper.setNormalizedScrollLeft(scrollType, this.getAttribute('dir') || 'ltr', element, scrollLeft);\n  }\n};\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.0';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\n\nimport { DirMixin } from './vaadin-dir-mixin.js';\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\nconst registered = new Set();\n\n/**\n * @polymerMixin\n * @mixes DirMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends DirMixin(superClass) {\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    const {is} = this;\n\n    // Registers a class prototype for telemetry purposes.\n    if (is && !registered.has(is)) {\n      window.Vaadin.registrations.push(this);\n      registered.add(is);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n\n  constructor() {\n    super();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","// Kludges for bugs and behavior differences that can't be feature\n// detected are enabled based on userAgent etc sniffing.\nlet userAgent = navigator.userAgent\nlet platform = navigator.platform\n\nexport let gecko = /gecko\\/\\d/i.test(userAgent)\nlet ie_upto10 = /MSIE \\d/.test(userAgent)\nlet ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent)\nlet edge = /Edge\\/(\\d+)/.exec(userAgent)\nexport let ie = ie_upto10 || ie_11up || edge\nexport let ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1])\nexport let webkit = !edge && /WebKit\\//.test(userAgent)\nlet qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent)\nexport let chrome = !edge && /Chrome\\//.test(userAgent)\nexport let presto = /Opera\\//.test(userAgent)\nexport let safari = /Apple Computer/.test(navigator.vendor)\nexport let mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent)\nexport let phantom = /PhantomJS/.test(userAgent)\n\nexport let ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2)\nexport let android = /Android/.test(userAgent)\n// This is woefully incomplete. Suggestions for alternative methods welcome.\nexport let mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent)\nexport let mac = ios || /Mac/.test(platform)\nexport let chromeOS = /\\bCrOS\\b/.test(userAgent)\nexport let windows = /win/i.test(platform)\n\nlet presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/)\nif (presto_version) presto_version = Number(presto_version[1])\nif (presto_version && presto_version >= 15) { presto = false; webkit = true }\n// Some browsers use the wrong event properties to signal cmd/ctrl on OS X\nexport let flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11))\nexport let captureRightClick = gecko || (ie && ie_version >= 9)\n","import { ie, ios } from \"./browser.js\"\n\nexport function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\nexport let rmClass = function(node, cls) {\n  let current = node.className\n  let match = classTest(cls).exec(current)\n  if (match) {\n    let after = current.slice(match.index + match[0].length)\n    node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\")\n  }\n}\n\nexport function removeChildren(e) {\n  for (let count = e.childNodes.length; count > 0; --count)\n    e.removeChild(e.firstChild)\n  return e\n}\n\nexport function removeChildrenAndAdd(parent, e) {\n  return removeChildren(parent).appendChild(e)\n}\n\nexport function elt(tag, content, className, style) {\n  let e = document.createElement(tag)\n  if (className) e.className = className\n  if (style) e.style.cssText = style\n  if (typeof content == \"string\") e.appendChild(document.createTextNode(content))\n  else if (content) for (let i = 0; i < content.length; ++i) e.appendChild(content[i])\n  return e\n}\n// wrapper for elt, which removes the elt from the accessibility tree\nexport function eltP(tag, content, className, style) {\n  let e = elt(tag, content, className, style)\n  e.setAttribute(\"role\", \"presentation\")\n  return e\n}\n\nexport let range\nif (document.createRange) range = function(node, start, end, endNode) {\n  let r = document.createRange()\n  r.setEnd(endNode || node, end)\n  r.setStart(node, start)\n  return r\n}\nelse range = function(node, start, end) {\n  let r = document.body.createTextRange()\n  try { r.moveToElementText(node.parentNode) }\n  catch(e) { return r }\n  r.collapse(true)\n  r.moveEnd(\"character\", end)\n  r.moveStart(\"character\", start)\n  return r\n}\n\nexport function contains(parent, child) {\n  if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n    child = child.parentNode\n  if (parent.contains)\n    return parent.contains(child)\n  do {\n    if (child.nodeType == 11) child = child.host\n    if (child == parent) return true\n  } while (child = child.parentNode)\n}\n\nexport function activeElt() {\n  // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n  // IE < 10 will throw when accessed while the page is loading or in an iframe.\n  // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n  let activeElement\n  try {\n    activeElement = document.activeElement\n  } catch(e) {\n    activeElement = document.body || null\n  }\n  while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n    activeElement = activeElement.shadowRoot.activeElement\n  return activeElement\n}\n\nexport function addClass(node, cls) {\n  let current = node.className\n  if (!classTest(cls).test(current)) node.className += (current ? \" \" : \"\") + cls\n}\nexport function joinClasses(a, b) {\n  let as = a.split(\" \")\n  for (let i = 0; i < as.length; i++)\n    if (as[i] && !classTest(as[i]).test(b)) b += \" \" + as[i]\n  return b\n}\n\nexport let selectInput = function(node) { node.select() }\nif (ios) // Mobile Safari apparently has a bug where select() is broken.\n  selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length }\nelse if (ie) // Suppress mysterious IE10 errors\n  selectInput = function(node) { try { node.select() } catch(_e) {} }\n","export function bind(f) {\n  let args = Array.prototype.slice.call(arguments, 1)\n  return function(){return f.apply(null, args)}\n}\n\nexport function copyObj(obj, target, overwrite) {\n  if (!target) target = {}\n  for (let prop in obj)\n    if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n      target[prop] = obj[prop]\n  return target\n}\n\n// Counts the column offset in a string, taking tabs into account.\n// Used mostly to find indentation.\nexport function countColumn(string, end, tabSize, startIndex, startValue) {\n  if (end == null) {\n    end = string.search(/[^\\s\\u00a0]/)\n    if (end == -1) end = string.length\n  }\n  for (let i = startIndex || 0, n = startValue || 0;;) {\n    let nextTab = string.indexOf(\"\\t\", i)\n    if (nextTab < 0 || nextTab >= end)\n      return n + (end - i)\n    n += nextTab - i\n    n += tabSize - (n % tabSize)\n    i = nextTab + 1\n  }\n}\n\nexport class Delayed {\n  constructor() {\n    this.id = null\n    this.f = null\n    this.time = 0\n    this.handler = bind(this.onTimeout, this)\n  }\n  onTimeout(self) {\n    self.id = 0\n    if (self.time <= +new Date) {\n      self.f()\n    } else {\n      setTimeout(self.handler, self.time - +new Date)\n    }\n  }\n  set(ms, f) {\n    this.f = f\n    const time = +new Date + ms\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id)\n      this.id = setTimeout(this.handler, ms)\n      this.time = time\n    }\n  }\n}\n\nexport function indexOf(array, elt) {\n  for (let i = 0; i < array.length; ++i)\n    if (array[i] == elt) return i\n  return -1\n}\n\n// Number of pixels added to scroller and sizer to hide scrollbar\nexport let scrollerGap = 50\n\n// Returned or thrown by various protocols to signal 'I'm not\n// handling this'.\nexport let Pass = {toString: function(){return \"CodeMirror.Pass\"}}\n\n// Reused option objects for setSelection & friends\nexport let sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"}\n\n// The inverse of countColumn -- find the offset that corresponds to\n// a particular column.\nexport function findColumn(string, goal, tabSize) {\n  for (let pos = 0, col = 0;;) {\n    let nextTab = string.indexOf(\"\\t\", pos)\n    if (nextTab == -1) nextTab = string.length\n    let skipped = nextTab - pos\n    if (nextTab == string.length || col + skipped >= goal)\n      return pos + Math.min(skipped, goal - col)\n    col += nextTab - pos\n    col += tabSize - (col % tabSize)\n    pos = nextTab + 1\n    if (col >= goal) return pos\n  }\n}\n\nlet spaceStrs = [\"\"]\nexport function spaceStr(n) {\n  while (spaceStrs.length <= n)\n    spaceStrs.push(lst(spaceStrs) + \" \")\n  return spaceStrs[n]\n}\n\nexport function lst(arr) { return arr[arr.length-1] }\n\nexport function map(array, f) {\n  let out = []\n  for (let i = 0; i < array.length; i++) out[i] = f(array[i], i)\n  return out\n}\n\nexport function insertSorted(array, value, score) {\n  let pos = 0, priority = score(value)\n  while (pos < array.length && score(array[pos]) <= priority) pos++\n  array.splice(pos, 0, value)\n}\n\nfunction nothing() {}\n\nexport function createObj(base, props) {\n  let inst\n  if (Object.create) {\n    inst = Object.create(base)\n  } else {\n    nothing.prototype = base\n    inst = new nothing()\n  }\n  if (props) copyObj(props, inst)\n  return inst\n}\n\nlet nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/\nexport function isWordCharBasic(ch) {\n  return /\\w/.test(ch) || ch > \"\\x80\" &&\n    (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n}\nexport function isWordChar(ch, helper) {\n  if (!helper) return isWordCharBasic(ch)\n  if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) return true\n  return helper.test(ch)\n}\n\nexport function isEmpty(obj) {\n  for (let n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false\n  return true\n}\n\n// Extending unicode characters. A series of a non-extending char +\n// any number of extending chars is treated as a single unit as far\n// as editing and measuring is concerned. This is not fully correct,\n// since some scripts/fonts/browsers also treat other configurations\n// of code points as a group.\nlet extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/\nexport function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n// Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\nexport function skipExtendingChars(str, pos, dir) {\n  while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) pos += dir\n  return pos\n}\n\n// Returns the value from the range [`from`; `to`] that satisfies\n// `pred` and is closest to `from`. Assumes that at least `to`\n// satisfies `pred`. Supports `from` being greater than `to`.\nexport function findFirst(pred, from, to) {\n  // At any point we are certain `to` satisfies `pred`, don't know\n  // whether `from` does.\n  let dir = from > to ? -1 : 1\n  for (;;) {\n    if (from == to) return from\n    let midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF)\n    if (mid == from) return pred(mid) ? from : to\n    if (pred(mid)) to = mid\n    else from = mid + dir\n  }\n}\n","import { lst } from \"./misc.js\"\n\n// BIDI HELPERS\n\nexport function iterateBidiSections(order, from, to, f) {\n  if (!order) return f(from, to, \"ltr\", 0)\n  let found = false\n  for (let i = 0; i < order.length; ++i) {\n    let part = order[i]\n    if (part.from < to && part.to > from || from == to && part.to == from) {\n      f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i)\n      found = true\n    }\n  }\n  if (!found) f(from, to, \"ltr\")\n}\n\nexport let bidiOther = null\nexport function getBidiPartAt(order, ch, sticky) {\n  let found\n  bidiOther = null\n  for (let i = 0; i < order.length; ++i) {\n    let cur = order[i]\n    if (cur.from < ch && cur.to > ch) return i\n    if (cur.to == ch) {\n      if (cur.from != cur.to && sticky == \"before\") found = i\n      else bidiOther = i\n    }\n    if (cur.from == ch) {\n      if (cur.from != cur.to && sticky != \"before\") found = i\n      else bidiOther = i\n    }\n  }\n  return found != null ? found : bidiOther\n}\n\n// Bidirectional ordering algorithm\n// See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n// that this (partially) implements.\n\n// One-char codes used for character types:\n// L (L):   Left-to-Right\n// R (R):   Right-to-Left\n// r (AL):  Right-to-Left Arabic\n// 1 (EN):  European Number\n// + (ES):  European Number Separator\n// % (ET):  European Number Terminator\n// n (AN):  Arabic Number\n// , (CS):  Common Number Separator\n// m (NSM): Non-Spacing Mark\n// b (BN):  Boundary Neutral\n// s (B):   Paragraph Separator\n// t (S):   Segment Separator\n// w (WS):  Whitespace\n// N (ON):  Other Neutrals\n\n// Returns null if characters are ordered as they appear\n// (left-to-right), or an array of sections ({from, to, level}\n// objects) in the order in which they occur visually.\nlet bidiOrdering = (function() {\n  // Character types for codepoints 0 to 0xff\n  let lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\"\n  // Character types for codepoints 0x600 to 0x6f9\n  let arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\"\n  function charType(code) {\n    if (code <= 0xf7) return lowTypes.charAt(code)\n    else if (0x590 <= code && code <= 0x5f4) return \"R\"\n    else if (0x600 <= code && code <= 0x6f9) return arabicTypes.charAt(code - 0x600)\n    else if (0x6ee <= code && code <= 0x8ac) return \"r\"\n    else if (0x2000 <= code && code <= 0x200b) return \"w\"\n    else if (code == 0x200c) return \"b\"\n    else return \"L\"\n  }\n\n  let bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/\n  let isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/\n\n  function BidiSpan(level, from, to) {\n    this.level = level\n    this.from = from; this.to = to\n  }\n\n  return function(str, direction) {\n    let outerType = direction == \"ltr\" ? \"L\" : \"R\"\n\n    if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) return false\n    let len = str.length, types = []\n    for (let i = 0; i < len; ++i)\n      types.push(charType(str.charCodeAt(i)))\n\n    // W1. Examine each non-spacing mark (NSM) in the level run, and\n    // change the type of the NSM to the type of the previous\n    // character. If the NSM is at the start of the level run, it will\n    // get the type of sor.\n    for (let i = 0, prev = outerType; i < len; ++i) {\n      let type = types[i]\n      if (type == \"m\") types[i] = prev\n      else prev = type\n    }\n\n    // W2. Search backwards from each instance of a European number\n    // until the first strong type (R, L, AL, or sor) is found. If an\n    // AL is found, change the type of the European number to Arabic\n    // number.\n    // W3. Change all ALs to R.\n    for (let i = 0, cur = outerType; i < len; ++i) {\n      let type = types[i]\n      if (type == \"1\" && cur == \"r\") types[i] = \"n\"\n      else if (isStrong.test(type)) { cur = type; if (type == \"r\") types[i] = \"R\" }\n    }\n\n    // W4. A single European separator between two European numbers\n    // changes to a European number. A single common separator between\n    // two numbers of the same type changes to that type.\n    for (let i = 1, prev = types[0]; i < len - 1; ++i) {\n      let type = types[i]\n      if (type == \"+\" && prev == \"1\" && types[i+1] == \"1\") types[i] = \"1\"\n      else if (type == \",\" && prev == types[i+1] &&\n               (prev == \"1\" || prev == \"n\")) types[i] = prev\n      prev = type\n    }\n\n    // W5. A sequence of European terminators adjacent to European\n    // numbers changes to all European numbers.\n    // W6. Otherwise, separators and terminators change to Other\n    // Neutral.\n    for (let i = 0; i < len; ++i) {\n      let type = types[i]\n      if (type == \",\") types[i] = \"N\"\n      else if (type == \"%\") {\n        let end\n        for (end = i + 1; end < len && types[end] == \"%\"; ++end) {}\n        let replace = (i && types[i-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\"\n        for (let j = i; j < end; ++j) types[j] = replace\n        i = end - 1\n      }\n    }\n\n    // W7. Search backwards from each instance of a European number\n    // until the first strong type (R, L, or sor) is found. If an L is\n    // found, then change the type of the European number to L.\n    for (let i = 0, cur = outerType; i < len; ++i) {\n      let type = types[i]\n      if (cur == \"L\" && type == \"1\") types[i] = \"L\"\n      else if (isStrong.test(type)) cur = type\n    }\n\n    // N1. A sequence of neutrals takes the direction of the\n    // surrounding strong text if the text on both sides has the same\n    // direction. European and Arabic numbers act as if they were R in\n    // terms of their influence on neutrals. Start-of-level-run (sor)\n    // and end-of-level-run (eor) are used at level run boundaries.\n    // N2. Any remaining neutrals take the embedding direction.\n    for (let i = 0; i < len; ++i) {\n      if (isNeutral.test(types[i])) {\n        let end\n        for (end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}\n        let before = (i ? types[i-1] : outerType) == \"L\"\n        let after = (end < len ? types[end] : outerType) == \"L\"\n        let replace = before == after ? (before ? \"L\" : \"R\") : outerType\n        for (let j = i; j < end; ++j) types[j] = replace\n        i = end - 1\n      }\n    }\n\n    // Here we depart from the documented algorithm, in order to avoid\n    // building up an actual levels array. Since there are only three\n    // levels (0, 1, 2) in an implementation that doesn't take\n    // explicit embedding into account, we can build up the order on\n    // the fly, without following the level-based algorithm.\n    let order = [], m\n    for (let i = 0; i < len;) {\n      if (countsAsLeft.test(types[i])) {\n        let start = i\n        for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}\n        order.push(new BidiSpan(0, start, i))\n      } else {\n        let pos = i, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0\n        for (++i; i < len && types[i] != \"L\"; ++i) {}\n        for (let j = pos; j < i;) {\n          if (countsAsNum.test(types[j])) {\n            if (pos < j) { order.splice(at, 0, new BidiSpan(1, pos, j)); at += isRTL }\n            let nstart = j\n            for (++j; j < i && countsAsNum.test(types[j]); ++j) {}\n            order.splice(at, 0, new BidiSpan(2, nstart, j))\n            at += isRTL\n            pos = j\n          } else ++j\n        }\n        if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i))\n      }\n    }\n    if (direction == \"ltr\") {\n      if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n        order[0].from = m[0].length\n        order.unshift(new BidiSpan(0, 0, m[0].length))\n      }\n      if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n        lst(order).to -= m[0].length\n        order.push(new BidiSpan(0, len - m[0].length, len))\n      }\n    }\n\n    return direction == \"rtl\" ? order.reverse() : order\n  }\n})()\n\n// Get the bidi ordering for the given line (and cache it). Returns\n// false for lines that are fully left-to-right, and an array of\n// BidiSpan objects otherwise.\nexport function getOrder(line, direction) {\n  let order = line.order\n  if (order == null) order = line.order = bidiOrdering(line.text, direction)\n  return order\n}\n","import { mac } from \"./browser.js\"\nimport { indexOf } from \"./misc.js\"\n\n// EVENT HANDLING\n\n// Lightweight event framework. on/off also work on DOM nodes,\n// registering native DOM handlers.\n\nconst noHandlers = []\n\nexport let on = function(emitter, type, f) {\n  if (emitter.addEventListener) {\n    emitter.addEventListener(type, f, false)\n  } else if (emitter.attachEvent) {\n    emitter.attachEvent(\"on\" + type, f)\n  } else {\n    let map = emitter._handlers || (emitter._handlers = {})\n    map[type] = (map[type] || noHandlers).concat(f)\n  }\n}\n\nexport function getHandlers(emitter, type) {\n  return emitter._handlers && emitter._handlers[type] || noHandlers\n}\n\nexport function off(emitter, type, f) {\n  if (emitter.removeEventListener) {\n    emitter.removeEventListener(type, f, false)\n  } else if (emitter.detachEvent) {\n    emitter.detachEvent(\"on\" + type, f)\n  } else {\n    let map = emitter._handlers, arr = map && map[type]\n    if (arr) {\n      let index = indexOf(arr, f)\n      if (index > -1)\n        map[type] = arr.slice(0, index).concat(arr.slice(index + 1))\n    }\n  }\n}\n\nexport function signal(emitter, type /*, values...*/) {\n  let handlers = getHandlers(emitter, type)\n  if (!handlers.length) return\n  let args = Array.prototype.slice.call(arguments, 2)\n  for (let i = 0; i < handlers.length; ++i) handlers[i].apply(null, args)\n}\n\n// The DOM events that CodeMirror handles can be overridden by\n// registering a (non-DOM) handler on the editor for the event name,\n// and preventDefault-ing the event in that handler.\nexport function signalDOMEvent(cm, e, override) {\n  if (typeof e == \"string\")\n    e = {type: e, preventDefault: function() { this.defaultPrevented = true }}\n  signal(cm, override || e.type, cm, e)\n  return e_defaultPrevented(e) || e.codemirrorIgnore\n}\n\nexport function signalCursorActivity(cm) {\n  let arr = cm._handlers && cm._handlers.cursorActivity\n  if (!arr) return\n  let set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = [])\n  for (let i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)\n    set.push(arr[i])\n}\n\nexport function hasHandler(emitter, type) {\n  return getHandlers(emitter, type).length > 0\n}\n\n// Add on and off methods to a constructor's prototype, to make\n// registering events on such objects more convenient.\nexport function eventMixin(ctor) {\n  ctor.prototype.on = function(type, f) {on(this, type, f)}\n  ctor.prototype.off = function(type, f) {off(this, type, f)}\n}\n\n// Due to the fact that we still support jurassic IE versions, some\n// compatibility wrappers are needed.\n\nexport function e_preventDefault(e) {\n  if (e.preventDefault) e.preventDefault()\n  else e.returnValue = false\n}\nexport function e_stopPropagation(e) {\n  if (e.stopPropagation) e.stopPropagation()\n  else e.cancelBubble = true\n}\nexport function e_defaultPrevented(e) {\n  return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n}\nexport function e_stop(e) {e_preventDefault(e); e_stopPropagation(e)}\n\nexport function e_target(e) {return e.target || e.srcElement}\nexport function e_button(e) {\n  let b = e.which\n  if (b == null) {\n    if (e.button & 1) b = 1\n    else if (e.button & 2) b = 3\n    else if (e.button & 4) b = 2\n  }\n  if (mac && e.ctrlKey && b == 1) b = 3\n  return b\n}\n","import { elt, range, removeChildren, removeChildrenAndAdd } from \"./dom.js\"\nimport { ie, ie_version } from \"./browser.js\"\n\n// Detect drag-and-drop\nexport let dragAndDrop = function() {\n  // There is *some* kind of drag-and-drop support in IE6-8, but I\n  // couldn't get it to work yet.\n  if (ie && ie_version < 9) return false\n  let div = elt('div')\n  return \"draggable\" in div || \"dragDrop\" in div\n}()\n\nlet zwspSupported\nexport function zeroWidthElement(measure) {\n  if (zwspSupported == null) {\n    let test = elt(\"span\", \"\\u200b\")\n    removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]))\n    if (measure.firstChild.offsetHeight != 0)\n      zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8)\n  }\n  let node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n    elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\")\n  node.setAttribute(\"cm-text\", \"\")\n  return node\n}\n\n// Feature-detect IE's crummy client rect reporting for bidi text\nlet badBidiRects\nexport function hasBadBidiRects(measure) {\n  if (badBidiRects != null) return badBidiRects\n  let txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"))\n  let r0 = range(txt, 0, 1).getBoundingClientRect()\n  let r1 = range(txt, 1, 2).getBoundingClientRect()\n  removeChildren(measure)\n  if (!r0 || r0.left == r0.right) return false // Safari returns null in some cases (#2780)\n  return badBidiRects = (r1.right - r0.right < 3)\n}\n\n// See if \"\".split is the broken IE version, if so, provide an\n// alternative way to split lines.\nexport let splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? string => {\n  let pos = 0, result = [], l = string.length\n  while (pos <= l) {\n    let nl = string.indexOf(\"\\n\", pos)\n    if (nl == -1) nl = string.length\n    let line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl)\n    let rt = line.indexOf(\"\\r\")\n    if (rt != -1) {\n      result.push(line.slice(0, rt))\n      pos += rt + 1\n    } else {\n      result.push(line)\n      pos = nl + 1\n    }\n  }\n  return result\n} : string => string.split(/\\r\\n?|\\n/)\n\nexport let hasSelection = window.getSelection ? te => {\n  try { return te.selectionStart != te.selectionEnd }\n  catch(e) { return false }\n} : te => {\n  let range\n  try {range = te.ownerDocument.selection.createRange()}\n  catch(e) {}\n  if (!range || range.parentElement() != te) return false\n  return range.compareEndPoints(\"StartToEnd\", range) != 0\n}\n\nexport let hasCopyEvent = (() => {\n  let e = elt(\"div\")\n  if (\"oncopy\" in e) return true\n  e.setAttribute(\"oncopy\", \"return;\")\n  return typeof e.oncopy == \"function\"\n})()\n\nlet badZoomedRects = null\nexport function hasBadZoomedRects(measure) {\n  if (badZoomedRects != null) return badZoomedRects\n  let node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"))\n  let normal = node.getBoundingClientRect()\n  let fromRange = range(node, 0, 1).getBoundingClientRect()\n  return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n}\n","import { copyObj, createObj } from \"./util/misc.js\"\n\n// Known modes, by name and by MIME\nexport let modes = {}, mimeModes = {}\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nexport function defineMode(name, mode) {\n  if (arguments.length > 2)\n    mode.dependencies = Array.prototype.slice.call(arguments, 2)\n  modes[name] = mode\n}\n\nexport function defineMIME(mime, spec) {\n  mimeModes[mime] = spec\n}\n\n// Given a MIME type, a {name, ...options} config object, or a name\n// string, return a mode config object.\nexport function resolveMode(spec) {\n  if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n    spec = mimeModes[spec]\n  } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n    let found = mimeModes[spec.name]\n    if (typeof found == \"string\") found = {name: found}\n    spec = createObj(found, spec)\n    spec.name = found.name\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n    return resolveMode(\"application/xml\")\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n    return resolveMode(\"application/json\")\n  }\n  if (typeof spec == \"string\") return {name: spec}\n  else return spec || {name: \"null\"}\n}\n\n// Given a mode spec (anything that resolveMode accepts), find and\n// initialize an actual mode object.\nexport function getMode(options, spec) {\n  spec = resolveMode(spec)\n  let mfactory = modes[spec.name]\n  if (!mfactory) return getMode(options, \"text/plain\")\n  let modeObj = mfactory(options, spec)\n  if (modeExtensions.hasOwnProperty(spec.name)) {\n    let exts = modeExtensions[spec.name]\n    for (let prop in exts) {\n      if (!exts.hasOwnProperty(prop)) continue\n      if (modeObj.hasOwnProperty(prop)) modeObj[\"_\" + prop] = modeObj[prop]\n      modeObj[prop] = exts[prop]\n    }\n  }\n  modeObj.name = spec.name\n  if (spec.helperType) modeObj.helperType = spec.helperType\n  if (spec.modeProps) for (let prop in spec.modeProps)\n    modeObj[prop] = spec.modeProps[prop]\n\n  return modeObj\n}\n\n// This can be used to attach properties to mode objects from\n// outside the actual mode definition.\nexport let modeExtensions = {}\nexport function extendMode(mode, properties) {\n  let exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {})\n  copyObj(properties, exts)\n}\n\nexport function copyState(mode, state) {\n  if (state === true) return state\n  if (mode.copyState) return mode.copyState(state)\n  let nstate = {}\n  for (let n in state) {\n    let val = state[n]\n    if (val instanceof Array) val = val.concat([])\n    nstate[n] = val\n  }\n  return nstate\n}\n\n// Given a mode and a state (for that mode), find the inner mode and\n// state at the position that the state refers to.\nexport function innerMode(mode, state) {\n  let info\n  while (mode.innerMode) {\n    info = mode.innerMode(state)\n    if (!info || info.mode == mode) break\n    state = info.state\n    mode = info.mode\n  }\n  return info || {mode: mode, state: state}\n}\n\nexport function startState(mode, a1, a2) {\n  return mode.startState ? mode.startState(a1, a2) : true\n}\n","import { countColumn } from \"./misc.js\"\n\n// STRING STREAM\n\n// Fed to the mode parsers, provides helper functions to make\n// parsers more succinct.\n\nclass StringStream {\n  constructor(string, tabSize, lineOracle) {\n    this.pos = this.start = 0\n    this.string = string\n    this.tabSize = tabSize || 8\n    this.lastColumnPos = this.lastColumnValue = 0\n    this.lineStart = 0\n    this.lineOracle = lineOracle\n  }\n\n  eol() {return this.pos >= this.string.length}\n  sol() {return this.pos == this.lineStart}\n  peek() {return this.string.charAt(this.pos) || undefined}\n  next() {\n    if (this.pos < this.string.length)\n      return this.string.charAt(this.pos++)\n  }\n  eat(match) {\n    let ch = this.string.charAt(this.pos)\n    let ok\n    if (typeof match == \"string\") ok = ch == match\n    else ok = ch && (match.test ? match.test(ch) : match(ch))\n    if (ok) {++this.pos; return ch}\n  }\n  eatWhile(match) {\n    let start = this.pos\n    while (this.eat(match)){}\n    return this.pos > start\n  }\n  eatSpace() {\n    let start = this.pos\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos\n    return this.pos > start\n  }\n  skipToEnd() {this.pos = this.string.length}\n  skipTo(ch) {\n    let found = this.string.indexOf(ch, this.pos)\n    if (found > -1) {this.pos = found; return true}\n  }\n  backUp(n) {this.pos -= n}\n  column() {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue)\n      this.lastColumnPos = this.start\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  }\n  indentation() {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  }\n  match(pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      let cased = str => caseInsensitive ? str.toLowerCase() : str\n      let substr = this.string.substr(this.pos, pattern.length)\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) this.pos += pattern.length\n        return true\n      }\n    } else {\n      let match = this.string.slice(this.pos).match(pattern)\n      if (match && match.index > 0) return null\n      if (match && consume !== false) this.pos += match[0].length\n      return match\n    }\n  }\n  current(){return this.string.slice(this.start, this.pos)}\n  hideFirstChars(n, inner) {\n    this.lineStart += n\n    try { return inner() }\n    finally { this.lineStart -= n }\n  }\n  lookAhead(n) {\n    let oracle = this.lineOracle\n    return oracle && oracle.lookAhead(n)\n  }\n  baseToken() {\n    let oracle = this.lineOracle\n    return oracle && oracle.baseToken(this.pos)\n  }\n}\n\nexport default StringStream\n","import { indexOf } from \"../util/misc.js\"\n\n// Find the line object corresponding to the given line number.\nexport function getLine(doc, n) {\n  n -= doc.first\n  if (n < 0 || n >= doc.size) throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\")\n  let chunk = doc\n  while (!chunk.lines) {\n    for (let i = 0;; ++i) {\n      let child = chunk.children[i], sz = child.chunkSize()\n      if (n < sz) { chunk = child; break }\n      n -= sz\n    }\n  }\n  return chunk.lines[n]\n}\n\n// Get the part of a document between two positions, as an array of\n// strings.\nexport function getBetween(doc, start, end) {\n  let out = [], n = start.line\n  doc.iter(start.line, end.line + 1, line => {\n    let text = line.text\n    if (n == end.line) text = text.slice(0, end.ch)\n    if (n == start.line) text = text.slice(start.ch)\n    out.push(text)\n    ++n\n  })\n  return out\n}\n// Get the lines between from and to, as array of strings.\nexport function getLines(doc, from, to) {\n  let out = []\n  doc.iter(from, to, line => { out.push(line.text) }) // iter aborts when callback returns truthy value\n  return out\n}\n\n// Update the height of a line, propagating the height change\n// upwards to parent nodes.\nexport function updateLineHeight(line, height) {\n  let diff = height - line.height\n  if (diff) for (let n = line; n; n = n.parent) n.height += diff\n}\n\n// Given a line object, find its line number by walking up through\n// its parent links.\nexport function lineNo(line) {\n  if (line.parent == null) return null\n  let cur = line.parent, no = indexOf(cur.lines, line)\n  for (let chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n    for (let i = 0;; ++i) {\n      if (chunk.children[i] == cur) break\n      no += chunk.children[i].chunkSize()\n    }\n  }\n  return no + cur.first\n}\n\n// Find the line at the given vertical position, using the height\n// information in the document tree.\nexport function lineAtHeight(chunk, h) {\n  let n = chunk.first\n  outer: do {\n    for (let i = 0; i < chunk.children.length; ++i) {\n      let child = chunk.children[i], ch = child.height\n      if (h < ch) { chunk = child; continue outer }\n      h -= ch\n      n += child.chunkSize()\n    }\n    return n\n  } while (!chunk.lines)\n  let i = 0\n  for (; i < chunk.lines.length; ++i) {\n    let line = chunk.lines[i], lh = line.height\n    if (h < lh) break\n    h -= lh\n  }\n  return n + i\n}\n\nexport function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\nexport function lineNumberFor(options, i) {\n  return String(options.lineNumberFormatter(i + options.firstLineNumber))\n}\n","import { getLine } from \"./utils_line.js\"\n\n// A Pos instance represents a position within the text.\nexport function Pos(line, ch, sticky = null) {\n  if (!(this instanceof Pos)) return new Pos(line, ch, sticky)\n  this.line = line\n  this.ch = ch\n  this.sticky = sticky\n}\n\n// Compare two positions, return 0 if they are the same, a negative\n// number when a is less, and a positive number otherwise.\nexport function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\nexport function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\nexport function copyPos(x) {return Pos(x.line, x.ch)}\nexport function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\nexport function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n// Most of the external API clips given positions to make sure they\n// actually exist within the document.\nexport function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\nexport function clipPos(doc, pos) {\n  if (pos.line < doc.first) return Pos(doc.first, 0)\n  let last = doc.first + doc.size - 1\n  if (pos.line > last) return Pos(last, getLine(doc, last).text.length)\n  return clipToLen(pos, getLine(doc, pos.line).text.length)\n}\nfunction clipToLen(pos, linelen) {\n  let ch = pos.ch\n  if (ch == null || ch > linelen) return Pos(pos.line, linelen)\n  else if (ch < 0) return Pos(pos.line, 0)\n  else return pos\n}\nexport function clipPosArray(doc, array) {\n  let out = []\n  for (let i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i])\n  return out\n}\n","import { countColumn } from \"../util/misc.js\"\nimport { copyState, innerMode, startState } from \"../modes.js\"\nimport StringStream from \"../util/StringStream.js\"\n\nimport { getLine, lineNo } from \"./utils_line.js\"\nimport { clipPos } from \"./pos.js\"\n\nclass SavedContext {\n  constructor(state, lookAhead) {\n    this.state = state\n    this.lookAhead = lookAhead\n  }\n}\n\nclass Context {\n  constructor(doc, state, line, lookAhead) {\n    this.state = state\n    this.doc = doc\n    this.line = line\n    this.maxLookAhead = lookAhead || 0\n    this.baseTokens = null\n    this.baseTokenPos = 1\n  }\n\n  lookAhead(n) {\n    let line = this.doc.getLine(this.line + n)\n    if (line != null && n > this.maxLookAhead) this.maxLookAhead = n\n    return line\n  }\n\n  baseToken(n) {\n    if (!this.baseTokens) return null\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      this.baseTokenPos += 2\n    let type = this.baseTokens[this.baseTokenPos + 1]\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  }\n\n  nextLine() {\n    this.line++\n    if (this.maxLookAhead > 0) this.maxLookAhead--\n  }\n\n  static fromSaved(doc, saved, line) {\n    if (saved instanceof SavedContext)\n      return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead)\n    else\n      return new Context(doc, copyState(doc.mode, saved), line)\n  }\n\n  save(copy) {\n    let state = copy !== false ? copyState(this.doc.mode, this.state) : this.state\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  }\n}\n\n\n// Compute a style array (an array starting with a mode generation\n// -- for invalidation -- followed by pairs of end positions and\n// style strings), which is used to highlight the tokens on the\n// line.\nexport function highlightLine(cm, line, context, forceToEnd) {\n  // A styles array always starts with a number identifying the\n  // mode/overlays that it is based on (for easy invalidation).\n  let st = [cm.state.modeGen], lineClasses = {}\n  // Compute the base array of styles\n  runMode(cm, line.text, cm.doc.mode, context, (end, style) => st.push(end, style),\n          lineClasses, forceToEnd)\n  let state = context.state\n\n  // Run overlays, adjust style array.\n  for (let o = 0; o < cm.state.overlays.length; ++o) {\n    context.baseTokens = st\n    let overlay = cm.state.overlays[o], i = 1, at = 0\n    context.state = true\n    runMode(cm, line.text, overlay.mode, context, (end, style) => {\n      let start = i\n      // Ensure there's a token end at the current position, and that i points at it\n      while (at < end) {\n        let i_end = st[i]\n        if (i_end > end)\n          st.splice(i, 1, end, st[i+1], i_end)\n        i += 2\n        at = Math.min(end, i_end)\n      }\n      if (!style) return\n      if (overlay.opaque) {\n        st.splice(start, i - start, end, \"overlay \" + style)\n        i = start + 2\n      } else {\n        for (; start < i; start += 2) {\n          let cur = st[start+1]\n          st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style\n        }\n      }\n    }, lineClasses)\n    context.state = state\n    context.baseTokens = null\n    context.baseTokenPos = 1\n  }\n\n  return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n}\n\nexport function getLineStyles(cm, line, updateFrontier) {\n  if (!line.styles || line.styles[0] != cm.state.modeGen) {\n    let context = getContextBefore(cm, lineNo(line))\n    let resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state)\n    let result = highlightLine(cm, line, context)\n    if (resetState) context.state = resetState\n    line.stateAfter = context.save(!resetState)\n    line.styles = result.styles\n    if (result.classes) line.styleClasses = result.classes\n    else if (line.styleClasses) line.styleClasses = null\n    if (updateFrontier === cm.doc.highlightFrontier)\n      cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier)\n  }\n  return line.styles\n}\n\nexport function getContextBefore(cm, n, precise) {\n  let doc = cm.doc, display = cm.display\n  if (!doc.mode.startState) return new Context(doc, true, n)\n  let start = findStartLine(cm, n, precise)\n  let saved = start > doc.first && getLine(doc, start - 1).stateAfter\n  let context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start)\n\n  doc.iter(start, n, line => {\n    processLine(cm, line.text, context)\n    let pos = context.line\n    line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null\n    context.nextLine()\n  })\n  if (precise) doc.modeFrontier = context.line\n  return context\n}\n\n// Lightweight form of highlight -- proceed over this line and\n// update state, but don't save a style array. Used for lines that\n// aren't currently visible.\nexport function processLine(cm, text, context, startAt) {\n  let mode = cm.doc.mode\n  let stream = new StringStream(text, cm.options.tabSize, context)\n  stream.start = stream.pos = startAt || 0\n  if (text == \"\") callBlankLine(mode, context.state)\n  while (!stream.eol()) {\n    readToken(mode, stream, context.state)\n    stream.start = stream.pos\n  }\n}\n\nfunction callBlankLine(mode, state) {\n  if (mode.blankLine) return mode.blankLine(state)\n  if (!mode.innerMode) return\n  let inner = innerMode(mode, state)\n  if (inner.mode.blankLine) return inner.mode.blankLine(inner.state)\n}\n\nfunction readToken(mode, stream, state, inner) {\n  for (let i = 0; i < 10; i++) {\n    if (inner) inner[0] = innerMode(mode, state).mode\n    let style = mode.token(stream, state)\n    if (stream.pos > stream.start) return style\n  }\n  throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n}\n\nclass Token {\n  constructor(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos\n    this.string = stream.current()\n    this.type = type || null\n    this.state = state\n  }\n}\n\n// Utility for getTokenAt and getLineTokens\nexport function takeToken(cm, pos, precise, asArray) {\n  let doc = cm.doc, mode = doc.mode, style\n  pos = clipPos(doc, pos)\n  let line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise)\n  let stream = new StringStream(line.text, cm.options.tabSize, context), tokens\n  if (asArray) tokens = []\n  while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n    stream.start = stream.pos\n    style = readToken(mode, stream, context.state)\n    if (asArray) tokens.push(new Token(stream, style, copyState(doc.mode, context.state)))\n  }\n  return asArray ? tokens : new Token(stream, style, context.state)\n}\n\nfunction extractLineClasses(type, output) {\n  if (type) for (;;) {\n    let lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/)\n    if (!lineClass) break\n    type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length)\n    let prop = lineClass[1] ? \"bgClass\" : \"textClass\"\n    if (output[prop] == null)\n      output[prop] = lineClass[2]\n    else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n      output[prop] += \" \" + lineClass[2]\n  }\n  return type\n}\n\n// Run the given mode's parser over a line, calling f for each token.\nfunction runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n  let flattenSpans = mode.flattenSpans\n  if (flattenSpans == null) flattenSpans = cm.options.flattenSpans\n  let curStart = 0, curStyle = null\n  let stream = new StringStream(text, cm.options.tabSize, context), style\n  let inner = cm.options.addModeClass && [null]\n  if (text == \"\") extractLineClasses(callBlankLine(mode, context.state), lineClasses)\n  while (!stream.eol()) {\n    if (stream.pos > cm.options.maxHighlightLength) {\n      flattenSpans = false\n      if (forceToEnd) processLine(cm, text, context, stream.pos)\n      stream.pos = text.length\n      style = null\n    } else {\n      style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses)\n    }\n    if (inner) {\n      let mName = inner[0].name\n      if (mName) style = \"m-\" + (style ? mName + \" \" + style : mName)\n    }\n    if (!flattenSpans || curStyle != style) {\n      while (curStart < stream.start) {\n        curStart = Math.min(stream.start, curStart + 5000)\n        f(curStart, curStyle)\n      }\n      curStyle = style\n    }\n    stream.start = stream.pos\n  }\n  while (curStart < stream.pos) {\n    // Webkit seems to refuse to render text nodes longer than 57444\n    // characters, and returns inaccurate measurements in nodes\n    // starting around 5000 chars.\n    let pos = Math.min(stream.pos, curStart + 5000)\n    f(pos, curStyle)\n    curStart = pos\n  }\n}\n\n// Finds the line to start with when starting a parse. Tries to\n// find a line with a stateAfter, so that it can start with a\n// valid state. If that fails, it returns the line with the\n// smallest indentation, which tends to need the least context to\n// parse correctly.\nfunction findStartLine(cm, n, precise) {\n  let minindent, minline, doc = cm.doc\n  let lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100)\n  for (let search = n; search > lim; --search) {\n    if (search <= doc.first) return doc.first\n    let line = getLine(doc, search - 1), after = line.stateAfter\n    if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n      return search\n    let indented = countColumn(line.text, null, cm.options.tabSize)\n    if (minline == null || minindent > indented) {\n      minline = search - 1\n      minindent = indented\n    }\n  }\n  return minline\n}\n\nexport function retreatFrontier(doc, n) {\n  doc.modeFrontier = Math.min(doc.modeFrontier, n)\n  if (doc.highlightFrontier < n - 10) return\n  let start = doc.first\n  for (let line = n - 1; line > start; line--) {\n    let saved = getLine(doc, line).stateAfter\n    // change is on 3\n    // state on line 1 looked ahead 2 -- so saw 3\n    // test 1 + 2 < 3 should cover this\n    if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n      start = line + 1\n      break\n    }\n  }\n  doc.highlightFrontier = Math.min(doc.highlightFrontier, start)\n}\n","// Optimize some code when these features are not used.\nexport let sawReadOnlySpans = false, sawCollapsedSpans = false\n\nexport function seeReadOnlySpans() {\n  sawReadOnlySpans = true\n}\n\nexport function seeCollapsedSpans() {\n  sawCollapsedSpans = true\n}\n","import { indexOf, lst } from \"../util/misc.js\"\n\nimport { cmp } from \"./pos.js\"\nimport { sawCollapsedSpans } from \"./saw_special_spans.js\"\nimport { getLine, isLine, lineNo } from \"./utils_line.js\"\n\n// TEXTMARKER SPANS\n\nexport function MarkedSpan(marker, from, to) {\n  this.marker = marker\n  this.from = from; this.to = to\n}\n\n// Search an array of spans for a span matching the given marker.\nexport function getMarkedSpanFor(spans, marker) {\n  if (spans) for (let i = 0; i < spans.length; ++i) {\n    let span = spans[i]\n    if (span.marker == marker) return span\n  }\n}\n\n// Remove a span from an array, returning undefined if no spans are\n// left (we don't store arrays for lines without spans).\nexport function removeMarkedSpan(spans, span) {\n  let r\n  for (let i = 0; i < spans.length; ++i)\n    if (spans[i] != span) (r || (r = [])).push(spans[i])\n  return r\n}\n\n// Add a span to a line.\nexport function addMarkedSpan(line, span, op) {\n  let inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet))\n  if (inThisOp && inThisOp.has(line.markedSpans)) {\n    line.markedSpans.push(span)\n  } else {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span]\n    if (inThisOp) inThisOp.add(line.markedSpans)\n  }\n  span.marker.attachLine(line)\n}\n\n// Used for the algorithm that adjusts markers for a change in the\n// document. These functions cut an array of spans at a given\n// character position, returning an array of remaining chunks (or\n// undefined if nothing remains).\nfunction markedSpansBefore(old, startCh, isInsert) {\n  let nw\n  if (old) for (let i = 0; i < old.length; ++i) {\n    let span = old[i], marker = span.marker\n    let startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh)\n    if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n      let endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n      ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to))\n    }\n  }\n  return nw\n}\nfunction markedSpansAfter(old, endCh, isInsert) {\n  let nw\n  if (old) for (let i = 0; i < old.length; ++i) {\n    let span = old[i], marker = span.marker\n    let endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh)\n    if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n      let startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n      ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                            span.to == null ? null : span.to - endCh))\n    }\n  }\n  return nw\n}\n\n// Given a change object, compute the new set of marker spans that\n// cover the line in which the change took place. Removes spans\n// entirely within the change, reconnects spans belonging to the\n// same marker that appear on both sides of the change, and cuts off\n// spans partially within the change. Returns an array of span\n// arrays with one element for each line in (after) the change.\nexport function stretchSpansOverChange(doc, change) {\n  if (change.full) return null\n  let oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans\n  let oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans\n  if (!oldFirst && !oldLast) return null\n\n  let startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0\n  // Get the spans that 'stick out' on both sides\n  let first = markedSpansBefore(oldFirst, startCh, isInsert)\n  let last = markedSpansAfter(oldLast, endCh, isInsert)\n\n  // Next, merge those two ends\n  let sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0)\n  if (first) {\n    // Fix up .to properties of first\n    for (let i = 0; i < first.length; ++i) {\n      let span = first[i]\n      if (span.to == null) {\n        let found = getMarkedSpanFor(last, span.marker)\n        if (!found) span.to = startCh\n        else if (sameLine) span.to = found.to == null ? null : found.to + offset\n      }\n    }\n  }\n  if (last) {\n    // Fix up .from in last (or move them into first in case of sameLine)\n    for (let i = 0; i < last.length; ++i) {\n      let span = last[i]\n      if (span.to != null) span.to += offset\n      if (span.from == null) {\n        let found = getMarkedSpanFor(first, span.marker)\n        if (!found) {\n          span.from = offset\n          if (sameLine) (first || (first = [])).push(span)\n        }\n      } else {\n        span.from += offset\n        if (sameLine) (first || (first = [])).push(span)\n      }\n    }\n  }\n  // Make sure we didn't create any zero-length spans\n  if (first) first = clearEmptySpans(first)\n  if (last && last != first) last = clearEmptySpans(last)\n\n  let newMarkers = [first]\n  if (!sameLine) {\n    // Fill gap with whole-line-spans\n    let gap = change.text.length - 2, gapMarkers\n    if (gap > 0 && first)\n      for (let i = 0; i < first.length; ++i)\n        if (first[i].to == null)\n          (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null))\n    for (let i = 0; i < gap; ++i)\n      newMarkers.push(gapMarkers)\n    newMarkers.push(last)\n  }\n  return newMarkers\n}\n\n// Remove spans that are empty and don't have a clearWhenEmpty\n// option of false.\nfunction clearEmptySpans(spans) {\n  for (let i = 0; i < spans.length; ++i) {\n    let span = spans[i]\n    if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n      spans.splice(i--, 1)\n  }\n  if (!spans.length) return null\n  return spans\n}\n\n// Used to 'clip' out readOnly ranges when making a change.\nexport function removeReadOnlyRanges(doc, from, to) {\n  let markers = null\n  doc.iter(from.line, to.line + 1, line => {\n    if (line.markedSpans) for (let i = 0; i < line.markedSpans.length; ++i) {\n      let mark = line.markedSpans[i].marker\n      if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n        (markers || (markers = [])).push(mark)\n    }\n  })\n  if (!markers) return null\n  let parts = [{from: from, to: to}]\n  for (let i = 0; i < markers.length; ++i) {\n    let mk = markers[i], m = mk.find(0)\n    for (let j = 0; j < parts.length; ++j) {\n      let p = parts[j]\n      if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue\n      let newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to)\n      if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n        newParts.push({from: p.from, to: m.from})\n      if (dto > 0 || !mk.inclusiveRight && !dto)\n        newParts.push({from: m.to, to: p.to})\n      parts.splice.apply(parts, newParts)\n      j += newParts.length - 3\n    }\n  }\n  return parts\n}\n\n// Connect or disconnect spans from a line.\nexport function detachMarkedSpans(line) {\n  let spans = line.markedSpans\n  if (!spans) return\n  for (let i = 0; i < spans.length; ++i)\n    spans[i].marker.detachLine(line)\n  line.markedSpans = null\n}\nexport function attachMarkedSpans(line, spans) {\n  if (!spans) return\n  for (let i = 0; i < spans.length; ++i)\n    spans[i].marker.attachLine(line)\n  line.markedSpans = spans\n}\n\n// Helpers used when computing which overlapping collapsed span\n// counts as the larger one.\nfunction extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\nfunction extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n// Returns a number indicating which of two overlapping collapsed\n// spans is larger (and thus includes the other). Falls back to\n// comparing ids when the spans cover exactly the same range.\nexport function compareCollapsedMarkers(a, b) {\n  let lenDiff = a.lines.length - b.lines.length\n  if (lenDiff != 0) return lenDiff\n  let aPos = a.find(), bPos = b.find()\n  let fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b)\n  if (fromCmp) return -fromCmp\n  let toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b)\n  if (toCmp) return toCmp\n  return b.id - a.id\n}\n\n// Find out whether a line ends or starts in a collapsed span. If\n// so, return the marker for that span.\nfunction collapsedSpanAtSide(line, start) {\n  let sps = sawCollapsedSpans && line.markedSpans, found\n  if (sps) for (let sp, i = 0; i < sps.length; ++i) {\n    sp = sps[i]\n    if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n        (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n      found = sp.marker\n  }\n  return found\n}\nexport function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\nexport function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\nexport function collapsedSpanAround(line, ch) {\n  let sps = sawCollapsedSpans && line.markedSpans, found\n  if (sps) for (let i = 0; i < sps.length; ++i) {\n    let sp = sps[i]\n    if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n        (!found || compareCollapsedMarkers(found, sp.marker) < 0)) found = sp.marker\n  }\n  return found\n}\n\n// Test whether there exists a collapsed span that partially\n// overlaps (covers the start or end, but not both) of a new span.\n// Such overlap is not allowed.\nexport function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n  let line = getLine(doc, lineNo)\n  let sps = sawCollapsedSpans && line.markedSpans\n  if (sps) for (let i = 0; i < sps.length; ++i) {\n    let sp = sps[i]\n    if (!sp.marker.collapsed) continue\n    let found = sp.marker.find(0)\n    let fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker)\n    let toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker)\n    if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue\n    if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n        fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n      return true\n  }\n}\n\n// A visual line is a line as drawn on the screen. Folding, for\n// example, can cause multiple logical lines to appear on the same\n// visual line. This finds the start of the visual line that the\n// given line is part of (usually that is the line itself).\nexport function visualLine(line) {\n  let merged\n  while (merged = collapsedSpanAtStart(line))\n    line = merged.find(-1, true).line\n  return line\n}\n\nexport function visualLineEnd(line) {\n  let merged\n  while (merged = collapsedSpanAtEnd(line))\n    line = merged.find(1, true).line\n  return line\n}\n\n// Returns an array of logical lines that continue the visual line\n// started by the argument, or undefined if there are no such lines.\nexport function visualLineContinued(line) {\n  let merged, lines\n  while (merged = collapsedSpanAtEnd(line)) {\n    line = merged.find(1, true).line\n    ;(lines || (lines = [])).push(line)\n  }\n  return lines\n}\n\n// Get the line number of the start of the visual line that the\n// given line number is part of.\nexport function visualLineNo(doc, lineN) {\n  let line = getLine(doc, lineN), vis = visualLine(line)\n  if (line == vis) return lineN\n  return lineNo(vis)\n}\n\n// Get the line number of the start of the next visual line after\n// the given line.\nexport function visualLineEndNo(doc, lineN) {\n  if (lineN > doc.lastLine()) return lineN\n  let line = getLine(doc, lineN), merged\n  if (!lineIsHidden(doc, line)) return lineN\n  while (merged = collapsedSpanAtEnd(line))\n    line = merged.find(1, true).line\n  return lineNo(line) + 1\n}\n\n// Compute whether a line is hidden. Lines count as hidden when they\n// are part of a visual line that starts with another line, or when\n// they are entirely covered by collapsed, non-widget span.\nexport function lineIsHidden(doc, line) {\n  let sps = sawCollapsedSpans && line.markedSpans\n  if (sps) for (let sp, i = 0; i < sps.length; ++i) {\n    sp = sps[i]\n    if (!sp.marker.collapsed) continue\n    if (sp.from == null) return true\n    if (sp.marker.widgetNode) continue\n    if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n      return true\n  }\n}\nfunction lineIsHiddenInner(doc, line, span) {\n  if (span.to == null) {\n    let end = span.marker.find(1, true)\n    return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n  }\n  if (span.marker.inclusiveRight && span.to == line.text.length)\n    return true\n  for (let sp, i = 0; i < line.markedSpans.length; ++i) {\n    sp = line.markedSpans[i]\n    if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n        (sp.to == null || sp.to != span.from) &&\n        (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n        lineIsHiddenInner(doc, line, sp)) return true\n  }\n}\n\n// Find the height above the given line.\nexport function heightAtLine(lineObj) {\n  lineObj = visualLine(lineObj)\n\n  let h = 0, chunk = lineObj.parent\n  for (let i = 0; i < chunk.lines.length; ++i) {\n    let line = chunk.lines[i]\n    if (line == lineObj) break\n    else h += line.height\n  }\n  for (let p = chunk.parent; p; chunk = p, p = chunk.parent) {\n    for (let i = 0; i < p.children.length; ++i) {\n      let cur = p.children[i]\n      if (cur == chunk) break\n      else h += cur.height\n    }\n  }\n  return h\n}\n\n// Compute the character length of a line, taking into account\n// collapsed ranges (see markText) that might hide parts, and join\n// other lines onto it.\nexport function lineLength(line) {\n  if (line.height == 0) return 0\n  let len = line.text.length, merged, cur = line\n  while (merged = collapsedSpanAtStart(cur)) {\n    let found = merged.find(0, true)\n    cur = found.from.line\n    len += found.from.ch - found.to.ch\n  }\n  cur = line\n  while (merged = collapsedSpanAtEnd(cur)) {\n    let found = merged.find(0, true)\n    len -= cur.text.length - found.from.ch\n    cur = found.to.line\n    len += cur.text.length - found.to.ch\n  }\n  return len\n}\n\n// Find the longest line in the document.\nexport function findMaxLine(cm) {\n  let d = cm.display, doc = cm.doc\n  d.maxLine = getLine(doc, doc.first)\n  d.maxLineLength = lineLength(d.maxLine)\n  d.maxLineChanged = true\n  doc.iter(line => {\n    let len = lineLength(line)\n    if (len > d.maxLineLength) {\n      d.maxLineLength = len\n      d.maxLine = line\n    }\n  })\n}\n","import { getOrder } from \"../util/bidi.js\"\nimport { ie, ie_version, webkit } from \"../util/browser.js\"\nimport { elt, eltP, joinClasses } from \"../util/dom.js\"\nimport { eventMixin, signal } from \"../util/event.js\"\nimport { hasBadBidiRects, zeroWidthElement } from \"../util/feature_detection.js\"\nimport { lst, spaceStr } from \"../util/misc.js\"\n\nimport { getLineStyles } from \"./highlight.js\"\nimport { attachMarkedSpans, compareCollapsedMarkers, detachMarkedSpans, lineIsHidden, visualLineContinued } from \"./spans.js\"\nimport { getLine, lineNo, updateLineHeight } from \"./utils_line.js\"\n\n// LINE DATA STRUCTURE\n\n// Line objects. These hold state related to a line, including\n// highlighting info (the styles array).\nexport class Line {\n  constructor(text, markedSpans, estimateHeight) {\n    this.text = text\n    attachMarkedSpans(this, markedSpans)\n    this.height = estimateHeight ? estimateHeight(this) : 1\n  }\n\n  lineNo() { return lineNo(this) }\n}\neventMixin(Line)\n\n// Change the content (text, markers) of a line. Automatically\n// invalidates cached information and tries to re-estimate the\n// line's height.\nexport function updateLine(line, text, markedSpans, estimateHeight) {\n  line.text = text\n  if (line.stateAfter) line.stateAfter = null\n  if (line.styles) line.styles = null\n  if (line.order != null) line.order = null\n  detachMarkedSpans(line)\n  attachMarkedSpans(line, markedSpans)\n  let estHeight = estimateHeight ? estimateHeight(line) : 1\n  if (estHeight != line.height) updateLineHeight(line, estHeight)\n}\n\n// Detach a line from the document tree and its markers.\nexport function cleanUpLine(line) {\n  line.parent = null\n  detachMarkedSpans(line)\n}\n\n// Convert a style as returned by a mode (either null, or a string\n// containing one or more styles) to a CSS style. This is cached,\n// and also looks for line-wide styles.\nlet styleToClassCache = {}, styleToClassCacheWithMode = {}\nfunction interpretTokenStyle(style, options) {\n  if (!style || /^\\s*$/.test(style)) return null\n  let cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache\n  return cache[style] ||\n    (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n}\n\n// Render the DOM representation of the text of a line. Also builds\n// up a 'line map', which points at the DOM nodes that represent\n// specific stretches of text, and is used by the measuring code.\n// The returned object contains the DOM node, this map, and\n// information about line-wide styles that were set by the mode.\nexport function buildLineContent(cm, lineView) {\n  // The padding-right forces the element to have a 'border', which\n  // is needed on Webkit to be able to get line-level bounding\n  // rectangles for it (in measureChar).\n  let content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null)\n  let builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                 col: 0, pos: 0, cm: cm,\n                 trailingSpace: false,\n                 splitSpaces: cm.getOption(\"lineWrapping\")}\n  lineView.measure = {}\n\n  // Iterate over the logical lines that make up this visual line.\n  for (let i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n    let line = i ? lineView.rest[i - 1] : lineView.line, order\n    builder.pos = 0\n    builder.addToken = buildToken\n    // Optionally wire in some hacks into the token-rendering\n    // algorithm, to deal with browser quirks.\n    if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n      builder.addToken = buildTokenBadBidi(builder.addToken, order)\n    builder.map = []\n    let allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line)\n    insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate))\n    if (line.styleClasses) {\n      if (line.styleClasses.bgClass)\n        builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\")\n      if (line.styleClasses.textClass)\n        builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\")\n    }\n\n    // Ensure at least a single node is present, for measuring.\n    if (builder.map.length == 0)\n      builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)))\n\n    // Store the map and a cache object for the current logical line\n    if (i == 0) {\n      lineView.measure.map = builder.map\n      lineView.measure.cache = {}\n    } else {\n      ;(lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n      ;(lineView.measure.caches || (lineView.measure.caches = [])).push({})\n    }\n  }\n\n  // See issue #2901\n  if (webkit) {\n    let last = builder.content.lastChild\n    if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n      builder.content.className = \"cm-tab-wrap-hack\"\n  }\n\n  signal(cm, \"renderLine\", cm, lineView.line, builder.pre)\n  if (builder.pre.className)\n    builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\")\n\n  return builder\n}\n\nexport function defaultSpecialCharPlaceholder(ch) {\n  let token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\")\n  token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16)\n  token.setAttribute(\"aria-label\", token.title)\n  return token\n}\n\n// Build up the DOM representation for a single token, and add it to\n// the line map. Takes care to render special characters separately.\nfunction buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n  if (!text) return\n  let displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text\n  let special = builder.cm.state.specialChars, mustWrap = false\n  let content\n  if (!special.test(text)) {\n    builder.col += text.length\n    content = document.createTextNode(displayText)\n    builder.map.push(builder.pos, builder.pos + text.length, content)\n    if (ie && ie_version < 9) mustWrap = true\n    builder.pos += text.length\n  } else {\n    content = document.createDocumentFragment()\n    let pos = 0\n    while (true) {\n      special.lastIndex = pos\n      let m = special.exec(text)\n      let skipped = m ? m.index - pos : text.length - pos\n      if (skipped) {\n        let txt = document.createTextNode(displayText.slice(pos, pos + skipped))\n        if (ie && ie_version < 9) content.appendChild(elt(\"span\", [txt]))\n        else content.appendChild(txt)\n        builder.map.push(builder.pos, builder.pos + skipped, txt)\n        builder.col += skipped\n        builder.pos += skipped\n      }\n      if (!m) break\n      pos += skipped + 1\n      let txt\n      if (m[0] == \"\\t\") {\n        let tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize\n        txt = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"))\n        txt.setAttribute(\"role\", \"presentation\")\n        txt.setAttribute(\"cm-text\", \"\\t\")\n        builder.col += tabWidth\n      } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n        txt = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"))\n        txt.setAttribute(\"cm-text\", m[0])\n        builder.col += 1\n      } else {\n        txt = builder.cm.options.specialCharPlaceholder(m[0])\n        txt.setAttribute(\"cm-text\", m[0])\n        if (ie && ie_version < 9) content.appendChild(elt(\"span\", [txt]))\n        else content.appendChild(txt)\n        builder.col += 1\n      }\n      builder.map.push(builder.pos, builder.pos + 1, txt)\n      builder.pos++\n    }\n  }\n  builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32\n  if (style || startStyle || endStyle || mustWrap || css || attributes) {\n    let fullStyle = style || \"\"\n    if (startStyle) fullStyle += startStyle\n    if (endStyle) fullStyle += endStyle\n    let token = elt(\"span\", [content], fullStyle, css)\n    if (attributes) {\n      for (let attr in attributes) if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n        token.setAttribute(attr, attributes[attr])\n    }\n    return builder.content.appendChild(token)\n  }\n  builder.content.appendChild(content)\n}\n\n// Change some spaces to NBSP to prevent the browser from collapsing\n// trailing spaces at the end of a line when rendering text (issue #1362).\nfunction splitSpaces(text, trailingBefore) {\n  if (text.length > 1 && !/  /.test(text)) return text\n  let spaceBefore = trailingBefore, result = \"\"\n  for (let i = 0; i < text.length; i++) {\n    let ch = text.charAt(i)\n    if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n      ch = \"\\u00a0\"\n    result += ch\n    spaceBefore = ch == \" \"\n  }\n  return result\n}\n\n// Work around nonsense dimensions being reported for stretches of\n// right-to-left text.\nfunction buildTokenBadBidi(inner, order) {\n  return (builder, text, style, startStyle, endStyle, css, attributes) => {\n    style = style ? style + \" cm-force-border\" : \"cm-force-border\"\n    let start = builder.pos, end = start + text.length\n    for (;;) {\n      // Find the part that overlaps with the start of this text\n      let part\n      for (let i = 0; i < order.length; i++) {\n        part = order[i]\n        if (part.to > start && part.from <= start) break\n      }\n      if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, css, attributes)\n      inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes)\n      startStyle = null\n      text = text.slice(part.to - start)\n      start = part.to\n    }\n  }\n}\n\nfunction buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n  let widget = !ignoreWidget && marker.widgetNode\n  if (widget) builder.map.push(builder.pos, builder.pos + size, widget)\n  if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n    if (!widget)\n      widget = builder.content.appendChild(document.createElement(\"span\"))\n    widget.setAttribute(\"cm-marker\", marker.id)\n  }\n  if (widget) {\n    builder.cm.display.input.setUneditable(widget)\n    builder.content.appendChild(widget)\n  }\n  builder.pos += size\n  builder.trailingSpace = false\n}\n\n// Outputs a number of spans to make up a line, taking highlighting\n// and marked text into account.\nfunction insertLineContent(line, builder, styles) {\n  let spans = line.markedSpans, allText = line.text, at = 0\n  if (!spans) {\n    for (let i = 1; i < styles.length; i+=2)\n      builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options))\n    return\n  }\n\n  let len = allText.length, pos = 0, i = 1, text = \"\", style, css\n  let nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes\n  for (;;) {\n    if (nextChange == pos) { // Update current marker set\n      spanStyle = spanEndStyle = spanStartStyle = css = \"\"\n      attributes = null\n      collapsed = null; nextChange = Infinity\n      let foundBookmarks = [], endStyles\n      for (let j = 0; j < spans.length; ++j) {\n        let sp = spans[j], m = sp.marker\n        if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n          foundBookmarks.push(m)\n        } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n          if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n            nextChange = sp.to\n            spanEndStyle = \"\"\n          }\n          if (m.className) spanStyle += \" \" + m.className\n          if (m.css) css = (css ? css + \";\" : \"\") + m.css\n          if (m.startStyle && sp.from == pos) spanStartStyle += \" \" + m.startStyle\n          if (m.endStyle && sp.to == nextChange) (endStyles || (endStyles = [])).push(m.endStyle, sp.to)\n          // support for the old title property\n          // https://github.com/codemirror/CodeMirror/pull/5673\n          if (m.title) (attributes || (attributes = {})).title = m.title\n          if (m.attributes) {\n            for (let attr in m.attributes)\n              (attributes || (attributes = {}))[attr] = m.attributes[attr]\n          }\n          if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n            collapsed = sp\n        } else if (sp.from > pos && nextChange > sp.from) {\n          nextChange = sp.from\n        }\n      }\n      if (endStyles) for (let j = 0; j < endStyles.length; j += 2)\n        if (endStyles[j + 1] == nextChange) spanEndStyle += \" \" + endStyles[j]\n\n      if (!collapsed || collapsed.from == pos) for (let j = 0; j < foundBookmarks.length; ++j)\n        buildCollapsedSpan(builder, 0, foundBookmarks[j])\n      if (collapsed && (collapsed.from || 0) == pos) {\n        buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                           collapsed.marker, collapsed.from == null)\n        if (collapsed.to == null) return\n        if (collapsed.to == pos) collapsed = false\n      }\n    }\n    if (pos >= len) break\n\n    let upto = Math.min(len, nextChange)\n    while (true) {\n      if (text) {\n        let end = pos + text.length\n        if (!collapsed) {\n          let tokenText = end > upto ? text.slice(0, upto - pos) : text\n          builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                           spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes)\n        }\n        if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n        pos = end\n        spanStartStyle = \"\"\n      }\n      text = allText.slice(at, at = styles[i++])\n      style = interpretTokenStyle(styles[i++], builder.cm.options)\n    }\n  }\n}\n\n\n// These objects are used to represent the visible (currently drawn)\n// part of the document. A LineView may correspond to multiple\n// logical lines, if those are connected by collapsed ranges.\nexport function LineView(doc, line, lineN) {\n  // The starting line\n  this.line = line\n  // Continuing lines, if any\n  this.rest = visualLineContinued(line)\n  // Number of logical lines in this visual line\n  this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1\n  this.node = this.text = null\n  this.hidden = lineIsHidden(doc, line)\n}\n\n// Create a range of LineView objects for the given lines.\nexport function buildViewArray(cm, from, to) {\n  let array = [], nextPos\n  for (let pos = from; pos < to; pos = nextPos) {\n    let view = new LineView(cm.doc, getLine(cm.doc, pos), pos)\n    nextPos = pos + view.size\n    array.push(view)\n  }\n  return array\n}\n","import { getHandlers } from \"./event.js\"\n\nlet operationGroup = null\n\nexport function pushOperation(op) {\n  if (operationGroup) {\n    operationGroup.ops.push(op)\n  } else {\n    op.ownsGroup = operationGroup = {\n      ops: [op],\n      delayedCallbacks: []\n    }\n  }\n}\n\nfunction fireCallbacksForOps(group) {\n  // Calls delayed callbacks and cursorActivity handlers until no\n  // new ones appear\n  let callbacks = group.delayedCallbacks, i = 0\n  do {\n    for (; i < callbacks.length; i++)\n      callbacks[i].call(null)\n    for (let j = 0; j < group.ops.length; j++) {\n      let op = group.ops[j]\n      if (op.cursorActivityHandlers)\n        while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n          op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm)\n    }\n  } while (i < callbacks.length)\n}\n\nexport function finishOperation(op, endCb) {\n  let group = op.ownsGroup\n  if (!group) return\n\n  try { fireCallbacksForOps(group) }\n  finally {\n    operationGroup = null\n    endCb(group)\n  }\n}\n\nlet orphanDelayedCallbacks = null\n\n// Often, we want to signal events at a point where we are in the\n// middle of some work, but don't want the handler to start calling\n// other methods on the editor, which might be in an inconsistent\n// state or simply not expect any other events to happen.\n// signalLater looks whether there are any handlers, and schedules\n// them to be executed when the last operation ends, or, if no\n// operation is active, when a timeout fires.\nexport function signalLater(emitter, type /*, values...*/) {\n  let arr = getHandlers(emitter, type)\n  if (!arr.length) return\n  let args = Array.prototype.slice.call(arguments, 2), list\n  if (operationGroup) {\n    list = operationGroup.delayedCallbacks\n  } else if (orphanDelayedCallbacks) {\n    list = orphanDelayedCallbacks\n  } else {\n    list = orphanDelayedCallbacks = []\n    setTimeout(fireOrphanDelayed, 0)\n  }\n  for (let i = 0; i < arr.length; ++i)\n    list.push(() => arr[i].apply(null, args))\n}\n\nfunction fireOrphanDelayed() {\n  let delayed = orphanDelayedCallbacks\n  orphanDelayedCallbacks = null\n  for (let i = 0; i < delayed.length; ++i) delayed[i]()\n}\n","import { buildLineContent } from \"../line/line_data.js\"\nimport { lineNumberFor } from \"../line/utils_line.js\"\nimport { ie, ie_version } from \"../util/browser.js\"\nimport { elt, classTest } from \"../util/dom.js\"\nimport { signalLater } from \"../util/operation_group.js\"\n\n// When an aspect of a line changes, a string is added to\n// lineView.changes. This updates the relevant part of the line's\n// DOM structure.\nexport function updateLineForChanges(cm, lineView, lineN, dims) {\n  for (let j = 0; j < lineView.changes.length; j++) {\n    let type = lineView.changes[j]\n    if (type == \"text\") updateLineText(cm, lineView)\n    else if (type == \"gutter\") updateLineGutter(cm, lineView, lineN, dims)\n    else if (type == \"class\") updateLineClasses(cm, lineView)\n    else if (type == \"widget\") updateLineWidgets(cm, lineView, dims)\n  }\n  lineView.changes = null\n}\n\n// Lines with gutter elements, widgets or a background class need to\n// be wrapped, and have the extra elements added to the wrapper div\nfunction ensureLineWrapped(lineView) {\n  if (lineView.node == lineView.text) {\n    lineView.node = elt(\"div\", null, null, \"position: relative\")\n    if (lineView.text.parentNode)\n      lineView.text.parentNode.replaceChild(lineView.node, lineView.text)\n    lineView.node.appendChild(lineView.text)\n    if (ie && ie_version < 8) lineView.node.style.zIndex = 2\n  }\n  return lineView.node\n}\n\nfunction updateLineBackground(cm, lineView) {\n  let cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass\n  if (cls) cls += \" CodeMirror-linebackground\"\n  if (lineView.background) {\n    if (cls) lineView.background.className = cls\n    else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null }\n  } else if (cls) {\n    let wrap = ensureLineWrapped(lineView)\n    lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild)\n    cm.display.input.setUneditable(lineView.background)\n  }\n}\n\n// Wrapper around buildLineContent which will reuse the structure\n// in display.externalMeasured when possible.\nfunction getLineContent(cm, lineView) {\n  let ext = cm.display.externalMeasured\n  if (ext && ext.line == lineView.line) {\n    cm.display.externalMeasured = null\n    lineView.measure = ext.measure\n    return ext.built\n  }\n  return buildLineContent(cm, lineView)\n}\n\n// Redraw the line's text. Interacts with the background and text\n// classes because the mode may output tokens that influence these\n// classes.\nfunction updateLineText(cm, lineView) {\n  let cls = lineView.text.className\n  let built = getLineContent(cm, lineView)\n  if (lineView.text == lineView.node) lineView.node = built.pre\n  lineView.text.parentNode.replaceChild(built.pre, lineView.text)\n  lineView.text = built.pre\n  if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n    lineView.bgClass = built.bgClass\n    lineView.textClass = built.textClass\n    updateLineClasses(cm, lineView)\n  } else if (cls) {\n    lineView.text.className = cls\n  }\n}\n\nfunction updateLineClasses(cm, lineView) {\n  updateLineBackground(cm, lineView)\n  if (lineView.line.wrapClass)\n    ensureLineWrapped(lineView).className = lineView.line.wrapClass\n  else if (lineView.node != lineView.text)\n    lineView.node.className = \"\"\n  let textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass\n  lineView.text.className = textClass || \"\"\n}\n\nfunction updateLineGutter(cm, lineView, lineN, dims) {\n  if (lineView.gutter) {\n    lineView.node.removeChild(lineView.gutter)\n    lineView.gutter = null\n  }\n  if (lineView.gutterBackground) {\n    lineView.node.removeChild(lineView.gutterBackground)\n    lineView.gutterBackground = null\n  }\n  if (lineView.line.gutterClass) {\n    let wrap = ensureLineWrapped(lineView)\n    lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                    `left: ${cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth}px; width: ${dims.gutterTotalWidth}px`)\n    cm.display.input.setUneditable(lineView.gutterBackground)\n    wrap.insertBefore(lineView.gutterBackground, lineView.text)\n  }\n  let markers = lineView.line.gutterMarkers\n  if (cm.options.lineNumbers || markers) {\n    let wrap = ensureLineWrapped(lineView)\n    let gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", `left: ${cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth}px`)\n    gutterWrap.setAttribute(\"aria-hidden\", \"true\")\n    cm.display.input.setUneditable(gutterWrap)\n    wrap.insertBefore(gutterWrap, lineView.text)\n    if (lineView.line.gutterClass)\n      gutterWrap.className += \" \" + lineView.line.gutterClass\n    if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n      lineView.lineNumber = gutterWrap.appendChild(\n        elt(\"div\", lineNumberFor(cm.options, lineN),\n            \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n            `left: ${dims.gutterLeft[\"CodeMirror-linenumbers\"]}px; width: ${cm.display.lineNumInnerWidth}px`))\n    if (markers) for (let k = 0; k < cm.display.gutterSpecs.length; ++k) {\n      let id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id]\n      if (found)\n        gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                   `left: ${dims.gutterLeft[id]}px; width: ${dims.gutterWidth[id]}px`))\n    }\n  }\n}\n\nfunction updateLineWidgets(cm, lineView, dims) {\n  if (lineView.alignable) lineView.alignable = null\n  let isWidget = classTest(\"CodeMirror-linewidget\")\n  for (let node = lineView.node.firstChild, next; node; node = next) {\n    next = node.nextSibling\n    if (isWidget.test(node.className)) lineView.node.removeChild(node)\n  }\n  insertLineWidgets(cm, lineView, dims)\n}\n\n// Build a line's DOM representation from scratch\nexport function buildLineElement(cm, lineView, lineN, dims) {\n  let built = getLineContent(cm, lineView)\n  lineView.text = lineView.node = built.pre\n  if (built.bgClass) lineView.bgClass = built.bgClass\n  if (built.textClass) lineView.textClass = built.textClass\n\n  updateLineClasses(cm, lineView)\n  updateLineGutter(cm, lineView, lineN, dims)\n  insertLineWidgets(cm, lineView, dims)\n  return lineView.node\n}\n\n// A lineView may contain multiple logical lines (when merged by\n// collapsed spans). The widgets for all of them need to be drawn.\nfunction insertLineWidgets(cm, lineView, dims) {\n  insertLineWidgetsFor(cm, lineView.line, lineView, dims, true)\n  if (lineView.rest) for (let i = 0; i < lineView.rest.length; i++)\n    insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false)\n}\n\nfunction insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n  if (!line.widgets) return\n  let wrap = ensureLineWrapped(lineView)\n  for (let i = 0, ws = line.widgets; i < ws.length; ++i) {\n    let widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"))\n    if (!widget.handleMouseEvents) node.setAttribute(\"cm-ignore-events\", \"true\")\n    positionLineWidget(widget, node, lineView, dims)\n    cm.display.input.setUneditable(node)\n    if (allowAbove && widget.above)\n      wrap.insertBefore(node, lineView.gutter || lineView.text)\n    else\n      wrap.appendChild(node)\n    signalLater(widget, \"redraw\")\n  }\n}\n\nfunction positionLineWidget(widget, node, lineView, dims) {\n  if (widget.noHScroll) {\n    ;(lineView.alignable || (lineView.alignable = [])).push(node)\n    let width = dims.wrapperWidth\n    node.style.left = dims.fixedPos + \"px\"\n    if (!widget.coverGutter) {\n      width -= dims.gutterTotalWidth\n      node.style.paddingLeft = dims.gutterTotalWidth + \"px\"\n    }\n    node.style.width = width + \"px\"\n  }\n  if (widget.coverGutter) {\n    node.style.zIndex = 5\n    node.style.position = \"relative\"\n    if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + \"px\"\n  }\n}\n","import { contains, elt, removeChildrenAndAdd } from \"../util/dom.js\"\nimport { e_target } from \"../util/event.js\"\n\nexport function widgetHeight(widget) {\n  if (widget.height != null) return widget.height\n  let cm = widget.doc.cm\n  if (!cm) return 0\n  if (!contains(document.body, widget.node)) {\n    let parentStyle = \"position: relative;\"\n    if (widget.coverGutter)\n      parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"\n    if (widget.noHScroll)\n      parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"\n    removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle))\n  }\n  return widget.height = widget.node.parentNode.offsetHeight\n}\n\n// Return true when the given mouse event happened in a widget\nexport function eventInWidget(display, e) {\n  for (let n = e_target(e); n != display.wrapper; n = n.parentNode) {\n    if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n        (n.parentNode == display.sizer && n != display.mover))\n      return true\n  }\n}\n","import { buildLineContent, LineView } from \"../line/line_data.js\"\nimport { clipPos, Pos } from \"../line/pos.js\"\nimport { collapsedSpanAround, heightAtLine, lineIsHidden, visualLine } from \"../line/spans.js\"\nimport { getLine, lineAtHeight, lineNo, updateLineHeight } from \"../line/utils_line.js\"\nimport { bidiOther, getBidiPartAt, getOrder } from \"../util/bidi.js\"\nimport { chrome, android, ie, ie_version } from \"../util/browser.js\"\nimport { elt, removeChildren, range, removeChildrenAndAdd } from \"../util/dom.js\"\nimport { e_target } from \"../util/event.js\"\nimport { hasBadZoomedRects } from \"../util/feature_detection.js\"\nimport { countColumn, findFirst, isExtendingChar, scrollerGap, skipExtendingChars } from \"../util/misc.js\"\nimport { updateLineForChanges } from \"../display/update_line.js\"\n\nimport { widgetHeight } from \"./widgets.js\"\n\n// POSITION MEASUREMENT\n\nexport function paddingTop(display) {return display.lineSpace.offsetTop}\nexport function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\nexport function paddingH(display) {\n  if (display.cachedPaddingH) return display.cachedPaddingH\n  let e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"))\n  let style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle\n  let data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)}\n  if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data\n  return data\n}\n\nexport function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\nexport function displayWidth(cm) {\n  return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n}\nexport function displayHeight(cm) {\n  return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n}\n\n// Ensure the lineView.wrapping.heights array is populated. This is\n// an array of bottom offsets for the lines that make up a drawn\n// line. When lineWrapping is on, there might be more than one\n// height.\nfunction ensureLineHeights(cm, lineView, rect) {\n  let wrapping = cm.options.lineWrapping\n  let curWidth = wrapping && displayWidth(cm)\n  if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n    let heights = lineView.measure.heights = []\n    if (wrapping) {\n      lineView.measure.width = curWidth\n      let rects = lineView.text.firstChild.getClientRects()\n      for (let i = 0; i < rects.length - 1; i++) {\n        let cur = rects[i], next = rects[i + 1]\n        if (Math.abs(cur.bottom - next.bottom) > 2)\n          heights.push((cur.bottom + next.top) / 2 - rect.top)\n      }\n    }\n    heights.push(rect.bottom - rect.top)\n  }\n}\n\n// Find a line map (mapping character offsets to text nodes) and a\n// measurement cache for the given line number. (A line view might\n// contain multiple lines when collapsed ranges are present.)\nexport function mapFromLineView(lineView, line, lineN) {\n  if (lineView.line == line)\n    return {map: lineView.measure.map, cache: lineView.measure.cache}\n  for (let i = 0; i < lineView.rest.length; i++)\n    if (lineView.rest[i] == line)\n      return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]}\n  for (let i = 0; i < lineView.rest.length; i++)\n    if (lineNo(lineView.rest[i]) > lineN)\n      return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true}\n}\n\n// Render a line into the hidden node display.externalMeasured. Used\n// when measurement is needed for a line that's not in the viewport.\nfunction updateExternalMeasurement(cm, line) {\n  line = visualLine(line)\n  let lineN = lineNo(line)\n  let view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN)\n  view.lineN = lineN\n  let built = view.built = buildLineContent(cm, view)\n  view.text = built.pre\n  removeChildrenAndAdd(cm.display.lineMeasure, built.pre)\n  return view\n}\n\n// Get a {top, bottom, left, right} box (in line-local coordinates)\n// for a given character.\nexport function measureChar(cm, line, ch, bias) {\n  return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n}\n\n// Find a line view that corresponds to the given line number.\nexport function findViewForLine(cm, lineN) {\n  if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n    return cm.display.view[findViewIndex(cm, lineN)]\n  let ext = cm.display.externalMeasured\n  if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n    return ext\n}\n\n// Measurement can be split in two steps, the set-up work that\n// applies to the whole line, and the measurement of the actual\n// character. Functions like coordsChar, that need to do a lot of\n// measurements in a row, can thus ensure that the set-up work is\n// only done once.\nexport function prepareMeasureForLine(cm, line) {\n  let lineN = lineNo(line)\n  let view = findViewForLine(cm, lineN)\n  if (view && !view.text) {\n    view = null\n  } else if (view && view.changes) {\n    updateLineForChanges(cm, view, lineN, getDimensions(cm))\n    cm.curOp.forceUpdate = true\n  }\n  if (!view)\n    view = updateExternalMeasurement(cm, line)\n\n  let info = mapFromLineView(view, line, lineN)\n  return {\n    line: line, view: view, rect: null,\n    map: info.map, cache: info.cache, before: info.before,\n    hasHeights: false\n  }\n}\n\n// Given a prepared measurement object, measures the position of an\n// actual character (or fetches it from the cache).\nexport function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n  if (prepared.before) ch = -1\n  let key = ch + (bias || \"\"), found\n  if (prepared.cache.hasOwnProperty(key)) {\n    found = prepared.cache[key]\n  } else {\n    if (!prepared.rect)\n      prepared.rect = prepared.view.text.getBoundingClientRect()\n    if (!prepared.hasHeights) {\n      ensureLineHeights(cm, prepared.view, prepared.rect)\n      prepared.hasHeights = true\n    }\n    found = measureCharInner(cm, prepared, ch, bias)\n    if (!found.bogus) prepared.cache[key] = found\n  }\n  return {left: found.left, right: found.right,\n          top: varHeight ? found.rtop : found.top,\n          bottom: varHeight ? found.rbottom : found.bottom}\n}\n\nlet nullRect = {left: 0, right: 0, top: 0, bottom: 0}\n\nexport function nodeAndOffsetInLineMap(map, ch, bias) {\n  let node, start, end, collapse, mStart, mEnd\n  // First, search the line map for the text node corresponding to,\n  // or closest to, the target character.\n  for (let i = 0; i < map.length; i += 3) {\n    mStart = map[i]\n    mEnd = map[i + 1]\n    if (ch < mStart) {\n      start = 0; end = 1\n      collapse = \"left\"\n    } else if (ch < mEnd) {\n      start = ch - mStart\n      end = start + 1\n    } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n      end = mEnd - mStart\n      start = end - 1\n      if (ch >= mEnd) collapse = \"right\"\n    }\n    if (start != null) {\n      node = map[i + 2]\n      if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n        collapse = bias\n      if (bias == \"left\" && start == 0)\n        while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n          node = map[(i -= 3) + 2]\n          collapse = \"left\"\n        }\n      if (bias == \"right\" && start == mEnd - mStart)\n        while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n          node = map[(i += 3) + 2]\n          collapse = \"right\"\n        }\n      break\n    }\n  }\n  return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n}\n\nfunction getUsefulRect(rects, bias) {\n  let rect = nullRect\n  if (bias == \"left\") for (let i = 0; i < rects.length; i++) {\n    if ((rect = rects[i]).left != rect.right) break\n  } else for (let i = rects.length - 1; i >= 0; i--) {\n    if ((rect = rects[i]).left != rect.right) break\n  }\n  return rect\n}\n\nfunction measureCharInner(cm, prepared, ch, bias) {\n  let place = nodeAndOffsetInLineMap(prepared.map, ch, bias)\n  let node = place.node, start = place.start, end = place.end, collapse = place.collapse\n\n  let rect\n  if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n    for (let i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n      while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) --start\n      while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) ++end\n      if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n        rect = node.parentNode.getBoundingClientRect()\n      else\n        rect = getUsefulRect(range(node, start, end).getClientRects(), bias)\n      if (rect.left || rect.right || start == 0) break\n      end = start\n      start = start - 1\n      collapse = \"right\"\n    }\n    if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect)\n  } else { // If it is a widget, simply get the box for the whole widget.\n    if (start > 0) collapse = bias = \"right\"\n    let rects\n    if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n      rect = rects[bias == \"right\" ? rects.length - 1 : 0]\n    else\n      rect = node.getBoundingClientRect()\n  }\n  if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n    let rSpan = node.parentNode.getClientRects()[0]\n    if (rSpan)\n      rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}\n    else\n      rect = nullRect\n  }\n\n  let rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top\n  let mid = (rtop + rbot) / 2\n  let heights = prepared.view.measure.heights\n  let i = 0\n  for (; i < heights.length - 1; i++)\n    if (mid < heights[i]) break\n  let top = i ? heights[i - 1] : 0, bot = heights[i]\n  let result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                top: top, bottom: bot}\n  if (!rect.left && !rect.right) result.bogus = true\n  if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot }\n\n  return result\n}\n\n// Work around problem with bounding client rects on ranges being\n// returned incorrectly when zoomed on IE10 and below.\nfunction maybeUpdateRectForZooming(measure, rect) {\n  if (!window.screen || screen.logicalXDPI == null ||\n      screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n    return rect\n  let scaleX = screen.logicalXDPI / screen.deviceXDPI\n  let scaleY = screen.logicalYDPI / screen.deviceYDPI\n  return {left: rect.left * scaleX, right: rect.right * scaleX,\n          top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n}\n\nexport function clearLineMeasurementCacheFor(lineView) {\n  if (lineView.measure) {\n    lineView.measure.cache = {}\n    lineView.measure.heights = null\n    if (lineView.rest) for (let i = 0; i < lineView.rest.length; i++)\n      lineView.measure.caches[i] = {}\n  }\n}\n\nexport function clearLineMeasurementCache(cm) {\n  cm.display.externalMeasure = null\n  removeChildren(cm.display.lineMeasure)\n  for (let i = 0; i < cm.display.view.length; i++)\n    clearLineMeasurementCacheFor(cm.display.view[i])\n}\n\nexport function clearCaches(cm) {\n  clearLineMeasurementCache(cm)\n  cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null\n  if (!cm.options.lineWrapping) cm.display.maxLineChanged = true\n  cm.display.lineNumChars = null\n}\n\nfunction pageScrollX() {\n  // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n  // which causes page_Offset and bounding client rects to use\n  // different reference viewports and invalidate our calculations.\n  if (chrome && android) return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft))\n  return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n}\nfunction pageScrollY() {\n  if (chrome && android) return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop))\n  return window.pageYOffset || (document.documentElement || document.body).scrollTop\n}\n\nfunction widgetTopHeight(lineObj) {\n  let height = 0\n  if (lineObj.widgets) for (let i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above)\n    height += widgetHeight(lineObj.widgets[i])\n  return height\n}\n\n// Converts a {top, bottom, left, right} box from line-local\n// coordinates into another coordinate system. Context may be one of\n// \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n// or \"page\".\nexport function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n  if (!includeWidgets) {\n    let height = widgetTopHeight(lineObj)\n    rect.top += height; rect.bottom += height\n  }\n  if (context == \"line\") return rect\n  if (!context) context = \"local\"\n  let yOff = heightAtLine(lineObj)\n  if (context == \"local\") yOff += paddingTop(cm.display)\n  else yOff -= cm.display.viewOffset\n  if (context == \"page\" || context == \"window\") {\n    let lOff = cm.display.lineSpace.getBoundingClientRect()\n    yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY())\n    let xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX())\n    rect.left += xOff; rect.right += xOff\n  }\n  rect.top += yOff; rect.bottom += yOff\n  return rect\n}\n\n// Coverts a box from \"div\" coords to another coordinate system.\n// Context may be \"window\", \"page\", \"div\", or \"local\"./null.\nexport function fromCoordSystem(cm, coords, context) {\n  if (context == \"div\") return coords\n  let left = coords.left, top = coords.top\n  // First move into \"page\" coordinate system\n  if (context == \"page\") {\n    left -= pageScrollX()\n    top -= pageScrollY()\n  } else if (context == \"local\" || !context) {\n    let localBox = cm.display.sizer.getBoundingClientRect()\n    left += localBox.left\n    top += localBox.top\n  }\n\n  let lineSpaceBox = cm.display.lineSpace.getBoundingClientRect()\n  return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n}\n\nexport function charCoords(cm, pos, context, lineObj, bias) {\n  if (!lineObj) lineObj = getLine(cm.doc, pos.line)\n  return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n}\n\n// Returns a box for a given cursor position, which may have an\n// 'other' property containing the position of the secondary cursor\n// on a bidi boundary.\n// A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n// and after `char - 1` in writing order of `char - 1`\n// A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n// and before `char` in writing order of `char`\n// Examples (upper-case letters are RTL, lower-case are LTR):\n//     Pos(0, 1, ...)\n//     before   after\n// ab     a|b     a|b\n// aB     a|B     aB|\n// Ab     |Ab     A|b\n// AB     B|A     B|A\n// Every position after the last character on a line is considered to stick\n// to the last character on the line.\nexport function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n  lineObj = lineObj || getLine(cm.doc, pos.line)\n  if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj)\n  function get(ch, right) {\n    let m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight)\n    if (right) m.left = m.right; else m.right = m.left\n    return intoCoordSystem(cm, lineObj, m, context)\n  }\n  let order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky\n  if (ch >= lineObj.text.length) {\n    ch = lineObj.text.length\n    sticky = \"before\"\n  } else if (ch <= 0) {\n    ch = 0\n    sticky = \"after\"\n  }\n  if (!order) return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\")\n\n  function getBidi(ch, partPos, invert) {\n    let part = order[partPos], right = part.level == 1\n    return get(invert ? ch - 1 : ch, right != invert)\n  }\n  let partPos = getBidiPartAt(order, ch, sticky)\n  let other = bidiOther\n  let val = getBidi(ch, partPos, sticky == \"before\")\n  if (other != null) val.other = getBidi(ch, other, sticky != \"before\")\n  return val\n}\n\n// Used to cheaply estimate the coordinates for a position. Used for\n// intermediate scroll updates.\nexport function estimateCoords(cm, pos) {\n  let left = 0\n  pos = clipPos(cm.doc, pos)\n  if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch\n  let lineObj = getLine(cm.doc, pos.line)\n  let top = heightAtLine(lineObj) + paddingTop(cm.display)\n  return {left: left, right: left, top: top, bottom: top + lineObj.height}\n}\n\n// Positions returned by coordsChar contain some extra information.\n// xRel is the relative x position of the input coordinates compared\n// to the found position (so xRel > 0 means the coordinates are to\n// the right of the character position, for example). When outside\n// is true, that means the coordinates lie outside the line's\n// vertical range.\nfunction PosWithInfo(line, ch, sticky, outside, xRel) {\n  let pos = Pos(line, ch, sticky)\n  pos.xRel = xRel\n  if (outside) pos.outside = outside\n  return pos\n}\n\n// Compute the character position closest to the given coordinates.\n// Input must be lineSpace-local (\"div\" coordinate system).\nexport function coordsChar(cm, x, y) {\n  let doc = cm.doc\n  y += cm.display.viewOffset\n  if (y < 0) return PosWithInfo(doc.first, 0, null, -1, -1)\n  let lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1\n  if (lineN > last)\n    return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1)\n  if (x < 0) x = 0\n\n  let lineObj = getLine(doc, lineN)\n  for (;;) {\n    let found = coordsCharInner(cm, lineObj, lineN, x, y)\n    let collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0))\n    if (!collapsed) return found\n    let rangeEnd = collapsed.find(1)\n    if (rangeEnd.line == lineN) return rangeEnd\n    lineObj = getLine(doc, lineN = rangeEnd.line)\n  }\n}\n\nfunction wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n  y -= widgetTopHeight(lineObj)\n  let end = lineObj.text.length\n  let begin = findFirst(ch => measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y, end, 0)\n  end = findFirst(ch => measureCharPrepared(cm, preparedMeasure, ch).top > y, begin, end)\n  return {begin, end}\n}\n\nexport function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n  if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj)\n  let targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top\n  return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n}\n\n// Returns true if the given side of a box is after the given\n// coordinates, in top-to-bottom, left-to-right order.\nfunction boxIsAfter(box, x, y, left) {\n  return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n}\n\nfunction coordsCharInner(cm, lineObj, lineNo, x, y) {\n  // Move y into line-local coordinate space\n  y -= heightAtLine(lineObj)\n  let preparedMeasure = prepareMeasureForLine(cm, lineObj)\n  // When directly calling `measureCharPrepared`, we have to adjust\n  // for the widgets at this line.\n  let widgetHeight = widgetTopHeight(lineObj)\n  let begin = 0, end = lineObj.text.length, ltr = true\n\n  let order = getOrder(lineObj, cm.doc.direction)\n  // If the line isn't plain left-to-right text, first figure out\n  // which bidi section the coordinates fall into.\n  if (order) {\n    let part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                 (cm, lineObj, lineNo, preparedMeasure, order, x, y)\n    ltr = part.level != 1\n    // The awkward -1 offsets are needed because findFirst (called\n    // on these below) will treat its first bound as inclusive,\n    // second as exclusive, but we want to actually address the\n    // characters in the part's range\n    begin = ltr ? part.from : part.to - 1\n    end = ltr ? part.to : part.from - 1\n  }\n\n  // A binary search to find the first character whose bounding box\n  // starts after the coordinates. If we run across any whose box wrap\n  // the coordinates, store that.\n  let chAround = null, boxAround = null\n  let ch = findFirst(ch => {\n    let box = measureCharPrepared(cm, preparedMeasure, ch)\n    box.top += widgetHeight; box.bottom += widgetHeight\n    if (!boxIsAfter(box, x, y, false)) return false\n    if (box.top <= y && box.left <= x) {\n      chAround = ch\n      boxAround = box\n    }\n    return true\n  }, begin, end)\n\n  let baseX, sticky, outside = false\n  // If a box around the coordinates was found, use that\n  if (boxAround) {\n    // Distinguish coordinates nearer to the left or right side of the box\n    let atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr\n    ch = chAround + (atStart ? 0 : 1)\n    sticky = atStart ? \"after\" : \"before\"\n    baseX = atLeft ? boxAround.left : boxAround.right\n  } else {\n    // (Adjust for extended bound, if necessary.)\n    if (!ltr && (ch == end || ch == begin)) ch++\n    // To determine which side to associate with, get the box to the\n    // left of the character and compare it's vertical position to the\n    // coordinates\n    sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n      (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n      \"after\" : \"before\"\n    // Now get accurate coordinates for this place, in order to get a\n    // base X position\n    let coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure)\n    baseX = coords.left\n    outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0\n  }\n\n  ch = skipExtendingChars(lineObj.text, ch, 1)\n  return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n}\n\nfunction coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n  // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n  // situation, we can take this ordering to correspond to the visual\n  // ordering. This finds the first part whose end is after the given\n  // coordinates.\n  let index = findFirst(i => {\n    let part = order[i], ltr = part.level != 1\n    return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                   \"line\", lineObj, preparedMeasure), x, y, true)\n  }, 0, order.length - 1)\n  let part = order[index]\n  // If this isn't the first part, the part's start is also after\n  // the coordinates, and the coordinates aren't on the same line as\n  // that start, move one part back.\n  if (index > 0) {\n    let ltr = part.level != 1\n    let start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                             \"line\", lineObj, preparedMeasure)\n    if (boxIsAfter(start, x, y, true) && start.top > y)\n      part = order[index - 1]\n  }\n  return part\n}\n\nfunction coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n  // In a wrapped line, rtl text on wrapping boundaries can do things\n  // that don't correspond to the ordering in our `order` array at\n  // all, so a binary search doesn't work, and we want to return a\n  // part that only spans one line so that the binary search in\n  // coordsCharInner is safe. As such, we first find the extent of the\n  // wrapped line, and then do a flat search in which we discard any\n  // spans that aren't on the line.\n  let {begin, end} = wrappedLineExtent(cm, lineObj, preparedMeasure, y)\n  if (/\\s/.test(lineObj.text.charAt(end - 1))) end--\n  let part = null, closestDist = null\n  for (let i = 0; i < order.length; i++) {\n    let p = order[i]\n    if (p.from >= end || p.to <= begin) continue\n    let ltr = p.level != 1\n    let endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right\n    // Weigh against spans ending before this, so that they are only\n    // picked if nothing ends after\n    let dist = endX < x ? x - endX + 1e9 : endX - x\n    if (!part || closestDist > dist) {\n      part = p\n      closestDist = dist\n    }\n  }\n  if (!part) part = order[order.length - 1]\n  // Clip the part to the wrapped line.\n  if (part.from < begin) part = {from: begin, to: part.to, level: part.level}\n  if (part.to > end) part = {from: part.from, to: end, level: part.level}\n  return part\n}\n\nlet measureText\n// Compute the default text height.\nexport function textHeight(display) {\n  if (display.cachedTextHeight != null) return display.cachedTextHeight\n  if (measureText == null) {\n    measureText = elt(\"pre\", null, \"CodeMirror-line-like\")\n    // Measure a bunch of lines, for browsers that compute\n    // fractional heights.\n    for (let i = 0; i < 49; ++i) {\n      measureText.appendChild(document.createTextNode(\"x\"))\n      measureText.appendChild(elt(\"br\"))\n    }\n    measureText.appendChild(document.createTextNode(\"x\"))\n  }\n  removeChildrenAndAdd(display.measure, measureText)\n  let height = measureText.offsetHeight / 50\n  if (height > 3) display.cachedTextHeight = height\n  removeChildren(display.measure)\n  return height || 1\n}\n\n// Compute the default character width.\nexport function charWidth(display) {\n  if (display.cachedCharWidth != null) return display.cachedCharWidth\n  let anchor = elt(\"span\", \"xxxxxxxxxx\")\n  let pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\")\n  removeChildrenAndAdd(display.measure, pre)\n  let rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10\n  if (width > 2) display.cachedCharWidth = width\n  return width || 10\n}\n\n// Do a bulk-read of the DOM positions and sizes needed to draw the\n// view, so that we don't interleave reading and writing to the DOM.\nexport function getDimensions(cm) {\n  let d = cm.display, left = {}, width = {}\n  let gutterLeft = d.gutters.clientLeft\n  for (let n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n    let id = cm.display.gutterSpecs[i].className\n    left[id] = n.offsetLeft + n.clientLeft + gutterLeft\n    width[id] = n.clientWidth\n  }\n  return {fixedPos: compensateForHScroll(d),\n          gutterTotalWidth: d.gutters.offsetWidth,\n          gutterLeft: left,\n          gutterWidth: width,\n          wrapperWidth: d.wrapper.clientWidth}\n}\n\n// Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n// but using getBoundingClientRect to get a sub-pixel-accurate\n// result.\nexport function compensateForHScroll(display) {\n  return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n}\n\n// Returns a function that estimates the height of a line, to use as\n// first approximation until the line becomes visible (and is thus\n// properly measurable).\nexport function estimateHeight(cm) {\n  let th = textHeight(cm.display), wrapping = cm.options.lineWrapping\n  let perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3)\n  return line => {\n    if (lineIsHidden(cm.doc, line)) return 0\n\n    let widgetsHeight = 0\n    if (line.widgets) for (let i = 0; i < line.widgets.length; i++) {\n      if (line.widgets[i].height) widgetsHeight += line.widgets[i].height\n    }\n\n    if (wrapping)\n      return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th\n    else\n      return widgetsHeight + th\n  }\n}\n\nexport function estimateLineHeights(cm) {\n  let doc = cm.doc, est = estimateHeight(cm)\n  doc.iter(line => {\n    let estHeight = est(line)\n    if (estHeight != line.height) updateLineHeight(line, estHeight)\n  })\n}\n\n// Given a mouse event, find the corresponding position. If liberal\n// is false, it checks whether a gutter or scrollbar was clicked,\n// and returns null if it was. forRect is used by rectangular\n// selections, and tries to estimate a character position even for\n// coordinates beyond the right of the text.\nexport function posFromMouse(cm, e, liberal, forRect) {\n  let display = cm.display\n  if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") return null\n\n  let x, y, space = display.lineSpace.getBoundingClientRect()\n  // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n  try { x = e.clientX - space.left; y = e.clientY - space.top }\n  catch (e) { return null }\n  let coords = coordsChar(cm, x, y), line\n  if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n    let colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length\n    coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff))\n  }\n  return coords\n}\n\n// Find the view element corresponding to a given line. Return null\n// when the line isn't visible.\nexport function findViewIndex(cm, n) {\n  if (n >= cm.display.viewTo) return null\n  n -= cm.display.viewFrom\n  if (n < 0) return null\n  let view = cm.display.view\n  for (let i = 0; i < view.length; i++) {\n    n -= view[i].size\n    if (n < 0) return i\n  }\n}\n","import { buildViewArray } from \"../line/line_data.js\"\nimport { sawCollapsedSpans } from \"../line/saw_special_spans.js\"\nimport { visualLineEndNo, visualLineNo } from \"../line/spans.js\"\nimport { findViewIndex } from \"../measurement/position_measurement.js\"\nimport { indexOf } from \"../util/misc.js\"\n\n// Updates the display.view data structure for a given change to the\n// document. From and to are in pre-change coordinates. Lendiff is\n// the amount of lines added or subtracted by the change. This is\n// used for changes that span multiple lines, or change the way\n// lines are divided into visual lines. regLineChange (below)\n// registers single-line changes.\nexport function regChange(cm, from, to, lendiff) {\n  if (from == null) from = cm.doc.first\n  if (to == null) to = cm.doc.first + cm.doc.size\n  if (!lendiff) lendiff = 0\n\n  let display = cm.display\n  if (lendiff && to < display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers > from))\n    display.updateLineNumbers = from\n\n  cm.curOp.viewChanged = true\n\n  if (from >= display.viewTo) { // Change after\n    if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n      resetView(cm)\n  } else if (to <= display.viewFrom) { // Change before\n    if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n      resetView(cm)\n    } else {\n      display.viewFrom += lendiff\n      display.viewTo += lendiff\n    }\n  } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n    resetView(cm)\n  } else if (from <= display.viewFrom) { // Top overlap\n    let cut = viewCuttingPoint(cm, to, to + lendiff, 1)\n    if (cut) {\n      display.view = display.view.slice(cut.index)\n      display.viewFrom = cut.lineN\n      display.viewTo += lendiff\n    } else {\n      resetView(cm)\n    }\n  } else if (to >= display.viewTo) { // Bottom overlap\n    let cut = viewCuttingPoint(cm, from, from, -1)\n    if (cut) {\n      display.view = display.view.slice(0, cut.index)\n      display.viewTo = cut.lineN\n    } else {\n      resetView(cm)\n    }\n  } else { // Gap in the middle\n    let cutTop = viewCuttingPoint(cm, from, from, -1)\n    let cutBot = viewCuttingPoint(cm, to, to + lendiff, 1)\n    if (cutTop && cutBot) {\n      display.view = display.view.slice(0, cutTop.index)\n        .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n        .concat(display.view.slice(cutBot.index))\n      display.viewTo += lendiff\n    } else {\n      resetView(cm)\n    }\n  }\n\n  let ext = display.externalMeasured\n  if (ext) {\n    if (to < ext.lineN)\n      ext.lineN += lendiff\n    else if (from < ext.lineN + ext.size)\n      display.externalMeasured = null\n  }\n}\n\n// Register a change to a single line. Type must be one of \"text\",\n// \"gutter\", \"class\", \"widget\"\nexport function regLineChange(cm, line, type) {\n  cm.curOp.viewChanged = true\n  let display = cm.display, ext = cm.display.externalMeasured\n  if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n    display.externalMeasured = null\n\n  if (line < display.viewFrom || line >= display.viewTo) return\n  let lineView = display.view[findViewIndex(cm, line)]\n  if (lineView.node == null) return\n  let arr = lineView.changes || (lineView.changes = [])\n  if (indexOf(arr, type) == -1) arr.push(type)\n}\n\n// Clear the view.\nexport function resetView(cm) {\n  cm.display.viewFrom = cm.display.viewTo = cm.doc.first\n  cm.display.view = []\n  cm.display.viewOffset = 0\n}\n\nfunction viewCuttingPoint(cm, oldN, newN, dir) {\n  let index = findViewIndex(cm, oldN), diff, view = cm.display.view\n  if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n    return {index: index, lineN: newN}\n  let n = cm.display.viewFrom\n  for (let i = 0; i < index; i++)\n    n += view[i].size\n  if (n != oldN) {\n    if (dir > 0) {\n      if (index == view.length - 1) return null\n      diff = (n + view[index].size) - oldN\n      index++\n    } else {\n      diff = n - oldN\n    }\n    oldN += diff; newN += diff\n  }\n  while (visualLineNo(cm.doc, newN) != newN) {\n    if (index == (dir < 0 ? 0 : view.length - 1)) return null\n    newN += dir * view[index - (dir < 0 ? 1 : 0)].size\n    index += dir\n  }\n  return {index: index, lineN: newN}\n}\n\n// Force the view to cover a given range, adding empty view element\n// or clipping off existing ones as needed.\nexport function adjustView(cm, from, to) {\n  let display = cm.display, view = display.view\n  if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n    display.view = buildViewArray(cm, from, to)\n    display.viewFrom = from\n  } else {\n    if (display.viewFrom > from)\n      display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view)\n    else if (display.viewFrom < from)\n      display.view = display.view.slice(findViewIndex(cm, from))\n    display.viewFrom = from\n    if (display.viewTo < to)\n      display.view = display.view.concat(buildViewArray(cm, display.viewTo, to))\n    else if (display.viewTo > to)\n      display.view = display.view.slice(0, findViewIndex(cm, to))\n  }\n  display.viewTo = to\n}\n\n// Count the number of lines in the view whose DOM representation is\n// out of date (or nonexistent).\nexport function countDirtyView(cm) {\n  let view = cm.display.view, dirty = 0\n  for (let i = 0; i < view.length; i++) {\n    let lineView = view[i]\n    if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty\n  }\n  return dirty\n}\n","import { Pos } from \"../line/pos.js\"\nimport { visualLine } from \"../line/spans.js\"\nimport { getLine } from \"../line/utils_line.js\"\nimport { charCoords, cursorCoords, displayWidth, paddingH, wrappedLineExtentChar } from \"../measurement/position_measurement.js\"\nimport { getOrder, iterateBidiSections } from \"../util/bidi.js\"\nimport { elt } from \"../util/dom.js\"\nimport { onBlur } from \"./focus.js\"\n\nexport function updateSelection(cm) {\n  cm.display.input.showSelection(cm.display.input.prepareSelection())\n}\n\nexport function prepareSelection(cm, primary = true) {\n  let doc = cm.doc, result = {}\n  let curFragment = result.cursors = document.createDocumentFragment()\n  let selFragment = result.selection = document.createDocumentFragment()\n\n  for (let i = 0; i < doc.sel.ranges.length; i++) {\n    if (!primary && i == doc.sel.primIndex) continue\n    let range = doc.sel.ranges[i]\n    if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) continue\n    let collapsed = range.empty()\n    if (collapsed || cm.options.showCursorWhenSelecting)\n      drawSelectionCursor(cm, range.head, curFragment)\n    if (!collapsed)\n      drawSelectionRange(cm, range, selFragment)\n  }\n  return result\n}\n\n// Draws a cursor for the given range\nexport function drawSelectionCursor(cm, head, output) {\n  let pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine)\n\n  let cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"))\n  cursor.style.left = pos.left + \"px\"\n  cursor.style.top = pos.top + \"px\"\n  cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\"\n\n  if (pos.other) {\n    // Secondary cursor, shown when on a 'jump' in bi-directional text\n    let otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"))\n    otherCursor.style.display = \"\"\n    otherCursor.style.left = pos.other.left + \"px\"\n    otherCursor.style.top = pos.other.top + \"px\"\n    otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\"\n  }\n}\n\nfunction cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n// Draws the given range as a highlighted selection\nfunction drawSelectionRange(cm, range, output) {\n  let display = cm.display, doc = cm.doc\n  let fragment = document.createDocumentFragment()\n  let padding = paddingH(cm.display), leftSide = padding.left\n  let rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right\n  let docLTR = doc.direction == \"ltr\"\n\n  function add(left, top, width, bottom) {\n    if (top < 0) top = 0\n    top = Math.round(top)\n    bottom = Math.round(bottom)\n    fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", `position: absolute; left: ${left}px;\n                             top: ${top}px; width: ${width == null ? rightSide - left : width}px;\n                             height: ${bottom - top}px`))\n  }\n\n  function drawForLine(line, fromArg, toArg) {\n    let lineObj = getLine(doc, line)\n    let lineLen = lineObj.text.length\n    let start, end\n    function coords(ch, bias) {\n      return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n    }\n\n    function wrapX(pos, dir, side) {\n      let extent = wrappedLineExtentChar(cm, lineObj, null, pos)\n      let prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\"\n      let ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1)\n      return coords(ch, prop)[prop]\n    }\n\n    let order = getOrder(lineObj, doc.direction)\n    iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, (from, to, dir, i) => {\n      let ltr = dir == \"ltr\"\n      let fromPos = coords(from, ltr ? \"left\" : \"right\")\n      let toPos = coords(to - 1, ltr ? \"right\" : \"left\")\n\n      let openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen\n      let first = i == 0, last = !order || i == order.length - 1\n      if (toPos.top - fromPos.top <= 3) { // Single line\n        let openLeft = (docLTR ? openStart : openEnd) && first\n        let openRight = (docLTR ? openEnd : openStart) && last\n        let left = openLeft ? leftSide : (ltr ? fromPos : toPos).left\n        let right = openRight ? rightSide : (ltr ? toPos : fromPos).right\n        add(left, fromPos.top, right - left, fromPos.bottom)\n      } else { // Multiple lines\n        let topLeft, topRight, botLeft, botRight\n        if (ltr) {\n          topLeft = docLTR && openStart && first ? leftSide : fromPos.left\n          topRight = docLTR ? rightSide : wrapX(from, dir, \"before\")\n          botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\")\n          botRight = docLTR && openEnd && last ? rightSide : toPos.right\n        } else {\n          topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\")\n          topRight = !docLTR && openStart && first ? rightSide : fromPos.right\n          botLeft = !docLTR && openEnd && last ? leftSide : toPos.left\n          botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\")\n        }\n        add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom)\n        if (fromPos.bottom < toPos.top) add(leftSide, fromPos.bottom, null, toPos.top)\n        add(botLeft, toPos.top, botRight - botLeft, toPos.bottom)\n      }\n\n      if (!start || cmpCoords(fromPos, start) < 0) start = fromPos\n      if (cmpCoords(toPos, start) < 0) start = toPos\n      if (!end || cmpCoords(fromPos, end) < 0) end = fromPos\n      if (cmpCoords(toPos, end) < 0) end = toPos\n    })\n    return {start: start, end: end}\n  }\n\n  let sFrom = range.from(), sTo = range.to()\n  if (sFrom.line == sTo.line) {\n    drawForLine(sFrom.line, sFrom.ch, sTo.ch)\n  } else {\n    let fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line)\n    let singleVLine = visualLine(fromLine) == visualLine(toLine)\n    let leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end\n    let rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start\n    if (singleVLine) {\n      if (leftEnd.top < rightStart.top - 2) {\n        add(leftEnd.right, leftEnd.top, null, leftEnd.bottom)\n        add(leftSide, rightStart.top, rightStart.left, rightStart.bottom)\n      } else {\n        add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom)\n      }\n    }\n    if (leftEnd.bottom < rightStart.top)\n      add(leftSide, leftEnd.bottom, null, rightStart.top)\n  }\n\n  output.appendChild(fragment)\n}\n\n// Cursor-blinking\nexport function restartBlink(cm) {\n  if (!cm.state.focused) return\n  let display = cm.display\n  clearInterval(display.blinker)\n  let on = true\n  display.cursorDiv.style.visibility = \"\"\n  if (cm.options.cursorBlinkRate > 0)\n    display.blinker = setInterval(() => {\n      if (!cm.hasFocus()) onBlur(cm)\n      display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"\n    }, cm.options.cursorBlinkRate)\n  else if (cm.options.cursorBlinkRate < 0)\n    display.cursorDiv.style.visibility = \"hidden\"\n}\n","import { restartBlink } from \"./selection.js\"\nimport { webkit } from \"../util/browser.js\"\nimport { addClass, rmClass } from \"../util/dom.js\"\nimport { signal } from \"../util/event.js\"\n\nexport function ensureFocus(cm) {\n  if (!cm.hasFocus()) {\n    cm.display.input.focus()\n    if (!cm.state.focused) onFocus(cm)\n  }\n}\n\nexport function delayBlurEvent(cm) {\n  cm.state.delayingBlurEvent = true\n  setTimeout(() => { if (cm.state.delayingBlurEvent) {\n    cm.state.delayingBlurEvent = false\n    if (cm.state.focused) onBlur(cm)\n  } }, 100)\n}\n\nexport function onFocus(cm, e) {\n  if (cm.state.delayingBlurEvent && !cm.state.draggingText) cm.state.delayingBlurEvent = false\n\n  if (cm.options.readOnly == \"nocursor\") return\n  if (!cm.state.focused) {\n    signal(cm, \"focus\", cm, e)\n    cm.state.focused = true\n    addClass(cm.display.wrapper, \"CodeMirror-focused\")\n    // This test prevents this from firing when a context\n    // menu is closed (since the input reset would kill the\n    // select-all detection hack)\n    if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n      cm.display.input.reset()\n      if (webkit) setTimeout(() => cm.display.input.reset(true), 20) // Issue #1730\n    }\n    cm.display.input.receivedFocus()\n  }\n  restartBlink(cm)\n}\nexport function onBlur(cm, e) {\n  if (cm.state.delayingBlurEvent) return\n\n  if (cm.state.focused) {\n    signal(cm, \"blur\", cm, e)\n    cm.state.focused = false\n    rmClass(cm.display.wrapper, \"CodeMirror-focused\")\n  }\n  clearInterval(cm.display.blinker)\n  setTimeout(() => { if (!cm.state.focused) cm.display.shift = false }, 150)\n}\n","import { heightAtLine } from \"../line/spans.js\"\nimport { getLine, lineAtHeight, updateLineHeight } from \"../line/utils_line.js\"\nimport { paddingTop, charWidth } from \"../measurement/position_measurement.js\"\nimport { ie, ie_version } from \"../util/browser.js\"\n\n// Read the actual heights of the rendered lines, and update their\n// stored heights to match.\nexport function updateHeightsInViewport(cm) {\n  let display = cm.display\n  let prevBottom = display.lineDiv.offsetTop\n  for (let i = 0; i < display.view.length; i++) {\n    let cur = display.view[i], wrapping = cm.options.lineWrapping\n    let height, width = 0\n    if (cur.hidden) continue\n    if (ie && ie_version < 8) {\n      let bot = cur.node.offsetTop + cur.node.offsetHeight\n      height = bot - prevBottom\n      prevBottom = bot\n    } else {\n      let box = cur.node.getBoundingClientRect()\n      height = box.bottom - box.top\n      // Check that lines don't extend past the right of the current\n      // editor width\n      if (!wrapping && cur.text.firstChild)\n        width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1\n    }\n    let diff = cur.line.height - height\n    if (diff > .005 || diff < -.005) {\n      updateLineHeight(cur.line, height)\n      updateWidgetHeight(cur.line)\n      if (cur.rest) for (let j = 0; j < cur.rest.length; j++)\n        updateWidgetHeight(cur.rest[j])\n    }\n    if (width > cm.display.sizerWidth) {\n      let chWidth = Math.ceil(width / charWidth(cm.display))\n      if (chWidth > cm.display.maxLineLength) {\n        cm.display.maxLineLength = chWidth\n        cm.display.maxLine = cur.line\n        cm.display.maxLineChanged = true\n      }\n    }\n  }\n}\n\n// Read and store the height of line widgets associated with the\n// given line.\nfunction updateWidgetHeight(line) {\n  if (line.widgets) for (let i = 0; i < line.widgets.length; ++i) {\n    let w = line.widgets[i], parent = w.node.parentNode\n    if (parent) w.height = parent.offsetHeight\n  }\n}\n\n// Compute the lines that are visible in a given viewport (defaults\n// the the current scroll position). viewport may contain top,\n// height, and ensure (see op.scrollToPos) properties.\nexport function visibleLines(display, doc, viewport) {\n  let top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop\n  top = Math.floor(top - paddingTop(display))\n  let bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight\n\n  let from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom)\n  // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n  // forces those lines into the viewport (if possible).\n  if (viewport && viewport.ensure) {\n    let ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line\n    if (ensureFrom < from) {\n      from = ensureFrom\n      to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight)\n    } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n      from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight)\n      to = ensureTo\n    }\n  }\n  return {from: from, to: Math.max(to, from + 1)}\n}\n","import { Pos } from \"../line/pos.js\"\nimport { cursorCoords, displayHeight, displayWidth, estimateCoords, paddingTop, paddingVert, scrollGap, textHeight } from \"../measurement/position_measurement.js\"\nimport { gecko, phantom } from \"../util/browser.js\"\nimport { elt } from \"../util/dom.js\"\nimport { signalDOMEvent } from \"../util/event.js\"\n\nimport { startWorker } from \"./highlight_worker.js\"\nimport { alignHorizontally } from \"./line_numbers.js\"\nimport { updateDisplaySimple } from \"./update_display.js\"\n\n// SCROLLING THINGS INTO VIEW\n\n// If an editor sits on the top or bottom of the window, partially\n// scrolled out of view, this ensures that the cursor is visible.\nexport function maybeScrollWindow(cm, rect) {\n  if (signalDOMEvent(cm, \"scrollCursorIntoView\")) return\n\n  let display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null\n  if (rect.top + box.top < 0) doScroll = true\n  else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false\n  if (doScroll != null && !phantom) {\n    let scrollNode = elt(\"div\", \"\\u200b\", null, `position: absolute;\n                         top: ${rect.top - display.viewOffset - paddingTop(cm.display)}px;\n                         height: ${rect.bottom - rect.top + scrollGap(cm) + display.barHeight}px;\n                         left: ${rect.left}px; width: ${Math.max(2, rect.right - rect.left)}px;`)\n    cm.display.lineSpace.appendChild(scrollNode)\n    scrollNode.scrollIntoView(doScroll)\n    cm.display.lineSpace.removeChild(scrollNode)\n  }\n}\n\n// Scroll a given position into view (immediately), verifying that\n// it actually became visible (as line heights are accurately\n// measured, the position of something may 'drift' during drawing).\nexport function scrollPosIntoView(cm, pos, end, margin) {\n  if (margin == null) margin = 0\n  let rect\n  if (!cm.options.lineWrapping && pos == end) {\n    // Set pos and end to the cursor positions around the character pos sticks to\n    // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n    // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n    end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos\n    pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos\n  }\n  for (let limit = 0; limit < 5; limit++) {\n    let changed = false\n    let coords = cursorCoords(cm, pos)\n    let endCoords = !end || end == pos ? coords : cursorCoords(cm, end)\n    rect = {left: Math.min(coords.left, endCoords.left),\n            top: Math.min(coords.top, endCoords.top) - margin,\n            right: Math.max(coords.left, endCoords.left),\n            bottom: Math.max(coords.bottom, endCoords.bottom) + margin}\n    let scrollPos = calculateScrollPos(cm, rect)\n    let startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop)\n      if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true\n    }\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft)\n      if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true\n    }\n    if (!changed) break\n  }\n  return rect\n}\n\n// Scroll a given set of coordinates into view (immediately).\nexport function scrollIntoView(cm, rect) {\n  let scrollPos = calculateScrollPos(cm, rect)\n  if (scrollPos.scrollTop != null) updateScrollTop(cm, scrollPos.scrollTop)\n  if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft)\n}\n\n// Calculate a new scroll position needed to scroll the given\n// rectangle into view. Returns an object with scrollTop and\n// scrollLeft properties. When these are undefined, the\n// vertical/horizontal position does not need to be adjusted.\nfunction calculateScrollPos(cm, rect) {\n  let display = cm.display, snapMargin = textHeight(cm.display)\n  if (rect.top < 0) rect.top = 0\n  let screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop\n  let screen = displayHeight(cm), result = {}\n  if (rect.bottom - rect.top > screen) rect.bottom = rect.top + screen\n  let docBottom = cm.doc.height + paddingVert(display)\n  let atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin\n  if (rect.top < screentop) {\n    result.scrollTop = atTop ? 0 : rect.top\n  } else if (rect.bottom > screentop + screen) {\n    let newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen)\n    if (newTop != screentop) result.scrollTop = newTop\n  }\n\n  let gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth\n  let screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace\n  let screenw = displayWidth(cm) - display.gutters.offsetWidth\n  let tooWide = rect.right - rect.left > screenw\n  if (tooWide) rect.right = rect.left + screenw\n  if (rect.left < 10)\n    result.scrollLeft = 0\n  else if (rect.left < screenleft)\n    result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10))\n  else if (rect.right > screenw + screenleft - 3)\n    result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw\n  return result\n}\n\n// Store a relative adjustment to the scroll position in the current\n// operation (to be applied when the operation finishes).\nexport function addToScrollTop(cm, top) {\n  if (top == null) return\n  resolveScrollToPos(cm)\n  cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top\n}\n\n// Make sure that at the end of the operation the current cursor is\n// shown.\nexport function ensureCursorVisible(cm) {\n  resolveScrollToPos(cm)\n  let cur = cm.getCursor()\n  cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin}\n}\n\nexport function scrollToCoords(cm, x, y) {\n  if (x != null || y != null) resolveScrollToPos(cm)\n  if (x != null) cm.curOp.scrollLeft = x\n  if (y != null) cm.curOp.scrollTop = y\n}\n\nexport function scrollToRange(cm, range) {\n  resolveScrollToPos(cm)\n  cm.curOp.scrollToPos = range\n}\n\n// When an operation has its scrollToPos property set, and another\n// scroll action is applied before the end of the operation, this\n// 'simulates' scrolling that position into view in a cheap way, so\n// that the effect of intermediate scroll commands is not ignored.\nfunction resolveScrollToPos(cm) {\n  let range = cm.curOp.scrollToPos\n  if (range) {\n    cm.curOp.scrollToPos = null\n    let from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to)\n    scrollToCoordsRange(cm, from, to, range.margin)\n  }\n}\n\nexport function scrollToCoordsRange(cm, from, to, margin) {\n  let sPos = calculateScrollPos(cm, {\n    left: Math.min(from.left, to.left),\n    top: Math.min(from.top, to.top) - margin,\n    right: Math.max(from.right, to.right),\n    bottom: Math.max(from.bottom, to.bottom) + margin\n  })\n  scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop)\n}\n\n// Sync the scrollable area and scrollbars, ensure the viewport\n// covers the visible area.\nexport function updateScrollTop(cm, val) {\n  if (Math.abs(cm.doc.scrollTop - val) < 2) return\n  if (!gecko) updateDisplaySimple(cm, {top: val})\n  setScrollTop(cm, val, true)\n  if (gecko) updateDisplaySimple(cm)\n  startWorker(cm, 100)\n}\n\nexport function setScrollTop(cm, val, forceScroll) {\n  val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val))\n  if (cm.display.scroller.scrollTop == val && !forceScroll) return\n  cm.doc.scrollTop = val\n  cm.display.scrollbars.setScrollTop(val)\n  if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val\n}\n\n// Sync scroller and scrollbar, ensure the gutter elements are\n// aligned.\nexport function setScrollLeft(cm, val, isScroller, forceScroll) {\n  val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth))\n  if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) return\n  cm.doc.scrollLeft = val\n  alignHorizontally(cm)\n  if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val\n  cm.display.scrollbars.setScrollLeft(val)\n}\n","import { addClass, elt, rmClass } from \"../util/dom.js\"\nimport { on } from \"../util/event.js\"\nimport { scrollGap, paddingVert } from \"../measurement/position_measurement.js\"\nimport { ie, ie_version, mac, mac_geMountainLion } from \"../util/browser.js\"\nimport { updateHeightsInViewport } from \"./update_lines.js\"\nimport { Delayed } from \"../util/misc.js\"\n\nimport { setScrollLeft, updateScrollTop } from \"./scrolling.js\"\n\n// SCROLLBARS\n\n// Prepare DOM reads needed to update the scrollbars. Done in one\n// shot to minimize update/measure roundtrips.\nexport function measureForScrollbars(cm) {\n  let d = cm.display, gutterW = d.gutters.offsetWidth\n  let docH = Math.round(cm.doc.height + paddingVert(cm.display))\n  return {\n    clientHeight: d.scroller.clientHeight,\n    viewHeight: d.wrapper.clientHeight,\n    scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n    viewWidth: d.wrapper.clientWidth,\n    barLeft: cm.options.fixedGutter ? gutterW : 0,\n    docHeight: docH,\n    scrollHeight: docH + scrollGap(cm) + d.barHeight,\n    nativeBarWidth: d.nativeBarWidth,\n    gutterWidth: gutterW\n  }\n}\n\nclass NativeScrollbars {\n  constructor(place, scroll, cm) {\n    this.cm = cm\n    let vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\")\n    let horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\")\n    vert.tabIndex = horiz.tabIndex = -1\n    place(vert); place(horiz)\n\n    on(vert, \"scroll\", () => {\n      if (vert.clientHeight) scroll(vert.scrollTop, \"vertical\")\n    })\n    on(horiz, \"scroll\", () => {\n      if (horiz.clientWidth) scroll(horiz.scrollLeft, \"horizontal\")\n    })\n\n    this.checkedZeroWidth = false\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"\n  }\n\n  update(measure) {\n    let needsH = measure.scrollWidth > measure.clientWidth + 1\n    let needsV = measure.scrollHeight > measure.clientHeight + 1\n    let sWidth = measure.nativeBarWidth\n\n    if (needsV) {\n      this.vert.style.display = \"block\"\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\"\n      let totalHeight = measure.viewHeight - (needsH ? sWidth : 0)\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\"\n    } else {\n      this.vert.style.display = \"\"\n      this.vert.firstChild.style.height = \"0\"\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\"\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\"\n      this.horiz.style.left = measure.barLeft + \"px\"\n      let totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0)\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\"\n    } else {\n      this.horiz.style.display = \"\"\n      this.horiz.firstChild.style.width = \"0\"\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) this.zeroWidthHack()\n      this.checkedZeroWidth = true\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  }\n\n  setScrollLeft(pos) {\n    if (this.horiz.scrollLeft != pos) this.horiz.scrollLeft = pos\n    if (this.disableHoriz) this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\")\n  }\n\n  setScrollTop(pos) {\n    if (this.vert.scrollTop != pos) this.vert.scrollTop = pos\n    if (this.disableVert) this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\")\n  }\n\n  zeroWidthHack() {\n    let w = mac && !mac_geMountainLion ? \"12px\" : \"18px\"\n    this.horiz.style.height = this.vert.style.width = w\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\"\n    this.disableHoriz = new Delayed\n    this.disableVert = new Delayed\n  }\n\n  enableZeroWidthBar(bar, delay, type) {\n    bar.style.pointerEvents = \"auto\"\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      let box = bar.getBoundingClientRect()\n      let elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1)\n      if (elt != bar) bar.style.pointerEvents = \"none\"\n      else delay.set(1000, maybeDisable)\n    }\n    delay.set(1000, maybeDisable)\n  }\n\n  clear() {\n    let parent = this.horiz.parentNode\n    parent.removeChild(this.horiz)\n    parent.removeChild(this.vert)\n  }\n}\n\nclass NullScrollbars {\n  update() { return {bottom: 0, right: 0} }\n  setScrollLeft() {}\n  setScrollTop() {}\n  clear() {}\n}\n\nexport function updateScrollbars(cm, measure) {\n  if (!measure) measure = measureForScrollbars(cm)\n  let startWidth = cm.display.barWidth, startHeight = cm.display.barHeight\n  updateScrollbarsInner(cm, measure)\n  for (let i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n    if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n      updateHeightsInViewport(cm)\n    updateScrollbarsInner(cm, measureForScrollbars(cm))\n    startWidth = cm.display.barWidth; startHeight = cm.display.barHeight\n  }\n}\n\n// Re-synchronize the fake scrollbars with the actual size of the\n// content.\nfunction updateScrollbarsInner(cm, measure) {\n  let d = cm.display\n  let sizes = d.scrollbars.update(measure)\n\n  d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\"\n  d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\"\n  d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\"\n\n  if (sizes.right && sizes.bottom) {\n    d.scrollbarFiller.style.display = \"block\"\n    d.scrollbarFiller.style.height = sizes.bottom + \"px\"\n    d.scrollbarFiller.style.width = sizes.right + \"px\"\n  } else d.scrollbarFiller.style.display = \"\"\n  if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n    d.gutterFiller.style.display = \"block\"\n    d.gutterFiller.style.height = sizes.bottom + \"px\"\n    d.gutterFiller.style.width = measure.gutterWidth + \"px\"\n  } else d.gutterFiller.style.display = \"\"\n}\n\nexport let scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars}\n\nexport function initScrollbars(cm) {\n  if (cm.display.scrollbars) {\n    cm.display.scrollbars.clear()\n    if (cm.display.scrollbars.addClass)\n      rmClass(cm.display.wrapper, cm.display.scrollbars.addClass)\n  }\n\n  cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](node => {\n    cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller)\n    // Prevent clicks in the scrollbars from killing focus\n    on(node, \"mousedown\", () => {\n      if (cm.state.focused) setTimeout(() => cm.display.input.focus(), 0)\n    })\n    node.setAttribute(\"cm-not-content\", \"true\")\n  }, (pos, axis) => {\n    if (axis == \"horizontal\") setScrollLeft(cm, pos)\n    else updateScrollTop(cm, pos)\n  }, cm)\n  if (cm.display.scrollbars.addClass)\n    addClass(cm.display.wrapper, cm.display.scrollbars.addClass)\n}\n","import { clipPos } from \"../line/pos.js\"\nimport { findMaxLine } from \"../line/spans.js\"\nimport { displayWidth, measureChar, scrollGap } from \"../measurement/position_measurement.js\"\nimport { signal } from \"../util/event.js\"\nimport { activeElt } from \"../util/dom.js\"\nimport { finishOperation, pushOperation } from \"../util/operation_group.js\"\n\nimport { ensureFocus } from \"./focus.js\"\nimport { measureForScrollbars, updateScrollbars } from \"./scrollbars.js\"\nimport { restartBlink } from \"./selection.js\"\nimport { maybeScrollWindow, scrollPosIntoView, setScrollLeft, setScrollTop } from \"./scrolling.js\"\nimport { DisplayUpdate, maybeClipScrollbars, postUpdateDisplay, setDocumentHeight, updateDisplayIfNeeded } from \"./update_display.js\"\nimport { updateHeightsInViewport } from \"./update_lines.js\"\n\n// Operations are used to wrap a series of changes to the editor\n// state in such a way that each change won't have to update the\n// cursor and display (which would be awkward, slow, and\n// error-prone). Instead, display updates are batched and then all\n// combined and executed at once.\n\nlet nextOpId = 0\n// Start a new operation.\nexport function startOperation(cm) {\n  cm.curOp = {\n    cm: cm,\n    viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n    startHeight: cm.doc.height, // Used to detect need to update scrollbar\n    forceUpdate: false,      // Used to force a redraw\n    updateInput: 0,       // Whether to reset the input textarea\n    typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n    changeObjs: null,        // Accumulated changes, for firing change events\n    cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n    cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n    selectionChanged: false, // Whether the selection needs to be redrawn\n    updateMaxLine: false,    // Set when the widest line needs to be determined anew\n    scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n    scrollToPos: null,       // Used to scroll to a specific position\n    focus: false,\n    id: ++nextOpId,          // Unique ID\n    markArrays: null         // Used by addMarkedSpan\n  }\n  pushOperation(cm.curOp)\n}\n\n// Finish an operation, updating the display and signalling delayed events\nexport function endOperation(cm) {\n  let op = cm.curOp\n  if (op) finishOperation(op, group => {\n    for (let i = 0; i < group.ops.length; i++)\n      group.ops[i].cm.curOp = null\n    endOperations(group)\n  })\n}\n\n// The DOM updates done when an operation finishes are batched so\n// that the minimum number of relayouts are required.\nfunction endOperations(group) {\n  let ops = group.ops\n  for (let i = 0; i < ops.length; i++) // Read DOM\n    endOperation_R1(ops[i])\n  for (let i = 0; i < ops.length; i++) // Write DOM (maybe)\n    endOperation_W1(ops[i])\n  for (let i = 0; i < ops.length; i++) // Read DOM\n    endOperation_R2(ops[i])\n  for (let i = 0; i < ops.length; i++) // Write DOM (maybe)\n    endOperation_W2(ops[i])\n  for (let i = 0; i < ops.length; i++) // Read DOM\n    endOperation_finish(ops[i])\n}\n\nfunction endOperation_R1(op) {\n  let cm = op.cm, display = cm.display\n  maybeClipScrollbars(cm)\n  if (op.updateMaxLine) findMaxLine(cm)\n\n  op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n    op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                       op.scrollToPos.to.line >= display.viewTo) ||\n    display.maxLineChanged && cm.options.lineWrapping\n  op.update = op.mustUpdate &&\n    new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate)\n}\n\nfunction endOperation_W1(op) {\n  op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update)\n}\n\nfunction endOperation_R2(op) {\n  let cm = op.cm, display = cm.display\n  if (op.updatedDisplay) updateHeightsInViewport(cm)\n\n  op.barMeasure = measureForScrollbars(cm)\n\n  // If the max line changed since it was last measured, measure it,\n  // and ensure the document's width matches it.\n  // updateDisplay_W2 will use these properties to do the actual resizing\n  if (display.maxLineChanged && !cm.options.lineWrapping) {\n    op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3\n    cm.display.sizerWidth = op.adjustWidthTo\n    op.barMeasure.scrollWidth =\n      Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth)\n    op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm))\n  }\n\n  if (op.updatedDisplay || op.selectionChanged)\n    op.preparedSelection = display.input.prepareSelection()\n}\n\nfunction endOperation_W2(op) {\n  let cm = op.cm\n\n  if (op.adjustWidthTo != null) {\n    cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\"\n    if (op.maxScrollLeft < cm.doc.scrollLeft)\n      setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true)\n    cm.display.maxLineChanged = false\n  }\n\n  let takeFocus = op.focus && op.focus == activeElt()\n  if (op.preparedSelection)\n    cm.display.input.showSelection(op.preparedSelection, takeFocus)\n  if (op.updatedDisplay || op.startHeight != cm.doc.height)\n    updateScrollbars(cm, op.barMeasure)\n  if (op.updatedDisplay)\n    setDocumentHeight(cm, op.barMeasure)\n\n  if (op.selectionChanged) restartBlink(cm)\n\n  if (cm.state.focused && op.updateInput)\n    cm.display.input.reset(op.typing)\n  if (takeFocus) ensureFocus(op.cm)\n}\n\nfunction endOperation_finish(op) {\n  let cm = op.cm, display = cm.display, doc = cm.doc\n\n  if (op.updatedDisplay) postUpdateDisplay(cm, op.update)\n\n  // Abort mouse wheel delta measurement, when scrolling explicitly\n  if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n    display.wheelStartX = display.wheelStartY = null\n\n  // Propagate the scroll position to the actual DOM scroller\n  if (op.scrollTop != null) setScrollTop(cm, op.scrollTop, op.forceScroll)\n\n  if (op.scrollLeft != null) setScrollLeft(cm, op.scrollLeft, true, true)\n  // If we need to scroll a specific position into view, do so.\n  if (op.scrollToPos) {\n    let rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                 clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin)\n    maybeScrollWindow(cm, rect)\n  }\n\n  // Fire events for markers that are hidden/unidden by editing or\n  // undoing\n  let hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers\n  if (hidden) for (let i = 0; i < hidden.length; ++i)\n    if (!hidden[i].lines.length) signal(hidden[i], \"hide\")\n  if (unhidden) for (let i = 0; i < unhidden.length; ++i)\n    if (unhidden[i].lines.length) signal(unhidden[i], \"unhide\")\n\n  if (display.wrapper.offsetHeight)\n    doc.scrollTop = cm.display.scroller.scrollTop\n\n  // Fire change events, and delayed event handlers\n  if (op.changeObjs)\n    signal(cm, \"changes\", cm, op.changeObjs)\n  if (op.update)\n    op.update.finish()\n}\n\n// Run the given function in an operation\nexport function runInOp(cm, f) {\n  if (cm.curOp) return f()\n  startOperation(cm)\n  try { return f() }\n  finally { endOperation(cm) }\n}\n// Wraps a function in an operation. Returns the wrapped function.\nexport function operation(cm, f) {\n  return function() {\n    if (cm.curOp) return f.apply(cm, arguments)\n    startOperation(cm)\n    try { return f.apply(cm, arguments) }\n    finally { endOperation(cm) }\n  }\n}\n// Used to add methods to editor and doc instances, wrapping them in\n// operations.\nexport function methodOp(f) {\n  return function() {\n    if (this.curOp) return f.apply(this, arguments)\n    startOperation(this)\n    try { return f.apply(this, arguments) }\n    finally { endOperation(this) }\n  }\n}\nexport function docMethodOp(f) {\n  return function() {\n    let cm = this.cm\n    if (!cm || cm.curOp) return f.apply(this, arguments)\n    startOperation(cm)\n    try { return f.apply(this, arguments) }\n    finally { endOperation(cm) }\n  }\n}\n","import { getContextBefore, highlightLine, processLine } from \"../line/highlight.js\"\nimport { copyState } from \"../modes.js\"\nimport { bind } from \"../util/misc.js\"\n\nimport { runInOp } from \"./operations.js\"\nimport { regLineChange } from \"./view_tracking.js\"\n\n// HIGHLIGHT WORKER\n\nexport function startWorker(cm, time) {\n  if (cm.doc.highlightFrontier < cm.display.viewTo)\n    cm.state.highlight.set(time, bind(highlightWorker, cm))\n}\n\nfunction highlightWorker(cm) {\n  let doc = cm.doc\n  if (doc.highlightFrontier >= cm.display.viewTo) return\n  let end = +new Date + cm.options.workTime\n  let context = getContextBefore(cm, doc.highlightFrontier)\n  let changedLines = []\n\n  doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), line => {\n    if (context.line >= cm.display.viewFrom) { // Visible\n      let oldStyles = line.styles\n      let resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null\n      let highlighted = highlightLine(cm, line, context, true)\n      if (resetState) context.state = resetState\n      line.styles = highlighted.styles\n      let oldCls = line.styleClasses, newCls = highlighted.classes\n      if (newCls) line.styleClasses = newCls\n      else if (oldCls) line.styleClasses = null\n      let ischange = !oldStyles || oldStyles.length != line.styles.length ||\n        oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass)\n      for (let i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i]\n      if (ischange) changedLines.push(context.line)\n      line.stateAfter = context.save()\n      context.nextLine()\n    } else {\n      if (line.text.length <= cm.options.maxHighlightLength)\n        processLine(cm, line.text, context)\n      line.stateAfter = context.line % 5 == 0 ? context.save() : null\n      context.nextLine()\n    }\n    if (+new Date > end) {\n      startWorker(cm, cm.options.workDelay)\n      return true\n    }\n  })\n  doc.highlightFrontier = context.line\n  doc.modeFrontier = Math.max(doc.modeFrontier, context.line)\n  if (changedLines.length) runInOp(cm, () => {\n    for (let i = 0; i < changedLines.length; i++)\n      regLineChange(cm, changedLines[i], \"text\")\n  })\n}\n","import { sawCollapsedSpans } from \"../line/saw_special_spans.js\"\nimport { heightAtLine, visualLineEndNo, visualLineNo } from \"../line/spans.js\"\nimport { getLine, lineNumberFor } from \"../line/utils_line.js\"\nimport { displayHeight, displayWidth, getDimensions, paddingVert, scrollGap } from \"../measurement/position_measurement.js\"\nimport { mac, webkit } from \"../util/browser.js\"\nimport { activeElt, removeChildren, contains } from \"../util/dom.js\"\nimport { hasHandler, signal } from \"../util/event.js\"\nimport { signalLater } from \"../util/operation_group.js\"\nimport { indexOf } from \"../util/misc.js\"\n\nimport { buildLineElement, updateLineForChanges } from \"./update_line.js\"\nimport { startWorker } from \"./highlight_worker.js\"\nimport { maybeUpdateLineNumberWidth } from \"./line_numbers.js\"\nimport { measureForScrollbars, updateScrollbars } from \"./scrollbars.js\"\nimport { updateSelection } from \"./selection.js\"\nimport { updateHeightsInViewport, visibleLines } from \"./update_lines.js\"\nimport { adjustView, countDirtyView, resetView } from \"./view_tracking.js\"\n\n// DISPLAY DRAWING\n\nexport class DisplayUpdate {\n  constructor(cm, viewport, force) {\n    let display = cm.display\n\n    this.viewport = viewport\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport)\n    this.editorIsHidden = !display.wrapper.offsetWidth\n    this.wrapperHeight = display.wrapper.clientHeight\n    this.wrapperWidth = display.wrapper.clientWidth\n    this.oldDisplayWidth = displayWidth(cm)\n    this.force = force\n    this.dims = getDimensions(cm)\n    this.events = []\n  }\n\n  signal(emitter, type) {\n    if (hasHandler(emitter, type))\n      this.events.push(arguments)\n  }\n  finish() {\n    for (let i = 0; i < this.events.length; i++)\n      signal.apply(null, this.events[i])\n  }\n}\n\nexport function maybeClipScrollbars(cm) {\n  let display = cm.display\n  if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n    display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth\n    display.heightForcer.style.height = scrollGap(cm) + \"px\"\n    display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\"\n    display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\"\n    display.scrollbarsClipped = true\n  }\n}\n\nfunction selectionSnapshot(cm) {\n  if (cm.hasFocus()) return null\n  let active = activeElt()\n  if (!active || !contains(cm.display.lineDiv, active)) return null\n  let result = {activeElt: active}\n  if (window.getSelection) {\n    let sel = window.getSelection()\n    if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n      result.anchorNode = sel.anchorNode\n      result.anchorOffset = sel.anchorOffset\n      result.focusNode = sel.focusNode\n      result.focusOffset = sel.focusOffset\n    }\n  }\n  return result\n}\n\nfunction restoreSelection(snapshot) {\n  if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) return\n  snapshot.activeElt.focus()\n  if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n      snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n    let sel = window.getSelection(), range = document.createRange()\n    range.setEnd(snapshot.anchorNode, snapshot.anchorOffset)\n    range.collapse(false)\n    sel.removeAllRanges()\n    sel.addRange(range)\n    sel.extend(snapshot.focusNode, snapshot.focusOffset)\n  }\n}\n\n// Does the actual updating of the line display. Bails out\n// (returning false) when there is nothing to be done and forced is\n// false.\nexport function updateDisplayIfNeeded(cm, update) {\n  let display = cm.display, doc = cm.doc\n\n  if (update.editorIsHidden) {\n    resetView(cm)\n    return false\n  }\n\n  // Bail out if the visible area is already rendered and nothing changed.\n  if (!update.force &&\n      update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n      display.renderedView == display.view && countDirtyView(cm) == 0)\n    return false\n\n  if (maybeUpdateLineNumberWidth(cm)) {\n    resetView(cm)\n    update.dims = getDimensions(cm)\n  }\n\n  // Compute a suitable new viewport (from & to)\n  let end = doc.first + doc.size\n  let from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first)\n  let to = Math.min(end, update.visible.to + cm.options.viewportMargin)\n  if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom)\n  if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo)\n  if (sawCollapsedSpans) {\n    from = visualLineNo(cm.doc, from)\n    to = visualLineEndNo(cm.doc, to)\n  }\n\n  let different = from != display.viewFrom || to != display.viewTo ||\n    display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth\n  adjustView(cm, from, to)\n\n  display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom))\n  // Position the mover div to align with the current scroll position\n  cm.display.mover.style.top = display.viewOffset + \"px\"\n\n  let toUpdate = countDirtyView(cm)\n  if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n    return false\n\n  // For big changes, we hide the enclosing element during the\n  // update, since that speeds up the operations on most browsers.\n  let selSnapshot = selectionSnapshot(cm)\n  if (toUpdate > 4) display.lineDiv.style.display = \"none\"\n  patchDisplay(cm, display.updateLineNumbers, update.dims)\n  if (toUpdate > 4) display.lineDiv.style.display = \"\"\n  display.renderedView = display.view\n  // There might have been a widget with a focused element that got\n  // hidden or updated, if so re-focus it.\n  restoreSelection(selSnapshot)\n\n  // Prevent selection and cursors from interfering with the scroll\n  // width and height.\n  removeChildren(display.cursorDiv)\n  removeChildren(display.selectionDiv)\n  display.gutters.style.height = display.sizer.style.minHeight = 0\n\n  if (different) {\n    display.lastWrapHeight = update.wrapperHeight\n    display.lastWrapWidth = update.wrapperWidth\n    startWorker(cm, 400)\n  }\n\n  display.updateLineNumbers = null\n\n  return true\n}\n\nexport function postUpdateDisplay(cm, update) {\n  let viewport = update.viewport\n\n  for (let first = true;; first = false) {\n    if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n      // Clip forced viewport to actual scrollable area.\n      if (viewport && viewport.top != null)\n        viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}\n      // Updated line heights might result in the drawn area not\n      // actually covering the viewport. Keep looping until it does.\n      update.visible = visibleLines(cm.display, cm.doc, viewport)\n      if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n        break\n    } else if (first) {\n      update.visible = visibleLines(cm.display, cm.doc, viewport)\n    }\n    if (!updateDisplayIfNeeded(cm, update)) break\n    updateHeightsInViewport(cm)\n    let barMeasure = measureForScrollbars(cm)\n    updateSelection(cm)\n    updateScrollbars(cm, barMeasure)\n    setDocumentHeight(cm, barMeasure)\n    update.force = false\n  }\n\n  update.signal(cm, \"update\", cm)\n  if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n    update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo)\n    cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo\n  }\n}\n\nexport function updateDisplaySimple(cm, viewport) {\n  let update = new DisplayUpdate(cm, viewport)\n  if (updateDisplayIfNeeded(cm, update)) {\n    updateHeightsInViewport(cm)\n    postUpdateDisplay(cm, update)\n    let barMeasure = measureForScrollbars(cm)\n    updateSelection(cm)\n    updateScrollbars(cm, barMeasure)\n    setDocumentHeight(cm, barMeasure)\n    update.finish()\n  }\n}\n\n// Sync the actual display DOM structure with display.view, removing\n// nodes for lines that are no longer in view, and creating the ones\n// that are not there yet, and updating the ones that are out of\n// date.\nfunction patchDisplay(cm, updateNumbersFrom, dims) {\n  let display = cm.display, lineNumbers = cm.options.lineNumbers\n  let container = display.lineDiv, cur = container.firstChild\n\n  function rm(node) {\n    let next = node.nextSibling\n    // Works around a throw-scroll bug in OS X Webkit\n    if (webkit && mac && cm.display.currentWheelTarget == node)\n      node.style.display = \"none\"\n    else\n      node.parentNode.removeChild(node)\n    return next\n  }\n\n  let view = display.view, lineN = display.viewFrom\n  // Loop over the elements in the view, syncing cur (the DOM nodes\n  // in display.lineDiv) with the view as we go.\n  for (let i = 0; i < view.length; i++) {\n    let lineView = view[i]\n    if (lineView.hidden) {\n    } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n      let node = buildLineElement(cm, lineView, lineN, dims)\n      container.insertBefore(node, cur)\n    } else { // Already drawn\n      while (cur != lineView.node) cur = rm(cur)\n      let updateNumber = lineNumbers && updateNumbersFrom != null &&\n        updateNumbersFrom <= lineN && lineView.lineNumber\n      if (lineView.changes) {\n        if (indexOf(lineView.changes, \"gutter\") > -1) updateNumber = false\n        updateLineForChanges(cm, lineView, lineN, dims)\n      }\n      if (updateNumber) {\n        removeChildren(lineView.lineNumber)\n        lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)))\n      }\n      cur = lineView.node.nextSibling\n    }\n    lineN += lineView.size\n  }\n  while (cur) cur = rm(cur)\n}\n\nexport function updateGutterSpace(display) {\n  let width = display.gutters.offsetWidth\n  display.sizer.style.marginLeft = width + \"px\"\n  // Send an event to consumers responding to changes in gutter width.\n  signalLater(display, \"gutterChanged\", display)\n}\n\nexport function setDocumentHeight(cm, measure) {\n  cm.display.sizer.style.minHeight = measure.docHeight + \"px\"\n  cm.display.heightForcer.style.top = measure.docHeight + \"px\"\n  cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\"\n}\n","import { lineNumberFor } from \"../line/utils_line.js\"\nimport { compensateForHScroll } from \"../measurement/position_measurement.js\"\nimport { elt } from \"../util/dom.js\"\n\nimport { updateGutterSpace } from \"./update_display.js\"\n\n// Re-align line numbers and gutter marks to compensate for\n// horizontal scrolling.\nexport function alignHorizontally(cm) {\n  let display = cm.display, view = display.view\n  if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return\n  let comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft\n  let gutterW = display.gutters.offsetWidth, left = comp + \"px\"\n  for (let i = 0; i < view.length; i++) if (!view[i].hidden) {\n    if (cm.options.fixedGutter) {\n      if (view[i].gutter)\n        view[i].gutter.style.left = left\n      if (view[i].gutterBackground)\n        view[i].gutterBackground.style.left = left\n    }\n    let align = view[i].alignable\n    if (align) for (let j = 0; j < align.length; j++)\n      align[j].style.left = left\n  }\n  if (cm.options.fixedGutter)\n    display.gutters.style.left = (comp + gutterW) + \"px\"\n}\n\n// Used to ensure that the line number gutter is still the right\n// size for the current document size. Returns true when an update\n// is needed.\nexport function maybeUpdateLineNumberWidth(cm) {\n  if (!cm.options.lineNumbers) return false\n  let doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display\n  if (last.length != display.lineNumChars) {\n    let test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                               \"CodeMirror-linenumber CodeMirror-gutter-elt\"))\n    let innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW\n    display.lineGutter.style.width = \"\"\n    display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1\n    display.lineNumWidth = display.lineNumInnerWidth + padding\n    display.lineNumChars = display.lineNumInnerWidth ? last.length : -1\n    display.lineGutter.style.width = display.lineNumWidth + \"px\"\n    updateGutterSpace(cm.display)\n    return true\n  }\n  return false\n}\n","import { elt, removeChildren } from \"../util/dom.js\"\nimport { regChange } from \"./view_tracking.js\"\nimport { alignHorizontally } from \"./line_numbers.js\"\nimport { updateGutterSpace } from \"./update_display.js\"\n\nexport function getGutters(gutters, lineNumbers) {\n  let result = [], sawLineNumbers = false\n  for (let i = 0; i < gutters.length; i++) {\n    let name = gutters[i], style = null\n    if (typeof name != \"string\") { style = name.style; name = name.className }\n    if (name == \"CodeMirror-linenumbers\") {\n      if (!lineNumbers) continue\n      else sawLineNumbers = true\n    }\n    result.push({className: name, style})\n  }\n  if (lineNumbers && !sawLineNumbers) result.push({className: \"CodeMirror-linenumbers\", style: null})\n  return result\n}\n\n// Rebuild the gutter elements, ensure the margin to the left of the\n// code matches their width.\nexport function renderGutters(display) {\n  let gutters = display.gutters, specs = display.gutterSpecs\n  removeChildren(gutters)\n  display.lineGutter = null\n  for (let i = 0; i < specs.length; ++i) {\n    let {className, style} = specs[i]\n    let gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className))\n    if (style) gElt.style.cssText = style\n    if (className == \"CodeMirror-linenumbers\") {\n      display.lineGutter = gElt\n      gElt.style.width = (display.lineNumWidth || 1) + \"px\"\n    }\n  }\n  gutters.style.display = specs.length ? \"\" : \"none\"\n  updateGutterSpace(display)\n}\n\nexport function updateGutters(cm) {\n  renderGutters(cm.display)\n  regChange(cm)\n  alignHorizontally(cm)\n}\n","import { gecko, ie, ie_version, mobile, webkit } from \"../util/browser.js\"\nimport { elt, eltP } from \"../util/dom.js\"\nimport { scrollerGap } from \"../util/misc.js\"\nimport { getGutters, renderGutters } from \"./gutters.js\"\n\n// The display handles the DOM integration, both for input reading\n// and content drawing. It holds references to DOM nodes and\n// display-related state.\n\nexport function Display(place, doc, input, options) {\n  let d = this\n  this.input = input\n\n  // Covers bottom-right square when both scrollbars are present.\n  d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\")\n  d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\")\n  // Covers bottom of gutter when coverGutterNextToScrollbar is on\n  // and h scrollbar is present.\n  d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\")\n  d.gutterFiller.setAttribute(\"cm-not-content\", \"true\")\n  // Will contain the actual code, positioned to cover the viewport.\n  d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\")\n  // Elements are added to these to represent selection and cursors.\n  d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\")\n  d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\")\n  // A visibility: hidden element used to find the size of things.\n  d.measure = elt(\"div\", null, \"CodeMirror-measure\")\n  // When lines outside of the viewport are measured, they are drawn in this.\n  d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\")\n  // Wraps everything that needs to exist inside the vertically-padded coordinate system\n  d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                    null, \"position: relative; outline: none\")\n  let lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\")\n  // Moved around its parent to cover visible view.\n  d.mover = elt(\"div\", [lines], null, \"position: relative\")\n  // Set to the height of the document, allowing scrolling.\n  d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\")\n  d.sizerWidth = null\n  // Behavior of elts with overflow: auto and padding is\n  // inconsistent across browsers. This is used to ensure the\n  // scrollable area is big enough.\n  d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\")\n  // Will contain the gutters, if any.\n  d.gutters = elt(\"div\", null, \"CodeMirror-gutters\")\n  d.lineGutter = null\n  // Actual scrollable element.\n  d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\")\n  d.scroller.setAttribute(\"tabIndex\", \"-1\")\n  // The element in which the editor lives.\n  d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\")\n\n  // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n  if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0 }\n  if (!webkit && !(gecko && mobile)) d.scroller.draggable = true\n\n  if (place) {\n    if (place.appendChild) place.appendChild(d.wrapper)\n    else place(d.wrapper)\n  }\n\n  // Current rendered range (may be bigger than the view window).\n  d.viewFrom = d.viewTo = doc.first\n  d.reportedViewFrom = d.reportedViewTo = doc.first\n  // Information about the rendered lines.\n  d.view = []\n  d.renderedView = null\n  // Holds info about a single rendered line when it was rendered\n  // for measurement, while not in view.\n  d.externalMeasured = null\n  // Empty space (in pixels) above the view\n  d.viewOffset = 0\n  d.lastWrapHeight = d.lastWrapWidth = 0\n  d.updateLineNumbers = null\n\n  d.nativeBarWidth = d.barHeight = d.barWidth = 0\n  d.scrollbarsClipped = false\n\n  // Used to only resize the line number gutter when necessary (when\n  // the amount of lines crosses a boundary that makes its width change)\n  d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null\n  // Set to true when a non-horizontal-scrolling line widget is\n  // added. As an optimization, line widget aligning is skipped when\n  // this is false.\n  d.alignWidgets = false\n\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null\n\n  // Tracks the maximum line length so that the horizontal scrollbar\n  // can be kept static when scrolling.\n  d.maxLine = null\n  d.maxLineLength = 0\n  d.maxLineChanged = false\n\n  // Used for measuring wheel scrolling granularity\n  d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null\n\n  // True when shift is held down.\n  d.shift = false\n\n  // Used to track whether anything happened since the context menu\n  // was opened.\n  d.selForContextMenu = null\n\n  d.activeTouch = null\n\n  d.gutterSpecs = getGutters(options.gutters, options.lineNumbers)\n  renderGutters(d)\n\n  input.init(d)\n}\n","import { chrome, gecko, ie, mac, presto, safari, webkit } from \"../util/browser.js\"\nimport { e_preventDefault } from \"../util/event.js\"\n\nimport { updateDisplaySimple } from \"./update_display.js\"\nimport { setScrollLeft, updateScrollTop } from \"./scrolling.js\"\n\n// Since the delta values reported on mouse wheel events are\n// unstandardized between browsers and even browser versions, and\n// generally horribly unpredictable, this code starts by measuring\n// the scroll effect that the first few mouse wheel events have,\n// and, from that, detects the way it can convert deltas to pixel\n// offsets afterwards.\n//\n// The reason we want to know the amount a wheel event will scroll\n// is that it gives us a chance to update the display before the\n// actual scrolling happens, reducing flickering.\n\nlet wheelSamples = 0, wheelPixelsPerUnit = null\n// Fill in a browser-detected starting value on browsers where we\n// know one. These don't have to be accurate -- the result of them\n// being wrong would just be a slight flicker on the first wheel\n// scroll (if it is large enough).\nif (ie) wheelPixelsPerUnit = -.53\nelse if (gecko) wheelPixelsPerUnit = 15\nelse if (chrome) wheelPixelsPerUnit = -.7\nelse if (safari) wheelPixelsPerUnit = -1/3\n\nfunction wheelEventDelta(e) {\n  let dx = e.wheelDeltaX, dy = e.wheelDeltaY\n  if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail\n  if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail\n  else if (dy == null) dy = e.wheelDelta\n  return {x: dx, y: dy}\n}\nexport function wheelEventPixels(e) {\n  let delta = wheelEventDelta(e)\n  delta.x *= wheelPixelsPerUnit\n  delta.y *= wheelPixelsPerUnit\n  return delta\n}\n\nexport function onScrollWheel(cm, e) {\n  let delta = wheelEventDelta(e), dx = delta.x, dy = delta.y\n\n  let display = cm.display, scroll = display.scroller\n  // Quit if there's nothing to scroll here\n  let canScrollX = scroll.scrollWidth > scroll.clientWidth\n  let canScrollY = scroll.scrollHeight > scroll.clientHeight\n  if (!(dx && canScrollX || dy && canScrollY)) return\n\n  // Webkit browsers on OS X abort momentum scrolls when the target\n  // of the scroll event is removed from the scrollable element.\n  // This hack (see related code in patchDisplay) makes sure the\n  // element is kept around.\n  if (dy && mac && webkit) {\n    outer: for (let cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n      for (let i = 0; i < view.length; i++) {\n        if (view[i].node == cur) {\n          cm.display.currentWheelTarget = cur\n          break outer\n        }\n      }\n    }\n  }\n\n  // On some browsers, horizontal scrolling will cause redraws to\n  // happen before the gutter has been realigned, causing it to\n  // wriggle around in a most unseemly way. When we have an\n  // estimated pixels/delta value, we just handle horizontal\n  // scrolling entirely here. It'll be slightly off from native, but\n  // better than glitching out.\n  if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n    if (dy && canScrollY)\n      updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit))\n    setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit))\n    // Only prevent default scrolling if vertical scrolling is\n    // actually possible. Otherwise, it causes vertical scroll\n    // jitter on OSX trackpads when deltaX is small and deltaY\n    // is large (issue #3579)\n    if (!dy || (dy && canScrollY))\n      e_preventDefault(e)\n    display.wheelStartX = null // Abort measurement, if in progress\n    return\n  }\n\n  // 'Project' the visible viewport to cover the area that is being\n  // scrolled into view (if we know enough to estimate it).\n  if (dy && wheelPixelsPerUnit != null) {\n    let pixels = dy * wheelPixelsPerUnit\n    let top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight\n    if (pixels < 0) top = Math.max(0, top + pixels - 50)\n    else bot = Math.min(cm.doc.height, bot + pixels + 50)\n    updateDisplaySimple(cm, {top: top, bottom: bot})\n  }\n\n  if (wheelSamples < 20) {\n    if (display.wheelStartX == null) {\n      display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop\n      display.wheelDX = dx; display.wheelDY = dy\n      setTimeout(() => {\n        if (display.wheelStartX == null) return\n        let movedX = scroll.scrollLeft - display.wheelStartX\n        let movedY = scroll.scrollTop - display.wheelStartY\n        let sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n          (movedX && display.wheelDX && movedX / display.wheelDX)\n        display.wheelStartX = display.wheelStartY = null\n        if (!sample) return\n        wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1)\n        ++wheelSamples\n      }, 200)\n    } else {\n      display.wheelDX += dx; display.wheelDY += dy\n    }\n  }\n}\n","import { cmp, copyPos, equalCursorPos, maxPos, minPos } from \"../line/pos.js\"\nimport { indexOf } from \"../util/misc.js\"\n\n// Selection objects are immutable. A new one is created every time\n// the selection changes. A selection is one or more non-overlapping\n// (and non-touching) ranges, sorted, and an integer that indicates\n// which one is the primary selection (the one that's scrolled into\n// view, that getCursor returns, etc).\nexport class Selection {\n  constructor(ranges, primIndex) {\n    this.ranges = ranges\n    this.primIndex = primIndex\n  }\n\n  primary() { return this.ranges[this.primIndex] }\n\n  equals(other) {\n    if (other == this) return true\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false\n    for (let i = 0; i < this.ranges.length; i++) {\n      let here = this.ranges[i], there = other.ranges[i]\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) return false\n    }\n    return true\n  }\n\n  deepCopy() {\n    let out = []\n    for (let i = 0; i < this.ranges.length; i++)\n      out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head))\n    return new Selection(out, this.primIndex)\n  }\n\n  somethingSelected() {\n    for (let i = 0; i < this.ranges.length; i++)\n      if (!this.ranges[i].empty()) return true\n    return false\n  }\n\n  contains(pos, end) {\n    if (!end) end = pos\n    for (let i = 0; i < this.ranges.length; i++) {\n      let range = this.ranges[i]\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        return i\n    }\n    return -1\n  }\n}\n\nexport class Range {\n  constructor(anchor, head) {\n    this.anchor = anchor; this.head = head\n  }\n\n  from() { return minPos(this.anchor, this.head) }\n  to() { return maxPos(this.anchor, this.head) }\n  empty() { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch }\n}\n\n// Take an unsorted, potentially overlapping set of ranges, and\n// build a selection out of it. 'Consumes' ranges array (modifying\n// it).\nexport function normalizeSelection(cm, ranges, primIndex) {\n  let mayTouch = cm && cm.options.selectionsMayTouch\n  let prim = ranges[primIndex]\n  ranges.sort((a, b) => cmp(a.from(), b.from()))\n  primIndex = indexOf(ranges, prim)\n  for (let i = 1; i < ranges.length; i++) {\n    let cur = ranges[i], prev = ranges[i - 1]\n    let diff = cmp(prev.to(), cur.from())\n    if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n      let from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to())\n      let inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head\n      if (i <= primIndex) --primIndex\n      ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to))\n    }\n  }\n  return new Selection(ranges, primIndex)\n}\n\nexport function simpleSelection(anchor, head) {\n  return new Selection([new Range(anchor, head || anchor)], 0)\n}\n","import { cmp, Pos } from \"../line/pos.js\"\nimport { lst } from \"../util/misc.js\"\n\nimport { normalizeSelection, Range, Selection } from \"./selection.js\"\n\n// Compute the position of the end of a change (its 'to' property\n// refers to the pre-change end).\nexport function changeEnd(change) {\n  if (!change.text) return change.to\n  return Pos(change.from.line + change.text.length - 1,\n             lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n}\n\n// Adjust a position to refer to the post-change position of the\n// same text, or the end of the change if the change covers it.\nfunction adjustForChange(pos, change) {\n  if (cmp(pos, change.from) < 0) return pos\n  if (cmp(pos, change.to) <= 0) return changeEnd(change)\n\n  let line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch\n  if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch\n  return Pos(line, ch)\n}\n\nexport function computeSelAfterChange(doc, change) {\n  let out = []\n  for (let i = 0; i < doc.sel.ranges.length; i++) {\n    let range = doc.sel.ranges[i]\n    out.push(new Range(adjustForChange(range.anchor, change),\n                       adjustForChange(range.head, change)))\n  }\n  return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n}\n\nfunction offsetPos(pos, old, nw) {\n  if (pos.line == old.line)\n    return Pos(nw.line, pos.ch - old.ch + nw.ch)\n  else\n    return Pos(nw.line + (pos.line - old.line), pos.ch)\n}\n\n// Used by replaceSelections to allow moving the selection to the\n// start or around the replaced test. Hint may be \"start\" or \"around\".\nexport function computeReplacedSel(doc, changes, hint) {\n  let out = []\n  let oldPrev = Pos(doc.first, 0), newPrev = oldPrev\n  for (let i = 0; i < changes.length; i++) {\n    let change = changes[i]\n    let from = offsetPos(change.from, oldPrev, newPrev)\n    let to = offsetPos(changeEnd(change), oldPrev, newPrev)\n    oldPrev = change.to\n    newPrev = to\n    if (hint == \"around\") {\n      let range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0\n      out[i] = new Range(inv ? to : from, inv ? from : to)\n    } else {\n      out[i] = new Range(from, from)\n    }\n  }\n  return new Selection(out, doc.sel.primIndex)\n}\n","import { getMode } from \"../modes.js\"\n\nimport { startWorker } from \"./highlight_worker.js\"\nimport { regChange } from \"./view_tracking.js\"\n\n// Used to get the editor into a consistent state again when options change.\n\nexport function loadMode(cm) {\n  cm.doc.mode = getMode(cm.options, cm.doc.modeOption)\n  resetModeState(cm)\n}\n\nexport function resetModeState(cm) {\n  cm.doc.iter(line => {\n    if (line.stateAfter) line.stateAfter = null\n    if (line.styles) line.styles = null\n  })\n  cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first\n  startWorker(cm, 100)\n  cm.state.modeGen++\n  if (cm.curOp) regChange(cm)\n}\n","import { loadMode } from \"../display/mode_state.js\"\nimport { runInOp } from \"../display/operations.js\"\nimport { regChange } from \"../display/view_tracking.js\"\nimport { Line, updateLine } from \"../line/line_data.js\"\nimport { findMaxLine } from \"../line/spans.js\"\nimport { getLine } from \"../line/utils_line.js\"\nimport { estimateLineHeights } from \"../measurement/position_measurement.js\"\nimport { addClass, rmClass } from \"../util/dom.js\"\nimport { lst } from \"../util/misc.js\"\nimport { signalLater } from \"../util/operation_group.js\"\n\n// DOCUMENT DATA STRUCTURE\n\n// By default, updates that start and end at the beginning of a line\n// are treated specially, in order to make the association of line\n// widgets and marker elements with the text behave more intuitive.\nexport function isWholeLineUpdate(doc, change) {\n  return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n    (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n}\n\n// Perform a change on the document data structure.\nexport function updateDoc(doc, change, markedSpans, estimateHeight) {\n  function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n  function update(line, text, spans) {\n    updateLine(line, text, spans, estimateHeight)\n    signalLater(line, \"change\", line, change)\n  }\n  function linesFor(start, end) {\n    let result = []\n    for (let i = start; i < end; ++i)\n      result.push(new Line(text[i], spansFor(i), estimateHeight))\n    return result\n  }\n\n  let from = change.from, to = change.to, text = change.text\n  let firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line)\n  let lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line\n\n  // Adjust the line structure\n  if (change.full) {\n    doc.insert(0, linesFor(0, text.length))\n    doc.remove(text.length, doc.size - text.length)\n  } else if (isWholeLineUpdate(doc, change)) {\n    // This is a whole-line replace. Treated specially to make\n    // sure line objects move the way they are supposed to.\n    let added = linesFor(0, text.length - 1)\n    update(lastLine, lastLine.text, lastSpans)\n    if (nlines) doc.remove(from.line, nlines)\n    if (added.length) doc.insert(from.line, added)\n  } else if (firstLine == lastLine) {\n    if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans)\n    } else {\n      let added = linesFor(1, text.length - 1)\n      added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight))\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0))\n      doc.insert(from.line + 1, added)\n    }\n  } else if (text.length == 1) {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0))\n    doc.remove(from.line + 1, nlines)\n  } else {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0))\n    update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans)\n    let added = linesFor(1, text.length - 1)\n    if (nlines > 1) doc.remove(from.line + 1, nlines - 1)\n    doc.insert(from.line + 1, added)\n  }\n\n  signalLater(doc, \"change\", doc, change)\n}\n\n// Call f for all linked documents.\nexport function linkedDocs(doc, f, sharedHistOnly) {\n  function propagate(doc, skip, sharedHist) {\n    if (doc.linked) for (let i = 0; i < doc.linked.length; ++i) {\n      let rel = doc.linked[i]\n      if (rel.doc == skip) continue\n      let shared = sharedHist && rel.sharedHist\n      if (sharedHistOnly && !shared) continue\n      f(rel.doc, shared)\n      propagate(rel.doc, doc, shared)\n    }\n  }\n  propagate(doc, null, true)\n}\n\n// Attach a document to an editor.\nexport function attachDoc(cm, doc) {\n  if (doc.cm) throw new Error(\"This document is already in use.\")\n  cm.doc = doc\n  doc.cm = cm\n  estimateLineHeights(cm)\n  loadMode(cm)\n  setDirectionClass(cm)\n  cm.options.direction = doc.direction\n  if (!cm.options.lineWrapping) findMaxLine(cm)\n  cm.options.mode = doc.modeOption\n  regChange(cm)\n}\n\nfunction setDirectionClass(cm) {\n  ;(cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\")\n}\n\nexport function directionChanged(cm) {\n  runInOp(cm, () => {\n    setDirectionClass(cm)\n    regChange(cm)\n  })\n}\n","import { cmp, copyPos } from \"../line/pos.js\"\nimport { stretchSpansOverChange } from \"../line/spans.js\"\nimport { getBetween } from \"../line/utils_line.js\"\nimport { signal } from \"../util/event.js\"\nimport { indexOf, lst } from \"../util/misc.js\"\n\nimport { changeEnd } from \"./change_measurement.js\"\nimport { linkedDocs } from \"./document_data.js\"\nimport { Selection } from \"./selection.js\"\n\nexport function History(prev) {\n  // Arrays of change events and selections. Doing something adds an\n  // event to done and clears undo. Undoing moves events from done\n  // to undone, redoing moves them in the other direction.\n  this.done = []; this.undone = []\n  this.undoDepth = prev ? prev.undoDepth : Infinity\n  // Used to track when changes can be merged into a single undo\n  // event\n  this.lastModTime = this.lastSelTime = 0\n  this.lastOp = this.lastSelOp = null\n  this.lastOrigin = this.lastSelOrigin = null\n  // Used by the isClean() method\n  this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1\n}\n\n// Create a history change event from an updateDoc-style change\n// object.\nexport function historyChangeFromChange(doc, change) {\n  let histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)}\n  attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1)\n  linkedDocs(doc, doc => attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1), true)\n  return histChange\n}\n\n// Pop all selection events off the end of a history array. Stop at\n// a change event.\nfunction clearSelectionEvents(array) {\n  while (array.length) {\n    let last = lst(array)\n    if (last.ranges) array.pop()\n    else break\n  }\n}\n\n// Find the top change event in the history. Pop off selection\n// events that are in the way.\nfunction lastChangeEvent(hist, force) {\n  if (force) {\n    clearSelectionEvents(hist.done)\n    return lst(hist.done)\n  } else if (hist.done.length && !lst(hist.done).ranges) {\n    return lst(hist.done)\n  } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n    hist.done.pop()\n    return lst(hist.done)\n  }\n}\n\n// Register a change in the history. Merges changes that are within\n// a single operation, or are close together with an origin that\n// allows merging (starting with \"+\") into a single event.\nexport function addChangeToHistory(doc, change, selAfter, opId) {\n  let hist = doc.history\n  hist.undone.length = 0\n  let time = +new Date, cur\n  let last\n\n  if ((hist.lastOp == opId ||\n       hist.lastOrigin == change.origin && change.origin &&\n       ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n        change.origin.charAt(0) == \"*\")) &&\n      (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n    // Merge this change into the last event\n    last = lst(cur.changes)\n    if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n      // Optimized case for simple insertion -- don't want to add\n      // new changesets for every character typed\n      last.to = changeEnd(change)\n    } else {\n      // Add new sub-event\n      cur.changes.push(historyChangeFromChange(doc, change))\n    }\n  } else {\n    // Can not be merged, start a new event.\n    let before = lst(hist.done)\n    if (!before || !before.ranges)\n      pushSelectionToHistory(doc.sel, hist.done)\n    cur = {changes: [historyChangeFromChange(doc, change)],\n           generation: hist.generation}\n    hist.done.push(cur)\n    while (hist.done.length > hist.undoDepth) {\n      hist.done.shift()\n      if (!hist.done[0].ranges) hist.done.shift()\n    }\n  }\n  hist.done.push(selAfter)\n  hist.generation = ++hist.maxGeneration\n  hist.lastModTime = hist.lastSelTime = time\n  hist.lastOp = hist.lastSelOp = opId\n  hist.lastOrigin = hist.lastSelOrigin = change.origin\n\n  if (!last) signal(doc, \"historyAdded\")\n}\n\nfunction selectionEventCanBeMerged(doc, origin, prev, sel) {\n  let ch = origin.charAt(0)\n  return ch == \"*\" ||\n    ch == \"+\" &&\n    prev.ranges.length == sel.ranges.length &&\n    prev.somethingSelected() == sel.somethingSelected() &&\n    new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n}\n\n// Called whenever the selection changes, sets the new selection as\n// the pending selection in the history, and pushes the old pending\n// selection into the 'done' array when it was significantly\n// different (in number of selected ranges, emptiness, or time).\nexport function addSelectionToHistory(doc, sel, opId, options) {\n  let hist = doc.history, origin = options && options.origin\n\n  // A new event is started when the previous origin does not match\n  // the current, or the origins don't allow matching. Origins\n  // starting with * are always merged, those starting with + are\n  // merged when similar and close together in time.\n  if (opId == hist.lastSelOp ||\n      (origin && hist.lastSelOrigin == origin &&\n       (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n        selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n    hist.done[hist.done.length - 1] = sel\n  else\n    pushSelectionToHistory(sel, hist.done)\n\n  hist.lastSelTime = +new Date\n  hist.lastSelOrigin = origin\n  hist.lastSelOp = opId\n  if (options && options.clearRedo !== false)\n    clearSelectionEvents(hist.undone)\n}\n\nexport function pushSelectionToHistory(sel, dest) {\n  let top = lst(dest)\n  if (!(top && top.ranges && top.equals(sel)))\n    dest.push(sel)\n}\n\n// Used to store marked span information in the history.\nfunction attachLocalSpans(doc, change, from, to) {\n  let existing = change[\"spans_\" + doc.id], n = 0\n  doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), line => {\n    if (line.markedSpans)\n      (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans\n    ++n\n  })\n}\n\n// When un/re-doing restores text containing marked spans, those\n// that have been explicitly cleared should not be restored.\nfunction removeClearedSpans(spans) {\n  if (!spans) return null\n  let out\n  for (let i = 0; i < spans.length; ++i) {\n    if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i) }\n    else if (out) out.push(spans[i])\n  }\n  return !out ? spans : out.length ? out : null\n}\n\n// Retrieve and filter the old marked spans stored in a change event.\nfunction getOldSpans(doc, change) {\n  let found = change[\"spans_\" + doc.id]\n  if (!found) return null\n  let nw = []\n  for (let i = 0; i < change.text.length; ++i)\n    nw.push(removeClearedSpans(found[i]))\n  return nw\n}\n\n// Used for un/re-doing changes from the history. Combines the\n// result of computing the existing spans with the set of spans that\n// existed in the history (so that deleting around a span and then\n// undoing brings back the span).\nexport function mergeOldSpans(doc, change) {\n  let old = getOldSpans(doc, change)\n  let stretched = stretchSpansOverChange(doc, change)\n  if (!old) return stretched\n  if (!stretched) return old\n\n  for (let i = 0; i < old.length; ++i) {\n    let oldCur = old[i], stretchCur = stretched[i]\n    if (oldCur && stretchCur) {\n      spans: for (let j = 0; j < stretchCur.length; ++j) {\n        let span = stretchCur[j]\n        for (let k = 0; k < oldCur.length; ++k)\n          if (oldCur[k].marker == span.marker) continue spans\n        oldCur.push(span)\n      }\n    } else if (stretchCur) {\n      old[i] = stretchCur\n    }\n  }\n  return old\n}\n\n// Used both to provide a JSON-safe object in .getHistory, and, when\n// detaching a document, to split the history in two\nexport function copyHistoryArray(events, newGroup, instantiateSel) {\n  let copy = []\n  for (let i = 0; i < events.length; ++i) {\n    let event = events[i]\n    if (event.ranges) {\n      copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event)\n      continue\n    }\n    let changes = event.changes, newChanges = []\n    copy.push({changes: newChanges})\n    for (let j = 0; j < changes.length; ++j) {\n      let change = changes[j], m\n      newChanges.push({from: change.from, to: change.to, text: change.text})\n      if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\\d+)$/)) {\n        if (indexOf(newGroup, Number(m[1])) > -1) {\n          lst(newChanges)[prop] = change[prop]\n          delete change[prop]\n        }\n      }\n    }\n  }\n  return copy\n}\n","import { signalLater } from \"../util/operation_group.js\"\nimport { ensureCursorVisible } from \"../display/scrolling.js\"\nimport { clipPos, cmp, Pos } from \"../line/pos.js\"\nimport { getLine } from \"../line/utils_line.js\"\nimport { hasHandler, signal, signalCursorActivity } from \"../util/event.js\"\nimport { lst, sel_dontScroll } from \"../util/misc.js\"\n\nimport { addSelectionToHistory } from \"./history.js\"\nimport { normalizeSelection, Range, Selection, simpleSelection } from \"./selection.js\"\n\n// The 'scroll' parameter given to many of these indicated whether\n// the new cursor position should be scrolled into view after\n// modifying the selection.\n\n// If shift is held or the extend flag is set, extends a range to\n// include a given position (and optionally a second position).\n// Otherwise, simply returns the range between the given positions.\n// Used for cursor motion and such.\nexport function extendRange(range, head, other, extend) {\n  if (extend) {\n    let anchor = range.anchor\n    if (other) {\n      let posBefore = cmp(head, anchor) < 0\n      if (posBefore != (cmp(other, anchor) < 0)) {\n        anchor = head\n        head = other\n      } else if (posBefore != (cmp(head, other) < 0)) {\n        head = other\n      }\n    }\n    return new Range(anchor, head)\n  } else {\n    return new Range(other || head, head)\n  }\n}\n\n// Extend the primary selection range, discard the rest.\nexport function extendSelection(doc, head, other, options, extend) {\n  if (extend == null) extend = doc.cm && (doc.cm.display.shift || doc.extend)\n  setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options)\n}\n\n// Extend all selections (pos is an array of selections with length\n// equal the number of selections)\nexport function extendSelections(doc, heads, options) {\n  let out = []\n  let extend = doc.cm && (doc.cm.display.shift || doc.extend)\n  for (let i = 0; i < doc.sel.ranges.length; i++)\n    out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend)\n  let newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  setSelection(doc, newSel, options)\n}\n\n// Updates a single range in the selection.\nexport function replaceOneSelection(doc, i, range, options) {\n  let ranges = doc.sel.ranges.slice(0)\n  ranges[i] = range\n  setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options)\n}\n\n// Reset the selection to a single range.\nexport function setSimpleSelection(doc, anchor, head, options) {\n  setSelection(doc, simpleSelection(anchor, head), options)\n}\n\n// Give beforeSelectionChange handlers a change to influence a\n// selection update.\nfunction filterSelectionChange(doc, sel, options) {\n  let obj = {\n    ranges: sel.ranges,\n    update: function(ranges) {\n      this.ranges = []\n      for (let i = 0; i < ranges.length; i++)\n        this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                   clipPos(doc, ranges[i].head))\n    },\n    origin: options && options.origin\n  }\n  signal(doc, \"beforeSelectionChange\", doc, obj)\n  if (doc.cm) signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj)\n  if (obj.ranges != sel.ranges) return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1)\n  else return sel\n}\n\nexport function setSelectionReplaceHistory(doc, sel, options) {\n  let done = doc.history.done, last = lst(done)\n  if (last && last.ranges) {\n    done[done.length - 1] = sel\n    setSelectionNoUndo(doc, sel, options)\n  } else {\n    setSelection(doc, sel, options)\n  }\n}\n\n// Set a new selection.\nexport function setSelection(doc, sel, options) {\n  setSelectionNoUndo(doc, sel, options)\n  addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options)\n}\n\nexport function setSelectionNoUndo(doc, sel, options) {\n  if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n    sel = filterSelectionChange(doc, sel, options)\n\n  let bias = options && options.bias ||\n    (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1)\n  setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true))\n\n  if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\")\n    ensureCursorVisible(doc.cm)\n}\n\nfunction setSelectionInner(doc, sel) {\n  if (sel.equals(doc.sel)) return\n\n  doc.sel = sel\n\n  if (doc.cm) {\n    doc.cm.curOp.updateInput = 1\n    doc.cm.curOp.selectionChanged = true\n    signalCursorActivity(doc.cm)\n  }\n  signalLater(doc, \"cursorActivity\", doc)\n}\n\n// Verify that the selection does not partially select any atomic\n// marked ranges.\nexport function reCheckSelection(doc) {\n  setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false))\n}\n\n// Return a selection that does not partially select any atomic\n// ranges.\nfunction skipAtomicInSelection(doc, sel, bias, mayClear) {\n  let out\n  for (let i = 0; i < sel.ranges.length; i++) {\n    let range = sel.ranges[i]\n    let old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i]\n    let newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear)\n    let newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear)\n    if (out || newAnchor != range.anchor || newHead != range.head) {\n      if (!out) out = sel.ranges.slice(0, i)\n      out[i] = new Range(newAnchor, newHead)\n    }\n  }\n  return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n}\n\nfunction skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n  let line = getLine(doc, pos.line)\n  if (line.markedSpans) for (let i = 0; i < line.markedSpans.length; ++i) {\n    let sp = line.markedSpans[i], m = sp.marker\n\n    // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n    // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n    // is with selectLeft/Right\n    let preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft\n    let preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight\n\n    if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n        (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n      if (mayClear) {\n        signal(m, \"beforeCursorEnter\")\n        if (m.explicitlyCleared) {\n          if (!line.markedSpans) break\n          else {--i; continue}\n        }\n      }\n      if (!m.atomic) continue\n\n      if (oldPos) {\n        let near = m.find(dir < 0 ? 1 : -1), diff\n        if (dir < 0 ? preventCursorRight : preventCursorLeft)\n          near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null)\n        if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n          return skipAtomicInner(doc, near, pos, dir, mayClear)\n      }\n\n      let far = m.find(dir < 0 ? -1 : 1)\n      if (dir < 0 ? preventCursorLeft : preventCursorRight)\n        far = movePos(doc, far, dir, far.line == pos.line ? line : null)\n      return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n    }\n  }\n  return pos\n}\n\n// Ensure a given position is not inside an atomic range.\nexport function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n  let dir = bias || 1\n  let found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n      skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true))\n  if (!found) {\n    doc.cantEdit = true\n    return Pos(doc.first, 0)\n  }\n  return found\n}\n\nfunction movePos(doc, pos, dir, line) {\n  if (dir < 0 && pos.ch == 0) {\n    if (pos.line > doc.first) return clipPos(doc, Pos(pos.line - 1))\n    else return null\n  } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n    if (pos.line < doc.first + doc.size - 1) return Pos(pos.line + 1, 0)\n    else return null\n  } else {\n    return new Pos(pos.line, pos.ch + dir)\n  }\n}\n\nexport function selectAll(cm) {\n  cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll)\n}\n","import { retreatFrontier } from \"../line/highlight.js\"\nimport { startWorker } from \"../display/highlight_worker.js\"\nimport { operation } from \"../display/operations.js\"\nimport { regChange, regLineChange } from \"../display/view_tracking.js\"\nimport { clipLine, clipPos, cmp, Pos } from \"../line/pos.js\"\nimport { sawReadOnlySpans } from \"../line/saw_special_spans.js\"\nimport { lineLength, removeReadOnlyRanges, stretchSpansOverChange, visualLine } from \"../line/spans.js\"\nimport { getBetween, getLine, lineNo } from \"../line/utils_line.js\"\nimport { estimateHeight } from \"../measurement/position_measurement.js\"\nimport { hasHandler, signal, signalCursorActivity } from \"../util/event.js\"\nimport { indexOf, lst, map, sel_dontScroll } from \"../util/misc.js\"\nimport { signalLater } from \"../util/operation_group.js\"\n\nimport { changeEnd, computeSelAfterChange } from \"./change_measurement.js\"\nimport { isWholeLineUpdate, linkedDocs, updateDoc } from \"./document_data.js\"\nimport { addChangeToHistory, historyChangeFromChange, mergeOldSpans, pushSelectionToHistory } from \"./history.js\"\nimport { Range, Selection } from \"./selection.js\"\nimport { setSelection, setSelectionNoUndo, skipAtomic } from \"./selection_updates.js\"\n\n// UPDATING\n\n// Allow \"beforeChange\" event handlers to influence a change\nfunction filterChange(doc, change, update) {\n  let obj = {\n    canceled: false,\n    from: change.from,\n    to: change.to,\n    text: change.text,\n    origin: change.origin,\n    cancel: () => obj.canceled = true\n  }\n  if (update) obj.update = (from, to, text, origin) => {\n    if (from) obj.from = clipPos(doc, from)\n    if (to) obj.to = clipPos(doc, to)\n    if (text) obj.text = text\n    if (origin !== undefined) obj.origin = origin\n  }\n  signal(doc, \"beforeChange\", doc, obj)\n  if (doc.cm) signal(doc.cm, \"beforeChange\", doc.cm, obj)\n\n  if (obj.canceled) {\n    if (doc.cm) doc.cm.curOp.updateInput = 2\n    return null\n  }\n  return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n}\n\n// Apply a change to a document, and add it to the document's\n// history, and propagating it to all linked documents.\nexport function makeChange(doc, change, ignoreReadOnly) {\n  if (doc.cm) {\n    if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly)\n    if (doc.cm.state.suppressEdits) return\n  }\n\n  if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n    change = filterChange(doc, change, true)\n    if (!change) return\n  }\n\n  // Possibly split or suppress the update based on the presence\n  // of read-only spans in its range.\n  let split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to)\n  if (split) {\n    for (let i = split.length - 1; i >= 0; --i)\n      makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin})\n  } else {\n    makeChangeInner(doc, change)\n  }\n}\n\nfunction makeChangeInner(doc, change) {\n  if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) return\n  let selAfter = computeSelAfterChange(doc, change)\n  addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN)\n\n  makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change))\n  let rebased = []\n\n  linkedDocs(doc, (doc, sharedHist) => {\n    if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n      rebaseHist(doc.history, change)\n      rebased.push(doc.history)\n    }\n    makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change))\n  })\n}\n\n// Revert a change stored in a document's history.\nexport function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n  let suppress = doc.cm && doc.cm.state.suppressEdits\n  if (suppress && !allowSelectionOnly) return\n\n  let hist = doc.history, event, selAfter = doc.sel\n  let source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done\n\n  // Verify that there is a useable event (so that ctrl-z won't\n  // needlessly clear selection events)\n  let i = 0\n  for (; i < source.length; i++) {\n    event = source[i]\n    if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n      break\n  }\n  if (i == source.length) return\n  hist.lastOrigin = hist.lastSelOrigin = null\n\n  for (;;) {\n    event = source.pop()\n    if (event.ranges) {\n      pushSelectionToHistory(event, dest)\n      if (allowSelectionOnly && !event.equals(doc.sel)) {\n        setSelection(doc, event, {clearRedo: false})\n        return\n      }\n      selAfter = event\n    } else if (suppress) {\n      source.push(event)\n      return\n    } else break\n  }\n\n  // Build up a reverse change object to add to the opposite history\n  // stack (redo when undoing, and vice versa).\n  let antiChanges = []\n  pushSelectionToHistory(selAfter, dest)\n  dest.push({changes: antiChanges, generation: hist.generation})\n  hist.generation = event.generation || ++hist.maxGeneration\n\n  let filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")\n\n  for (let i = event.changes.length - 1; i >= 0; --i) {\n    let change = event.changes[i]\n    change.origin = type\n    if (filter && !filterChange(doc, change, false)) {\n      source.length = 0\n      return\n    }\n\n    antiChanges.push(historyChangeFromChange(doc, change))\n\n    let after = i ? computeSelAfterChange(doc, change) : lst(source)\n    makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change))\n    if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)})\n    let rebased = []\n\n    // Propagate to the linked documents\n    linkedDocs(doc, (doc, sharedHist) => {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change)\n        rebased.push(doc.history)\n      }\n      makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change))\n    })\n  }\n}\n\n// Sub-views need their line numbers shifted when text is added\n// above or below them in the parent document.\nfunction shiftDoc(doc, distance) {\n  if (distance == 0) return\n  doc.first += distance\n  doc.sel = new Selection(map(doc.sel.ranges, range => new Range(\n    Pos(range.anchor.line + distance, range.anchor.ch),\n    Pos(range.head.line + distance, range.head.ch)\n  )), doc.sel.primIndex)\n  if (doc.cm) {\n    regChange(doc.cm, doc.first, doc.first - distance, distance)\n    for (let d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n      regLineChange(doc.cm, l, \"gutter\")\n  }\n}\n\n// More lower-level change function, handling only a single document\n// (not linked ones).\nfunction makeChangeSingleDoc(doc, change, selAfter, spans) {\n  if (doc.cm && !doc.cm.curOp)\n    return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans)\n\n  if (change.to.line < doc.first) {\n    shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line))\n    return\n  }\n  if (change.from.line > doc.lastLine()) return\n\n  // Clip the change to the size of this doc\n  if (change.from.line < doc.first) {\n    let shift = change.text.length - 1 - (doc.first - change.from.line)\n    shiftDoc(doc, shift)\n    change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin}\n  }\n  let last = doc.lastLine()\n  if (change.to.line > last) {\n    change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin}\n  }\n\n  change.removed = getBetween(doc, change.from, change.to)\n\n  if (!selAfter) selAfter = computeSelAfterChange(doc, change)\n  if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans)\n  else updateDoc(doc, change, spans)\n  setSelectionNoUndo(doc, selAfter, sel_dontScroll)\n\n  if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n    doc.cantEdit = false\n}\n\n// Handle the interaction of a change to a document with the editor\n// that this document is part of.\nfunction makeChangeSingleDocInEditor(cm, change, spans) {\n  let doc = cm.doc, display = cm.display, from = change.from, to = change.to\n\n  let recomputeMaxLength = false, checkWidthStart = from.line\n  if (!cm.options.lineWrapping) {\n    checkWidthStart = lineNo(visualLine(getLine(doc, from.line)))\n    doc.iter(checkWidthStart, to.line + 1, line => {\n      if (line == display.maxLine) {\n        recomputeMaxLength = true\n        return true\n      }\n    })\n  }\n\n  if (doc.sel.contains(change.from, change.to) > -1)\n    signalCursorActivity(cm)\n\n  updateDoc(doc, change, spans, estimateHeight(cm))\n\n  if (!cm.options.lineWrapping) {\n    doc.iter(checkWidthStart, from.line + change.text.length, line => {\n      let len = lineLength(line)\n      if (len > display.maxLineLength) {\n        display.maxLine = line\n        display.maxLineLength = len\n        display.maxLineChanged = true\n        recomputeMaxLength = false\n      }\n    })\n    if (recomputeMaxLength) cm.curOp.updateMaxLine = true\n  }\n\n  retreatFrontier(doc, from.line)\n  startWorker(cm, 400)\n\n  let lendiff = change.text.length - (to.line - from.line) - 1\n  // Remember that these lines changed, for updating the display\n  if (change.full)\n    regChange(cm)\n  else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n    regLineChange(cm, from.line, \"text\")\n  else\n    regChange(cm, from.line, to.line + 1, lendiff)\n\n  let changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\")\n  if (changeHandler || changesHandler) {\n    let obj = {\n      from: from, to: to,\n      text: change.text,\n      removed: change.removed,\n      origin: change.origin\n    }\n    if (changeHandler) signalLater(cm, \"change\", cm, obj)\n    if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj)\n  }\n  cm.display.selForContextMenu = null\n}\n\nexport function replaceRange(doc, code, from, to, origin) {\n  if (!to) to = from\n  if (cmp(to, from) < 0) [from, to] = [to, from]\n  if (typeof code == \"string\") code = doc.splitLines(code)\n  makeChange(doc, {from, to, text: code, origin})\n}\n\n// Rebasing/resetting history to deal with externally-sourced changes\n\nfunction rebaseHistSelSingle(pos, from, to, diff) {\n  if (to < pos.line) {\n    pos.line += diff\n  } else if (from < pos.line) {\n    pos.line = from\n    pos.ch = 0\n  }\n}\n\n// Tries to rebase an array of history events given a change in the\n// document. If the change touches the same lines as the event, the\n// event, and everything 'behind' it, is discarded. If the change is\n// before the event, the event's positions are updated. Uses a\n// copy-on-write scheme for the positions, to avoid having to\n// reallocate them all on every rebase, but also avoid problems with\n// shared position objects being unsafely updated.\nfunction rebaseHistArray(array, from, to, diff) {\n  for (let i = 0; i < array.length; ++i) {\n    let sub = array[i], ok = true\n    if (sub.ranges) {\n      if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true }\n      for (let j = 0; j < sub.ranges.length; j++) {\n        rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff)\n        rebaseHistSelSingle(sub.ranges[j].head, from, to, diff)\n      }\n      continue\n    }\n    for (let j = 0; j < sub.changes.length; ++j) {\n      let cur = sub.changes[j]\n      if (to < cur.from.line) {\n        cur.from = Pos(cur.from.line + diff, cur.from.ch)\n        cur.to = Pos(cur.to.line + diff, cur.to.ch)\n      } else if (from <= cur.to.line) {\n        ok = false\n        break\n      }\n    }\n    if (!ok) {\n      array.splice(0, i + 1)\n      i = 0\n    }\n  }\n}\n\nfunction rebaseHist(hist, change) {\n  let from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1\n  rebaseHistArray(hist.done, from, to, diff)\n  rebaseHistArray(hist.undone, from, to, diff)\n}\n\n// Utility for applying a change to a line by handle or number,\n// returning the number and optionally registering the line as\n// changed.\nexport function changeLine(doc, handle, changeType, op) {\n  let no = handle, line = handle\n  if (typeof handle == \"number\") line = getLine(doc, clipLine(doc, handle))\n  else no = lineNo(handle)\n  if (no == null) return null\n  if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType)\n  return line\n}\n","import { cleanUpLine } from \"../line/line_data.js\"\nimport { indexOf } from \"../util/misc.js\"\nimport { signalLater } from \"../util/operation_group.js\"\n\n// The document is represented as a BTree consisting of leaves, with\n// chunk of lines in them, and branches, with up to ten leaves or\n// other branch nodes below them. The top node is always a branch\n// node, and is the document object itself (meaning it has\n// additional methods and properties).\n//\n// All nodes have parent links. The tree is used both to go from\n// line numbers to line objects, and to go from objects to numbers.\n// It also indexes by height, and is used to convert between height\n// and line object, and to find the total height of the document.\n//\n// See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\nexport function LeafChunk(lines) {\n  this.lines = lines\n  this.parent = null\n  let height = 0\n  for (let i = 0; i < lines.length; ++i) {\n    lines[i].parent = this\n    height += lines[i].height\n  }\n  this.height = height\n}\n\nLeafChunk.prototype = {\n  chunkSize() { return this.lines.length },\n\n  // Remove the n lines at offset 'at'.\n  removeInner(at, n) {\n    for (let i = at, e = at + n; i < e; ++i) {\n      let line = this.lines[i]\n      this.height -= line.height\n      cleanUpLine(line)\n      signalLater(line, \"delete\")\n    }\n    this.lines.splice(at, n)\n  },\n\n  // Helper used to collapse a small branch into a single leaf.\n  collapse(lines) {\n    lines.push.apply(lines, this.lines)\n  },\n\n  // Insert the given array of lines at offset 'at', count them as\n  // having the given height.\n  insertInner(at, lines, height) {\n    this.height += height\n    this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at))\n    for (let i = 0; i < lines.length; ++i) lines[i].parent = this\n  },\n\n  // Used to iterate over a part of the tree.\n  iterN(at, n, op) {\n    for (let e = at + n; at < e; ++at)\n      if (op(this.lines[at])) return true\n  }\n}\n\nexport function BranchChunk(children) {\n  this.children = children\n  let size = 0, height = 0\n  for (let i = 0; i < children.length; ++i) {\n    let ch = children[i]\n    size += ch.chunkSize(); height += ch.height\n    ch.parent = this\n  }\n  this.size = size\n  this.height = height\n  this.parent = null\n}\n\nBranchChunk.prototype = {\n  chunkSize() { return this.size },\n\n  removeInner(at, n) {\n    this.size -= n\n    for (let i = 0; i < this.children.length; ++i) {\n      let child = this.children[i], sz = child.chunkSize()\n      if (at < sz) {\n        let rm = Math.min(n, sz - at), oldHeight = child.height\n        child.removeInner(at, rm)\n        this.height -= oldHeight - child.height\n        if (sz == rm) { this.children.splice(i--, 1); child.parent = null }\n        if ((n -= rm) == 0) break\n        at = 0\n      } else at -= sz\n    }\n    // If the result is smaller than 25 lines, ensure that it is a\n    // single leaf node.\n    if (this.size - n < 25 &&\n        (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n      let lines = []\n      this.collapse(lines)\n      this.children = [new LeafChunk(lines)]\n      this.children[0].parent = this\n    }\n  },\n\n  collapse(lines) {\n    for (let i = 0; i < this.children.length; ++i) this.children[i].collapse(lines)\n  },\n\n  insertInner(at, lines, height) {\n    this.size += lines.length\n    this.height += height\n    for (let i = 0; i < this.children.length; ++i) {\n      let child = this.children[i], sz = child.chunkSize()\n      if (at <= sz) {\n        child.insertInner(at, lines, height)\n        if (child.lines && child.lines.length > 50) {\n          // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          let remaining = child.lines.length % 25 + 25\n          for (let pos = remaining; pos < child.lines.length;) {\n            let leaf = new LeafChunk(child.lines.slice(pos, pos += 25))\n            child.height -= leaf.height\n            this.children.splice(++i, 0, leaf)\n            leaf.parent = this\n          }\n          child.lines = child.lines.slice(0, remaining)\n          this.maybeSpill()\n        }\n        break\n      }\n      at -= sz\n    }\n  },\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill() {\n    if (this.children.length <= 10) return\n    let me = this\n    do {\n      let spilled = me.children.splice(me.children.length - 5, 5)\n      let sibling = new BranchChunk(spilled)\n      if (!me.parent) { // Become the parent node\n        let copy = new BranchChunk(me.children)\n        copy.parent = me\n        me.children = [copy, sibling]\n        me = copy\n     } else {\n        me.size -= sibling.size\n        me.height -= sibling.height\n        let myIndex = indexOf(me.parent.children, me)\n        me.parent.children.splice(myIndex + 1, 0, sibling)\n      }\n      sibling.parent = me.parent\n    } while (me.children.length > 10)\n    me.parent.maybeSpill()\n  },\n\n  iterN(at, n, op) {\n    for (let i = 0; i < this.children.length; ++i) {\n      let child = this.children[i], sz = child.chunkSize()\n      if (at < sz) {\n        let used = Math.min(n, sz - at)\n        if (child.iterN(at, used, op)) return true\n        if ((n -= used) == 0) break\n        at = 0\n      } else at -= sz\n    }\n  }\n}\n","import { runInOp } from \"../display/operations.js\"\nimport { addToScrollTop } from \"../display/scrolling.js\"\nimport { regLineChange } from \"../display/view_tracking.js\"\nimport { heightAtLine, lineIsHidden } from \"../line/spans.js\"\nimport { lineNo, updateLineHeight } from \"../line/utils_line.js\"\nimport { widgetHeight } from \"../measurement/widgets.js\"\nimport { changeLine } from \"./changes.js\"\nimport { eventMixin } from \"../util/event.js\"\nimport { signalLater } from \"../util/operation_group.js\"\n\n// Line widgets are block elements displayed above or below a line.\n\nexport class LineWidget {\n  constructor(doc, node, options) {\n    if (options) for (let opt in options) if (options.hasOwnProperty(opt))\n      this[opt] = options[opt]\n    this.doc = doc\n    this.node = node\n  }\n\n  clear() {\n    let cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line)\n    if (no == null || !ws) return\n    for (let i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1)\n    if (!ws.length) line.widgets = null\n    let height = widgetHeight(this)\n    updateLineHeight(line, Math.max(0, line.height - height))\n    if (cm) {\n      runInOp(cm, () => {\n        adjustScrollWhenAboveVisible(cm, line, -height)\n        regLineChange(cm, no, \"widget\")\n      })\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no)\n    }\n  }\n\n  changed() {\n    let oldH = this.height, cm = this.doc.cm, line = this.line\n    this.height = null\n    let diff = widgetHeight(this) - oldH\n    if (!diff) return\n    if (!lineIsHidden(this.doc, line)) updateLineHeight(line, line.height + diff)\n    if (cm) {\n      runInOp(cm, () => {\n        cm.curOp.forceUpdate = true\n        adjustScrollWhenAboveVisible(cm, line, diff)\n        signalLater(cm, \"lineWidgetChanged\", cm, this, lineNo(line))\n      })\n    }\n  }\n}\neventMixin(LineWidget)\n\nfunction adjustScrollWhenAboveVisible(cm, line, diff) {\n  if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n    addToScrollTop(cm, diff)\n}\n\nexport function addLineWidget(doc, handle, node, options) {\n  let widget = new LineWidget(doc, node, options)\n  let cm = doc.cm\n  if (cm && widget.noHScroll) cm.display.alignWidgets = true\n  changeLine(doc, handle, \"widget\", line => {\n    let widgets = line.widgets || (line.widgets = [])\n    if (widget.insertAt == null) widgets.push(widget)\n    else widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget)\n    widget.line = line\n    if (cm && !lineIsHidden(doc, line)) {\n      let aboveVisible = heightAtLine(line) < doc.scrollTop\n      updateLineHeight(line, line.height + widgetHeight(widget))\n      if (aboveVisible) addToScrollTop(cm, widget.height)\n      cm.curOp.forceUpdate = true\n    }\n    return true\n  })\n  if (cm) signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle))\n  return widget\n}\n","import { eltP } from \"../util/dom.js\"\nimport { eventMixin, hasHandler, on } from \"../util/event.js\"\nimport { endOperation, operation, runInOp, startOperation } from \"../display/operations.js\"\nimport { clipPos, cmp, Pos } from \"../line/pos.js\"\nimport { lineNo, updateLineHeight } from \"../line/utils_line.js\"\nimport { clearLineMeasurementCacheFor, findViewForLine, textHeight } from \"../measurement/position_measurement.js\"\nimport { seeReadOnlySpans, seeCollapsedSpans } from \"../line/saw_special_spans.js\"\nimport { addMarkedSpan, conflictingCollapsedRange, getMarkedSpanFor, lineIsHidden, lineLength, MarkedSpan, removeMarkedSpan, visualLine } from \"../line/spans.js\"\nimport { copyObj, indexOf, lst } from \"../util/misc.js\"\nimport { signalLater } from \"../util/operation_group.js\"\nimport { widgetHeight } from \"../measurement/widgets.js\"\nimport { regChange, regLineChange } from \"../display/view_tracking.js\"\n\nimport { linkedDocs } from \"./document_data.js\"\nimport { addChangeToHistory } from \"./history.js\"\nimport { reCheckSelection } from \"./selection_updates.js\"\n\n// TEXTMARKERS\n\n// Created with markText and setBookmark methods. A TextMarker is a\n// handle that can be used to clear or find a marked position in the\n// document. Line objects hold arrays (markedSpans) containing\n// {from, to, marker} object pointing to such marker objects, and\n// indicating that such a marker is present on that line. Multiple\n// lines may point to the same marker when it spans across lines.\n// The spans will have null for their from/to properties when the\n// marker continues beyond the start/end of the line. Markers have\n// links back to the lines they currently touch.\n\n// Collapsed markers have unique ids, in order to be able to order\n// them, which is needed for uniquely determining an outer marker\n// when they overlap (they may nest, but not partially overlap).\nlet nextMarkerId = 0\n\nexport class TextMarker {\n  constructor(doc, type) {\n    this.lines = []\n    this.type = type\n    this.doc = doc\n    this.id = ++nextMarkerId\n  }\n\n  // Clear the marker.\n  clear() {\n    if (this.explicitlyCleared) return\n    let cm = this.doc.cm, withOp = cm && !cm.curOp\n    if (withOp) startOperation(cm)\n    if (hasHandler(this, \"clear\")) {\n      let found = this.find()\n      if (found) signalLater(this, \"clear\", found.from, found.to)\n    }\n    let min = null, max = null\n    for (let i = 0; i < this.lines.length; ++i) {\n      let line = this.lines[i]\n      let span = getMarkedSpanFor(line.markedSpans, this)\n      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), \"text\")\n      else if (cm) {\n        if (span.to != null) max = lineNo(line)\n        if (span.from != null) min = lineNo(line)\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span)\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        updateLineHeight(line, textHeight(cm.display))\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) for (let i = 0; i < this.lines.length; ++i) {\n      let visual = visualLine(this.lines[i]), len = lineLength(visual)\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual\n        cm.display.maxLineLength = len\n        cm.display.maxLineChanged = true\n      }\n    }\n\n    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1)\n    this.lines.length = 0\n    this.explicitlyCleared = true\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false\n      if (cm) reCheckSelection(cm.doc)\n    }\n    if (cm) signalLater(cm, \"markerCleared\", cm, this, min, max)\n    if (withOp) endOperation(cm)\n    if (this.parent) this.parent.clear()\n  }\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  find(side, lineObj) {\n    if (side == null && this.type == \"bookmark\") side = 1\n    let from, to\n    for (let i = 0; i < this.lines.length; ++i) {\n      let line = this.lines[i]\n      let span = getMarkedSpanFor(line.markedSpans, this)\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from)\n        if (side == -1) return from\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to)\n        if (side == 1) return to\n      }\n    }\n    return from && {from: from, to: to}\n  }\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  changed() {\n    let pos = this.find(-1, true), widget = this, cm = this.doc.cm\n    if (!pos || !cm) return\n    runInOp(cm, () => {\n      let line = pos.line, lineN = lineNo(pos.line)\n      let view = findViewForLine(cm, lineN)\n      if (view) {\n        clearLineMeasurementCacheFor(view)\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true\n      }\n      cm.curOp.updateMaxLine = true\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        let oldHeight = widget.height\n        widget.height = null\n        let dHeight = widgetHeight(widget) - oldHeight\n        if (dHeight)\n          updateLineHeight(line, line.height + dHeight)\n      }\n      signalLater(cm, \"markerChanged\", cm, this)\n    })\n  }\n\n  attachLine(line) {\n    if (!this.lines.length && this.doc.cm) {\n      let op = this.doc.cm.curOp\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this)\n    }\n    this.lines.push(line)\n  }\n\n  detachLine(line) {\n    this.lines.splice(indexOf(this.lines, line), 1)\n    if (!this.lines.length && this.doc.cm) {\n      let op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this)\n    }\n  }\n}\neventMixin(TextMarker)\n\n// Create a marker, wire it up to the right lines, and\nexport function markText(doc, from, to, options, type) {\n  // Shared markers (across linked documents) are handled separately\n  // (markTextShared will call out to this again, once per\n  // document).\n  if (options && options.shared) return markTextShared(doc, from, to, options, type)\n  // Ensure we are in an operation.\n  if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type)\n\n  let marker = new TextMarker(doc, type), diff = cmp(from, to)\n  if (options) copyObj(options, marker, false)\n  // Don't connect empty markers unless clearWhenEmpty is false\n  if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n    return marker\n  if (marker.replacedWith) {\n    // Showing up as a widget implies collapsed (widget replaces text)\n    marker.collapsed = true\n    marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\")\n    if (!options.handleMouseEvents) marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\")\n    if (options.insertLeft) marker.widgetNode.insertLeft = true\n  }\n  if (marker.collapsed) {\n    if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n        from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n      throw new Error(\"Inserting collapsed marker partially overlapping an existing one\")\n    seeCollapsedSpans()\n  }\n\n  if (marker.addToHistory)\n    addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN)\n\n  let curLine = from.line, cm = doc.cm, updateMaxLine\n  doc.iter(curLine, to.line + 1, line => {\n    if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n      updateMaxLine = true\n    if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0)\n    addMarkedSpan(line, new MarkedSpan(marker,\n                                       curLine == from.line ? from.ch : null,\n                                       curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp)\n    ++curLine\n  })\n  // lineIsHidden depends on the presence of the spans, so needs a second pass\n  if (marker.collapsed) doc.iter(from.line, to.line + 1, line => {\n    if (lineIsHidden(doc, line)) updateLineHeight(line, 0)\n  })\n\n  if (marker.clearOnEnter) on(marker, \"beforeCursorEnter\", () => marker.clear())\n\n  if (marker.readOnly) {\n    seeReadOnlySpans()\n    if (doc.history.done.length || doc.history.undone.length)\n      doc.clearHistory()\n  }\n  if (marker.collapsed) {\n    marker.id = ++nextMarkerId\n    marker.atomic = true\n  }\n  if (cm) {\n    // Sync editor state\n    if (updateMaxLine) cm.curOp.updateMaxLine = true\n    if (marker.collapsed)\n      regChange(cm, from.line, to.line + 1)\n    else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n             marker.attributes || marker.title)\n      for (let i = from.line; i <= to.line; i++) regLineChange(cm, i, \"text\")\n    if (marker.atomic) reCheckSelection(cm.doc)\n    signalLater(cm, \"markerAdded\", cm, marker)\n  }\n  return marker\n}\n\n// SHARED TEXTMARKERS\n\n// A shared marker spans multiple linked documents. It is\n// implemented as a meta-marker-object controlling multiple normal\n// markers.\nexport class SharedTextMarker {\n  constructor(markers, primary) {\n    this.markers = markers\n    this.primary = primary\n    for (let i = 0; i < markers.length; ++i)\n      markers[i].parent = this\n  }\n\n  clear() {\n    if (this.explicitlyCleared) return\n    this.explicitlyCleared = true\n    for (let i = 0; i < this.markers.length; ++i)\n      this.markers[i].clear()\n    signalLater(this, \"clear\")\n  }\n\n  find(side, lineObj) {\n    return this.primary.find(side, lineObj)\n  }\n}\neventMixin(SharedTextMarker)\n\nfunction markTextShared(doc, from, to, options, type) {\n  options = copyObj(options)\n  options.shared = false\n  let markers = [markText(doc, from, to, options, type)], primary = markers[0]\n  let widget = options.widgetNode\n  linkedDocs(doc, doc => {\n    if (widget) options.widgetNode = widget.cloneNode(true)\n    markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type))\n    for (let i = 0; i < doc.linked.length; ++i)\n      if (doc.linked[i].isParent) return\n    primary = lst(markers)\n  })\n  return new SharedTextMarker(markers, primary)\n}\n\nexport function findSharedMarkers(doc) {\n  return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), m => m.parent)\n}\n\nexport function copySharedMarkers(doc, markers) {\n  for (let i = 0; i < markers.length; i++) {\n    let marker = markers[i], pos = marker.find()\n    let mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to)\n    if (cmp(mFrom, mTo)) {\n      let subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type)\n      marker.markers.push(subMark)\n      subMark.parent = marker\n    }\n  }\n}\n\nexport function detachSharedMarkers(markers) {\n  for (let i = 0; i < markers.length; i++) {\n    let marker = markers[i], linked = [marker.primary.doc]\n    linkedDocs(marker.primary.doc, d => linked.push(d))\n    for (let j = 0; j < marker.markers.length; j++) {\n      let subMarker = marker.markers[j]\n      if (indexOf(linked, subMarker.doc) == -1) {\n        subMarker.parent = null\n        marker.markers.splice(j--, 1)\n      }\n    }\n  }\n}\n","import CodeMirror from \"../edit/CodeMirror.js\"\nimport { docMethodOp } from \"../display/operations.js\"\nimport { Line } from \"../line/line_data.js\"\nimport { clipPos, clipPosArray, Pos } from \"../line/pos.js\"\nimport { visualLine } from \"../line/spans.js\"\nimport { getBetween, getLine, getLines, isLine, lineNo } from \"../line/utils_line.js\"\nimport { classTest } from \"../util/dom.js\"\nimport { splitLinesAuto } from \"../util/feature_detection.js\"\nimport { createObj, map, isEmpty, sel_dontScroll } from \"../util/misc.js\"\nimport { ensureCursorVisible, scrollToCoords } from \"../display/scrolling.js\"\n\nimport { changeLine, makeChange, makeChangeFromHistory, replaceRange } from \"./changes.js\"\nimport { computeReplacedSel } from \"./change_measurement.js\"\nimport { BranchChunk, LeafChunk } from \"./chunk.js\"\nimport { directionChanged, linkedDocs, updateDoc } from \"./document_data.js\"\nimport { copyHistoryArray, History } from \"./history.js\"\nimport { addLineWidget } from \"./line_widget.js\"\nimport { copySharedMarkers, detachSharedMarkers, findSharedMarkers, markText } from \"./mark_text.js\"\nimport { normalizeSelection, Range, simpleSelection } from \"./selection.js\"\nimport { extendSelection, extendSelections, setSelection, setSelectionReplaceHistory, setSimpleSelection } from \"./selection_updates.js\"\n\nlet nextDocId = 0\nlet Doc = function(text, mode, firstLine, lineSep, direction) {\n  if (!(this instanceof Doc)) return new Doc(text, mode, firstLine, lineSep, direction)\n  if (firstLine == null) firstLine = 0\n\n  BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])])\n  this.first = firstLine\n  this.scrollTop = this.scrollLeft = 0\n  this.cantEdit = false\n  this.cleanGeneration = 1\n  this.modeFrontier = this.highlightFrontier = firstLine\n  let start = Pos(firstLine, 0)\n  this.sel = simpleSelection(start)\n  this.history = new History(null)\n  this.id = ++nextDocId\n  this.modeOption = mode\n  this.lineSep = lineSep\n  this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\"\n  this.extend = false\n\n  if (typeof text == \"string\") text = this.splitLines(text)\n  updateDoc(this, {from: start, to: start, text: text})\n  setSelection(this, simpleSelection(start), sel_dontScroll)\n}\n\nDoc.prototype = createObj(BranchChunk.prototype, {\n  constructor: Doc,\n  // Iterate over the document. Supports two forms -- with only one\n  // argument, it calls that for each line in the document. With\n  // three, it iterates over the range given by the first two (with\n  // the second being non-inclusive).\n  iter: function(from, to, op) {\n    if (op) this.iterN(from - this.first, to - from, op)\n    else this.iterN(this.first, this.first + this.size, from)\n  },\n\n  // Non-public interface for adding and removing lines.\n  insert: function(at, lines) {\n    let height = 0\n    for (let i = 0; i < lines.length; ++i) height += lines[i].height\n    this.insertInner(at - this.first, lines, height)\n  },\n  remove: function(at, n) { this.removeInner(at - this.first, n) },\n\n  // From here, the methods are part of the public interface. Most\n  // are also available from CodeMirror (editor) instances.\n\n  getValue: function(lineSep) {\n    let lines = getLines(this, this.first, this.first + this.size)\n    if (lineSep === false) return lines\n    return lines.join(lineSep || this.lineSeparator())\n  },\n  setValue: docMethodOp(function(code) {\n    let top = Pos(this.first, 0), last = this.first + this.size - 1\n    makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                      text: this.splitLines(code), origin: \"setValue\", full: true}, true)\n    if (this.cm) scrollToCoords(this.cm, 0, 0)\n    setSelection(this, simpleSelection(top), sel_dontScroll)\n  }),\n  replaceRange: function(code, from, to, origin) {\n    from = clipPos(this, from)\n    to = to ? clipPos(this, to) : from\n    replaceRange(this, code, from, to, origin)\n  },\n  getRange: function(from, to, lineSep) {\n    let lines = getBetween(this, clipPos(this, from), clipPos(this, to))\n    if (lineSep === false) return lines\n    if (lineSep === '') return lines.join('')\n    return lines.join(lineSep || this.lineSeparator())\n  },\n\n  getLine: function(line) {let l = this.getLineHandle(line); return l && l.text},\n\n  getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line)},\n  getLineNumber: function(line) {return lineNo(line)},\n\n  getLineHandleVisualStart: function(line) {\n    if (typeof line == \"number\") line = getLine(this, line)\n    return visualLine(line)\n  },\n\n  lineCount: function() {return this.size},\n  firstLine: function() {return this.first},\n  lastLine: function() {return this.first + this.size - 1},\n\n  clipPos: function(pos) {return clipPos(this, pos)},\n\n  getCursor: function(start) {\n    let range = this.sel.primary(), pos\n    if (start == null || start == \"head\") pos = range.head\n    else if (start == \"anchor\") pos = range.anchor\n    else if (start == \"end\" || start == \"to\" || start === false) pos = range.to()\n    else pos = range.from()\n    return pos\n  },\n  listSelections: function() { return this.sel.ranges },\n  somethingSelected: function() {return this.sel.somethingSelected()},\n\n  setCursor: docMethodOp(function(line, ch, options) {\n    setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options)\n  }),\n  setSelection: docMethodOp(function(anchor, head, options) {\n    setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options)\n  }),\n  extendSelection: docMethodOp(function(head, other, options) {\n    extendSelection(this, clipPos(this, head), other && clipPos(this, other), options)\n  }),\n  extendSelections: docMethodOp(function(heads, options) {\n    extendSelections(this, clipPosArray(this, heads), options)\n  }),\n  extendSelectionsBy: docMethodOp(function(f, options) {\n    let heads = map(this.sel.ranges, f)\n    extendSelections(this, clipPosArray(this, heads), options)\n  }),\n  setSelections: docMethodOp(function(ranges, primary, options) {\n    if (!ranges.length) return\n    let out = []\n    for (let i = 0; i < ranges.length; i++)\n      out[i] = new Range(clipPos(this, ranges[i].anchor),\n                         clipPos(this, ranges[i].head || ranges[i].anchor))\n    if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex)\n    setSelection(this, normalizeSelection(this.cm, out, primary), options)\n  }),\n  addSelection: docMethodOp(function(anchor, head, options) {\n    let ranges = this.sel.ranges.slice(0)\n    ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)))\n    setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options)\n  }),\n\n  getSelection: function(lineSep) {\n    let ranges = this.sel.ranges, lines\n    for (let i = 0; i < ranges.length; i++) {\n      let sel = getBetween(this, ranges[i].from(), ranges[i].to())\n      lines = lines ? lines.concat(sel) : sel\n    }\n    if (lineSep === false) return lines\n    else return lines.join(lineSep || this.lineSeparator())\n  },\n  getSelections: function(lineSep) {\n    let parts = [], ranges = this.sel.ranges\n    for (let i = 0; i < ranges.length; i++) {\n      let sel = getBetween(this, ranges[i].from(), ranges[i].to())\n      if (lineSep !== false) sel = sel.join(lineSep || this.lineSeparator())\n      parts[i] = sel\n    }\n    return parts\n  },\n  replaceSelection: function(code, collapse, origin) {\n    let dup = []\n    for (let i = 0; i < this.sel.ranges.length; i++)\n      dup[i] = code\n    this.replaceSelections(dup, collapse, origin || \"+input\")\n  },\n  replaceSelections: docMethodOp(function(code, collapse, origin) {\n    let changes = [], sel = this.sel\n    for (let i = 0; i < sel.ranges.length; i++) {\n      let range = sel.ranges[i]\n      changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin}\n    }\n    let newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse)\n    for (let i = changes.length - 1; i >= 0; i--)\n      makeChange(this, changes[i])\n    if (newSel) setSelectionReplaceHistory(this, newSel)\n    else if (this.cm) ensureCursorVisible(this.cm)\n  }),\n  undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\")}),\n  redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\")}),\n  undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true)}),\n  redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true)}),\n\n  setExtending: function(val) {this.extend = val},\n  getExtending: function() {return this.extend},\n\n  historySize: function() {\n    let hist = this.history, done = 0, undone = 0\n    for (let i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done\n    for (let i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone\n    return {undo: done, redo: undone}\n  },\n  clearHistory: function() {\n    this.history = new History(this.history)\n    linkedDocs(this, doc => doc.history = this.history, true)\n  },\n\n  markClean: function() {\n    this.cleanGeneration = this.changeGeneration(true)\n  },\n  changeGeneration: function(forceSplit) {\n    if (forceSplit)\n      this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null\n    return this.history.generation\n  },\n  isClean: function (gen) {\n    return this.history.generation == (gen || this.cleanGeneration)\n  },\n\n  getHistory: function() {\n    return {done: copyHistoryArray(this.history.done),\n            undone: copyHistoryArray(this.history.undone)}\n  },\n  setHistory: function(histData) {\n    let hist = this.history = new History(this.history)\n    hist.done = copyHistoryArray(histData.done.slice(0), null, true)\n    hist.undone = copyHistoryArray(histData.undone.slice(0), null, true)\n  },\n\n  setGutterMarker: docMethodOp(function(line, gutterID, value) {\n    return changeLine(this, line, \"gutter\", line => {\n      let markers = line.gutterMarkers || (line.gutterMarkers = {})\n      markers[gutterID] = value\n      if (!value && isEmpty(markers)) line.gutterMarkers = null\n      return true\n    })\n  }),\n\n  clearGutter: docMethodOp(function(gutterID) {\n    this.iter(line => {\n      if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n        changeLine(this, line, \"gutter\", () => {\n          line.gutterMarkers[gutterID] = null\n          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null\n          return true\n        })\n      }\n    })\n  }),\n\n  lineInfo: function(line) {\n    let n\n    if (typeof line == \"number\") {\n      if (!isLine(this, line)) return null\n      n = line\n      line = getLine(this, line)\n      if (!line) return null\n    } else {\n      n = lineNo(line)\n      if (n == null) return null\n    }\n    return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n            textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n            widgets: line.widgets}\n  },\n\n  addLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", line => {\n      let prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\"\n      if (!line[prop]) line[prop] = cls\n      else if (classTest(cls).test(line[prop])) return false\n      else line[prop] += \" \" + cls\n      return true\n    })\n  }),\n  removeLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", line => {\n      let prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\"\n      let cur = line[prop]\n      if (!cur) return false\n      else if (cls == null) line[prop] = null\n      else {\n        let found = cur.match(classTest(cls))\n        if (!found) return false\n        let end = found.index + found[0].length\n        line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null\n      }\n      return true\n    })\n  }),\n\n  addLineWidget: docMethodOp(function(handle, node, options) {\n    return addLineWidget(this, handle, node, options)\n  }),\n  removeLineWidget: function(widget) { widget.clear() },\n\n  markText: function(from, to, options) {\n    return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n  },\n  setBookmark: function(pos, options) {\n    let realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                    insertLeft: options && options.insertLeft,\n                    clearWhenEmpty: false, shared: options && options.shared,\n                    handleMouseEvents: options && options.handleMouseEvents}\n    pos = clipPos(this, pos)\n    return markText(this, pos, pos, realOpts, \"bookmark\")\n  },\n  findMarksAt: function(pos) {\n    pos = clipPos(this, pos)\n    let markers = [], spans = getLine(this, pos.line).markedSpans\n    if (spans) for (let i = 0; i < spans.length; ++i) {\n      let span = spans[i]\n      if ((span.from == null || span.from <= pos.ch) &&\n          (span.to == null || span.to >= pos.ch))\n        markers.push(span.marker.parent || span.marker)\n    }\n    return markers\n  },\n  findMarks: function(from, to, filter) {\n    from = clipPos(this, from); to = clipPos(this, to)\n    let found = [], lineNo = from.line\n    this.iter(from.line, to.line + 1, line => {\n      let spans = line.markedSpans\n      if (spans) for (let i = 0; i < spans.length; i++) {\n        let span = spans[i]\n        if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n              span.from == null && lineNo != from.line ||\n              span.from != null && lineNo == to.line && span.from >= to.ch) &&\n            (!filter || filter(span.marker)))\n          found.push(span.marker.parent || span.marker)\n      }\n      ++lineNo\n    })\n    return found\n  },\n  getAllMarks: function() {\n    let markers = []\n    this.iter(line => {\n      let sps = line.markedSpans\n      if (sps) for (let i = 0; i < sps.length; ++i)\n        if (sps[i].from != null) markers.push(sps[i].marker)\n    })\n    return markers\n  },\n\n  posFromIndex: function(off) {\n    let ch, lineNo = this.first, sepSize = this.lineSeparator().length\n    this.iter(line => {\n      let sz = line.text.length + sepSize\n      if (sz > off) { ch = off; return true }\n      off -= sz\n      ++lineNo\n    })\n    return clipPos(this, Pos(lineNo, ch))\n  },\n  indexFromPos: function (coords) {\n    coords = clipPos(this, coords)\n    let index = coords.ch\n    if (coords.line < this.first || coords.ch < 0) return 0\n    let sepSize = this.lineSeparator().length\n    this.iter(this.first, coords.line, line => { // iter aborts when callback returns a truthy value\n      index += line.text.length + sepSize\n    })\n    return index\n  },\n\n  copy: function(copyHistory) {\n    let doc = new Doc(getLines(this, this.first, this.first + this.size),\n                      this.modeOption, this.first, this.lineSep, this.direction)\n    doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft\n    doc.sel = this.sel\n    doc.extend = false\n    if (copyHistory) {\n      doc.history.undoDepth = this.history.undoDepth\n      doc.setHistory(this.getHistory())\n    }\n    return doc\n  },\n\n  linkedDoc: function(options) {\n    if (!options) options = {}\n    let from = this.first, to = this.first + this.size\n    if (options.from != null && options.from > from) from = options.from\n    if (options.to != null && options.to < to) to = options.to\n    let copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction)\n    if (options.sharedHist) copy.history = this.history\n    ;(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist})\n    copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}]\n    copySharedMarkers(copy, findSharedMarkers(this))\n    return copy\n  },\n  unlinkDoc: function(other) {\n    if (other instanceof CodeMirror) other = other.doc\n    if (this.linked) for (let i = 0; i < this.linked.length; ++i) {\n      let link = this.linked[i]\n      if (link.doc != other) continue\n      this.linked.splice(i, 1)\n      other.unlinkDoc(this)\n      detachSharedMarkers(findSharedMarkers(this))\n      break\n    }\n    // If the histories were shared, split them again\n    if (other.history == this.history) {\n      let splitIds = [other.id]\n      linkedDocs(other, doc => splitIds.push(doc.id), true)\n      other.history = new History(null)\n      other.history.done = copyHistoryArray(this.history.done, splitIds)\n      other.history.undone = copyHistoryArray(this.history.undone, splitIds)\n    }\n  },\n  iterLinkedDocs: function(f) {linkedDocs(this, f)},\n\n  getMode: function() {return this.mode},\n  getEditor: function() {return this.cm},\n\n  splitLines: function(str) {\n    if (this.lineSep) return str.split(this.lineSep)\n    return splitLinesAuto(str)\n  },\n  lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n  setDirection: docMethodOp(function (dir) {\n    if (dir != \"rtl\") dir = \"ltr\"\n    if (dir == this.direction) return\n    this.direction = dir\n    this.iter(line => line.order = null)\n    if (this.cm) directionChanged(this.cm)\n  })\n})\n\n// Public alias.\nDoc.prototype.eachLine = Doc.prototype.iter\n\nexport default Doc\n","import { drawSelectionCursor } from \"../display/selection.js\"\nimport { operation } from \"../display/operations.js\"\nimport { clipPos } from \"../line/pos.js\"\nimport { posFromMouse } from \"../measurement/position_measurement.js\"\nimport { eventInWidget } from \"../measurement/widgets.js\"\nimport { makeChange, replaceRange } from \"../model/changes.js\"\nimport { changeEnd } from \"../model/change_measurement.js\"\nimport { simpleSelection } from \"../model/selection.js\"\nimport { setSelectionNoUndo, setSelectionReplaceHistory } from \"../model/selection_updates.js\"\nimport { ie, presto, safari } from \"../util/browser.js\"\nimport { elt, removeChildrenAndAdd } from \"../util/dom.js\"\nimport { e_preventDefault, e_stop, signalDOMEvent } from \"../util/event.js\"\nimport { indexOf } from \"../util/misc.js\"\n\n// Kludge to work around strange IE behavior where it'll sometimes\n// re-fire a series of drag-related events right after the drop (#1551)\nlet lastDrop = 0\n\nexport function onDrop(e) {\n  let cm = this\n  clearDragCursor(cm)\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n    return\n  e_preventDefault(e)\n  if (ie) lastDrop = +new Date\n  let pos = posFromMouse(cm, e, true), files = e.dataTransfer.files\n  if (!pos || cm.isReadOnly()) return\n  // Might be a file drop, in which case we simply extract the text\n  // and insert it.\n  if (files && files.length && window.FileReader && window.File) {\n    let n = files.length, text = Array(n), read = 0\n    const markAsReadAndPasteIfAllFilesAreRead = () => {\n      if (++read == n) {\n        operation(cm, () => {\n          pos = clipPos(cm.doc, pos)\n          let change = {from: pos, to: pos,\n                        text: cm.doc.splitLines(\n                            text.filter(t => t != null).join(cm.doc.lineSeparator())),\n                        origin: \"paste\"}\n          makeChange(cm.doc, change)\n          setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))))\n        })()\n      }\n    }\n    const readTextFromFile = (file, i) => {\n      if (cm.options.allowDropFileTypes &&\n          indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n        markAsReadAndPasteIfAllFilesAreRead()\n        return\n      }\n      let reader = new FileReader\n      reader.onerror = () => markAsReadAndPasteIfAllFilesAreRead()\n      reader.onload = () => {\n        let content = reader.result\n        if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n          markAsReadAndPasteIfAllFilesAreRead()\n          return\n        }\n        text[i] = content\n        markAsReadAndPasteIfAllFilesAreRead()\n      }\n      reader.readAsText(file)\n    }\n    for (let i = 0; i < files.length; i++) readTextFromFile(files[i], i)\n  } else { // Normal drop\n    // Don't do a replace if the drop happened inside of the selected text.\n    if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n      cm.state.draggingText(e)\n      // Ensure the editor is re-focused\n      setTimeout(() => cm.display.input.focus(), 20)\n      return\n    }\n    try {\n      let text = e.dataTransfer.getData(\"Text\")\n      if (text) {\n        let selected\n        if (cm.state.draggingText && !cm.state.draggingText.copy)\n          selected = cm.listSelections()\n        setSelectionNoUndo(cm.doc, simpleSelection(pos, pos))\n        if (selected) for (let i = 0; i < selected.length; ++i)\n          replaceRange(cm.doc, \"\", selected[i].anchor, selected[i].head, \"drag\")\n        cm.replaceSelection(text, \"around\", \"paste\")\n        cm.display.input.focus()\n      }\n    }\n    catch(e){}\n  }\n}\n\nexport function onDragStart(cm, e) {\n  if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return\n\n  e.dataTransfer.setData(\"Text\", cm.getSelection())\n  e.dataTransfer.effectAllowed = \"copyMove\"\n\n  // Use dummy image instead of default browsers image.\n  // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n  if (e.dataTransfer.setDragImage && !safari) {\n    let img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\")\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"\n    if (presto) {\n      img.width = img.height = 1\n      cm.display.wrapper.appendChild(img)\n      // Force a relayout, or Opera won't use our image for some obscure reason\n      img._top = img.offsetTop\n    }\n    e.dataTransfer.setDragImage(img, 0, 0)\n    if (presto) img.parentNode.removeChild(img)\n  }\n}\n\nexport function onDragOver(cm, e) {\n  let pos = posFromMouse(cm, e)\n  if (!pos) return\n  let frag = document.createDocumentFragment()\n  drawSelectionCursor(cm, pos, frag)\n  if (!cm.display.dragCursor) {\n    cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\")\n    cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv)\n  }\n  removeChildrenAndAdd(cm.display.dragCursor, frag)\n}\n\nexport function clearDragCursor(cm) {\n  if (cm.display.dragCursor) {\n    cm.display.lineSpace.removeChild(cm.display.dragCursor)\n    cm.display.dragCursor = null\n  }\n}\n","import { onBlur } from \"../display/focus.js\"\nimport { on } from \"../util/event.js\"\n\n// These must be handled carefully, because naively registering a\n// handler for each editor will cause the editors to never be\n// garbage collected.\n\nfunction forEachCodeMirror(f) {\n  if (!document.getElementsByClassName) return\n  let byClass = document.getElementsByClassName(\"CodeMirror\"), editors = []\n  for (let i = 0; i < byClass.length; i++) {\n    let cm = byClass[i].CodeMirror\n    if (cm) editors.push(cm)\n  }\n  if (editors.length) editors[0].operation(() => {\n    for (let i = 0; i < editors.length; i++) f(editors[i])\n  })\n}\n\nlet globalsRegistered = false\nexport function ensureGlobalHandlers() {\n  if (globalsRegistered) return\n  registerGlobalHandlers()\n  globalsRegistered = true\n}\nfunction registerGlobalHandlers() {\n  // When the window resizes, we need to refresh active editors.\n  let resizeTimer\n  on(window, \"resize\", () => {\n    if (resizeTimer == null) resizeTimer = setTimeout(() => {\n      resizeTimer = null\n      forEachCodeMirror(onResize)\n    }, 100)\n  })\n  // When the window loses focus, we want to show the editor as blurred\n  on(window, \"blur\", () => forEachCodeMirror(onBlur))\n}\n// Called when the window resizes\nfunction onResize(cm) {\n  let d = cm.display\n  // Might be a text scaling operation, clear size caches.\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null\n  d.scrollbarsClipped = false\n  cm.setSize()\n}\n","export let keyNames = {\n  3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n  19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n  36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n  46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n  106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n  173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n  221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n  63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n}\n\n// Number keys\nfor (let i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i)\n// Alphabetic keys\nfor (let i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i)\n// Function keys\nfor (let i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = \"F\" + i\n","import { flipCtrlCmd, mac, presto } from \"../util/browser.js\"\nimport { map } from \"../util/misc.js\"\n\nimport { keyNames } from \"./keynames.js\"\n\nexport let keyMap = {}\n\nkeyMap.basic = {\n  \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n  \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n  \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n  \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n  \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n  \"Esc\": \"singleSelection\"\n}\n// Note that the save and find-related commands aren't defined by\n// default. User code or addons can define them. Unknown commands\n// are simply ignored.\nkeyMap.pcDefault = {\n  \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n  \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n  \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n  \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n  \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n  \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n  \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n  \"fallthrough\": \"basic\"\n}\n// Very basic readline/emacs-style bindings, which are standard on Mac.\nkeyMap.emacsy = {\n  \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n  \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\", \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\",\n  \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\",\n  \"Ctrl-T\": \"transposeChars\", \"Ctrl-O\": \"openLine\"\n}\nkeyMap.macDefault = {\n  \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n  \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n  \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n  \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n  \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n  \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n  \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n  \"fallthrough\": [\"basic\", \"emacsy\"]\n}\nkeyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault\n\n// KEYMAP DISPATCH\n\nfunction normalizeKeyName(name) {\n  let parts = name.split(/-(?!$)/)\n  name = parts[parts.length - 1]\n  let alt, ctrl, shift, cmd\n  for (let i = 0; i < parts.length - 1; i++) {\n    let mod = parts[i]\n    if (/^(cmd|meta|m)$/i.test(mod)) cmd = true\n    else if (/^a(lt)?$/i.test(mod)) alt = true\n    else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true\n    else if (/^s(hift)?$/i.test(mod)) shift = true\n    else throw new Error(\"Unrecognized modifier name: \" + mod)\n  }\n  if (alt) name = \"Alt-\" + name\n  if (ctrl) name = \"Ctrl-\" + name\n  if (cmd) name = \"Cmd-\" + name\n  if (shift) name = \"Shift-\" + name\n  return name\n}\n\n// This is a kludge to keep keymaps mostly working as raw objects\n// (backwards compatibility) while at the same time support features\n// like normalization and multi-stroke key bindings. It compiles a\n// new normalized keymap, and then updates the old object to reflect\n// this.\nexport function normalizeKeyMap(keymap) {\n  let copy = {}\n  for (let keyname in keymap) if (keymap.hasOwnProperty(keyname)) {\n    let value = keymap[keyname]\n    if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue\n    if (value == \"...\") { delete keymap[keyname]; continue }\n\n    let keys = map(keyname.split(\" \"), normalizeKeyName)\n    for (let i = 0; i < keys.length; i++) {\n      let val, name\n      if (i == keys.length - 1) {\n        name = keys.join(\" \")\n        val = value\n      } else {\n        name = keys.slice(0, i + 1).join(\" \")\n        val = \"...\"\n      }\n      let prev = copy[name]\n      if (!prev) copy[name] = val\n      else if (prev != val) throw new Error(\"Inconsistent bindings for \" + name)\n    }\n    delete keymap[keyname]\n  }\n  for (let prop in copy) keymap[prop] = copy[prop]\n  return keymap\n}\n\nexport function lookupKey(key, map, handle, context) {\n  map = getKeyMap(map)\n  let found = map.call ? map.call(key, context) : map[key]\n  if (found === false) return \"nothing\"\n  if (found === \"...\") return \"multi\"\n  if (found != null && handle(found)) return \"handled\"\n\n  if (map.fallthrough) {\n    if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n      return lookupKey(key, map.fallthrough, handle, context)\n    for (let i = 0; i < map.fallthrough.length; i++) {\n      let result = lookupKey(key, map.fallthrough[i], handle, context)\n      if (result) return result\n    }\n  }\n}\n\n// Modifier key presses don't count as 'real' key presses for the\n// purpose of keymap fallthrough.\nexport function isModifierKey(value) {\n  let name = typeof value == \"string\" ? value : keyNames[value.keyCode]\n  return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n}\n\nexport function addModifierNames(name, event, noShift) {\n  let base = name\n  if (event.altKey && base != \"Alt\") name = \"Alt-\" + name\n  if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") name = \"Ctrl-\" + name\n  if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") name = \"Cmd-\" + name\n  if (!noShift && event.shiftKey && base != \"Shift\") name = \"Shift-\" + name\n  return name\n}\n\n// Look up the name of a key as indicated by an event object.\nexport function keyName(event, noShift) {\n  if (presto && event.keyCode == 34 && event[\"char\"]) return false\n  let name = keyNames[event.keyCode]\n  if (name == null || event.altGraphKey) return false\n  // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n  // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n  if (event.keyCode == 3 && event.code) name = event.code\n  return addModifierNames(name, event, noShift)\n}\n\nexport function getKeyMap(val) {\n  return typeof val == \"string\" ? keyMap[val] : val\n}\n","import { runInOp } from \"../display/operations.js\"\nimport { ensureCursorVisible } from \"../display/scrolling.js\"\nimport { cmp } from \"../line/pos.js\"\nimport { replaceRange } from \"../model/changes.js\"\nimport { lst } from \"../util/misc.js\"\n\n// Helper for deleting text near the selection(s), used to implement\n// backspace, delete, and similar functionality.\nexport function deleteNearSelection(cm, compute) {\n  let ranges = cm.doc.sel.ranges, kill = []\n  // Build up a set of ranges to kill first, merging overlapping\n  // ranges.\n  for (let i = 0; i < ranges.length; i++) {\n    let toKill = compute(ranges[i])\n    while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n      let replaced = kill.pop()\n      if (cmp(replaced.from, toKill.from) < 0) {\n        toKill.from = replaced.from\n        break\n      }\n    }\n    kill.push(toKill)\n  }\n  // Next, remove those actual ranges.\n  runInOp(cm, () => {\n    for (let i = kill.length - 1; i >= 0; i--)\n      replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\")\n    ensureCursorVisible(cm)\n  })\n}\n","import { Pos } from \"../line/pos.js\"\nimport { prepareMeasureForLine, measureCharPrepared, wrappedLineExtentChar } from \"../measurement/position_measurement.js\"\nimport { getBidiPartAt, getOrder } from \"../util/bidi.js\"\nimport { findFirst, lst, skipExtendingChars } from \"../util/misc.js\"\n\nfunction moveCharLogically(line, ch, dir) {\n  let target = skipExtendingChars(line.text, ch + dir, dir)\n  return target < 0 || target > line.text.length ? null : target\n}\n\nexport function moveLogically(line, start, dir) {\n  let ch = moveCharLogically(line, start.ch, dir)\n  return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n}\n\nexport function endOfLine(visually, cm, lineObj, lineNo, dir) {\n  if (visually) {\n    if (cm.doc.direction == \"rtl\") dir = -dir\n    let order = getOrder(lineObj, cm.doc.direction)\n    if (order) {\n      let part = dir < 0 ? lst(order) : order[0]\n      let moveInStorageOrder = (dir < 0) == (part.level == 1)\n      let sticky = moveInStorageOrder ? \"after\" : \"before\"\n      let ch\n      // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n      // it could be that the last bidi part is not on the last visual line,\n      // since visual lines contain content order-consecutive chunks.\n      // Thus, in rtl, we are looking for the first (content-order) character\n      // in the rtl chunk that is on the last line (that is, the same line\n      // as the last (content-order) character).\n      if (part.level > 0 || cm.doc.direction == \"rtl\") {\n        let prep = prepareMeasureForLine(cm, lineObj)\n        ch = dir < 0 ? lineObj.text.length - 1 : 0\n        let targetTop = measureCharPrepared(cm, prep, ch).top\n        ch = findFirst(ch => measureCharPrepared(cm, prep, ch).top == targetTop, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch)\n        if (sticky == \"before\") ch = moveCharLogically(lineObj, ch, 1)\n      } else ch = dir < 0 ? part.to : part.from\n      return new Pos(lineNo, ch, sticky)\n    }\n  }\n  return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n}\n\nexport function moveVisually(cm, line, start, dir) {\n  let bidi = getOrder(line, cm.doc.direction)\n  if (!bidi) return moveLogically(line, start, dir)\n  if (start.ch >= line.text.length) {\n    start.ch = line.text.length\n    start.sticky = \"before\"\n  } else if (start.ch <= 0) {\n    start.ch = 0\n    start.sticky = \"after\"\n  }\n  let partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos]\n  if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n    // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n    // nothing interesting happens.\n    return moveLogically(line, start, dir)\n  }\n\n  let mv = (pos, dir) => moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir)\n  let prep\n  let getWrappedLineExtent = ch => {\n    if (!cm.options.lineWrapping) return {begin: 0, end: line.text.length}\n    prep = prep || prepareMeasureForLine(cm, line)\n    return wrappedLineExtentChar(cm, line, prep, ch)\n  }\n  let wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch)\n\n  if (cm.doc.direction == \"rtl\" || part.level == 1) {\n    let moveInStorageOrder = (part.level == 1) == (dir < 0)\n    let ch = mv(start, moveInStorageOrder ? 1 : -1)\n    if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n      // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n      let sticky = moveInStorageOrder ? \"before\" : \"after\"\n      return new Pos(start.line, ch, sticky)\n    }\n  }\n\n  // Case 3: Could not move within this bidi part in this visual line, so leave\n  // the current bidi part\n\n  let searchInVisualLine = (partPos, dir, wrappedLineExtent) => {\n    let getRes = (ch, moveInStorageOrder) => moveInStorageOrder\n      ? new Pos(start.line, mv(ch, 1), \"before\")\n      : new Pos(start.line, ch, \"after\")\n\n    for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n      let part = bidi[partPos]\n      let moveInStorageOrder = (dir > 0) == (part.level != 1)\n      let ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1)\n      if (part.from <= ch && ch < part.to) return getRes(ch, moveInStorageOrder)\n      ch = moveInStorageOrder ? part.from : mv(part.to, -1)\n      if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) return getRes(ch, moveInStorageOrder)\n    }\n  }\n\n  // Case 3a: Look for other bidi parts on the same visual line\n  let res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent)\n  if (res) return res\n\n  // Case 3b: Look for other bidi parts on the next visual line\n  let nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1)\n  if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n    res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh))\n    if (res) return res\n  }\n\n  // Case 4: Nowhere to move\n  return null\n}\n","import { deleteNearSelection } from \"./deleteNearSelection.js\"\nimport { runInOp } from \"../display/operations.js\"\nimport { ensureCursorVisible } from \"../display/scrolling.js\"\nimport { endOfLine } from \"../input/movement.js\"\nimport { clipPos, Pos } from \"../line/pos.js\"\nimport { visualLine, visualLineEnd } from \"../line/spans.js\"\nimport { getLine, lineNo } from \"../line/utils_line.js\"\nimport { Range } from \"../model/selection.js\"\nimport { selectAll } from \"../model/selection_updates.js\"\nimport { countColumn, sel_dontScroll, sel_move, spaceStr } from \"../util/misc.js\"\nimport { getOrder } from \"../util/bidi.js\"\n\n// Commands are parameter-less actions that can be performed on an\n// editor, mostly used for keybindings.\nexport let commands = {\n  selectAll: selectAll,\n  singleSelection: cm => cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll),\n  killLine: cm => deleteNearSelection(cm, range => {\n    if (range.empty()) {\n      let len = getLine(cm.doc, range.head.line).text.length\n      if (range.head.ch == len && range.head.line < cm.lastLine())\n        return {from: range.head, to: Pos(range.head.line + 1, 0)}\n      else\n        return {from: range.head, to: Pos(range.head.line, len)}\n    } else {\n      return {from: range.from(), to: range.to()}\n    }\n  }),\n  deleteLine: cm => deleteNearSelection(cm, range => ({\n    from: Pos(range.from().line, 0),\n    to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n  })),\n  delLineLeft: cm => deleteNearSelection(cm, range => ({\n    from: Pos(range.from().line, 0), to: range.from()\n  })),\n  delWrappedLineLeft: cm => deleteNearSelection(cm, range => {\n    let top = cm.charCoords(range.head, \"div\").top + 5\n    let leftPos = cm.coordsChar({left: 0, top: top}, \"div\")\n    return {from: leftPos, to: range.from()}\n  }),\n  delWrappedLineRight: cm => deleteNearSelection(cm, range => {\n    let top = cm.charCoords(range.head, \"div\").top + 5\n    let rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    return {from: range.from(), to: rightPos }\n  }),\n  undo: cm => cm.undo(),\n  redo: cm => cm.redo(),\n  undoSelection: cm => cm.undoSelection(),\n  redoSelection: cm => cm.redoSelection(),\n  goDocStart: cm => cm.extendSelection(Pos(cm.firstLine(), 0)),\n  goDocEnd: cm => cm.extendSelection(Pos(cm.lastLine())),\n  goLineStart: cm => cm.extendSelectionsBy(range => lineStart(cm, range.head.line),\n    {origin: \"+move\", bias: 1}\n  ),\n  goLineStartSmart: cm => cm.extendSelectionsBy(range => lineStartSmart(cm, range.head),\n    {origin: \"+move\", bias: 1}\n  ),\n  goLineEnd: cm => cm.extendSelectionsBy(range => lineEnd(cm, range.head.line),\n    {origin: \"+move\", bias: -1}\n  ),\n  goLineRight: cm => cm.extendSelectionsBy(range => {\n    let top = cm.cursorCoords(range.head, \"div\").top + 5\n    return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n  }, sel_move),\n  goLineLeft: cm => cm.extendSelectionsBy(range => {\n    let top = cm.cursorCoords(range.head, \"div\").top + 5\n    return cm.coordsChar({left: 0, top: top}, \"div\")\n  }, sel_move),\n  goLineLeftSmart: cm => cm.extendSelectionsBy(range => {\n    let top = cm.cursorCoords(range.head, \"div\").top + 5\n    let pos = cm.coordsChar({left: 0, top: top}, \"div\")\n    if (pos.ch < cm.getLine(pos.line).search(/\\S/)) return lineStartSmart(cm, range.head)\n    return pos\n  }, sel_move),\n  goLineUp: cm => cm.moveV(-1, \"line\"),\n  goLineDown: cm => cm.moveV(1, \"line\"),\n  goPageUp: cm => cm.moveV(-1, \"page\"),\n  goPageDown: cm => cm.moveV(1, \"page\"),\n  goCharLeft: cm => cm.moveH(-1, \"char\"),\n  goCharRight: cm => cm.moveH(1, \"char\"),\n  goColumnLeft: cm => cm.moveH(-1, \"column\"),\n  goColumnRight: cm => cm.moveH(1, \"column\"),\n  goWordLeft: cm => cm.moveH(-1, \"word\"),\n  goGroupRight: cm => cm.moveH(1, \"group\"),\n  goGroupLeft: cm => cm.moveH(-1, \"group\"),\n  goWordRight: cm => cm.moveH(1, \"word\"),\n  delCharBefore: cm => cm.deleteH(-1, \"codepoint\"),\n  delCharAfter: cm => cm.deleteH(1, \"char\"),\n  delWordBefore: cm => cm.deleteH(-1, \"word\"),\n  delWordAfter: cm => cm.deleteH(1, \"word\"),\n  delGroupBefore: cm => cm.deleteH(-1, \"group\"),\n  delGroupAfter: cm => cm.deleteH(1, \"group\"),\n  indentAuto: cm => cm.indentSelection(\"smart\"),\n  indentMore: cm => cm.indentSelection(\"add\"),\n  indentLess: cm => cm.indentSelection(\"subtract\"),\n  insertTab: cm => cm.replaceSelection(\"\\t\"),\n  insertSoftTab: cm => {\n    let spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize\n    for (let i = 0; i < ranges.length; i++) {\n      let pos = ranges[i].from()\n      let col = countColumn(cm.getLine(pos.line), pos.ch, tabSize)\n      spaces.push(spaceStr(tabSize - col % tabSize))\n    }\n    cm.replaceSelections(spaces)\n  },\n  defaultTab: cm => {\n    if (cm.somethingSelected()) cm.indentSelection(\"add\")\n    else cm.execCommand(\"insertTab\")\n  },\n  // Swap the two chars left and right of each selection's head.\n  // Move cursor behind the two swapped characters afterwards.\n  //\n  // Doesn't consider line feeds a character.\n  // Doesn't scan more than one line above to find a character.\n  // Doesn't do anything on an empty line.\n  // Doesn't do anything with non-empty selections.\n  transposeChars: cm => runInOp(cm, () => {\n    let ranges = cm.listSelections(), newSel = []\n    for (let i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) continue\n      let cur = ranges[i].head, line = getLine(cm.doc, cur.line).text\n      if (line) {\n        if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1)\n        if (cur.ch > 0) {\n          cur = new Pos(cur.line, cur.ch + 1)\n          cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                          Pos(cur.line, cur.ch - 2), cur, \"+transpose\")\n        } else if (cur.line > cm.doc.first) {\n          let prev = getLine(cm.doc, cur.line - 1).text\n          if (prev) {\n            cur = new Pos(cur.line, 1)\n            cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                            prev.charAt(prev.length - 1),\n                            Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\")\n          }\n        }\n      }\n      newSel.push(new Range(cur, cur))\n    }\n    cm.setSelections(newSel)\n  }),\n  newlineAndIndent: cm => runInOp(cm, () => {\n    let sels = cm.listSelections()\n    for (let i = sels.length - 1; i >= 0; i--)\n      cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\")\n    sels = cm.listSelections()\n    for (let i = 0; i < sels.length; i++)\n      cm.indentLine(sels[i].from().line, null, true)\n    ensureCursorVisible(cm)\n  }),\n  openLine: cm => cm.replaceSelection(\"\\n\", \"start\"),\n  toggleOverwrite: cm => cm.toggleOverwrite()\n}\n\n\nfunction lineStart(cm, lineN) {\n  let line = getLine(cm.doc, lineN)\n  let visual = visualLine(line)\n  if (visual != line) lineN = lineNo(visual)\n  return endOfLine(true, cm, visual, lineN, 1)\n}\nfunction lineEnd(cm, lineN) {\n  let line = getLine(cm.doc, lineN)\n  let visual = visualLineEnd(line)\n  if (visual != line) lineN = lineNo(visual)\n  return endOfLine(true, cm, line, lineN, -1)\n}\nfunction lineStartSmart(cm, pos) {\n  let start = lineStart(cm, pos.line)\n  let line = getLine(cm.doc, start.line)\n  let order = getOrder(line, cm.doc.direction)\n  if (!order || order[0].level == 0) {\n    let firstNonWS = Math.max(start.ch, line.text.search(/\\S/))\n    let inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch\n    return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n  }\n  return start\n}\n","import { signalLater } from \"../util/operation_group.js\"\nimport { restartBlink } from \"../display/selection.js\"\nimport { isModifierKey, keyName, lookupKey } from \"../input/keymap.js\"\nimport { eventInWidget } from \"../measurement/widgets.js\"\nimport { ie, ie_version, mac, presto, gecko } from \"../util/browser.js\"\nimport { activeElt, addClass, rmClass } from \"../util/dom.js\"\nimport { e_preventDefault, off, on, signalDOMEvent } from \"../util/event.js\"\nimport { hasCopyEvent } from \"../util/feature_detection.js\"\nimport { Delayed, Pass } from \"../util/misc.js\"\n\nimport { commands } from \"./commands.js\"\n\n// Run a handler that was bound to a key.\nfunction doHandleBinding(cm, bound, dropShift) {\n  if (typeof bound == \"string\") {\n    bound = commands[bound]\n    if (!bound) return false\n  }\n  // Ensure previous input has been read, so that the handler sees a\n  // consistent view of the document\n  cm.display.input.ensurePolled()\n  let prevShift = cm.display.shift, done = false\n  try {\n    if (cm.isReadOnly()) cm.state.suppressEdits = true\n    if (dropShift) cm.display.shift = false\n    done = bound(cm) != Pass\n  } finally {\n    cm.display.shift = prevShift\n    cm.state.suppressEdits = false\n  }\n  return done\n}\n\nfunction lookupKeyForEditor(cm, name, handle) {\n  for (let i = 0; i < cm.state.keyMaps.length; i++) {\n    let result = lookupKey(name, cm.state.keyMaps[i], handle, cm)\n    if (result) return result\n  }\n  return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n    || lookupKey(name, cm.options.keyMap, handle, cm)\n}\n\n// Note that, despite the name, this function is also used to check\n// for bound mouse clicks.\n\nlet stopSeq = new Delayed\n\nexport function dispatchKey(cm, name, e, handle) {\n  let seq = cm.state.keySeq\n  if (seq) {\n    if (isModifierKey(name)) return \"handled\"\n    if (/\\'$/.test(name))\n      cm.state.keySeq = null\n    else\n      stopSeq.set(50, () => {\n        if (cm.state.keySeq == seq) {\n          cm.state.keySeq = null\n          cm.display.input.reset()\n        }\n      })\n    if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) return true\n  }\n  return dispatchKeyInner(cm, name, e, handle)\n}\n\nfunction dispatchKeyInner(cm, name, e, handle) {\n  let result = lookupKeyForEditor(cm, name, handle)\n\n  if (result == \"multi\")\n    cm.state.keySeq = name\n  if (result == \"handled\")\n    signalLater(cm, \"keyHandled\", cm, name, e)\n\n  if (result == \"handled\" || result == \"multi\") {\n    e_preventDefault(e)\n    restartBlink(cm)\n  }\n\n  return !!result\n}\n\n// Handle a key from the keydown event.\nfunction handleKeyBinding(cm, e) {\n  let name = keyName(e, true)\n  if (!name) return false\n\n  if (e.shiftKey && !cm.state.keySeq) {\n    // First try to resolve full name (including 'Shift-'). Failing\n    // that, see if there is a cursor-motion command (starting with\n    // 'go') bound to the keyname without 'Shift-'.\n    return dispatchKey(cm, \"Shift-\" + name, e, b => doHandleBinding(cm, b, true))\n        || dispatchKey(cm, name, e, b => {\n             if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n               return doHandleBinding(cm, b)\n           })\n  } else {\n    return dispatchKey(cm, name, e, b => doHandleBinding(cm, b))\n  }\n}\n\n// Handle a key from the keypress event\nfunction handleCharBinding(cm, e, ch) {\n  return dispatchKey(cm, \"'\" + ch + \"'\", e, b => doHandleBinding(cm, b, true))\n}\n\nlet lastStoppedKey = null\nexport function onKeyDown(e) {\n  let cm = this\n  if (e.target && e.target != cm.display.input.getField()) return\n  cm.curOp.focus = activeElt()\n  if (signalDOMEvent(cm, e)) return\n  // IE does strange things with escape.\n  if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false\n  let code = e.keyCode\n  cm.display.shift = code == 16 || e.shiftKey\n  let handled = handleKeyBinding(cm, e)\n  if (presto) {\n    lastStoppedKey = handled ? code : null\n    // Opera has no cut event... we try to at least catch the key combo\n    if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n      cm.replaceSelection(\"\", null, \"cut\")\n  }\n  if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n    document.execCommand(\"cut\")\n\n  // Turn mouse into crosshair when Alt is held on Mac.\n  if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n    showCrossHair(cm)\n}\n\nfunction showCrossHair(cm) {\n  let lineDiv = cm.display.lineDiv\n  addClass(lineDiv, \"CodeMirror-crosshair\")\n\n  function up(e) {\n    if (e.keyCode == 18 || !e.altKey) {\n      rmClass(lineDiv, \"CodeMirror-crosshair\")\n      off(document, \"keyup\", up)\n      off(document, \"mouseover\", up)\n    }\n  }\n  on(document, \"keyup\", up)\n  on(document, \"mouseover\", up)\n}\n\nexport function onKeyUp(e) {\n  if (e.keyCode == 16) this.doc.sel.shift = false\n  signalDOMEvent(this, e)\n}\n\nexport function onKeyPress(e) {\n  let cm = this\n  if (e.target && e.target != cm.display.input.getField()) return\n  if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return\n  let keyCode = e.keyCode, charCode = e.charCode\n  if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n  if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) return\n  let ch = String.fromCharCode(charCode == null ? keyCode : charCode)\n  // Some browsers fire keypress events for backspace\n  if (ch == \"\\x08\") return\n  if (handleCharBinding(cm, e, ch)) return\n  cm.display.input.onKeyPress(e)\n}\n","import { delayBlurEvent, ensureFocus } from \"../display/focus.js\"\nimport { operation } from \"../display/operations.js\"\nimport { visibleLines } from \"../display/update_lines.js\"\nimport { clipPos, cmp, maxPos, minPos, Pos } from \"../line/pos.js\"\nimport { getLine, lineAtHeight } from \"../line/utils_line.js\"\nimport { posFromMouse } from \"../measurement/position_measurement.js\"\nimport { eventInWidget } from \"../measurement/widgets.js\"\nimport { normalizeSelection, Range, Selection } from \"../model/selection.js\"\nimport { extendRange, extendSelection, replaceOneSelection, setSelection } from \"../model/selection_updates.js\"\nimport { captureRightClick, chromeOS, ie, ie_version, mac, webkit, safari } from \"../util/browser.js\"\nimport { getOrder, getBidiPartAt } from \"../util/bidi.js\"\nimport { activeElt } from \"../util/dom.js\"\nimport { e_button, e_defaultPrevented, e_preventDefault, e_target, hasHandler, off, on, signal, signalDOMEvent } from \"../util/event.js\"\nimport { dragAndDrop } from \"../util/feature_detection.js\"\nimport { bind, countColumn, findColumn, sel_mouse } from \"../util/misc.js\"\nimport { addModifierNames } from \"../input/keymap.js\"\nimport { Pass } from \"../util/misc.js\"\n\nimport { dispatchKey } from \"./key_events.js\"\nimport { commands } from \"./commands.js\"\n\nconst DOUBLECLICK_DELAY = 400\n\nclass PastClick {\n  constructor(time, pos, button) {\n    this.time = time\n    this.pos = pos\n    this.button = button\n  }\n\n  compare(time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  }\n}\n\nlet lastClick, lastDoubleClick\nfunction clickRepeat(pos, button) {\n  let now = +new Date\n  if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n    lastClick = lastDoubleClick = null\n    return \"triple\"\n  } else if (lastClick && lastClick.compare(now, pos, button)) {\n    lastDoubleClick = new PastClick(now, pos, button)\n    lastClick = null\n    return \"double\"\n  } else {\n    lastClick = new PastClick(now, pos, button)\n    lastDoubleClick = null\n    return \"single\"\n  }\n}\n\n// A mouse down can be a single click, double click, triple click,\n// start of selection drag, start of text drag, new cursor\n// (ctrl-click), rectangle drag (alt-drag), or xwin\n// middle-click-paste. Or it might be a click on something we should\n// not interfere with, such as a scrollbar or widget.\nexport function onMouseDown(e) {\n  let cm = this, display = cm.display\n  if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) return\n  display.input.ensurePolled()\n  display.shift = e.shiftKey\n\n  if (eventInWidget(display, e)) {\n    if (!webkit) {\n      // Briefly turn off draggability, to allow widgets to do\n      // normal dragging things.\n      display.scroller.draggable = false\n      setTimeout(() => display.scroller.draggable = true, 100)\n    }\n    return\n  }\n  if (clickInGutter(cm, e)) return\n  let pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\"\n  window.focus()\n\n  // #3261: make sure, that we're not starting a second selection\n  if (button == 1 && cm.state.selectingText)\n    cm.state.selectingText(e)\n\n  if (pos && handleMappedButton(cm, button, pos, repeat, e)) return\n\n  if (button == 1) {\n    if (pos) leftButtonDown(cm, pos, repeat, e)\n    else if (e_target(e) == display.scroller) e_preventDefault(e)\n  } else if (button == 2) {\n    if (pos) extendSelection(cm.doc, pos)\n    setTimeout(() => display.input.focus(), 20)\n  } else if (button == 3) {\n    if (captureRightClick) cm.display.input.onContextMenu(e)\n    else delayBlurEvent(cm)\n  }\n}\n\nfunction handleMappedButton(cm, button, pos, repeat, event) {\n  let name = \"Click\"\n  if (repeat == \"double\") name = \"Double\" + name\n  else if (repeat == \"triple\") name = \"Triple\" + name\n  name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name\n\n  return dispatchKey(cm,  addModifierNames(name, event), event, bound => {\n    if (typeof bound == \"string\") bound = commands[bound]\n    if (!bound) return false\n    let done = false\n    try {\n      if (cm.isReadOnly()) cm.state.suppressEdits = true\n      done = bound(cm, pos) != Pass\n    } finally {\n      cm.state.suppressEdits = false\n    }\n    return done\n  })\n}\n\nfunction configureMouse(cm, repeat, event) {\n  let option = cm.getOption(\"configureMouse\")\n  let value = option ? option(cm, repeat, event) : {}\n  if (value.unit == null) {\n    let rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey\n    value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\"\n  }\n  if (value.extend == null || cm.doc.extend) value.extend = cm.doc.extend || event.shiftKey\n  if (value.addNew == null) value.addNew = mac ? event.metaKey : event.ctrlKey\n  if (value.moveOnDrag == null) value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey)\n  return value\n}\n\nfunction leftButtonDown(cm, pos, repeat, event) {\n  if (ie) setTimeout(bind(ensureFocus, cm), 0)\n  else cm.curOp.focus = activeElt()\n\n  let behavior = configureMouse(cm, repeat, event)\n\n  let sel = cm.doc.sel, contained\n  if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n      repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n      (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n      (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n    leftButtonStartDrag(cm, event, pos, behavior)\n  else\n    leftButtonSelect(cm, event, pos, behavior)\n}\n\n// Start a text drag. When it ends, see if any dragging actually\n// happen, and treat as a click if it didn't.\nfunction leftButtonStartDrag(cm, event, pos, behavior) {\n  let display = cm.display, moved = false\n  let dragEnd = operation(cm, e => {\n    if (webkit) display.scroller.draggable = false\n    cm.state.draggingText = false\n    if (cm.state.delayingBlurEvent) {\n      if (cm.hasFocus()) cm.state.delayingBlurEvent = false\n      else delayBlurEvent(cm)\n    }\n    off(display.wrapper.ownerDocument, \"mouseup\", dragEnd)\n    off(display.wrapper.ownerDocument, \"mousemove\", mouseMove)\n    off(display.scroller, \"dragstart\", dragStart)\n    off(display.scroller, \"drop\", dragEnd)\n    if (!moved) {\n      e_preventDefault(e)\n      if (!behavior.addNew)\n        extendSelection(cm.doc, pos, null, null, behavior.extend)\n      // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n      if ((webkit && !safari) || ie && ie_version == 9)\n        setTimeout(() => {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus()}, 20)\n      else\n        display.input.focus()\n    }\n  })\n  let mouseMove = function(e2) {\n    moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10\n  }\n  let dragStart = () => moved = true\n  // Let the drag handler handle this.\n  if (webkit) display.scroller.draggable = true\n  cm.state.draggingText = dragEnd\n  dragEnd.copy = !behavior.moveOnDrag\n  on(display.wrapper.ownerDocument, \"mouseup\", dragEnd)\n  on(display.wrapper.ownerDocument, \"mousemove\", mouseMove)\n  on(display.scroller, \"dragstart\", dragStart)\n  on(display.scroller, \"drop\", dragEnd)\n\n  cm.state.delayingBlurEvent = true\n  setTimeout(() => display.input.focus(), 20)\n  // IE's approach to draggable\n  if (display.scroller.dragDrop) display.scroller.dragDrop()\n}\n\nfunction rangeForUnit(cm, pos, unit) {\n  if (unit == \"char\") return new Range(pos, pos)\n  if (unit == \"word\") return cm.findWordAt(pos)\n  if (unit == \"line\") return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)))\n  let result = unit(cm, pos)\n  return new Range(result.from, result.to)\n}\n\n// Normal selection, as opposed to text dragging.\nfunction leftButtonSelect(cm, event, start, behavior) {\n  if (ie) delayBlurEvent(cm)\n  let display = cm.display, doc = cm.doc\n  e_preventDefault(event)\n\n  let ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges\n  if (behavior.addNew && !behavior.extend) {\n    ourIndex = doc.sel.contains(start)\n    if (ourIndex > -1)\n      ourRange = ranges[ourIndex]\n    else\n      ourRange = new Range(start, start)\n  } else {\n    ourRange = doc.sel.primary()\n    ourIndex = doc.sel.primIndex\n  }\n\n  if (behavior.unit == \"rectangle\") {\n    if (!behavior.addNew) ourRange = new Range(start, start)\n    start = posFromMouse(cm, event, true, true)\n    ourIndex = -1\n  } else {\n    let range = rangeForUnit(cm, start, behavior.unit)\n    if (behavior.extend)\n      ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend)\n    else\n      ourRange = range\n  }\n\n  if (!behavior.addNew) {\n    ourIndex = 0\n    setSelection(doc, new Selection([ourRange], 0), sel_mouse)\n    startSel = doc.sel\n  } else if (ourIndex == -1) {\n    ourIndex = ranges.length\n    setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                 {scroll: false, origin: \"*mouse\"})\n  } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n    setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                 {scroll: false, origin: \"*mouse\"})\n    startSel = doc.sel\n  } else {\n    replaceOneSelection(doc, ourIndex, ourRange, sel_mouse)\n  }\n\n  let lastPos = start\n  function extendTo(pos) {\n    if (cmp(lastPos, pos) == 0) return\n    lastPos = pos\n\n    if (behavior.unit == \"rectangle\") {\n      let ranges = [], tabSize = cm.options.tabSize\n      let startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize)\n      let posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize)\n      let left = Math.min(startCol, posCol), right = Math.max(startCol, posCol)\n      for (let line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n           line <= end; line++) {\n        let text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize)\n        if (left == right)\n          ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)))\n        else if (text.length > leftPos)\n          ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))))\n      }\n      if (!ranges.length) ranges.push(new Range(start, start))\n      setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                   {origin: \"*mouse\", scroll: false})\n      cm.scrollIntoView(pos)\n    } else {\n      let oldRange = ourRange\n      let range = rangeForUnit(cm, pos, behavior.unit)\n      let anchor = oldRange.anchor, head\n      if (cmp(range.anchor, anchor) > 0) {\n        head = range.head\n        anchor = minPos(oldRange.from(), range.anchor)\n      } else {\n        head = range.anchor\n        anchor = maxPos(oldRange.to(), range.head)\n      }\n      let ranges = startSel.ranges.slice(0)\n      ranges[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head))\n      setSelection(doc, normalizeSelection(cm, ranges, ourIndex), sel_mouse)\n    }\n  }\n\n  let editorSize = display.wrapper.getBoundingClientRect()\n  // Used to ensure timeout re-tries don't fire when another extend\n  // happened in the meantime (clearTimeout isn't reliable -- at\n  // least on Chrome, the timeouts still happen even when cleared,\n  // if the clear happens after their scheduled firing time).\n  let counter = 0\n\n  function extend(e) {\n    let curCount = ++counter\n    let cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\")\n    if (!cur) return\n    if (cmp(cur, lastPos) != 0) {\n      cm.curOp.focus = activeElt()\n      extendTo(cur)\n      let visible = visibleLines(display, doc)\n      if (cur.line >= visible.to || cur.line < visible.from)\n        setTimeout(operation(cm, () => {if (counter == curCount) extend(e)}), 150)\n    } else {\n      let outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0\n      if (outside) setTimeout(operation(cm, () => {\n        if (counter != curCount) return\n        display.scroller.scrollTop += outside\n        extend(e)\n      }), 50)\n    }\n  }\n\n  function done(e) {\n    cm.state.selectingText = false\n    counter = Infinity\n    // If e is null or undefined we interpret this as someone trying\n    // to explicitly cancel the selection rather than the user\n    // letting go of the mouse button.\n    if (e) {\n      e_preventDefault(e)\n      display.input.focus()\n    }\n    off(display.wrapper.ownerDocument, \"mousemove\", move)\n    off(display.wrapper.ownerDocument, \"mouseup\", up)\n    doc.history.lastSelOrigin = null\n  }\n\n  let move = operation(cm, e => {\n    if (e.buttons === 0 || !e_button(e)) done(e)\n    else extend(e)\n  })\n  let up = operation(cm, done)\n  cm.state.selectingText = up\n  on(display.wrapper.ownerDocument, \"mousemove\", move)\n  on(display.wrapper.ownerDocument, \"mouseup\", up)\n}\n\n// Used when mouse-selecting to adjust the anchor to the proper side\n// of a bidi jump depending on the visual position of the head.\nfunction bidiSimplify(cm, range) {\n  let {anchor, head} = range, anchorLine = getLine(cm.doc, anchor.line)\n  if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) return range\n  let order = getOrder(anchorLine)\n  if (!order) return range\n  let index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index]\n  if (part.from != anchor.ch && part.to != anchor.ch) return range\n  let boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1)\n  if (boundary == 0 || boundary == order.length) return range\n\n  // Compute the relative visual position of the head compared to the\n  // anchor (<0 is to the left, >0 to the right)\n  let leftSide\n  if (head.line != anchor.line) {\n    leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0\n  } else {\n    let headIndex = getBidiPartAt(order, head.ch, head.sticky)\n    let dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1)\n    if (headIndex == boundary - 1 || headIndex == boundary)\n      leftSide = dir < 0\n    else\n      leftSide = dir > 0\n  }\n\n  let usePart = order[boundary + (leftSide ? -1 : 0)]\n  let from = leftSide == (usePart.level == 1)\n  let ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\"\n  return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n}\n\n\n// Determines whether an event happened in the gutter, and fires the\n// handlers for the corresponding event.\nfunction gutterEvent(cm, e, type, prevent) {\n  let mX, mY\n  if (e.touches) {\n    mX = e.touches[0].clientX\n    mY = e.touches[0].clientY\n  } else {\n    try { mX = e.clientX; mY = e.clientY }\n    catch(e) { return false }\n  }\n  if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false\n  if (prevent) e_preventDefault(e)\n\n  let display = cm.display\n  let lineBox = display.lineDiv.getBoundingClientRect()\n\n  if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e)\n  mY -= lineBox.top - display.viewOffset\n\n  for (let i = 0; i < cm.display.gutterSpecs.length; ++i) {\n    let g = display.gutters.childNodes[i]\n    if (g && g.getBoundingClientRect().right >= mX) {\n      let line = lineAtHeight(cm.doc, mY)\n      let gutter = cm.display.gutterSpecs[i]\n      signal(cm, type, cm, line, gutter.className, e)\n      return e_defaultPrevented(e)\n    }\n  }\n}\n\nexport function clickInGutter(cm, e) {\n  return gutterEvent(cm, e, \"gutterClick\", true)\n}\n\n// CONTEXT MENU HANDLING\n\n// To make the context menu work, we need to briefly unhide the\n// textarea (making it as unobtrusive as possible) to let the\n// right-click take effect on it.\nexport function onContextMenu(cm, e) {\n  if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) return\n  if (signalDOMEvent(cm, e, \"contextmenu\")) return\n  if (!captureRightClick) cm.display.input.onContextMenu(e)\n}\n\nfunction contextMenuInGutter(cm, e) {\n  if (!hasHandler(cm, \"gutterContextMenu\")) return false\n  return gutterEvent(cm, e, \"gutterContextMenu\", false)\n}\n","import { clearCaches } from \"../measurement/position_measurement.js\"\n\nexport function themeChanged(cm) {\n  cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n    cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\")\n  clearCaches(cm)\n}\n","import { onBlur } from \"../display/focus.js\"\nimport { getGutters, updateGutters } from \"../display/gutters.js\"\nimport { loadMode, resetModeState } from \"../display/mode_state.js\"\nimport { initScrollbars, updateScrollbars } from \"../display/scrollbars.js\"\nimport { updateSelection } from \"../display/selection.js\"\nimport { regChange } from \"../display/view_tracking.js\"\nimport { getKeyMap } from \"../input/keymap.js\"\nimport { defaultSpecialCharPlaceholder } from \"../line/line_data.js\"\nimport { Pos } from \"../line/pos.js\"\nimport { findMaxLine } from \"../line/spans.js\"\nimport { clearCaches, compensateForHScroll, estimateLineHeights } from \"../measurement/position_measurement.js\"\nimport { replaceRange } from \"../model/changes.js\"\nimport { mobile, windows } from \"../util/browser.js\"\nimport { addClass, rmClass } from \"../util/dom.js\"\nimport { off, on } from \"../util/event.js\"\n\nimport { themeChanged } from \"./utils.js\"\n\nexport let Init = {toString: function(){return \"CodeMirror.Init\"}}\n\nexport let defaults = {}\nexport let optionHandlers = {}\n\nexport function defineOptions(CodeMirror) {\n  let optionHandlers = CodeMirror.optionHandlers\n\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt\n    if (handle) optionHandlers[name] =\n      notOnInit ? (cm, val, old) => {if (old != Init) handle(cm, val, old)} : handle\n  }\n\n  CodeMirror.defineOption = option\n\n  // Passed to option handlers when there is no old value.\n  CodeMirror.Init = Init\n\n  // These two are, on init, called from the constructor because they\n  // have to be initialized before the editor can start at all.\n  option(\"value\", \"\", (cm, val) => cm.setValue(val), true)\n  option(\"mode\", null, (cm, val) => {\n    cm.doc.modeOption = val\n    loadMode(cm)\n  }, true)\n\n  option(\"indentUnit\", 2, loadMode, true)\n  option(\"indentWithTabs\", false)\n  option(\"smartIndent\", true)\n  option(\"tabSize\", 4, cm => {\n    resetModeState(cm)\n    clearCaches(cm)\n    regChange(cm)\n  }, true)\n\n  option(\"lineSeparator\", null, (cm, val) => {\n    cm.doc.lineSep = val\n    if (!val) return\n    let newBreaks = [], lineNo = cm.doc.first\n    cm.doc.iter(line => {\n      for (let pos = 0;;) {\n        let found = line.text.indexOf(val, pos)\n        if (found == -1) break\n        pos = found + val.length\n        newBreaks.push(Pos(lineNo, found))\n      }\n      lineNo++\n    })\n    for (let i = newBreaks.length - 1; i >= 0; i--)\n      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length))\n  })\n  option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, (cm, val, old) => {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\")\n    if (old != Init) cm.refresh()\n  })\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, cm => cm.refresh(), true)\n  option(\"electricChars\", true)\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", () => {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n  }, true)\n  option(\"spellcheck\", false, (cm, val) => cm.getInputField().spellcheck = val, true)\n  option(\"autocorrect\", false, (cm, val) => cm.getInputField().autocorrect = val, true)\n  option(\"autocapitalize\", false, (cm, val) => cm.getInputField().autocapitalize = val, true)\n  option(\"rtlMoveVisually\", !windows)\n  option(\"wholeLineUpdateBefore\", true)\n\n  option(\"theme\", \"default\", cm => {\n    themeChanged(cm)\n    updateGutters(cm)\n  }, true)\n  option(\"keyMap\", \"default\", (cm, val, old) => {\n    let next = getKeyMap(val)\n    let prev = old != Init && getKeyMap(old)\n    if (prev && prev.detach) prev.detach(cm, next)\n    if (next.attach) next.attach(cm, prev || null)\n  })\n  option(\"extraKeys\", null)\n  option(\"configureMouse\", null)\n\n  option(\"lineWrapping\", false, wrappingChanged, true)\n  option(\"gutters\", [], (cm, val) => {\n    cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers)\n    updateGutters(cm)\n  }, true)\n  option(\"fixedGutter\", true, (cm, val) => {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\"\n    cm.refresh()\n  }, true)\n  option(\"coverGutterNextToScrollbar\", false, cm => updateScrollbars(cm), true)\n  option(\"scrollbarStyle\", \"native\", cm => {\n    initScrollbars(cm)\n    updateScrollbars(cm)\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop)\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)\n  }, true)\n  option(\"lineNumbers\", false, (cm, val) => {\n    cm.display.gutterSpecs = getGutters(cm.options.gutters, val)\n    updateGutters(cm)\n  }, true)\n  option(\"firstLineNumber\", 1, updateGutters, true)\n  option(\"lineNumberFormatter\", integer => integer, updateGutters, true)\n  option(\"showCursorWhenSelecting\", false, updateSelection, true)\n\n  option(\"resetSelectionOnContextMenu\", true)\n  option(\"lineWiseCopyCut\", true)\n  option(\"pasteLinesPerSelection\", true)\n  option(\"selectionsMayTouch\", false)\n\n  option(\"readOnly\", false, (cm, val) => {\n    if (val == \"nocursor\") {\n      onBlur(cm)\n      cm.display.input.blur()\n    }\n    cm.display.input.readOnlyChanged(val)\n  })\n\n  option(\"screenReaderLabel\", null, (cm, val) => {\n    val = (val === '') ? null : val\n    cm.display.input.screenReaderLabelChanged(val)\n  })\n\n  option(\"disableInput\", false, (cm, val) => {if (!val) cm.display.input.reset()}, true)\n  option(\"dragDrop\", true, dragDropChanged)\n  option(\"allowDropFileTypes\", null)\n\n  option(\"cursorBlinkRate\", 530)\n  option(\"cursorScrollMargin\", 0)\n  option(\"cursorHeight\", 1, updateSelection, true)\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true)\n  option(\"workTime\", 100)\n  option(\"workDelay\", 100)\n  option(\"flattenSpans\", true, resetModeState, true)\n  option(\"addModeClass\", false, resetModeState, true)\n  option(\"pollInterval\", 100)\n  option(\"undoDepth\", 200, (cm, val) => cm.doc.history.undoDepth = val)\n  option(\"historyEventDelay\", 1250)\n  option(\"viewportMargin\", 10, cm => cm.refresh(), true)\n  option(\"maxHighlightLength\", 10000, resetModeState, true)\n  option(\"moveInputWithCursor\", true, (cm, val) => {\n    if (!val) cm.display.input.resetPosition()\n  })\n\n  option(\"tabindex\", null, (cm, val) => cm.display.input.getField().tabIndex = val || \"\")\n  option(\"autofocus\", null)\n  option(\"direction\", \"ltr\", (cm, val) => cm.doc.setDirection(val), true)\n  option(\"phrases\", null)\n}\n\nfunction dragDropChanged(cm, value, old) {\n  let wasOn = old && old != Init\n  if (!value != !wasOn) {\n    let funcs = cm.display.dragFunctions\n    let toggle = value ? on : off\n    toggle(cm.display.scroller, \"dragstart\", funcs.start)\n    toggle(cm.display.scroller, \"dragenter\", funcs.enter)\n    toggle(cm.display.scroller, \"dragover\", funcs.over)\n    toggle(cm.display.scroller, \"dragleave\", funcs.leave)\n    toggle(cm.display.scroller, \"drop\", funcs.drop)\n  }\n}\n\nfunction wrappingChanged(cm) {\n  if (cm.options.lineWrapping) {\n    addClass(cm.display.wrapper, \"CodeMirror-wrap\")\n    cm.display.sizer.style.minWidth = \"\"\n    cm.display.sizerWidth = null\n  } else {\n    rmClass(cm.display.wrapper, \"CodeMirror-wrap\")\n    findMaxLine(cm)\n  }\n  estimateLineHeights(cm)\n  regChange(cm)\n  clearCaches(cm)\n  setTimeout(() => updateScrollbars(cm), 100)\n}\n","import { Display } from \"../display/Display.js\"\nimport { onFocus, onBlur } from \"../display/focus.js\"\nimport { maybeUpdateLineNumberWidth } from \"../display/line_numbers.js\"\nimport { endOperation, operation, startOperation } from \"../display/operations.js\"\nimport { initScrollbars } from \"../display/scrollbars.js\"\nimport { onScrollWheel } from \"../display/scroll_events.js\"\nimport { setScrollLeft, updateScrollTop } from \"../display/scrolling.js\"\nimport { clipPos, Pos } from \"../line/pos.js\"\nimport { posFromMouse } from \"../measurement/position_measurement.js\"\nimport { eventInWidget } from \"../measurement/widgets.js\"\nimport Doc from \"../model/Doc.js\"\nimport { attachDoc } from \"../model/document_data.js\"\nimport { Range } from \"../model/selection.js\"\nimport { extendSelection } from \"../model/selection_updates.js\"\nimport { ie, ie_version, mobile, webkit } from \"../util/browser.js\"\nimport { e_preventDefault, e_stop, on, signal, signalDOMEvent } from \"../util/event.js\"\nimport { copyObj, Delayed } from \"../util/misc.js\"\n\nimport { clearDragCursor, onDragOver, onDragStart, onDrop } from \"./drop_events.js\"\nimport { ensureGlobalHandlers } from \"./global_events.js\"\nimport { onKeyDown, onKeyPress, onKeyUp } from \"./key_events.js\"\nimport { clickInGutter, onContextMenu, onMouseDown } from \"./mouse_events.js\"\nimport { themeChanged } from \"./utils.js\"\nimport { defaults, optionHandlers, Init } from \"./options.js\"\n\n// A CodeMirror instance represents an editor. This is the object\n// that user code is usually dealing with.\n\nexport function CodeMirror(place, options) {\n  if (!(this instanceof CodeMirror)) return new CodeMirror(place, options)\n\n  this.options = options = options ? copyObj(options) : {}\n  // Determine effective options based on given values and defaults.\n  copyObj(defaults, options, false)\n\n  let doc = options.value\n  if (typeof doc == \"string\") doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction)\n  else if (options.mode) doc.modeOption = options.mode\n  this.doc = doc\n\n  let input = new CodeMirror.inputStyles[options.inputStyle](this)\n  let display = this.display = new Display(place, doc, input, options)\n  display.wrapper.CodeMirror = this\n  themeChanged(this)\n  if (options.lineWrapping)\n    this.display.wrapper.className += \" CodeMirror-wrap\"\n  initScrollbars(this)\n\n  this.state = {\n    keyMaps: [],  // stores maps added by addKeyMap\n    overlays: [], // highlighting overlays, as added by addOverlay\n    modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n    overwrite: false,\n    delayingBlurEvent: false,\n    focused: false,\n    suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n    pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n    selectingText: false,\n    draggingText: false,\n    highlight: new Delayed(), // stores highlight worker timeout\n    keySeq: null,  // Unfinished key sequence\n    specialChars: null\n  }\n\n  if (options.autofocus && !mobile) display.input.focus()\n\n  // Override magic textarea content restore that IE sometimes does\n  // on our hidden textarea on reload\n  if (ie && ie_version < 11) setTimeout(() => this.display.input.reset(true), 20)\n\n  registerEventHandlers(this)\n  ensureGlobalHandlers()\n\n  startOperation(this)\n  this.curOp.forceUpdate = true\n  attachDoc(this, doc)\n\n  if ((options.autofocus && !mobile) || this.hasFocus())\n    setTimeout(() => {\n      if (this.hasFocus() && !this.state.focused) onFocus(this)\n    }, 20)\n  else\n    onBlur(this)\n\n  for (let opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))\n    optionHandlers[opt](this, options[opt], Init)\n  maybeUpdateLineNumberWidth(this)\n  if (options.finishInit) options.finishInit(this)\n  for (let i = 0; i < initHooks.length; ++i) initHooks[i](this)\n  endOperation(this)\n  // Suppress optimizelegibility in Webkit, since it breaks text\n  // measuring on line wrapping boundaries.\n  if (webkit && options.lineWrapping &&\n      getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n    display.lineDiv.style.textRendering = \"auto\"\n}\n\n// The default configuration options.\nCodeMirror.defaults = defaults\n// Functions to run when options are changed.\nCodeMirror.optionHandlers = optionHandlers\n\nexport default CodeMirror\n\n// Attach the necessary event handlers when initializing the editor\nfunction registerEventHandlers(cm) {\n  let d = cm.display\n  on(d.scroller, \"mousedown\", operation(cm, onMouseDown))\n  // Older IE's will not fire a second mousedown for a double click\n  if (ie && ie_version < 11)\n    on(d.scroller, \"dblclick\", operation(cm, e => {\n      if (signalDOMEvent(cm, e)) return\n      let pos = posFromMouse(cm, e)\n      if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return\n      e_preventDefault(e)\n      let word = cm.findWordAt(pos)\n      extendSelection(cm.doc, word.anchor, word.head)\n    }))\n  else\n    on(d.scroller, \"dblclick\", e => signalDOMEvent(cm, e) || e_preventDefault(e))\n  // Some browsers fire contextmenu *after* opening the menu, at\n  // which point we can't mess with it anymore. Context menu is\n  // handled in onMouseDown for these browsers.\n  on(d.scroller, \"contextmenu\", e => onContextMenu(cm, e))\n  on(d.input.getField(), \"contextmenu\", e => {\n    if (!d.scroller.contains(e.target)) onContextMenu(cm, e)\n  })\n\n  // Used to suppress mouse event handling when a touch happens\n  let touchFinished, prevTouch = {end: 0}\n  function finishTouch() {\n    if (d.activeTouch) {\n      touchFinished = setTimeout(() => d.activeTouch = null, 1000)\n      prevTouch = d.activeTouch\n      prevTouch.end = +new Date\n    }\n  }\n  function isMouseLikeTouchEvent(e) {\n    if (e.touches.length != 1) return false\n    let touch = e.touches[0]\n    return touch.radiusX <= 1 && touch.radiusY <= 1\n  }\n  function farAway(touch, other) {\n    if (other.left == null) return true\n    let dx = other.left - touch.left, dy = other.top - touch.top\n    return dx * dx + dy * dy > 20 * 20\n  }\n  on(d.scroller, \"touchstart\", e => {\n    if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n      d.input.ensurePolled()\n      clearTimeout(touchFinished)\n      let now = +new Date\n      d.activeTouch = {start: now, moved: false,\n                       prev: now - prevTouch.end <= 300 ? prevTouch : null}\n      if (e.touches.length == 1) {\n        d.activeTouch.left = e.touches[0].pageX\n        d.activeTouch.top = e.touches[0].pageY\n      }\n    }\n  })\n  on(d.scroller, \"touchmove\", () => {\n    if (d.activeTouch) d.activeTouch.moved = true\n  })\n  on(d.scroller, \"touchend\", e => {\n    let touch = d.activeTouch\n    if (touch && !eventInWidget(d, e) && touch.left != null &&\n        !touch.moved && new Date - touch.start < 300) {\n      let pos = cm.coordsChar(d.activeTouch, \"page\"), range\n      if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n        range = new Range(pos, pos)\n      else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n        range = cm.findWordAt(pos)\n      else // Triple tap\n        range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)))\n      cm.setSelection(range.anchor, range.head)\n      cm.focus()\n      e_preventDefault(e)\n    }\n    finishTouch()\n  })\n  on(d.scroller, \"touchcancel\", finishTouch)\n\n  // Sync scrolling between fake scrollbars and real scrollable\n  // area, ensure viewport is updated when scrolling.\n  on(d.scroller, \"scroll\", () => {\n    if (d.scroller.clientHeight) {\n      updateScrollTop(cm, d.scroller.scrollTop)\n      setScrollLeft(cm, d.scroller.scrollLeft, true)\n      signal(cm, \"scroll\", cm)\n    }\n  })\n\n  // Listen to wheel events in order to try and update the viewport on time.\n  on(d.scroller, \"mousewheel\", e => onScrollWheel(cm, e))\n  on(d.scroller, \"DOMMouseScroll\", e => onScrollWheel(cm, e))\n\n  // Prevent wrapper from ever scrolling\n  on(d.wrapper, \"scroll\", () => d.wrapper.scrollTop = d.wrapper.scrollLeft = 0)\n\n  d.dragFunctions = {\n    enter: e => {if (!signalDOMEvent(cm, e)) e_stop(e)},\n    over: e => {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e) }},\n    start: e => onDragStart(cm, e),\n    drop: operation(cm, onDrop),\n    leave: e => {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm) }}\n  }\n\n  let inp = d.input.getField()\n  on(inp, \"keyup\", e => onKeyUp.call(cm, e))\n  on(inp, \"keydown\", operation(cm, onKeyDown))\n  on(inp, \"keypress\", operation(cm, onKeyPress))\n  on(inp, \"focus\", e => onFocus(cm, e))\n  on(inp, \"blur\", e => onBlur(cm, e))\n}\n\nlet initHooks = []\nCodeMirror.defineInitHook = f => initHooks.push(f)\n","import { getContextBefore } from \"../line/highlight.js\"\nimport { Pos } from \"../line/pos.js\"\nimport { getLine } from \"../line/utils_line.js\"\nimport { replaceRange } from \"../model/changes.js\"\nimport { Range } from \"../model/selection.js\"\nimport { replaceOneSelection } from \"../model/selection_updates.js\"\nimport { countColumn, Pass, spaceStr } from \"../util/misc.js\"\n\n// Indent the given line. The how parameter can be \"smart\",\n// \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n// (typically set to true for forced single-line indents), empty\n// lines are not indented, and places where the mode returns Pass\n// are left alone.\nexport function indentLine(cm, n, how, aggressive) {\n  let doc = cm.doc, state\n  if (how == null) how = \"add\"\n  if (how == \"smart\") {\n    // Fall back to \"prev\" when the mode doesn't have an indentation\n    // method.\n    if (!doc.mode.indent) how = \"prev\"\n    else state = getContextBefore(cm, n).state\n  }\n\n  let tabSize = cm.options.tabSize\n  let line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize)\n  if (line.stateAfter) line.stateAfter = null\n  let curSpaceString = line.text.match(/^\\s*/)[0], indentation\n  if (!aggressive && !/\\S/.test(line.text)) {\n    indentation = 0\n    how = \"not\"\n  } else if (how == \"smart\") {\n    indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text)\n    if (indentation == Pass || indentation > 150) {\n      if (!aggressive) return\n      how = \"prev\"\n    }\n  }\n  if (how == \"prev\") {\n    if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize)\n    else indentation = 0\n  } else if (how == \"add\") {\n    indentation = curSpace + cm.options.indentUnit\n  } else if (how == \"subtract\") {\n    indentation = curSpace - cm.options.indentUnit\n  } else if (typeof how == \"number\") {\n    indentation = curSpace + how\n  }\n  indentation = Math.max(0, indentation)\n\n  let indentString = \"\", pos = 0\n  if (cm.options.indentWithTabs)\n    for (let i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\"}\n  if (pos < indentation) indentString += spaceStr(indentation - pos)\n\n  if (indentString != curSpaceString) {\n    replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\")\n    line.stateAfter = null\n    return true\n  } else {\n    // Ensure that, if the cursor was in the whitespace at the start\n    // of the line, it is moved to the end of that space.\n    for (let i = 0; i < doc.sel.ranges.length; i++) {\n      let range = doc.sel.ranges[i]\n      if (range.head.line == n && range.head.ch < curSpaceString.length) {\n        let pos = Pos(n, curSpaceString.length)\n        replaceOneSelection(doc, i, new Range(pos, pos))\n        break\n      }\n    }\n  }\n}\n","import { runInOp } from \"../display/operations.js\"\nimport { ensureCursorVisible } from \"../display/scrolling.js\"\nimport { Pos } from \"../line/pos.js\"\nimport { getLine } from \"../line/utils_line.js\"\nimport { makeChange } from \"../model/changes.js\"\nimport { ios, webkit } from \"../util/browser.js\"\nimport { elt } from \"../util/dom.js\"\nimport { lst, map } from \"../util/misc.js\"\nimport { signalLater } from \"../util/operation_group.js\"\nimport { splitLinesAuto } from \"../util/feature_detection.js\"\n\nimport { indentLine } from \"./indent.js\"\n\n// This will be set to a {lineWise: bool, text: [string]} object, so\n// that, when pasting, we know what kind of selections the copied\n// text was made out of.\nexport let lastCopied = null\n\nexport function setLastCopied(newLastCopied) {\n  lastCopied = newLastCopied\n}\n\nexport function applyTextInput(cm, inserted, deleted, sel, origin) {\n  let doc = cm.doc\n  cm.display.shift = false\n  if (!sel) sel = doc.sel\n\n  let recent = +new Date - 200\n  let paste = origin == \"paste\" || cm.state.pasteIncoming > recent\n  let textLines = splitLinesAuto(inserted), multiPaste = null\n  // When pasting N lines into N selections, insert one line per selection\n  if (paste && sel.ranges.length > 1) {\n    if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n      if (sel.ranges.length % lastCopied.text.length == 0) {\n        multiPaste = []\n        for (let i = 0; i < lastCopied.text.length; i++)\n          multiPaste.push(doc.splitLines(lastCopied.text[i]))\n      }\n    } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n      multiPaste = map(textLines, l => [l])\n    }\n  }\n\n  let updateInput = cm.curOp.updateInput\n  // Normal behavior is to insert the new text into every selection\n  for (let i = sel.ranges.length - 1; i >= 0; i--) {\n    let range = sel.ranges[i]\n    let from = range.from(), to = range.to()\n    if (range.empty()) {\n      if (deleted && deleted > 0) // Handle deletion\n        from = Pos(from.line, from.ch - deleted)\n      else if (cm.state.overwrite && !paste) // Handle overwrite\n        to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length))\n      else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n        from = to = Pos(from.line, 0)\n    }\n    let changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,\n                       origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")}\n    makeChange(cm.doc, changeEvent)\n    signalLater(cm, \"inputRead\", cm, changeEvent)\n  }\n  if (inserted && !paste)\n    triggerElectric(cm, inserted)\n\n  ensureCursorVisible(cm)\n  if (cm.curOp.updateInput < 2) cm.curOp.updateInput = updateInput\n  cm.curOp.typing = true\n  cm.state.pasteIncoming = cm.state.cutIncoming = -1\n}\n\nexport function handlePaste(e, cm) {\n  let pasted = e.clipboardData && e.clipboardData.getData(\"Text\")\n  if (pasted) {\n    e.preventDefault()\n    if (!cm.isReadOnly() && !cm.options.disableInput)\n      runInOp(cm, () => applyTextInput(cm, pasted, 0, null, \"paste\"))\n    return true\n  }\n}\n\nexport function triggerElectric(cm, inserted) {\n  // When an 'electric' character is inserted, immediately trigger a reindent\n  if (!cm.options.electricChars || !cm.options.smartIndent) return\n  let sel = cm.doc.sel\n\n  for (let i = sel.ranges.length - 1; i >= 0; i--) {\n    let range = sel.ranges[i]\n    if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) continue\n    let mode = cm.getModeAt(range.head)\n    let indented = false\n    if (mode.electricChars) {\n      for (let j = 0; j < mode.electricChars.length; j++)\n        if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n          indented = indentLine(cm, range.head.line, \"smart\")\n          break\n        }\n    } else if (mode.electricInput) {\n      if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n        indented = indentLine(cm, range.head.line, \"smart\")\n    }\n    if (indented) signalLater(cm, \"electricInput\", cm, range.head.line)\n  }\n}\n\nexport function copyableRanges(cm) {\n  let text = [], ranges = []\n  for (let i = 0; i < cm.doc.sel.ranges.length; i++) {\n    let line = cm.doc.sel.ranges[i].head.line\n    let lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)}\n    ranges.push(lineRange)\n    text.push(cm.getRange(lineRange.anchor, lineRange.head))\n  }\n  return {text: text, ranges: ranges}\n}\n\nexport function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n  field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\")\n  field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\")\n  field.setAttribute(\"spellcheck\", !!spellcheck)\n}\n\nexport function hiddenTextarea() {\n  let te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\")\n  let div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\")\n  // The textarea is kept positioned near the cursor to prevent the\n  // fact that it'll be scrolled into view on input from scrolling\n  // our fake cursor out of view. On webkit, when wrap=off, paste is\n  // very slow. So make the area wide instead.\n  if (webkit) te.style.width = \"1000px\"\n  else te.setAttribute(\"wrap\", \"off\")\n  // If border: 0; -- iOS fails to open keyboard (issue #1287)\n  if (ios) te.style.border = \"1px solid black\"\n  disableBrowserMagic(te)\n  return div\n}\n","import { deleteNearSelection } from \"./deleteNearSelection.js\"\nimport { commands } from \"./commands.js\"\nimport { attachDoc } from \"../model/document_data.js\"\nimport { activeElt, addClass, rmClass } from \"../util/dom.js\"\nimport { eventMixin, signal } from \"../util/event.js\"\nimport { getLineStyles, getContextBefore, takeToken } from \"../line/highlight.js\"\nimport { indentLine } from \"../input/indent.js\"\nimport { triggerElectric } from \"../input/input.js\"\nimport { onKeyDown, onKeyPress, onKeyUp } from \"./key_events.js\"\nimport { onMouseDown } from \"./mouse_events.js\"\nimport { getKeyMap } from \"../input/keymap.js\"\nimport { endOfLine, moveLogically, moveVisually } from \"../input/movement.js\"\nimport { endOperation, methodOp, operation, runInOp, startOperation } from \"../display/operations.js\"\nimport { clipLine, clipPos, equalCursorPos, Pos } from \"../line/pos.js\"\nimport { charCoords, charWidth, clearCaches, clearLineMeasurementCache, coordsChar, cursorCoords, displayHeight, displayWidth, estimateLineHeights, fromCoordSystem, intoCoordSystem, scrollGap, textHeight } from \"../measurement/position_measurement.js\"\nimport { Range } from \"../model/selection.js\"\nimport { replaceOneSelection, skipAtomic } from \"../model/selection_updates.js\"\nimport { addToScrollTop, ensureCursorVisible, scrollIntoView, scrollToCoords, scrollToCoordsRange, scrollToRange } from \"../display/scrolling.js\"\nimport { heightAtLine } from \"../line/spans.js\"\nimport { updateGutterSpace } from \"../display/update_display.js\"\nimport { indexOf, insertSorted, isWordChar, sel_dontScroll, sel_move } from \"../util/misc.js\"\nimport { signalLater } from \"../util/operation_group.js\"\nimport { getLine, isLine, lineAtHeight } from \"../line/utils_line.js\"\nimport { regChange, regLineChange } from \"../display/view_tracking.js\"\n\n// The publicly visible API. Note that methodOp(f) means\n// 'wrap f in an operation, performed on its `this` parameter'.\n\n// This is not the complete set of editor methods. Most of the\n// methods defined on the Doc type are also injected into\n// CodeMirror.prototype, for backwards compatibility and\n// convenience.\n\nexport default function(CodeMirror) {\n  let optionHandlers = CodeMirror.optionHandlers\n\n  let helpers = CodeMirror.helpers = {}\n\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function(){window.focus(); this.display.input.focus()},\n\n    setOption: function(option, value) {\n      let options = this.options, old = options[option]\n      if (options[option] == value && option != \"mode\") return\n      options[option] = value\n      if (optionHandlers.hasOwnProperty(option))\n        operation(this, optionHandlers[option])(this, value, old)\n      signal(this, \"optionChange\", this, option)\n    },\n\n    getOption: function(option) {return this.options[option]},\n    getDoc: function() {return this.doc},\n\n    addKeyMap: function(map, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map))\n    },\n    removeKeyMap: function(map) {\n      let maps = this.state.keyMaps\n      for (let i = 0; i < maps.length; ++i)\n        if (maps[i] == map || maps[i].name == map) {\n          maps.splice(i, 1)\n          return true\n        }\n    },\n\n    addOverlay: methodOp(function(spec, options) {\n      let mode = spec.token ? spec : CodeMirror.getMode(this.options, spec)\n      if (mode.startState) throw new Error(\"Overlays may not be stateful.\")\n      insertSorted(this.state.overlays,\n                   {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                    priority: (options && options.priority) || 0},\n                   overlay => overlay.priority)\n      this.state.modeGen++\n      regChange(this)\n    }),\n    removeOverlay: methodOp(function(spec) {\n      let overlays = this.state.overlays\n      for (let i = 0; i < overlays.length; ++i) {\n        let cur = overlays[i].modeSpec\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1)\n          this.state.modeGen++\n          regChange(this)\n          return\n        }\n      }\n    }),\n\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null) dir = this.options.smartIndent ? \"smart\" : \"prev\"\n        else dir = dir ? \"add\" : \"subtract\"\n      }\n      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive)\n    }),\n    indentSelection: methodOp(function(how) {\n      let ranges = this.doc.sel.ranges, end = -1\n      for (let i = 0; i < ranges.length; i++) {\n        let range = ranges[i]\n        if (!range.empty()) {\n          let from = range.from(), to = range.to()\n          let start = Math.max(end, from.line)\n          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1\n          for (let j = start; j < end; ++j)\n            indentLine(this, j, how)\n          let newRanges = this.doc.sel.ranges\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll)\n        } else if (range.head.line > end) {\n          indentLine(this, range.head.line, how, true)\n          end = range.head.line\n          if (i == this.doc.sel.primIndex) ensureCursorVisible(this)\n        }\n      }\n    }),\n\n    // Fetch the parser token for a given character. Useful for hacks\n    // that want to inspect the mode state (say, for completion).\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise)\n    },\n\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true)\n    },\n\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos)\n      let styles = getLineStyles(this, getLine(this.doc, pos.line))\n      let before = 0, after = (styles.length - 1) / 2, ch = pos.ch\n      let type\n      if (ch == 0) type = styles[2]\n      else for (;;) {\n        let mid = (before + after) >> 1\n        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid\n        else if (styles[mid * 2 + 1] < ch) before = mid + 1\n        else { type = styles[mid * 2 + 2]; break }\n      }\n      let cut = type ? type.indexOf(\"overlay \") : -1\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n    },\n\n    getModeAt: function(pos) {\n      let mode = this.doc.mode\n      if (!mode.innerMode) return mode\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n    },\n\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0]\n    },\n\n    getHelpers: function(pos, type) {\n      let found = []\n      if (!helpers.hasOwnProperty(type)) return found\n      let help = helpers[type], mode = this.getModeAt(pos)\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]]) found.push(help[mode[type]])\n      } else if (mode[type]) {\n        for (let i = 0; i < mode[type].length; i++) {\n          let val = help[mode[type][i]]\n          if (val) found.push(val)\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType])\n      } else if (help[mode.name]) {\n        found.push(help[mode.name])\n      }\n      for (let i = 0; i < help._global.length; i++) {\n        let cur = help._global[i]\n        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n          found.push(cur.val)\n      }\n      return found\n    },\n\n    getStateAfter: function(line, precise) {\n      let doc = this.doc\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line)\n      return getContextBefore(this, line + 1, precise).state\n    },\n\n    cursorCoords: function(start, mode) {\n      let pos, range = this.doc.sel.primary()\n      if (start == null) pos = range.head\n      else if (typeof start == \"object\") pos = clipPos(this.doc, start)\n      else pos = start ? range.from() : range.to()\n      return cursorCoords(this, pos, mode || \"page\")\n    },\n\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n    },\n\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\")\n      return coordsChar(this, coords.left, coords.top)\n    },\n\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top\n      return lineAtHeight(this.doc, height + this.display.viewOffset)\n    },\n    heightAtLine: function(line, mode, includeWidgets) {\n      let end = false, lineObj\n      if (typeof line == \"number\") {\n        let last = this.doc.first + this.doc.size - 1\n        if (line < this.doc.first) line = this.doc.first\n        else if (line > last) { line = last; end = true }\n        lineObj = getLine(this.doc, line)\n      } else {\n        lineObj = line\n      }\n      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n        (end ? this.doc.height - heightAtLine(lineObj) : 0)\n    },\n\n    defaultTextHeight: function() { return textHeight(this.display) },\n    defaultCharWidth: function() { return charWidth(this.display) },\n\n    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      let display = this.display\n      pos = cursorCoords(this, clipPos(this.doc, pos))\n      let top = pos.bottom, left = pos.left\n      node.style.position = \"absolute\"\n      node.setAttribute(\"cm-ignore-events\", \"true\")\n      this.display.input.setUneditable(node)\n      display.sizer.appendChild(node)\n      if (vert == \"over\") {\n        top = pos.top\n      } else if (vert == \"above\" || vert == \"near\") {\n        let vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth)\n        // Default to positioning above (if specified and possible); otherwise default to positioning below\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          top = pos.top - node.offsetHeight\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          top = pos.bottom\n        if (left + node.offsetWidth > hspace)\n          left = hspace - node.offsetWidth\n      }\n      node.style.top = top + \"px\"\n      node.style.left = node.style.right = \"\"\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth\n        node.style.right = \"0px\"\n      } else {\n        if (horiz == \"left\") left = 0\n        else if (horiz == \"middle\") left = (display.sizer.clientWidth - node.offsetWidth) / 2\n        node.style.left = left + \"px\"\n      }\n      if (scroll)\n        scrollIntoView(this, {left, top, right: left + node.offsetWidth, bottom: top + node.offsetHeight})\n    },\n\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n    triggerOnMouseDown: methodOp(onMouseDown),\n\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        return commands[cmd].call(null, this)\n    },\n\n    triggerElectric: methodOp(function(text) { triggerElectric(this, text) }),\n\n    findPosH: function(from, amount, unit, visually) {\n      let dir = 1\n      if (amount < 0) { dir = -1; amount = -amount }\n      let cur = clipPos(this.doc, from)\n      for (let i = 0; i < amount; ++i) {\n        cur = findPosH(this.doc, cur, dir, unit, visually)\n        if (cur.hitSide) break\n      }\n      return cur\n    },\n\n    moveH: methodOp(function(dir, unit) {\n      this.extendSelectionsBy(range => {\n        if (this.display.shift || this.doc.extend || range.empty())\n          return findPosH(this.doc, range.head, dir, unit, this.options.rtlMoveVisually)\n        else\n          return dir < 0 ? range.from() : range.to()\n      }, sel_move)\n    }),\n\n    deleteH: methodOp(function(dir, unit) {\n      let sel = this.doc.sel, doc = this.doc\n      if (sel.somethingSelected())\n        doc.replaceSelection(\"\", null, \"+delete\")\n      else\n        deleteNearSelection(this, range => {\n          let other = findPosH(doc, range.head, dir, unit, false)\n          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n        })\n    }),\n\n    findPosV: function(from, amount, unit, goalColumn) {\n      let dir = 1, x = goalColumn\n      if (amount < 0) { dir = -1; amount = -amount }\n      let cur = clipPos(this.doc, from)\n      for (let i = 0; i < amount; ++i) {\n        let coords = cursorCoords(this, cur, \"div\")\n        if (x == null) x = coords.left\n        else coords.left = x\n        cur = findPosV(this, coords, dir, unit)\n        if (cur.hitSide) break\n      }\n      return cur\n    },\n\n    moveV: methodOp(function(dir, unit) {\n      let doc = this.doc, goals = []\n      let collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected()\n      doc.extendSelectionsBy(range => {\n        if (collapse)\n          return dir < 0 ? range.from() : range.to()\n        let headPos = cursorCoords(this, range.head, \"div\")\n        if (range.goalColumn != null) headPos.left = range.goalColumn\n        goals.push(headPos.left)\n        let pos = findPosV(this, headPos, dir, unit)\n        if (unit == \"page\" && range == doc.sel.primary())\n          addToScrollTop(this, charCoords(this, pos, \"div\").top - headPos.top)\n        return pos\n      }, sel_move)\n      if (goals.length) for (let i = 0; i < doc.sel.ranges.length; i++)\n        doc.sel.ranges[i].goalColumn = goals[i]\n    }),\n\n    // Find the word at the given position (as returned by coordsChar).\n    findWordAt: function(pos) {\n      let doc = this.doc, line = getLine(doc, pos.line).text\n      let start = pos.ch, end = pos.ch\n      if (line) {\n        let helper = this.getHelper(pos, \"wordChars\")\n        if ((pos.sticky == \"before\" || end == line.length) && start) --start; else ++end\n        let startChar = line.charAt(start)\n        let check = isWordChar(startChar, helper)\n          ? ch => isWordChar(ch, helper)\n          : /\\s/.test(startChar) ? ch => /\\s/.test(ch)\n          : ch => (!/\\s/.test(ch) && !isWordChar(ch))\n        while (start > 0 && check(line.charAt(start - 1))) --start\n        while (end < line.length && check(line.charAt(end))) ++end\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end))\n    },\n\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite) return\n      if (this.state.overwrite = !this.state.overwrite)\n        addClass(this.display.cursorDiv, \"CodeMirror-overwrite\")\n      else\n        rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\")\n\n      signal(this, \"overwriteToggle\", this, this.state.overwrite)\n    },\n    hasFocus: function() { return this.display.input.getField() == activeElt() },\n    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n    scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y) }),\n    getScrollInfo: function() {\n      let scroller = this.display.scroller\n      return {left: scroller.scrollLeft, top: scroller.scrollTop,\n              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n              clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n    },\n\n    scrollIntoView: methodOp(function(range, margin) {\n      if (range == null) {\n        range = {from: this.doc.sel.primary().head, to: null}\n        if (margin == null) margin = this.options.cursorScrollMargin\n      } else if (typeof range == \"number\") {\n        range = {from: Pos(range, 0), to: null}\n      } else if (range.from == null) {\n        range = {from: range, to: null}\n      }\n      if (!range.to) range.to = range.from\n      range.margin = margin || 0\n\n      if (range.from.line != null) {\n        scrollToRange(this, range)\n      } else {\n        scrollToCoordsRange(this, range.from, range.to, range.margin)\n      }\n    }),\n\n    setSize: methodOp(function(width, height) {\n      let interpret = val => typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val\n      if (width != null) this.display.wrapper.style.width = interpret(width)\n      if (height != null) this.display.wrapper.style.height = interpret(height)\n      if (this.options.lineWrapping) clearLineMeasurementCache(this)\n      let lineNo = this.display.viewFrom\n      this.doc.iter(lineNo, this.display.viewTo, line => {\n        if (line.widgets) for (let i = 0; i < line.widgets.length; i++)\n          if (line.widgets[i].noHScroll) { regLineChange(this, lineNo, \"widget\"); break }\n        ++lineNo\n      })\n      this.curOp.forceUpdate = true\n      signal(this, \"refresh\", this)\n    }),\n\n    operation: function(f){return runInOp(this, f)},\n    startOperation: function(){return startOperation(this)},\n    endOperation: function(){return endOperation(this)},\n\n    refresh: methodOp(function() {\n      let oldHeight = this.display.cachedTextHeight\n      regChange(this)\n      this.curOp.forceUpdate = true\n      clearCaches(this)\n      scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop)\n      updateGutterSpace(this.display)\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n        estimateLineHeights(this)\n      signal(this, \"refresh\", this)\n    }),\n\n    swapDoc: methodOp(function(doc) {\n      let old = this.doc\n      old.cm = null\n      // Cancel the current text selection if any (#5821)\n      if (this.state.selectingText) this.state.selectingText()\n      attachDoc(this, doc)\n      clearCaches(this)\n      this.display.input.reset()\n      scrollToCoords(this, doc.scrollLeft, doc.scrollTop)\n      this.curOp.forceScroll = true\n      signalLater(this, \"swapDoc\", this, old)\n      return old\n    }),\n\n    phrase: function(phraseText) {\n      let phrases = this.options.phrases\n      return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n    },\n\n    getInputField: function(){return this.display.input.getField()},\n    getWrapperElement: function(){return this.display.wrapper},\n    getScrollerElement: function(){return this.display.scroller},\n    getGutterElement: function(){return this.display.gutters}\n  }\n  eventMixin(CodeMirror)\n\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []}\n    helpers[type][name] = value\n  }\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value)\n    helpers[type]._global.push({pred: predicate, val: value})\n  }\n}\n\n// Used for horizontal relative motion. Dir is -1 or 1 (left or\n// right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n// doesn't cross line boundaries), \"word\" (across next word), or\n// \"group\" (to the start of next group of word or\n// non-word-non-whitespace chars). The visually param controls\n// whether, in right-to-left text, direction 1 means to move towards\n// the next index in the string, or towards the character to the right\n// of the current position. The resulting position will have a\n// hitSide=true property if it reached the end of the document.\nfunction findPosH(doc, pos, dir, unit, visually) {\n  let oldPos = pos\n  let origDir = dir\n  let lineObj = getLine(doc, pos.line)\n  let lineDir = visually && doc.direction == \"rtl\" ? -dir : dir\n  function findNextLine() {\n    let l = pos.line + lineDir\n    if (l < doc.first || l >= doc.first + doc.size) return false\n    pos = new Pos(l, pos.ch, pos.sticky)\n    return lineObj = getLine(doc, l)\n  }\n  function moveOnce(boundToLine) {\n    let next\n    if (unit == \"codepoint\") {\n      let ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1))\n      if (isNaN(ch)) {\n        next = null\n      } else {\n        let astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF\n        next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir)\n      }\n    } else if (visually) {\n      next = moveVisually(doc.cm, lineObj, pos, dir)\n    } else {\n      next = moveLogically(lineObj, pos, dir)\n    }\n    if (next == null) {\n      if (!boundToLine && findNextLine())\n        pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir)\n      else\n        return false\n    } else {\n      pos = next\n    }\n    return true\n  }\n\n  if (unit == \"char\" || unit == \"codepoint\") {\n    moveOnce()\n  } else if (unit == \"column\") {\n    moveOnce(true)\n  } else if (unit == \"word\" || unit == \"group\") {\n    let sawType = null, group = unit == \"group\"\n    let helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\")\n    for (let first = true;; first = false) {\n      if (dir < 0 && !moveOnce(!first)) break\n      let cur = lineObj.text.charAt(pos.ch) || \"\\n\"\n      let type = isWordChar(cur, helper) ? \"w\"\n        : group && cur == \"\\n\" ? \"n\"\n        : !group || /\\s/.test(cur) ? null\n        : \"p\"\n      if (group && !first && !type) type = \"s\"\n      if (sawType && sawType != type) {\n        if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\"}\n        break\n      }\n\n      if (type) sawType = type\n      if (dir > 0 && !moveOnce(!first)) break\n    }\n  }\n  let result = skipAtomic(doc, pos, oldPos, origDir, true)\n  if (equalCursorPos(oldPos, result)) result.hitSide = true\n  return result\n}\n\n// For relative vertical movement. Dir may be -1 or 1. Unit can be\n// \"page\" or \"line\". The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosV(cm, pos, dir, unit) {\n  let doc = cm.doc, x = pos.left, y\n  if (unit == \"page\") {\n    let pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight)\n    let moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3)\n    y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount\n\n  } else if (unit == \"line\") {\n    y = dir > 0 ? pos.bottom + 3 : pos.top - 3\n  }\n  let target\n  for (;;) {\n    target = coordsChar(cm, x, y)\n    if (!target.outside) break\n    if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n    y += dir * 5\n  }\n  return target\n}\n","import { operation, runInOp } from \"../display/operations.js\"\nimport { prepareSelection } from \"../display/selection.js\"\nimport { regChange } from \"../display/view_tracking.js\"\nimport { applyTextInput, copyableRanges, disableBrowserMagic, handlePaste, hiddenTextarea, lastCopied, setLastCopied } from \"./input.js\"\nimport { cmp, maxPos, minPos, Pos } from \"../line/pos.js\"\nimport { getBetween, getLine, lineNo } from \"../line/utils_line.js\"\nimport { findViewForLine, findViewIndex, mapFromLineView, nodeAndOffsetInLineMap } from \"../measurement/position_measurement.js\"\nimport { replaceRange } from \"../model/changes.js\"\nimport { simpleSelection } from \"../model/selection.js\"\nimport { setSelection } from \"../model/selection_updates.js\"\nimport { getBidiPartAt, getOrder } from \"../util/bidi.js\"\nimport { android, chrome, gecko, ie_version } from \"../util/browser.js\"\nimport { activeElt, contains, range, removeChildrenAndAdd, selectInput } from \"../util/dom.js\"\nimport { on, signalDOMEvent } from \"../util/event.js\"\nimport { Delayed, lst, sel_dontScroll } from \"../util/misc.js\"\n\n// CONTENTEDITABLE INPUT STYLE\n\nexport default class ContentEditableInput {\n  constructor(cm) {\n    this.cm = cm\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null\n    this.polling = new Delayed()\n    this.composing = null\n    this.gracePeriod = false\n    this.readDOMTimeout = null\n  }\n\n  init(display) {\n    let input = this, cm = input.cm\n    let div = input.div = display.lineDiv\n    div.contentEditable = true\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize)\n\n    function belongsToInput(e) {\n      for (let t = e.target; t; t = t.parentNode) {\n        if (t == div) return true\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) break\n      }\n      return false\n    }\n\n    on(div, \"paste\", e => {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) return\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) setTimeout(operation(cm, () => this.updateFromDOM()), 20)\n    })\n\n    on(div, \"compositionstart\", e => {\n      this.composing = {data: e.data, done: false}\n    })\n    on(div, \"compositionupdate\", e => {\n      if (!this.composing) this.composing = {data: e.data, done: false}\n    })\n    on(div, \"compositionend\", e => {\n      if (this.composing) {\n        if (e.data != this.composing.data) this.readFromDOMSoon()\n        this.composing.done = true\n      }\n    })\n\n    on(div, \"touchstart\", () => input.forceCompositionEnd())\n\n    on(div, \"input\", () => {\n      if (!this.composing) this.readFromDOMSoon()\n    })\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) return\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()})\n        if (e.type == \"cut\") cm.replaceSelection(\"\", null, \"cut\")\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        let ranges = copyableRanges(cm)\n        setLastCopied({lineWise: true, text: ranges.text})\n        if (e.type == \"cut\") {\n          cm.operation(() => {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll)\n            cm.replaceSelection(\"\", null, \"cut\")\n          })\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData()\n        let content = lastCopied.text.join(\"\\n\")\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content)\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault()\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      let kludge = hiddenTextarea(), te = kludge.firstChild\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild)\n      te.value = lastCopied.text.join(\"\\n\")\n      let hadFocus = activeElt()\n      selectInput(te)\n      setTimeout(() => {\n        cm.display.lineSpace.removeChild(kludge)\n        hadFocus.focus()\n        if (hadFocus == div) input.showPrimarySelection()\n      }, 50)\n    }\n    on(div, \"copy\", onCopyCut)\n    on(div, \"cut\", onCopyCut)\n  }\n\n  screenReaderLabelChanged(label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label)\n    } else {\n      this.div.removeAttribute('aria-label')\n    }\n  }\n\n  prepareSelection() {\n    let result = prepareSelection(this.cm, false)\n    result.focus = activeElt() == this.div\n    return result\n  }\n\n  showSelection(info, takeFocus) {\n    if (!info || !this.cm.display.view.length) return\n    if (info.focus || takeFocus) this.showPrimarySelection()\n    this.showMultipleSelections(info)\n  }\n\n  getSelection() {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  }\n\n  showPrimarySelection() {\n    let sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary()\n    let from = prim.from(), to = prim.to()\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges()\n      return\n    }\n\n    let curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset)\n    let curFocus = domToPos(cm, sel.focusNode, sel.focusOffset)\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      return\n\n    let view = cm.display.view\n    let start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0}\n    let end = to.line < cm.display.viewTo && posToDOM(cm, to)\n    if (!end) {\n      let measure = view[view.length - 1].measure\n      let map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]}\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges()\n      return\n    }\n\n    let old = sel.rangeCount && sel.getRangeAt(0), rng\n    try { rng = range(start.node, start.offset, end.offset, end.node) }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset)\n        if (!rng.collapsed) {\n          sel.removeAllRanges()\n          sel.addRange(rng)\n        }\n      } else {\n        sel.removeAllRanges()\n        sel.addRange(rng)\n      }\n      if (old && sel.anchorNode == null) sel.addRange(old)\n      else if (gecko) this.startGracePeriod()\n    }\n    this.rememberSelection()\n  }\n\n  startGracePeriod() {\n    clearTimeout(this.gracePeriod)\n    this.gracePeriod = setTimeout(() => {\n      this.gracePeriod = false\n      if (this.selectionChanged())\n        this.cm.operation(() => this.cm.curOp.selectionChanged = true)\n    }, 20)\n  }\n\n  showMultipleSelections(info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors)\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection)\n  }\n\n  rememberSelection() {\n    let sel = this.getSelection()\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset\n  }\n\n  selectionInEditor() {\n    let sel = this.getSelection()\n    if (!sel.rangeCount) return false\n    let node = sel.getRangeAt(0).commonAncestorContainer\n    return contains(this.div, node)\n  }\n\n  focus() {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt() != this.div)\n        this.showSelection(this.prepareSelection(), true)\n      this.div.focus()\n    }\n  }\n  blur() { this.div.blur() }\n  getField() { return this.div }\n\n  supportsTouch() { return true }\n\n  receivedFocus() {\n    let input = this\n    if (this.selectionInEditor())\n      this.pollSelection()\n    else\n      runInOp(this.cm, () => input.cm.curOp.selectionChanged = true)\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection()\n        input.polling.set(input.cm.options.pollInterval, poll)\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll)\n  }\n\n  selectionChanged() {\n    let sel = this.getSelection()\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  }\n\n  pollSelection() {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) return\n    let sel = this.getSelection(), cm = this.cm\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs})\n      this.blur()\n      this.focus()\n      return\n    }\n    if (this.composing) return\n    this.rememberSelection()\n    let anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset)\n    let head = domToPos(cm, sel.focusNode, sel.focusOffset)\n    if (anchor && head) runInOp(cm, () => {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll)\n      if (anchor.bad || head.bad) cm.curOp.selectionChanged = true\n    })\n  }\n\n  pollContent() {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout)\n      this.readDOMTimeout = null\n    }\n\n    let cm = this.cm, display = cm.display, sel = cm.doc.sel.primary()\n    let from = sel.from(), to = sel.to()\n    if (from.ch == 0 && from.line > cm.firstLine())\n      from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length)\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      to = Pos(to.line + 1, 0)\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) return false\n\n    let fromIndex, fromLine, fromNode\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line)\n      fromNode = display.view[0].node\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line)\n      fromNode = display.view[fromIndex - 1].node.nextSibling\n    }\n    let toIndex = findViewIndex(cm, to.line)\n    let toLine, toNode\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1\n      toNode = display.lineDiv.lastChild\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1\n      toNode = display.view[toIndex + 1].node.previousSibling\n    }\n\n    if (!fromNode) return false\n    let newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine))\n    let oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length))\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine-- }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++ }\n      else break\n    }\n\n    let cutFront = 0, cutEnd = 0\n    let newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length)\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      ++cutFront\n    let newBot = lst(newText), oldBot = lst(oldText)\n    let maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0))\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      ++cutEnd\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--\n        cutEnd++\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\")\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\")\n\n    let chFrom = Pos(fromLine, cutFront)\n    let chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0)\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\")\n      return true\n    }\n  }\n\n  ensurePolled() {\n    this.forceCompositionEnd()\n  }\n  reset() {\n    this.forceCompositionEnd()\n  }\n  forceCompositionEnd() {\n    if (!this.composing) return\n    clearTimeout(this.readDOMTimeout)\n    this.composing = null\n    this.updateFromDOM()\n    this.div.blur()\n    this.div.focus()\n  }\n  readFromDOMSoon() {\n    if (this.readDOMTimeout != null) return\n    this.readDOMTimeout = setTimeout(() => {\n      this.readDOMTimeout = null\n      if (this.composing) {\n        if (this.composing.done) this.composing = null\n        else return\n      }\n      this.updateFromDOM()\n    }, 80)\n  }\n\n  updateFromDOM() {\n    if (this.cm.isReadOnly() || !this.pollContent())\n      runInOp(this.cm, () => regChange(this.cm))\n  }\n\n  setUneditable(node) {\n    node.contentEditable = \"false\"\n  }\n\n  onKeyPress(e) {\n    if (e.charCode == 0 || this.composing) return\n    e.preventDefault()\n    if (!this.cm.isReadOnly())\n      operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0)\n  }\n\n  readOnlyChanged(val) {\n    this.div.contentEditable = String(val != \"nocursor\")\n  }\n\n  onContextMenu() {}\n  resetPosition() {}\n}\n\nContentEditableInput.prototype.needsContentAttribute = true\n\nfunction posToDOM(cm, pos) {\n  let view = findViewForLine(cm, pos.line)\n  if (!view || view.hidden) return null\n  let line = getLine(cm.doc, pos.line)\n  let info = mapFromLineView(view, line, pos.line)\n\n  let order = getOrder(line, cm.doc.direction), side = \"left\"\n  if (order) {\n    let partPos = getBidiPartAt(order, pos.ch)\n    side = partPos % 2 ? \"right\" : \"left\"\n  }\n  let result = nodeAndOffsetInLineMap(info.map, pos.ch, side)\n  result.offset = result.collapse == \"right\" ? result.end : result.start\n  return result\n}\n\nfunction isInGutter(node) {\n  for (let scan = node; scan; scan = scan.parentNode)\n    if (/CodeMirror-gutter-wrapper/.test(scan.className)) return true\n  return false\n}\n\nfunction badPos(pos, bad) { if (bad) pos.bad = true; return pos }\n\nfunction domTextBetween(cm, from, to, fromLine, toLine) {\n  let text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false\n  function recognizeMarker(id) { return marker => marker.id == id }\n  function close() {\n    if (closing) {\n      text += lineSep\n      if (extraLinebreak) text += lineSep\n      closing = extraLinebreak = false\n    }\n  }\n  function addText(str) {\n    if (str) {\n      close()\n      text += str\n    }\n  }\n  function walk(node) {\n    if (node.nodeType == 1) {\n      let cmText = node.getAttribute(\"cm-text\")\n      if (cmText) {\n        addText(cmText)\n        return\n      }\n      let markerID = node.getAttribute(\"cm-marker\"), range\n      if (markerID) {\n        let found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID))\n        if (found.length && (range = found[0].find(0)))\n          addText(getBetween(cm.doc, range.from, range.to).join(lineSep))\n        return\n      }\n      if (node.getAttribute(\"contenteditable\") == \"false\") return\n      let isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName)\n      if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) return\n\n      if (isBlock) close()\n      for (let i = 0; i < node.childNodes.length; i++)\n        walk(node.childNodes[i])\n\n      if (/^(pre|p)$/i.test(node.nodeName)) extraLinebreak = true\n      if (isBlock) closing = true\n    } else if (node.nodeType == 3) {\n      addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"))\n    }\n  }\n  for (;;) {\n    walk(from)\n    if (from == to) break\n    from = from.nextSibling\n    extraLinebreak = false\n  }\n  return text\n}\n\nfunction domToPos(cm, node, offset) {\n  let lineNode\n  if (node == cm.display.lineDiv) {\n    lineNode = cm.display.lineDiv.childNodes[offset]\n    if (!lineNode) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true)\n    node = null; offset = 0\n  } else {\n    for (lineNode = node;; lineNode = lineNode.parentNode) {\n      if (!lineNode || lineNode == cm.display.lineDiv) return null\n      if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break\n    }\n  }\n  for (let i = 0; i < cm.display.view.length; i++) {\n    let lineView = cm.display.view[i]\n    if (lineView.node == lineNode)\n      return locateNodeInLineView(lineView, node, offset)\n  }\n}\n\nfunction locateNodeInLineView(lineView, node, offset) {\n  let wrapper = lineView.text.firstChild, bad = false\n  if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), true)\n  if (node == wrapper) {\n    bad = true\n    node = wrapper.childNodes[offset]\n    offset = 0\n    if (!node) {\n      let line = lineView.rest ? lst(lineView.rest) : lineView.line\n      return badPos(Pos(lineNo(line), line.text.length), bad)\n    }\n  }\n\n  let textNode = node.nodeType == 3 ? node : null, topNode = node\n  if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n    textNode = node.firstChild\n    if (offset) offset = textNode.nodeValue.length\n  }\n  while (topNode.parentNode != wrapper) topNode = topNode.parentNode\n  let measure = lineView.measure, maps = measure.maps\n\n  function find(textNode, topNode, offset) {\n    for (let i = -1; i < (maps ? maps.length : 0); i++) {\n      let map = i < 0 ? measure.map : maps[i]\n      for (let j = 0; j < map.length; j += 3) {\n        let curNode = map[j + 2]\n        if (curNode == textNode || curNode == topNode) {\n          let line = lineNo(i < 0 ? lineView.line : lineView.rest[i])\n          let ch = map[j] + offset\n          if (offset < 0 || curNode != textNode) ch = map[j + (offset ? 1 : 0)]\n          return Pos(line, ch)\n        }\n      }\n    }\n  }\n  let found = find(textNode, topNode, offset)\n  if (found) return badPos(found, bad)\n\n  // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n  for (let after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n    found = find(after, after.firstChild, 0)\n    if (found)\n      return badPos(Pos(found.line, found.ch - dist), bad)\n    else\n      dist += after.textContent.length\n  }\n  for (let before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {\n    found = find(before, before.firstChild, -1)\n    if (found)\n      return badPos(Pos(found.line, found.ch + dist), bad)\n    else\n      dist += before.textContent.length\n  }\n}\n","import { operation, runInOp } from \"../display/operations.js\"\nimport { prepareSelection } from \"../display/selection.js\"\nimport { applyTextInput, copyableRanges, handlePaste, hiddenTextarea, setLastCopied } from \"./input.js\"\nimport { cursorCoords, posFromMouse } from \"../measurement/position_measurement.js\"\nimport { eventInWidget } from \"../measurement/widgets.js\"\nimport { simpleSelection } from \"../model/selection.js\"\nimport { selectAll, setSelection } from \"../model/selection_updates.js\"\nimport { captureRightClick, ie, ie_version, ios, mac, mobile, presto, webkit } from \"../util/browser.js\"\nimport { activeElt, removeChildrenAndAdd, selectInput } from \"../util/dom.js\"\nimport { e_preventDefault, e_stop, off, on, signalDOMEvent } from \"../util/event.js\"\nimport { hasSelection } from \"../util/feature_detection.js\"\nimport { Delayed, sel_dontScroll } from \"../util/misc.js\"\n\n// TEXTAREA INPUT STYLE\n\nexport default class TextareaInput {\n  constructor(cm) {\n    this.cm = cm\n    // See input.poll and input.reset\n    this.prevInput = \"\"\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed()\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false\n    this.composing = null\n  }\n\n  init(display) {\n    let input = this, cm = this.cm\n    this.createField(display)\n    const te = this.textarea\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild)\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) te.style.width = \"0px\"\n\n    on(te, \"input\", () => {\n      if (ie && ie_version >= 9 && this.hasSelection) this.hasSelection = null\n      input.poll()\n    })\n\n    on(te, \"paste\", e => {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) return\n\n      cm.state.pasteIncoming = +new Date\n      input.fastPoll()\n    })\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) return\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()})\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        let ranges = copyableRanges(cm)\n        setLastCopied({lineWise: true, text: ranges.text})\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll)\n        } else {\n          input.prevInput = \"\"\n          te.value = ranges.text.join(\"\\n\")\n          selectInput(te)\n        }\n      }\n      if (e.type == \"cut\") cm.state.cutIncoming = +new Date\n    }\n    on(te, \"cut\", prepareCopyCut)\n    on(te, \"copy\", prepareCopyCut)\n\n    on(display.scroller, \"paste\", e => {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) return\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date\n        input.focus()\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      const event = new Event(\"paste\")\n      event.clipboardData = e.clipboardData\n      te.dispatchEvent(event)\n    })\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", e => {\n      if (!eventInWidget(display, e)) e_preventDefault(e)\n    })\n\n    on(te, \"compositionstart\", () => {\n      let start = cm.getCursor(\"from\")\n      if (input.composing) input.composing.range.clear()\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      }\n    })\n    on(te, \"compositionend\", () => {\n      if (input.composing) {\n        input.poll()\n        input.composing.range.clear()\n        input.composing = null\n      }\n    })\n  }\n\n  createField(_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea()\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild\n  }\n\n  screenReaderLabelChanged(label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label)\n    } else {\n      this.textarea.removeAttribute('aria-label')\n    }\n  }\n\n  prepareSelection() {\n    // Redraw the selection and/or cursor\n    let cm = this.cm, display = cm.display, doc = cm.doc\n    let result = prepareSelection(cm)\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      let headPos = cursorCoords(cm, doc.sel.primary().head, \"div\")\n      let wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect()\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top))\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left))\n    }\n\n    return result\n  }\n\n  showSelection(drawn) {\n    let cm = this.cm, display = cm.display\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors)\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection)\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\"\n      this.wrapper.style.left = drawn.teLeft + \"px\"\n    }\n  }\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  reset(typing) {\n    if (this.contextMenuPending || this.composing) return\n    let cm = this.cm\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\"\n      let content = cm.getSelection()\n      this.textarea.value = content\n      if (cm.state.focused) selectInput(this.textarea)\n      if (ie && ie_version >= 9) this.hasSelection = content\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\"\n      if (ie && ie_version >= 9) this.hasSelection = null\n    }\n  }\n\n  getField() { return this.textarea }\n\n  supportsTouch() { return false }\n\n  focus() {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus() }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  }\n\n  blur() { this.textarea.blur() }\n\n  resetPosition() {\n    this.wrapper.style.top = this.wrapper.style.left = 0\n  }\n\n  receivedFocus() { this.slowPoll() }\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  slowPoll() {\n    if (this.pollingFast) return\n    this.polling.set(this.cm.options.pollInterval, () => {\n      this.poll()\n      if (this.cm.state.focused) this.slowPoll()\n    })\n  }\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  fastPoll() {\n    let missed = false, input = this\n    input.pollingFast = true\n    function p() {\n      let changed = input.poll()\n      if (!changed && !missed) {missed = true; input.polling.set(60, p)}\n      else {input.pollingFast = false; input.slowPoll()}\n    }\n    input.polling.set(20, p)\n  }\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  poll() {\n    let cm = this.cm, input = this.textarea, prevInput = this.prevInput\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      return false\n\n    let text = input.value\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) return false\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset()\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      let first = text.charCodeAt(0)\n      if (first == 0x200b && !prevInput) prevInput = \"\\u200b\"\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    let same = 0, l = Math.min(prevInput.length, text.length)\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same\n\n    runInOp(cm, () => {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this.composing ? \"*compose\" : null)\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) input.value = this.prevInput = \"\"\n      else this.prevInput = text\n\n      if (this.composing) {\n        this.composing.range.clear()\n        this.composing.range = cm.markText(this.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"})\n      }\n    })\n    return true\n  }\n\n  ensurePolled() {\n    if (this.pollingFast && this.poll()) this.pollingFast = false\n  }\n\n  onKeyPress() {\n    if (ie && ie_version >= 9) this.hasSelection = null\n    this.fastPoll()\n  }\n\n  onContextMenu(e) {\n    let input = this, cm = input.cm, display = cm.display, te = input.textarea\n    if (input.contextMenuPending) input.contextMenuPending()\n    let pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop\n    if (!pos || presto) return // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    let reset = cm.options.resetSelectionOnContextMenu\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll)\n\n    let oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText\n    let wrapperBox = input.wrapper.offsetParent.getBoundingClientRect()\n    input.wrapper.style.cssText = \"position: static\"\n    te.style.cssText = `position: absolute; width: 30px; height: 30px;\n      top: ${e.clientY - wrapperBox.top - 5}px; left: ${e.clientX - wrapperBox.left - 5}px;\n      z-index: 1000; background: ${ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\"};\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`\n    let oldScrollY\n    if (webkit) oldScrollY = window.scrollY // Work around Chrome issue (#2712)\n    display.input.focus()\n    if (webkit) window.scrollTo(null, oldScrollY)\n    display.input.reset()\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) te.value = input.prevInput = \" \"\n    input.contextMenuPending = rehide\n    display.selForContextMenu = cm.doc.sel\n    clearTimeout(display.detectingSelectAll)\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        let selected = cm.somethingSelected()\n        let extval = \"\\u200b\" + (selected ? te.value : \"\")\n        te.value = \"\\u21da\" // Used to catch context-menu undo\n        te.value = extval\n        input.prevInput = selected ? \"\" : \"\\u200b\"\n        te.selectionStart = 1; te.selectionEnd = extval.length\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) return\n      input.contextMenuPending = false\n      input.wrapper.style.cssText = oldWrapperCSS\n      te.style.cssText = oldCSS\n      if (ie && ie_version < 9) display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos)\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) prepareSelectAllHack()\n        let i = 0, poll = () => {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm)\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500)\n          } else {\n            display.selForContextMenu = null\n            display.input.reset()\n          }\n        }\n        display.detectingSelectAll = setTimeout(poll, 200)\n      }\n    }\n\n    if (ie && ie_version >= 9) prepareSelectAllHack()\n    if (captureRightClick) {\n      e_stop(e)\n      let mouseup = () => {\n        off(window, \"mouseup\", mouseup)\n        setTimeout(rehide, 20)\n      }\n      on(window, \"mouseup\", mouseup)\n    } else {\n      setTimeout(rehide, 50)\n    }\n  }\n\n  readOnlyChanged(val) {\n    if (!val) this.reset()\n    this.textarea.disabled = val == \"nocursor\"\n    this.textarea.readOnly = !!val\n  }\n\n  setUneditable() {}\n}\n\nTextareaInput.prototype.needsContentAttribute = false\n","import { CodeMirror } from \"./CodeMirror.js\"\nimport { activeElt } from \"../util/dom.js\"\nimport { off, on } from \"../util/event.js\"\nimport { copyObj } from \"../util/misc.js\"\n\nexport function fromTextArea(textarea, options) {\n  options = options ? copyObj(options) : {}\n  options.value = textarea.value\n  if (!options.tabindex && textarea.tabIndex)\n    options.tabindex = textarea.tabIndex\n  if (!options.placeholder && textarea.placeholder)\n    options.placeholder = textarea.placeholder\n  // Set autofocus to true if this textarea is focused, or if it has\n  // autofocus and no other element is focused.\n  if (options.autofocus == null) {\n    let hasFocus = activeElt()\n    options.autofocus = hasFocus == textarea ||\n      textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body\n  }\n\n  function save() {textarea.value = cm.getValue()}\n\n  let realSubmit\n  if (textarea.form) {\n    on(textarea.form, \"submit\", save)\n    // Deplorable hack to make the submit method do the right thing.\n    if (!options.leaveSubmitMethodAlone) {\n      let form = textarea.form\n      realSubmit = form.submit\n      try {\n        let wrappedSubmit = form.submit = () => {\n          save()\n          form.submit = realSubmit\n          form.submit()\n          form.submit = wrappedSubmit\n        }\n      } catch(e) {}\n    }\n  }\n\n  options.finishInit = cm => {\n    cm.save = save\n    cm.getTextArea = () => textarea\n    cm.toTextArea = () => {\n      cm.toTextArea = isNaN // Prevent this from being ran twice\n      save()\n      textarea.parentNode.removeChild(cm.getWrapperElement())\n      textarea.style.display = \"\"\n      if (textarea.form) {\n        off(textarea.form, \"submit\", save)\n        if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n          textarea.form.submit = realSubmit\n      }\n    }\n  }\n\n  textarea.style.display = \"none\"\n  let cm = CodeMirror(node => textarea.parentNode.insertBefore(node, textarea.nextSibling),\n    options)\n  return cm\n}\n","import { scrollbarModel } from \"../display/scrollbars.js\"\nimport { wheelEventPixels } from \"../display/scroll_events.js\"\nimport { keyMap, keyName, isModifierKey, lookupKey, normalizeKeyMap } from \"../input/keymap.js\"\nimport { keyNames } from \"../input/keynames.js\"\nimport { Line } from \"../line/line_data.js\"\nimport { cmp, Pos } from \"../line/pos.js\"\nimport { changeEnd } from \"../model/change_measurement.js\"\nimport Doc from \"../model/Doc.js\"\nimport { LineWidget } from \"../model/line_widget.js\"\nimport { SharedTextMarker, TextMarker } from \"../model/mark_text.js\"\nimport { copyState, extendMode, getMode, innerMode, mimeModes, modeExtensions, modes, resolveMode, startState } from \"../modes.js\"\nimport { addClass, contains, rmClass } from \"../util/dom.js\"\nimport { e_preventDefault, e_stop, e_stopPropagation, off, on, signal } from \"../util/event.js\"\nimport { splitLinesAuto } from \"../util/feature_detection.js\"\nimport { countColumn, findColumn, isWordCharBasic, Pass } from \"../util/misc.js\"\nimport StringStream from \"../util/StringStream.js\"\n\nimport { commands } from \"./commands.js\"\n\nexport function addLegacyProps(CodeMirror) {\n  CodeMirror.off = off\n  CodeMirror.on = on\n  CodeMirror.wheelEventPixels = wheelEventPixels\n  CodeMirror.Doc = Doc\n  CodeMirror.splitLines = splitLinesAuto\n  CodeMirror.countColumn = countColumn\n  CodeMirror.findColumn = findColumn\n  CodeMirror.isWordChar = isWordCharBasic\n  CodeMirror.Pass = Pass\n  CodeMirror.signal = signal\n  CodeMirror.Line = Line\n  CodeMirror.changeEnd = changeEnd\n  CodeMirror.scrollbarModel = scrollbarModel\n  CodeMirror.Pos = Pos\n  CodeMirror.cmpPos = cmp\n  CodeMirror.modes = modes\n  CodeMirror.mimeModes = mimeModes\n  CodeMirror.resolveMode = resolveMode\n  CodeMirror.getMode = getMode\n  CodeMirror.modeExtensions = modeExtensions\n  CodeMirror.extendMode = extendMode\n  CodeMirror.copyState = copyState\n  CodeMirror.startState = startState\n  CodeMirror.innerMode = innerMode\n  CodeMirror.commands = commands\n  CodeMirror.keyMap = keyMap\n  CodeMirror.keyName = keyName\n  CodeMirror.isModifierKey = isModifierKey\n  CodeMirror.lookupKey = lookupKey\n  CodeMirror.normalizeKeyMap = normalizeKeyMap\n  CodeMirror.StringStream = StringStream\n  CodeMirror.SharedTextMarker = SharedTextMarker\n  CodeMirror.TextMarker = TextMarker\n  CodeMirror.LineWidget = LineWidget\n  CodeMirror.e_preventDefault = e_preventDefault\n  CodeMirror.e_stopPropagation = e_stopPropagation\n  CodeMirror.e_stop = e_stop\n  CodeMirror.addClass = addClass\n  CodeMirror.contains = contains\n  CodeMirror.rmClass = rmClass\n  CodeMirror.keyNames = keyNames\n}\n","// EDITOR CONSTRUCTOR\n\nimport { CodeMirror } from \"./CodeMirror.js\"\nexport { CodeMirror } from \"./CodeMirror.js\"\n\nimport { eventMixin } from \"../util/event.js\"\nimport { indexOf } from \"../util/misc.js\"\n\nimport { defineOptions } from \"./options.js\"\n\ndefineOptions(CodeMirror)\n\nimport addEditorMethods from \"./methods.js\"\n\naddEditorMethods(CodeMirror)\n\nimport Doc from \"../model/Doc.js\"\n\n// Set up methods on CodeMirror's prototype to redirect to the editor's document.\nlet dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \")\nfor (let prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n  CodeMirror.prototype[prop] = (function(method) {\n    return function() {return method.apply(this.doc, arguments)}\n  })(Doc.prototype[prop])\n\neventMixin(Doc)\n\n// INPUT HANDLING\n\nimport ContentEditableInput from \"../input/ContentEditableInput.js\"\nimport TextareaInput from \"../input/TextareaInput.js\"\nCodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput}\n\n// MODE DEFINITION AND QUERYING\n\nimport { defineMIME, defineMode } from \"../modes.js\"\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nCodeMirror.defineMode = function(name/*, mode, …*/) {\n  if (!CodeMirror.defaults.mode && name != \"null\") CodeMirror.defaults.mode = name\n  defineMode.apply(this, arguments)\n}\n\nCodeMirror.defineMIME = defineMIME\n\n// Minimal default mode.\nCodeMirror.defineMode(\"null\", () => ({token: stream => stream.skipToEnd()}))\nCodeMirror.defineMIME(\"text/plain\", \"null\")\n\n// EXTENSIONS\n\nCodeMirror.defineExtension = (name, func) => {\n  CodeMirror.prototype[name] = func\n}\nCodeMirror.defineDocExtension = (name, func) => {\n  Doc.prototype[name] = func\n}\n\nimport { fromTextArea } from \"./fromTextArea.js\"\n\nCodeMirror.fromTextArea = fromTextArea\n\nimport { addLegacyProps } from \"./legacy.js\"\n\naddLegacyProps(CodeMirror)\n\nCodeMirror.version = \"5.62.2\"\n","function xquery(CodeMirror) {\n\nCodeMirror.defineMode(\"xquery\", function() {\n\n  // The keywords object is set to the result of this self executing\n  // function. Each keyword is a property of the keywords object whose\n  // value is {type: atype, style: astyle}\n  var keywords = function(){\n    // convenience functions used to build keywords object\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var operator = kw(\"operator\")\n      , atom = {type: \"atom\", style: \"atom\"}\n      , punctuation = {type: \"punctuation\", style: null}\n      , qualifier = {type: \"axis_specifier\", style: \"qualifier\"};\n\n    // kwObj is what is return from this function at the end\n    var kwObj = {\n      ',': punctuation\n    };\n\n    // a list of 'basic' keywords. For each add a property to kwObj with the value of\n    // {type: basic[i], style: \"keyword\"} e.g. 'after' --> {type: \"after\", style: \"keyword\"}\n    var basic = ['after', 'all', 'allowing', 'ancestor', 'ancestor-or-self', 'any', 'array', 'as',\n    'ascending', 'at', 'attribute', 'base-uri', 'before', 'boundary-space', 'by', 'case', 'cast',\n    'castable', 'catch', 'child', 'collation', 'comment', 'construction', 'contains', 'content',\n    'context', 'copy', 'copy-namespaces', 'count', 'decimal-format', 'declare', 'default', 'delete',\n    'descendant', 'descendant-or-self', 'descending', 'diacritics', 'different', 'distance',\n    'document', 'document-node', 'element', 'else', 'empty', 'empty-sequence', 'encoding', 'end',\n    'entire', 'every', 'exactly', 'except', 'external', 'first', 'following', 'following-sibling',\n    'for', 'from', 'ftand', 'ftnot', 'ft-option', 'ftor', 'function', 'fuzzy', 'greatest', 'group',\n    'if', 'import', 'in', 'inherit', 'insensitive', 'insert', 'instance', 'intersect', 'into',\n    'invoke', 'is', 'item', 'language', 'last', 'lax', 'least', 'let', 'levels', 'lowercase', 'map',\n    'modify', 'module', 'most', 'namespace', 'next', 'no', 'node', 'nodes', 'no-inherit',\n    'no-preserve', 'not', 'occurs', 'of', 'only', 'option', 'order', 'ordered', 'ordering',\n    'paragraph', 'paragraphs', 'parent', 'phrase', 'preceding', 'preceding-sibling', 'preserve',\n    'previous', 'processing-instruction', 'relationship', 'rename', 'replace', 'return',\n    'revalidation', 'same', 'satisfies', 'schema', 'schema-attribute', 'schema-element', 'score',\n    'self', 'sensitive', 'sentence', 'sentences', 'sequence', 'skip', 'sliding', 'some', 'stable',\n    'start', 'stemming', 'stop', 'strict', 'strip', 'switch', 'text', 'then', 'thesaurus', 'times',\n    'to', 'transform', 'treat', 'try', 'tumbling', 'type', 'typeswitch', 'union', 'unordered',\n    'update', 'updating', 'uppercase', 'using', 'validate', 'value', 'variable', 'version',\n    'weight', 'when', 'where', 'wildcards', 'window', 'with', 'without', 'word', 'words', 'xquery'];\n    for(var i=0, l=basic.length; i < l; i++) { kwObj[basic[i]] = kw(basic[i]);}\n    // a list of types. For each add a property to kwObj with the value of\n    // {type: \"atom\", style: \"atom\"}\n    var types = ['xs:anyAtomicType', 'xs:anySimpleType', 'xs:anyType', 'xs:anyURI',\n    'xs:base64Binary', 'xs:boolean', 'xs:byte', 'xs:date', 'xs:dateTime', 'xs:dateTimeStamp',\n    'xs:dayTimeDuration', 'xs:decimal', 'xs:double', 'xs:duration', 'xs:ENTITIES', 'xs:ENTITY',\n    'xs:float', 'xs:gDay', 'xs:gMonth', 'xs:gMonthDay', 'xs:gYear', 'xs:gYearMonth', 'xs:hexBinary',\n    'xs:ID', 'xs:IDREF', 'xs:IDREFS', 'xs:int', 'xs:integer', 'xs:item', 'xs:java', 'xs:language',\n    'xs:long', 'xs:Name', 'xs:NCName', 'xs:negativeInteger', 'xs:NMTOKEN', 'xs:NMTOKENS',\n    'xs:nonNegativeInteger', 'xs:nonPositiveInteger', 'xs:normalizedString', 'xs:NOTATION',\n    'xs:numeric', 'xs:positiveInteger', 'xs:precisionDecimal', 'xs:QName', 'xs:short', 'xs:string',\n    'xs:time', 'xs:token', 'xs:unsignedByte', 'xs:unsignedInt', 'xs:unsignedLong',\n    'xs:unsignedShort', 'xs:untyped', 'xs:untypedAtomic', 'xs:yearMonthDuration'];\n    for(var i=0, l=types.length; i < l; i++) { kwObj[types[i]] = atom;}\n    // each operator will add a property to kwObj with value of {type: \"operator\", style: \"keyword\"}\n    var operators = ['eq', 'ne', 'lt', 'le', 'gt', 'ge', ':=', '=', '>', '>=', '<', '<=', '.', '|', '?', 'and', 'or', 'div', 'idiv', 'mod', '*', '/', '+', '-'];\n    for(var i=0, l=operators.length; i < l; i++) { kwObj[operators[i]] = operator;}\n    // each axis_specifiers will add a property to kwObj with value of {type: \"axis_specifier\", style: \"qualifier\"}\n    var axis_specifiers = [\"self::\", \"attribute::\", \"child::\", \"descendant::\", \"descendant-or-self::\", \"parent::\",\n    \"ancestor::\", \"ancestor-or-self::\", \"following::\", \"preceding::\", \"following-sibling::\", \"preceding-sibling::\"];\n    for(var i=0, l=axis_specifiers.length; i < l; i++) { kwObj[axis_specifiers[i]] = qualifier; }\n    return kwObj;\n  }();\n\n  function chain(stream, state, f) {\n    state.tokenize = f;\n    return f(stream, state);\n  }\n\n  // the primary mode tokenizer\n  function tokenBase(stream, state) {\n    var ch = stream.next(),\n        mightBeFunction = false,\n        isEQName = isEQNameAhead(stream);\n\n    // an XML tag (if not in some sub, chained tokenizer)\n    if (ch == \"<\") {\n      if(stream.match(\"!--\", true))\n        return chain(stream, state, tokenXMLComment);\n\n      if(stream.match(\"![CDATA\", false)) {\n        state.tokenize = tokenCDATA;\n        return \"tag\";\n      }\n\n      if(stream.match(\"?\", false)) {\n        return chain(stream, state, tokenPreProcessing);\n      }\n\n      var isclose = stream.eat(\"/\");\n      stream.eatSpace();\n      var tagName = \"\", c;\n      while ((c = stream.eat(/[^\\s\\u00a0=<>\\\"\\'\\/?]/))) tagName += c;\n\n      return chain(stream, state, tokenTag(tagName, isclose));\n    }\n    // start code block\n    else if(ch == \"{\") {\n      pushStateStack(state, { type: \"codeblock\"});\n      return null;\n    }\n    // end code block\n    else if(ch == \"}\") {\n      popStateStack(state);\n      return null;\n    }\n    // if we're in an XML block\n    else if(isInXmlBlock(state)) {\n      if(ch == \">\")\n        return \"tag\";\n      else if(ch == \"/\" && stream.eat(\">\")) {\n        popStateStack(state);\n        return \"tag\";\n      }\n      else\n        return \"variable\";\n    }\n    // if a number\n    else if (/\\d/.test(ch)) {\n      stream.match(/^\\d*(?:\\.\\d*)?(?:E[+\\-]?\\d+)?/);\n      return \"atom\";\n    }\n    // comment start\n    else if (ch === \"(\" && stream.eat(\":\")) {\n      pushStateStack(state, { type: \"comment\"});\n      return chain(stream, state, tokenComment);\n    }\n    // quoted string\n    else if (!isEQName && (ch === '\"' || ch === \"'\"))\n      return chain(stream, state, tokenString(ch));\n    // variable\n    else if(ch === \"$\") {\n      return chain(stream, state, tokenVariable);\n    }\n    // assignment\n    else if(ch ===\":\" && stream.eat(\"=\")) {\n      return \"keyword\";\n    }\n    // open paren\n    else if(ch === \"(\") {\n      pushStateStack(state, { type: \"paren\"});\n      return null;\n    }\n    // close paren\n    else if(ch === \")\") {\n      popStateStack(state);\n      return null;\n    }\n    // open paren\n    else if(ch === \"[\") {\n      pushStateStack(state, { type: \"bracket\"});\n      return null;\n    }\n    // close paren\n    else if(ch === \"]\") {\n      popStateStack(state);\n      return null;\n    }\n    else {\n      var known = keywords.propertyIsEnumerable(ch) && keywords[ch];\n\n      // if there's a EQName ahead, consume the rest of the string portion, it's likely a function\n      if(isEQName && ch === '\\\"') while(stream.next() !== '\"'){}\n      if(isEQName && ch === '\\'') while(stream.next() !== '\\''){}\n\n      // gobble up a word if the character is not known\n      if(!known) stream.eatWhile(/[\\w\\$_-]/);\n\n      // gobble a colon in the case that is a lib func type call fn:doc\n      var foundColon = stream.eat(\":\");\n\n      // if there's not a second colon, gobble another word. Otherwise, it's probably an axis specifier\n      // which should get matched as a keyword\n      if(!stream.eat(\":\") && foundColon) {\n        stream.eatWhile(/[\\w\\$_-]/);\n      }\n      // if the next non whitespace character is an open paren, this is probably a function (if not a keyword of other sort)\n      if(stream.match(/^[ \\t]*\\(/, false)) {\n        mightBeFunction = true;\n      }\n      // is the word a keyword?\n      var word = stream.current();\n      known = keywords.propertyIsEnumerable(word) && keywords[word];\n\n      // if we think it's a function call but not yet known,\n      // set style to variable for now for lack of something better\n      if(mightBeFunction && !known) known = {type: \"function_call\", style: \"variable def\"};\n\n      // if the previous word was element, attribute, axis specifier, this word should be the name of that\n      if(isInXmlConstructor(state)) {\n        popStateStack(state);\n        return \"variable\";\n      }\n      // as previously checked, if the word is element,attribute, axis specifier, call it an \"xmlconstructor\" and\n      // push the stack so we know to look for it on the next word\n      if(word == \"element\" || word == \"attribute\" || known.type == \"axis_specifier\") pushStateStack(state, {type: \"xmlconstructor\"});\n\n      // if the word is known, return the details of that else just call this a generic 'word'\n      return known ? known.style : \"variable\";\n    }\n  }\n\n  // handle comments, including nested\n  function tokenComment(stream, state) {\n    var maybeEnd = false, maybeNested = false, nestedCount = 0, ch;\n    while (ch = stream.next()) {\n      if (ch == \")\" && maybeEnd) {\n        if(nestedCount > 0)\n          nestedCount--;\n        else {\n          popStateStack(state);\n          break;\n        }\n      }\n      else if(ch == \":\" && maybeNested) {\n        nestedCount++;\n      }\n      maybeEnd = (ch == \":\");\n      maybeNested = (ch == \"(\");\n    }\n\n    return \"comment\";\n  }\n\n  // tokenizer for string literals\n  // optionally pass a tokenizer function to set state.tokenize back to when finished\n  function tokenString(quote, f) {\n    return function(stream, state) {\n      var ch;\n\n      if(isInString(state) && stream.current() == quote) {\n        popStateStack(state);\n        if(f) state.tokenize = f;\n        return \"string\";\n      }\n\n      pushStateStack(state, { type: \"string\", name: quote, tokenize: tokenString(quote, f) });\n\n      // if we're in a string and in an XML block, allow an embedded code block\n      if(stream.match(\"{\", false) && isInXmlAttributeBlock(state)) {\n        state.tokenize = tokenBase;\n        return \"string\";\n      }\n\n\n      while (ch = stream.next()) {\n        if (ch ==  quote) {\n          popStateStack(state);\n          if(f) state.tokenize = f;\n          break;\n        }\n        else {\n          // if we're in a string and in an XML block, allow an embedded code block in an attribute\n          if(stream.match(\"{\", false) && isInXmlAttributeBlock(state)) {\n            state.tokenize = tokenBase;\n            return \"string\";\n          }\n\n        }\n      }\n\n      return \"string\";\n    };\n  }\n\n  // tokenizer for variables\n  function tokenVariable(stream, state) {\n    var isVariableChar = /[\\w\\$_-]/;\n\n    // a variable may start with a quoted EQName so if the next character is quote, consume to the next quote\n    if(stream.eat(\"\\\"\")) {\n      while(stream.next() !== '\\\"'){}      stream.eat(\":\");\n    } else {\n      stream.eatWhile(isVariableChar);\n      if(!stream.match(\":=\", false)) stream.eat(\":\");\n    }\n    stream.eatWhile(isVariableChar);\n    state.tokenize = tokenBase;\n    return \"variable\";\n  }\n\n  // tokenizer for XML tags\n  function tokenTag(name, isclose) {\n    return function(stream, state) {\n      stream.eatSpace();\n      if(isclose && stream.eat(\">\")) {\n        popStateStack(state);\n        state.tokenize = tokenBase;\n        return \"tag\";\n      }\n      // self closing tag without attributes?\n      if(!stream.eat(\"/\"))\n        pushStateStack(state, { type: \"tag\", name: name, tokenize: tokenBase});\n      if(!stream.eat(\">\")) {\n        state.tokenize = tokenAttribute;\n        return \"tag\";\n      }\n      else {\n        state.tokenize = tokenBase;\n      }\n      return \"tag\";\n    };\n  }\n\n  // tokenizer for XML attributes\n  function tokenAttribute(stream, state) {\n    var ch = stream.next();\n\n    if(ch == \"/\" && stream.eat(\">\")) {\n      if(isInXmlAttributeBlock(state)) popStateStack(state);\n      if(isInXmlBlock(state)) popStateStack(state);\n      return \"tag\";\n    }\n    if(ch == \">\") {\n      if(isInXmlAttributeBlock(state)) popStateStack(state);\n      return \"tag\";\n    }\n    if(ch == \"=\")\n      return null;\n    // quoted string\n    if (ch == '\"' || ch == \"'\")\n      return chain(stream, state, tokenString(ch, tokenAttribute));\n\n    if(!isInXmlAttributeBlock(state))\n      pushStateStack(state, { type: \"attribute\", tokenize: tokenAttribute});\n\n    stream.eat(/[a-zA-Z_:]/);\n    stream.eatWhile(/[-a-zA-Z0-9_:.]/);\n    stream.eatSpace();\n\n    // the case where the attribute has not value and the tag was closed\n    if(stream.match(\">\", false) || stream.match(\"/\", false)) {\n      popStateStack(state);\n      state.tokenize = tokenBase;\n    }\n\n    return \"attribute\";\n  }\n\n  // handle comments, including nested\n  function tokenXMLComment(stream, state) {\n    var ch;\n    while (ch = stream.next()) {\n      if (ch == \"-\" && stream.match(\"->\", true)) {\n        state.tokenize = tokenBase;\n        return \"comment\";\n      }\n    }\n  }\n\n\n  // handle CDATA\n  function tokenCDATA(stream, state) {\n    var ch;\n    while (ch = stream.next()) {\n      if (ch == \"]\" && stream.match(\"]\", true)) {\n        state.tokenize = tokenBase;\n        return \"comment\";\n      }\n    }\n  }\n\n  // handle preprocessing instructions\n  function tokenPreProcessing(stream, state) {\n    var ch;\n    while (ch = stream.next()) {\n      if (ch == \"?\" && stream.match(\">\", true)) {\n        state.tokenize = tokenBase;\n        return \"comment meta\";\n      }\n    }\n  }\n\n\n  // functions to test the current context of the state\n  function isInXmlBlock(state) { return isIn(state, \"tag\"); }\n  function isInXmlAttributeBlock(state) { return isIn(state, \"attribute\"); }\n  function isInXmlConstructor(state) { return isIn(state, \"xmlconstructor\"); }\n  function isInString(state) { return isIn(state, \"string\"); }\n\n  function isEQNameAhead(stream) {\n    // assume we've already eaten a quote (\")\n    if(stream.current() === '\"')\n      return stream.match(/^[^\\\"]+\\\"\\:/, false);\n    else if(stream.current() === '\\'')\n      return stream.match(/^[^\\\"]+\\'\\:/, false);\n    else\n      return false;\n  }\n\n  function isIn(state, type) {\n    return (state.stack.length && state.stack[state.stack.length - 1].type == type);\n  }\n\n  function pushStateStack(state, newState) {\n    state.stack.push(newState);\n  }\n\n  function popStateStack(state) {\n    state.stack.pop();\n    var reinstateTokenize = state.stack.length && state.stack[state.stack.length-1].tokenize;\n    state.tokenize = reinstateTokenize || tokenBase;\n  }\n\n  // the interface for the mode API\n  return {\n    startState: function() {\n      return {\n        tokenize: tokenBase,\n        cc: [],\n        stack: []\n      };\n    },\n\n    token: function(stream, state) {\n      if (stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      return style;\n    },\n\n    blockCommentStart: \"(:\",\n    blockCommentEnd: \":)\"\n\n  };\n\n});\n\nCodeMirror.defineMIME(\"application/xquery\", \"xquery\");\n\n}\n\nexport default xquery;\n","function css(CodeMirror) {\n\nCodeMirror.defineMode(\"css\", function(config, parserConfig) {\n  var inline = parserConfig.inline;\n  if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n  var indentUnit = config.indentUnit,\n      tokenHooks = parserConfig.tokenHooks,\n      documentTypes = parserConfig.documentTypes || {},\n      mediaTypes = parserConfig.mediaTypes || {},\n      mediaFeatures = parserConfig.mediaFeatures || {},\n      mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n      propertyKeywords = parserConfig.propertyKeywords || {},\n      nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n      fontProperties = parserConfig.fontProperties || {},\n      counterDescriptors = parserConfig.counterDescriptors || {},\n      colorKeywords = parserConfig.colorKeywords || {},\n      valueKeywords = parserConfig.valueKeywords || {},\n      allowNested = parserConfig.allowNested,\n      lineComment = parserConfig.lineComment,\n      supportsAtComponent = parserConfig.supportsAtComponent === true,\n      highlightNonStandardPropertyKeywords = config.highlightNonStandardPropertyKeywords !== false;\n\n  var type, override;\n  function ret(style, tp) { type = tp; return style; }\n\n  // Tokenizers\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (tokenHooks[ch]) {\n      var result = tokenHooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == \"@\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"def\", stream.current());\n    } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n      return ret(null, \"compare\");\n    } else if (ch == \"\\\"\" || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \"#\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"atom\", \"hash\");\n    } else if (ch == \"!\") {\n      stream.match(/^\\s*\\w*/);\n      return ret(\"keyword\", \"important\");\n    } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n      stream.eatWhile(/[\\w.%]/);\n      return ret(\"number\", \"unit\");\n    } else if (ch === \"-\") {\n      if (/[\\d.]/.test(stream.peek())) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } else if (stream.match(/^-[\\w\\\\\\-]*/)) {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return ret(\"variable-2\", \"variable-definition\");\n        return ret(\"variable-2\", \"variable\");\n      } else if (stream.match(/^\\w+-/)) {\n        return ret(\"meta\", \"meta\");\n      }\n    } else if (/[,+>*\\/]/.test(ch)) {\n      return ret(null, \"select-op\");\n    } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n      return ret(\"qualifier\", \"qualifier\");\n    } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n      return ret(null, ch);\n    } else if (stream.match(/^[\\w-.]+(?=\\()/)) {\n      if (/^(url(-prefix)?|domain|regexp)$/i.test(stream.current())) {\n        state.tokenize = tokenParenthesized;\n      }\n      return ret(\"variable callee\", \"variable\");\n    } else if (/[\\w\\\\\\-]/.test(ch)) {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"property\", \"word\");\n    } else {\n      return ret(null, null);\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          if (quote == \")\") stream.backUp(1);\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenParenthesized(stream, state) {\n    stream.next(); // Must be '('\n    if (!stream.match(/^\\s*[\\\"\\')]/, false))\n      state.tokenize = tokenString(\")\");\n    else\n      state.tokenize = null;\n    return ret(null, \"(\");\n  }\n\n  // Context management\n\n  function Context(type, indent, prev) {\n    this.type = type;\n    this.indent = indent;\n    this.prev = prev;\n  }\n\n  function pushContext(state, stream, type, indent) {\n    state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n    return type;\n  }\n\n  function popContext(state) {\n    if (state.context.prev)\n      state.context = state.context.prev;\n    return state.context.type;\n  }\n\n  function pass(type, stream, state) {\n    return states[state.context.type](type, stream, state);\n  }\n  function popAndPass(type, stream, state, n) {\n    for (var i = n || 1; i > 0; i--)\n      state.context = state.context.prev;\n    return pass(type, stream, state);\n  }\n\n  // Parser\n\n  function wordAsValue(stream) {\n    var word = stream.current().toLowerCase();\n    if (valueKeywords.hasOwnProperty(word))\n      override = \"atom\";\n    else if (colorKeywords.hasOwnProperty(word))\n      override = \"keyword\";\n    else\n      override = \"variable\";\n  }\n\n  var states = {};\n\n  states.top = function(type, stream, state) {\n    if (type == \"{\") {\n      return pushContext(state, stream, \"block\");\n    } else if (type == \"}\" && state.context.prev) {\n      return popContext(state);\n    } else if (supportsAtComponent && /@component/i.test(type)) {\n      return pushContext(state, stream, \"atComponentBlock\");\n    } else if (/^@(-moz-)?document$/i.test(type)) {\n      return pushContext(state, stream, \"documentTypes\");\n    } else if (/^@(media|supports|(-moz-)?document|import)$/i.test(type)) {\n      return pushContext(state, stream, \"atBlock\");\n    } else if (/^@(font-face|counter-style)/i.test(type)) {\n      state.stateArg = type;\n      return \"restricted_atBlock_before\";\n    } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(type)) {\n      return \"keyframes\";\n    } else if (type && type.charAt(0) == \"@\") {\n      return pushContext(state, stream, \"at\");\n    } else if (type == \"hash\") {\n      override = \"builtin\";\n    } else if (type == \"word\") {\n      override = \"tag\";\n    } else if (type == \"variable-definition\") {\n      return \"maybeprop\";\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    } else if (type == \":\") {\n      return \"pseudo\";\n    } else if (allowNested && type == \"(\") {\n      return pushContext(state, stream, \"parens\");\n    }\n    return state.context.type;\n  };\n\n  states.block = function(type, stream, state) {\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (propertyKeywords.hasOwnProperty(word)) {\n        override = \"property\";\n        return \"maybeprop\";\n      } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n        override = highlightNonStandardPropertyKeywords ? \"string-2\" : \"property\";\n        return \"maybeprop\";\n      } else if (allowNested) {\n        override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n        return \"block\";\n      } else {\n        override += \" error\";\n        return \"maybeprop\";\n      }\n    } else if (type == \"meta\") {\n      return \"block\";\n    } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n      override = \"error\";\n      return \"block\";\n    } else {\n      return states.top(type, stream, state);\n    }\n  };\n\n  states.maybeprop = function(type, stream, state) {\n    if (type == \":\") return pushContext(state, stream, \"prop\");\n    return pass(type, stream, state);\n  };\n\n  states.prop = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n    if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n    if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n      override += \" error\";\n    } else if (type == \"word\") {\n      wordAsValue(stream);\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    }\n    return \"prop\";\n  };\n\n  states.propBlock = function(type, _stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"word\") { override = \"property\"; return \"maybeprop\"; }\n    return state.context.type;\n  };\n\n  states.parens = function(type, stream, state) {\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \")\") return popContext(state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n    if (type == \"word\") wordAsValue(stream);\n    return \"parens\";\n  };\n\n  states.pseudo = function(type, stream, state) {\n    if (type == \"meta\") return \"pseudo\";\n\n    if (type == \"word\") {\n      override = \"variable-3\";\n      return state.context.type;\n    }\n    return pass(type, stream, state);\n  };\n\n  states.documentTypes = function(type, stream, state) {\n    if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n      override = \"tag\";\n      return state.context.type;\n    } else {\n      return states.atBlock(type, stream, state);\n    }\n  };\n\n  states.atBlock = function(type, stream, state) {\n    if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n    if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\")\n        override = \"keyword\";\n      else if (mediaTypes.hasOwnProperty(word))\n        override = \"attribute\";\n      else if (mediaFeatures.hasOwnProperty(word))\n        override = \"property\";\n      else if (mediaValueKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else if (propertyKeywords.hasOwnProperty(word))\n        override = \"property\";\n      else if (nonStandardPropertyKeywords.hasOwnProperty(word))\n        override = highlightNonStandardPropertyKeywords ? \"string-2\" : \"property\";\n      else if (valueKeywords.hasOwnProperty(word))\n        override = \"atom\";\n      else if (colorKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else\n        override = \"error\";\n    }\n    return state.context.type;\n  };\n\n  states.atComponentBlock = function(type, stream, state) {\n    if (type == \"}\")\n      return popAndPass(type, stream, state);\n    if (type == \"{\")\n      return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n    if (type == \"word\")\n      override = \"error\";\n    return state.context.type;\n  };\n\n  states.atBlock_parens = function(type, stream, state) {\n    if (type == \")\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n    return states.atBlock(type, stream, state);\n  };\n\n  states.restricted_atBlock_before = function(type, stream, state) {\n    if (type == \"{\")\n      return pushContext(state, stream, \"restricted_atBlock\");\n    if (type == \"word\" && state.stateArg == \"@counter-style\") {\n      override = \"variable\";\n      return \"restricted_atBlock_before\";\n    }\n    return pass(type, stream, state);\n  };\n\n  states.restricted_atBlock = function(type, stream, state) {\n    if (type == \"}\") {\n      state.stateArg = null;\n      return popContext(state);\n    }\n    if (type == \"word\") {\n      if ((state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase())) ||\n          (state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())))\n        override = \"error\";\n      else\n        override = \"property\";\n      return \"maybeprop\";\n    }\n    return \"restricted_atBlock\";\n  };\n\n  states.keyframes = function(type, stream, state) {\n    if (type == \"word\") { override = \"variable\"; return \"keyframes\"; }\n    if (type == \"{\") return pushContext(state, stream, \"top\");\n    return pass(type, stream, state);\n  };\n\n  states.at = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"tag\";\n    else if (type == \"hash\") override = \"builtin\";\n    return \"at\";\n  };\n\n  states.interpolation = function(type, stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"variable\";\n    else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n    return \"interpolation\";\n  };\n\n  return {\n    startState: function(base) {\n      return {tokenize: null,\n              state: inline ? \"block\" : \"top\",\n              stateArg: null,\n              context: new Context(inline ? \"block\" : \"top\", base || 0, null)};\n    },\n\n    token: function(stream, state) {\n      if (!state.tokenize && stream.eatSpace()) return null;\n      var style = (state.tokenize || tokenBase)(stream, state);\n      if (style && typeof style == \"object\") {\n        type = style[1];\n        style = style[0];\n      }\n      override = style;\n      if (type != \"comment\")\n        state.state = states[state.state](type, stream, state);\n      return override;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context, ch = textAfter && textAfter.charAt(0);\n      var indent = cx.indent;\n      if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n      if (cx.prev) {\n        if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" ||\n                          cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n          // Resume indentation from parent context.\n          cx = cx.prev;\n          indent = cx.indent;\n        } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") ||\n            ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n          // Dedent relative to current context.\n          indent = Math.max(0, cx.indent - indentUnit);\n        }\n      }\n      return indent;\n    },\n\n    electricChars: \"}\",\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    blockCommentContinue: \" * \",\n    lineComment: lineComment,\n    fold: \"brace\"\n  };\n});\n\n  function keySet(array) {\n    var keys = {};\n    for (var i = 0; i < array.length; ++i) {\n      keys[array[i].toLowerCase()] = true;\n    }\n    return keys;\n  }\n\n  var documentTypes_ = [\n    \"domain\", \"regexp\", \"url\", \"url-prefix\"\n  ], documentTypes = keySet(documentTypes_);\n\n  var mediaTypes_ = [\n    \"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\",\n    \"tty\", \"tv\", \"embossed\"\n  ], mediaTypes = keySet(mediaTypes_);\n\n  var mediaFeatures_ = [\n    \"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\",\n    \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\",\n    \"min-device-height\", \"max-device-height\", \"aspect-ratio\",\n    \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\",\n    \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\",\n    \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\",\n    \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\",\n    \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\",\n    \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\",\n    \"pointer\", \"any-pointer\", \"hover\", \"any-hover\", \"prefers-color-scheme\"\n  ], mediaFeatures = keySet(mediaFeatures_);\n\n  var mediaValueKeywords_ = [\n    \"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\",\n    \"interlace\", \"progressive\",\n    \"dark\", \"light\"\n  ], mediaValueKeywords = keySet(mediaValueKeywords_);\n\n  var propertyKeywords_ = [\n    \"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\",\n    \"alignment-baseline\", \"all\", \"anchor-point\", \"animation\", \"animation-delay\",\n    \"animation-direction\", \"animation-duration\", \"animation-fill-mode\",\n    \"animation-iteration-count\", \"animation-name\", \"animation-play-state\",\n    \"animation-timing-function\", \"appearance\", \"azimuth\", \"backdrop-filter\",\n    \"backface-visibility\", \"background\", \"background-attachment\",\n    \"background-blend-mode\", \"background-clip\", \"background-color\",\n    \"background-image\", \"background-origin\", \"background-position\",\n    \"background-position-x\", \"background-position-y\", \"background-repeat\",\n    \"background-size\", \"baseline-shift\", \"binding\", \"bleed\", \"block-size\",\n    \"bookmark-label\", \"bookmark-level\", \"bookmark-state\", \"bookmark-target\",\n    \"border\", \"border-bottom\", \"border-bottom-color\", \"border-bottom-left-radius\",\n    \"border-bottom-right-radius\", \"border-bottom-style\", \"border-bottom-width\",\n    \"border-collapse\", \"border-color\", \"border-image\", \"border-image-outset\",\n    \"border-image-repeat\", \"border-image-slice\", \"border-image-source\",\n    \"border-image-width\", \"border-left\", \"border-left-color\", \"border-left-style\",\n    \"border-left-width\", \"border-radius\", \"border-right\", \"border-right-color\",\n    \"border-right-style\", \"border-right-width\", \"border-spacing\", \"border-style\",\n    \"border-top\", \"border-top-color\", \"border-top-left-radius\",\n    \"border-top-right-radius\", \"border-top-style\", \"border-top-width\",\n    \"border-width\", \"bottom\", \"box-decoration-break\", \"box-shadow\", \"box-sizing\",\n    \"break-after\", \"break-before\", \"break-inside\", \"caption-side\", \"caret-color\",\n    \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\", \"column-fill\",\n    \"column-gap\", \"column-rule\", \"column-rule-color\", \"column-rule-style\",\n    \"column-rule-width\", \"column-span\", \"column-width\", \"columns\", \"contain\",\n    \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\", \"cue-after\",\n    \"cue-before\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\",\n    \"drop-initial-after-adjust\", \"drop-initial-after-align\",\n    \"drop-initial-before-adjust\", \"drop-initial-before-align\", \"drop-initial-size\",\n    \"drop-initial-value\", \"elevation\", \"empty-cells\", \"fit\", \"fit-position\",\n    \"flex\", \"flex-basis\", \"flex-direction\", \"flex-flow\", \"flex-grow\",\n    \"flex-shrink\", \"flex-wrap\", \"float\", \"float-offset\", \"flow-from\", \"flow-into\",\n    \"font\", \"font-family\", \"font-feature-settings\", \"font-kerning\",\n    \"font-language-override\", \"font-optical-sizing\", \"font-size\",\n    \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-synthesis\",\n    \"font-variant\", \"font-variant-alternates\", \"font-variant-caps\",\n    \"font-variant-east-asian\", \"font-variant-ligatures\", \"font-variant-numeric\",\n    \"font-variant-position\", \"font-variation-settings\", \"font-weight\", \"gap\",\n    \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\", \"grid-auto-rows\",\n    \"grid-column\", \"grid-column-end\", \"grid-column-gap\", \"grid-column-start\",\n    \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\", \"grid-row-start\",\n    \"grid-template\", \"grid-template-areas\", \"grid-template-columns\",\n    \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\", \"icon\",\n    \"image-orientation\", \"image-rendering\", \"image-resolution\", \"inline-box-align\",\n    \"inset\", \"inset-block\", \"inset-block-end\", \"inset-block-start\", \"inset-inline\",\n    \"inset-inline-end\", \"inset-inline-start\", \"isolation\", \"justify-content\",\n    \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\", \"line-break\",\n    \"line-height\", \"line-height-step\", \"line-stacking\", \"line-stacking-ruby\",\n    \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\",\n    \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\",\n    \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\", \"marks\",\n    \"marquee-direction\", \"marquee-loop\", \"marquee-play-count\", \"marquee-speed\",\n    \"marquee-style\", \"mask-clip\", \"mask-composite\", \"mask-image\", \"mask-mode\",\n    \"mask-origin\", \"mask-position\", \"mask-repeat\", \"mask-size\",\"mask-type\",\n    \"max-block-size\", \"max-height\", \"max-inline-size\",\n    \"max-width\", \"min-block-size\", \"min-height\", \"min-inline-size\", \"min-width\",\n    \"mix-blend-mode\", \"move-to\", \"nav-down\", \"nav-index\", \"nav-left\", \"nav-right\",\n    \"nav-up\", \"object-fit\", \"object-position\", \"offset\", \"offset-anchor\",\n    \"offset-distance\", \"offset-path\", \"offset-position\", \"offset-rotate\",\n    \"opacity\", \"order\", \"orphans\", \"outline\", \"outline-color\", \"outline-offset\",\n    \"outline-style\", \"outline-width\", \"overflow\", \"overflow-style\",\n    \"overflow-wrap\", \"overflow-x\", \"overflow-y\", \"padding\", \"padding-bottom\",\n    \"padding-left\", \"padding-right\", \"padding-top\", \"page\", \"page-break-after\",\n    \"page-break-before\", \"page-break-inside\", \"page-policy\", \"pause\",\n    \"pause-after\", \"pause-before\", \"perspective\", \"perspective-origin\", \"pitch\",\n    \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\",\n    \"position\", \"presentation-level\", \"punctuation-trim\", \"quotes\",\n    \"region-break-after\", \"region-break-before\", \"region-break-inside\",\n    \"region-fragment\", \"rendering-intent\", \"resize\", \"rest\", \"rest-after\",\n    \"rest-before\", \"richness\", \"right\", \"rotate\", \"rotation\", \"rotation-point\",\n    \"row-gap\", \"ruby-align\", \"ruby-overhang\", \"ruby-position\", \"ruby-span\",\n    \"scale\", \"scroll-behavior\", \"scroll-margin\", \"scroll-margin-block\",\n    \"scroll-margin-block-end\", \"scroll-margin-block-start\", \"scroll-margin-bottom\",\n    \"scroll-margin-inline\", \"scroll-margin-inline-end\",\n    \"scroll-margin-inline-start\", \"scroll-margin-left\", \"scroll-margin-right\",\n    \"scroll-margin-top\", \"scroll-padding\", \"scroll-padding-block\",\n    \"scroll-padding-block-end\", \"scroll-padding-block-start\",\n    \"scroll-padding-bottom\", \"scroll-padding-inline\", \"scroll-padding-inline-end\",\n    \"scroll-padding-inline-start\", \"scroll-padding-left\", \"scroll-padding-right\",\n    \"scroll-padding-top\", \"scroll-snap-align\", \"scroll-snap-type\",\n    \"shape-image-threshold\", \"shape-inside\", \"shape-margin\", \"shape-outside\",\n    \"size\", \"speak\", \"speak-as\", \"speak-header\", \"speak-numeral\",\n    \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\", \"tab-size\",\n    \"table-layout\", \"target\", \"target-name\", \"target-new\", \"target-position\",\n    \"text-align\", \"text-align-last\", \"text-combine-upright\", \"text-decoration\",\n    \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\",\n    \"text-decoration-skip-ink\", \"text-decoration-style\", \"text-emphasis\",\n    \"text-emphasis-color\", \"text-emphasis-position\", \"text-emphasis-style\",\n    \"text-height\", \"text-indent\", \"text-justify\", \"text-orientation\",\n    \"text-outline\", \"text-overflow\", \"text-rendering\", \"text-shadow\",\n    \"text-size-adjust\", \"text-space-collapse\", \"text-transform\",\n    \"text-underline-position\", \"text-wrap\", \"top\", \"touch-action\", \"transform\", \"transform-origin\",\n    \"transform-style\", \"transition\", \"transition-delay\", \"transition-duration\",\n    \"transition-property\", \"transition-timing-function\", \"translate\",\n    \"unicode-bidi\", \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\",\n    \"voice-duration\", \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\",\n    \"voice-stress\", \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\",\n    \"will-change\", \"word-break\", \"word-spacing\", \"word-wrap\", \"writing-mode\", \"z-index\",\n    // SVG-specific\n    \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\",\n    \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\",\n    \"color-interpolation\", \"color-interpolation-filters\",\n    \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\",\n    \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"paint-order\", \"shape-rendering\", \"stroke\",\n    \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\",\n    \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\",\n    \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\",\n    \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\",\n  ], propertyKeywords = keySet(propertyKeywords_);\n\n  var nonStandardPropertyKeywords_ = [\n    \"border-block\", \"border-block-color\", \"border-block-end\",\n    \"border-block-end-color\", \"border-block-end-style\", \"border-block-end-width\",\n    \"border-block-start\", \"border-block-start-color\", \"border-block-start-style\",\n    \"border-block-start-width\", \"border-block-style\", \"border-block-width\",\n    \"border-inline\", \"border-inline-color\", \"border-inline-end\",\n    \"border-inline-end-color\", \"border-inline-end-style\",\n    \"border-inline-end-width\", \"border-inline-start\", \"border-inline-start-color\",\n    \"border-inline-start-style\", \"border-inline-start-width\",\n    \"border-inline-style\", \"border-inline-width\", \"margin-block\",\n    \"margin-block-end\", \"margin-block-start\", \"margin-inline\", \"margin-inline-end\",\n    \"margin-inline-start\", \"padding-block\", \"padding-block-end\",\n    \"padding-block-start\", \"padding-inline\", \"padding-inline-end\",\n    \"padding-inline-start\", \"scroll-snap-stop\", \"scrollbar-3d-light-color\",\n    \"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\",\n    \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\",\n    \"scrollbar-track-color\", \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\", \"shape-inside\", \"zoom\"\n  ], nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n  var fontProperties_ = [\n    \"font-display\", \"font-family\", \"src\", \"unicode-range\", \"font-variant\",\n     \"font-feature-settings\", \"font-stretch\", \"font-weight\", \"font-style\"\n  ], fontProperties = keySet(fontProperties_);\n\n  var counterDescriptors_ = [\n    \"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\",\n    \"speak-as\", \"suffix\", \"symbols\", \"system\"\n  ], counterDescriptors = keySet(counterDescriptors_);\n\n  var colorKeywords_ = [\n    \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\",\n    \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\",\n    \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\",\n    \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\",\n    \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\",\n    \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\",\n    \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\",\n    \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\",\n    \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\",\n    \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\",\n    \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\",\n    \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\",\n    \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\",\n    \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\",\n    \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\",\n    \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\",\n    \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\",\n    \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\",\n    \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\",\n    \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\",\n    \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\",\n    \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\",\n    \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\",\n    \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\",\n    \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\",\n    \"whitesmoke\", \"yellow\", \"yellowgreen\"\n  ], colorKeywords = keySet(colorKeywords_);\n\n  var valueKeywords_ = [\n    \"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\",\n    \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\",\n    \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\",\n    \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\",\n    \"avoid-region\", \"axis-pan\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\",\n    \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\",\n    \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\",\n    \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\",\n    \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\",\n    \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\",\n    \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\",\n    \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\",\n    \"compact\", \"condensed\", \"contain\", \"content\", \"contents\",\n    \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\",\n    \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\",\n    \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\",\n    \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\",\n    \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\",\n    \"dot-dash\", \"dot-dot-dash\",\n    \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\",\n    \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\",\n    \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\",\n    \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\",\n    \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\",\n    \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\",\n    \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\",\n    \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\",\n    \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\",\n    \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fill-box\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\",\n    \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\",\n    \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\",\n    \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\",\n    \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\",\n    \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\",\n    \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\",\n    \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\",\n    \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\",\n    \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\",\n    \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\",\n    \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\",\n    \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\",\n    \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\",\n    \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\",\n    \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"manipulation\", \"match\", \"matrix\", \"matrix3d\",\n    \"media-controls-background\", \"media-current-time-display\",\n    \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\",\n    \"media-return-to-realtime-button\", \"media-rewind-button\",\n    \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\",\n    \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\",\n    \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\",\n    \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\",\n    \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\",\n    \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiple_mask_images\", \"multiply\", \"myanmar\", \"n-resize\",\n    \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\",\n    \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\",\n    \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\",\n    \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\",\n    \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\",\n    \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"pinch-zoom\", \"plus-darker\", \"plus-lighter\",\n    \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\",\n    \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\",\n    \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\",\n    \"relative\", \"repeat\", \"repeating-linear-gradient\",\n    \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\",\n    \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\",\n    \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\",\n    \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\",\n    \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\",\n    \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\",\n    \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\",\n    \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\",\n    \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\",\n    \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\",\n    \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\",\n    \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"stroke-box\", \"sub\",\n    \"subpixel-antialiased\", \"svg_masks\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\",\n    \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\",\n    \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\",\n    \"tamil\",\n    \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\",\n    \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\",\n    \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\",\n    \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\",\n    \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\",\n    \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\",\n    \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unidirectional-pan\", \"unset\", \"up\",\n    \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\",\n    \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\",\n    \"var\", \"vertical\", \"vertical-text\", \"view-box\", \"visible\", \"visibleFill\", \"visiblePainted\",\n    \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\",\n    \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\",\n    \"xx-large\", \"xx-small\"\n  ], valueKeywords = keySet(valueKeywords_);\n\n  var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_)\n    .concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_)\n    .concat(valueKeywords_);\n  CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n  function tokenCComment(stream, state) {\n    var maybeEnd = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == \"/\") {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return [\"comment\", \"comment\"];\n  }\n\n  CodeMirror.defineMIME(\"text/css\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-scss\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \":\": function(stream) {\n        if (stream.match(/^\\s*\\{/, false))\n          return [null, null]\n        return false;\n      },\n      \"$\": function(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"#\": function(stream) {\n        if (!stream.eat(\"{\")) return false;\n        return [null, \"interpolation\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"scss\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-less\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \"@\": function(stream) {\n        if (stream.eat(\"{\")) return [null, \"interpolation\"];\n        if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i, false)) return false;\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"&\": function() {\n        return [\"atom\", \"atom\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"less\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-gss\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    supportsAtComponent: true,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\",\n    helperType: \"gss\"\n  });\n\n}\n\nexport default css;\n","function xml(CodeMirror) {\n\nvar htmlConfig = {\n  autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                    'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                    'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                    'track': true, 'wbr': true, 'menuitem': true},\n  implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                     'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                     'th': true, 'tr': true},\n  contextGrabbers: {\n    'dd': {'dd': true, 'dt': true},\n    'dt': {'dd': true, 'dt': true},\n    'li': {'li': true},\n    'option': {'option': true, 'optgroup': true},\n    'optgroup': {'optgroup': true},\n    'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n          'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n          'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n          'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n          'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n    'rp': {'rp': true, 'rt': true},\n    'rt': {'rp': true, 'rt': true},\n    'tbody': {'tbody': true, 'tfoot': true},\n    'td': {'td': true, 'th': true},\n    'tfoot': {'tbody': true},\n    'th': {'td': true, 'th': true},\n    'thead': {'tbody': true, 'tfoot': true},\n    'tr': {'tr': true}\n  },\n  doNotIndent: {\"pre\": true},\n  allowUnquoted: true,\n  allowMissing: true,\n  caseFold: true\n};\n\nvar xmlConfig = {\n  autoSelfClosers: {},\n  implicitlyClosed: {},\n  contextGrabbers: {},\n  doNotIndent: {},\n  allowUnquoted: false,\n  allowMissing: false,\n  allowMissingTagName: false,\n  caseFold: false\n};\n\nCodeMirror.defineMode(\"xml\", function(editorConf, config_) {\n  var indentUnit = editorConf.indentUnit;\n  var config = {};\n  var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n  for (var prop in defaults) config[prop] = defaults[prop];\n  for (var prop in config_) config[prop] = config_[prop];\n\n  // Return variables for tokenizers\n  var type, setStyle;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n  inText.isInText = true;\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag bracket\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      state.state = baseState;\n      state.tagName = state.tagStart = null;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" tag error\" : \"tag error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    }\n  }\n\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  function Context(state, tagName, startOfLine) {\n    this.prev = state.context;\n    this.tagName = tagName || \"\";\n    this.indent = state.indented;\n    this.startOfLine = startOfLine;\n    if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent))\n      this.noIndent = true;\n  }\n  function popContext(state) {\n    if (state.context) state.context = state.context.prev;\n  }\n  function maybePopContext(state, nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!state.context) {\n        return;\n      }\n      parentTagName = state.context.tagName;\n      if (!config.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext(state);\n    }\n  }\n\n  function baseState(type, stream, state) {\n    if (type == \"openTag\") {\n      state.tagStart = stream.column();\n      return tagNameState;\n    } else if (type == \"closeTag\") {\n      return closeTagNameState;\n    } else {\n      return baseState;\n    }\n  }\n  function tagNameState(type, stream, state) {\n    if (type == \"word\") {\n      state.tagName = stream.current();\n      setStyle = \"tag\";\n      return attrState;\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return attrState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return tagNameState;\n    }\n  }\n  function closeTagNameState(type, stream, state) {\n    if (type == \"word\") {\n      var tagName = stream.current();\n      if (state.context && state.context.tagName != tagName &&\n          config.implicitlyClosed.hasOwnProperty(state.context.tagName))\n        popContext(state);\n      if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n        setStyle = \"tag\";\n        return closeState;\n      } else {\n        setStyle = \"tag error\";\n        return closeStateErr;\n      }\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return closeState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return closeStateErr;\n    }\n  }\n\n  function closeState(type, _stream, state) {\n    if (type != \"endTag\") {\n      setStyle = \"error\";\n      return closeState;\n    }\n    popContext(state);\n    return baseState;\n  }\n  function closeStateErr(type, stream, state) {\n    setStyle = \"error\";\n    return closeState(type, stream, state);\n  }\n\n  function attrState(type, _stream, state) {\n    if (type == \"word\") {\n      setStyle = \"attribute\";\n      return attrEqState;\n    } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n      var tagName = state.tagName, tagStart = state.tagStart;\n      state.tagName = state.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          config.autoSelfClosers.hasOwnProperty(tagName)) {\n        maybePopContext(state, tagName);\n      } else {\n        maybePopContext(state, tagName);\n        state.context = new Context(state, tagName, tagStart == state.indented);\n      }\n      return baseState;\n    }\n    setStyle = \"error\";\n    return attrState;\n  }\n  function attrEqState(type, stream, state) {\n    if (type == \"equals\") return attrValueState;\n    if (!config.allowMissing) setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrValueState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    if (type == \"word\" && config.allowUnquoted) {setStyle = \"string\"; return attrState;}\n    setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrContinuedState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    return attrState(type, stream, state);\n  }\n\n  return {\n    startState: function(baseIndent) {\n      var state = {tokenize: inText,\n                   state: baseState,\n                   indented: baseIndent || 0,\n                   tagName: null, tagStart: null,\n                   context: null};\n      if (baseIndent != null) state.baseIndent = baseIndent;\n      return state\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol())\n        state.indented = stream.indentation();\n\n      if (stream.eatSpace()) return null;\n      type = null;\n      var style = state.tokenize(stream, state);\n      if ((style || type) && style != \"comment\") {\n        setStyle = null;\n        state.state = state.state(type || style, stream, state);\n        if (setStyle)\n          style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      }\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        if (state.tagStart == state.indented)\n          return state.stringStartCol + 1;\n        else\n          return state.indented + indentUnit;\n      }\n      if (context && context.noIndent) return CodeMirror.Pass;\n      if (state.tokenize != inTag && state.tokenize != inText)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (config.multilineTagIndentPastTag !== false)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n      }\n      if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n      if (tagAfter && tagAfter[1]) { // Closing tag spotted\n        while (context) {\n          if (context.tagName == tagAfter[2]) {\n            context = context.prev;\n            break;\n          } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n            context = context.prev;\n          } else {\n            break;\n          }\n        }\n      } else if (tagAfter) { // Opening tag spotted\n        while (context) {\n          var grabbers = config.contextGrabbers[context.tagName];\n          if (grabbers && grabbers.hasOwnProperty(tagAfter[2]))\n            context = context.prev;\n          else\n            break;\n        }\n      }\n      while (context && context.prev && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return state.baseIndent || 0;\n    },\n\n    electricInput: /<\\/[\\s\\w:]+>$/,\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: config.htmlMode ? \"html\" : \"xml\",\n    helperType: config.htmlMode ? \"html\" : \"xml\",\n\n    skipAttribute: function(state) {\n      if (state.state == attrValueState)\n        state.state = attrState;\n    },\n\n    xmlCurrentTag: function(state) {\n      return state.tagName ? {name: state.tagName, close: state.type == \"closeTag\"} : null\n    },\n\n    xmlCurrentContext: function(state) {\n      var context = [];\n      for (var cx = state.context; cx; cx = cx.prev)\n        context.push(cx.tagName);\n      return context.reverse()\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\n\n}\n\nexport default xml;\n","function stex(CodeMirror) {\n\n  CodeMirror.defineMode(\"stex\", function(_config, parserConfig) {\n\n    function pushCommand(state, command) {\n      state.cmdState.push(command);\n    }\n\n    function peekCommand(state) {\n      if (state.cmdState.length > 0) {\n        return state.cmdState[state.cmdState.length - 1];\n      } else {\n        return null;\n      }\n    }\n\n    function popCommand(state) {\n      var plug = state.cmdState.pop();\n      if (plug) {\n        plug.closeBracket();\n      }\n    }\n\n    // returns the non-default plugin closest to the end of the list\n    function getMostPowerful(state) {\n      var context = state.cmdState;\n      for (var i = context.length - 1; i >= 0; i--) {\n        var plug = context[i];\n        if (plug.name == \"DEFAULT\") {\n          continue;\n        }\n        return plug;\n      }\n      return { styleIdentifier: function() { return null; } };\n    }\n\n    function addPluginPattern(pluginName, cmdStyle, styles) {\n      return function () {\n        this.name = pluginName;\n        this.bracketNo = 0;\n        this.style = cmdStyle;\n        this.styles = styles;\n        this.argument = null;   // \\begin and \\end have arguments that follow. These are stored in the plugin\n\n        this.styleIdentifier = function() {\n          return this.styles[this.bracketNo - 1] || null;\n        };\n        this.openBracket = function() {\n          this.bracketNo++;\n          return \"bracket\";\n        };\n        this.closeBracket = function() {};\n      };\n    }\n\n    var plugins = {};\n\n    plugins[\"importmodule\"] = addPluginPattern(\"importmodule\", \"tag\", [\"string\", \"builtin\"]);\n    plugins[\"documentclass\"] = addPluginPattern(\"documentclass\", \"tag\", [\"\", \"atom\"]);\n    plugins[\"usepackage\"] = addPluginPattern(\"usepackage\", \"tag\", [\"atom\"]);\n    plugins[\"begin\"] = addPluginPattern(\"begin\", \"tag\", [\"atom\"]);\n    plugins[\"end\"] = addPluginPattern(\"end\", \"tag\", [\"atom\"]);\n\n    plugins[\"label\"    ] = addPluginPattern(\"label\"    , \"tag\", [\"atom\"]);\n    plugins[\"ref\"      ] = addPluginPattern(\"ref\"      , \"tag\", [\"atom\"]);\n    plugins[\"eqref\"    ] = addPluginPattern(\"eqref\"    , \"tag\", [\"atom\"]);\n    plugins[\"cite\"     ] = addPluginPattern(\"cite\"     , \"tag\", [\"atom\"]);\n    plugins[\"bibitem\"  ] = addPluginPattern(\"bibitem\"  , \"tag\", [\"atom\"]);\n    plugins[\"Bibitem\"  ] = addPluginPattern(\"Bibitem\"  , \"tag\", [\"atom\"]);\n    plugins[\"RBibitem\" ] = addPluginPattern(\"RBibitem\" , \"tag\", [\"atom\"]);\n\n    plugins[\"DEFAULT\"] = function () {\n      this.name = \"DEFAULT\";\n      this.style = \"tag\";\n\n      this.styleIdentifier = this.openBracket = this.closeBracket = function() {};\n    };\n\n    function setState(state, f) {\n      state.f = f;\n    }\n\n    // called when in a normal (no environment) context\n    function normal(source, state) {\n      var plug;\n      // Do we look like '\\command' ?  If so, attempt to apply the plugin 'command'\n      if (source.match(/^\\\\[a-zA-Z@]+/)) {\n        var cmdName = source.current().slice(1);\n        plug = plugins.hasOwnProperty(cmdName) ? plugins[cmdName] : plugins[\"DEFAULT\"];\n        plug = new plug();\n        pushCommand(state, plug);\n        setState(state, beginParams);\n        return plug.style;\n      }\n\n      // escape characters\n      if (source.match(/^\\\\[$&%#{}_]/)) {\n        return \"tag\";\n      }\n\n      // white space control characters\n      if (source.match(/^\\\\[,;!\\/\\\\]/)) {\n        return \"tag\";\n      }\n\n      // find if we're starting various math modes\n      if (source.match(\"\\\\[\")) {\n        setState(state, function(source, state){ return inMathMode(source, state, \"\\\\]\"); });\n        return \"keyword\";\n      }\n      if (source.match(\"\\\\(\")) {\n        setState(state, function(source, state){ return inMathMode(source, state, \"\\\\)\"); });\n        return \"keyword\";\n      }\n      if (source.match(\"$$\")) {\n        setState(state, function(source, state){ return inMathMode(source, state, \"$$\"); });\n        return \"keyword\";\n      }\n      if (source.match(\"$\")) {\n        setState(state, function(source, state){ return inMathMode(source, state, \"$\"); });\n        return \"keyword\";\n      }\n\n      var ch = source.next();\n      if (ch == \"%\") {\n        source.skipToEnd();\n        return \"comment\";\n      } else if (ch == '}' || ch == ']') {\n        plug = peekCommand(state);\n        if (plug) {\n          plug.closeBracket(ch);\n          setState(state, beginParams);\n        } else {\n          return \"error\";\n        }\n        return \"bracket\";\n      } else if (ch == '{' || ch == '[') {\n        plug = plugins[\"DEFAULT\"];\n        plug = new plug();\n        pushCommand(state, plug);\n        return \"bracket\";\n      } else if (/\\d/.test(ch)) {\n        source.eatWhile(/[\\w.%]/);\n        return \"atom\";\n      } else {\n        source.eatWhile(/[\\w\\-_]/);\n        plug = getMostPowerful(state);\n        if (plug.name == 'begin') {\n          plug.argument = source.current();\n        }\n        return plug.styleIdentifier();\n      }\n    }\n\n    function inMathMode(source, state, endModeSeq) {\n      if (source.eatSpace()) {\n        return null;\n      }\n      if (endModeSeq && source.match(endModeSeq)) {\n        setState(state, normal);\n        return \"keyword\";\n      }\n      if (source.match(/^\\\\[a-zA-Z@]+/)) {\n        return \"tag\";\n      }\n      if (source.match(/^[a-zA-Z]+/)) {\n        return \"variable-2\";\n      }\n      // escape characters\n      if (source.match(/^\\\\[$&%#{}_]/)) {\n        return \"tag\";\n      }\n      // white space control characters\n      if (source.match(/^\\\\[,;!\\/]/)) {\n        return \"tag\";\n      }\n      // special math-mode characters\n      if (source.match(/^[\\^_&]/)) {\n        return \"tag\";\n      }\n      // non-special characters\n      if (source.match(/^[+\\-<>|=,\\/@!*:;'\"`~#?]/)) {\n        return null;\n      }\n      if (source.match(/^(\\d+\\.\\d*|\\d*\\.\\d+|\\d+)/)) {\n        return \"number\";\n      }\n      var ch = source.next();\n      if (ch == \"{\" || ch == \"}\" || ch == \"[\" || ch == \"]\" || ch == \"(\" || ch == \")\") {\n        return \"bracket\";\n      }\n\n      if (ch == \"%\") {\n        source.skipToEnd();\n        return \"comment\";\n      }\n      return \"error\";\n    }\n\n    function beginParams(source, state) {\n      var ch = source.peek(), lastPlug;\n      if (ch == '{' || ch == '[') {\n        lastPlug = peekCommand(state);\n        lastPlug.openBracket(ch);\n        source.eat(ch);\n        setState(state, normal);\n        return \"bracket\";\n      }\n      if (/[ \\t\\r]/.test(ch)) {\n        source.eat(ch);\n        return null;\n      }\n      setState(state, normal);\n      popCommand(state);\n\n      return normal(source, state);\n    }\n\n    return {\n      startState: function() {\n        var f = parserConfig.inMathMode ? function(source, state){ return inMathMode(source, state); } : normal;\n        return {\n          cmdState: [],\n          f: f\n        };\n      },\n      copyState: function(s) {\n        return {\n          cmdState: s.cmdState.slice(),\n          f: s.f\n        };\n      },\n      token: function(stream, state) {\n        return state.f(stream, state);\n      },\n      blankLine: function(state) {\n        state.f = normal;\n        state.cmdState.length = 0;\n      },\n      lineComment: \"%\"\n    };\n  });\n\n  CodeMirror.defineMIME(\"text/x-stex\", \"stex\");\n  CodeMirror.defineMIME(\"text/x-latex\", \"stex\");\n\n}\n\nexport default stex;\n","function placeholder(CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function() { onComposition(cm); });\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose);\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\");\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder);\n    elt.appendChild(placeHolder);\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function() {\n      var empty = false;\n      if (cm.lineCount() == 1) {\n        var input = cm.getInputField();\n        empty = input.nodeName == \"TEXTAREA\" ? !cm.getLine(0).length\n          : !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent);\n      }\n      if (empty) setPlaceholder(cm);\n      else clearPlaceholder(cm);\n    }, 20);\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n}\n\nexport default placeholder;\n","function matchbrackets(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\", \"<\": \">>\", \">\": \"<<\"};\n\n  function bracketRegex(config) {\n    return config && config.bracketRegex || /[(){}[\\]]/\n  }\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor;\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className);\n    var re = bracketRegex(config);\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && re.test(line.text.charAt(pos)) && matching[line.text.charAt(pos)]) ||\n        re.test(line.text.charAt(pos + 1)) && matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = bracketRegex(config);\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined ||\n                            (cm.getTokenTypeAt(Pos(lineNo, pos + 1)) || \"\") == (style || \"\"))) {\n          var match = matching[ch];\n          if (match && (match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000,\n      highlightNonMatching = config && config.highlightNonMatching;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && (match.match || highlightNonMatching !== false) && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textarea whenever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n      cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  function clearHighlighted(cm) {\n    if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\n      cm.state.matchBrackets.currentlyHighlighted();\n      cm.state.matchBrackets.currentlyHighlighted = null;\n    }\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      cm.off(\"focus\", doMatchBrackets);\n      cm.off(\"blur\", clearHighlighted);\n      clearHighlighted(cm);\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n      cm.on(\"focus\", doMatchBrackets);\n      cm.on(\"blur\", clearHighlighted);\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null;\n      } else {\n        oldConfig.strict = config;\n        config = oldConfig;\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n}\n\nexport default matchbrackets;\n","function lint(CodeMirror) {\n  var GUTTER_ID = \"CodeMirror-lint-markers\";\n  var LINT_LINE_ID = \"CodeMirror-lint-line-\";\n\n  function showTooltip(cm, e, content) {\n    var tt = document.createElement(\"div\");\n    tt.className = \"CodeMirror-lint-tooltip cm-s-\" + cm.options.theme;\n    tt.appendChild(content.cloneNode(true));\n    if (cm.state.lint.options.selfContain)\n      cm.getWrapperElement().appendChild(tt);\n    else\n      document.body.appendChild(tt);\n\n    function position(e) {\n      if (!tt.parentNode) return CodeMirror.off(document, \"mousemove\", position);\n      tt.style.top = Math.max(0, e.clientY - tt.offsetHeight - 5) + \"px\";\n      tt.style.left = (e.clientX + 5) + \"px\";\n    }\n    CodeMirror.on(document, \"mousemove\", position);\n    position(e);\n    if (tt.style.opacity != null) tt.style.opacity = 1;\n    return tt;\n  }\n  function rm(elt) {\n    if (elt.parentNode) elt.parentNode.removeChild(elt);\n  }\n  function hideTooltip(tt) {\n    if (!tt.parentNode) return;\n    if (tt.style.opacity == null) rm(tt);\n    tt.style.opacity = 0;\n    setTimeout(function() { rm(tt); }, 600);\n  }\n\n  function showTooltipFor(cm, e, content, node) {\n    var tooltip = showTooltip(cm, e, content);\n    function hide() {\n      CodeMirror.off(node, \"mouseout\", hide);\n      if (tooltip) { hideTooltip(tooltip); tooltip = null; }\n    }\n    var poll = setInterval(function() {\n      if (tooltip) for (var n = node;; n = n.parentNode) {\n        if (n && n.nodeType == 11) n = n.host;\n        if (n == document.body) return;\n        if (!n) { hide(); break; }\n      }\n      if (!tooltip) return clearInterval(poll);\n    }, 400);\n    CodeMirror.on(node, \"mouseout\", hide);\n  }\n\n  function LintState(cm, conf, hasGutter) {\n    this.marked = [];\n    if (conf instanceof Function) conf = {getAnnotations: conf};\n    if (!conf || conf === true) conf = {};\n    this.options = {};\n    this.linterOptions = conf.options || {};\n    for (var prop in defaults) this.options[prop] = defaults[prop];\n    for (var prop in conf) {\n      if (defaults.hasOwnProperty(prop)) {\n        if (conf[prop] != null) this.options[prop] = conf[prop];\n      } else if (!conf.options) {\n        this.linterOptions[prop] = conf[prop];\n      }\n    }\n    this.timeout = null;\n    this.hasGutter = hasGutter;\n    this.onMouseOver = function(e) { onMouseOver(cm, e); };\n    this.waitingFor = 0;\n  }\n\n  var defaults = {\n    highlightLines: false,\n    tooltips: true,\n    delay: 500,\n    lintOnChange: true,\n    getAnnotations: null,\n    async: false,\n    selfContain: null,\n    formatAnnotation: null,\n    onUpdateLinting: null\n  };\n\n  function clearMarks(cm) {\n    var state = cm.state.lint;\n    if (state.hasGutter) cm.clearGutter(GUTTER_ID);\n    if (state.options.highlightLines) clearErrorLines(cm);\n    for (var i = 0; i < state.marked.length; ++i)\n      state.marked[i].clear();\n    state.marked.length = 0;\n  }\n\n  function clearErrorLines(cm) {\n    cm.eachLine(function(line) {\n      var has = line.wrapClass && /\\bCodeMirror-lint-line-\\w+\\b/.exec(line.wrapClass);\n      if (has) cm.removeLineClass(line, \"wrap\", has[0]);\n    });\n  }\n\n  function makeMarker(cm, labels, severity, multiple, tooltips) {\n    var marker = document.createElement(\"div\"), inner = marker;\n    marker.className = \"CodeMirror-lint-marker CodeMirror-lint-marker-\" + severity;\n    if (multiple) {\n      inner = marker.appendChild(document.createElement(\"div\"));\n      inner.className = \"CodeMirror-lint-marker CodeMirror-lint-marker-multiple\";\n    }\n\n    if (tooltips != false) CodeMirror.on(inner, \"mouseover\", function(e) {\n      showTooltipFor(cm, e, labels, inner);\n    });\n\n    return marker;\n  }\n\n  function getMaxSeverity(a, b) {\n    if (a == \"error\") return a;\n    else return b;\n  }\n\n  function groupByLine(annotations) {\n    var lines = [];\n    for (var i = 0; i < annotations.length; ++i) {\n      var ann = annotations[i], line = ann.from.line;\n      (lines[line] || (lines[line] = [])).push(ann);\n    }\n    return lines;\n  }\n\n  function annotationTooltip(ann) {\n    var severity = ann.severity;\n    if (!severity) severity = \"error\";\n    var tip = document.createElement(\"div\");\n    tip.className = \"CodeMirror-lint-message CodeMirror-lint-message-\" + severity;\n    if (typeof ann.messageHTML != 'undefined') {\n      tip.innerHTML = ann.messageHTML;\n    } else {\n      tip.appendChild(document.createTextNode(ann.message));\n    }\n    return tip;\n  }\n\n  function lintAsync(cm, getAnnotations) {\n    var state = cm.state.lint;\n    var id = ++state.waitingFor;\n    function abort() {\n      id = -1;\n      cm.off(\"change\", abort);\n    }\n    cm.on(\"change\", abort);\n    getAnnotations(cm.getValue(), function(annotations, arg2) {\n      cm.off(\"change\", abort);\n      if (state.waitingFor != id) return\n      if (arg2 && annotations instanceof CodeMirror) annotations = arg2;\n      cm.operation(function() {updateLinting(cm, annotations);});\n    }, state.linterOptions, cm);\n  }\n\n  function startLinting(cm) {\n    var state = cm.state.lint;\n    if (!state) return;\n    var options = state.options;\n    /*\n     * Passing rules in `options` property prevents JSHint (and other linters) from complaining\n     * about unrecognized rules like `onUpdateLinting`, `delay`, `lintOnChange`, etc.\n     */\n    var getAnnotations = options.getAnnotations || cm.getHelper(CodeMirror.Pos(0, 0), \"lint\");\n    if (!getAnnotations) return;\n    if (options.async || getAnnotations.async) {\n      lintAsync(cm, getAnnotations);\n    } else {\n      var annotations = getAnnotations(cm.getValue(), state.linterOptions, cm);\n      if (!annotations) return;\n      if (annotations.then) annotations.then(function(issues) {\n        cm.operation(function() {updateLinting(cm, issues);});\n      });\n      else cm.operation(function() {updateLinting(cm, annotations);});\n    }\n  }\n\n  function updateLinting(cm, annotationsNotSorted) {\n    var state = cm.state.lint;\n    if (!state) return;\n    var options = state.options;\n    clearMarks(cm);\n\n    var annotations = groupByLine(annotationsNotSorted);\n\n    for (var line = 0; line < annotations.length; ++line) {\n      var anns = annotations[line];\n      if (!anns) continue;\n\n      // filter out duplicate messages\n      var message = [];\n      anns = anns.filter(function(item) { return message.indexOf(item.message) > -1 ? false : message.push(item.message) });\n\n      var maxSeverity = null;\n      var tipLabel = state.hasGutter && document.createDocumentFragment();\n\n      for (var i = 0; i < anns.length; ++i) {\n        var ann = anns[i];\n        var severity = ann.severity;\n        if (!severity) severity = \"error\";\n        maxSeverity = getMaxSeverity(maxSeverity, severity);\n\n        if (options.formatAnnotation) ann = options.formatAnnotation(ann);\n        if (state.hasGutter) tipLabel.appendChild(annotationTooltip(ann));\n\n        if (ann.to) state.marked.push(cm.markText(ann.from, ann.to, {\n          className: \"CodeMirror-lint-mark CodeMirror-lint-mark-\" + severity,\n          __annotation: ann\n        }));\n      }\n      // use original annotations[line] to show multiple messages\n      if (state.hasGutter)\n        cm.setGutterMarker(line, GUTTER_ID, makeMarker(cm, tipLabel, maxSeverity, annotations[line].length > 1,\n                                                       options.tooltips));\n\n      if (options.highlightLines)\n        cm.addLineClass(line, \"wrap\", LINT_LINE_ID + maxSeverity);\n    }\n    if (options.onUpdateLinting) options.onUpdateLinting(annotationsNotSorted, annotations, cm);\n  }\n\n  function onChange(cm) {\n    var state = cm.state.lint;\n    if (!state) return;\n    clearTimeout(state.timeout);\n    state.timeout = setTimeout(function(){startLinting(cm);}, state.options.delay);\n  }\n\n  function popupTooltips(cm, annotations, e) {\n    var target = e.target || e.srcElement;\n    var tooltip = document.createDocumentFragment();\n    for (var i = 0; i < annotations.length; i++) {\n      var ann = annotations[i];\n      tooltip.appendChild(annotationTooltip(ann));\n    }\n    showTooltipFor(cm, e, tooltip, target);\n  }\n\n  function onMouseOver(cm, e) {\n    var target = e.target || e.srcElement;\n    if (!/\\bCodeMirror-lint-mark-/.test(target.className)) return;\n    var box = target.getBoundingClientRect(), x = (box.left + box.right) / 2, y = (box.top + box.bottom) / 2;\n    var spans = cm.findMarksAt(cm.coordsChar({left: x, top: y}, \"client\"));\n\n    var annotations = [];\n    for (var i = 0; i < spans.length; ++i) {\n      var ann = spans[i].__annotation;\n      if (ann) annotations.push(ann);\n    }\n    if (annotations.length) popupTooltips(cm, annotations, e);\n  }\n\n  CodeMirror.defineOption(\"lint\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      clearMarks(cm);\n      if (cm.state.lint.options.lintOnChange !== false)\n        cm.off(\"change\", onChange);\n      CodeMirror.off(cm.getWrapperElement(), \"mouseover\", cm.state.lint.onMouseOver);\n      clearTimeout(cm.state.lint.timeout);\n      delete cm.state.lint;\n    }\n\n    if (val) {\n      var gutters = cm.getOption(\"gutters\"), hasLintGutter = false;\n      for (var i = 0; i < gutters.length; ++i) if (gutters[i] == GUTTER_ID) hasLintGutter = true;\n      var state = cm.state.lint = new LintState(cm, val, hasLintGutter);\n      if (state.options.lintOnChange)\n        cm.on(\"change\", onChange);\n      if (state.options.tooltips != false && state.options.tooltips != \"gutter\")\n        CodeMirror.on(cm.getWrapperElement(), \"mouseover\", state.onMouseOver);\n\n      startLinting(cm);\n    }\n  });\n\n  CodeMirror.defineExtension(\"performLint\", function() {\n    startLinting(this);\n  });\n}\n\nexport default lint;\n","import { LitElement, html, css } from 'lit-element'\nimport '@polymer/iron-ajax/iron-ajax.js';\nimport CodeMirror from 'codemirror/src/codemirror.js';\n\nimport modeXquery from \"../lib/codemirror/mode/xquery/xquery.js\";\nimport modeCss from \"../lib/codemirror/mode/css/css.js\";\nimport modeXml from \"../lib/codemirror/mode/xml/xml.js\";\nimport modeStex from \"../lib/codemirror/mode/stex/stex.js\";\nimport addonDisplayPlaceholder from \"../lib/codemirror/addon/display/placeholder.js\";\nimport addonEditMatchBracket from \"../lib/codemirror/addon/edit/matchbrackets.js\";\nimport addonLint from \"../lib/codemirror/addon/lint/lint.js\";\nimport { resolveURL, cmpVersion } from './utils.js';\nimport { get as i18n } from './pb-i18n.js';\n\nmodeXquery(CodeMirror);\nmodeCss(CodeMirror);\nmodeXml(CodeMirror);\nmodeStex(CodeMirror);\naddonDisplayPlaceholder(CodeMirror);\naddonEditMatchBracket(CodeMirror);\naddonLint(CodeMirror);\n\nasync function loadTheme(theme) {\n    const resource = resolveURL('../css/codemirror/') + `${theme}.css`;\n    console.log('<pb-code-editor> loading theme %s from %s', theme, resource);\n\n    const fetchedStyles = await fetch(resource).then(async response => response.text()).catch(e => '');\n\n    return html`<style>${fetchedStyles}</style>`;\n}\n\n/**\n * A wrapper for the popular codemirror code editor.\n *\n *\n * @customElement\n * @demo demo/pb-code-editor.html\n */\nexport class PbCodeEditor extends LitElement {\n\n    static get styles() {\n        return css`\n            :host {\n                display: block;\n                width: 100%;\n                margin: 0;\n                position: relative;\n                color:inherit;\n            }\n\n            #editorDiv, .CodeMirror {\n              width: 100%;\n            }\n\n            .label {\n                color: var(--paper-grey-500);\n                margin-bottom:5px;\n            }\n\n            /* BASICS */\n\n            .CodeMirror {\n                /* Set height, width, borders, and global font properties here */\n                font-family: monospace;\n                height: auto;\n                color: black;\n                direction: ltr;\n            }\n\n            /* PADDING */\n\n            .CodeMirror-lines {\n                padding: 4px 0; /* Vertical padding around content */\n            }\n            .CodeMirror pre.CodeMirror-line,\n            .CodeMirror pre.CodeMirror-line-like {\n                padding: 0 4px; /* Horizontal padding of content */\n            }\n\n            .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n                background-color: white; /* The little square between H and V scrollbars */\n            }\n\n            /* GUTTER */\n\n            .CodeMirror-gutters {\n                border-right: 1px solid #ddd;\n                background-color: #f7f7f7;\n                white-space: nowrap;\n            }\n            .CodeMirror-linenumbers {}\n            .CodeMirror-linenumber {\n                padding: 0 3px 0 5px;\n                min-width: 20px;\n                text-align: right;\n                color: #999;\n                white-space: nowrap;\n            }\n\n            .CodeMirror-guttermarker { color: black; }\n            .CodeMirror-guttermarker-subtle { color: #999; }\n\n            /* CURSOR */\n\n            .CodeMirror-cursor {\n                border-left: 1px solid black;\n                border-right: none;\n                width: 0;\n            }\n            /* Shown when moving in bi-directional text */\n            .CodeMirror div.CodeMirror-secondarycursor {\n                border-left: 1px solid silver;\n            }\n            .cm-fat-cursor .CodeMirror-cursor {\n                width: auto;\n                border: 0 !important;\n                background: #7e7;\n            }\n            .cm-fat-cursor div.CodeMirror-cursors {\n                z-index: 1;\n            }\n            .cm-fat-cursor-mark {\n                background-color: rgba(20, 255, 20, 0.5);\n                -webkit-animation: blink 1.06s steps(1) infinite;\n                -moz-animation: blink 1.06s steps(1) infinite;\n                animation: blink 1.06s steps(1) infinite;\n            }\n            .cm-animate-fat-cursor {\n                width: auto;\n                border: 0;\n                -webkit-animation: blink 1.06s steps(1) infinite;\n                -moz-animation: blink 1.06s steps(1) infinite;\n                animation: blink 1.06s steps(1) infinite;\n                background-color: #7e7;\n            }\n            @-moz-keyframes blink {\n                0% {}\n                50% { background-color: transparent; }\n                100% {}\n            }\n            @-webkit-keyframes blink {\n                0% {}\n                50% { background-color: transparent; }\n                100% {}\n            }\n            @keyframes blink {\n                0% {}\n                50% { background-color: transparent; }\n                100% {}\n            }\n\n            /* Can style cursor different in overwrite (non-insert) mode */\n            .CodeMirror-overwrite .CodeMirror-cursor {}\n\n            .cm-tab { display: inline-block; text-decoration: inherit; }\n\n            .CodeMirror-rulers {\n                position: absolute;\n                left: 0; right: 0; top: -50px; bottom: 0;\n                overflow: hidden;\n            }\n            .CodeMirror-ruler {\n                border-left: 1px solid #ccc;\n                top: 0; bottom: 0;\n                position: absolute;\n            }\n\n            /* DEFAULT THEME */\n\n            .cm-s-default .cm-header {color: blue;}\n            .cm-s-default .cm-quote {color: #090;}\n            .cm-negative {color: #d44;}\n            .cm-positive {color: #292;}\n            .cm-header, .cm-strong {font-weight: bold;}\n            .cm-em {font-style: italic;}\n            .cm-link {text-decoration: underline;}\n            .cm-strikethrough {text-decoration: line-through;}\n\n            .cm-s-default .cm-keyword {color: #708;}\n            .cm-s-default .cm-atom {color: #219;}\n            .cm-s-default .cm-number {color: #164;}\n            .cm-s-default .cm-def {color: #00f;}\n            .cm-s-default .cm-variable,\n            .cm-s-default .cm-punctuation,\n            .cm-s-default .cm-property,\n            .cm-s-default .cm-operator {}\n            .cm-s-default .cm-variable-2 {color: #05a;}\n            .cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n            .cm-s-default .cm-comment {color: #a50;}\n            .cm-s-default .cm-string {color: #a11;}\n            .cm-s-default .cm-string-2 {color: #f50;}\n            .cm-s-default .cm-meta {color: #555;}\n            .cm-s-default .cm-qualifier {color: #555;}\n            .cm-s-default .cm-builtin {color: #30a;}\n            .cm-s-default .cm-bracket {color: #997;}\n            .cm-s-default .cm-tag {color: #170;}\n            .cm-s-default .cm-attribute {color: #00c;}\n            .cm-s-default .cm-hr {color: #999;}\n            .cm-s-default .cm-link {color: #00c;}\n\n            .cm-s-default .cm-error {color: #f00;}\n            .cm-invalidchar {color: #f00;}\n\n            .CodeMirror-composing { border-bottom: 2px solid; }\n\n            /* Default styles for common addons */\n\n            div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\n            div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n            .CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n            .CodeMirror-activeline-background {background: #e8f2ff;}\n\n            /* STOP */\n\n            /* The rest of this file contains styles related to the mechanics of\n            the editor. You probably shouldn't touch them. */\n\n            .CodeMirror {\n                position: relative;\n                overflow: hidden;\n                background: white;\n            }\n\n            .CodeMirror-scroll {\n                /* 50px is the magic margin used to hide the element's real scrollbars */\n                /* See overflow: hidden in .CodeMirror */\n                margin-bottom: -50px; margin-right: -50px;\n                padding-bottom: 50px;\n                max-height: 100%;\n                outline: none; /* Prevent dragging from highlighting the element */\n                position: relative;\n            }\n            .CodeMirror-sizer {\n                position: relative;\n                border-right: 50px solid transparent;\n            }\n\n            /* The fake, visible scrollbars. Used to force redraw during scrolling\n            before actual scrolling happens, thus preventing shaking and\n            flickering artifacts. */\n            .CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n                position: absolute;\n                z-index: 6;\n                display: none;\n            }\n            .CodeMirror-vscrollbar {\n                right: 0; top: 0;\n                overflow-x: hidden;\n                overflow-y: scroll;\n            }\n            .CodeMirror-hscrollbar {\n                bottom: 0; left: 0;\n                overflow-y: hidden;\n                overflow-x: scroll;\n            }\n            .CodeMirror-scrollbar-filler {\n                right: 0; bottom: 0;\n            }\n            .CodeMirror-gutter-filler {\n                left: 0; bottom: 0;\n            }\n\n            .CodeMirror-gutters {\n                position: absolute; left: 0; top: 0;\n                min-height: 100%;\n                z-index: 3;\n            }\n            .CodeMirror-gutter {\n                white-space: normal;\n                height: 100%;\n                display: inline-block;\n                vertical-align: top;\n                margin-bottom: -50px;\n            }\n            .CodeMirror-gutter-wrapper {\n                position: absolute;\n                z-index: 4;\n                background: none !important;\n                border: none !important;\n            }\n            .CodeMirror-gutter-background {\n                position: absolute;\n                top: 0; bottom: 0;\n                z-index: 4;\n            }\n            .CodeMirror-gutter-elt {\n                position: absolute;\n                cursor: default;\n                z-index: 4;\n            }\n            .CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n            .CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n            .CodeMirror-lines {\n                cursor: text;\n                min-height: 1px; /* prevents collapsing before first draw */\n            }\n            .CodeMirror pre.CodeMirror-line,\n            .CodeMirror pre.CodeMirror-line-like {\n                /* Reset some styles that the rest of the page might have set */\n                -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n                border-width: 0;\n                background: transparent;\n                font-family: inherit;\n                font-size: inherit;\n                margin: 0;\n                white-space: pre;\n                word-wrap: normal;\n                line-height: inherit;\n                color: inherit;\n                z-index: 2;\n                position: relative;\n                overflow: visible;\n                -webkit-tap-highlight-color: transparent;\n                -webkit-font-variant-ligatures: contextual;\n                font-variant-ligatures: contextual;\n            }\n            .CodeMirror-wrap pre.CodeMirror-line,\n            .CodeMirror-wrap pre.CodeMirror-line-like {\n                word-wrap: break-word;\n                white-space: pre-wrap;\n                word-break: normal;\n            }\n\n            .CodeMirror-linebackground {\n                position: absolute;\n                left: 0; right: 0; top: 0; bottom: 0;\n                z-index: 0;\n            }\n\n            .CodeMirror-linewidget {\n                position: relative;\n                z-index: 2;\n                padding: 0.1px; /* Force widget margins to stay inside of the container */\n            }\n\n            .CodeMirror-widget {}\n\n            .CodeMirror-rtl pre { direction: rtl; }\n\n            .CodeMirror-code {\n                outline: none;\n            }\n\n            /* Force content-box sizing for the elements where we expect it */\n            .CodeMirror-scroll,\n            .CodeMirror-sizer,\n            .CodeMirror-gutter,\n            .CodeMirror-gutters,\n            .CodeMirror-linenumber {\n                -moz-box-sizing: content-box;\n                box-sizing: content-box;\n            }\n\n            .CodeMirror-measure {\n                position: absolute;\n                width: 100%;\n                height: 0;\n                overflow: hidden;\n                visibility: hidden;\n            }\n\n            .CodeMirror-cursor {\n                position: absolute;\n                pointer-events: none;\n            }\n            .CodeMirror-measure pre { position: static; }\n\n            div.CodeMirror-cursors {\n                visibility: hidden;\n                position: relative;\n                z-index: 3;\n            }\n            div.CodeMirror-dragcursors {\n                visibility: visible;\n            }\n\n            .CodeMirror-focused div.CodeMirror-cursors {\n                visibility: visible;\n            }\n\n            .CodeMirror-selected { background: #d9d9d9; }\n            .CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n            .CodeMirror-crosshair { cursor: crosshair; }\n            .CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n            .CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n            .cm-searching {\n                background-color: #ffa;\n                background-color: rgba(255, 255, 0, .4);\n            }\n\n            /* Used to force a border model for a node */\n            .cm-force-border { padding-right: .1px; }\n\n            @media print {\n                /* Hide the cursor when printing */\n                .CodeMirror div.CodeMirror-cursors {\n                    visibility: hidden;\n                }\n            }\n\n            /* See issue #2901 */\n            .cm-tab-wrap-hack:after { content: ''; }\n\n            /* Help users use markselection to safely style text background */\n            span.CodeMirror-selectedtext { background: none; }\n\n            /* The lint marker gutter */\n            .CodeMirror-lint-markers {\n            width: 16px;\n            }\n\n            .CodeMirror-lint-tooltip {\n            background-color: #ffd;\n            border: 1px solid black;\n            border-radius: 4px 4px 4px 4px;\n            color: black;\n            font-family: monospace;\n            font-size: 10pt;\n            overflow: hidden;\n            padding: 2px 5px;\n            position: fixed;\n            white-space: pre;\n            white-space: pre-wrap;\n            z-index: 100;\n            max-width: 600px;\n            opacity: 0;\n            transition: opacity .4s;\n            -moz-transition: opacity .4s;\n            -webkit-transition: opacity .4s;\n            -o-transition: opacity .4s;\n            -ms-transition: opacity .4s;\n            }\n\n            .CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning {\n            background-position: left bottom;\n            background-repeat: repeat-x;\n            }\n\n            .CodeMirror-lint-mark-error {\n            background-image:\n            url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==\")\n            ;\n            }\n\n            .CodeMirror-lint-mark-warning {\n            background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=\");\n            }\n\n            .CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning {\n            background-position: center center;\n            background-repeat: no-repeat;\n            cursor: pointer;\n            display: inline-block;\n            height: 16px;\n            width: 16px;\n            vertical-align: middle;\n            position: relative;\n            }\n\n            .CodeMirror-lint-message-error, .CodeMirror-lint-message-warning {\n            padding-left: 18px;\n            background-position: top left;\n            background-repeat: no-repeat;\n            }\n\n            .CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n            background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=\");\n            }\n\n            .CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n            background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=\");\n            }\n\n            .CodeMirror-lint-marker-multiple {\n            background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC\");\n            background-repeat: no-repeat;\n            background-position: right bottom;\n            width: 100%; height: 100%;\n            }\n        `;\n    }\n\n    static get properties() {\n        return {\n            /**\n             * reference to actual CodeMirror object\n             */\n            _editor: {\n                type: Object\n            },\n            /**\n             * the code as a string\n             */\n            code: {\n                type: String,\n                reflect: true\n            },\n            /**\n             * the language mode e.g. 'javascript' or 'xquery'.\n             */\n            mode: {\n                type: String\n            },\n            /**\n             * placeholder if code is empty\n             */\n            placeholder: {\n                type: String\n            },\n            /**\n             * tab indent size\n             */\n            tabSize: {\n                type: Number\n            },\n            /**\n             * label for the editor\n             */\n            label: {\n                type: String\n            },\n            theme: {\n                type: String\n            },\n            _themeStyles: {\n                type: String\n            },\n            linter: {\n                attribute: true\n            },\n            apiVersion: {\n                type: String\n            }\n        };\n    }\n\n    constructor() {\n        super();\n        this.code = '';\n        this.mode = 'javascript';\n        this.placeholder = 'odd.editor.model.empty';\n        this.tabSize = 2;\n        this.label = '';\n        this.linter = '';\n        this.theme = null;\n        this._themeStyles = null;\n        this.apiVersion = '0.9.0';\n    }\n\n    set theme(value) {\n        if (value) {\n            loadTheme(value).then((styles) => {\n                this._themeStyles = styles;\n                this._editor.setOption('theme', value);\n            });\n        }\n        this.requestUpdate('_themeStyles', value);\n    }\n\n    render() {\n        return html`\n            ${this._themeStyles}\n            <iron-ajax id=\"lint\" url=\"${this.linter}\"\n               handle-as=\"json\"\n               method=\"POST\"\n               @error=\"${this._handleLintError}\"></iron-ajax>\n\n            <div class=\"label\">${this.label}</div>\n            <div id=\"editorDiv\"></div>\n        `;\n    }\n\n    attributeChangedCallback(name, old, value) {\n        super.attributeChangedCallback(name, old, value);\n        if (name === 'code') {\n            this.setSource(value);\n            this.code = value;\n            this.requestUpdate();\n        }\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        \n        this.placeholder = i18n(this.placeholder);\n        \n        document.addEventListener('pb-i18n-update', (ev) => {\n            this.placeholder = ev.detail.t(this.placeholder);\n            if (this._editor) {\n                this._editor.setOption('placeholder', this.placeholder);\n            }\n        });\n    }\n\n    async firstUpdated() {\n        await this.updateComplete;\n        this._initEditor();\n    }\n\n    _initEditor() {\n        const options = {\n            value: this.code || '',\n            mode: this.mode,\n            lineNumbers: true,\n            lineWrapping: true,\n            autofocus: false,\n            matchBrackets: true,\n            placeholder: this.placeholder,\n            gutters: [\"CodeMirror-lint-markers\"],\n            lint: true,\n            viewportMargin: Infinity\n        };\n        if (this.theme) {\n            options.theme = this.theme;\n        }\n\n        const editorDiv = this.shadowRoot.getElementById('editorDiv')\n        const cm = CodeMirror(editorDiv, options);\n\n        cm.on('change', () => this.setCode(cm.getValue()));\n\n        this._editor = cm;\n        if (this.mode === 'xquery' && this.linter !== '') {\n            CodeMirror.registerHelper(\"lint\", \"xquery\", this.lintXQuery.bind(this));\n        }\n    }\n\n    /**\n     * XQuery linting.\n     *\n     * calls server-side service for XQuery linting. Will return an array of linting errors or an empty array\n     * if code is fine.\n     *\n     * @param {String} text\n     * @returns {Array|Promise}\n     */\n    lintXQuery(text) {\n        if (!text) {\n            return [];\n        }\n\n        const ajax = this.shadowRoot.getElementById('lint');\n\n        return new Promise((resolve) => {\n            if (cmpVersion(this.apiVersion, '1.0.0')) {\n                ajax.contentType=\"application/x-www-form-urlencoded\";\n                ajax.params = null;\n                const params = {\n                    action: \"lint\",\n                    code: text\n                };\n                ajax.body = params;\n            } else {\n                ajax.contentType=\"text\";\n                ajax.params = {\n                    code: text\n                };\n            }\n\n            const request = ajax.generateRequest();\n            request.completes.then((req) => {\n                const data = req.response;\n                if (data.status === 'fail') {\n                    resolve([{\n                        message: data.message,\n                        severity: \"error\",\n                        from: CodeMirror.Pos(data.line - 1, data.column),\n                        to: CodeMirror.Pos(data.line - 1, data.column + 3)\n                    }]);\n                }\n                else {\n                    resolve([]);\n                }\n            });\n\n        });\n    }\n\n\n    /**\n     *\n     * @returns {String} the sourcecode\n     */\n    getSource() {\n        if (!this._editor) {\n            return '';\n        }\n        return this._editor.getValue();\n    }\n\n    /**\n     * pass code to editor for editing/display.\n     *\n     * @param {String} newval\n     */\n    setSource(newval) {\n        if (!this._editor || newval === this._editor.getValue()) {\n            return;\n        }\n        const val = newval || ''\n        this._editor.setValue(val);\n        this._editor.refresh();\n    }\n\n    /**\n     * call refresh() to update the view after external changes have occured. Might be needed after dynamic\n     * changes of the UI.\n     */\n    refresh() {\n        if (!this._editor) return;\n        this._editor.refresh();\n    }\n\n    setCode(value) {\n        this.code = value\n        this.dispatchEvent(new CustomEvent('code-changed', { composed: true, bubbles: true, detail: { code: this.code } }));\n    }\n\n    _handleLintError(e) {\n        console.error('error while linting: ', e.detail);\n\n        const error = e.detail.error.message;\n        if (error.includes('404')) {\n            const url = this.shadowRoot.getElementById('lint').url;\n            this.dispatchEvent(new CustomEvent('linting-error', { composed: true, bubbles: true, detail: { error: 'linting service unavailable', url: url } }));\n        } else {\n            this.dispatchEvent(new CustomEvent('linting-error', { composed: true, bubbles: true, detail: { error: error } }));\n        }\n\n\n    }\n}\n\ncustomElements.define('pb-code-editor', PbCodeEditor);\n","import { LitElement, html, css } from 'lit-element';\nimport '@polymer/paper-dialog/paper-dialog';\nimport '@polymer/paper-dialog-scrollable/paper-dialog-scrollable';\nimport '@polymer/paper-button/paper-button';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html.js';\nimport { translate } from \"./pb-i18n.js\";\n\n/**\n * Show a dialog with buttons. Used by editor.\n *\n *\n * todo:confirmation is only partly implemented needs some method to detect which button was clicked\n * @customElement\n * @polymer\n * @demo demo/pb-message.html\n */\nexport class PbMessage extends LitElement {\n\n    static get styles() {\n        return css`\n            :host {\n                display:block;\n            }\n            \n            paper-dialog{\n                min-width:300px;\n            }\n        `;\n    }\n\n    static get properties() {\n        return {\n            /**\n             * the dialog box title\n             */\n            title: {\n                type: String,\n                reflect: true\n            },\n            /**\n             * type of message. Can be either 'message' or 'confirm'. In case of confirm the buttons 'yes' and 'no'\n             * will be shown and the dialog becomes modal.\n             */\n            type: {\n                type: String\n            },\n            /**\n             * main message text to be shown on dialog.\n             */\n            message: {\n                type: String,\n                reflect: true\n            }\n        };\n    }\n\n    constructor() {\n        super();\n        this.title = '';\n        this.message = '';\n        this.type = 'message'; //defaults to 'message'\n    }\n\n    render() {\n        return html`\n        <paper-dialog id=\"modal\">\n            <h2 id=\"title\">${this.title}</h2>\n            <paper-dialog-scrollable id=\"message\" class=\"message\" tabindex=\"0\">${unsafeHTML(this.message)}</paper-dialog-scrollable>\n\n            <div class=\"buttons\">\n                <paper-button dialog-confirm=\"dialog-confirm\" autofocus=\"autofocus\" ?hidden=\"${this.isConfirm()}\">${translate('dialogs.close')}</paper-button>\n                <paper-button id=\"confirm\" dialog-confirm=\"dialog-confirm\" autofocus=\"autofocus\" ?hidden=\"${this.isMessage()}\">${translate('dialogs.yes')}</paper-button>\n                <paper-button id=\"reject\" dialog-confirm=\"dialog-confirm\" autofocus=\"autofocus\" ?hidden=\"${this.isMessage()}\">${translate('dialogs.no')}</paper-button>\n            </div>\n        </paper-dialog>\n        `;\n    }\n\n    firstUpdated() {\n        // this.shadowRoot.getElementById('modal').open();\n        this.modal = this.shadowRoot.getElementById('modal');\n\n    }\n\n    updated() {\n        if (this.modal) {\n            this.modal.notifyResize();\n        }\n    }\n\n    /**\n     * Open a modal dialog to display a message to the user.\n     * \n     * @param {string} title The title of the dialog\n     * @param {string} message The message to display in the dialog body\n     */\n    show(title, message) {\n        this.type = 'message';\n        this.set(title, message);\n        this.modal.noCancelOnOutsideClick = false;\n        this.modal.noCancelOnEscKey = false;\n        this.modal.open();\n    }\n\n    /**\n     * Open a modal dialog to prompt the user for confirmation.\n     * Returns a promise which will be resolved upon confirmation\n     * and rejected otherwise.\n     * \n     * @param {string} title The title of the dialog\n     * @param {string} message The message to display in the dialog body\n     * @returns {Promise} promise which will be resolved upon confirmation and rejected otherwise\n     */\n    confirm(title, message) {\n        this.type = 'confirm';\n        this.set(title, message);\n        this.modal.noCancelOnOutsideClick = true;\n        this.modal.noCancelOnEscKey = true;\n        this.modal.open();\n        const confirm = this.shadowRoot.getElementById('confirm');\n        const cancel = this.shadowRoot.getElementById('reject');\n        return new Promise((resolve, reject) => {\n            confirm.addEventListener('click', resolve, { once: true });\n            cancel.addEventListener('click', reject, { once: true })\n        });\n    }\n\n    set(title, message) {\n        if (title || message) {\n            if (title) {\n                this.title = title;\n            }\n            if (message) {\n                this.message = message;\n            }\n            this.modal.notifyResize();\n        }\n    }\n\n    isMessage() {\n        return this.type === 'message'\n    }\n\n    isConfirm() {\n        return this.type === 'confirm'\n    }\n\n\n}\ncustomElements.define('pb-message', PbMessage);\n"],"names":["Polymer","_template","html","is","properties","src","type","String","value","alt","crossorigin","preventLoad","Boolean","sizing","reflectToAttribute","position","preload","placeholder","observer","fade","loaded","notify","readOnly","loading","error","width","Number","height","observers","created","_resolvedSrc","_imgOnLoad","$","img","_resolveSrc","_setLoading","_setLoaded","_setError","_imgOnError","removeAttribute","sizedImgDiv","style","backgroundImage","_computePlaceholderHidden","_computePlaceholderClassName","_computeImgDivHidden","_computeImgDivARIAHidden","undefined","_computeImgDivARIALabel","resolved","replace","split","pop","_computeImgHidden","_widthChanged","isNaN","_heightChanged","_loadStateObserver","newResolvedSrc","_placeholderChanged","_transformChanged","sizedImgDivStyle","placeholderStyle","backgroundSize","backgroundPosition","backgroundRepeat","testSrc","resolveUrl","baseURIAnchor","href","length","location","origin","protocol","host","heading","image","preloadImage","fadeImage","placeholderImage","elevation","animatedShadow","animated","computed","_isHidden","_headingChanged","currentHeading","getAttribute","currentLabel","setAttribute","_computeHeadingClass","_computeAnimated","template","document","head","appendChild","content","behaviors","IronResizableBehavior","horizontal","opened","transitioning","noAnimation","_desiredSize","dimension","_dimensionMax","_dimensionMaxCss","hostAttributes","role","listeners","transitionend","toggle","show","hide","updateSize","size","willAnimate","isAttached","_updateTransition","startSize","_calcSize","scrollTop","_transitionEnd","enableTransition","enabled","Base","_warn","transitionDuration","_horizontalChanged","transitionProperty","otherDimension","_openedChanged","_setTransitioning","toggleClass","focus","notifyResize","_onTransitionEnd","event","dom","rootTarget","getBoundingClientRect","PbCollapse","pbMixin","LitElement","attribute","toggles","expandIcon","collapseIcon","noIcons","constructor","connectedCallback","addEventListener","open","subscribeTo","ev","detail","_source","collapse","querySelectorAll","close","emitTo","data","render","styles","css","customElements","define","$_documentContainer","createElement","innerHTML","PaperItemBehaviorImpl","tabindex","PaperItemBehavior","IronButtonState","IronControlState","body","DIRECTION","UP","DOWN","KEY_CODES","LEFT_ARROW","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","ENTER","ESCAPE","Templatizer","isOpen","minLength","maxViewableItems","textProperty","valueProperty","source","Array","selectedOption","Object","remoteSource","eventNamespace","highlightedSuggestion","queryFn","Function","highlightFirst","showResultsOnFocus","_suggestions","_currentIndex","_scrollIndex","_itemHeight","_value","_text","_idItemSeed","Date","getTime","Math","floor","random","_bindedFunctions","_onKeypress","_onFocus","_onBlur","_hasItemHighBeenCalculated","__customTplRef","ready","dataHost","suggestionsWrapper","preventDefault","_suggestionTemplate","__dataHost","templatize","attached","_input","parentNode","querySelector","for","Error","bind","detached","cancelDebouncer","removeEventListener","_getItemText","suggestion","_showSuggestionsWrapper","display","_hideSuggestionsWrapper","_clearSuggestions","_handleSuggestions","_createSuggestions","_remoteSuggestions","option","text","_fireEvent","_bindSuggestions","arr","target","toLowerCase","customTemplate","getEffectiveChildren","defaultTemplate","_renderSuggestions","suggestions","suggestionsContainer","slice","call","forEach","result","index","clone","stamp","item","root","last","lastChild","removeChild","_onSuggestionsChanged","debounce","flush","_resetScroll","firstSuggestionElement","offsetHeight","_moveHighlighted","_selection","_emptyItems","hideSuggestions","_getItems","_getId","id","dataset","_removeActive","items","classList","remove","keyCode","which","_keyenter","direction","numberOfItems","isFirstItem","isLastItem","isNoItemHighlighted","modifier","highlightedOption","highlightedItem","add","_setHighlightedSuggestion","_scroll","newScrollValue","isSelectedOutOfView","viewIndex","isFirstItemAndOutOfView","isLastItemAndOutOfView","elementId","textValue","evt","fire","_onSelect","modelForElement","currentTarget","_getSuggestionId","_itemHeightChanged","maxHeight","setTimeout","datasource","query","queryResult","objText","objValue","toString","indexOf","resultItem","push","isff","navigator","userAgent","addEvent","object","method","attachEvent","concat","window","getMods","key","mods","i","getKeys","keys","lastIndexOf","splice","compareArray","a1","a2","arr1","arr2","isIndex","_keyMap","backspace","tab","clear","enter","return","esc","escape","space","left","up","right","down","del","delete","ins","insert","home","end","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","_modifier","shift","ctrl","control","cmd","command","modifierMap","shiftKey","ctrlKey","altKey","metaKey","_mods","_handlers","k","_downKeys","_scope","elementHasBindEvent","code","x","toUpperCase","charCodeAt","setScope","scope","getScope","getPressedKeyCodes","filter","srcElement","tagName","flag","isContentEditable","isPressed","deleteScope","newScope","handlers","prototype","hasOwnProperty","clearModifier","charCode","hotkeys","unbind","keysInfo","isArray","info","eachUnbind","_len","arguments","args","_key","splitKey","_ref","_ref$splitKey","multipleKeys","originKey","unbindKeys","len","lastKey","map","record","isMatchingMethod","eventHandler","handler","modifiersMatch","y","shortcut","returnValue","stopPropagation","cancelBubble","dispatch","asterisk","keyName","keyNum","e","getModifierState","keydown","keyup","_i","keyShortcut","_downKeysCurrent","a","sort","join","isElementBind","element","_api","_hotkeys","noConflict","deep","EXCLUDED_TAGS","excluded","Set","firstLoad","has","pbHotkeys","superclass","PbHotkeys","registerHotkey","name","callback","output","pbKeyboard","PaperInkyFocusBehavior","registered","icon","_altChanged","newValue","oldValue","label","autoValidate","invalid","autocapitalize","errorMessage","noLabelFloat","alwaysFloatLabel","required","readonly","focused","disabled","disableShowClear","pattern","allowedPattern","charCounter","maxlength","_isClearButtonVisible","_isSuggestionsOpened","_sourceChanged","newSource","autocompleteInput","paperAutocompleteSuggestions","_onAutocompleteSelected","_clear","_hideClearButton","_textObserver","trim","_showClearButton","selection","getOption","setOption","disable","enable","validate","reset","onSelectHandler","PbEditXml","path","title","_href","waitOnce","options","endpoint","exec","URL","getUrl","setPath","sourceComponent","getElementById","getFullPath","sourceView","exide","closed","app","eXide","console","log","findDocument","eXide_onload","Lumo","HTMLElement","version","ThemePropertyMixin","superClass","VaadinThemePropertyMixin","theme","attributeChangedCallback","_setTheme","ThemableMixin","VaadinThemableMixin","finalize","hasOwnTemplate","parentElement","inheritedTemplate","getPrototypeOf","from","s","_includeStyle","_includeMatchingThemes","domModule","DomModule","modules","hasThemes","defaultModuleName","moduleNameA","moduleNameB","vaadinA","vaadinB","vaadinThemePrefixes","vaadinThemeA","prefix","vaadinThemeB","moduleName","themeFor","themeForToken","RegExp","test","styleEl","DirHelper","detectScrollType","dummy","textContent","dir","fontSize","top","overflow","cachedType","scrollLeft","getNormalizedScrollLeft","scrollType","scrollWidth","clientWidth","setNormalizedScrollLeft","directionSubscribers","directionUpdater","documentDir","getDocumentDir","alignDirs","directionObserver","MutationObserver","observe","documentElement","attributes","attributeFilter","DirMixin","VaadinDirMixin","hasAttribute","__subscribe","newValueEqlDocDir","newValueEmptied","newDiffValue","disconnectedCallback","__getNormalizedScrollLeft","__setNormalizedScrollLeft","DEV_MODE_CODE_REGEXP","FlowClients","Vaadin","Flow","clients","isMinified","uncommentAndRun","isDevelopmentMode","isForcedDevelopmentMode","isLocalhost","isFlowProductionMode","localStorage","getItem","hostname","productionModeApps","client","productionMode","match","runIfDevelopmentMode","developmentMode","maybeGatherAndSendStats","usageStatistics","registrations","developmentModeCallback","statsJob","ElementMixin","VaadinElementMixin","Debouncer","idlePeriod","enqueueDebouncer","doctype","warn","platform","gecko","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","maxTouchPoints","android","mobile","mac","chromeOS","windows","presto_version","flipCtrlCmd","captureRightClick","classTest","cls","rmClass","node","current","className","after","removeChildren","count","childNodes","firstChild","removeChildrenAndAdd","parent","elt","tag","cssText","createTextNode","eltP","range","createRange","start","endNode","r","setEnd","setStart","createTextRange","moveToElementText","moveEnd","moveStart","contains","child","nodeType","activeElt","activeElement","shadowRoot","addClass","joinClasses","b","as","selectInput","select","selectionStart","selectionEnd","_e","f","apply","copyObj","obj","overwrite","prop","countColumn","string","tabSize","startIndex","startValue","search","n","nextTab","Delayed","time","onTimeout","self","set","ms","clearTimeout","array","scrollerGap","Pass","sel_dontScroll","scroll","sel_mouse","sel_move","findColumn","goal","pos","col","skipped","min","spaceStrs","spaceStr","lst","out","insertSorted","score","priority","nothing","createObj","base","props","inst","create","nonASCIISingleCaseWordChar","isWordCharBasic","ch","isWordChar","helper","isEmpty","extendingChars","isExtendingChar","skipExtendingChars","str","charAt","findFirst","pred","to","midF","mid","ceil","iterateBidiSections","order","found","part","max","level","bidiOther","getBidiPartAt","sticky","cur","bidiOrdering","lowTypes","arabicTypes","charType","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","outerType","types","prev","j","before","m","at","isRTL","nstart","unshift","reverse","getOrder","line","noHandlers","on","emitter","getHandlers","off","detachEvent","signal","signalDOMEvent","cm","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","e_stopPropagation","e_stop","e_target","e_button","button","dragAndDrop","div","zwspSupported","zeroWidthElement","measure","offsetWidth","badBidiRects","hasBadBidiRects","txt","r0","r1","splitLinesAuto","l","nl","rt","hasSelection","getSelection","te","ownerDocument","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","normal","fromRange","abs","modes","mimeModes","defineMode","mode","dependencies","defineMIME","mime","spec","resolveMode","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","extendMode","copyState","state","nstate","val","innerMode","startState","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","eol","sol","peek","next","eat","ok","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","getLine","doc","first","chunk","lines","children","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","maxPos","minPos","clipLine","clipPos","clipToLen","linelen","clipPosArray","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","nextLine","fromSaved","saved","save","copy","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","o","overlays","overlay","i_end","opaque","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","findStartLine","processLine","viewFrom","viewTo","startAt","stream","callBlankLine","readToken","blankLine","token","Token","takeToken","asArray","tokens","extractLineClasses","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","op","inThisOp","WeakSet","markedSpans","attachLine","markedSpansBefore","old","startCh","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","clearEmptySpans","newMarkers","gap","gapMarkers","clearWhenEmpty","removeReadOnlyRanges","markers","mark","parts","mk","find","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","allowFrontierUpdate","externalMeasured","insertLineContent","maps","caches","defaultSpecialCharPlaceholder","startStyle","endStyle","displayText","special","specialChars","mustWrap","createDocumentFragment","lastIndex","tabWidth","specialCharPlaceholder","fullStyle","attr","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","nextChange","spanStyle","spanEndStyle","spanStartStyle","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","operationGroup","pushOperation","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","list","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","updateLineBackground","background","wrap","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","marginLeft","widgetHeight","parentStyle","gutters","wrapper","eventInWidget","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","parseInt","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","ensureLineHeights","rect","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","pageScrollY","marginTop","pageYOffset","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","targetTop","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","chAround","boxAround","baseX","atLeft","atStart","_lineNo","closestDist","endX","dist","measureText","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","clientX","clientY","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openLeft","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","hasFocus","onBlur","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","draggingText","selForContextMenu","receivedFocus","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","markArrays","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","nodeName","removeAllRanges","addRange","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","reportedViewFrom","reportedViewTo","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","firstLine","lastText","lastSpans","nlines","added","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","replaceRange","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","copied","changeLine","handle","changeType","LeafChunk","removeInner","insertInner","iterN","BranchChunk","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","oldH","addLineWidget","insertAt","aboveVisible","nextMarkerId","TextMarker","withOp","visual","dHeight","markText","markTextShared","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","SharedTextMarker","cloneNode","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","getValue","lineSeparator","setValue","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","CodeMirror","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","file","allowDropFileTypes","reader","onerror","onload","readAsText","getData","selected","onDragStart","setData","effectAllowed","setDragImage","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","setSize","keyNames","fromCharCode","keyMap","basic","pcDefault","emacsy","macDefault","normalizeKeyName","mod","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","moveVisually","bidi","mv","getWrappedLineExtent","searchInVisualLine","getRes","res","nextCh","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","leftPos","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","onKeyDown","getField","handled","showCrossHair","onKeyUp","onKeyPress","DOUBLECLICK_DELAY","PastClick","compare","lastClick","lastDoubleClick","clickRepeat","now","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","onContextMenu","configureMouse","unit","addNew","moveOnDrag","behavior","contained","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","rangeForUnit","findWordAt","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","oldRange","bidiSimplify","editorSize","counter","curCount","move","buttons","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","Init","defaults","optionHandlers","defineOptions","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","spellcheck","autocorrect","detach","attach","wrappingChanged","integer","blur","readOnlyChanged","screenReaderLabelChanged","dragDropChanged","resetPosition","wasOn","funcs","dragFunctions","over","leave","drop","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","registerEventHandlers","finishInit","initHooks","textRendering","word","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","inp","defineInitHook","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","helpers","getDoc","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelper","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","hitSide","rtlMoveVisually","findPosV","goalColumn","goals","headPos","startChar","check","scrollTo","getScrollInfo","interpret","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","origDir","lineDir","findNextLine","moveOnce","boundToLine","astral","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","contentEditable","belongsToInput","updateFromDOM","readFromDOMSoon","forceCompositionEnd","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","showMultipleSelections","curAnchor","domToPos","curFocus","bad","posToDOM","rangeCount","getRangeAt","rng","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","poll","pollInterval","isInGutter","pollContent","fromIndex","fromNode","toIndex","toNode","previousSibling","newText","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","scan","badPos","closing","extraLinebreak","recognizeMarker","addText","walk","cmText","markerID","isBlock","nodeValue","lineNode","locateNodeInLineView","textNode","topNode","curNode","TextareaInput","prevInput","pollingFast","createField","textarea","fastPoll","prepareCopyCut","dispatchEvent","Event","_display","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","oldScrollY","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","extval","mouseup","fromTextArea","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","cmpPos","addEditorMethods","dontDelegate","defineExtension","func","defineDocExtension","xquery","keywords","kw","operator","atom","punctuation","qualifier","kwObj","operators","axis_specifiers","chain","tokenize","tokenBase","mightBeFunction","isEQName","isEQNameAhead","tokenXMLComment","tokenCDATA","tokenPreProcessing","isclose","c","tokenTag","pushStateStack","popStateStack","isInXmlBlock","tokenComment","tokenString","tokenVariable","known","propertyIsEnumerable","foundColon","isInXmlConstructor","maybeEnd","maybeNested","nestedCount","quote","isInString","isInXmlAttributeBlock","isVariableChar","tokenAttribute","isIn","stack","newState","reinstateTokenize","cc","blockCommentStart","blockCommentEnd","config","parserConfig","inline","propertyKeywords","tokenHooks","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","colorKeywords","valueKeywords","allowNested","lineComment","supportsAtComponent","highlightNonStandardPropertyKeywords","ret","tp","tokenParenthesized","escaped","pushContext","popContext","pass","states","popAndPass","wordAsValue","stateArg","block","maybeprop","propBlock","_stream","parens","pseudo","atBlock","atComponentBlock","atBlock_parens","restricted_atBlock_before","restricted_atBlock","keyframes","interpolation","textAfter","cx","blockCommentContinue","fold","keySet","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","fontProperties_","counterDescriptors_","colorKeywords_","valueKeywords_","allWords","tokenCComment","xml","htmlConfig","autoSelfClosers","implicitlyClosed","contextGrabbers","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","allowMissingTagName","editorConf","config_","htmlMode","setStyle","inText","parser","inBlock","inTag","isInText","baseState","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","depth","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","baseIndent","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","xmlCurrentTag","xmlCurrentContext","stex","_config","pushCommand","cmdState","peekCommand","popCommand","plug","closeBracket","getMostPowerful","styleIdentifier","addPluginPattern","pluginName","cmdStyle","bracketNo","argument","openBracket","plugins","setState","cmdName","beginParams","inMathMode","endModeSeq","lastPlug","onChange","placeholderCompose","onComposition","clearPlaceholder","setPlaceholder","placeHolder","matchbrackets","ie_lt8","matching","bracketRegex","findMatchingBracket","afterCursor","re","strict","scanForBracket","forward","maxScanLen","maxScanLineLength","maxScanLines","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","highlightNonMatching","marks","doMatchBrackets","currentlyHighlighted","clearHighlighted","oldConfig","lint","GUTTER_ID","LINT_LINE_ID","showTooltip","tt","selfContain","opacity","hideTooltip","showTooltipFor","tooltip","LintState","conf","hasGutter","marked","getAnnotations","linterOptions","timeout","onMouseOver","waitingFor","highlightLines","tooltips","lintOnChange","async","formatAnnotation","onUpdateLinting","clearMarks","clearErrorLines","makeMarker","labels","severity","multiple","getMaxSeverity","groupByLine","annotations","ann","annotationTooltip","tip","messageHTML","message","lintAsync","abort","arg2","updateLinting","startLinting","then","issues","annotationsNotSorted","anns","maxSeverity","tipLabel","__annotation","popupTooltips","hasLintGutter","modeXquery","modeCss","modeXml","modeStex","addonDisplayPlaceholder","addonEditMatchBracket","addonLint","loadTheme","resource","resolveURL","fetchedStyles","fetch","response","catch","PbCodeEditor","_editor","reflect","_themeStyles","linter","apiVersion","requestUpdate","_handleLintError","setSource","i18n","firstUpdated","updateComplete","_initEditor","editorDiv","setCode","lintXQuery","ajax","Promise","resolve","cmpVersion","contentType","params","action","request","generateRequest","completes","req","status","getSource","newval","CustomEvent","composed","bubbles","includes","url","PbMessage","unsafeHTML","isConfirm","translate","isMessage","modal","updated","noCancelOnOutsideClick","noCancelOnEscKey","confirm","reject","once"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA5DQ;AA8DNC,EAAAA,EAAE,EAAE,YA9DE;AAgENC,EAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACIC,IAAAA,GAAG,EAAE;AAACC,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,KAAK,EAAE;AAAtB,KAJK;;AAMV;AACJ;AACA;AACIC,IAAAA,GAAG,EAAE;AAACH,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,KAAK,EAAE;AAAtB,KATK;;AAWV;AACJ;AACA;AACA;AACIE,IAAAA,WAAW,EAAE;AAACJ,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,KAAK,EAAE;AAAtB,KAfH;;AAiBV;AACJ;AACA;AACA;AACA;AACIG,IAAAA,WAAW,EAAE;AAACL,MAAAA,IAAI,EAAEM,OAAP;AAAgBJ,MAAAA,KAAK,EAAE;AAAvB,KAtBH;;AAwBV;AACJ;AACA;AACA;AACA;AACA;AACIK,IAAAA,MAAM,EAAE;A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AAC,CAAD,CAAR,KAAgB,GAAnE,EAAwE;AACtE;AACA;AACAA,MAAAA,QAAQ,GAAG,CAACsB,QAAQ,CAACC,MAAT,IAAmBD,QAAQ,CAACE,QAAT,GAAoB,IAApB,GAA2BF,QAAQ,CAACG,IAAxD,IACPzB,QADJ;AAED;;AACD,WAAOA,QAAP;AACD;AApSK,CAAD,CAAP;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAjD,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/FQ;AAiGNC,EAAAA,EAAE,EAAE,YAjGE;AAmGNC,EAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACIuE,IAAAA,OAAO,EAAE;AAACrE,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,KAAK,EAAE,EAAtB;AAA0BU,MAAAA,QAAQ,EAAE;AAApC,KAJC;;AAMV;A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A;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMW,QAAQ,GAAG1F,IAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAxTA;AA0TA2F,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BH,QAAQ,CAACI,OAAnC;;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAhG,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBQ;AAuBNC,EAAAA,EAAE,EAAE,eAvBE;AAwBN8F,EAAAA,SAAS,EAAE,CAACC,qBAAD,CAxBL;AA0BN9F,EAAAA,UAAU,EAAE;AAEV;AACJ;AACA;AACA;AACA;AACI+F,IAAAA,UAAU,EAAE;AAAC7F,MAAAA,IAAI,EAAEM,OAAP;AAAgBJ,MAAAA,KAAK,EAAE,KAAvB;AAA8BU,MAAAA,QAAQ,EAAE;AAAxC,KAPF;;AASV;AACJ;AACA;AACA;AACA;AACIkF,IAAAA,MAAM,EACF;AAAC9F,MAAAA,IAAI,EAAEM,OAAP;AAAgBJ,MAAAA,KAAK,EAAE,KAAvB;AAA8Ba,MAAAA,MAAM,EAAE,IAAtC;AAA4CH,MAAAA,QAAQ,EAAE;AAAtD,KAfM;;AAiBV;AACJ;AACA;AACA;AACA;AACA;AACImF,IAAAA,aAAa,EAAE;AAAC/F,MAAAA,IAAI,EAAEM,OAAP;AAAgBS,MAAAA,MAAM,EAAE,IAAxB;AAA8BC,MAAAA,QAAQ,EAAE;AAAxC,KAvBL;;AAyBV;AACJ;AACA;AACA;AACA;AACIgF,IAAAA,WAAW,EAAE;AAAChG,MAAAA,IAAI,EAAEM;AAAP,KA9BH;;AAgCV;AACJ;AACA;AACA;AACI2F,IAAAA,YAAY,EAAE;AAACjG,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,KAAK,EAAE;AAAtB;AApCJ,GA1BN;;AAiEN,MAAIgG,SAAJ,GAAgB;AACd,WAAO,KAAKL,UAAL,GAAkB,OAAlB,GAA4B,QAAnC;AACD,GAnEK;;AAqEN;AACF;AACA;AACA;AACE,MAAIM,aAAJ,GAAoB;AAClB,WAAO,KAAKN,UAAL,GAAkB,UAAlB,GAA+B,WAAtC;AACD,GA3EK;;AA6EN;AACF;AACA;AACA;AACE,MAAIO,gBAAJ,GAAuB;AACrB,WAAO,KAAKP,UAAL,GAAkB,WAAlB,GAAgC,YAAvC;AACD,GAnFK;;AAqFNQ,EAAAA,cAAc,EAAE;AACdC,IAAAA,IAAI,EAAE,OADQ;AAEd,mBAAe;AAFD,GArFV;AA0FNC,EAAAA,SAAS,EAAE;AAACC,IAAAA,aAAa,EAAE;AAAhB,GA1FL;;AA4FN;AACF;AACA;AACA;AACA;AACEC,EAAAA,MAAM,EAAE,YAAW;AACjB,SAAKX,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD,GAnGK;AAqGNY,EAAAA,IAAI,EAAE,YAAW;AACf,SAAKZ,MAAL,GAAc,IAAd;AACD,GAvGK;AAyGNa,EAAAA,IAAI,EAAE,YAAW;AACf,SAAKb,MAAL,GAAc,KAAd;AACD,GA3GK;;AA6GN;AACF;AACA;AACA;AACA;AACEc,EAAAA,UAAU,EAAE,UAASC,IAAT,EAAejC,QAAf,EAAyB;AACnC;AACAiC,IAAAA,IAAI,GAAGA,IAAI,KAAK,MAAT,GAAkB,EAAlB,GAAuBA,IAA9B;AAEA,QAAIC,WAAW,GAAGlC,QAAQ,IAAI,CAAC,KAAKoB,WAAlB,IAAiC,KAAKe,UAAtC,IACd,KAAKd,YAAL,KAAsBY,IAD1B;AAGA,SAAKZ,YAAL,GAAoBY,IAApB;;AAEA,SAAKG,iBAAL,CAAuB,KAAvB,EATmC;;;AAWnC,QAAIF,WAAJ,EAAiB;AACf;AACA,UAAIG,SAAS,GAAG,KAAKC,SAAL,EAAhB,CAFe;AAIf;AACA;;;AACA,UAAIL,IAAI,KAAK,EAAb,EAAiB;AACf,aAAK1E,KAAL,CAAW,KAAKgE,aAAhB,IAAiC,EAAjC;AACAU,QAAAA,IAAI,GAAG,KAAKK,SAAL,EAAP;AACD,OATc;;;AAWf,WAAK/E,KAAL,CAAW,KAAKgE,aAAhB,IAAiCc,SAAjC,CAXe;AAaf;;AACA,WAAKE,SAAL,GAAiB,KAAKA,SAAtB,CAde;;AAgBf,WAAKH,iBAAL,CAAuB,IAAvB,EAhBe;;;AAkBfF,MAAAA,WAAW,GAAID,IAAI,KAAKI,SAAxB;AACD,KA9BkC;;;AAgCnC,SAAK9E,KAAL,CAAW,KAAKgE,aAAhB,IAAiCU,IAAjC,CAhCmC;;AAkCnC,QAAI,CAACC,WAAL,EAAkB;AAChB,WAAKM,cAAL;AACD;AACF,GAvJK;;AAyJN;AACF;AACA;AACA;AACA;AACA;AACA;AACEC,EAAAA,gBAAgB,EAAE,UAASC,OAAT,EAAkB;AAClCC,IAAAA,IAAI,CAACC,KAAL,CACI,gEADJ;;AAEA,SAAKxB,WAAL,GAAmB,CAACsB,OAApB;AACD,GApKK;AAsKNN,EAAAA,iBAAiB,EAAE,UAASM,OAAT,EAAkB;AACnC,SAAKnF,KAAL,CAAWsF,kBAAX,GAAiCH,OAAO,IAAI,CAAC,KAAKtB,WAAlB,GAAiC,EAAjC,GAAsC,IAAtE;AACD,GAxKK;AA0KN0B,EAAAA,kBAAkB,EAAE,YAAW;AAC7B,SAAKvF,KAAL,CAAWwF,kBAAX,GAAgC,KAAKvB,gBAArC;AACA,QAAIwB,cAAc,GACd,KAAKzB,aAAL,KAAuB,UAAvB,GAAoC,WAApC,GAAkD,UADtD;AAEA,SAAKhE,KAAL,CAAWyF,cAAX,IAA6B,EAA7B;AACA,SAAKhB,UAAL,CAAgB,KAAKd,MAAL,GAAc,MAAd,GAAuB,KAAvC,EAA8C,KAA9C;AACD,GAhLK;AAkLN+B,EAAAA,cAAc,EAAE,YAAW;AACzB,SAAK1C,YAAL,CAAkB,aAAlB,EAAiC,CAAC,KAAKW,MAAvC;;AAEA,SAAKgC,iBAAL,CAAuB,IAAvB;;AACA,SAAKC,WAAL,CAAiB,sBAAjB,EAAyC,KAAzC;AACA,SAAKA,WAAL,CAAiB,sBAAjB,EAAyC,KAAzC;AACA,SAAKnB,UAAL,CAAgB,KAAKd,MAAL,GAAc,MAAd,GAAuB,KAAvC,EAA8C,IAA9C,EANyB;;AASzB,QAAI,KAAKA,MAAT,EAAiB;AACf,WAAKkC,KAAL;AACD;AACF,GA9LK;AAgMNZ,EAAAA,cAAc,EAAE,YAAW;AACzB,SAAKjF,KAAL,CAAW,KAAKgE,aAAhB,IAAiC,KAAKF,YAAtC;AACA,SAAK8B,WAAL,CAAiB,sBAAjB,EAAyC,CAAC,KAAKjC,MAA/C;AACA,SAAKiC,WAAL,CAAiB,sBAAjB,EAAyC,KAAKjC,MAA9C;;AACA,SAAKkB,iBAAL,CAAuB,KAAvB;;AACA,SAAKiB,YAAL;;AACA,SAAKH,iBAAL,CAAuB,KAAvB;AACD,GAvMK;AAyMNI,EAAAA,gBAAgB,EAAE,UAASC,KAAT,EAAgB;AAChC,QAAIC,GAAG,CAACD,KAAD,CAAH,CAAWE,UAAX,KAA0B,IAA9B,EAAoC;AAClC,WAAKjB,cAAL;AACD;AACF,GA7MK;AA+MNF,EAAAA,SAAS,EAAE,YAAW;AACpB,WAAO,KAAKoB,qBAAL,GAA6B,KAAKpC,SAAlC,IAA+C,IAAtD;AACD;AAjNK,CAAD,CAAP;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,AAAO,MAAMqC,UAAN,SAAyBC,OAAO,CAACC,UAAD,CAAhC,CAA6C;AAC3B,aAAV3I,UAAU,GAAG;AACpB,2CACO,MAAMA,UADb;AAEI;AACZ;AACA;AACA;AACY+F,MAAAA,UAAU,EAAE;AACR7F,QAAAA,IAAI,EAAEM;AADE,OANhB;;AASI;AACZ;AACA;AACA;AACY0F,MAAAA,WAAW,EAAE;AACThG,QAAAA,IAAI,EAAEM,OADG;AAEToI,QAAAA,SAAS,EAAE;AAFF,OAbjB;;AAiBI;AACZ;AACA;AACA;AACY5C,MAAAA,MAAM,EAAE;AACJ9F,QAAAA,IAAI,EAAEM;AADF,OArBZ;;AAwBI;AACZ;AACA;AACA;AACYqI,MAAAA,OAAO,EAAE;AACL3I,QAAAA,IAAI,EAAEM;AADD,OA5Bb;;AA+BI;AACZ;AACA;AACYsI,MAAAA,UAAU,EAAE;AACR5I,QAAAA,IAAI,EAAEC,MADE;AAERyI,QAAAA,SAAS,EAAE;AAFH,OAlChB;;AAsCI;AACZ;AACA;AACYG,MAAAA,YAAY,EAAE;AACV7I,QAAAA,IAAI,EAAEC,MADI;AAEVyI,QAAAA,SAAS,EAAE;AAFD,OAzClB;;AA6CI;AACZ;AACA;AACYI,MAAAA,OAAO,EAAE;AACL9I,QAAAA,IAAI,EAAEM,OADD;AAELoI,QAAAA,SAAS,EAAE;AAFN;AAhDb;AAqDH;;AAEDK,EAAAA,WAAW,GAAG;AACV;AACA,SAAKlD,UAAL,GAAkB,KAAlB;AACA,SAAKG,WAAL,GAAmB,KAAnB;AACA,SAAKF,MAAL,GAAc,KAAd;AACA,SAAK8C,UAAL,GAAkB,mBAAlB;AACA,SAAKC,YAAL,GAAoB,mBAApB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKH,OAAL,GAAe,KAAf;AACH;;AAEDK,EAAAA,iBAAiB,GAAG;AAChB,UAAMA,iBAAN;AACA,SAAKC,gBAAL,CAAsB,kBAAtB,EAA0C,MAAM;AAC5C,WAAKC,IAAL;AACH,KAFD;;AAGA,QAAI,KAAKP,OAAT,EAAkB;AACd,WAAKQ,WAAL,CAAiB,kBAAjB,EAAsCC,EAAD,IAAQ;AACzC,YAAI,CAACA,EAAE,CAACC,MAAJ,IAAcD,EAAE,CAACC,MAAH,CAAUC,OAAV,KAAsB,IAAxC,EAA8C;AAC1C;AACH;;AACD,aAAK,MAAMC,QAAX,IAAuB,KAAKC,gBAAL,CAAsB,aAAtB,CAAvB,EAA6D;AACzD,cAAID,QAAQ,KAAKH,EAAE,CAACC,MAAH,CAAUC,OAA3B,EAAoC;AAChC;AACH;AACJ;;AACD,aAAKG,KAAL;AACH,OAVD;AAWH;AACJ;AAED;AACJ;AACA;;;AACIP,EAAAA,IAAI,GAAG;AACH,QAAI,KAAKpD,MAAT,EAAiB;AACb;AACH;;AACD,SAAKA,MAAL,GAAc,IAAd;AAEA,SAAK4D,MAAL,CAAY,kBAAZ,EAAgC,IAAhC;AACH;AAED;AACJ;AACA;;;AACID,EAAAA,KAAK,GAAG;AACJ,QAAI,KAAK3D,MAAT,EAAiB;AACb,WAAKA,MAAL,GAAc,KAAd;AACH;AACJ;AAED;AACJ;AACA;;;AACIW,EAAAA,MAAM,GAAG;AACL,SAAKX,MAAL,GAAc,CAAC,KAAKA,MAApB;;AACA,QAAI,KAAKA,MAAT,EAAiB;AACb,WAAK4D,MAAL,CAAY,kBAAZ,EAAgC,KAAKC,IAArC;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACL,WAAOhK,MAAK;AACpB,wCAAwC,KAAK6G,MAAO;AACpD,kBACY,CAAC,KAAKqC,OAAN,GACIlJ,MAAK,oBAAmB,KAAKkG,MAAL,GAAc,KAAK+C,YAAnB,GAAkC,KAAKD,UAAW,gBAD9E,GAEI,IACH;AACb;AACA;AACA,uDAAuD,KAAK/C,UAAW,mBAAkB,KAAKG,WAAY,cAAa,KAAKF,MAAO;AACnI;AACA;AACA,SAZQ;AAaH;;AAEgB,aAAN+D,MAAM,GAAG;AAChB,WAAOC,KAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAjBQ;AAkBH;;AA1J+C;AA4JpDC,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqCzB,UAArC;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AAIA,MAAM0B,mBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AACAD,mBAAmB,CAAC9E,YAApB,CAAiC,OAAjC,EAA0C,gBAA1C;AAEA8E,mBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAtDA;AAwDA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,mBAAmB,CAACvE,OAA9C;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AAKA;AACA;AACA;AACA;AACA;;AACA;;AACA,AAAO,MAAM0E,qBAAqB,GAAG;AACnC/D,EAAAA,cAAc,EAAE;AAACC,IAAAA,IAAI,EAAE,QAAP;AAAiB+D,IAAAA,QAAQ,EAAE;AAA3B;AADmB,CAA9B;AAIP;;AACA,MAAaC,iBAAiB,GAC1B,CAACC,eAAD,EAAkBC,gBAAlB,EAAoCJ,qBAApC,CADG;;AC1BP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA1K,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZQ;AAcNC,EAAAA,EAAE,EAAE,YAdE;AAeN8F,EAAAA,SAAS,EAAE,CAAC2E,iBAAD;AAfL,CAAD,CAAP;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,AAEA,MAAMhF,UAAQ,GAAG1F,IAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/BA;AAgCA0F,UAAQ,CAACH,YAAT,CAAsB,OAAtB,EAA+B,gBAA/B;AACAI,QAAQ,CAACkF,IAAT,CAAchF,WAAd,CAA0BH,UAAQ,CAACI,OAAnC;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAhG,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAbQ;AAeNC,EAAAA,EAAE,EAAE,gBAfE;AAiBNC,EAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI4E,IAAAA,SAAS,EAAE;AAAC1E,MAAAA,IAAI,EAAEoB,MAAP;AAAeZ,MAAAA,kBAAkB,EAAE,IAAnC;AAAyCN,MAAAA,KAAK,EAAE;AAAhD,KAVD;;AAYV;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACI0E,IAAAA,QAAQ,EAAE;AAAC5E,MAAAA,IAAI,EAAEM,OAAP;AAAgBE,MAAAA,kBAAkB,EAAE,IAApC;AAA0CN,MAAAA,KAAK,EAAE;AAAjD;AApBA;AAjBN,CAAD,CAAP;;ACvBA,IAAIwK,SAAS,GAAG;AACdC,EAAAA,EAAE,EAAE,IADU;AAEdC,EAAAA,IAAI,EAAE;AAFQ,CAAhB;AAKA,IAAIC,SAAS,GAAG;AACdC,EAAAA,UAAU,EAAE,EADE;AAEdC,EAAAA,WAAW,EAAE,EAFC;AAGdC,EAAAA,QAAQ,EAAE,EAHI;AAIdC,EAAAA,UAAU,EAAE,EAJE;AAKdC,EAAAA,KAAK,EAAE,EALO;AAMdC,EAAAA,MAAM,EAAE;AANM,CAAhB;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAzL,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/DQ;AAiENC,EAAAA,EAAE,EAAE,gCAjEE;AAmEN8F,EAAAA,SAAS,EAAE,CACTyF,WADS,CAnEL;AAuENtL,EAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACI,WAAO;AACLE,MAAAA,IAAI,EAAEC;AADD,KAJG;;AAQV;AACJ;AACA;AACIoL,IAA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAre,OAAO,CAAC;AACNG,EAAAA,EAAE,EAAE,mBADE;AAGNF,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA/DQ;AAiENyG,EAAAA,cAAc,EAAE;AAACC,IAAAA,IAAI,EAAE,QAAP;AAAiB+D,IAAAA,QAAQ,EAAE;AAA3B,GAjEV;AAmEN1E,EAAAA,SAAS,EAAE,CAACyY,sBAAD,CAnEL;AAqENC,EAAAA,UAAU,EAAE,YAAW;AACrB,SAAK1e,SAAL,CAAewF,YAAf,CAA4B,kBAA5B,EAAgD,EAAhD;AACD,GAvEK;AAyENrF,EAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACA;AACIC,IAAAA,GAAG,EAAE;AAACC,MAAAA,IAAI,EAAEC;AAAP,KALK;;AAOV;AACJ;AACA;AACA;AACA;AACIqe,IAAAA,IAAI,EAAE;AAACte,MAAAA,IAAI,EAAEC;AAAP,KAZI;;AAcV;AACJ;AACA;AACIE,IAAAA,GAAG,EAAE;AAACH,MAAAA,IAAI,EAAEC,MAAP;AAAeW,MAAAA,QAAQ,EAAE;AAAzB;AAjBK,GAzEN;AA6FN2d,EAAAA,WAAW,EAAE,UAASC,QAAT,EAAmBC,QAAnB,EAA6B;AACxC,QAAIC,KAAK,GAAG,KAAKzZ,YAAL,CAAkB,YAAlB,CAAZ,CADwC;;AAIxC,QAAI,CAACyZ,KAAD,IAAUD,QAAQ,IAAIC,KAA1B,EAAiC;AAC/B,WAAKvZ,YAAL,CAAkB,YAAlB,EAAgCqZ,QAAhC;AACD;AACF;AApGK,CAAD,CAAP;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA9e,OAAO,CAAC;AACNC,EAAAA,SAAS,EAAEC,IAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAvEQ;AAyENC,EAAAA,EAAE,EAAE,oBAzEE;AA2ENC,EAAAA,UAAU,EAAE;AACV;AACJ;AACA;AACI6e,IAAAA,YAAY,EAAE;AACZ3e,MAAAA,IAAI,EAAEM,OADM;AAEZJ,MAAAA,KAAK,EAAE;AAFK,KAJJ;;AAQV;AACJ;AACA;AACI0e,IAAAA,OAAO,EAAG;AACR5e,MAAAA,IAAI,EAAEM,OADE;AAERS,MAAAA,MAAM,EAAE,IAFA;AAGRb,MAAAA,KAAK,EAAE;AAHC,KAXA;;AAgBV;AACJ;AACA;AACI2e,IAAAA,cAAc,EAAE5e,MAnBN;;AAqBV;AACJ;AACA;AACI6e,IAAAA,YAAY,EAAE;AACZ9e,MAAAA,IAAI,EAAEC;AADM,KAxBJ;;AA4BV;AACJ;AACA;AACIye,IAAAA,KAAK,EAAEze,MA/BG;;AAiCV;AACJ;AACA;AACI8e,IAAAA,YAAY,EAAE;AACZ/e,MAAAA,IAAI,EAAEM,OADM;AAEZJ,MAAAA,KAAK,EAAE;AAFK,KApCJ;;AAyCV;AACJ;AACA;AACI8e,IAAAA,gBAAgB,EAAE;AAChBhf,MAAAA,IAAI,EAAEM,OADU;AAEhBJ,MAAAA,KAAK,EAAE;AAFS,KA5CR;;AAiDV;AACJ;AACA;AACIS,IAAAA,WAAW,EAAEV,MApDH;;AAsDV;AACJ;AACA;AACIgf,IAAAA,QAAQ,EAAE;AACRjf,MAAAA,IAAI,EAAEM,OADE;AAERJ,MAAAA,KAAK,EAAE;AAFC,KAzDA;;AA8DV;AACJ;AACA;AACIgf,IAAAA,QAAQ,EAAE;AACRlf,MAAAA,IAAI,EAAEM,OADE;AAERJ,MAAAA,KAAK,EAAE;AAFC,KAjEA;;AAsEV;AACJ;AACA;AACIif,IAAAA,OAAO,EAAE;AACPnf,MAAAA,IAAI,EAAEM,OADC;AAEPJ,MAAAA,KAAK,EAAE,KAFA;AAGPa,MAAAA,MAAM,EAAE;AAHD,KAzEC;;AA+EV;AACJ;AACA;AACIqe,IAAAA,QAAQ,EAAE;AACRpf,MAAAA,IAAI,EAAEM,OADE;AAERJ,MAAAA,KAAK,EAAE;AAFC,KAlFA;;AAuFV;AACJ;AACA;AACIwL,IAAAA,MAAM,EAAE;AACN1L,MAAAA,IAAI,EAAE2L,KADA;AAEN/K,MAAAA,QAAQ,EAAE;AAFJ,KA1FE;;AA+FV;AACJ;AACA;AACI4K,IAAAA,YAAY,EAAE;AACZxL,MAAAA,IAAI,EAAEC,MADM;AAEZC,MAAAA,KAAK,EAAE;AAFK,KAlGJ;;AAuGV;AACJ;AACA;AACIuL,IAAAA,aAAa,EAAE;AACbzL,MAAAA,IAAI,EAAEC,MADO;AAEbC,MAAAA,KAAK,EAAE;AAFM,KA1GL;;AA+GV;AACJ;AACA;AACIA,IAAAA,KAAK,EAAE;AACLF,MAAAA,IAAI,EAAE6L,MADD;AAEL9K,MAAAA,MAAM,EAAE;AAFH,KAlHG;;AAuHV;AACJ;AACA;AACImO,IAAAA,IAAI,EAAE;AACJlP,MAAAA,IAAI,EAAEC,MADF;AAEJc,MAAAA,MAAM,EAAE,IAFJ;AAGJb,MAAAA,KAAK,EAAE;AAHH,KA1HI;;AAgIV;AACJ;AACA;AACImf,IAAAA,gBAAgB,EAAE;AAChBrf,MAAAA,IAAI,EAAEM,OADU;AAEhBJ,MAAAA,KAAK,EAAE;AAFS,KAnIR;;AAwIV;AACJ;AACA;AACI4L,IAAAA,YAAY,EAAE;AACZ9L,MAAAA,IAAI,EAAEM,OADM;AAEZJ,MAAAA,KAAK,EAAE;AAFK,KA3IJ;;AAgJV;AACJ;AACA;AACI6L,IAAAA,cAAc,EAAE;AACd/L,MAAAA,IAAI,EAAEC,MADQ;AAEdC,MAAAA,KAAK,EAAE;AAFO,KAnJN;;AAwJV;AACJ;AACA;AACIoL,IAAAA,SAAS,EAAE;AACTtL,MAAAA,IAAI,EAAEoB,MADG;AAETlB,MAAAA,KAAK,EAAE;AAFE,KA3JD;;AAgKV;AACJ;AACA;AACIof,IAAAA,OAAO,EAAErf,MAnKC;;AAqKV;AACJ;AACA;AACIsf,IAAAA,cAAc,EAAEtf,MAxKN;;AA0KV;AACJ;AACA;AACIuf,IAAAA,WAAW,EAAE;AACXxf,MAAAA,IAAI,EAAEM,OADK;AAEXJ,MAAAA,KAAK,EAAE;AAFI,KA7KH;;AAkLV;AACJ;AACA;AACIuf,IAAAA,SAAS,EAAE;AACTzf,MAAAA,IAAI,EAAEoB;AADG,KArLD;;AAyLV;AACJ;AACA;AACI4c,IAAAA,IAAI,EAAE/d,MA5LI;;AA8LV;AACJ;AACA;AACA;AACIgM,IAAAA,OAAO,EAAE;AACPjM,MAAAA,IAAI,EAAEkM;AADC,KAlMC;;AAsMV;AACJ;AACA;AACKC,IAAAA,cAAc,EAAE;AACfnM,MAAAA,IAAI,EAAEM,OADS;AAEfJ,MAAAA,KAAK,EAAE;AAFQ,KAzMP;;AA8MV;AACJ;AACA;AACA;AACIkM,IAAAA,kBAAkB,EAAE;AAClBpM,MAAAA,IAAI,EAAEM,OADY;AAElBJ,MAAAA,KAAK,EAAE;AAFW,KAlNV;;AAuNV;AACJ;AACA;AACI;AACAuM,IAAAA,MAAM,EAAE;AACNvM,MAAAA,KAAK,EAAEuC;AADD,KA3NE;AA+NViK,IAAAA,KAAK,EAAE;AACLxM,MAAAA,KAAK,EAAEuC;AADF,KA/NG;;AAmOV;AACJ;AACA;AACIid,IAAAA,qBAAqB,EAAE;AACrB1f,MAAAA,IAAI,EAAEM,OADe;AAErBJ,MAAAA,KAAK,EAAE;AAFc,KAtOb;;AA2OV;AACJ;AACA;AACIyf,IAAAA,oBAAoB,EAAE;AACpB3f,MAAAA,IAAI,EAAEM,OADc;AAEpBJ,MAAAA,KAAK,EAAE;AAFa,KA9OZ;;AAmPV;AACJ;AACA;AACI0L,IAAAA,cAAc,EAAE;AACd5L,MAAAA,IAAI,EAAE6L,MADQ;AAEd9K,MAAAA,MAAM,EAAE;AAFM;AAtPN,GA3EN;AAuUNO,EAAAA,SAAS,EAAE,CACT,qBADS,CAvUL;AA2UNse,EAAAA,cAAc,EAAE,UAAUC,SAAV,EAAqB;AACnC,QAAI3Q,IAAI,GAAG,KAAKA,IAAhB;;AACA,QAAI,CAACvD,KAAK,CAAC8O,OAAN,CAAcoF,SAAd,CAAD,IAA6BA,SAAS,CAAC7b,MAAV,KAAqB,CAAlD,IAAuDkL,IAAI,KAAK,IAAhE,IAAwEA,IAAI,CAAClL,MAAL,GAAc,KAAKsH,SAA/F,EAA0G;AACxG;AACD;;AACD,QAAI,CAAC,KAAK5J,CAAL,CAAOoe,iBAAP,CAAyBX,OAA9B,EAAuC;AACrC;AACD;;AACD,SAAKzd,CAAL,CAAOqe,4BAAP,CAAoCjR,kBAApC,CAAuD;AACrDQ,MAAAA,MAAM,EAAE;AACNpP,QAAAA,KAAK,EAAEgP;AADD;AAD6C,KAAvD;AAKD,GAxVK;AA0VN;AACA3B,EAAAA,KAAK,EAAE,YAAY;AACjB,SAAKd,MAAL,GAAc,KAAKvM,KAAnB;AAEA,SAAK+I,gBAAL,CACE,iBAAiB,KAAK8C,cAAtB,GAAuC,UADzC,EAEE,KAAKiU,uBAAL,CAA6B5R,IAA7B,CAAkC,IAAlC,CAFF;AAID,GAlWK;;AAoWN;AACF;AACA;AACE6R,EAAAA,MAAM,EAAE,YAAY;AAClB,QAAIhR,MAAM,GAAG;AACXC,MAAAA,IAAI,EAAE,KAAKA,IADA;AAEXhP,MAAAA,KAAK,EAAE,KAAKA;AAFD,KAAb;AAKA,SAAKA,KAAL,GAAa,IAAb;AACA,SAAKuM,MAAL,GAAc,IAAd;AACA,SAAKyC,IAAL,GAAY,EAAZ;AACA,SAAKxC,KAAL,GAAa,EAAb;;AAEA,SAAKyC,UAAL,CAAgBF,MAAhB,EAAwB,YAAxB;;AAEA,SAAKiR,gBAAL,GAbkB;;;AAgBlB,QAAI,CAAC,KAAKxe,CAAL,CAAOoe,iBAAP,CAAyBX,OAA9B,EAAuC;AACrC,WAAKzd,CAAL,CAAOoe,iBAAP,CAAyB9X,KAAzB;AACD;AACF,GA1XK;;AA4XN;AACF;AACA;AACEmH,EAAAA,UAAU,EAAE,UAAUF,MAAV,EAAkBgE,GAAlB,EAAuB;AACjC,QAAI3B,EAAE,GAAG,KAAKD,MAAL,EAAT;;AACA,QAAIlJ,KAAK,GAAG,iBAAiB,KAAK4D,cAAtB,GAAuCkH,GAAnD;AAEA,SAAKC,IAAL,CAAU/K,KAAV,EAAiB;AACfmJ,MAAAA,EAAE,EAAEA,EADW;AAEfpR,MAAAA,KAAK,EAAE+O,MAAM,CAAC,KAAKxD,aAAN,CAAN,IAA8BwD,MAAM,CAAC/O,KAF7B;AAGfgP,MAAAA,IAAI,EAAED,MAAM,CAAC,KAAKzD,YAAN,CAAN,IAA6ByD,MAAM,CAACC,IAH3B;AAIfI,MAAAA,MAAM,EAAE,IAJO;AAKfL,MAAAA,MAAM,EAAEA;AALO,KAAjB;AAOD,GA1YK;;AA4YN;AACF;AACA;AACEkR,EAAAA,aAAa,EAAE,UAAUjR,IAAV,EAAgB;AAC7B,QAAIA,IAAI,IAAIA,IAAI,CAACkR,IAAL,EAAZ,EAAyB;AACvB,WAAKC,gBAAL;AACD,KAFD,MAEO;AACL,WAAKH,gBAAL;AACD;AACF,GArZK;;AAuZN;AACF;AACA;AACEF,EAAAA,uBAAuB,EAAE,UAAU7X,KAAV,EAAiB;AACxC,QAAImY,SAAS,GAAGnY,KAAK,CAACkB,MAAtB;AAEA,SAAKnJ,KAAL,GAAaogB,SAAS,CAACpgB,KAAvB;AACA,SAAKgP,IAAL,GAAYoR,SAAS,CAACpR,IAAtB;AACD,GA/ZK;;AAiaN;AACF;AACA;AACEmR,EAAAA,gBAAgB,EAAE,YAAY;AAC5B,QAAI,KAAKhB,gBAAT,EAA2B;AACzB;AACD;;AAED,QAAI,KAAKK,qBAAT,EAAgC;AAC9B;AACD;;AAED,SAAKhe,CAAL,CAAOmU,KAAP,CAAa1T,KAAb,CAAmBwM,OAAnB,GAA6B,cAA7B;AACA,SAAK+Q,qBAAL,GAA6B,IAA7B;AACD,GA/aK;;AAibN;AACF;AACA;AACEQ,EAAAA,gBAAgB,EAAE,YAAY;AAC5B,QAAI,CAAC,KAAKR,qBAAV,EAAiC;AAC/B;AACD;;AAED,SAAKhe,CAAL,CAAOmU,KAAP,CAAa1T,KAAb,CAAmBwM,OAAnB,GAA6B,MAA7B;AACA,SAAK+Q,qBAAL,GAA6B,KAA7B;AACD,GA3bK;AA6bNrO,EAAAA,MAAM,EAAE,YAAY;AAClB,QAAIC,EAAE,GAAG,KAAKrM,YAAL,CAAkB,IAAlB,CAAT;AACA,QAAI,CAACqM,EAAL,EAASA,EAAE,GAAG,KAAKC,OAAL,CAAaD,EAAlB;AACT,WAAOA,EAAP;AACD,GAjcK;;AAmcN;AACF;AACA;;AAEE;AACF;AACA;AACA;AACEiP,EAAAA,SAAS,EAAE,YAAY;AACrB,WAAO;AACLrR,MAAAA,IAAI,EAAE,KAAKA,IADN;AAELhP,MAAAA,KAAK,EAAE,KAAKA;AAFP,KAAP;AAID,GAhdK;;AAkdN;AACF;AACA;AACA;AACEsgB,EAAAA,SAAS,EAAE,UAAUvR,MAAV,EAAkB;AAC3B,SAAKC,IAAL,GAAYD,MAAM,CAAC,KAAKzD,YAAN,CAAN,IAA6ByD,MAAM,CAACC,IAAhD;AACA,SAAKhP,KAAL,GAAa+O,MAAM,CAAC,KAAKxD,aAAN,CAAN,IAA8BwD,MAAM,CAAC/O,KAAlD;;AACA,SAAKmgB,gBAAL;AACD,GA1dK;;AA4dN;AACF;AACA;AACEI,EAAAA,OAAO,EAAE,YAAY;AACnB,SAAKrB,QAAL,GAAgB,IAAhB;AACD,GAjeK;;AAmeN;AACF;AACA;AACEsB,EAAAA,MAAM,EAAE,YAAY;AAClB,SAAKtB,QAAL,GAAgB,KAAhB;AACD,GAxeK;;AA0eN;AACF;AACA;AACA;AACExP,EAAAA,WAAW,EAAE,UAAUP,GAAV,EAAe;AAC1B,SAAK3N,CAAL,CAAOqe,4BAAP,CAAoCnQ,WAApC,CAAgDP,GAAhD;AACD,GAhfK;;AAkfN;AACF;AACA;AACA;AACEsR,EAAAA,QAAQ,EAAE,YAAY;AACpB,WAAO,KAAKjf,CAAL,CAAOoe,iBAAP,CAAyBa,QAAzB,EAAP;AACD,GAxfK;;AA0fN;AACF;AACA;AACE9K,EAAAA,KAAK,EAAE,YAAY;AACjB,SAAKpJ,MAAL,GAAc,EAAd;AACA,SAAKC,KAAL,GAAa,EAAb;;AACA,SAAKuT,MAAL;AACD,GAjgBK;;AAmgBN;AACF;AACA;AACEW,EAAAA,KAAK,EAAE,YAAY;AACjB,SAAKX,MAAL;AACD,GAxgBK;;AA0gBN;AACF;AACA;AACE9O,EAAAA,eAAe,EAAE,YAAY;AAC3B,SAAK+O,gBAAL;;AACA,SAAKxe,CAAL,CAAOqe,4BAAP,CAAoC5O,eAApC;AACD,GAhhBK;;AAkhBN;AACF;AACA;AACA;AACA;AACE0P,EAAAA,eAAe,EAAE,UAAU1Y,KAAV,EAAiB;AAChC,SAAKzG,CAAL,CAAOqe,4BAAP,CAAoC5M,SAApC,CAA8ChL,KAA9C;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA3kBQ,CAAD,CAAP;;AC7GA;AACA;AACA;AACA;AACA;AACA;;AACA,AAAO,MAAM2Y,SAAN,SAAwBtY,OAAO,CAACC,UAAD,CAA/B,CAA4C;AAC1B,aAAV3I,UAAU,GAAG;AACpB,2CACO,MAAMA,UADb;AAEI;AACZ;AACA;AACYihB,MAAAA,IAAI,EAAE;AACF/gB,QAAAA,IAAI,EAAEC;AADJ,OALV;;AAQI;AACZ;AACA;AACYF,MAAAA,GAAG,EAAE;AACDC,QAAAA,IAAI,EAAEC;AADL,OAXT;;AAcI;AACZ;AACA;AACY+gB,MAAAA,KAAK,EAAE;AACHhhB,QAAAA,IAAI,EAAEC;AADH,OAjBX;AAoBIghB,MAAAA,KAAK,EAAE;AACHjhB,QAAAA,IAAI,EAAEC;AADH;AApBX;AAwBH;;AAED8I,EAAAA,WAAW,GAAG;AACV;AACA,SAAKiY,KAAL,GAAa,EAAb;AACH;;AAEDhY,EAAAA,iBAAiB,GAAG;AAChB,UAAMA,iBAAN;AACA8X,IAAAA,SAAS,CAACI,QAAV,CAAmB,eAAnB,EAAqCC,OAAD,IAAa;AAC7C,UAAIA,OAAO,CAACC,QAAR,KAAqB,GAAzB,EAA8B;AAC1B,aAAKH,KAAL,GAAa,oBAAb;AACH,OAFD,MAEO;AACH,cAAM7c,IAAI,GAAG,sBAAsBid,IAAtB,CAA2BF,OAAO,CAACC,QAAnC,CAAb;;AACA,YAAIhd,IAAJ,EAAU;AACN,eAAK6c,KAAL,GAAc,GAAE7c,IAAI,CAAC,CAAD,CAAI,oBAAxB;AACH,SAFD,MAEO;AACH,eAAK6c,KAAL,GAAa,oBAAb;AACH;AACJ;AACJ,KAXD;AAYH;;AAEDrX,EAAAA,MAAM,GAAG;AACL;AACA;AACA,QAAI,IAAI0X,GAAJ,CAAQ,KAAKL,KAAb,EAAoBtM,MAAM,CAAC1Q,QAAP,CAAgBF,IAApC,EAA0CG,MAA1C,KAAqD,KAAKqd,MAAL,GAAcrd,MAAvE,EAA+E;AAC3E,aAAOtE,MAAK,YAAW,KAAKqhB,KAAM,2BAA0B,KAAKD,KAAM,aAAY,KAAK9X,IAAK,qBAA7F;AACH;;AACD,WAAOtJ,MAAK,YAAW,KAAKqhB,KAAM,oBAAmB,KAAKF,IAAK,YAAW,KAAKC,KAAM,qBAArF;AACH;;AAEgB,aAANnX,MAAM,GAAG;AAChB,WAAOC,KAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATQ;AAUH;;AAED0X,EAAAA,OAAO,CAACT,IAAD,EAAO;AACV,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AAED7X,EAAAA,IAAI,CAACE,EAAD,EAAK;AACLA,IAAAA,EAAE,CAACsE,cAAH;AACA,QAAI3J,IAAI,GAAG,KAAKkd,KAAhB;AACA,QAAIF,IAAI,GAAG,KAAKA,IAAhB;;AACA,QAAI,KAAKhhB,GAAT,EAAc;AACV,YAAM0hB,eAAe,GAAGlc,QAAQ,CAACmc,cAAT,CAAwB,KAAK3hB,GAA7B,CAAxB;AACAghB,MAAAA,IAAI,GAAGU,eAAe,CAACE,WAAhB,EAAP;AACA5d,MAAAA,IAAI,GAAG0d,eAAe,CAACG,UAAvB;AACH,KARI;;;AAWL,UAAMC,KAAK,GAAGlN,MAAM,CAACzL,IAAP,CAAY,EAAZ,EAAgB,OAAhB,CAAd;;AACA,QAAI2Y,KAAK,IAAI,CAACA,KAAK,CAACC,MAApB,EAA4B;AACxB;AACA,YAAMC,GAAG,GAAGF,KAAK,CAACG,KAAlB;;AACA,UAAID,GAAJ,EAAS;AACLE,QAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ,EAA6DnB,IAA7D,EADK;;AAGLc,QAAAA,KAAK,CAACG,KAAN,CAAYD,GAAZ,CAAgBI,YAAhB,CAA6BpB,IAA7B;AACAc,QAAAA,KAAK,CAAC7Z,KAAN;AACH,OALD,MAKO;AACHia,QAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAAsDnB,IAAtD;;AACApM,QAAAA,MAAM,CAACyN,YAAP,GAAsB,YAAY;AAC9BP,UAAAA,KAAK,CAACG,KAAN,CAAYD,GAAZ,CAAgBI,YAAhB,CAA6BpB,IAA7B;AACH,SAFD,CAFG;;;AAMHc,QAAAA,KAAK,CAAC5d,QAAN,GAAiBF,IAAjB;AACH;AACJ;AACJ;;AAxG8C;AA0GnDgG,cAAc,CAACC,MAAf,CAAsB,aAAtB,EAAqC8W,SAArC;;ACpHA,MAAMuB,IAAN,SAAmBC,WAAnB,CAA+B;AACX,aAAPC,OAAO,GAAG;AACnB,WAAO,OAAP;AACD;;AAH4B;;AAM/BxY,cAAc,CAACC,MAAf,CAAsB,oBAAtB,EAA4CqY,IAA5C;;ACJA,MAAMpY,qBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AAEAD,qBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAtDA;AAwDA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,qBAAmB,CAACvE,OAA9C;;ACzDA,MAAMuE,qBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AAEAD,qBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cA9LA;AAgMA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,qBAAmB,CAACvE,OAA9C;;ACnMA,MAAMuE,qBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AAEAD,qBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAjBA;AAmBA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,qBAAmB,CAACvE,OAA9C;;ACrBA,MAAMuE,qBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AAEAD,qBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAzBA;AA2BA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,qBAAmB,CAACvE,OAA9C;;AC7BA,MAAMuE,qBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AAEAD,qBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBApBA;AAsBA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,qBAAmB,CAACvE,OAA9C;;ACvBA,MAAMuE,qBAAmB,GAAG1E,QAAQ,CAAC2E,aAAT,CAAuB,UAAvB,CAA5B;AAEAD,qBAAmB,CAACE,SAApB,GAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cA7IA;AA+IA5E,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BwE,qBAAmB,CAACvE,OAA9C;;ACpJA;AACA;AACA;AACA,AAAO,MAAM8c,kBAAkB,GAAGC,UAAU,IAAI,MAAMC,wBAAN,SAAuCD,UAAvC,CAAkD;AAC3E,aAAV3iB,UAAU,GAAG;AACtB,WAAO;AACL;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACM6iB,MAAAA,KAAK,EAAE;AACL3iB,QAAAA,IAAI,EAAEC,MADD;AAELe,QAAAA,QAAQ,EAAE;AAFL;AAlBF,KAAP;AAuBD;AAED;;;AACA4hB,EAAAA,wBAAwB,CAAC5E,IAAD,EAAOS,QAAP,EAAiBD,QAAjB,EAA2B;AACjD,UAAMoE,wBAAN,CA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAwCC;;AAED,AAAO,MAAMC,eAAe,GAAG,YAAW;AACxC,MAAI,OAAOH,oBAAP,KAAgC,UAApC,EAAgD;AAC9C,WAAOA,oBAAoB,CAACE,uBAAD,CAA3B;AACD;AACF,CAJM;;AC7eP,IAAI,CAACzT,MAAM,CAACuS,MAAZ,EAAoB;AAClBvS,EAAAA,MAAM,CAAC,QAAD,CAAN,GAAmB,EAAnB;AACD;AAED;AACA;AACA;;;AACAA,MAAM,CAAC,QAAD,CAAN,CAAiB2T,aAAjB,GAAiC3T,MAAM,CAACuS,MAAP,CAAcoB,aAAd,IAA+B,EAAhE;;AAGA3T,MAAM,CAAC,QAAD,CAAN,CAAiB4T,uBAAjB,GAA2C5T,MAAM,CAACuS,MAAP,CAAcqB,uBAAd,IAAyC,EAApF;;AACA5T,MAAM,CAAC,QAAD,CAAN,CAAiB4T,uBAAjB,CAAyC,yBAAzC,IAAsE,YAAW;AAC/E,MAAIF,eAAJ,EAAqB;AACnBA,IAAAA,eAAe;AAChB;AACF,CAJD;;AAMA,IAAIG,QAAJ;AAEA,MAAMnK,UAAU,GAAG,IAAIZ,GAAJ,EAAnB;AAEA;AACA;AACA;AACA;;AACA,MAAagL,YAAY,GAAGhG,UAAU,IAAI,MAAMiG,kBAAN,SAAiCpC,QAAQ,CAAC7D,UAAD,CAAzC,CAAsD;AAC9F;AACe,SAARO,QAAQ,GAAG;AAChB,UAAMA,QAAN;AAEA,UAAM;AAACnjB,MAAAA;AAAD,QAAO,IAAb,CAHgB;;AAMhB,QAAIA,EAAE,IAAI,CAACwe,UAAU,CAACV,GAAX,CAAe9d,EAAf,CAAX,EAA+B;AAC7B8U,MAAAA,MAAM,CAACuS,MAAP,CAAcoB,aAAd,CAA4BpU,IAA5B,CAAiC,IAAjC;AACAmK,MAAAA,UAAU,CAAC9L,GAAX,CAAe1S,EAAf;;AAEA,UAAI8U,MAAM,CAACuS,MAAP,CAAcqB,uBAAlB,EAA2C;AACzCC,QAAAA,QAAQ,GAAGG,SAAS,CAAChY,QAAV,CAAmB6X,QAAnB,EACTI,UADS,EACG,MAAM;AAChBjU,UAAAA,MAAM,CAACuS,MAAP,CAAcqB,uBAAd,CAAsC,yBAAtC;AACD,SAHQ,CAAX;AAKAM,QAAAA,gBAAgB,CAACL,QAAD,CAAhB;AACD;AACF;AACF;;AAEDzf,EAAAA,WAAW,GAAG;AACZ;;AACA,QAAIxD,QAAQ,CAACujB,OAAT,KAAqB,IAAzB,EAA+B;AAC7B7G,MAAAA,OAAO,CAAC8G,IAAR,CACE,8GADF;AAGD;AACF;;AA9B6F,CAAzF;;AC/BP;AACA;AACA,IAAI1U,SAAS,GAAGD,SAAS,CAACC,SAA1B;AACA,IAAI2U,QAAQ,GAAG5U,SAAS,CAAC4U,QAAzB;AAEA,AAAO,IAAIC,KAAK,GAAG,aAAavE,IAAb,CAAkBrQ,SAAlB,CAAZ;AACP,IAAI6U,SAAS,GAAG,UAAUxE,IAAV,CAAerQ,SAAf,CAAhB;AACA,IAAI8U,OAAO,GAAG,wCAAwC9H,IAAxC,CAA6ChN,SAA7C,CAAd;AACA,IAAI+U,IAAI,GAAG,cAAc/H,IAAd,CAAmBhN,SAAnB,CAAX;AACA,AAAO,IAAIgV,EAAE,GAAGH,SAAS,IAAIC,OAAb,IAAwBC,IAAjC;AACP,AAAO,IAAIE,UAAU,GAAGD,EAAE,KAAKH,SAAS,GAAG3jB,QAAQ,CAACgkB,YAAT,IAAyB,CAA5B,GAAgC,CAAC,CAACH,IAAI,IAAID,OAAT,EAAkB,CAAlB,CAA/C,CAAnB;AACP,AAAO,IAAIK,MAAM,GAAG,CAACJ,IAAD,IAAS,WAAW1E,IAAX,CAAgBrQ,SAAhB,CAAtB;AACP,IAAIoV,QAAQ,GAAGD,MAAM,IAAI,eAAe9E,IAAf,CAAoBrQ,SAApB,CAAzB;AACA,AAAO,IAAIqV,MAAM,GAAG,CAACN,IAAD,IAAS,WAAW1E,IAAX,CAAgBrQ,SAAhB,CAAtB;AACP,AAAO,IAAIsV,MAAM,GAAG,UAAUjF,IAAV,CAAerQ,SAAf,CAAb;AACP,AAAO,IAAIuV,MAAM,GAAG,iBAAiBlF,IAAjB,CAAsBtQ,SAAS,CAACyV,MAAhC,CAAb;AACP,AAAO,IAAIC,kBAAkB,GAAG,+BAA+BpF,IAA/B,CAAoCrQ,SAApC,CAAzB;AACP,AAAO,IAAI0V,OAAO,GAAG,YAAYrF,IAAZ,CAAiBrQ,SAAjB,CAAd;AAEP,AAAO,IAAI2V,GAAG,GAAGJ,MAAM,KAAK,cAAclF,IAAd,CAAmBrQ,SAAnB,KAAiCD,SAAS,CAAC6V,cAAV,GAA2B,CAAjE,CAAhB;AACP,AAAO,IAAIC,OAAO,GAAG,UAAUxF,IAAV,CAAerQ,SAAf,CAAd;;AAEP,AAAO,IAAI8V,MAAM,GAAGH,GAAG,IAAIE,OAAP,IAAkB,mDAAmDxF,IAAnD,CAAwDrQ,SAAxD,CAA/B;AACP,AAAO,IAAI+V,GAAG,GAAGJ,GAAG,IAAI,MAAMtF,IAAN,CAAWsE,QAAX,CAAjB;AACP,AAAO,IAAIqB,QAAQ,GAAG,WAAW3F,IAAX,CAAgBrQ,SAAhB,CAAf;AACP,AAAO,IAAIiW,OAAO,GAAG,OAAO5F,IAAP,CAAYsE,QAAZ,CAAd;AAEP,IAAIuB,cAAc,GAAGZ,MAAM,IAAItV,SAAS,CAAC4T,KAAV,CAAgB,qBAAhB,CAA/B;AACA,IAAIsC,cAAJ,EAAoBA,cAAc,GAAGnpB,MAAM,CAACmpB,cAAc,CAAC,CAAD,CAAf,CAAvB;;AACpB,IAAIA,cAAc,IAAIA,cAAc,IAAI,EAAxC,EAA4C;AAAEZ,EAAAA,MAAM,GAAG,KAAT;AAAgBH,EAAAA,MAAM,GAAG,IAAT;AAAe;;;AAE7E,AAAO,IAAIgB,WAAW,GAAGJ,GAAG,KAAKX,QAAQ,IAAIE,MAAM,KAAKY,cAAc,IAAI,IAAlB,IAA0BA,cAAc,GAAG,KAAhD,CAAvB,CAArB;AACP,AAAO,IAAIE,iBAAiB,GAAGxB,KAAK,IAAKI,EAAE,IAAIC,UAAU,IAAI,CAAtD;;AC9BA,SAASoB,SAAT,CAAmBC,GAAnB,EAAwB;AAAE,SAAO,IAAIlG,MAAJ,CAAW,YAAYkG,GAAZ,GAAkB,eAA7B,CAAP;AAAsD;AAEvF,AAAO,IAAIC,OAAO,GAAG,UAASC,IAAT,EAAeF,GAAf,EAAoB;AACvC,MAAIG,OAAO,GAAGD,IAAI,CAACE,SAAnB;AACA,MAAI9C,KAAK,GAAGyC,SAAS,CAACC,GAAD,CAAT,CAAetJ,IAAf,CAAoByJ,OAApB,CAAZ;;AACA,MAAI7C,KAAJ,EAAW;AACT,QAAI+C,KAAK,GAAGF,OAAO,CAAChb,KAAR,CAAcmY,KAAK,CAAC/X,KAAN,GAAc+X,KAAK,CAAC,CAAD,CAAL,CAASjkB,MAArC,CAAZ;AACA6mB,IAAAA,IAAI,CAACE,SAAL,GAAiBD,OAAO,CAAChb,KAAR,CAAc,CAAd,EAAiBmY,KAAK,CAAC/X,KAAvB,KAAiC8a,KAAK,GAAG/C,KAAK,CAAC,CAAD,CAAL,GAAW+C,KAAd,GAAsB,EAA5D,CAAjB;AACD;AACF,CAPM;AASP,AAAO,SAASC,cAAT,CAAwB1O,CAAxB,EAA2B;AAChC,OAAK,IAAI2O,KAAK,GAAG3O,CAAC,CAAC4O,UAAF,CAAannB,MAA9B,EAAsCknB,KAAK,GAAG,CAA9C,EAAiD,EAAEA,KAAnD,EACE3O,CAAC,CAAC9L,WAAF,CAAc8L,CAAC,CAAC6O,UAAhB;;AACF,SAAO7O,CAAP;AACD;AAED,AAAO,SAAS8O,oBAAT,CAA8BC,MAA9B,EAAsC/O,CAAtC,EAAyC;AAC9C,SAAO0O,cAAc,CAACK,MAAD,CAAd,CAAuB7lB,WAAvB,CAAmC8W,CAAnC,CAAP;AACD;AAED,AAAO,SAASgP,GAAT,CAAaC,GAAb,EAAkB9lB,OAAlB,EAA2BqlB,SAA3B,EAAsC5oB,KAAtC,EAA6C;AAClD,MAAIoa,CAAC,GAAGhX,QAAQ,CAAC2E,aAAT,CAAuBshB,GAAvB,CAAR;AACA,MAAIT,SAAJ,EAAexO,CAAC,CAACwO,SAAF,GAAcA,SAAd;AACf,MAAI5oB,KAAJ,EAAWoa,CAAC,CAACpa,KAAF,CAAQspB,OAAR,GAAkBtpB,KAAlB;AACX,MAAI,OAAOuD,OAAP,IAAkB,QAAtB,EAAgC6W,CAAC,CAAC9W,WAAF,CAAcF,QAAQ,CAACmmB,cAAT,CAAwBhmB,OAAxB,CAAd,EAAhC,KACK,IAAIA,OAAJ,EAAa,KAAK,IAAIqP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrP,OAAO,CAAC1B,MAA5B,EAAoC,EAAE+Q,CAAtC,EAAyCwH,CAAC,CAAC9W,WAAF,CAAcC,OAAO,CAACqP,CAAD,CAArB;AAC3D,SAAOwH,CAAP;AACD;;AAED,AAAO,SAASoP,IAAT,CAAcH,GAAd,EAAmB9lB,OAAnB,EAA4BqlB,SAA5B,EAAuC5oB,KAAvC,EAA8C;AACnD,MAAIoa,CAAC,GAAGgP,GAAG,CAACC,GAAD,EAAM9lB,OAAN,EAAeqlB,SAAf,EAA0B5oB,KAA1B,CAAX;AACAoa,EAAAA,CAAC,CAACpX,YAAF,CAAe,MAAf,EAAuB,cAAvB;AACA,SAAOoX,CAAP;AACD;AAED,AAAO,IAAIqP,KAAJ;AACP,IAAIrmB,QAAQ,CAACsmB,WAAb,EAA0BD,KAAK,GAAG,UAASf,IAAT,EAAeiB,KAAf,EAAsBlV,GAAtB,EAA2BmV,OAA3B,EAAoC;AACpE,MAAIC,CAAC,GAAGzmB,QAAQ,CAACsmB,WAAT,EAAR;AACAG,EAAAA,CAAC,CAACC,MAAF,CAASF,OAAO,IAAIlB,IAApB,EAA0BjU,GAA1B;AACAoV,EAAAA,CAAC,CAACE,QAAF,CAAWrB,IAAX,EAAiBiB,KAAjB;AACA,SAAOE,CAAP;AACD,CALyB,CAA1B,KAMKJ,KAAK,GAAG,UAASf,IAAT,EAAeiB,KAAf,EAAsBlV,GAAtB,EAA2B;AACtC,MAAIoV,CAAC,GAAGzmB,QAAQ,CAACkF,IAAT,CAAc0hB,eAAd,EAAR;;AACA,MAAI;AAAEH,IAAAA,CAAC,CAACI,iBAAF,CAAoBvB,IAAI,CAAC7c,UAAzB;AAAsC,GAA5C,CACA,OAAMuO,CAAN,EAAS;AAAE,WAAOyP,CAAP;AAAU;;AACrBA,EAAAA,CAAC,CAACziB,QAAF,CAAW,IAAX;AACAyiB,EAAAA,CAAC,CAACK,OAAF,CAAU,WAAV,EAAuBzV,GAAvB;AACAoV,EAAAA,CAAC,CAACM,SAAF,CAAY,WAAZ,EAAyBR,KAAzB;AACA,SAAOE,CAAP;AACD,CARI;AAUL,AAAO,SAASO,QAAT,CAAkBjB,MAAlB,EAA0BkB,KAA1B,EAAiC;AACtC,MAAIA,KAAK,CAACC,QAAN,IAAkB,CAAtB;AACED,IAAAA,KAAK,GAAGA,KAAK,CAACxe,UAAd;AACF,MAAIsd,MAAM,CAACiB,QAAX,EACE,OAAOjB,MAAM,CAACiB,QAAP,CAAgBC,KAAhB,CAAP;;AACF,KAAG;AACD,QAAIA,KAAK,CAACC,QAAN,IAAkB,EAAtB,EAA0BD,KAAK,GAAGA,KAAK,CAACpoB,IAAd;AAC1B,QAAIooB,KAAK,IAAIlB,MAAb,EAAqB,OAAO,IAAP;AACtB,GAHD,QAGSkB,KAAK,GAAGA,KAAK,CAACxe,UAHvB;AAID;AAED,AAAO,SAAS0e,SAAT,GAAqB;AAC1B;AACA;AACA;AACA,MAAIC,aAAJ;;AACA,MAAI;AACFA,IAAAA,aAAa,GAAGpnB,QAAQ,CAAConB,aAAzB;AACD,GAFD,CAEE,OAAMpQ,CAAN,EAAS;AACToQ,IAAAA,aAAa,GAAGpnB,QAAQ,CAACkF,IAAT,IAAiB,IAAjC;AACD;;AACD,SAAOkiB,aAAa,IAAIA,aAAa,CAACC,UAA/B,IAA6CD,aAAa,CAACC,UAAd,CAAyBD,aAA7E,EACEA,aAAa,GAAGA,aAAa,CAACC,UAAd,CAAyBD,aAAzC;;AACF,SAAOA,aAAP;AACD;AAED,AAAO,SAASE,QAAT,CAAkBhC,IAAlB,EAAwBF,GAAxB,EAA6B;AAClC,MAAIG,OAAO,GAAGD,IAAI,CAACE,SAAnB;AACA,MAAI,CAACL,SAAS,CAACC,GAAD,CAAT,CAAejG,IAAf,CAAoBoG,OAApB,CAAL,EAAmCD,IAAI,CAACE,SAAL,IAAkB,CAACD,OAAO,GAAG,GAAH,GAAS,EAAjB,IAAuBH,GAAzC;AACpC;AACD,AAAO,SAASmC,WAAT,CAAqBhQ,CAArB,EAAwBiQ,CAAxB,EAA2B;AAChC,MAAIC,EAAE,GAAGlQ,CAAC,CAACja,KAAF,CAAQ,GAAR,CAAT;;AACA,OAAK,IAAIkS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiY,EAAE,CAAChpB,MAAvB,EAA+B+Q,CAAC,EAAhC,EACE,IAAIiY,EAAE,CAACjY,CAAD,CAAF,IAAS,CAAC2V,SAAS,CAACsC,EAAE,CAACjY,CAAD,CAAH,CAAT,CAAiB2P,IAAjB,CAAsBqI,CAAtB,CAAd,EAAwCA,CAAC,IAAI,MAAMC,EAAE,CAACjY,CAAD,CAAb;;AAC1C,SAAOgY,CAAP;AACD;AAED,AAAO,IAAIE,WAAW,GAAG,UAASpC,IAAT,EAAe;AAAEA,EAAAA,IAAI,CAACqC,MAAL;AAAe,CAAlD;AACP,IAAIlD,GAAJ;AACEiD,EAAAA,WAAW,GAAG,UAASpC,IAAT,EAAe;AAAEA,IAAAA,IAAI,CAACsC,cAAL,GAAsB,CAAtB;AAAyBtC,IAAAA,IAAI,CAACuC,YAAL,GAAoBvC,IAAI,CAAC3qB,KAAL,CAAW8D,MAA/B;AAAuC,GAA/F,CADF,KAEK,IAAIqlB,EAAJ;AACH4D,EAAAA,WAAW,GAAG,UAASpC,IAAT,EAAe;AAAE,QAAI;AAAEA,MAAAA,IAAI,CAACqC,MAAL;AAAe,KAArB,CAAsB,OAAMG,EAAN,EAAU;AAAI,GAAnE;;AChGK,SAASjf,IAAT,CAAckf,CAAd,EAAiB;AACtB,MAAIxS,IAAI,GAAGnP,KAAK,CAACuO,SAAN,CAAgBpK,KAAhB,CAAsBC,IAAtB,CAA2B8K,SAA3B,EAAsC,CAAtC,CAAX;AACA,SAAO,YAAU;AAAC,WAAOyS,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAczS,IAAd,CAAP;AAA2B,GAA7C;AACD;AAED,AAAO,SAAS0S,OAAT,CAAiBC,GAAjB,EAAsBne,MAAtB,EAA8Boe,SAA9B,EAAyC;AAC9C,MAAI,CAACpe,MAAL,EAAaA,MAAM,GAAG,EAAT;;AACb,OAAK,IAAIqe,IAAT,IAAiBF,GAAjB,EACE,IAAIA,GAAG,CAACtT,cAAJ,CAAmBwT,IAAnB,MAA6BD,SAAS,KAAK,KAAd,IAAuB,CAACpe,MAAM,CAAC6K,cAAP,CAAsBwT,IAAtB,CAArD,CAAJ,EACEre,MAAM,CAACqe,IAAD,CAAN,GAAeF,GAAG,CAACE,IAAD,CAAlB;;AACJ,SAAOre,MAAP;AACD;AAGD;;AACA,AAAO,SAASse,WAAT,CAAqBC,MAArB,EAA6BjX,GAA7B,EAAkCkX,OAAlC,EAA2CC,UAA3C,EAAuDC,UAAvD,EAAmE;AACxE,MAAIpX,GAAG,IAAI,IAAX,EAAiB;AACfA,IAAAA,GAAG,GAAGiX,MAAM,CAACI,MAAP,CAAc,aAAd,CAAN;AACA,QAAIrX,GAAG,IAAI,CAAC,CAAZ,EAAeA,GAAG,GAAGiX,MAAM,CAAC7pB,MAAb;AAChB;;AACD,OAAK,IAAI+Q,CAAC,GAAGgZ,UAAU,IAAI,CAAtB,EAAyBG,CAAC,GAAGF,UAAU,IAAI,CAAhD,IAAqD;AACnD,QAAIG,OAAO,GAAGN,MAAM,CAAC7Z,OAAP,CAAe,IAAf,EAAqBe,CAArB,CAAd;AACA,QAAIoZ,OAAO,GAAG,CAAV,IAAeA,OAAO,IAAIvX,GAA9B,EACE,OAAOsX,CAAC,IAAItX,GAAG,GAAG7B,CAAV,CAAR;AACFmZ,IAAAA,CAAC,IAAIC,OAAO,GAAGpZ,CAAf;AACAmZ,IAAAA,CAAC,IAAIJ,OAAO,GAAII,CAAC,GAAGJ,OAApB;AACA/Y,IAAAA,CAAC,GAAGoZ,OAAO,GAAG,CAAd;AACD;AACF;AAED,AAAO,MAAMC,OAAN,CAAc;AACnBrlB,EAAAA,WAAW,GAAG;AACZ,SAAKuI,EAAL,GAAU,IAAV;AACA,SAAKgc,CAAL,GAAS,IAAT;AACA,SAAKe,IAAL,GAAY,CAAZ;AACA,SAAKzS,OAAL,GAAexN,IAAI,CAAC,KAAKkgB,SAAN,EAAiB,IAAjB,CAAnB;AACD;;AACDA,EAAAA,SAAS,CAACC,IAAD,EAAO;AACdA,IAAAA,IAAI,CAACjd,EAAL,GAAU,CAAV;;AACA,QAAIid,IAAI,CAACF,IAAL,IAAa,CAAC,IAAIzhB,IAAJ,EAAlB,EAA4B;AAC1B2hB,MAAAA,IAAI,CAACjB,CAAL;AACD,KAFD,MAEO;AACL7Z,MAAAA,UAAU,CAAC8a,IAAI,CAAC3S,OAAN,EAAe2S,IAAI,CAACF,IAAL,GAAY,CAAC,IAAIzhB,IAAJ,EAA5B,CAAV;AACD;AACF;;AACD4hB,EAAAA,GAAG,CAACC,EAAD,EAAKnB,CAAL,EAAQ;AACT,SAAKA,CAAL,GAASA,CAAT;AACA,UAAMe,IAAI,GAAG,CAAC,IAAIzhB,IAAJ,EAAD,GAAY6hB,EAAzB;;AACA,QAAI,CAAC,KAAKnd,EAAN,IAAY+c,IAAI,GAAG,KAAKA,IAA5B,EAAkC;AAChCK,MAAAA,YAAY,CAAC,KAAKpd,EAAN,CAAZ;AACA,WAAKA,EAAL,GAAUmC,UAAU,CAAC,KAAKmI,OAAN,EAAe6S,EAAf,CAApB;AACA,WAAKJ,IAAL,GAAYA,IAAZ;AACD;AACF;;AAvBkB;AA0BrB,AAAO,SAASra,OAAT,CAAiB2a,KAAjB,EAAwBpD,GAAxB,EAA6B;AAClC,OAAK,IAAIxW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Z,KAAK,CAAC3qB,MAA1B,EAAkC,EAAE+Q,CAApC,EACE,IAAI4Z,KAAK,CAAC5Z,CAAD,CAAL,IAAYwW,GAAhB,EAAqB,OAAOxW,CAAP;;AACvB,SAAO,CAAC,CAAR;AACD;;AAGD,AAAO,IAAI6Z,WAAW,GAAG,EAAlB;AAGP;;AACA,AAAO,IAAIC,IAAI,GAAG;AAAC9a,EAAAA,QAAQ,EAAE,YAAU;AAAC,WAAO,iBAAP;AAAyB;AAA/C,CAAX;;AAGP,AAAO,IAAI+a,cAAc,GAAG;AAACC,EAAAA,MAAM,EAAE;AAAT,CAArB;AAAA,IAAsCC,SAAS,GAAG;AAAC9qB,EAAAA,MAAM,EAAE;AAAT,CAAlD;AAAA,IAAsE+qB,QAAQ,GAAG;AAAC/qB,EAAAA,MAAM,EAAE;AAAT,CAAjF;AAGP;;AACA,AAAO,SAASgrB,UAAT,CAAoBrB,MAApB,EAA4BsB,IAA5B,EAAkCrB,OAAlC,EAA2C;AAChD,OAAK,IAAIsB,GAAG,GAAG,CAAV,EAAaC,GAAG,GAAG,CAAxB,IAA6B;AAC3B,QAAIlB,OAAO,GAAGN,MAAM,CAAC7Z,OAAP,CAAe,IAAf,EAAqBob,GAArB,CAAd;AACA,QAAIjB,OAAO,IAAI,CAAC,CAAhB,EAAmBA,OAAO,GAAGN,MAAM,CAAC7pB,MAAjB;AACnB,QAAIsrB,OAAO,GAAGnB,OAAO,GAAGiB,GAAxB;AACA,QAAIjB,OAAO,IAAIN,MAAM,CAAC7pB,MAAlB,IAA4BqrB,GAAG,GAAGC,OAAN,IAAiBH,IAAjD,EACE,OAAOC,GAAG,GAAGtiB,IAAI,CAACyiB,GAAL,CAASD,OAAT,EAAkBH,IAAI,GAAGE,GAAzB,CAAb;AACFA,IAAAA,GAAG,IAAIlB,OAAO,GAAGiB,GAAjB;AACAC,IAAAA,GAAG,IAAIvB,OAAO,GAAIuB,GAAG,GAAGvB,OAAxB;AACAsB,IAAAA,GAAG,GAAGjB,OAAO,GAAG,CAAhB;AACA,QAAIkB,GAAG,IAAIF,IAAX,EAAiB,OAAOC,GAAP;AAClB;AACF;AAED,IAAII,SAAS,GAAG,CAAC,EAAD,CAAhB;AACA,AAAO,SAASC,QAAT,CAAkBvB,CAAlB,EAAqB;AAC1B,SAAOsB,SAAS,CAACxrB,MAAV,IAAoBkqB,CAA3B,EACEsB,SAAS,CAACtb,IAAV,CAAewb,GAAG,CAACF,SAAD,CAAH,GAAiB,GAAhC;;AACF,SAAOA,SAAS,CAACtB,CAAD,CAAhB;AACD;AAED,AAAO,SAASwB,GAAT,CAAargB,GAAb,EAAkB;AAAE,SAAOA,GAAG,CAACA,GAAG,CAACrL,MAAJ,GAAW,CAAZ,CAAV;AAA0B;AAErD,AAAO,SAASwX,GAAT,CAAamT,KAAb,EAAoBrB,CAApB,EAAuB;AAC5B,MAAIqC,GAAG,GAAG,EAAV;;AACA,OAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Z,KAAK,CAAC3qB,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC4a,GAAG,CAAC5a,CAAD,CAAH,GAASuY,CAAC,CAACqB,KAAK,CAAC5Z,CAAD,CAAN,EAAWA,CAAX,CAAV;;AACvC,SAAO4a,GAAP;AACD;AAED,AAAO,SAASC,YAAT,CAAsBjB,KAAtB,EAA6BzuB,KAA7B,EAAoC2vB,KAApC,EAA2C;AAChD,MAAIT,GAAG,GAAG,CAAV;AAAA,MAAaU,QAAQ,GAAGD,KAAK,CAAC3vB,KAAD,CAA7B;;AACA,SAAOkvB,GAAG,GAAGT,KAAK,CAAC3qB,MAAZ,IAAsB6rB,KAAK,CAAClB,KAAK,CAACS,GAAD,CAAN,CAAL,IAAqBU,QAAlD,EAA4DV,GAAG;;AAC/DT,EAAAA,KAAK,CAACxZ,MAAN,CAAaia,GAAb,EAAkB,CAAlB,EAAqBlvB,KAArB;AACD;;AAED,SAAS6vB,OAAT,GAAmB;;AAEnB,AAAO,SAASC,SAAT,CAAmBC,IAAnB,EAAyBC,KAAzB,EAAgC;AACrC,MAAIC,IAAJ;;AACA,MAAItkB,MAAM,CAACukB,MAAX,EAAmB;AACjBD,IAAAA,IAAI,GAAGtkB,MAAM,CAACukB,MAAP,CAAcH,IAAd,CAAP;AACD,GAFD,MAEO;AACLF,IAAAA,OAAO,CAAC7V,SAAR,GAAoB+V,IAApB;AACAE,IAAAA,IAAI,GAAG,IAAIJ,OAAJ,EAAP;AACD;;AACD,MAAIG,KAAJ,EAAW1C,OAAO,CAAC0C,KAAD,EAAQC,IAAR,CAAP;AACX,SAAOA,IAAP;AACD;AAED,IAAIE,0BAA0B,GAAG,2GAAjC;AACA,AAAO,SAASC,eAAT,CAAyBC,EAAzB,EAA6B;AAClC,SAAO,KAAK7L,IAAL,CAAU6L,EAAV,KAAiBA,EAAE,GAAG,MAAL,KACrBA,EAAE,CAACpX,WAAH,MAAoBoX,EAAE,CAAChhB,WAAH,EAApB,IAAwC8gB,0BAA0B,CAAC3L,IAA3B,CAAgC6L,EAAhC,CADnB,CAAxB;AAED;AACD,AAAO,SAASC,UAAT,CAAoBD,EAApB,EAAwBE,MAAxB,EAAgC;AACrC,MAAI,CAACA,MAAL,EAAa,OAAOH,eAAe,CAACC,EAAD,CAAtB;AACb,MAAIE,MAAM,CAAC/kB,MAAP,CAAcsI,OAAd,CAAsB,KAAtB,IAA+B,CAAC,CAAhC,IAAqCsc,eAAe,CAACC,EAAD,CAAxD,EAA8D,OAAO,IAAP;AAC9D,SAAOE,MAAM,CAAC/L,IAAP,CAAY6L,EAAZ,CAAP;AACD;AAED,AAAO,SAASG,OAAT,CAAiBjD,GAAjB,EAAsB;AAC3B,OAAK,IAAIS,CAAT,IAAcT,GAAd,EAAmB,IAAIA,GAAG,CAACtT,cAAJ,CAAmB+T,CAAnB,KAAyBT,GAAG,CAACS,CAAD,CAAhC,EAAqC,OAAO,KAAP;;AACxD,SAAO,IAAP;AACD;AAGD;AACA;AACA;AACA;;AACA,IAAIyC,cAAc,GAAG,44DAArB;AACA,AAAO,SAASC,eAAT,CAAyBL,EAAzB,EAA6B;AAAE,SAAOA,EAAE,CAACnX,UAAH,CAAc,CAAd,KAAoB,GAApB,IAA2BuX,cAAc,CAACjM,IAAf,CAAoB6L,EAApB,CAAlC;AAA2D;;AAGjG,AAAO,SAASM,kBAAT,CAA4BC,GAA5B,EAAiC1B,GAAjC,EAAsCpK,GAAtC,EAA2C;AAChD,SAAO,CAACA,GAAG,GAAG,CAAN,GAAUoK,GAAG,GAAG,CAAhB,GAAoBA,GAAG,GAAG0B,GAAG,CAAC9sB,MAA/B,KAA0C4sB,eAAe,CAACE,GAAG,CAACC,MAAJ,CAAW3B,GAAX,CAAD,CAAhE,EAAmFA,GAAG,IAAIpK,GAAP;;AACnF,SAAOoK,GAAP;AACD;AAGD;AACA;;AACA,AAAO,SAAS4B,SAAT,CAAmBC,IAAnB,EAAyB5N,IAAzB,EAA+B6N,EAA/B,EAAmC;AACxC;AACA;AACA,MAAIlM,GAAG,GAAG3B,IAAI,GAAG6N,EAAP,GAAY,CAAC,CAAb,GAAiB,CAA3B;;AACA,WAAS;AACP,QAAI7N,IAAI,IAAI6N,EAAZ,EAAgB,OAAO7N,IAAP;AAChB,QAAI8N,IAAI,GAAG,CAAC9N,IAAI,GAAG6N,EAAR,IAAc,CAAzB;AAAA,QAA4BE,GAAG,GAAGpM,GAAG,GAAG,CAAN,GAAUlY,IAAI,CAACukB,IAAL,CAAUF,IAAV,CAAV,GAA4BrkB,IAAI,CAACC,KAAL,CAAWokB,IAAX,CAA9D;AACA,QAAIC,GAAG,IAAI/N,IAAX,EAAiB,OAAO4N,IAAI,CAACG,GAAD,CAAJ,GAAY/N,IAAZ,GAAmB6N,EAA1B;AACjB,QAAID,IAAI,CAACG,GAAD,CAAR,EAAeF,EAAE,GAAGE,GAAL,CAAf,KACK/N,IAAI,GAAG+N,GAAG,GAAGpM,GAAb;AACN;AACF;;ACnKM,SAASsM,mBAAT,CAA6BC,KAA7B,EAAoClO,IAApC,EAA0C6N,EAA1C,EAA8C5D,CAA9C,EAAiD;AACtD,MAAI,CAACiE,KAAL,EAAY,OAAOjE,CAAC,CAACjK,IAAD,EAAO6N,EAAP,EAAW,KAAX,EAAkB,CAAlB,CAAR;AACZ,MAAIM,KAAK,GAAG,KAAZ;;AACA,OAAK,IAAIzc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwc,KAAK,CAACvtB,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,QAAI0c,IAAI,GAAGF,KAAK,CAACxc,CAAD,CAAhB;;AACA,QAAI0c,IAAI,CAACpO,IAAL,GAAY6N,EAAZ,IAAkBO,IAAI,CAACP,EAAL,GAAU7N,IAA5B,IAAoCA,IAAI,IAAI6N,EAAR,IAAcO,IAAI,CAACP,EAAL,IAAW7N,IAAjE,EAAuE;AACrEiK,MAAAA,CAAC,CAACxgB,IAAI,CAAC4kB,GAAL,CAASD,IAAI,CAACpO,IAAd,EAAoBA,IAApB,CAAD,EAA4BvW,IAAI,CAACyiB,GAAL,CAASkC,IAAI,CAACP,EAAd,EAAkBA,EAAlB,CAA5B,EAAmDO,IAAI,CAACE,KAAL,IAAc,CAAd,GAAkB,KAAlB,GAA0B,KAA7E,EAAoF5c,CAApF,CAAD;AACAyc,MAAAA,KAAK,GAAG,IAAR;AACD;AACF;;AACD,MAAI,CAACA,KAAL,EAAYlE,CAAC,CAACjK,IAAD,EAAO6N,EAAP,EAAW,KAAX,CAAD;AACb;AAED,AAAO,IAAIU,SAAS,GAAG,IAAhB;AACP,AAAO,SAASC,aAAT,CAAuBN,KAAvB,EAA8BhB,EAA9B,EAAkCuB,MAAlC,EAA0C;AAC/C,MAAIN,KAAJ;AACAI,EAAAA,SAAS,GAAG,IAAZ;;AACA,OAAK,IAAI7c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwc,KAAK,CAACvtB,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,QAAIgd,GAAG,GAAGR,KAAK,CAACxc,CAAD,CAAf;AACA,QAAIgd,GAAG,CAAC1O,IAAJ,GAAWkN,EAAX,IAAiBwB,GAAG,CAACb,EAAJ,GAASX,EAA9B,EAAkC,OAAOxb,CAAP;;AAClC,QAAIgd,GAAG,CAACb,EAAJ,IAAUX,EAAd,EAAkB;AAChB,UAAIwB,GAAG,CAAC1O,IAAJ,IAAY0O,GAAG,CAACb,EAAhB,IAAsBY,MAAM,IAAI,QAApC,EAA8CN,KAAK,GAAGzc,CAAR,CAA9C,KACK6c,SAAS,GAAG7c,CAAZ;AACN;;AACD,QAAIgd,GAAG,CAAC1O,IAAJ,IAAYkN,EAAhB,EAAoB;AAClB,UAAIwB,GAAG,CAAC1O,IAAJ,IAAY0O,GAAG,CAACb,EAAhB,IAAsBY,MAAM,IAAI,QAApC,EAA8CN,KAAK,GAAGzc,CAAR,CAA9C,KACK6c,SAAS,GAAG7c,CAAZ;AACN;AACF;;AACD,SAAOyc,KAAK,IAAI,IAAT,GAAgBA,KAAhB,GAAwBI,SAA/B;AACD;AAGD;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AACA,IAAII,YAAY,GAAI,YAAW;AAC7B;AACA,MAAIC,QAAQ,GAAG,0PAAf,CAF6B;;AAI7B,MAAIC,WAAW,GAAG,4PAAlB;;AACA,WAASC,QAAT,CAAkBlZ,IAAlB,EAAwB;AACtB,QAAIA,IAAI,IAAI,IAAZ,EAAkB,OAAOgZ,QAAQ,CAAClB,MAAT,CAAgB9X,IAAhB,CAAP,CAAlB,KACK,IAAI,SAASA,IAAT,IAAiBA,IAAI,IAAI,KAA7B,EAAoC,OAAO,GAAP,CAApC,KACA,IAAI,SAASA,IAAT,IAAiBA,IAAI,IAAI,KAA7B,EAAoC,OAAOiZ,WAAW,CAACnB,MAAZ,CAAmB9X,IAAI,GAAG,KAA1B,CAAP,CAApC,KACA,IAAI,SAASA,IAAT,IAAiBA,IAAI,IAAI,KAA7B,EAAoC,OAAO,GAAP,CAApC,KACA,IAAI,UAAUA,IAAV,IAAkBA,IAAI,IAAI,MAA9B,EAAsC,OAAO,GAAP,CAAtC,KACA,IAAIA,IAAI,IAAI,MAAZ,EAAoB,OAAO,GAAP,CAApB,KACA,OAAO,GAAP;AACN;;AAED,MAAImZ,MAAM,GAAG,2CAAb;AACA,MAAIC,SAAS,GAAG,QAAhB;AAAA,MAA0BC,QAAQ,GAAG,OAArC;AAAA,MAA8CC,YAAY,GAAG,QAA7D;AAAA,MAAuEC,WAAW,GAAG,MAArF;;AAEA,WAASC,QAAT,CAAkBd,KAAlB,EAAyBtO,IAAzB,EAA+B6N,EAA/B,EAAmC;AACjC,SAAKS,KAAL,GAAaA,KAAb;AACA,SAAKtO,IAAL,GAAYA,IAAZ;AAAkB,SAAK6N,EAAL,GAAUA,EAAV;AACnB;;AAED,SAAO,UAASJ,GAAT,EAAc/e,SAAd,EAAyB;AAC9B,QAAI2gB,SAAS,GAAG3gB,SAAS,IAAI,KAAb,GAAqB,GAArB,GAA2B,GAA3C;AAEA,QAAI+e,GAAG,CAAC9sB,MAAJ,IAAc,CAAd,IAAmB+N,SAAS,IAAI,KAAb,IAAsB,CAACqgB,MAAM,CAAC1N,IAAP,CAAYoM,GAAZ,CAA9C,EAAgE,OAAO,KAAP;AAChE,QAAIxV,GAAG,GAAGwV,GAAG,CAAC9sB,MAAd;AAAA,QAAsB2uB,KAAK,GAAG,EAA9B;;AACA,SAAK,IAAI5d,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuG,GAApB,EAAyB,EAAEvG,CAA3B,EACE4d,KAAK,CAACze,IAAN,CAAWie,QAAQ,CAACrB,GAAG,CAAC1X,UAAJ,CAAerE,CAAf,CAAD,CAAnB,EAN4B;AAS9B;AACA;AACA;;;AACA,SAAK,IAAIA,CAAC,GAAG,CAAR,EAAW6d,IAAI,GAAGF,SAAvB,EAAkC3d,CAAC,GAAGuG,GAAtC,EAA2C,EAAEvG,CAA7C,EAAgD;AAC9C,UAAI/U,IAAI,GAAG2yB,KAAK,CAAC5d,CAAD,CAAhB;AACA,UAAI/U,IAAI,IAAI,GAAZ,EAAiB2yB,KAAK,CAAC5d,CAAD,CAAL,GAAW6d,IAAX,CAAjB,KACKA,IAAI,GAAG5yB,IAAP;AACN,KAhB6B;AAmB9B;AACA;AACA;AACA;;;AACA,SAAK,IAAI+U,CAAC,GAAG,CAAR,EAAWgd,GAAG,GAAGW,SAAtB,EAAiC3d,CAAC,GAAGuG,GAArC,EAA0C,EAAEvG,CAA5C,EAA+C;AAC7C,UAAI/U,IAAI,GAAG2yB,KAAK,CAAC5d,CAAD,CAAhB;AACA,UAAI/U,IAAI,IAAI,GAAR,IAAe+xB,GAAG,IAAI,GAA1B,EAA+BY,KAAK,CAAC5d,CAAD,CAAL,GAAW,GAAX,CAA/B,KACK,IAAIud,QAAQ,CAAC5N,IAAT,CAAc1kB,IAAd,CAAJ,EAAyB;AAAE+xB,QAAAA,GAAG,GAAG/xB,IAAN;AAAY,YAAIA,IAAI,IAAI,GAAZ,EAAiB2yB,KAAK,CAAC5d,CAAD,CAAL,GAAW,GAAX;AAAgB;AAC9E,KA3B6B;AA8B9B;AACA;;;AACA,SAAK,IAAIA,CAAC,GAAG,CAAR,EAAW6d,IAAI,GAAGD,KAAK,CAAC,CAAD,CAA5B,EAAiC5d,CAAC,GAAGuG,GAAG,GAAG,CAA3C,EAA8C,EAAEvG,CAAhD,EAAmD;AACjD,UAAI/U,IAAI,GAAG2yB,KAAK,CAAC5d,CAAD,CAAhB;AACA,UAAI/U,IAAI,IAAI,GAAR,IAAe4yB,IAAI,IAAI,GAAvB,IAA8BD,KAAK,CAAC5d,CAAC,GAAC,CAAH,CAAL,IAAc,GAAhD,EAAqD4d,KAAK,CAAC5d,CAAD,CAAL,GAAW,GAAX,CAArD,KACK,IAAI/U,IAAI,IAAI,GAAR,IAAe4yB,IAAI,IAAID,KAAK,CAAC5d,CAAC,GAAC,CAAH,CAA5B,KACC6d,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GADxB,CAAJ,EACkCD,KAAK,CAAC5d,CAAD,CAAL,GAAW6d,IAAX;AACvCA,MAAAA,IAAI,GAAG5yB,IAAP;AACD,KAtC6B;AAyC9B;AACA;AACA;;;AACA,SAAK,IAAI+U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuG,GAApB,EAAyB,EAAEvG,CAA3B,EAA8B;AAC5B,UAAI/U,IAAI,GAAG2yB,KAAK,CAAC5d,CAAD,CAAhB;AACA,UAAI/U,IAAI,IAAI,GAAZ,EAAiB2yB,KAAK,CAAC5d,CAAD,CAAL,GAAW,GAAX,CAAjB,KACK,IAAI/U,IAAI,IAAI,GAAZ,EAAiB;AACpB,YAAI4W,GAAJ;;AACA,aAAKA,GAAG,GAAG7B,CAAC,GAAG,CAAf,EAAkB6B,GAAG,GAAG0E,GAAN,IAAaqX,KAAK,CAAC/b,GAAD,CAAL,IAAc,GAA7C,EAAkD,EAAEA,GAApD,EAAyD;;AACzD,YAAIhU,OAAO,GAAImS,CAAC,IAAI4d,KAAK,CAAC5d,CAAC,GAAC,CAAH,CAAL,IAAc,GAApB,IAA6B6B,GAAG,GAAG0E,GAAN,IAAaqX,KAAK,CAAC/b,GAAD,CAAL,IAAc,GAAxD,GAA+D,GAA/D,GAAqE,GAAnF;;AACA,aAAK,IAAIic,CAAC,GAAG9d,CAAb,EAAgB8d,CAAC,GAAGjc,GAApB,EAAyB,EAAEic,CAA3B,EAA8BF,KAAK,CAACE,CAAD,CAAL,GAAWjwB,OAAX;;AAC9BmS,QAAAA,CAAC,GAAG6B,GAAG,GAAG,CAAV;AACD;AACF,KAtD6B;AAyD9B;AACA;;;AACA,SAAK,IAAI7B,CAAC,GAAG,CAAR,EAAWgd,GAAG,GAAGW,SAAtB,EAAiC3d,CAAC,GAAGuG,GAArC,EAA0C,EAAEvG,CAA5C,EAA+C;AAC7C,UAAI/U,IAAI,GAAG2yB,KAAK,CAAC5d,CAAD,CAAhB;AACA,UAAIgd,GAAG,IAAI,GAAP,IAAc/xB,IAAI,IAAI,GAA1B,EAA+B2yB,KAAK,CAAC5d,CAAD,CAAL,GAAW,GAAX,CAA/B,KACK,IAAIud,QAAQ,CAAC5N,IAAT,CAAc1kB,IAAd,CAAJ,EAAyB+xB,GAAG,GAAG/xB,IAAN;AAC/B,KA/D6B;AAkE9B;AACA;AACA;AACA;AACA;;;AACA,SAAK,IAAI+U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuG,GAApB,EAAyB,EAAEvG,CAA3B,EAA8B;AAC5B,UAAIsd,SAAS,CAAC3N,IAAV,CAAeiO,KAAK,CAAC5d,CAAD,CAApB,CAAJ,EAA8B;AAC5B,YAAI6B,GAAJ;;AACA,aAAKA,GAAG,GAAG7B,CAAC,GAAG,CAAf,EAAkB6B,GAAG,GAAG0E,GAAN,IAAa+W,SAAS,CAAC3N,IAAV,CAAeiO,KAAK,CAAC/b,GAAD,CAApB,CAA/B,EAA2D,EAAEA,GAA7D,EAAkE;;AAClE,YAAIkc,MAAM,GAAG,CAAC/d,CAAC,GAAG4d,KAAK,CAAC5d,CAAC,GAAC,CAAH,CAAR,GAAgB2d,SAAlB,KAAgC,GAA7C;AACA,YAAI1H,KAAK,GAAG,CAACpU,GAAG,GAAG0E,GAAN,GAAYqX,KAAK,CAAC/b,GAAD,CAAjB,GAAyB8b,SAA1B,KAAwC,GAApD;AACA,YAAI9vB,OAAO,GAAGkwB,MAAM,IAAI9H,KAAV,GAAmB8H,MAAM,GAAG,GAAH,GAAS,GAAlC,GAAyCJ,SAAvD;;AACA,aAAK,IAAIG,CAAC,GAAG9d,CAAb,EAAgB8d,CAAC,GAAGjc,GAApB,EAAyB,EAAEic,CAA3B,EAA8BF,KAAK,CAACE,CAAD,CAAL,GAAWjwB,OAAX;;AAC9BmS,QAAAA,CAAC,GAAG6B,GAAG,GAAG,CAAV;AACD;AACF,KAjF6B;AAoF9B;AACA;AACA;AACA;;;AACA,QAAI2a,KAAK,GAAG,EAAZ;AAAA,QAAgBwB,CAAhB;;AACA,SAAK,IAAIhe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuG,GAApB,GAA0B;AACxB,UAAIiX,YAAY,CAAC7N,IAAb,CAAkBiO,KAAK,CAAC5d,CAAD,CAAvB,CAAJ,EAAiC;AAC/B,YAAI+W,KAAK,GAAG/W,CAAZ;;AACA,aAAK,EAAEA,CAAP,EAAUA,CAAC,GAAGuG,GAAJ,IAAWiX,YAAY,CAAC7N,IAAb,CAAkBiO,KAAK,CAAC5d,CAAD,CAAvB,CAArB,EAAkD,EAAEA,CAApD,EAAuD;;AACvDwc,QAAAA,KAAK,CAACrd,IAAN,CAAW,IAAIue,QAAJ,CAAa,CAAb,EAAgB3G,KAAhB,EAAuB/W,CAAvB,CAAX;AACD,OAJD,MAIO;AACL,YAAIqa,GAAG,GAAGra,CAAV;AAAA,YAAaie,EAAE,GAAGzB,KAAK,CAACvtB,MAAxB;AAAA,YAAgCivB,KAAK,GAAGlhB,SAAS,IAAI,KAAb,GAAqB,CAArB,GAAyB,CAAjE;;AACA,aAAK,EAAEgD,CAAP,EAAUA,CAAC,GAAGuG,GAAJ,IAAWqX,KAAK,CAAC5d,CAAD,CAAL,IAAY,GAAjC,EAAsC,EAAEA,CAAxC,EAA2C;;AAC3C,aAAK,IAAI8d,CAAC,GAAGzD,GAAb,EAAkByD,CAAC,GAAG9d,CAAtB,GAA0B;AACxB,cAAIyd,WAAW,CAAC9N,IAAZ,CAAiBiO,KAAK,CAACE,CAAD,CAAtB,CAAJ,EAAgC;AAC9B,gBAAIzD,GAAG,GAAGyD,CAAV,EAAa;AAAEtB,cAAAA,KAAK,CAACpc,MAAN,CAAa6d,EAAb,EAAiB,CAAjB,EAAoB,IAAIP,QAAJ,CAAa,CAAb,EAAgBrD,GAAhB,EAAqByD,CAArB,CAApB;AAA8CG,cAAAA,EAAE,IAAIC,KAAN;AAAa;;AAC1E,gBAAIC,MAAM,GAAGL,CAAb;;AACA,iBAAK,EAAEA,CAAP,EAAUA,CAAC,GAAG9d,CAAJ,IAASyd,WAAW,CAAC9N,IAAZ,CAAiBiO,KAAK,CAACE,CAAD,CAAtB,CAAnB,EAA+C,EAAEA,CAAjD,EAAoD;;AACpDtB,YAAAA,KAAK,CAACpc,MAAN,CAAa6d,EAAb,EAAiB,CAAjB,EAAoB,IAAIP,QAAJ,CAAa,CAAb,EAAgBS,MAAhB,EAAwBL,CAAxB,CAApB;AACAG,YAAAA,EAAE,IAAIC,KAAN;AACA7D,YAAAA,GAAG,GAAGyD,CAAN;AACD,WAPD,MAOO,EAAEA,CAAF;AACR;;AACD,YAAIzD,GAAG,GAAGra,CAAV,EAAawc,KAAK,CAACpc,MAAN,CAAa6d,EAAb,EAAiB,CAAjB,EAAoB,IAAIP,QAAJ,CAAa,CAAb,EAAgBrD,GAAhB,EAAqBra,CAArB,CAApB;AACd;AACF;;AACD,QAAIhD,SAAS,IAAI,KAAjB,EAAwB;AACtB,UAAIwf,KAAK,CAAC,CAAD,CAAL,CAASI,KAAT,IAAkB,CAAlB,KAAwBoB,CAAC,GAAGjC,GAAG,CAAC7I,KAAJ,CAAU,MAAV,CAA5B,CAAJ,EAAoD;AAClDsJ,QAAAA,KAAK,CAAC,CAAD,CAAL,CAASlO,IAAT,GAAgB0P,CAAC,CAAC,CAAD,CAAD,CAAK/uB,MAArB;AACAutB,QAAAA,KAAK,CAAC4B,OAAN,CAAc,IAAIV,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBM,CAAC,CAAC,CAAD,CAAD,CAAK/uB,MAAxB,CAAd;AACD;;AACD,UAAI0rB,GAAG,CAAC6B,KAAD,CAAH,CAAWI,KAAX,IAAoB,CAApB,KAA0BoB,CAAC,GAAGjC,GAAG,CAAC7I,KAAJ,CAAU,MAAV,CAA9B,CAAJ,EAAsD;AACpDyH,QAAAA,GAAG,CAAC6B,KAAD,CAAH,CAAWL,EAAX,IAAiB6B,CAAC,CAAC,CAAD,CAAD,CAAK/uB,MAAtB;AACAutB,QAAAA,KAAK,CAACrd,IAAN,CAAW,IAAIue,QAAJ,CAAa,CAAb,EAAgBnX,GAAG,GAAGyX,CAAC,CAAC,CAAD,CAAD,CAAK/uB,MAA3B,EAAmCsX,GAAnC,CAAX;AACD;AACF;;AAED,WAAOvJ,SAAS,IAAI,KAAb,GAAqBwf,KAAK,CAAC6B,OAAN,EAArB,GAAuC7B,KAA9C;AACD,GA1HD;AA2HD,CAlJkB,EAAnB;AAqJA;AACA;;;AACA,AAAO,SAAS8B,QAAT,CAAkBC,IAAlB,EAAwBvhB,SAAxB,EAAmC;AACxC,MAAIwf,KAAK,GAAG+B,IAAI,CAAC/B,KAAjB;AACA,MAAIA,KAAK,IAAI,IAAb,EAAmBA,KAAK,GAAG+B,IAAI,CAAC/B,KAAL,GAAaS,YAAY,CAACsB,IAAI,CAACpkB,IAAN,EAAY6C,SAAZ,CAAjC;AACnB,SAAOwf,KAAP;AACD;;ACjND;AACA;;AAEA,MAAMgC,UAAU,GAAG,EAAnB;AAEA,AAAO,IAAIC,EAAE,GAAG,UAASC,OAAT,EAAkBzzB,IAAlB,EAAwBstB,CAAxB,EAA2B;AACzC,MAAImG,OAAO,CAACxqB,gBAAZ,EAA8B;AAC5BwqB,IAAAA,OAAO,CAACxqB,gBAAR,CAAyBjJ,IAAzB,EAA+BstB,CAA/B,EAAkC,KAAlC;AACD,GAFD,MAEO,IAAImG,OAAO,CAAChf,WAAZ,EAAyB;AAC9Bgf,IAAAA,OAAO,CAAChf,WAAR,CAAoB,OAAOzU,IAA3B,EAAiCstB,CAAjC;AACD,GAFM,MAEA;AACL,QAAI9R,GAAG,GAAGiY,OAAO,CAAC7a,SAAR,KAAsB6a,OAAO,CAAC7a,SAAR,GAAoB,EAA1C,CAAV;AACA4C,IAAAA,GAAG,CAACxb,IAAD,CAAH,GAAY,CAACwb,GAAG,CAACxb,IAAD,CAAH,IAAauzB,UAAd,EAA0B7e,MAA1B,CAAiC4Y,CAAjC,CAAZ;AACD;AACF,CATM;AAWP,AAAO,SAASoG,WAAT,CAAqBD,OAArB,EAA8BzzB,IAA9B,EAAoC;AACzC,SAAOyzB,OAAO,CAAC7a,SAAR,IAAqB6a,OAAO,CAAC7a,SAAR,CAAkB5Y,IAAlB,CAArB,IAAgDuzB,UAAvD;AACD;AAED,AAAO,SAASI,GAAT,CAAaF,OAAb,EAAsBzzB,IAAtB,EAA4BstB,CAA5B,EAA+B;AACpC,MAAImG,OAAO,CAACllB,mBAAZ,EAAiC;AAC/BklB,IAAAA,OAAO,CAACllB,mBAAR,CAA4BvO,IAA5B,EAAkCstB,CAAlC,EAAqC,KAArC;AACD,GAFD,MAEO,IAAImG,OAAO,CAACG,WAAZ,EAAyB;AAC9BH,IAAAA,OAAO,CAACG,WAAR,CAAoB,OAAO5zB,IAA3B,EAAiCstB,CAAjC;AACD,GAFM,MAEA;AACL,QAAI9R,GAAG,GAAGiY,OAAO,CAAC7a,SAAlB;AAAA,QAA6BvJ,GAAG,GAAGmM,GAAG,IAAIA,GAAG,CAACxb,IAAD,CAA7C;;AACA,QAAIqP,GAAJ,EAAS;AACP,UAAIa,KAAK,GAAG8D,OAAO,CAAC3E,GAAD,EAAMie,CAAN,CAAnB;AACA,UAAIpd,KAAK,GAAG,CAAC,CAAb,EACEsL,GAAG,CAACxb,IAAD,CAAH,GAAYqP,GAAG,CAACS,KAAJ,CAAU,CAAV,EAAaI,KAAb,EAAoBwE,MAApB,CAA2BrF,GAAG,CAACS,KAAJ,CAAUI,KAAK,GAAG,CAAlB,CAA3B,CAAZ;AACH;AACF;AACF;AAED,AAAO,SAAS2jB,MAAT,CAAgBJ,OAAhB,EAAyBzzB;AAAK;AAA9B,EAA+C;AACpD,MAAIia,QAAQ,GAAGyZ,WAAW,CAACD,OAAD,EAAUzzB,IAAV,CAA1B;AACA,MAAI,CAACia,QAAQ,CAACjW,MAAd,EAAsB;AACtB,MAAI8W,IAAI,GAAGnP,KAAK,CAACuO,SAAN,CAAgBpK,KAAhB,CAAsBC,IAAtB,CAA2B8K,SAA3B,EAAsC,CAAtC,CAAX;;AACA,OAAK,IAAI9F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkF,QAAQ,CAACjW,MAA7B,EAAqC,EAAE+Q,CAAvC,EAA0CkF,QAAQ,CAAClF,CAAD,CAAR,CAAYwY,KAAZ,CAAkB,IAAlB,EAAwBzS,IAAxB;AAC3C;AAGD;AACA;;AACA,AAAO,SAASgZ,cAAT,CAAwBC,EAAxB,EAA4BxX,CAA5B,EAA+ByX,QAA/B,EAAyC;AAC9C,MAAI,OAAOzX,CAAP,IAAY,QAAhB,EACEA,CAAC,GAAG;AAACvc,IAAAA,IAAI,EAAEuc,CAAP;AAAU7O,IAAAA,cAAc,EAAE,YAAW;AAAE,WAAKumB,gBAAL,GAAwB,IAAxB;AAA8B;AAArE,GAAJ;AACFJ,EAAAA,MAAM,CAACE,EAAD,EAAKC,QAAQ,IAAIzX,CAAC,CAACvc,IAAnB,EAAyB+zB,EAAzB,EAA6BxX,CAA7B,CAAN;AACA,SAAO2X,kBAAkB,CAAC3X,CAAD,CAAlB,IAAyBA,CAAC,CAAC4X,gBAAlC;AACD;AAED,AAAO,SAASC,oBAAT,CAA8BL,EAA9B,EAAkC;AACvC,MAAI1kB,GAAG,GAAG0kB,EAAE,CAACnb,SAAH,IAAgBmb,EAAE,CAACnb,SAAH,CAAayb,cAAvC;AACA,MAAI,CAAChlB,GAAL,EAAU;AACV,MAAImf,GAAG,GAAGuF,EAAE,CAACO,KAAH,CAASC,sBAAT,KAAoCR,EAAE,CAACO,KAAH,CAASC,sBAAT,GAAkC,EAAtE,CAAV;;AACA,OAAK,IAAIxf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1F,GAAG,CAACrL,MAAxB,EAAgC,EAAE+Q,CAAlC,EAAqC,IAAIf,OAAO,CAACwa,GAAD,EAAMnf,GAAG,CAAC0F,CAAD,CAAT,CAAP,IAAwB,CAAC,CAA7B,EACnCyZ,GAAG,CAACta,IAAJ,CAAS7E,GAAG,CAAC0F,CAAD,CAAZ;AACH;AAED,AAAO,SAASyf,UAAT,CAAoBf,OAApB,EAA6BzzB,IAA7B,EAAmC;AACxC,SAAO0zB,WAAW,CAACD,OAAD,EAAUzzB,IAAV,CAAX,CAA2BgE,MAA3B,GAAoC,CAA3C;AACD;AAGD;;AACA,AAAO,SAASywB,UAAT,CAAoBC,IAApB,EAA0B;AAC/BA,EAAAA,IAAI,CAACxa,SAAL,CAAesZ,EAAf,GAAoB,UAASxzB,IAAT,EAAestB,CAAf,EAAkB;AAACkG,IAAAA,EAAE,CAAC,IAAD,EAAOxzB,IAAP,EAAastB,CAAb,CAAF;AAAkB,GAAzD;;AACAoH,EAAAA,IAAI,CAACxa,SAAL,CAAeyZ,GAAf,GAAqB,UAAS3zB,IAAT,EAAestB,CAAf,EAAkB;AAACqG,IAAAA,GAAG,CAAC,IAAD,EAAO3zB,IAAP,EAAastB,CAAb,CAAH;AAAmB,GAA3D;AACD;AAGD;;AAEA,AAAO,SAASqH,gBAAT,CAA0BpY,CAA1B,EAA6B;AAClC,MAAIA,CAAC,CAAC7O,cAAN,EAAsB6O,CAAC,CAAC7O,cAAF,GAAtB,KACK6O,CAAC,CAACP,WAAF,GAAgB,KAAhB;AACN;AACD,AAAO,SAAS4Y,iBAAT,CAA2BrY,CAA3B,EAA8B;AACnC,MAAIA,CAAC,CAACN,eAAN,EAAuBM,CAAC,CAACN,eAAF,GAAvB,KACKM,CAAC,CAACL,YAAF,GAAiB,IAAjB;AACN;AACD,AAAO,SAASgY,kBAAT,CAA4B3X,CAA5B,EAA+B;AACpC,SAAOA,CAAC,CAAC0X,gBAAF,IAAsB,IAAtB,GAA6B1X,CAAC,CAAC0X,gBAA/B,GAAkD1X,CAAC,CAACP,WAAF,IAAiB,KAA1E;AACD;AACD,AAAO,SAAS6Y,MAAT,CAAgBtY,CAAhB,EAAmB;AAACoY,EAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AAAqBqY,EAAAA,iBAAiB,CAACrY,CAAD,CAAjB;AAAqB;AAErE,AAAO,SAASuY,QAAT,CAAkBvY,CAAlB,EAAqB;AAAC,SAAOA,CAAC,CAACjN,MAAF,IAAYiN,CAAC,CAAC7C,UAArB;AAAgC;AAC7D,AAAO,SAASqb,QAAT,CAAkBxY,CAAlB,EAAqB;AAC1B,MAAIwQ,CAAC,GAAGxQ,CAAC,CAAC1K,KAAV;;AACA,MAAIkb,CAAC,IAAI,IAAT,EAAe;AACb,QAAIxQ,CAAC,CAACyY,MAAF,GAAW,CAAf,EAAkBjI,CAAC,GAAG,CAAJ,CAAlB,KACK,IAAIxQ,CAAC,CAACyY,MAAF,GAAW,CAAf,EAAkBjI,CAAC,GAAG,CAAJ,CAAlB,KACA,IAAIxQ,CAAC,CAACyY,MAAF,GAAW,CAAf,EAAkBjI,CAAC,GAAG,CAAJ;AACxB;;AACD,MAAI3C,GAAG,IAAI7N,CAAC,CAAC/D,OAAT,IAAoBuU,CAAC,IAAI,CAA7B,EAAgCA,CAAC,GAAG,CAAJ;AAChC,SAAOA,CAAP;AACD;;AClGM,IAAIkI,WAAW,GAAG,YAAW;AAClC;AACA;AACA,MAAI5L,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B,OAAO,KAAP;AAC1B,MAAI4L,GAAG,GAAG3J,GAAG,CAAC,KAAD,CAAb;AACA,SAAO,eAAe2J,GAAf,IAAsB,cAAcA,GAA3C;AACD,CANwB,EAAlB;AAQP,IAAIC,aAAJ;AACA,AAAO,SAASC,gBAAT,CAA0BC,OAA1B,EAAmC;AACxC,MAAIF,aAAa,IAAI,IAArB,EAA2B;AACzB,QAAIzQ,IAAI,GAAG6G,GAAG,CAAC,MAAD,EAAS,QAAT,CAAd;AACAF,IAAAA,oBAAoB,CAACgK,OAAD,EAAU9J,GAAG,CAAC,MAAD,EAAS,CAAC7G,IAAD,EAAOnf,QAAQ,CAACmmB,cAAT,CAAwB,GAAxB,CAAP,CAAT,CAAb,CAApB;AACA,QAAI2J,OAAO,CAACjK,UAAR,CAAmBra,YAAnB,IAAmC,CAAvC,EACEokB,aAAa,GAAGzQ,IAAI,CAAC4Q,WAAL,IAAoB,CAApB,IAAyB5Q,IAAI,CAAC3T,YAAL,GAAoB,CAA7C,IAAkD,EAAEsY,EAAE,IAAIC,UAAU,GAAG,CAArB,CAAlE;AACH;;AACD,MAAIuB,IAAI,GAAGsK,aAAa,GAAG5J,GAAG,CAAC,MAAD,EAAS,QAAT,CAAN,GACtBA,GAAG,CAAC,MAAD,EAAS,QAAT,EAAmB,IAAnB,EAAyB,uDAAzB,CADL;AAEAV,EAAAA,IAAI,CAAC1lB,YAAL,CAAkB,SAAlB,EAA6B,EAA7B;AACA,SAAO0lB,IAAP;AACD;;AAGD,IAAI0K,YAAJ;AACA,AAAO,SAASC,eAAT,CAAyBH,OAAzB,EAAkC;AACvC,MAAIE,YAAY,IAAI,IAApB,EAA0B,OAAOA,YAAP;AAC1B,MAAIE,GAAG,GAAGpK,oBAAoB,CAACgK,OAAD,EAAU9vB,QAAQ,CAACmmB,cAAT,CAAwB,UAAxB,CAAV,CAA9B;AACA,MAAIgK,EAAE,GAAG9J,KAAK,CAAC6J,GAAD,EAAM,CAAN,EAAS,CAAT,CAAL,CAAiBntB,qBAAjB,EAAT;AACA,MAAIqtB,EAAE,GAAG/J,KAAK,CAAC6J,GAAD,EAAM,CAAN,EAAS,CAAT,CAAL,CAAiBntB,qBAAjB,EAAT;AACA2iB,EAAAA,cAAc,CAACoK,OAAD,CAAd;AACA,MAAI,CAACK,EAAD,IAAOA,EAAE,CAACvf,IAAH,IAAWuf,EAAE,CAACrf,KAAzB,EAAgC,OAAO,KAAP,CANO;;AAOvC,SAAOkf,YAAY,GAAII,EAAE,CAACtf,KAAH,GAAWqf,EAAE,CAACrf,KAAd,GAAsB,CAA7C;AACD;AAGD;;AACA,AAAO,IAAIuf,cAAc,GAAG,QAAQ/yB,KAAR,CAAc,IAAd,EAAoBmB,MAApB,IAA8B,CAA9B,GAAkC6pB,MAAM,IAAI;AACtE,MAAIuB,GAAG,GAAG,CAAV;AAAA,MAAanf,MAAM,GAAG,EAAtB;AAAA,MAA0B4lB,CAAC,GAAGhI,MAAM,CAAC7pB,MAArC;;AACA,SAAOorB,GAAG,IAAIyG,CAAd,EAAiB;AACf,QAAIC,EAAE,GAAGjI,MAAM,CAAC7Z,OAAP,CAAe,IAAf,EAAqBob,GAArB,CAAT;AACA,QAAI0G,EAAE,IAAI,CAAC,CAAX,EAAcA,EAAE,GAAGjI,MAAM,CAAC7pB,MAAZ;AACd,QAAIsvB,IAAI,GAAGzF,MAAM,CAAC/d,KAAP,CAAasf,GAAb,EAAkBvB,MAAM,CAACkD,MAAP,CAAc+E,EAAE,GAAG,CAAnB,KAAyB,IAAzB,GAAgCA,EAAE,GAAG,CAArC,GAAyCA,EAA3D,CAAX;AACA,QAAIC,EAAE,GAAGzC,IAAI,CAACtf,OAAL,CAAa,IAAb,CAAT;;AACA,QAAI+hB,EAAE,IAAI,CAAC,CAAX,EAAc;AACZ9lB,MAAAA,MAAM,CAACiE,IAAP,CAAYof,IAAI,CAACxjB,KAAL,CAAW,CAAX,EAAcimB,EAAd,CAAZ;AACA3G,MAAAA,GAAG,IAAI2G,EAAE,GAAG,CAAZ;AACD,KAHD,MAGO;AACL9lB,MAAAA,MAAM,CAACiE,IAAP,CAAYof,IAAZ;AACAlE,MAAAA,GAAG,GAAG0G,EAAE,GAAG,CAAX;AACD;AACF;;AACD,SAAO7lB,MAAP;AACD,CAhB2B,GAgBxB4d,MAAM,IAAIA,MAAM,CAAChrB,KAAP,CAAa,UAAb,CAhBP;AAkBP,AAAO,IAAImzB,YAAY,GAAGrhB,MAAM,CAACshB,YAAP,GAAsBC,EAAE,IAAI;AACpD,MAAI;AAAE,WAAOA,EAAE,CAAC/I,cAAH,IAAqB+I,EAAE,CAAC9I,YAA/B;AAA6C,GAAnD,CACA,OAAM7Q,CAAN,EAAS;AAAE,WAAO,KAAP;AAAc;AAC1B,CAHyB,GAGtB2Z,EAAE,IAAI;AACR,MAAItK,KAAJ;;AACA,MAAI;AAACA,IAAAA,KAAK,GAAGsK,EAAE,CAACC,aAAH,CAAiB7V,SAAjB,CAA2BuL,WAA3B,EAAR;AAAiD,GAAtD,CACA,OAAMtP,CAAN,EAAS;;AACT,MAAI,CAACqP,KAAD,IAAUA,KAAK,CAAC1I,aAAN,MAAyBgT,EAAvC,EAA2C,OAAO,KAAP;AAC3C,SAAOtK,KAAK,CAACwK,gBAAN,CAAuB,YAAvB,EAAqCxK,KAArC,KAA+C,CAAtD;AACD,CATM;AAWP,AAAO,IAAIyK,YAAY,GAAG,CAAC,MAAM;AAC/B,MAAI9Z,CAAC,GAAGgP,GAAG,CAAC,KAAD,CAAX;AACA,MAAI,YAAYhP,CAAhB,EAAmB,OAAO,IAAP;AACnBA,EAAAA,CAAC,CAACpX,YAAF,CAAe,QAAf,EAAyB,SAAzB;AACA,SAAO,OAAOoX,CAAC,CAAC+Z,MAAT,IAAmB,UAA1B;AACD,CALyB,GAAnB;AAOP,IAAIC,cAAc,GAAG,IAArB;AACA,AAAO,SAASC,iBAAT,CAA2BnB,OAA3B,EAAoC;AACzC,MAAIkB,cAAc,IAAI,IAAtB,EAA4B,OAAOA,cAAP;AAC5B,MAAI1L,IAAI,GAAGQ,oBAAoB,CAACgK,OAAD,EAAU9J,GAAG,CAAC,MAAD,EAAS,GAAT,CAAb,CAA/B;AACA,MAAIkL,MAAM,GAAG5L,IAAI,CAACviB,qBAAL,EAAb;AACA,MAAIouB,SAAS,GAAG9K,KAAK,CAACf,IAAD,EAAO,CAAP,EAAU,CAAV,CAAL,CAAkBviB,qBAAlB,EAAhB;AACA,SAAOiuB,cAAc,GAAGzpB,IAAI,CAAC6pB,GAAL,CAASF,MAAM,CAACtgB,IAAP,GAAcugB,SAAS,CAACvgB,IAAjC,IAAyC,CAAjE;AACD;;AChFM,IAAIygB,KAAK,GAAG,EAAZ;AAAA,IAAgBC,SAAS,GAAG,EAA5B;AAGP;AACA;;AACA,AAAO,SAASC,UAAT,CAAoB9Y,IAApB,EAA0B+Y,IAA1B,EAAgC;AACrC,MAAIlc,SAAS,CAAC7W,MAAV,GAAmB,CAAvB,EACE+yB,IAAI,CAACC,YAAL,GAAoBrrB,KAAK,CAACuO,SAAN,CAAgBpK,KAAhB,CAAsBC,IAAtB,CAA2B8K,SAA3B,EAAsC,CAAtC,CAApB;AACF+b,EAAAA,KAAK,CAAC5Y,IAAD,CAAL,GAAc+Y,IAAd;AACD;AAED,AAAO,SAASE,UAAT,CAAoBC,IAApB,EAA0BC,IAA1B,EAAgC;AACrCN,EAAAA,SAAS,CAACK,IAAD,CAAT,GAAkBC,IAAlB;AACD;AAGD;;AACA,AAAO,SAASC,WAAT,CAAqBD,IAArB,EAA2B;AAChC,MAAI,OAAOA,IAAP,IAAe,QAAf,IAA2BN,SAAS,CAAC1c,cAAV,CAAyBgd,IAAzB,CAA/B,EAA+D;AAC7DA,IAAAA,IAAI,GAAGN,SAAS,CAACM,IAAD,CAAhB;AACD,GAFD,MAEO,IAAIA,IAAI,IAAI,OAAOA,IAAI,CAACnZ,IAAZ,IAAoB,QAA5B,IAAwC6Y,SAAS,CAAC1c,cAAV,CAAyBgd,IAAI,CAACnZ,IAA9B,CAA5C,EAAiF;AACtF,QAAIwT,KAAK,GAAGqF,SAAS,CAACM,IAAI,CAACnZ,IAAN,CAArB;AACA,QAAI,OAAOwT,KAAP,IAAgB,QAApB,EAA8BA,KAAK,GAAG;AAACxT,MAAAA,IAAI,EAAEwT;AAAP,KAAR;AAC9B2F,IAAAA,IAAI,GAAGnH,SAAS,CAACwB,KAAD,EAAQ2F,IAAR,CAAhB;AACAA,IAAAA,IAAI,CAACnZ,IAAL,GAAYwT,KAAK,CAACxT,IAAlB;AACD,GALM,MAKA,IAAI,OAAOmZ,IAAP,IAAe,QAAf,IAA2B,0BAA0BzS,IAA1B,CAA+ByS,IAA/B,CAA/B,EAAqE;AAC1E,WAAOC,WAAW,CAAC,iBAAD,CAAlB;AACD,GAFM,MAEA,IAAI,OAAOD,IAAP,IAAe,QAAf,IAA2B,2BAA2BzS,IAA3B,CAAgCyS,IAAhC,CAA/B,EAAsE;AAC3E,WAAOC,WAAW,CAAC,kBAAD,CAAlB;AACD;;AACD,MAAI,OAAOD,IAAP,IAAe,QAAnB,EAA6B,OAAO;AAACnZ,IAAAA,IAAI,EAAEmZ;AAAP,GAAP,CAA7B,KACK,OAAOA,IAAI,IAAI;AAACnZ,IAAAA,IAAI,EAAE;AAAP,GAAf;AACN;AAGD;;AACA,AAAO,SAASqZ,OAAT,CAAiBlW,OAAjB,EAA0BgW,IAA1B,EAAgC;AACrCA,EAAAA,IAAI,GAAGC,WAAW,CAACD,IAAD,CAAlB;AACA,MAAIG,QAAQ,GAAGV,KAAK,CAACO,IAAI,CAACnZ,IAAN,CAApB;AACA,MAAI,CAACsZ,QAAL,EAAe,OAAOD,OAAO,CAAClW,OAAD,EAAU,YAAV,CAAd;AACf,MAAIoW,OAAO,GAAGD,QAAQ,CAACnW,OAAD,EAAUgW,IAAV,CAAtB;;AACA,MAAIK,cAAc,CAACrd,cAAf,CAA8Bgd,IAAI,CAACnZ,IAAnC,CAAJ,EAA8C;AAC5C,QAAIyZ,IAAI,GAAGD,cAAc,CAACL,IAAI,CAACnZ,IAAN,CAAzB;;AACA,SAAK,IAAI2P,IAAT,IAAiB8J,IAAjB,EAAuB;AACrB,UAAI,CAACA,IAAI,CAACtd,cAAL,CAAoBwT,IAApB,CAAL,EAAgC;AAChC,UAAI4J,OAAO,CAACpd,cAAR,CAAuBwT,IAAvB,CAAJ,EAAkC4J,OAAO,CAAC,MAAM5J,IAAP,CAAP,GAAsB4J,OAAO,CAAC5J,IAAD,CAA7B;AAClC4J,MAAAA,OAAO,CAAC5J,IAAD,CAAP,GAAgB8J,IAAI,CAAC9J,IAAD,CAApB;AACD;AACF;;AACD4J,EAAAA,OAAO,CAACvZ,IAAR,GAAemZ,IAAI,CAACnZ,IAApB;AACA,MAAImZ,IAAI,CAACO,UAAT,EAAqBH,OAAO,CAACG,UAAR,GAAqBP,IAAI,CAACO,UAA1B;AACrB,MAAIP,IAAI,CAACQ,SAAT,EAAoB,KAAK,IAAIhK,IAAT,IAAiBwJ,IAAI,CAACQ,SAAtB,EAClBJ,OAAO,CAAC5J,IAAD,CAAP,GAAgBwJ,IAAI,CAACQ,SAAL,CAAehK,IAAf,CAAhB;AAEF,SAAO4J,OAAP;AACD;AAGD;;AACA,AAAO,IAAIC,cAAc,GAAG,EAArB;AACP,AAAO,SAASI,UAAT,CAAoBb,IAApB,EAA0Bj3B,UAA1B,EAAsC;AAC3C,MAAI23B,IAAI,GAAGD,cAAc,CAACrd,cAAf,CAA8B4c,IAA9B,IAAsCS,cAAc,CAACT,IAAD,CAApD,GAA8DS,cAAc,CAACT,IAAD,CAAd,GAAuB,EAAhG;AACAvJ,EAAAA,OAAO,CAAC1tB,UAAD,EAAa23B,IAAb,CAAP;AACD;AAED,AAAO,SAASI,SAAT,CAAmBd,IAAnB,EAAyBe,KAAzB,EAAgC;AACrC,MAAIA,KAAK,KAAK,IAAd,EAAoB,OAAOA,KAAP;AACpB,MAAIf,IAAI,CAACc,SAAT,EAAoB,OAAOd,IAAI,CAACc,SAAL,CAAeC,KAAf,CAAP;AACpB,MAAIC,MAAM,GAAG,EAAb;;AACA,OAAK,IAAI7J,CAAT,IAAc4J,KAAd,EAAqB;AACnB,QAAIE,GAAG,GAAGF,KAAK,CAAC5J,CAAD,CAAf;AACA,QAAI8J,GAAG,YAAYrsB,KAAnB,EAA0BqsB,GAAG,GAAGA,GAAG,CAACtjB,MAAJ,CAAW,EAAX,CAAN;AAC1BqjB,IAAAA,MAAM,CAAC7J,CAAD,CAAN,GAAY8J,GAAZ;AACD;;AACD,SAAOD,MAAP;AACD;AAGD;;AACA,AAAO,SAASE,SAAT,CAAmBlB,IAAnB,EAAyBe,KAAzB,EAAgC;AACrC,MAAIpd,IAAJ;;AACA,SAAOqc,IAAI,CAACkB,SAAZ,EAAuB;AACrBvd,IAAAA,IAAI,GAAGqc,IAAI,CAACkB,SAAL,CAAeH,KAAf,CAAP;AACA,QAAI,CAACpd,IAAD,IAASA,IAAI,CAACqc,IAAL,IAAaA,IAA1B,EAAgC;AAChCe,IAAAA,KAAK,GAAGpd,IAAI,CAACod,KAAb;AACAf,IAAAA,IAAI,GAAGrc,IAAI,CAACqc,IAAZ;AACD;;AACD,SAAOrc,IAAI,IAAI;AAACqc,IAAAA,IAAI,EAAEA,IAAP;AAAae,IAAAA,KAAK,EAAEA;AAApB,GAAf;AACD;AAED,AAAO,SAASI,UAAT,CAAoBnB,IAApB,EAA0B1hB,EAA1B,EAA8BC,EAA9B,EAAkC;AACvC,SAAOyhB,IAAI,CAACmB,UAAL,GAAkBnB,IAAI,CAACmB,UAAL,CAAgB7iB,EAAhB,EAAoBC,EAApB,CAAlB,GAA4C,IAAnD;AACD;;AC3FD;AACA;;AAEA,MAAM6iB,YAAN,CAAmB;AACjBpvB,EAAAA,WAAW,CAAC8kB,MAAD,EAASC,OAAT,EAAkBsK,UAAlB,EAA8B;AACvC,SAAKhJ,GAAL,GAAW,KAAKtD,KAAL,GAAa,CAAxB;AACA,SAAK+B,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;AACA,SAAKuK,aAAL,GAAqB,KAAKC,eAAL,GAAuB,CAA5C;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,SAAKH,UAAL,GAAkBA,UAAlB;AACD;;AAEDI,EAAAA,GAAG,GAAG;AAAC,WAAO,KAAKpJ,GAAL,IAAY,KAAKvB,MAAL,CAAY7pB,MAA/B;AAAsC;;AAC7Cy0B,EAAAA,GAAG,GAAG;AAAC,WAAO,KAAKrJ,GAAL,IAAY,KAAKmJ,SAAxB;AAAkC;;AACzCG,EAAAA,IAAI,GAAG;AAAC,WAAO,KAAK7K,MAAL,CAAYkD,MAAZ,CAAmB,KAAK3B,GAAxB,KAAgC3sB,SAAvC;AAAiD;;AACzDk2B,EAAAA,IAAI,GAAG;AACL,QAAI,KAAKvJ,GAAL,GAAW,KAAKvB,MAAL,CAAY7pB,MAA3B,EACE,OAAO,KAAK6pB,MAAL,CAAYkD,MAAZ,CAAmB,KAAK3B,GAAL,EAAnB,CAAP;AACH;;AACDwJ,EAAAA,GAAG,CAAC3Q,KAAD,EAAQ;AACT,QAAIsI,EAAE,GAAG,KAAK1C,MAAL,CAAYkD,MAAZ,CAAmB,KAAK3B,GAAxB,CAAT;AACA,QAAIyJ,EAAJ;AACA,QAAI,OAAO5Q,KAAP,IAAgB,QAApB,EAA8B4Q,EAAE,GAAGtI,EAAE,IAAItI,KAAX,CAA9B,KACK4Q,EAAE,GAAGtI,EAAE,KAAKtI,KAAK,CAACvD,IAAN,GAAauD,KAAK,CAACvD,IAAN,CAAW6L,EAAX,CAAb,GAA8BtI,KAAK,CAACsI,EAAD,CAAxC,CAAP;;AACL,QAAIsI,EAAJ,EAAQ;AAAC,QAAE,KAAKzJ,GAAP;AAAY,aAAOmB,EAAP;AAAU;AAChC;;AACDuI,EAAAA,QAAQ,CAAC7Q,KAAD,EAAQ;AACd,QAAI6D,KAAK,GAAG,KAAKsD,GAAjB;;AACA,WAAO,KAAKwJ,GAAL,CAAS3Q,KAAT,CAAP,EAAuB;;AACvB,WAAO,KAAKmH,GAAL,GAAWtD,KAAlB;AACD;;AACDiN,EAAAA,QAAQ,GAAG;AACT,QAAIjN,KAAK,GAAG,KAAKsD,GAAjB;;AACA,WAAO,aAAa1K,IAAb,CAAkB,KAAKmJ,MAAL,CAAYkD,MAAZ,CAAmB,KAAK3B,GAAxB,CAAlB,CAAP,EAAwD,EAAE,KAAKA,GAAP;;AACxD,WAAO,KAAKA,GAAL,GAAWtD,KAAlB;AACD;;AACDkN,EAAAA,SAAS,GAAG;AAAC,SAAK5J,GAAL,GAAW,KAAKvB,MAAL,CAAY7pB,MAAvB;AAA8B;;AAC3Ci1B,EAAAA,MAAM,CAAC1I,EAAD,EAAK;AACT,QAAIiB,KAAK,GAAG,KAAK3D,MAAL,CAAY7Z,OAAZ,CAAoBuc,EAApB,EAAwB,KAAKnB,GAA7B,CAAZ;;AACA,QAAIoC,KAAK,GAAG,CAAC,CAAb,EAAgB;AAAC,WAAKpC,GAAL,GAAWoC,KAAX;AAAkB,aAAO,IAAP;AAAY;AAChD;;AACD0H,EAAAA,MAAM,CAAChL,CAAD,EAAI;AAAC,SAAKkB,GAAL,IAAYlB,CAAZ;AAAc;;AACzBiL,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKd,aAAL,GAAqB,KAAKvM,KAA9B,EAAqC;AACnC,WAAKwM,eAAL,GAAuB1K,WAAW,CAAC,KAAKC,MAAN,EAAc,KAAK/B,KAAnB,EAA0B,KAAKgC,OAA/B,EAAwC,KAAKuK,aAA7C,EAA4D,KAAKC,eAAjE,CAAlC;AACA,WAAKD,aAAL,GAAqB,KAAKvM,KAA1B;AACD;;AACD,WAAO,KAAKwM,eAAL,IAAwB,KAAKC,SAAL,GAAiB3K,WAAW,CAAC,KAAKC,MAAN,EAAc,KAAK0K,SAAnB,EAA8B,KAAKzK,OAAnC,CAA5B,GAA0E,CAAlG,CAAP;AACD;;AACDsL,EAAAA,WAAW,GAAG;AACZ,WAAOxL,WAAW,CAAC,KAAKC,MAAN,EAAc,IAAd,EAAoB,KAAKC,OAAzB,CAAX,IACJ,KAAKyK,SAAL,GAAiB3K,WAAW,CAAC,KAAKC,MAAN,EAAc,KAAK0K,SAAnB,EAA8B,KAAKzK,OAAnC,CAA5B,GAA0E,CADtE,CAAP;AAED;;AACD7F,EAAAA,KAAK,CAAC3I,OAAD,EAAU+Z,OAAV,EAAmBC,eAAnB,EAAoC;AACvC,QAAI,OAAOha,OAAP,IAAkB,QAAtB,EAAgC;AAC9B,UAAIia,KAAK,GAAGzI,GAAG,IAAIwI,eAAe,GAAGxI,GAAG,CAACvhB,WAAJ,EAAH,GAAuBuhB,GAAzD;;AACA,UAAI0I,MAAM,GAAG,KAAK3L,MAAL,CAAY2L,MAAZ,CAAmB,KAAKpK,GAAxB,EAA6B9P,OAAO,CAACtb,MAArC,CAAb;;AACA,UAAIu1B,KAAK,CAACC,MAAD,CAAL,IAAiBD,KAAK,CAACja,OAAD,CAA1B,EAAqC;AACnC,YAAI+Z,OAAO,KAAK,KAAhB,EAAuB,KAAKjK,GAAL,IAAY9P,OAAO,CAACtb,MAApB;AACvB,eAAO,IAAP;AACD;AACF,KAPD,MAOO;AACL,UAAIikB,KAAK,GAAG,KAAK4F,MAAL,CAAY/d,KAAZ,CAAkB,KAAKsf,GAAvB,EAA4BnH,KAA5B,CAAkC3I,OAAlC,CAAZ;AACA,UAAI2I,KAAK,IAAIA,KAAK,CAAC/X,KAAN,GAAc,CAA3B,EAA8B,OAAO,IAAP;AAC9B,UAAI+X,KAAK,IAAIoR,OAAO,KAAK,KAAzB,EAAgC,KAAKjK,GAAL,IAAYnH,KAAK,CAAC,CAAD,CAAL,CAASjkB,MAArB;AAChC,aAAOikB,KAAP;AACD;AACF;;AACD6C,EAAAA,OAAO,GAAE;AAAC,WAAO,KAAK+C,MAAL,CAAY/d,KAAZ,CAAkB,KAAKgc,KAAvB,EAA8B,KAAKsD,GAAnC,CAAP;AAA+C;;AACzDqK,EAAAA,cAAc,CAACvL,CAAD,EAAIwL,KAAJ,EAAW;AACvB,SAAKnB,SAAL,IAAkBrK,CAAlB;;AACA,QAAI;AAAE,aAAOwL,KAAK,EAAZ;AAAgB,KAAtB,SACQ;AAAE,WAAKnB,SAAL,IAAkBrK,CAAlB;AAAqB;AAChC;;AACDyL,EAAAA,SAAS,CAACzL,CAAD,EAAI;AACX,QAAI0L,MAAM,GAAG,KAAKxB,UAAlB;AACA,WAAOwB,MAAM,IAAIA,MAAM,CAACD,SAAP,CAAiBzL,CAAjB,CAAjB;AACD;;AACD2L,EAAAA,SAAS,GAAG;AACV,QAAID,MAAM,GAAG,KAAKxB,UAAlB;AACA,WAAOwB,MAAM,IAAIA,MAAM,CAACC,SAAP,CAAiB,KAAKzK,GAAtB,CAAjB;AACD;;AA/EgB;;ACJZ,SAAS0K,OAAT,CAAiBC,GAAjB,EAAsB7L,CAAtB,EAAyB;AAC9BA,EAAAA,CAAC,IAAI6L,GAAG,CAACC,KAAT;AACA,MAAI9L,CAAC,GAAG,CAAJ,IAASA,CAAC,IAAI6L,GAAG,CAAClzB,IAAtB,EAA4B,MAAM,IAAIsH,KAAJ,CAAU,uBAAuB+f,CAAC,GAAG6L,GAAG,CAACC,KAA/B,IAAwC,mBAAlD,CAAN;AAC5B,MAAIC,KAAK,GAAGF,GAAZ;;AACA,SAAO,CAACE,KAAK,CAACC,KAAd,EAAqB;AACnB,SAAK,IAAInlB,CAAC,GAAG,CAAb,GAAiB,EAAEA,CAAnB,EAAsB;AACpB,UAAIyX,KAAK,GAAGyN,KAAK,CAACE,QAAN,CAAeplB,CAAf,CAAZ;AAAA,UAA+BqlB,EAAE,GAAG5N,KAAK,CAAC6N,SAAN,EAApC;;AACA,UAAInM,CAAC,GAAGkM,EAAR,EAAY;AAAEH,QAAAA,KAAK,GAAGzN,KAAR;AAAe;AAAO;;AACpC0B,MAAAA,CAAC,IAAIkM,EAAL;AACD;AACF;;AACD,SAAOH,KAAK,CAACC,KAAN,CAAYhM,CAAZ,CAAP;AACD;AAGD;;AACA,AAAO,SAASoM,UAAT,CAAoBP,GAApB,EAAyBjO,KAAzB,EAAgClV,GAAhC,EAAqC;AAC1C,MAAI+Y,GAAG,GAAG,EAAV;AAAA,MAAczB,CAAC,GAAGpC,KAAK,CAACwH,IAAxB;AACAyG,EAAAA,GAAG,CAACQ,IAAJ,CAASzO,KAAK,CAACwH,IAAf,EAAqB1c,GAAG,CAAC0c,IAAJ,GAAW,CAAhC,EAAmCA,IAAI,IAAI;AACzC,QAAIpkB,IAAI,GAAGokB,IAAI,CAACpkB,IAAhB;AACA,QAAIgf,CAAC,IAAItX,GAAG,CAAC0c,IAAb,EAAmBpkB,IAAI,GAAGA,IAAI,CAACY,KAAL,CAAW,CAAX,EAAc8G,GAAG,CAAC2Z,EAAlB,CAAP;AACnB,QAAIrC,CAAC,IAAIpC,KAAK,CAACwH,IAAf,EAAqBpkB,IAAI,GAAGA,IAAI,CAACY,KAAL,CAAWgc,KAAK,CAACyE,EAAjB,CAAP;AACrBZ,IAAAA,GAAG,CAACzb,IAAJ,CAAShF,IAAT;AACA,MAAEgf,CAAF;AACD,GAND;AAOA,SAAOyB,GAAP;AACD;;AAED,AAAO,SAAS6K,QAAT,CAAkBT,GAAlB,EAAuB1W,IAAvB,EAA6B6N,EAA7B,EAAiC;AACtC,MAAIvB,GAAG,GAAG,EAAV;AACAoK,EAAAA,GAAG,CAACQ,IAAJ,CAASlX,IAAT,EAAe6N,EAAf,EAAmBoC,IAAI,IAAI;AAAE3D,IAAAA,GAAG,CAACzb,IAAJ,CAASof,IAAI,CAACpkB,IAAd;AAAqB,GAAlD,EAFsC;;AAGtC,SAAOygB,GAAP;AACD;AAGD;;AACA,AAAO,SAAS8K,gBAAT,CAA0BnH,IAA1B,EAAgCjyB,MAAhC,EAAwC;AAC7C,MAAIq5B,IAAI,GAAGr5B,MAAM,GAAGiyB,IAAI,CAACjyB,MAAzB;AACA,MAAIq5B,IAAJ,EAAU,KAAK,IAAIxM,CAAC,GAAGoF,IAAb,EAAmBpF,CAAnB,EAAsBA,CAAC,GAAGA,CAAC,CAAC5C,MAA5B,EAAoC4C,CAAC,CAAC7sB,MAAF,IAAYq5B,IAAZ;AAC/C;AAGD;;AACA,AAAO,SAASC,MAAT,CAAgBrH,IAAhB,EAAsB;AAC3B,MAAIA,IAAI,CAAChI,MAAL,IAAe,IAAnB,EAAyB,OAAO,IAAP;AACzB,MAAIyG,GAAG,GAAGuB,IAAI,CAAChI,MAAf;AAAA,MAAuBsP,EAAE,GAAG5mB,OAAO,CAAC+d,GAAG,CAACmI,KAAL,EAAY5G,IAAZ,CAAnC;;AACA,OAAK,IAAI2G,KAAK,GAAGlI,GAAG,CAACzG,MAArB,EAA6B2O,KAA7B,EAAoClI,GAAG,GAAGkI,KAAN,EAAaA,KAAK,GAAGA,KAAK,CAAC3O,MAA/D,EAAuE;AACrE,SAAK,IAAIvW,CAAC,GAAG,CAAb,GAAiB,EAAEA,CAAnB,EAAsB;AACpB,UAAIklB,KAAK,CAACE,QAAN,CAAeplB,CAAf,KAAqBgd,GAAzB,EAA8B;AAC9B6I,MAAAA,EAAE,IAAIX,KAAK,CAACE,QAAN,CAAeplB,CAAf,EAAkBslB,SAAlB,EAAN;AACD;AACF;;AACD,SAAOO,EAAE,GAAG7I,GAAG,CAACiI,KAAhB;AACD;AAGD;;AACA,AAAO,SAASa,YAAT,CAAsBZ,KAAtB,EAA6Ba,CAA7B,EAAgC;AACrC,MAAI5M,CAAC,GAAG+L,KAAK,CAACD,KAAd;;AACAe,EAAAA,KAAK,EAAE,GAAG;AACR,SAAK,IAAIhmB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGklB,KAAK,CAACE,QAAN,CAAen2B,MAAnC,EAA2C,EAAE+Q,CAA7C,EAAgD;AAC9C,UAAIyX,KAAK,GAAGyN,KAAK,CAACE,QAAN,CAAeplB,CAAf,CAAZ;AAAA,UAA+Bwb,EAAE,GAAG/D,KAAK,CAACnrB,MAA1C;;AACA,UAAIy5B,CAAC,GAAGvK,EAAR,EAAY;AAAE0J,QAAAA,KAAK,GAAGzN,KAAR;AAAe,iBAASuO,KAAT;AAAgB;;AAC7CD,MAAAA,CAAC,IAAIvK,EAAL;AACArC,MAAAA,CAAC,IAAI1B,KAAK,CAAC6N,SAAN,EAAL;AACD;;AACD,WAAOnM,CAAP;AACD,GARM,QAQE,CAAC+L,KAAK,CAACC,KART;;AASP,MAAInlB,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGklB,KAAK,CAACC,KAAN,CAAYl2B,MAAvB,EAA+B,EAAE+Q,CAAjC,EAAoC;AAClC,QAAIue,IAAI,GAAG2G,KAAK,CAACC,KAAN,CAAYnlB,CAAZ,CAAX;AAAA,QAA2BimB,EAAE,GAAG1H,IAAI,CAACjyB,MAArC;AACA,QAAIy5B,CAAC,GAAGE,EAAR,EAAY;AACZF,IAAAA,CAAC,IAAIE,EAAL;AACD;;AACD,SAAO9M,CAAC,GAAGnZ,CAAX;AACD;AAED,AAAO,SAASkmB,MAAT,CAAgBlB,GAAhB,EAAqBlE,CAArB,EAAwB;AAAC,SAAOA,CAAC,IAAIkE,GAAG,CAACC,KAAT,IAAkBnE,CAAC,GAAGkE,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAA7C;AAAkD;AAElF,AAAO,SAASq0B,aAAT,CAAuB/Z,OAAvB,EAAgCpM,CAAhC,EAAmC;AACxC,SAAO9U,MAAM,CAACkhB,OAAO,CAACga,mBAAR,CAA4BpmB,CAAC,GAAGoM,OAAO,CAACia,eAAxC,CAAD,CAAb;AACD;;ACjFM,SAASC,GAAT,CAAa/H,IAAb,EAAmB/C,EAAnB,EAAuBuB,MAAM,GAAG,IAAhC,EAAsC;AAC3C,MAAI,EAAE,gBAAgBuJ,GAAlB,CAAJ,EAA4B,OAAO,IAAIA,GAAJ,CAAQ/H,IAAR,EAAc/C,EAAd,EAAkBuB,MAAlB,CAAP;AAC5B,OAAKwB,IAAL,GAAYA,IAAZ;AACA,OAAK/C,EAAL,GAAUA,EAAV;AACA,OAAKuB,MAAL,GAAcA,MAAd;AACD;AAGD;;AACA,AAAO,SAASwJ,GAAT,CAAaxe,CAAb,EAAgBiQ,CAAhB,EAAmB;AAAE,SAAOjQ,CAAC,CAACwW,IAAF,GAASvG,CAAC,CAACuG,IAAX,IAAmBxW,CAAC,CAACyT,EAAF,GAAOxD,CAAC,CAACwD,EAAnC;AAAuC;AAEnE,AAAO,SAASgL,cAAT,CAAwBze,CAAxB,EAA2BiQ,CAA3B,EAA8B;AAAE,SAAOjQ,CAAC,CAACgV,MAAF,IAAY/E,CAAC,CAAC+E,MAAd,IAAwBwJ,GAAG,CAACxe,CAAD,EAAIiQ,CAAJ,CAAH,IAAa,CAA5C;AAA+C;AAEtF,AAAO,SAASyO,OAAT,CAAiBtiB,CAAjB,EAAoB;AAAC,SAAOmiB,GAAG,CAACniB,CAAC,CAACoa,IAAH,EAASpa,CAAC,CAACqX,EAAX,CAAV;AAAyB;AACrD,AAAO,SAASkL,MAAT,CAAgB3e,CAAhB,EAAmBiQ,CAAnB,EAAsB;AAAE,SAAOuO,GAAG,CAACxe,CAAD,EAAIiQ,CAAJ,CAAH,GAAY,CAAZ,GAAgBA,CAAhB,GAAoBjQ,CAA3B;AAA8B;AAC7D,AAAO,SAAS4e,MAAT,CAAgB5e,CAAhB,EAAmBiQ,CAAnB,EAAsB;AAAE,SAAOuO,GAAG,CAACxe,CAAD,EAAIiQ,CAAJ,CAAH,GAAY,CAAZ,GAAgBjQ,CAAhB,GAAoBiQ,CAA3B;AAA8B;AAG7D;;AACA,AAAO,SAAS4O,QAAT,CAAkB5B,GAAlB,EAAuB7L,CAAvB,EAA0B;AAAC,SAAOphB,IAAI,CAAC4kB,GAAL,CAASqI,GAAG,CAACC,KAAb,EAAoBltB,IAAI,CAACyiB,GAAL,CAASrB,CAAT,EAAY6L,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAAnC,CAApB,CAAP;AAAkE;AACpG,AAAO,SAAS+0B,OAAT,CAAiB7B,GAAjB,EAAsB3K,GAAtB,EAA2B;AAChC,MAAIA,GAAG,CAACkE,IAAJ,GAAWyG,GAAG,CAACC,KAAnB,EAA0B,OAAOqB,GAAG,CAACtB,GAAG,CAACC,KAAL,EAAY,CAAZ,CAAV;AAC1B,MAAIzpB,IAAI,GAAGwpB,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAAlC;AACA,MAAIuoB,GAAG,CAACkE,IAAJ,GAAW/iB,IAAf,EAAqB,OAAO8qB,GAAG,CAAC9qB,IAAD,EAAOupB,OAAO,CAACC,GAAD,EAAMxpB,IAAN,CAAP,CAAmBrB,IAAnB,CAAwBlL,MAA/B,CAAV;AACrB,SAAO63B,SAAS,CAACzM,GAAD,EAAM0K,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAAP,CAAuBpkB,IAAvB,CAA4BlL,MAAlC,CAAhB;AACD;;AACD,SAAS63B,SAAT,CAAmBzM,GAAnB,EAAwB0M,OAAxB,EAAiC;AAC/B,MAAIvL,EAAE,GAAGnB,GAAG,CAACmB,EAAb;AACA,MAAIA,EAAE,IAAI,IAAN,IAAcA,EAAE,GAAGuL,OAAvB,EAAgC,OAAOT,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAWwI,OAAX,CAAV,CAAhC,KACK,IAAIvL,EAAE,GAAG,CAAT,EAAY,OAAO8K,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAW,CAAX,CAAV,CAAZ,KACA,OAAOlE,GAAP;AACN;;AACD,AAAO,SAAS2M,YAAT,CAAsBhC,GAAtB,EAA2BpL,KAA3B,EAAkC;AACvC,MAAIgB,GAAG,GAAG,EAAV;;AACA,OAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Z,KAAK,CAAC3qB,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC4a,GAAG,CAAC5a,CAAD,CAAH,GAAS6mB,OAAO,CAAC7B,GAAD,EAAMpL,KAAK,CAAC5Z,CAAD,CAAX,CAAhB;;AACvC,SAAO4a,GAAP;AACD;;AChCD,MAAMqM,YAAN,CAAmB;AACjBjzB,EAAAA,WAAW,CAAC+uB,KAAD,EAAQ6B,SAAR,EAAmB;AAC5B,SAAK7B,KAAL,GAAaA,KAAb;AACA,SAAK6B,SAAL,GAAiBA,SAAjB;AACD;;AAJgB;;AAOnB,MAAMsC,OAAN,CAAc;AACZlzB,EAAAA,WAAW,CAACgxB,GAAD,EAAMjC,KAAN,EAAaxE,IAAb,EAAmBqG,SAAnB,EAA8B;AACvC,SAAK7B,KAAL,GAAaA,KAAb;AACA,SAAKiC,GAAL,GAAWA,GAAX;AACA,SAAKzG,IAAL,GAAYA,IAAZ;AACA,SAAK4I,YAAL,GAAoBvC,SAAS,IAAI,CAAjC;AACA,SAAKwC,UAAL,GAAkB,IAAlB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACD;;AAEDzC,EAAAA,SAAS,CAACzL,CAAD,EAAI;AACX,QAAIoF,IAAI,GAAG,KAAKyG,GAAL,CAASD,OAAT,CAAiB,KAAKxG,IAAL,GAAYpF,CAA7B,CAAX;AACA,QAAIoF,IAAI,IAAI,IAAR,IAAgBpF,CAAC,GAAG,KAAKgO,YAA7B,EAA2C,KAAKA,YAAL,GAAoBhO,CAApB;AAC3C,WAAOoF,IAAP;AACD;;AAEDuG,EAAAA,SAAS,CAAC3L,CAAD,EAAI;AACX,QAAI,CAAC,KAAKiO,UAAV,EAAsB,OAAO,IAAP;;AACtB,WAAO,KAAKA,UAAL,CAAgB,KAAKC,YAArB,KAAsClO,CAA7C,EACE,KAAKkO,YAAL,IAAqB,CAArB;;AACF,QAAIp8B,IAAI,GAAG,KAAKm8B,UAAL,CAAgB,KAAKC,YAAL,GAAoB,CAApC,CAAX;AACA,WAAO;AAACp8B,MAAAA,IAAI,EAAEA,IAAI,IAAIA,IAAI,CAAC4C,OAAL,CAAa,iBAAb,EAAgC,EAAhC,CAAf;AACCiE,MAAAA,IAAI,EAAE,KAAKs1B,UAAL,CAAgB,KAAKC,YAArB,IAAqClO;AAD5C,KAAP;AAED;;AAEDmO,EAAAA,QAAQ,GAAG;AACT,SAAK/I,IAAL;AACA,QAAI,KAAK4I,YAAL,GAAoB,CAAxB,EAA2B,KAAKA,YAAL;AAC5B;;AAEe,SAATI,SAAS,CAACvC,GAAD,EAAMwC,KAAN,EAAajJ,IAAb,EAAmB;AACjC,QAAIiJ,KAAK,YAAYP,YAArB,EACE,OAAO,IAAIC,OAAJ,CAAYlC,GAAZ,EAAiBlC,SAAS,CAACkC,GAAG,CAAChD,IAAL,EAAWwF,KAAK,CAACzE,KAAjB,CAA1B,EAAmDxE,IAAnD,EAAyDiJ,KAAK,CAAC5C,SAA/D,CAAP,CADF,KAGE,OAAO,IAAIsC,OAAJ,CAAYlC,GAAZ,EAAiBlC,SAAS,CAACkC,GAAG,CAAChD,IAAL,EAAWwF,KAAX,CAA1B,EAA6CjJ,IAA7C,CAAP;AACH;;AAEDkJ,EAAAA,IAAI,CAACC,IAAD,EAAO;AACT,QAAI3E,KAAK,GAAG2E,IAAI,KAAK,KAAT,GAAiB5E,SAAS,CAAC,KAAKkC,GAAL,CAAShD,IAAV,EAAgB,KAAKe,KAArB,CAA1B,GAAwD,KAAKA,KAAzE;AACA,WAAO,KAAKoE,YAAL,GAAoB,CAApB,GAAwB,IAAIF,YAAJ,CAAiBlE,KAAjB,EAAwB,KAAKoE,YAA7B,CAAxB,GAAqEpE,KAA5E;AACD;;AAxCW;AA6Cd;AACA;AACA;;;AACA,AAAO,SAAS4E,aAAT,CAAuB3I,EAAvB,EAA2BT,IAA3B,EAAiCqJ,OAAjC,EAA0CC,UAA1C,EAAsD;AAC3D;AACA;AACA,MAAIC,EAAE,GAAG,CAAC9I,EAAE,CAAC+D,KAAH,CAASgF,OAAV,CAAT;AAAA,MAA6BC,WAAW,GAAG,EAA3C,CAH2D;;AAK3DC,EAAAA,OAAO,CAACjJ,EAAD,EAAKT,IAAI,CAACpkB,IAAV,EAAgB6kB,EAAE,CAACgG,GAAH,CAAOhD,IAAvB,EAA6B4F,OAA7B,EAAsC,CAAC/lB,GAAD,EAAMzU,KAAN,KAAgB06B,EAAE,CAAC3oB,IAAH,CAAQ0C,GAAR,EAAazU,KAAb,CAAtD,EACC46B,WADD,EACcH,UADd,CAAP;AAEA,MAAI9E,KAAK,GAAG6E,OAAO,CAAC7E,KAApB,CAP2D;;AAU3D,OAAK,IAAImF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlJ,EAAE,CAAC+D,KAAH,CAASoF,QAAT,CAAkBl5B,MAAtC,EAA8C,EAAEi5B,CAAhD,EAAmD;AACjDN,IAAAA,OAAO,CAACR,UAAR,GAAqBU,EAArB;AACA,QAAIM,OAAO,GAAGpJ,EAAE,CAAC+D,KAAH,CAASoF,QAAT,CAAkBD,CAAlB,CAAd;AAAA,QAAoCloB,CAAC,GAAG,CAAxC;AAAA,QAA2Cie,EAAE,GAAG,CAAhD;AACA2J,IAAAA,OAAO,CAAC7E,KAAR,GAAgB,IAAhB;AACAkF,IAAAA,OAAO,CAACjJ,EAAD,EAAKT,IAAI,CAACpkB,IAAV,EAAgBiuB,OAAO,CAACpG,IAAxB,EAA8B4F,OAA9B,EAAuC,CAAC/lB,GAAD,EAAMzU,KAAN,KAAgB;AAC5D,UAAI2pB,KAAK,GAAG/W,CAAZ,CAD4D;;AAG5D,aAAOie,EAAE,GAAGpc,GAAZ,EAAiB;AACf,YAAIwmB,KAAK,GAAGP,EAAE,CAAC9nB,CAAD,CAAd;AACA,YAAIqoB,KAAK,GAAGxmB,GAAZ,EACEimB,EAAE,CAAC1nB,MAAH,CAAUJ,CAAV,EAAa,CAAb,EAAgB6B,GAAhB,EAAqBimB,EAAE,CAAC9nB,CAAC,GAAC,CAAH,CAAvB,EAA8BqoB,KAA9B;AACFroB,QAAAA,CAAC,IAAI,CAAL;AACAie,QAAAA,EAAE,GAAGlmB,IAAI,CAACyiB,GAAL,CAAS3Y,GAAT,EAAcwmB,KAAd,CAAL;AACD;;AACD,UAAI,CAACj7B,KAAL,EAAY;;AACZ,UAAIg7B,OAAO,CAACE,MAAZ,EAAoB;AAClBR,QAAAA,EAAE,CAAC1nB,MAAH,CAAU2W,KAAV,EAAiB/W,CAAC,GAAG+W,KAArB,EAA4BlV,GAA5B,EAAiC,aAAazU,KAA9C;AACA4S,QAAAA,CAAC,GAAG+W,KAAK,GAAG,CAAZ;AACD,OAHD,MAGO;AACL,eAAOA,KAAK,GAAG/W,CAAf,EAAkB+W,KAAK,IAAI,CAA3B,EAA8B;AAC5B,cAAIiG,GAAG,GAAG8K,EAAE,CAAC/Q,KAAK,GAAC,CAAP,CAAZ;AACA+Q,UAAAA,EAAE,CAAC/Q,KAAK,GAAC,CAAP,CAAF,GAAc,CAACiG,GAAG,GAAGA,GAAG,GAAG,GAAT,GAAe,EAAnB,IAAyB,UAAzB,GAAsC5vB,KAApD;AACD;AACF;AACF,KApBM,EAoBJ46B,WApBI,CAAP;AAqBAJ,IAAAA,OAAO,CAAC7E,KAAR,GAAgBA,KAAhB;AACA6E,IAAAA,OAAO,CAACR,UAAR,GAAqB,IAArB;AACAQ,IAAAA,OAAO,CAACP,YAAR,GAAuB,CAAvB;AACD;;AAED,SAAO;AAACvyB,IAAAA,MAAM,EAAEgzB,EAAT;AAAaS,IAAAA,OAAO,EAAEP,WAAW,CAACQ,OAAZ,IAAuBR,WAAW,CAACS,SAAnC,GAA+CT,WAA/C,GAA6D;AAAnF,GAAP;AACD;AAED,AAAO,SAASU,aAAT,CAAuB1J,EAAvB,EAA2BT,IAA3B,EAAiCoK,cAAjC,EAAiD;AACtD,MAAI,CAACpK,IAAI,CAACzpB,MAAN,IAAgBypB,IAAI,CAACzpB,MAAL,CAAY,CAAZ,KAAkBkqB,EAAE,CAAC+D,KAAH,CAASgF,OAA/C,EAAwD;AACtD,QAAIH,OAAO,GAAGgB,gBAAgB,CAAC5J,EAAD,EAAK4G,MAAM,CAACrH,IAAD,CAAX,CAA9B;AACA,QAAIsK,UAAU,GAAGtK,IAAI,CAACpkB,IAAL,CAAUlL,MAAV,GAAmB+vB,EAAE,CAAC5S,OAAH,CAAW0c,kBAA9B,IAAoDhG,SAAS,CAAC9D,EAAE,CAACgG,GAAH,CAAOhD,IAAR,EAAc4F,OAAO,CAAC7E,KAAtB,CAA9E;AACA,QAAI7nB,MAAM,GAAGysB,aAAa,CAAC3I,EAAD,EAAKT,IAAL,EAAWqJ,OAAX,CAA1B;AACA,QAAIiB,UAAJ,EAAgBjB,OAAO,CAAC7E,KAAR,GAAgB8F,UAAhB;AAChBtK,IAAAA,IAAI,CAACwK,UAAL,GAAkBnB,OAAO,CAACH,IAAR,CAAa,CAACoB,UAAd,CAAlB;AACAtK,IAAAA,IAAI,CAACzpB,MAAL,GAAcoG,MAAM,CAACpG,MAArB;AACA,QAAIoG,MAAM,CAACqtB,OAAX,EAAoBhK,IAAI,CAACyK,YAAL,GAAoB9tB,MAAM,CAACqtB,OAA3B,CAApB,KACK,IAAIhK,IAAI,CAACyK,YAAT,EAAuBzK,IAAI,CAACyK,YAAL,GAAoB,IAApB;AAC5B,QAAIL,cAAc,KAAK3J,EAAE,CAACgG,GAAH,CAAOiE,iBAA9B,EACEjK,EAAE,CAACgG,GAAH,CAAOkE,YAAP,GAAsBnxB,IAAI,CAAC4kB,GAAL,CAASqC,EAAE,CAACgG,GAAH,CAAOkE,YAAhB,EAA8B,EAAElK,EAAE,CAACgG,GAAH,CAAOiE,iBAAvC,CAAtB;AACH;;AACD,SAAO1K,IAAI,CAACzpB,MAAZ;AACD;AAED,AAAO,SAAS8zB,gBAAT,CAA0B5J,EAA1B,EAA8B7F,CAA9B,EAAiCgQ,OAAjC,EAA0C;AAC/C,MAAInE,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkBprB,OAAO,GAAGolB,EAAE,CAACplB,OAA/B;AACA,MAAI,CAACorB,GAAG,CAAChD,IAAJ,CAASmB,UAAd,EAA0B,OAAO,IAAI+D,OAAJ,CAAYlC,GAAZ,EAAiB,IAAjB,EAAuB7L,CAAvB,CAAP;AAC1B,MAAIpC,KAAK,GAAGqS,aAAa,CAACpK,EAAD,EAAK7F,CAAL,EAAQgQ,OAAR,CAAzB;AACA,MAAI3B,KAAK,GAAGzQ,KAAK,GAAGiO,GAAG,CAACC,KAAZ,IAAqBF,OAAO,CAACC,GAAD,EAAMjO,KAAK,GAAG,CAAd,CAAP,CAAwBgS,UAAzD;AACA,MAAInB,OAAO,GAAGJ,KAAK,GAAGN,OAAO,CAACK,SAAR,CAAkBvC,GAAlB,EAAuBwC,KAAvB,EAA8BzQ,KAA9B,CAAH,GAA0C,IAAImQ,OAAJ,CAAYlC,GAAZ,EAAiB7B,UAAU,CAAC6B,GAAG,CAAChD,IAAL,CAA3B,EAAuCjL,KAAvC,CAA7D;AAEAiO,EAAAA,GAAG,CAACQ,IAAJ,CAASzO,KAAT,EAAgBoC,CAAhB,EAAmBoF,IAAI,IAAI;AACzB8K,IAAAA,WAAW,CAACrK,EAAD,EAAKT,IAAI,CAACpkB,IAAV,EAAgBytB,OAAhB,CAAX;AACA,QAAIvN,GAAG,GAAGuN,OAAO,CAACrJ,IAAlB;AACAA,IAAAA,IAAI,CAACwK,UAAL,GAAkB1O,GAAG,IAAIlB,CAAC,GAAG,CAAX,IAAgBkB,GAAG,GAAG,CAAN,IAAW,CAA3B,IAAgCA,GAAG,IAAIzgB,OAAO,CAAC0vB,QAAf,IAA2BjP,GAAG,GAAGzgB,OAAO,CAAC2vB,MAAzE,GAAkF3B,OAAO,CAACH,IAAR,EAAlF,GAAmG,IAArH;AACAG,IAAAA,OAAO,CAACN,QAAR;AACD,GALD;AAMA,MAAI6B,OAAJ,EAAanE,GAAG,CAACkE,YAAJ,GAAmBtB,OAAO,CAACrJ,IAA3B;AACb,SAAOqJ,OAAP;AACD;AAGD;AACA;;AACA,AAAO,SAASyB,WAAT,CAAqBrK,EAArB,EAAyB7kB,IAAzB,EAA+BytB,OAA/B,EAAwC4B,OAAxC,EAAiD;AACtD,MAAIxH,IAAI,GAAGhD,EAAE,CAACgG,GAAH,CAAOhD,IAAlB;AACA,MAAIyH,MAAM,GAAG,IAAIrG,YAAJ,CAAiBjpB,IAAjB,EAAuB6kB,EAAE,CAAC5S,OAAH,CAAW2M,OAAlC,EAA2C6O,OAA3C,CAAb;AACA6B,EAAAA,MAAM,CAAC1S,KAAP,GAAe0S,MAAM,CAACpP,GAAP,GAAamP,OAAO,IAAI,CAAvC;AACA,MAAIrvB,IAAI,IAAI,EAAZ,EAAgBuvB,aAAa,CAAC1H,IAAD,EAAO4F,OAAO,CAAC7E,KAAf,CAAb;;AAChB,SAAO,CAAC0G,MAAM,CAAChG,GAAP,EAAR,EAAsB;AACpBkG,IAAAA,SAAS,CAAC3H,IAAD,EAAOyH,MAAP,EAAe7B,OAAO,CAAC7E,KAAvB,CAAT;AACA0G,IAAAA,MAAM,CAAC1S,KAAP,GAAe0S,MAAM,CAACpP,GAAtB;AACD;AACF;;AAED,SAASqP,aAAT,CAAuB1H,IAAvB,EAA6Be,KAA7B,EAAoC;AAClC,MAAIf,IAAI,CAAC4H,SAAT,EAAoB,OAAO5H,IAAI,CAAC4H,SAAL,CAAe7G,KAAf,CAAP;AACpB,MAAI,CAACf,IAAI,CAACkB,SAAV,EAAqB;AACrB,MAAIyB,KAAK,GAAGzB,SAAS,CAAClB,IAAD,EAAOe,KAAP,CAArB;AACA,MAAI4B,KAAK,CAAC3C,IAAN,CAAW4H,SAAf,EAA0B,OAAOjF,KAAK,CAAC3C,IAAN,CAAW4H,SAAX,CAAqBjF,KAAK,CAAC5B,KAA3B,CAAP;AAC3B;;AAED,SAAS4G,SAAT,CAAmB3H,IAAnB,EAAyByH,MAAzB,EAAiC1G,KAAjC,EAAwC4B,KAAxC,EAA+C;AAC7C,OAAK,IAAI3kB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,QAAI2kB,KAAJ,EAAWA,KAAK,CAAC,CAAD,CAAL,GAAWzB,SAAS,CAAClB,IAAD,EAAOe,KAAP,CAAT,CAAuBf,IAAlC;AACX,QAAI50B,KAAK,GAAG40B,IAAI,CAAC6H,KAAL,CAAWJ,MAAX,EAAmB1G,KAAnB,CAAZ;AACA,QAAI0G,MAAM,CAACpP,GAAP,GAAaoP,MAAM,CAAC1S,KAAxB,EAA+B,OAAO3pB,KAAP;AAChC;;AACD,QAAM,IAAIgM,KAAJ,CAAU,UAAU4oB,IAAI,CAAC/Y,IAAf,GAAsB,4BAAhC,CAAN;AACD;;AAED,MAAM6gB,KAAN,CAAY;AACV91B,EAAAA,WAAW,CAACy1B,MAAD,EAASx+B,IAAT,EAAe83B,KAAf,EAAsB;AAC/B,SAAKhM,KAAL,GAAa0S,MAAM,CAAC1S,KAApB;AAA2B,SAAKlV,GAAL,GAAW4nB,MAAM,CAACpP,GAAlB;AAC3B,SAAKvB,MAAL,GAAc2Q,MAAM,CAAC1T,OAAP,EAAd;AACA,SAAK9qB,IAAL,GAAYA,IAAI,IAAI,IAApB;AACA,SAAK83B,KAAL,GAAaA,KAAb;AACD;;AANS;;;AAUZ,AAAO,SAASgH,SAAT,CAAmB/K,EAAnB,EAAuB3E,GAAvB,EAA4B8O,OAA5B,EAAqCa,OAArC,EAA8C;AACnD,MAAIhF,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkBhD,IAAI,GAAGgD,GAAG,CAAChD,IAA7B;AAAA,MAAmC50B,KAAnC;AACAitB,EAAAA,GAAG,GAAGwM,OAAO,CAAC7B,GAAD,EAAM3K,GAAN,CAAb;AACA,MAAIkE,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAAlB;AAAA,MAAmCqJ,OAAO,GAAGgB,gBAAgB,CAAC5J,EAAD,EAAK3E,GAAG,CAACkE,IAAT,EAAe4K,OAAf,CAA7D;AACA,MAAIM,MAAM,GAAG,IAAIrG,YAAJ,CAAiB7E,IAAI,CAACpkB,IAAtB,EAA4B6kB,EAAE,CAAC5S,OAAH,CAAW2M,OAAvC,EAAgD6O,OAAhD,CAAb;AAAA,MAAuEqC,MAAvE;AACA,MAAID,OAAJ,EAAaC,MAAM,GAAG,EAAT;;AACb,SAAO,CAACD,OAAO,IAAIP,MAAM,CAACpP,GAAP,GAAaA,GAAG,CAACmB,EAA7B,KAAoC,CAACiO,MAAM,CAAChG,GAAP,EAA5C,EAA0D;AACxDgG,IAAAA,MAAM,CAAC1S,KAAP,GAAe0S,MAAM,CAACpP,GAAtB;AACAjtB,IAAAA,KAAK,GAAGu8B,SAAS,CAAC3H,IAAD,EAAOyH,MAAP,EAAe7B,OAAO,CAAC7E,KAAvB,CAAjB;AACA,QAAIiH,OAAJ,EAAaC,MAAM,CAAC9qB,IAAP,CAAY,IAAI2qB,KAAJ,CAAUL,MAAV,EAAkBr8B,KAAlB,EAAyB01B,SAAS,CAACkC,GAAG,CAAChD,IAAL,EAAW4F,OAAO,CAAC7E,KAAnB,CAAlC,CAAZ;AACd;;AACD,SAAOiH,OAAO,GAAGC,MAAH,GAAY,IAAIH,KAAJ,CAAUL,MAAV,EAAkBr8B,KAAlB,EAAyBw6B,OAAO,CAAC7E,KAAjC,CAA1B;AACD;;AAED,SAASmH,kBAAT,CAA4Bj/B,IAA5B,EAAkCke,MAAlC,EAA0C;AACxC,MAAIle,IAAJ,EAAU,SAAS;AACjB,QAAIk/B,SAAS,GAAGl/B,IAAI,CAACioB,KAAL,CAAW,mCAAX,CAAhB;AACA,QAAI,CAACiX,SAAL,EAAgB;AAChBl/B,IAAAA,IAAI,GAAGA,IAAI,CAAC8P,KAAL,CAAW,CAAX,EAAcovB,SAAS,CAAChvB,KAAxB,IAAiClQ,IAAI,CAAC8P,KAAL,CAAWovB,SAAS,CAAChvB,KAAV,GAAkBgvB,SAAS,CAAC,CAAD,CAAT,CAAal7B,MAA1C,CAAxC;AACA,QAAI2pB,IAAI,GAAGuR,SAAS,CAAC,CAAD,CAAT,GAAe,SAAf,GAA2B,WAAtC;AACA,QAAIhhB,MAAM,CAACyP,IAAD,CAAN,IAAgB,IAApB,EACEzP,MAAM,CAACyP,IAAD,CAAN,GAAeuR,SAAS,CAAC,CAAD,CAAxB,CADF,KAEK,IAAI,CAAE,IAAIza,MAAJ,CAAW,cAAcya,SAAS,CAAC,CAAD,CAAvB,GAA6B,WAAxC,CAAD,CAAuDxa,IAAvD,CAA4DxG,MAAM,CAACyP,IAAD,CAAlE,CAAL,EACHzP,MAAM,CAACyP,IAAD,CAAN,IAAgB,MAAMuR,SAAS,CAAC,CAAD,CAA/B;AACH;AACD,SAAOl/B,IAAP;AACD;;;AAGD,SAASg9B,OAAT,CAAiBjJ,EAAjB,EAAqB7kB,IAArB,EAA2B6nB,IAA3B,EAAiC4F,OAAjC,EAA0CrP,CAA1C,EAA6CyP,WAA7C,EAA0DH,UAA1D,EAAsE;AACpE,MAAIuC,YAAY,GAAGpI,IAAI,CAACoI,YAAxB;AACA,MAAIA,YAAY,IAAI,IAApB,EAA0BA,YAAY,GAAGpL,EAAE,CAAC5S,OAAH,CAAWge,YAA1B;AAC1B,MAAIC,QAAQ,GAAG,CAAf;AAAA,MAAkBC,QAAQ,GAAG,IAA7B;AACA,MAAIb,MAAM,GAAG,IAAIrG,YAAJ,CAAiBjpB,IAAjB,EAAuB6kB,EAAE,CAAC5S,OAAH,CAAW2M,OAAlC,EAA2C6O,OAA3C,CAAb;AAAA,MAAkEx6B,KAAlE;AACA,MAAIu3B,KAAK,GAAG3F,EAAE,CAAC5S,OAAH,CAAWme,YAAX,IAA2B,CAAC,IAAD,CAAvC;AACA,MAAIpwB,IAAI,IAAI,EAAZ,EAAgB+vB,kBAAkB,CAACR,aAAa,CAAC1H,IAAD,EAAO4F,OAAO,CAAC7E,KAAf,CAAd,EAAqCiF,WAArC,CAAlB;;AAChB,SAAO,CAACyB,MAAM,CAAChG,GAAP,EAAR,EAAsB;AACpB,QAAIgG,MAAM,CAACpP,GAAP,GAAa2E,EAAE,CAAC5S,OAAH,CAAW0c,kBAA5B,EAAgD;AAC9CsB,MAAAA,YAAY,GAAG,KAAf;AACA,UAAIvC,UAAJ,EAAgBwB,WAAW,CAACrK,EAAD,EAAK7kB,IAAL,EAAWytB,OAAX,EAAoB6B,MAAM,CAACpP,GAA3B,CAAX;AAChBoP,MAAAA,MAAM,CAACpP,GAAP,GAAalgB,IAAI,CAAClL,MAAlB;AACA7B,MAAAA,KAAK,GAAG,IAAR;AACD,KALD,MAKO;AACLA,MAAAA,KAAK,GAAG88B,kBAAkB,CAACP,SAAS,CAAC3H,IAAD,EAAOyH,MAAP,EAAe7B,OAAO,CAAC7E,KAAvB,EAA8B4B,KAA9B,CAAV,EAAgDqD,WAAhD,CAA1B;AACD;;AACD,QAAIrD,KAAJ,EAAW;AACT,UAAI6F,KAAK,GAAG7F,KAAK,CAAC,CAAD,CAAL,CAAS1b,IAArB;AACA,UAAIuhB,KAAJ,EAAWp9B,KAAK,GAAG,QAAQA,KAAK,GAAGo9B,KAAK,GAAG,GAAR,GAAcp9B,KAAjB,GAAyBo9B,KAAtC,CAAR;AACZ;;AACD,QAAI,CAACJ,YAAD,IAAiBE,QAAQ,IAAIl9B,KAAjC,EAAwC;AACtC,aAAOi9B,QAAQ,GAAGZ,MAAM,CAAC1S,KAAzB,EAAgC;AAC9BsT,QAAAA,QAAQ,GAAGtyB,IAAI,CAACyiB,GAAL,CAASiP,MAAM,CAAC1S,KAAhB,EAAuBsT,QAAQ,GAAG,IAAlC,CAAX;AACA9R,QAAAA,CAAC,CAAC8R,QAAD,EAAWC,QAAX,CAAD;AACD;;AACDA,MAAAA,QAAQ,GAAGl9B,KAAX;AACD;;AACDq8B,IAAAA,MAAM,CAAC1S,KAAP,GAAe0S,MAAM,CAACpP,GAAtB;AACD;;AACD,SAAOgQ,QAAQ,GAAGZ,MAAM,CAACpP,GAAzB,EAA8B;AAC5B;AACA;AACA;AACA,QAAIA,GAAG,GAAGtiB,IAAI,CAACyiB,GAAL,CAASiP,MAAM,CAACpP,GAAhB,EAAqBgQ,QAAQ,GAAG,IAAhC,CAAV;AACA9R,IAAAA,CAAC,CAAC8B,GAAD,EAAMiQ,QAAN,CAAD;AACAD,IAAAA,QAAQ,GAAGhQ,GAAX;AACD;AACF;AAGD;AACA;AACA;AACA;;;AACA,SAAS+O,aAAT,CAAuBpK,EAAvB,EAA2B7F,CAA3B,EAA8BgQ,OAA9B,EAAuC;AACrC,MAAIsB,SAAJ;AAAA,MAAeC,OAAf;AAAA,MAAwB1F,GAAG,GAAGhG,EAAE,CAACgG,GAAjC;AACA,MAAI2F,GAAG,GAAGxB,OAAO,GAAG,CAAC,CAAJ,GAAQhQ,CAAC,IAAI6F,EAAE,CAACgG,GAAH,CAAOhD,IAAP,CAAYkB,SAAZ,GAAwB,IAAxB,GAA+B,GAAnC,CAA1B;;AACA,OAAK,IAAIhK,MAAM,GAAGC,CAAlB,EAAqBD,MAAM,GAAGyR,GAA9B,EAAmC,EAAEzR,MAArC,EAA6C;AAC3C,QAAIA,MAAM,IAAI8L,GAAG,CAACC,KAAlB,EAAyB,OAAOD,GAAG,CAACC,KAAX;AACzB,QAAI1G,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAM9L,MAAM,GAAG,CAAf,CAAlB;AAAA,QAAqCjD,KAAK,GAAGsI,IAAI,CAACwK,UAAlD;AACA,QAAI9S,KAAK,KAAK,CAACkT,OAAD,IAAYjQ,MAAM,IAAIjD,KAAK,YAAYgR,YAAjB,GAAgChR,KAAK,CAAC2O,SAAtC,GAAkD,CAAtD,CAAN,IAAkEI,GAAG,CAACkE,YAAvF,CAAT,EACE,OAAOhQ,MAAP;AACF,QAAI0R,QAAQ,GAAG/R,WAAW,CAAC0F,IAAI,CAACpkB,IAAN,EAAY,IAAZ,EAAkB6kB,EAAE,CAAC5S,OAAH,CAAW2M,OAA7B,CAA1B;;AACA,QAAI2R,OAAO,IAAI,IAAX,IAAmBD,SAAS,GAAGG,QAAnC,EAA6C;AAC3CF,MAAAA,OAAO,GAAGxR,MAAM,GAAG,CAAnB;AACAuR,MAAAA,SAAS,GAAGG,QAAZ;AACD;AACF;;AACD,SAAOF,OAAP;AACD;;AAED,AAAO,SAASG,eAAT,CAAyB7F,GAAzB,EAA8B7L,CAA9B,EAAiC;AACtC6L,EAAAA,GAAG,CAACkE,YAAJ,GAAmBnxB,IAAI,CAACyiB,GAAL,CAASwK,GAAG,CAACkE,YAAb,EAA2B/P,CAA3B,CAAnB;AACA,MAAI6L,GAAG,CAACiE,iBAAJ,GAAwB9P,CAAC,GAAG,EAAhC,EAAoC;AACpC,MAAIpC,KAAK,GAAGiO,GAAG,CAACC,KAAhB;;AACA,OAAK,IAAI1G,IAAI,GAAGpF,CAAC,GAAG,CAApB,EAAuBoF,IAAI,GAAGxH,KAA9B,EAAqCwH,IAAI,EAAzC,EAA6C;AAC3C,QAAIiJ,KAAK,GAAGzC,OAAO,CAACC,GAAD,EAAMzG,IAAN,CAAP,CAAmBwK,UAA/B,CAD2C;AAG3C;AACA;;AACA,QAAIvB,KAAK,KAAK,EAAEA,KAAK,YAAYP,YAAnB,KAAoC1I,IAAI,GAAGiJ,KAAK,CAAC5C,SAAb,GAAyBzL,CAAlE,CAAT,EAA+E;AAC7EpC,MAAAA,KAAK,GAAGwH,IAAI,GAAG,CAAf;AACA;AACD;AACF;;AACDyG,EAAAA,GAAG,CAACiE,iBAAJ,GAAwBlxB,IAAI,CAACyiB,GAAL,CAASwK,GAAG,CAACiE,iBAAb,EAAgClS,KAAhC,CAAxB;AACD;;AC3RD;AACA,AAAO,IAAI+T,gBAAgB,GAAG,KAAvB;AAAA,IAA8BC,iBAAiB,GAAG,KAAlD;AAEP,AAAO,SAASC,gBAAT,GAA4B;AACjCF,EAAAA,gBAAgB,GAAG,IAAnB;AACD;AAED,AAAO,SAASG,iBAAT,GAA6B;AAClCF,EAAAA,iBAAiB,GAAG,IAApB;AACD;;ACDM,SAASG,UAAT,CAAoBC,MAApB,EAA4B7c,IAA5B,EAAkC6N,EAAlC,EAAsC;AAC3C,OAAKgP,MAAL,GAAcA,MAAd;AACA,OAAK7c,IAAL,GAAYA,IAAZ;AAAkB,OAAK6N,EAAL,GAAUA,EAAV;AACnB;;AAGD,AAAO,SAASiP,gBAAT,CAA0BC,KAA1B,EAAiCF,MAAjC,EAAyC;AAC9C,MAAIE,KAAJ,EAAW,KAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AAChD,QAAIsrB,IAAI,GAAGD,KAAK,CAACrrB,CAAD,CAAhB;AACA,QAAIsrB,IAAI,CAACH,MAAL,IAAeA,MAAnB,EAA2B,OAAOG,IAAP;AAC5B;AACF;AAGD;;AACA,AAAO,SAASC,gBAAT,CAA0BF,KAA1B,EAAiCC,IAAjC,EAAuC;AAC5C,MAAIrU,CAAJ;;AACA,OAAK,IAAIjX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EACE,IAAIqrB,KAAK,CAACrrB,CAAD,CAAL,IAAYsrB,IAAhB,EAAsB,CAACrU,CAAC,KAAKA,CAAC,GAAG,EAAT,CAAF,EAAgB9X,IAAhB,CAAqBksB,KAAK,CAACrrB,CAAD,CAA1B;;AACxB,SAAOiX,CAAP;AACD;;AAGD,AAAO,SAASuU,aAAT,CAAuBjN,IAAvB,EAA6B+M,IAA7B,EAAmCG,EAAnC,EAAuC;AAC5C,MAAIC,QAAQ,GAAGD,EAAE,IAAI7rB,MAAM,CAAC+rB,OAAb,KAAyBF,EAAE,CAACG,WAAH,KAAmBH,EAAE,CAACG,WAAH,GAAiB,IAAID,OAAJ,EAApC,CAAzB,CAAf;;AACA,MAAID,QAAQ,IAAIA,QAAQ,CAAC9iB,GAAT,CAAa2V,IAAI,CAACqN,WAAlB,CAAhB,EAAgD;AAC9CrN,IAAAA,IAAI,CAACqN,WAAL,CAAiBzsB,IAAjB,CAAsBmsB,IAAtB;AACD,GAFD,MAEO;AACL/M,IAAAA,IAAI,CAACqN,WAAL,GAAmBrN,IAAI,CAACqN,WAAL,GAAmBrN,IAAI,CAACqN,WAAL,CAAiBjsB,MAAjB,CAAwB,CAAC2rB,IAAD,CAAxB,CAAnB,GAAqD,CAACA,IAAD,CAAxE;AACA,QAAII,QAAJ,EAAcA,QAAQ,CAACluB,GAAT,CAAa+gB,IAAI,CAACqN,WAAlB;AACf;;AACDN,EAAAA,IAAI,CAACH,MAAL,CAAYU,UAAZ,CAAuBtN,IAAvB;AACD;AAGD;AACA;AACA;;AACA,SAASuN,iBAAT,CAA2BC,GAA3B,EAAgCC,OAAhC,EAAyCC,QAAzC,EAAmD;AACjD,MAAIC,EAAJ;AACA,MAAIH,GAAJ,EAAS,KAAK,IAAI/rB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+rB,GAAG,CAAC98B,MAAxB,EAAgC,EAAE+Q,CAAlC,EAAqC;AAC5C,QAAIsrB,IAAI,GAAGS,GAAG,CAAC/rB,CAAD,CAAd;AAAA,QAAmBmrB,MAAM,GAAGG,IAAI,CAACH,MAAjC;AACA,QAAIgB,YAAY,GAAGb,IAAI,CAAChd,IAAL,IAAa,IAAb,KAAsB6c,MAAM,CAACiB,aAAP,GAAuBd,IAAI,CAAChd,IAAL,IAAa0d,OAApC,GAA8CV,IAAI,CAAChd,IAAL,GAAY0d,OAAhF,CAAnB;;AACA,QAAIG,YAAY,IAAIb,IAAI,CAAChd,IAAL,IAAa0d,OAAb,IAAwBb,MAAM,CAAClgC,IAAP,IAAe,UAAvC,KAAsD,CAACghC,QAAD,IAAa,CAACX,IAAI,CAACH,MAAL,CAAYkB,UAAhF,CAApB,EAAiH;AAC/G,UAAIC,SAAS,GAAGhB,IAAI,CAACnP,EAAL,IAAW,IAAX,KAAoBgP,MAAM,CAACoB,cAAP,GAAwBjB,IAAI,CAACnP,EAAL,IAAW6P,OAAnC,GAA6CV,IAAI,CAACnP,EAAL,GAAU6P,OAA3E,CAAhB;AACC,OAACE,EAAE,KAAKA,EAAE,GAAG,EAAV,CAAH,EAAkB/sB,IAAlB,CAAuB,IAAI+rB,UAAJ,CAAeC,MAAf,EAAuBG,IAAI,CAAChd,IAA5B,EAAkCge,SAAS,GAAG,IAAH,GAAUhB,IAAI,CAACnP,EAA1D,CAAvB;AACF;AACF;AACD,SAAO+P,EAAP;AACD;;AACD,SAASM,gBAAT,CAA0BT,GAA1B,EAA+BU,KAA/B,EAAsCR,QAAtC,EAAgD;AAC9C,MAAIC,EAAJ;AACA,MAAIH,GAAJ,EAAS,KAAK,IAAI/rB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+rB,GAAG,CAAC98B,MAAxB,EAAgC,EAAE+Q,CAAlC,EAAqC;AAC5C,QAAIsrB,IAAI,GAAGS,GAAG,CAAC/rB,CAAD,CAAd;AAAA,QAAmBmrB,MAAM,GAAGG,IAAI,CAACH,MAAjC;AACA,QAAImB,SAAS,GAAGhB,IAAI,CAACnP,EAAL,IAAW,IAAX,KAAoBgP,MAAM,CAACoB,cAAP,GAAwBjB,IAAI,CAACnP,EAAL,IAAWsQ,KAAnC,GAA2CnB,IAAI,CAACnP,EAAL,GAAUsQ,KAAzE,CAAhB;;AACA,QAAIH,SAAS,IAAIhB,IAAI,CAAChd,IAAL,IAAame,KAAb,IAAsBtB,MAAM,CAAClgC,IAAP,IAAe,UAArC,KAAoD,CAACghC,QAAD,IAAaX,IAAI,CAACH,MAAL,CAAYkB,UAA7E,CAAjB,EAA2G;AACzG,UAAIF,YAAY,GAAGb,IAAI,CAAChd,IAAL,IAAa,IAAb,KAAsB6c,MAAM,CAACiB,aAAP,GAAuBd,IAAI,CAAChd,IAAL,IAAame,KAApC,GAA4CnB,IAAI,CAAChd,IAAL,GAAYme,KAA9E,CAAnB;AACC,OAACP,EAAE,KAAKA,EAAE,GAAG,EAAV,CAAH,EAAkB/sB,IAAlB,CAAuB,IAAI+rB,UAAJ,CAAeC,MAAf,EAAuBgB,YAAY,GAAG,IAAH,GAAUb,IAAI,CAAChd,IAAL,GAAYme,KAAzD,EACcnB,IAAI,CAACnP,EAAL,IAAW,IAAX,GAAkB,IAAlB,GAAyBmP,IAAI,CAACnP,EAAL,GAAUsQ,KADjD,CAAvB;AAEF;AACF;AACD,SAAOP,EAAP;AACD;AAGD;AACA;AACA;AACA;AACA;;;AACA,AAAO,SAASQ,sBAAT,CAAgC1H,GAAhC,EAAqC2H,MAArC,EAA6C;AAClD,MAAIA,MAAM,CAACC,IAAX,EAAiB,OAAO,IAAP;AACjB,MAAIC,QAAQ,GAAG3G,MAAM,CAAClB,GAAD,EAAM2H,MAAM,CAACre,IAAP,CAAYiQ,IAAlB,CAAN,IAAiCwG,OAAO,CAACC,GAAD,EAAM2H,MAAM,CAACre,IAAP,CAAYiQ,IAAlB,CAAP,CAA+BqN,WAA/E;AACA,MAAIkB,OAAO,GAAG5G,MAAM,CAAClB,GAAD,EAAM2H,MAAM,CAACxQ,EAAP,CAAUoC,IAAhB,CAAN,IAA+BwG,OAAO,CAACC,GAAD,EAAM2H,MAAM,CAACxQ,EAAP,CAAUoC,IAAhB,CAAP,CAA6BqN,WAA1E;AACA,MAAI,CAACiB,QAAD,IAAa,CAACC,OAAlB,EAA2B,OAAO,IAAP;AAE3B,MAAId,OAAO,GAAGW,MAAM,CAACre,IAAP,CAAYkN,EAA1B;AAAA,MAA8BiR,KAAK,GAAGE,MAAM,CAACxQ,EAAP,CAAUX,EAAhD;AAAA,MAAoDyQ,QAAQ,GAAG1F,GAAG,CAACoG,MAAM,CAACre,IAAR,EAAcqe,MAAM,CAACxQ,EAArB,CAAH,IAA+B,CAA9F,CANkD;;AAQlD,MAAI8I,KAAK,GAAG6G,iBAAiB,CAACe,QAAD,EAAWb,OAAX,EAAoBC,QAApB,CAA7B;AACA,MAAIzwB,IAAI,GAAGgxB,gBAAgB,CAACM,OAAD,EAAUL,KAAV,EAAiBR,QAAjB,CAA3B,CATkD;;AAYlD,MAAIc,QAAQ,GAAGJ,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,IAAsB,CAArC;AAAA,MAAwC+9B,MAAM,GAAGrS,GAAG,CAACgS,MAAM,CAACxyB,IAAR,CAAH,CAAiBlL,MAAjB,IAA2B89B,QAAQ,GAAGf,OAAH,GAAa,CAAhD,CAAjD;;AACA,MAAI/G,KAAJ,EAAW;AACT;AACA,SAAK,IAAIjlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGilB,KAAK,CAACh2B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,UAAIsrB,IAAI,GAAGrG,KAAK,CAACjlB,CAAD,CAAhB;;AACA,UAAIsrB,IAAI,CAACnP,EAAL,IAAW,IAAf,EAAqB;AACnB,YAAIM,KAAK,GAAG2O,gBAAgB,CAAC5vB,IAAD,EAAO8vB,IAAI,CAACH,MAAZ,CAA5B;AACA,YAAI,CAAC1O,KAAL,EAAY6O,IAAI,CAACnP,EAAL,GAAU6P,OAAV,CAAZ,KACK,IAAIe,QAAJ,EAAczB,IAAI,CAACnP,EAAL,GAAUM,KAAK,CAACN,EAAN,IAAY,IAAZ,GAAmB,IAAnB,GAA0BM,KAAK,CAACN,EAAN,GAAW6Q,MAA/C;AACpB;AACF;AACF;;AACD,MAAIxxB,IAAJ,EAAU;AACR;AACA,SAAK,IAAIwE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxE,IAAI,CAACvM,MAAzB,EAAiC,EAAE+Q,CAAnC,EAAsC;AACpC,UAAIsrB,IAAI,GAAG9vB,IAAI,CAACwE,CAAD,CAAf;AACA,UAAIsrB,IAAI,CAACnP,EAAL,IAAW,IAAf,EAAqBmP,IAAI,CAACnP,EAAL,IAAW6Q,MAAX;;AACrB,UAAI1B,IAAI,CAAChd,IAAL,IAAa,IAAjB,EAAuB;AACrB,YAAImO,KAAK,GAAG2O,gBAAgB,CAACnG,KAAD,EAAQqG,IAAI,CAACH,MAAb,CAA5B;;AACA,YAAI,CAAC1O,KAAL,EAAY;AACV6O,UAAAA,IAAI,CAAChd,IAAL,GAAY0e,MAAZ;AACA,cAAID,QAAJ,EAAc,CAAC9H,KAAK,KAAKA,KAAK,GAAG,EAAb,CAAN,EAAwB9lB,IAAxB,CAA6BmsB,IAA7B;AACf;AACF,OAND,MAMO;AACLA,QAAAA,IAAI,CAAChd,IAAL,IAAa0e,MAAb;AACA,YAAID,QAAJ,EAAc,CAAC9H,KAAK,KAAKA,KAAK,GAAG,EAAb,CAAN,EAAwB9lB,IAAxB,CAA6BmsB,IAA7B;AACf;AACF;AACF,GAxCiD;;;AA0ClD,MAAIrG,KAAJ,EAAWA,KAAK,GAAGgI,eAAe,CAAChI,KAAD,CAAvB;AACX,MAAIzpB,IAAI,IAAIA,IAAI,IAAIypB,KAApB,EAA2BzpB,IAAI,GAAGyxB,eAAe,CAACzxB,IAAD,CAAtB;AAE3B,MAAI0xB,UAAU,GAAG,CAACjI,KAAD,CAAjB;;AACA,MAAI,CAAC8H,QAAL,EAAe;AACb;AACA,QAAII,GAAG,GAAGR,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,GAAqB,CAA/B;AAAA,QAAkCm+B,UAAlC;AACA,QAAID,GAAG,GAAG,CAAN,IAAWlI,KAAf,EACE,KAAK,IAAIjlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGilB,KAAK,CAACh2B,MAA1B,EAAkC,EAAE+Q,CAApC,EACE,IAAIilB,KAAK,CAACjlB,CAAD,CAAL,CAASmc,EAAT,IAAe,IAAnB,EACE,CAACiR,UAAU,KAAKA,UAAU,GAAG,EAAlB,CAAX,EAAkCjuB,IAAlC,CAAuC,IAAI+rB,UAAJ,CAAejG,KAAK,CAACjlB,CAAD,CAAL,CAASmrB,MAAxB,EAAgC,IAAhC,EAAsC,IAAtC,CAAvC;;AACN,SAAK,IAAInrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmtB,GAApB,EAAyB,EAAEntB,CAA3B,EACEktB,UAAU,CAAC/tB,IAAX,CAAgBiuB,UAAhB;;AACFF,IAAAA,UAAU,CAAC/tB,IAAX,CAAgB3D,IAAhB;AACD;;AACD,SAAO0xB,UAAP;AACD;AAGD;;AACA,SAASD,eAAT,CAAyB5B,KAAzB,EAAgC;AAC9B,OAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,QAAIsrB,IAAI,GAAGD,KAAK,CAACrrB,CAAD,CAAhB;AACA,QAAIsrB,IAAI,CAAChd,IAAL,IAAa,IAAb,IAAqBgd,IAAI,CAAChd,IAAL,IAAagd,IAAI,CAACnP,EAAvC,IAA6CmP,IAAI,CAACH,MAAL,CAAYkC,cAAZ,KAA+B,KAAhF,EACEhC,KAAK,CAACjrB,MAAN,CAAaJ,CAAC,EAAd,EAAkB,CAAlB;AACH;;AACD,MAAI,CAACqrB,KAAK,CAACp8B,MAAX,EAAmB,OAAO,IAAP;AACnB,SAAOo8B,KAAP;AACD;;;AAGD,AAAO,SAASiC,oBAAT,CAA8BtI,GAA9B,EAAmC1W,IAAnC,EAAyC6N,EAAzC,EAA6C;AAClD,MAAIoR,OAAO,GAAG,IAAd;AACAvI,EAAAA,GAAG,CAACQ,IAAJ,CAASlX,IAAI,CAACiQ,IAAd,EAAoBpC,EAAE,CAACoC,IAAH,GAAU,CAA9B,EAAiCA,IAAI,IAAI;AACvC,QAAIA,IAAI,CAACqN,WAAT,EAAsB,KAAK,IAAI5rB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGue,IAAI,CAACqN,WAAL,CAAiB38B,MAArC,EAA6C,EAAE+Q,CAA/C,EAAkD;AACtE,UAAIwtB,IAAI,GAAGjP,IAAI,CAACqN,WAAL,CAAiB5rB,CAAjB,EAAoBmrB,MAA/B;AACA,UAAIqC,IAAI,CAACvhC,QAAL,KAAkB,CAACshC,OAAD,IAAYtuB,OAAO,CAACsuB,OAAD,EAAUC,IAAV,CAAP,IAA0B,CAAC,CAAzD,CAAJ,EACE,CAACD,OAAO,KAAKA,OAAO,GAAG,EAAf,CAAR,EAA4BpuB,IAA5B,CAAiCquB,IAAjC;AACH;AACF,GAND;AAOA,MAAI,CAACD,OAAL,EAAc,OAAO,IAAP;AACd,MAAIE,KAAK,GAAG,CAAC;AAACnf,IAAAA,IAAI,EAAEA,IAAP;AAAa6N,IAAAA,EAAE,EAAEA;AAAjB,GAAD,CAAZ;;AACA,OAAK,IAAInc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGutB,OAAO,CAACt+B,MAA5B,EAAoC,EAAE+Q,CAAtC,EAAyC;AACvC,QAAI0tB,EAAE,GAAGH,OAAO,CAACvtB,CAAD,CAAhB;AAAA,QAAqBge,CAAC,GAAG0P,EAAE,CAACC,IAAH,CAAQ,CAAR,CAAzB;;AACA,SAAK,IAAI7P,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2P,KAAK,CAACx+B,MAA1B,EAAkC,EAAE6uB,CAApC,EAAuC;AACrC,UAAI8P,CAAC,GAAGH,KAAK,CAAC3P,CAAD,CAAb;AACA,UAAIyI,GAAG,CAACqH,CAAC,CAACzR,EAAH,EAAO6B,CAAC,CAAC1P,IAAT,CAAH,GAAoB,CAApB,IAAyBiY,GAAG,CAACqH,CAAC,CAACtf,IAAH,EAAS0P,CAAC,CAAC7B,EAAX,CAAH,GAAoB,CAAjD,EAAoD;AACpD,UAAI0R,QAAQ,GAAG,CAAC/P,CAAD,EAAI,CAAJ,CAAf;AAAA,UAAuBgQ,KAAK,GAAGvH,GAAG,CAACqH,CAAC,CAACtf,IAAH,EAAS0P,CAAC,CAAC1P,IAAX,CAAlC;AAAA,UAAoDyf,GAAG,GAAGxH,GAAG,CAACqH,CAAC,CAACzR,EAAH,EAAO6B,CAAC,CAAC7B,EAAT,CAA7D;AACA,UAAI2R,KAAK,GAAG,CAAR,IAAa,CAACJ,EAAE,CAACtB,aAAJ,IAAqB,CAAC0B,KAAvC,EACED,QAAQ,CAAC1uB,IAAT,CAAc;AAACmP,QAAAA,IAAI,EAAEsf,CAAC,CAACtf,IAAT;AAAe6N,QAAAA,EAAE,EAAE6B,CAAC,CAAC1P;AAArB,OAAd;AACF,UAAIyf,GAAG,GAAG,CAAN,IAAW,CAACL,EAAE,CAACnB,cAAJ,IAAsB,CAACwB,GAAtC,EACEF,QAAQ,CAAC1uB,IAAT,CAAc;AAACmP,QAAAA,IAAI,EAAE0P,CAAC,CAAC7B,EAAT;AAAaA,QAAAA,EAAE,EAAEyR,CAAC,CAACzR;AAAnB,OAAd;AACFsR,MAAAA,KAAK,CAACrtB,MAAN,CAAaoY,KAAb,CAAmBiV,KAAnB,EAA0BI,QAA1B;AACA/P,MAAAA,CAAC,IAAI+P,QAAQ,CAAC5+B,MAAT,GAAkB,CAAvB;AACD;AACF;;AACD,SAAOw+B,KAAP;AACD;;AAGD,AAAO,SAASO,iBAAT,CAA2BzP,IAA3B,EAAiC;AACtC,MAAI8M,KAAK,GAAG9M,IAAI,CAACqN,WAAjB;AACA,MAAI,CAACP,KAAL,EAAY;;AACZ,OAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EACEqrB,KAAK,CAACrrB,CAAD,CAAL,CAASmrB,MAAT,CAAgB8C,UAAhB,CAA2B1P,IAA3B;;AACFA,EAAAA,IAAI,CAACqN,WAAL,GAAmB,IAAnB;AACD;AACD,AAAO,SAASsC,iBAAT,CAA2B3P,IAA3B,EAAiC8M,KAAjC,EAAwC;AAC7C,MAAI,CAACA,KAAL,EAAY;;AACZ,OAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EACEqrB,KAAK,CAACrrB,CAAD,CAAL,CAASmrB,MAAT,CAAgBU,UAAhB,CAA2BtN,IAA3B;;AACFA,EAAAA,IAAI,CAACqN,WAAL,GAAmBP,KAAnB;AACD;AAGD;;AACA,SAAS8C,SAAT,CAAmBhD,MAAnB,EAA2B;AAAE,SAAOA,MAAM,CAACiB,aAAP,GAAuB,CAAC,CAAxB,GAA4B,CAAnC;AAAsC;;AACnE,SAASgC,UAAT,CAAoBjD,MAApB,EAA4B;AAAE,SAAOA,MAAM,CAACoB,cAAP,GAAwB,CAAxB,GAA4B,CAAnC;AAAsC;AAGpE;AACA;;;AACA,AAAO,SAAS8B,uBAAT,CAAiCtmB,CAAjC,EAAoCiQ,CAApC,EAAuC;AAC5C,MAAIsW,OAAO,GAAGvmB,CAAC,CAACod,KAAF,CAAQl2B,MAAR,GAAiB+oB,CAAC,CAACmN,KAAF,CAAQl2B,MAAvC;AACA,MAAIq/B,OAAO,IAAI,CAAf,EAAkB,OAAOA,OAAP;AAClB,MAAIC,IAAI,GAAGxmB,CAAC,CAAC4lB,IAAF,EAAX;AAAA,MAAqBa,IAAI,GAAGxW,CAAC,CAAC2V,IAAF,EAA5B;AACA,MAAIc,OAAO,GAAGlI,GAAG,CAACgI,IAAI,CAACjgB,IAAN,EAAYkgB,IAAI,CAAClgB,IAAjB,CAAH,IAA6B6f,SAAS,CAACpmB,CAAD,CAAT,GAAeomB,SAAS,CAACnW,CAAD,CAAnE;AACA,MAAIyW,OAAJ,EAAa,OAAO,CAACA,OAAR;AACb,MAAIC,KAAK,GAAGnI,GAAG,CAACgI,IAAI,CAACpS,EAAN,EAAUqS,IAAI,CAACrS,EAAf,CAAH,IAAyBiS,UAAU,CAACrmB,CAAD,CAAV,GAAgBqmB,UAAU,CAACpW,CAAD,CAA/D;AACA,MAAI0W,KAAJ,EAAW,OAAOA,KAAP;AACX,SAAO1W,CAAC,CAACzb,EAAF,GAAOwL,CAAC,CAACxL,EAAhB;AACD;AAGD;;AACA,SAASoyB,mBAAT,CAA6BpQ,IAA7B,EAAmCxH,KAAnC,EAA0C;AACxC,MAAI6X,GAAG,GAAG7D,iBAAiB,IAAIxM,IAAI,CAACqN,WAApC;AAAA,MAAiDnP,KAAjD;AACA,MAAImS,GAAJ,EAAS,KAAK,IAAIC,EAAJ,EAAQ7uB,CAAC,GAAG,CAAjB,EAAoBA,CAAC,GAAG4uB,GAAG,CAAC3/B,MAA5B,EAAoC,EAAE+Q,CAAtC,EAAyC;AAChD6uB,IAAAA,EAAE,GAAGD,GAAG,CAAC5uB,CAAD,CAAR;AACA,QAAI6uB,EAAE,CAAC1D,MAAH,CAAU2D,SAAV,IAAuB,CAAC/X,KAAK,GAAG8X,EAAE,CAACvgB,IAAN,GAAaugB,EAAE,CAAC1S,EAAtB,KAA6B,IAApD,KACC,CAACM,KAAD,IAAU4R,uBAAuB,CAAC5R,KAAD,EAAQoS,EAAE,CAAC1D,MAAX,CAAvB,GAA4C,CADvD,CAAJ,EAEE1O,KAAK,GAAGoS,EAAE,CAAC1D,MAAX;AACH;AACD,SAAO1O,KAAP;AACD;;AACD,AAAO,SAASsS,oBAAT,CAA8BxQ,IAA9B,EAAoC;AAAE,SAAOoQ,mBAAmB,CAACpQ,IAAD,EAAO,IAAP,CAA1B;AAAwC;AACrF,AAAO,SAASyQ,kBAAT,CAA4BzQ,IAA5B,EAAkC;AAAE,SAAOoQ,mBAAmB,CAACpQ,IAAD,EAAO,KAAP,CAA1B;AAAyC;AAEpF,AAAO,SAAS0Q,mBAAT,CAA6B1Q,IAA7B,EAAmC/C,EAAnC,EAAuC;AAC5C,MAAIoT,GAAG,GAAG7D,iBAAiB,IAAIxM,IAAI,CAACqN,WAApC;AAAA,MAAiDnP,KAAjD;AACA,MAAImS,GAAJ,EAAS,KAAK,IAAI5uB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4uB,GAAG,CAAC3/B,MAAxB,EAAgC,EAAE+Q,CAAlC,EAAqC;AAC5C,QAAI6uB,EAAE,GAAGD,GAAG,CAAC5uB,CAAD,CAAZ;AACA,QAAI6uB,EAAE,CAAC1D,MAAH,CAAU2D,SAAV,KAAwBD,EAAE,CAACvgB,IAAH,IAAW,IAAX,IAAmBugB,EAAE,CAACvgB,IAAH,GAAUkN,EAArD,MAA6DqT,EAAE,CAAC1S,EAAH,IAAS,IAAT,IAAiB0S,EAAE,CAAC1S,EAAH,GAAQX,EAAtF,MACC,CAACiB,KAAD,IAAU4R,uBAAuB,CAAC5R,KAAD,EAAQoS,EAAE,CAAC1D,MAAX,CAAvB,GAA4C,CADvD,CAAJ,EAC+D1O,KAAK,GAAGoS,EAAE,CAAC1D,MAAX;AAChE;AACD,SAAO1O,KAAP;AACD;AAGD;AACA;;AACA,AAAO,SAASyS,yBAAT,CAAmClK,GAAnC,EAAwCY,MAAxC,EAAgDtX,IAAhD,EAAsD6N,EAAtD,EAA0DgP,MAA1D,EAAkE;AACvE,MAAI5M,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAMY,MAAN,CAAlB;AACA,MAAIgJ,GAAG,GAAG7D,iBAAiB,IAAIxM,IAAI,CAACqN,WAApC;AACA,MAAIgD,GAAJ,EAAS,KAAK,IAAI5uB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4uB,GAAG,CAAC3/B,MAAxB,EAAgC,EAAE+Q,CAAlC,EAAqC;AAC5C,QAAI6uB,EAAE,GAAGD,GAAG,CAAC5uB,CAAD,CAAZ;AACA,QAAI,CAAC6uB,EAAE,CAAC1D,MAAH,CAAU2D,SAAf,EAA0B;AAC1B,QAAIrS,KAAK,GAAGoS,EAAE,CAAC1D,MAAH,CAAUwC,IAAV,CAAe,CAAf,CAAZ;AACA,QAAIc,OAAO,GAAGlI,GAAG,CAAC9J,KAAK,CAACnO,IAAP,EAAaA,IAAb,CAAH,IAAyB6f,SAAS,CAACU,EAAE,CAAC1D,MAAJ,CAAT,GAAuBgD,SAAS,CAAChD,MAAD,CAAvE;AACA,QAAIuD,KAAK,GAAGnI,GAAG,CAAC9J,KAAK,CAACN,EAAP,EAAWA,EAAX,CAAH,IAAqBiS,UAAU,CAACS,EAAE,CAAC1D,MAAJ,CAAV,GAAwBiD,UAAU,CAACjD,MAAD,CAAnE;AACA,QAAIsD,OAAO,IAAI,CAAX,IAAgBC,KAAK,IAAI,CAAzB,IAA8BD,OAAO,IAAI,CAAX,IAAgBC,KAAK,IAAI,CAA3D,EAA8D;AAC9D,QAAID,OAAO,IAAI,CAAX,KAAiBI,EAAE,CAAC1D,MAAH,CAAUoB,cAAV,IAA4BpB,MAAM,CAACiB,aAAnC,GAAmD7F,GAAG,CAAC9J,KAAK,CAACN,EAAP,EAAW7N,IAAX,CAAH,IAAuB,CAA1E,GAA8EiY,GAAG,CAAC9J,KAAK,CAACN,EAAP,EAAW7N,IAAX,CAAH,GAAsB,CAArH,KACAmgB,OAAO,IAAI,CAAX,KAAiBI,EAAE,CAAC1D,MAAH,CAAUoB,cAAV,IAA4BpB,MAAM,CAACiB,aAAnC,GAAmD7F,GAAG,CAAC9J,KAAK,CAACnO,IAAP,EAAa6N,EAAb,CAAH,IAAuB,CAA1E,GAA8EoK,GAAG,CAAC9J,KAAK,CAACnO,IAAP,EAAa6N,EAAb,CAAH,GAAsB,CAArH,CADJ,EAEE,OAAO,IAAP;AACH;AACF;AAGD;AACA;AACA;;AACA,AAAO,SAASgT,UAAT,CAAoB5Q,IAApB,EAA0B;AAC/B,MAAI6Q,MAAJ;;AACA,SAAOA,MAAM,GAAGL,oBAAoB,CAACxQ,IAAD,CAApC,EACEA,IAAI,GAAG6Q,MAAM,CAACzB,IAAP,CAAY,CAAC,CAAb,EAAgB,IAAhB,EAAsBpP,IAA7B;;AACF,SAAOA,IAAP;AACD;AAED,AAAO,SAAS8Q,aAAT,CAAuB9Q,IAAvB,EAA6B;AAClC,MAAI6Q,MAAJ;;AACA,SAAOA,MAAM,GAAGJ,kBAAkB,CAACzQ,IAAD,CAAlC,EACEA,IAAI,GAAG6Q,MAAM,CAACzB,IAAP,CAAY,CAAZ,EAAe,IAAf,EAAqBpP,IAA5B;;AACF,SAAOA,IAAP;AACD;AAGD;;AACA,AAAO,SAAS+Q,mBAAT,CAA6B/Q,IAA7B,EAAmC;AACxC,MAAI6Q,MAAJ,EAAYjK,KAAZ;;AACA,SAAOiK,MAAM,GAAGJ,kBAAkB,CAACzQ,IAAD,CAAlC,EAA0C;AACxCA,IAAAA,IAAI,GAAG6Q,MAAM,CAACzB,IAAP,CAAY,CAAZ,EAAe,IAAf,EAAqBpP,IAA5B;AACC,KAAC4G,KAAK,KAAKA,KAAK,GAAG,EAAb,CAAN,EAAwBhmB,IAAxB,CAA6Bof,IAA7B;AACF;;AACD,SAAO4G,KAAP;AACD;AAGD;;AACA,AAAO,SAASoK,YAAT,CAAsBvK,GAAtB,EAA2BwK,KAA3B,EAAkC;AACvC,MAAIjR,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAMwK,KAAN,CAAlB;AAAA,MAAgCC,GAAG,GAAGN,UAAU,CAAC5Q,IAAD,CAAhD;AACA,MAAIA,IAAI,IAAIkR,GAAZ,EAAiB,OAAOD,KAAP;AACjB,SAAO5J,MAAM,CAAC6J,GAAD,CAAb;AACD;AAGD;;AACA,AAAO,SAASC,eAAT,CAAyB1K,GAAzB,EAA8BwK,KAA9B,EAAqC;AAC1C,MAAIA,KAAK,GAAGxK,GAAG,CAAC2K,QAAJ,EAAZ,EAA4B,OAAOH,KAAP;AAC5B,MAAIjR,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAMwK,KAAN,CAAlB;AAAA,MAAgCJ,MAAhC;AACA,MAAI,CAACQ,YAAY,CAAC5K,GAAD,EAAMzG,IAAN,CAAjB,EAA8B,OAAOiR,KAAP;;AAC9B,SAAOJ,MAAM,GAAGJ,kBAAkB,CAACzQ,IAAD,CAAlC,EACEA,IAAI,GAAG6Q,MAAM,CAACzB,IAAP,CAAY,CAAZ,EAAe,IAAf,EAAqBpP,IAA5B;;AACF,SAAOqH,MAAM,CAACrH,IAAD,CAAN,GAAe,CAAtB;AACD;AAGD;AACA;;AACA,AAAO,SAASqR,YAAT,CAAsB5K,GAAtB,EAA2BzG,IAA3B,EAAiC;AACtC,MAAIqQ,GAAG,GAAG7D,iBAAiB,IAAIxM,IAAI,CAACqN,WAApC;AACA,MAAIgD,GAAJ,EAAS,KAAK,IAAIC,EAAJ,EAAQ7uB,CAAC,GAAG,CAAjB,EAAoBA,CAAC,GAAG4uB,GAAG,CAAC3/B,MAA5B,EAAoC,EAAE+Q,CAAtC,EAAyC;AAChD6uB,IAAAA,EAAE,GAAGD,GAAG,CAAC5uB,CAAD,CAAR;AACA,QAAI,CAAC6uB,EAAE,CAAC1D,MAAH,CAAU2D,SAAf,EAA0B;AAC1B,QAAID,EAAE,CAACvgB,IAAH,IAAW,IAAf,EAAqB,OAAO,IAAP;AACrB,QAAIugB,EAAE,CAAC1D,MAAH,CAAU0E,UAAd,EAA0B;AAC1B,QAAIhB,EAAE,CAACvgB,IAAH,IAAW,CAAX,IAAgBugB,EAAE,CAAC1D,MAAH,CAAUiB,aAA1B,IAA2C0D,iBAAiB,CAAC9K,GAAD,EAAMzG,IAAN,EAAYsQ,EAAZ,CAAhE,EACE,OAAO,IAAP;AACH;AACF;;AACD,SAASiB,iBAAT,CAA2B9K,GAA3B,EAAgCzG,IAAhC,EAAsC+M,IAAtC,EAA4C;AAC1C,MAAIA,IAAI,CAACnP,EAAL,IAAW,IAAf,EAAqB;AACnB,QAAIta,GAAG,GAAGypB,IAAI,CAACH,MAAL,CAAYwC,IAAZ,CAAiB,CAAjB,EAAoB,IAApB,CAAV;AACA,WAAOmC,iBAAiB,CAAC9K,GAAD,EAAMnjB,GAAG,CAAC0c,IAAV,EAAgB6M,gBAAgB,CAACvpB,GAAG,CAAC0c,IAAJ,CAASqN,WAAV,EAAuBN,IAAI,CAACH,MAA5B,CAAhC,CAAxB;AACD;;AACD,MAAIG,IAAI,CAACH,MAAL,CAAYoB,cAAZ,IAA8BjB,IAAI,CAACnP,EAAL,IAAWoC,IAAI,CAACpkB,IAAL,CAAUlL,MAAvD,EACE,OAAO,IAAP;;AACF,OAAK,IAAI4/B,EAAJ,EAAQ7uB,CAAC,GAAG,CAAjB,EAAoBA,CAAC,GAAGue,IAAI,CAACqN,WAAL,CAAiB38B,MAAzC,EAAiD,EAAE+Q,CAAnD,EAAsD;AACpD6uB,IAAAA,EAAE,GAAGtQ,IAAI,CAACqN,WAAL,CAAiB5rB,CAAjB,CAAL;AACA,QAAI6uB,EAAE,CAAC1D,MAAH,CAAU2D,SAAV,IAAuB,CAACD,EAAE,CAAC1D,MAAH,CAAU0E,UAAlC,IAAgDhB,EAAE,CAACvgB,IAAH,IAAWgd,IAAI,CAACnP,EAAhE,KACC0S,EAAE,CAAC1S,EAAH,IAAS,IAAT,IAAiB0S,EAAE,CAAC1S,EAAH,IAASmP,IAAI,CAAChd,IADhC,MAECugB,EAAE,CAAC1D,MAAH,CAAUiB,aAAV,IAA2Bd,IAAI,CAACH,MAAL,CAAYoB,cAFxC,KAGAuD,iBAAiB,CAAC9K,GAAD,EAAMzG,IAAN,EAAYsQ,EAAZ,CAHrB,EAGsC,OAAO,IAAP;AACvC;AACF;;;AAGD,AAAO,SAASkB,YAAT,CAAsBC,OAAtB,EAA+B;AACpCA,EAAAA,OAAO,GAAGb,UAAU,CAACa,OAAD,CAApB;AAEA,MAAIjK,CAAC,GAAG,CAAR;AAAA,MAAWb,KAAK,GAAG8K,OAAO,CAACzZ,MAA3B;;AACA,OAAK,IAAIvW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGklB,KAAK,CAACC,KAAN,CAAYl2B,MAAhC,EAAwC,EAAE+Q,CAA1C,EAA6C;AAC3C,QAAIue,IAAI,GAAG2G,KAAK,CAACC,KAAN,CAAYnlB,CAAZ,CAAX;AACA,QAAIue,IAAI,IAAIyR,OAAZ,EAAqB,MAArB,KACKjK,CAAC,IAAIxH,IAAI,CAACjyB,MAAV;AACN;;AACD,OAAK,IAAIshC,CAAC,GAAG1I,KAAK,CAAC3O,MAAnB,EAA2BqX,CAA3B,EAA8B1I,KAAK,GAAG0I,CAAR,EAAWA,CAAC,GAAG1I,KAAK,CAAC3O,MAAnD,EAA2D;AACzD,SAAK,IAAIvW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,CAAC,CAACxI,QAAF,CAAWn2B,MAA/B,EAAuC,EAAE+Q,CAAzC,EAA4C;AAC1C,UAAIgd,GAAG,GAAG4Q,CAAC,CAACxI,QAAF,CAAWplB,CAAX,CAAV;AACA,UAAIgd,GAAG,IAAIkI,KAAX,EAAkB,MAAlB,KACKa,CAAC,IAAI/I,GAAG,CAAC1wB,MAAT;AACN;AACF;;AACD,SAAOy5B,CAAP;AACD;AAGD;AACA;;AACA,AAAO,SAASkK,UAAT,CAAoB1R,IAApB,EAA0B;AAC/B,MAAIA,IAAI,CAACjyB,MAAL,IAAe,CAAnB,EAAsB,OAAO,CAAP;AACtB,MAAIia,GAAG,GAAGgY,IAAI,CAACpkB,IAAL,CAAUlL,MAApB;AAAA,MAA4BmgC,MAA5B;AAAA,MAAoCpS,GAAG,GAAGuB,IAA1C;;AACA,SAAO6Q,MAAM,GAAGL,oBAAoB,CAAC/R,GAAD,CAApC,EAA2C;AACzC,QAAIP,KAAK,GAAG2S,MAAM,CAACzB,IAAP,CAAY,CAAZ,EAAe,IAAf,CAAZ;AACA3Q,IAAAA,GAAG,GAAGP,KAAK,CAACnO,IAAN,CAAWiQ,IAAjB;AACAhY,IAAAA,GAAG,IAAIkW,KAAK,CAACnO,IAAN,CAAWkN,EAAX,GAAgBiB,KAAK,CAACN,EAAN,CAASX,EAAhC;AACD;;AACDwB,EAAAA,GAAG,GAAGuB,IAAN;;AACA,SAAO6Q,MAAM,GAAGJ,kBAAkB,CAAChS,GAAD,CAAlC,EAAyC;AACvC,QAAIP,KAAK,GAAG2S,MAAM,CAACzB,IAAP,CAAY,CAAZ,EAAe,IAAf,CAAZ;AACApnB,IAAAA,GAAG,IAAIyW,GAAG,CAAC7iB,IAAJ,CAASlL,MAAT,GAAkBwtB,KAAK,CAACnO,IAAN,CAAWkN,EAApC;AACAwB,IAAAA,GAAG,GAAGP,KAAK,CAACN,EAAN,CAASoC,IAAf;AACAhY,IAAAA,GAAG,IAAIyW,GAAG,CAAC7iB,IAAJ,CAASlL,MAAT,GAAkBwtB,KAAK,CAACN,EAAN,CAASX,EAAlC;AACD;;AACD,SAAOjV,GAAP;AACD;;AAGD,AAAO,SAAS2pB,WAAT,CAAqBlR,EAArB,EAAyB;AAC9B,MAAImR,CAAC,GAAGnR,EAAE,CAACplB,OAAX;AAAA,MAAoBorB,GAAG,GAAGhG,EAAE,CAACgG,GAA7B;AACAmL,EAAAA,CAAC,CAACC,OAAF,GAAYrL,OAAO,CAACC,GAAD,EAAMA,GAAG,CAACC,KAAV,CAAnB;AACAkL,EAAAA,CAAC,CAACE,aAAF,GAAkBJ,UAAU,CAACE,CAAC,CAACC,OAAH,CAA5B;AACAD,EAAAA,CAAC,CAACG,cAAF,GAAmB,IAAnB;AACAtL,EAAAA,GAAG,CAACQ,IAAJ,CAASjH,IAAI,IAAI;AACf,QAAIhY,GAAG,GAAG0pB,UAAU,CAAC1R,IAAD,CAApB;;AACA,QAAIhY,GAAG,GAAG4pB,CAAC,CAACE,aAAZ,EAA2B;AACzBF,MAAAA,CAAC,CAACE,aAAF,GAAkB9pB,GAAlB;AACA4pB,MAAAA,CAAC,CAACC,OAAF,GAAY7R,IAAZ;AACD;AACF,GAND;AAOD;;ACxXD;AACA;;AACA,AAAO,MAAMgS,IAAN,CAAW;AAChBv8B,EAAAA,WAAW,CAACmG,IAAD,EAAOyxB,WAAP,EAAoB4E,cAApB,EAAoC;AAC7C,SAAKr2B,IAAL,GAAYA,IAAZ;AACA+zB,IAAAA,iBAAiB,CAAC,IAAD,EAAOtC,WAAP,CAAjB;AACA,SAAKt/B,MAAL,GAAckkC,cAAc,GAAGA,cAAc,CAAC,IAAD,CAAjB,GAA0B,CAAtD;AACD;;AAED5K,EAAAA,MAAM,GAAG;AAAE,WAAOA,MAAM,CAAC,IAAD,CAAb;AAAqB;;AAPhB;AASlBlG,UAAU,CAAC6Q,IAAD,CAAV;AAGA;AACA;;AACA,AAAO,SAASE,UAAT,CAAoBlS,IAApB,EAA0BpkB,IAA1B,EAAgCyxB,WAAhC,EAA6C4E,cAA7C,EAA6D;AAClEjS,EAAAA,IAAI,CAACpkB,IAAL,GAAYA,IAAZ;AACA,MAAIokB,IAAI,CAACwK,UAAT,EAAqBxK,IAAI,CAACwK,UAAL,GAAkB,IAAlB;AACrB,MAAIxK,IAAI,CAACzpB,MAAT,EAAiBypB,IAAI,CAACzpB,MAAL,GAAc,IAAd;AACjB,MAAIypB,IAAI,CAAC/B,KAAL,IAAc,IAAlB,EAAwB+B,IAAI,CAAC/B,KAAL,GAAa,IAAb;AACxBwR,EAAAA,iBAAiB,CAACzP,IAAD,CAAjB;AACA2P,EAAAA,iBAAiB,CAAC3P,IAAD,EAAOqN,WAAP,CAAjB;AACA,MAAI8E,SAAS,GAAGF,cAAc,GAAGA,cAAc,CAACjS,IAAD,CAAjB,GAA0B,CAAxD;AACA,MAAImS,SAAS,IAAInS,IAAI,CAACjyB,MAAtB,EAA8Bo5B,gBAAgB,CAACnH,IAAD,EAAOmS,SAAP,CAAhB;AAC/B;;AAGD,AAAO,SAASC,WAAT,CAAqBpS,IAArB,EAA2B;AAChCA,EAAAA,IAAI,CAAChI,MAAL,GAAc,IAAd;AACAyX,EAAAA,iBAAiB,CAACzP,IAAD,CAAjB;AACD;AAGD;AACA;;AACA,IAAIqS,iBAAiB,GAAG,EAAxB;AAAA,IAA4BC,yBAAyB,GAAG,EAAxD;;AACA,SAASC,mBAAT,CAA6B1jC,KAA7B,EAAoCgf,OAApC,EAA6C;AAC3C,MAAI,CAAChf,KAAD,IAAU,QAAQuiB,IAAR,CAAaviB,KAAb,CAAd,EAAmC,OAAO,IAAP;AACnC,MAAI2jC,KAAK,GAAG3kB,OAAO,CAACme,YAAR,GAAuBsG,yBAAvB,GAAmDD,iBAA/D;AACA,SAAOG,KAAK,CAAC3jC,KAAD,CAAL,KACJ2jC,KAAK,CAAC3jC,KAAD,CAAL,GAAeA,KAAK,CAACS,OAAN,CAAc,MAAd,EAAsB,OAAtB,CADX,CAAP;AAED;AAGD;AACA;AACA;AACA;;;AACA,AAAO,SAASmjC,gBAAT,CAA0BhS,EAA1B,EAA8BiS,QAA9B,EAAwC;AAC7C;AACA;AACA;AACA,MAAItgC,OAAO,GAAGimB,IAAI,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqBnC,MAAM,GAAG,qBAAH,GAA2B,IAAtD,CAAlB;AACA,MAAIyc,OAAO,GAAG;AAACC,IAAAA,GAAG,EAAEva,IAAI,CAAC,KAAD,EAAQ,CAACjmB,OAAD,CAAR,EAAmB,iBAAnB,CAAV;AAAiDA,IAAAA,OAAO,EAAEA,OAA1D;AACC2pB,IAAAA,GAAG,EAAE,CADN;AACSD,IAAAA,GAAG,EAAE,CADd;AACiB2E,IAAAA,EAAE,EAAEA,EADrB;AAECoS,IAAAA,aAAa,EAAE,KAFhB;AAGCC,IAAAA,WAAW,EAAErS,EAAE,CAACxT,SAAH,CAAa,cAAb;AAHd,GAAd;AAIAylB,EAAAA,QAAQ,CAAC3Q,OAAT,GAAmB,EAAnB,CAT6C;;AAY7C,OAAK,IAAItgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,KAAKixB,QAAQ,CAACK,IAAT,GAAgBL,QAAQ,CAACK,IAAT,CAAcriC,MAA9B,GAAuC,CAA5C,CAAjB,EAAiE+Q,CAAC,EAAlE,EAAsE;AACpE,QAAIue,IAAI,GAAGve,CAAC,GAAGixB,QAAQ,CAACK,IAAT,CAActxB,CAAC,GAAG,CAAlB,CAAH,GAA0BixB,QAAQ,CAAC1S,IAA/C;AAAA,QAAqD/B,KAArD;AACA0U,IAAAA,OAAO,CAAC7W,GAAR,GAAc,CAAd;AACA6W,IAAAA,OAAO,CAACK,QAAR,GAAmBC,UAAnB,CAHoE;AAKpE;;AACA,QAAI/Q,eAAe,CAACzB,EAAE,CAACplB,OAAH,CAAW0mB,OAAZ,CAAf,KAAwC9D,KAAK,GAAG8B,QAAQ,CAACC,IAAD,EAAOS,EAAE,CAACgG,GAAH,CAAOhoB,SAAd,CAAxD,CAAJ,EACEk0B,OAAO,CAACK,QAAR,GAAmBE,iBAAiB,CAACP,OAAO,CAACK,QAAT,EAAmB/U,KAAnB,CAApC;AACF0U,IAAAA,OAAO,CAACzqB,GAAR,GAAc,EAAd;AACA,QAAIirB,mBAAmB,GAAGT,QAAQ,IAAIjS,EAAE,CAACplB,OAAH,CAAW+3B,gBAAvB,IAA2C/L,MAAM,CAACrH,IAAD,CAA3E;AACAqT,IAAAA,iBAAiB,CAACrT,IAAD,EAAO2S,OAAP,EAAgBxI,aAAa,CAAC1J,EAAD,EAAKT,IAAL,EAAWmT,mBAAX,CAA7B,CAAjB;;AACA,QAAInT,IAAI,CAACyK,YAAT,EAAuB;AACrB,UAAIzK,IAAI,CAACyK,YAAL,CAAkBR,OAAtB,EACE0I,OAAO,CAAC1I,OAAR,GAAkBzQ,WAAW,CAACwG,IAAI,CAACyK,YAAL,CAAkBR,OAAnB,EAA4B0I,OAAO,CAAC1I,OAAR,IAAmB,EAA/C,CAA7B;AACF,UAAIjK,IAAI,CAACyK,YAAL,CAAkBP,SAAtB,EACEyI,OAAO,CAACzI,SAAR,GAAoB1Q,WAAW,CAACwG,IAAI,CAACyK,YAAL,CAAkBP,SAAnB,EAA8ByI,OAAO,CAACzI,SAAR,IAAqB,EAAnD,CAA/B;AACH,KAhBmE;;;AAmBpE,QAAIyI,OAAO,CAACzqB,GAAR,CAAYxX,MAAZ,IAAsB,CAA1B,EACEiiC,OAAO,CAACzqB,GAAR,CAAYtH,IAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB+xB,OAAO,CAACvgC,OAAR,CAAgBD,WAAhB,CAA4B2vB,gBAAgB,CAACrB,EAAE,CAACplB,OAAH,CAAW0mB,OAAZ,CAA5C,CAAvB,EApBkE;;AAuBpE,QAAItgB,CAAC,IAAI,CAAT,EAAY;AACVixB,MAAAA,QAAQ,CAAC3Q,OAAT,CAAiB7Z,GAAjB,GAAuByqB,OAAO,CAACzqB,GAA/B;AACAwqB,MAAAA,QAAQ,CAAC3Q,OAAT,CAAiByQ,KAAjB,GAAyB,EAAzB;AACD,KAHD,MAGO;AACL,AAAC,OAACE,QAAQ,CAAC3Q,OAAT,CAAiBuR,IAAjB,KAA0BZ,QAAQ,CAAC3Q,OAAT,CAAiBuR,IAAjB,GAAwB,EAAlD,CAAD,EAAwD1yB,IAAxD,CAA6D+xB,OAAO,CAACzqB,GAArE;AACA,OAACwqB,QAAQ,CAAC3Q,OAAT,CAAiBwR,MAAjB,KAA4Bb,QAAQ,CAAC3Q,OAAT,CAAiBwR,MAAjB,GAA0B,EAAtD,CAAD,EAA4D3yB,IAA5D,CAAiE,EAAjE;AACF;AACF,GA1C4C;;;AA6C7C,MAAIsV,MAAJ,EAAY;AACV,QAAIjZ,IAAI,GAAG01B,OAAO,CAACvgC,OAAR,CAAgB8K,SAA3B;AACA,QAAI,aAAakU,IAAb,CAAkBnU,IAAI,CAACwa,SAAvB,KAAsCxa,IAAI,CAACtC,aAAL,IAAsBsC,IAAI,CAACtC,aAAL,CAAmB,SAAnB,CAAhE,EACEg4B,OAAO,CAACvgC,OAAR,CAAgBqlB,SAAhB,GAA4B,kBAA5B;AACH;;AAED8I,EAAAA,MAAM,CAACE,EAAD,EAAK,YAAL,EAAmBA,EAAnB,EAAuBiS,QAAQ,CAAC1S,IAAhC,EAAsC2S,OAAO,CAACC,GAA9C,CAAN;AACA,MAAID,OAAO,CAACC,GAAR,CAAYnb,SAAhB,EACEkb,OAAO,CAACzI,SAAR,GAAoB1Q,WAAW,CAACmZ,OAAO,CAACC,GAAR,CAAYnb,SAAb,EAAwBkb,OAAO,CAACzI,SAAR,IAAqB,EAA7C,CAA/B;AAEF,SAAOyI,OAAP;AACD;AAED,AAAO,SAASa,6BAAT,CAAuCvW,EAAvC,EAA2C;AAChD,MAAIqO,KAAK,GAAGrT,GAAG,CAAC,MAAD,EAAS,QAAT,EAAmB,gBAAnB,CAAf;AACAqT,EAAAA,KAAK,CAAC5d,KAAN,GAAc,QAAQuP,EAAE,CAACnX,UAAH,CAAc,CAAd,EAAiBrF,QAAjB,CAA0B,EAA1B,CAAtB;AACA6qB,EAAAA,KAAK,CAACz5B,YAAN,CAAmB,YAAnB,EAAiCy5B,KAAK,CAAC5d,KAAvC;AACA,SAAO4d,KAAP;AACD;AAGD;;AACA,SAAS2H,UAAT,CAAoBN,OAApB,EAA6B/2B,IAA7B,EAAmC/M,KAAnC,EAA0C4kC,UAA1C,EAAsDC,QAAtD,EAAgEl9B,GAAhE,EAAqEsc,UAArE,EAAiF;AAC/E,MAAI,CAAClX,IAAL,EAAW;AACX,MAAI+3B,WAAW,GAAGhB,OAAO,CAACG,WAAR,GAAsBA,WAAW,CAACl3B,IAAD,EAAO+2B,OAAO,CAACE,aAAf,CAAjC,GAAiEj3B,IAAnF;AACA,MAAIg4B,OAAO,GAAGjB,OAAO,CAAClS,EAAR,CAAW+D,KAAX,CAAiBqP,YAA/B;AAAA,MAA6CC,QAAQ,GAAG,KAAxD;AACA,MAAI1hC,OAAJ;;AACA,MAAI,CAACwhC,OAAO,CAACxiB,IAAR,CAAaxV,IAAb,CAAL,EAAyB;AACvB+2B,IAAAA,OAAO,CAAC5W,GAAR,IAAengB,IAAI,CAAClL,MAApB;AACA0B,IAAAA,OAAO,GAAGH,QAAQ,CAACmmB,cAAT,CAAwBub,WAAxB,CAAV;AACAhB,IAAAA,OAAO,CAACzqB,GAAR,CAAYtH,IAAZ,CAAiB+xB,OAAO,CAAC7W,GAAzB,EAA8B6W,OAAO,CAAC7W,GAAR,GAAclgB,IAAI,CAAClL,MAAjD,EAAyD0B,OAAzD;AACA,QAAI2jB,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B8d,QAAQ,GAAG,IAAX;AAC1BnB,IAAAA,OAAO,CAAC7W,GAAR,IAAelgB,IAAI,CAAClL,MAApB;AACD,GAND,MAMO;AACL0B,IAAAA,OAAO,GAAGH,QAAQ,CAAC8hC,sBAAT,EAAV;AACA,QAAIjY,GAAG,GAAG,CAAV;;AACA,WAAO,IAAP,EAAa;AACX8X,MAAAA,OAAO,CAACI,SAAR,GAAoBlY,GAApB;AACA,UAAI2D,CAAC,GAAGmU,OAAO,CAAC7lB,IAAR,CAAanS,IAAb,CAAR;AACA,UAAIogB,OAAO,GAAGyD,CAAC,GAAGA,CAAC,CAAC7iB,KAAF,GAAUkf,GAAb,GAAmBlgB,IAAI,CAAClL,MAAL,GAAcorB,GAAhD;;AACA,UAAIE,OAAJ,EAAa;AACX,YAAImG,GAAG,GAAGlwB,QAAQ,CAACmmB,cAAT,CAAwBub,WAAW,CAACn3B,KAAZ,CAAkBsf,GAAlB,EAAuBA,GAAG,GAAGE,OAA7B,CAAxB,CAAV;AACA,YAAIjG,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B5jB,OAAO,CAACD,WAAR,CAAoB8lB,GAAG,CAAC,MAAD,EAAS,CAACkK,GAAD,CAAT,CAAvB,EAA1B,KACK/vB,OAAO,CAACD,WAAR,CAAoBgwB,GAApB;AACLwQ,QAAAA,OAAO,CAACzqB,GAAR,CAAYtH,IAAZ,CAAiB+xB,OAAO,CAAC7W,GAAzB,EAA8B6W,OAAO,CAAC7W,GAAR,GAAcE,OAA5C,EAAqDmG,GAArD;AACAwQ,QAAAA,OAAO,CAAC5W,GAAR,IAAeC,OAAf;AACA2W,QAAAA,OAAO,CAAC7W,GAAR,IAAeE,OAAf;AACD;;AACD,UAAI,CAACyD,CAAL,EAAQ;AACR3D,MAAAA,GAAG,IAAIE,OAAO,GAAG,CAAjB;AACA,UAAImG,GAAJ;;AACA,UAAI1C,CAAC,CAAC,CAAD,CAAD,IAAQ,IAAZ,EAAkB;AAChB,YAAIjF,OAAO,GAAGmY,OAAO,CAAClS,EAAR,CAAW5S,OAAX,CAAmB2M,OAAjC;AAAA,YAA0CyZ,QAAQ,GAAGzZ,OAAO,GAAGmY,OAAO,CAAC5W,GAAR,GAAcvB,OAA7E;AACA2H,QAAAA,GAAG,GAAG/vB,OAAO,CAACD,WAAR,CAAoB8lB,GAAG,CAAC,MAAD,EAASkE,QAAQ,CAAC8X,QAAD,CAAjB,EAA6B,QAA7B,CAAvB,CAAN;AACA9R,QAAAA,GAAG,CAACtwB,YAAJ,CAAiB,MAAjB,EAAyB,cAAzB;AACAswB,QAAAA,GAAG,CAACtwB,YAAJ,CAAiB,SAAjB,EAA4B,IAA5B;AACA8gC,QAAAA,OAAO,CAAC5W,GAAR,IAAekY,QAAf;AACD,OAND,MAMO,IAAIxU,CAAC,CAAC,CAAD,CAAD,IAAQ,IAAR,IAAgBA,CAAC,CAAC,CAAD,CAAD,IAAQ,IAA5B,EAAkC;AACvC0C,QAAAA,GAAG,GAAG/vB,OAAO,CAACD,WAAR,CAAoB8lB,GAAG,CAAC,MAAD,EAASwH,CAAC,CAAC,CAAD,CAAD,IAAQ,IAAR,GAAe,QAAf,GAA0B,QAAnC,EAA6C,gBAA7C,CAAvB,CAAN;AACA0C,QAAAA,GAAG,CAACtwB,YAAJ,CAAiB,SAAjB,EAA4B4tB,CAAC,CAAC,CAAD,CAA7B;AACAkT,QAAAA,OAAO,CAAC5W,GAAR,IAAe,CAAf;AACD,OAJM,MAIA;AACLoG,QAAAA,GAAG,GAAGwQ,OAAO,CAAClS,EAAR,CAAW5S,OAAX,CAAmBqmB,sBAAnB,CAA0CzU,CAAC,CAAC,CAAD,CAA3C,CAAN;AACA0C,QAAAA,GAAG,CAACtwB,YAAJ,CAAiB,SAAjB,EAA4B4tB,CAAC,CAAC,CAAD,CAA7B;AACA,YAAI1J,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B5jB,OAAO,CAACD,WAAR,CAAoB8lB,GAAG,CAAC,MAAD,EAAS,CAACkK,GAAD,CAAT,CAAvB,EAA1B,KACK/vB,OAAO,CAACD,WAAR,CAAoBgwB,GAApB;AACLwQ,QAAAA,OAAO,CAAC5W,GAAR,IAAe,CAAf;AACD;;AACD4W,MAAAA,OAAO,CAACzqB,GAAR,CAAYtH,IAAZ,CAAiB+xB,OAAO,CAAC7W,GAAzB,EAA8B6W,OAAO,CAAC7W,GAAR,GAAc,CAA5C,EAA+CqG,GAA/C;AACAwQ,MAAAA,OAAO,CAAC7W,GAAR;AACD;AACF;;AACD6W,EAAAA,OAAO,CAACE,aAAR,GAAwBc,WAAW,CAAC7tB,UAAZ,CAAuBlK,IAAI,CAAClL,MAAL,GAAc,CAArC,KAA2C,EAAnE;;AACA,MAAI7B,KAAK,IAAI4kC,UAAT,IAAuBC,QAAvB,IAAmCI,QAAnC,IAA+Ct9B,GAA/C,IAAsDsc,UAA1D,EAAsE;AACpE,QAAIqhB,SAAS,GAAGtlC,KAAK,IAAI,EAAzB;AACA,QAAI4kC,UAAJ,EAAgBU,SAAS,IAAIV,UAAb;AAChB,QAAIC,QAAJ,EAAcS,SAAS,IAAIT,QAAb;AACd,QAAIpI,KAAK,GAAGrT,GAAG,CAAC,MAAD,EAAS,CAAC7lB,OAAD,CAAT,EAAoB+hC,SAApB,EAA+B39B,GAA/B,CAAf;;AACA,QAAIsc,UAAJ,EAAgB;AACd,WAAK,IAAIshB,IAAT,IAAiBthB,UAAjB,EAA6B,IAAIA,UAAU,CAACjM,cAAX,CAA0ButB,IAA1B,KAAmCA,IAAI,IAAI,OAA3C,IAAsDA,IAAI,IAAI,OAAlE,EAC3B9I,KAAK,CAACz5B,YAAN,CAAmBuiC,IAAnB,EAAyBthB,UAAU,CAACshB,IAAD,CAAnC;AACH;;AACD,WAAOzB,OAAO,CAACvgC,OAAR,CAAgBD,WAAhB,CAA4Bm5B,KAA5B,CAAP;AACD;;AACDqH,EAAAA,OAAO,CAACvgC,OAAR,CAAgBD,WAAhB,CAA4BC,OAA5B;AACD;AAGD;;;AACA,SAAS0gC,WAAT,CAAqBl3B,IAArB,EAA2By4B,cAA3B,EAA2C;AACzC,MAAIz4B,IAAI,CAAClL,MAAL,GAAc,CAAd,IAAmB,CAAC,KAAK0gB,IAAL,CAAUxV,IAAV,CAAxB,EAAyC,OAAOA,IAAP;AACzC,MAAI04B,WAAW,GAAGD,cAAlB;AAAA,MAAkC13B,MAAM,GAAG,EAA3C;;AACA,OAAK,IAAI8E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7F,IAAI,CAAClL,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC;AACpC,QAAIwb,EAAE,GAAGrhB,IAAI,CAAC6hB,MAAL,CAAYhc,CAAZ,CAAT;AACA,QAAIwb,EAAE,IAAI,GAAN,IAAaqX,WAAb,KAA6B7yB,CAAC,IAAI7F,IAAI,CAAClL,MAAL,GAAc,CAAnB,IAAwBkL,IAAI,CAACkK,UAAL,CAAgBrE,CAAC,GAAG,CAApB,KAA0B,EAA/E,CAAJ,EACEwb,EAAE,GAAG,QAAL;AACFtgB,IAAAA,MAAM,IAAIsgB,EAAV;AACAqX,IAAAA,WAAW,GAAGrX,EAAE,IAAI,GAApB;AACD;;AACD,SAAOtgB,MAAP;AACD;AAGD;;;AACA,SAASu2B,iBAAT,CAA2B9M,KAA3B,EAAkCnI,KAAlC,EAAyC;AACvC,SAAO,CAAC0U,OAAD,EAAU/2B,IAAV,EAAgB/M,KAAhB,EAAuB4kC,UAAvB,EAAmCC,QAAnC,EAA6Cl9B,GAA7C,EAAkDsc,UAAlD,KAAiE;AACtEjkB,IAAAA,KAAK,GAAGA,KAAK,GAAGA,KAAK,GAAG,kBAAX,GAAgC,iBAA7C;AACA,QAAI2pB,KAAK,GAAGma,OAAO,CAAC7W,GAApB;AAAA,QAAyBxY,GAAG,GAAGkV,KAAK,GAAG5c,IAAI,CAAClL,MAA5C;;AACA,aAAS;AACP;AACA,UAAIytB,IAAJ;;AACA,WAAK,IAAI1c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwc,KAAK,CAACvtB,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC;AACrC0c,QAAAA,IAAI,GAAGF,KAAK,CAACxc,CAAD,CAAZ;AACA,YAAI0c,IAAI,CAACP,EAAL,GAAUpF,KAAV,IAAmB2F,IAAI,CAACpO,IAAL,IAAayI,KAApC,EAA2C;AAC5C;;AACD,UAAI2F,IAAI,CAACP,EAAL,IAAWta,GAAf,EAAoB,OAAO8iB,KAAK,CAACuM,OAAD,EAAU/2B,IAAV,EAAgB/M,KAAhB,EAAuB4kC,UAAvB,EAAmCC,QAAnC,EAA6Cl9B,GAA7C,EAAkDsc,UAAlD,CAAZ;AACpBsT,MAAAA,KAAK,CAACuM,OAAD,EAAU/2B,IAAI,CAACY,KAAL,CAAW,CAAX,EAAc2hB,IAAI,CAACP,EAAL,GAAUpF,KAAxB,CAAV,EAA0C3pB,KAA1C,EAAiD4kC,UAAjD,EAA6D,IAA7D,EAAmEj9B,GAAnE,EAAwEsc,UAAxE,CAAL;AACA2gB,MAAAA,UAAU,GAAG,IAAb;AACA73B,MAAAA,IAAI,GAAGA,IAAI,CAACY,KAAL,CAAW2hB,IAAI,CAACP,EAAL,GAAUpF,KAArB,CAAP;AACAA,MAAAA,KAAK,GAAG2F,IAAI,CAACP,EAAb;AACD;AACF,GAhBD;AAiBD;;AAED,SAAS2W,kBAAT,CAA4B5B,OAA5B,EAAqCp/B,IAArC,EAA2Cq5B,MAA3C,EAAmD4H,YAAnD,EAAiE;AAC/D,MAAIC,MAAM,GAAG,CAACD,YAAD,IAAiB5H,MAAM,CAAC0E,UAArC;AACA,MAAImD,MAAJ,EAAY9B,OAAO,CAACzqB,GAAR,CAAYtH,IAAZ,CAAiB+xB,OAAO,CAAC7W,GAAzB,EAA8B6W,OAAO,CAAC7W,GAAR,GAAcvoB,IAA5C,EAAkDkhC,MAAlD;;AACZ,MAAI,CAACD,YAAD,IAAiB7B,OAAO,CAAClS,EAAR,CAAWplB,OAAX,CAAmBq5B,KAAnB,CAAyBC,qBAA9C,EAAqE;AACnE,QAAI,CAACF,MAAL,EACEA,MAAM,GAAG9B,OAAO,CAACvgC,OAAR,CAAgBD,WAAhB,CAA4BF,QAAQ,CAAC2E,aAAT,CAAuB,MAAvB,CAA5B,CAAT;AACF69B,IAAAA,MAAM,CAAC5iC,YAAP,CAAoB,WAApB,EAAiC+6B,MAAM,CAAC5uB,EAAxC;AACD;;AACD,MAAIy2B,MAAJ,EAAY;AACV9B,IAAAA,OAAO,CAAClS,EAAR,CAAWplB,OAAX,CAAmBq5B,KAAnB,CAAyBE,aAAzB,CAAuCH,MAAvC;AACA9B,IAAAA,OAAO,CAACvgC,OAAR,CAAgBD,WAAhB,CAA4BsiC,MAA5B;AACD;;AACD9B,EAAAA,OAAO,CAAC7W,GAAR,IAAevoB,IAAf;AACAo/B,EAAAA,OAAO,CAACE,aAAR,GAAwB,KAAxB;AACD;AAGD;;;AACA,SAASQ,iBAAT,CAA2BrT,IAA3B,EAAiC2S,OAAjC,EAA0Cp8B,MAA1C,EAAkD;AAChD,MAAIu2B,KAAK,GAAG9M,IAAI,CAACqN,WAAjB;AAAA,MAA8BwH,OAAO,GAAG7U,IAAI,CAACpkB,IAA7C;AAAA,MAAmD8jB,EAAE,GAAG,CAAxD;;AACA,MAAI,CAACoN,KAAL,EAAY;AACV,SAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlL,MAAM,CAAC7F,MAA3B,EAAmC+Q,CAAC,IAAE,CAAtC,EACEkxB,OAAO,CAACK,QAAR,CAAiBL,OAAjB,EAA0BkC,OAAO,CAACr4B,KAAR,CAAckjB,EAAd,EAAkBA,EAAE,GAAGnpB,MAAM,CAACkL,CAAD,CAA7B,CAA1B,EAA6D8wB,mBAAmB,CAACh8B,MAAM,CAACkL,CAAC,GAAC,CAAH,CAAP,EAAckxB,OAAO,CAAClS,EAAR,CAAW5S,OAAzB,CAAhF;;AACF;AACD;;AAED,MAAI7F,GAAG,GAAG6sB,OAAO,CAACnkC,MAAlB;AAAA,MAA0BorB,GAAG,GAAG,CAAhC;AAAA,MAAmCra,CAAC,GAAG,CAAvC;AAAA,MAA0C7F,IAAI,GAAG,EAAjD;AAAA,MAAqD/M,KAArD;AAAA,MAA4D2H,GAA5D;AACA,MAAIs+B,UAAU,GAAG,CAAjB;AAAA,MAAoBC,SAApB;AAAA,MAA+BC,YAA/B;AAAA,MAA6CC,cAA7C;AAAA,MAA6D1E,SAA7D;AAAA,MAAwEzd,UAAxE;;AACA,WAAS;AACP,QAAIgiB,UAAU,IAAIhZ,GAAlB,EAAuB;AAAE;AACvBiZ,MAAAA,SAAS,GAAGC,YAAY,GAAGC,cAAc,GAAGz+B,GAAG,GAAG,EAAlD;AACAsc,MAAAA,UAAU,GAAG,IAAb;AACAyd,MAAAA,SAAS,GAAG,IAAZ;AAAkBuE,MAAAA,UAAU,GAAGI,QAAb;AAClB,UAAIC,cAAc,GAAG,EAArB;AAAA,UAAyBC,SAAzB;;AACA,WAAK,IAAI7V,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuN,KAAK,CAACp8B,MAA1B,EAAkC,EAAE6uB,CAApC,EAAuC;AACrC,YAAI+Q,EAAE,GAAGxD,KAAK,CAACvN,CAAD,CAAd;AAAA,YAAmBE,CAAC,GAAG6Q,EAAE,CAAC1D,MAA1B;;AACA,YAAInN,CAAC,CAAC/yB,IAAF,IAAU,UAAV,IAAwB4jC,EAAE,CAACvgB,IAAH,IAAW+L,GAAnC,IAA0C2D,CAAC,CAAC6R,UAAhD,EAA4D;AAC1D6D,UAAAA,cAAc,CAACv0B,IAAf,CAAoB6e,CAApB;AACD,SAFD,MAEO,IAAI6Q,EAAE,CAACvgB,IAAH,IAAW+L,GAAX,KAAmBwU,EAAE,CAAC1S,EAAH,IAAS,IAAT,IAAiB0S,EAAE,CAAC1S,EAAH,GAAQ9B,GAAzB,IAAgC2D,CAAC,CAAC8Q,SAAF,IAAeD,EAAE,CAAC1S,EAAH,IAAS9B,GAAxB,IAA+BwU,EAAE,CAACvgB,IAAH,IAAW+L,GAA7F,CAAJ,EAAuG;AAC5G,cAAIwU,EAAE,CAAC1S,EAAH,IAAS,IAAT,IAAiB0S,EAAE,CAAC1S,EAAH,IAAS9B,GAA1B,IAAiCgZ,UAAU,GAAGxE,EAAE,CAAC1S,EAArD,EAAyD;AACvDkX,YAAAA,UAAU,GAAGxE,EAAE,CAAC1S,EAAhB;AACAoX,YAAAA,YAAY,GAAG,EAAf;AACD;;AACD,cAAIvV,CAAC,CAAChI,SAAN,EAAiBsd,SAAS,IAAI,MAAMtV,CAAC,CAAChI,SAArB;AACjB,cAAIgI,CAAC,CAACjpB,GAAN,EAAWA,GAAG,GAAG,CAACA,GAAG,GAAGA,GAAG,GAAG,GAAT,GAAe,EAAnB,IAAyBipB,CAAC,CAACjpB,GAAjC;AACX,cAAIipB,CAAC,CAACgU,UAAF,IAAgBnD,EAAE,CAACvgB,IAAH,IAAW+L,GAA/B,EAAoCmZ,cAAc,IAAI,MAAMxV,CAAC,CAACgU,UAA1B;AACpC,cAAIhU,CAAC,CAACiU,QAAF,IAAcpD,EAAE,CAAC1S,EAAH,IAASkX,UAA3B,EAAuC,CAACM,SAAS,KAAKA,SAAS,GAAG,EAAjB,CAAV,EAAgCx0B,IAAhC,CAAqC6e,CAAC,CAACiU,QAAvC,EAAiDpD,EAAE,CAAC1S,EAApD,EARqE;AAU5G;;AACA,cAAI6B,CAAC,CAAC/R,KAAN,EAAa,CAACoF,UAAU,KAAKA,UAAU,GAAG,EAAlB,CAAX,EAAkCpF,KAAlC,GAA0C+R,CAAC,CAAC/R,KAA5C;;AACb,cAAI+R,CAAC,CAAC3M,UAAN,EAAkB;AAChB,iBAAK,IAAIshB,IAAT,IAAiB3U,CAAC,CAAC3M,UAAnB,EACE,CAACA,UAAU,KAAKA,UAAU,GAAG,EAAlB,CAAX,EAAkCshB,IAAlC,IAA0C3U,CAAC,CAAC3M,UAAF,CAAashB,IAAb,CAA1C;AACH;;AACD,cAAI3U,CAAC,CAAC8Q,SAAF,KAAgB,CAACA,SAAD,IAAcT,uBAAuB,CAACS,SAAS,CAAC3D,MAAX,EAAmBnN,CAAnB,CAAvB,GAA+C,CAA7E,CAAJ,EACE8Q,SAAS,GAAGD,EAAZ;AACH,SAlBM,MAkBA,IAAIA,EAAE,CAACvgB,IAAH,GAAU+L,GAAV,IAAiBgZ,UAAU,GAAGxE,EAAE,CAACvgB,IAArC,EAA2C;AAChD+kB,UAAAA,UAAU,GAAGxE,EAAE,CAACvgB,IAAhB;AACD;AACF;;AACD,UAAIqlB,SAAJ,EAAe,KAAK,IAAI7V,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6V,SAAS,CAAC1kC,MAA9B,EAAsC6uB,CAAC,IAAI,CAA3C,EACb,IAAI6V,SAAS,CAAC7V,CAAC,GAAG,CAAL,CAAT,IAAoBuV,UAAxB,EAAoCE,YAAY,IAAI,MAAMI,SAAS,CAAC7V,CAAD,CAA/B;AAEtC,UAAI,CAACgR,SAAD,IAAcA,SAAS,CAACxgB,IAAV,IAAkB+L,GAApC,EAAyC,KAAK,IAAIyD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4V,cAAc,CAACzkC,MAAnC,EAA2C,EAAE6uB,CAA7C,EACvCgV,kBAAkB,CAAC5B,OAAD,EAAU,CAAV,EAAawC,cAAc,CAAC5V,CAAD,CAA3B,CAAlB;;AACF,UAAIgR,SAAS,IAAI,CAACA,SAAS,CAACxgB,IAAV,IAAkB,CAAnB,KAAyB+L,GAA1C,EAA+C;AAC7CyY,QAAAA,kBAAkB,CAAC5B,OAAD,EAAU,CAACpC,SAAS,CAAC3S,EAAV,IAAgB,IAAhB,GAAuB5V,GAAG,GAAG,CAA7B,GAAiCuoB,SAAS,CAAC3S,EAA5C,IAAkD9B,GAA5D,EACCyU,SAAS,CAAC3D,MADX,EACmB2D,SAAS,CAACxgB,IAAV,IAAkB,IADrC,CAAlB;AAEA,YAAIwgB,SAAS,CAAC3S,EAAV,IAAgB,IAApB,EAA0B;AAC1B,YAAI2S,SAAS,CAAC3S,EAAV,IAAgB9B,GAApB,EAAyByU,SAAS,GAAG,KAAZ;AAC1B;AACF;;AACD,QAAIzU,GAAG,IAAI9T,GAAX,EAAgB;AAEhB,QAAIqtB,IAAI,GAAG77B,IAAI,CAACyiB,GAAL,CAASjU,GAAT,EAAc8sB,UAAd,CAAX;;AACA,WAAO,IAAP,EAAa;AACX,UAAIl5B,IAAJ,EAAU;AACR,YAAI0H,GAAG,GAAGwY,GAAG,GAAGlgB,IAAI,CAAClL,MAArB;;AACA,YAAI,CAAC6/B,SAAL,EAAgB;AACd,cAAI+E,SAAS,GAAGhyB,GAAG,GAAG+xB,IAAN,GAAaz5B,IAAI,CAACY,KAAL,CAAW,CAAX,EAAc64B,IAAI,GAAGvZ,GAArB,CAAb,GAAyClgB,IAAzD;AACA+2B,UAAAA,OAAO,CAACK,QAAR,CAAiBL,OAAjB,EAA0B2C,SAA1B,EAAqCzmC,KAAK,GAAGA,KAAK,GAAGkmC,SAAX,GAAuBA,SAAjE,EACiBE,cADjB,EACiCnZ,GAAG,GAAGwZ,SAAS,CAAC5kC,MAAhB,IAA0BokC,UAA1B,GAAuCE,YAAvC,GAAsD,EADvF,EAC2Fx+B,GAD3F,EACgGsc,UADhG;AAED;;AACD,YAAIxP,GAAG,IAAI+xB,IAAX,EAAiB;AAACz5B,UAAAA,IAAI,GAAGA,IAAI,CAACY,KAAL,CAAW64B,IAAI,GAAGvZ,GAAlB,CAAP;AAA+BA,UAAAA,GAAG,GAAGuZ,IAAN;AAAY;AAAM;;AACnEvZ,QAAAA,GAAG,GAAGxY,GAAN;AACA2xB,QAAAA,cAAc,GAAG,EAAjB;AACD;;AACDr5B,MAAAA,IAAI,GAAGi5B,OAAO,CAACr4B,KAAR,CAAckjB,EAAd,EAAkBA,EAAE,GAAGnpB,MAAM,CAACkL,CAAC,EAAF,CAA7B,CAAP;AACA5S,MAAAA,KAAK,GAAG0jC,mBAAmB,CAACh8B,MAAM,CAACkL,CAAC,EAAF,CAAP,EAAckxB,OAAO,CAAClS,EAAR,CAAW5S,OAAzB,CAA3B;AACD;AACF;AACF;AAID;AACA;;;AACA,AAAO,SAAS0nB,QAAT,CAAkB9O,GAAlB,EAAuBzG,IAAvB,EAA6BiR,KAA7B,EAAoC;AACzC;AACA,OAAKjR,IAAL,GAAYA,IAAZ,CAFyC;;AAIzC,OAAK+S,IAAL,GAAYhC,mBAAmB,CAAC/Q,IAAD,CAA/B,CAJyC;;AAMzC,OAAKzsB,IAAL,GAAY,KAAKw/B,IAAL,GAAY1L,MAAM,CAACjL,GAAG,CAAC,KAAK2W,IAAN,CAAJ,CAAN,GAAyB9B,KAAzB,GAAiC,CAA7C,GAAiD,CAA7D;AACA,OAAK1Z,IAAL,GAAY,KAAK3b,IAAL,GAAY,IAAxB;AACA,OAAK45B,MAAL,GAAcnE,YAAY,CAAC5K,GAAD,EAAMzG,IAAN,CAA1B;AACD;;AAGD,AAAO,SAASyV,cAAT,CAAwBhV,EAAxB,EAA4B1Q,IAA5B,EAAkC6N,EAAlC,EAAsC;AAC3C,MAAIvC,KAAK,GAAG,EAAZ;AAAA,MAAgBqa,OAAhB;;AACA,OAAK,IAAI5Z,GAAG,GAAG/L,IAAf,EAAqB+L,GAAG,GAAG8B,EAA3B,EAA+B9B,GAAG,GAAG4Z,OAArC,EAA8C;AAC5C,QAAIC,IAAI,GAAG,IAAIJ,QAAJ,CAAa9U,EAAE,CAACgG,GAAhB,EAAqBD,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS3K,GAAT,CAA5B,EAA2CA,GAA3C,CAAX;AACA4Z,IAAAA,OAAO,GAAG5Z,GAAG,GAAG6Z,IAAI,CAACpiC,IAArB;AACA8nB,IAAAA,KAAK,CAACza,IAAN,CAAW+0B,IAAX;AACD;;AACD,SAAOta,KAAP;AACD;;AC1VD,IAAIua,cAAc,GAAG,IAArB;AAEA,AAAO,SAASC,aAAT,CAAuB3I,EAAvB,EAA2B;AAChC,MAAI0I,cAAJ,EAAoB;AAClBA,IAAAA,cAAc,CAACE,GAAf,CAAmBl1B,IAAnB,CAAwBssB,EAAxB;AACD,GAFD,MAEO;AACLA,IAAAA,EAAE,CAAC6I,SAAH,GAAeH,cAAc,GAAG;AAC9BE,MAAAA,GAAG,EAAE,CAAC5I,EAAD,CADyB;AAE9B8I,MAAAA,gBAAgB,EAAE;AAFY,KAAhC;AAID;AACF;;AAED,SAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAClC;AACA;AACA,MAAIC,SAAS,GAAGD,KAAK,CAACF,gBAAtB;AAAA,MAAwCv0B,CAAC,GAAG,CAA5C;;AACA,KAAG;AACD,WAAOA,CAAC,GAAG00B,SAAS,CAACzlC,MAArB,EAA6B+Q,CAAC,EAA9B,EACE00B,SAAS,CAAC10B,CAAD,CAAT,CAAahF,IAAb,CAAkB,IAAlB;;AACF,SAAK,IAAI8iB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2W,KAAK,CAACJ,GAAN,CAAUplC,MAA9B,EAAsC6uB,CAAC,EAAvC,EAA2C;AACzC,UAAI2N,EAAE,GAAGgJ,KAAK,CAACJ,GAAN,CAAUvW,CAAV,CAAT;AACA,UAAI2N,EAAE,CAACjM,sBAAP,EACE,OAAOiM,EAAE,CAACkJ,oBAAH,GAA0BlJ,EAAE,CAACjM,sBAAH,CAA0BvwB,MAA3D,EACEw8B,EAAE,CAACjM,sBAAH,CAA0BiM,EAAE,CAACkJ,oBAAH,EAA1B,EAAqD35B,IAArD,CAA0D,IAA1D,EAAgEywB,EAAE,CAACzM,EAAnE;AACL;AACF,GATD,QASShf,CAAC,GAAG00B,SAAS,CAACzlC,MATvB;AAUD;;AAED,AAAO,SAAS2lC,eAAT,CAAyBnJ,EAAzB,EAA6BoJ,KAA7B,EAAoC;AACzC,MAAIJ,KAAK,GAAGhJ,EAAE,CAAC6I,SAAf;AACA,MAAI,CAACG,KAAL,EAAY;;AAEZ,MAAI;AAAED,IAAAA,mBAAmB,CAACC,KAAD,CAAnB;AAA4B,GAAlC,SACQ;AACNN,IAAAA,cAAc,GAAG,IAAjB;AACAU,IAAAA,KAAK,CAACJ,KAAD,CAAL;AACD;AACF;AAED,IAAIK,sBAAsB,GAAG,IAA7B;AAGA;AACA;AACA;AACA;AACA;AACA;;AACA,AAAO,SAASC,WAAT,CAAqBrW,OAArB,EAA8BzzB;AAAK;AAAnC,EAAoD;AACzD,MAAIqP,GAAG,GAAGqkB,WAAW,CAACD,OAAD,EAAUzzB,IAAV,CAArB;AACA,MAAI,CAACqP,GAAG,CAACrL,MAAT,EAAiB;AACjB,MAAI8W,IAAI,GAAGnP,KAAK,CAACuO,SAAN,CAAgBpK,KAAhB,CAAsBC,IAAtB,CAA2B8K,SAA3B,EAAsC,CAAtC,CAAX;AAAA,MAAqDkvB,IAArD;;AACA,MAAIb,cAAJ,EAAoB;AAClBa,IAAAA,IAAI,GAAGb,cAAc,CAACI,gBAAtB;AACD,GAFD,MAEO,IAAIO,sBAAJ,EAA4B;AACjCE,IAAAA,IAAI,GAAGF,sBAAP;AACD,GAFM,MAEA;AACLE,IAAAA,IAAI,GAAGF,sBAAsB,GAAG,EAAhC;AACAp2B,IAAAA,UAAU,CAACu2B,iBAAD,EAAoB,CAApB,CAAV;AACD;;AACD,OAAK,IAAIj1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1F,GAAG,CAACrL,MAAxB,EAAgC,EAAE+Q,CAAlC,EACEg1B,IAAI,CAAC71B,IAAL,CAAU,MAAM7E,GAAG,CAAC0F,CAAD,CAAH,CAAOwY,KAAP,CAAa,IAAb,EAAmBzS,IAAnB,CAAhB;AACH;;AAED,SAASkvB,iBAAT,GAA6B;AAC3B,MAAIC,OAAO,GAAGJ,sBAAd;AACAA,EAAAA,sBAAsB,GAAG,IAAzB;;AACA,OAAK,IAAI90B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk1B,OAAO,CAACjmC,MAA5B,EAAoC,EAAE+Q,CAAtC,EAAyCk1B,OAAO,CAACl1B,CAAD,CAAP;AAC1C;;AChED;AACA;;AACA,AAAO,SAASm1B,oBAAT,CAA8BnW,EAA9B,EAAkCiS,QAAlC,EAA4CzB,KAA5C,EAAmD4F,IAAnD,EAAyD;AAC9D,OAAK,IAAItX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmT,QAAQ,CAACoE,OAAT,CAAiBpmC,MAArC,EAA6C6uB,CAAC,EAA9C,EAAkD;AAChD,QAAI7yB,IAAI,GAAGgmC,QAAQ,CAACoE,OAAT,CAAiBvX,CAAjB,CAAX;AACA,QAAI7yB,IAAI,IAAI,MAAZ,EAAoBqqC,cAAc,CAACtW,EAAD,EAAKiS,QAAL,CAAd,CAApB,KACK,IAAIhmC,IAAI,IAAI,QAAZ,EAAsBsqC,gBAAgB,CAACvW,EAAD,EAAKiS,QAAL,EAAezB,KAAf,EAAsB4F,IAAtB,CAAhB,CAAtB,KACA,IAAInqC,IAAI,IAAI,OAAZ,EAAqBuqC,iBAAiB,CAACxW,EAAD,EAAKiS,QAAL,CAAjB,CAArB,KACA,IAAIhmC,IAAI,IAAI,QAAZ,EAAsBwqC,iBAAiB,CAACzW,EAAD,EAAKiS,QAAL,EAAemE,IAAf,CAAjB;AAC5B;;AACDnE,EAAAA,QAAQ,CAACoE,OAAT,GAAmB,IAAnB;AACD;AAGD;;AACA,SAASK,iBAAT,CAA2BzE,QAA3B,EAAqC;AACnC,MAAIA,QAAQ,CAACnb,IAAT,IAAiBmb,QAAQ,CAAC92B,IAA9B,EAAoC;AAClC82B,IAAAA,QAAQ,CAACnb,IAAT,GAAgBU,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,oBAApB,CAAnB;AACA,QAAIya,QAAQ,CAAC92B,IAAT,CAAclB,UAAlB,EACEg4B,QAAQ,CAAC92B,IAAT,CAAclB,UAAd,CAAyB08B,YAAzB,CAAsC1E,QAAQ,CAACnb,IAA/C,EAAqDmb,QAAQ,CAAC92B,IAA9D;AACF82B,IAAAA,QAAQ,CAACnb,IAAT,CAAcplB,WAAd,CAA0BugC,QAAQ,CAAC92B,IAAnC;AACA,QAAIma,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B0c,QAAQ,CAACnb,IAAT,CAAc1oB,KAAd,CAAoBwoC,MAApB,GAA6B,CAA7B;AAC3B;;AACD,SAAO3E,QAAQ,CAACnb,IAAhB;AACD;;AAED,SAAS+f,oBAAT,CAA8B7W,EAA9B,EAAkCiS,QAAlC,EAA4C;AAC1C,MAAIrb,GAAG,GAAGqb,QAAQ,CAACzI,OAAT,GAAmByI,QAAQ,CAACzI,OAAT,GAAmB,GAAnB,IAA0ByI,QAAQ,CAAC1S,IAAT,CAAciK,OAAd,IAAyB,EAAnD,CAAnB,GAA4EyI,QAAQ,CAAC1S,IAAT,CAAciK,OAApG;AACA,MAAI5S,GAAJ,EAASA,GAAG,IAAI,4BAAP;;AACT,MAAIqb,QAAQ,CAAC6E,UAAb,EAAyB;AACvB,QAAIlgB,GAAJ,EAASqb,QAAQ,CAAC6E,UAAT,CAAoB9f,SAApB,GAAgCJ,GAAhC,CAAT,KACK;AAAEqb,MAAAA,QAAQ,CAAC6E,UAAT,CAAoB78B,UAApB,CAA+ByC,WAA/B,CAA2Cu1B,QAAQ,CAAC6E,UAApD;AAAiE7E,MAAAA,QAAQ,CAAC6E,UAAT,GAAsB,IAAtB;AAA4B;AACrG,GAHD,MAGO,IAAIlgB,GAAJ,EAAS;AACd,QAAImgB,IAAI,GAAGL,iBAAiB,CAACzE,QAAD,CAA5B;AACAA,IAAAA,QAAQ,CAAC6E,UAAT,GAAsBC,IAAI,CAACC,YAAL,CAAkBxf,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAcZ,GAAd,CAArB,EAAyCmgB,IAAI,CAAC1f,UAA9C,CAAtB;AACA2I,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBE,aAAjB,CAA+BlC,QAAQ,CAAC6E,UAAxC;AACD;AACF;AAGD;;;AACA,SAASG,cAAT,CAAwBjX,EAAxB,EAA4BiS,QAA5B,EAAsC;AACpC,MAAIiF,GAAG,GAAGlX,EAAE,CAACplB,OAAH,CAAW+3B,gBAArB;;AACA,MAAIuE,GAAG,IAAIA,GAAG,CAAC3X,IAAJ,IAAY0S,QAAQ,CAAC1S,IAAhC,EAAsC;AACpCS,IAAAA,EAAE,CAACplB,OAAH,CAAW+3B,gBAAX,GAA8B,IAA9B;AACAV,IAAAA,QAAQ,CAAC3Q,OAAT,GAAmB4V,GAAG,CAAC5V,OAAvB;AACA,WAAO4V,GAAG,CAACC,KAAX;AACD;;AACD,SAAOnF,gBAAgB,CAAChS,EAAD,EAAKiS,QAAL,CAAvB;AACD;AAGD;AACA;;;AACA,SAASqE,cAAT,CAAwBtW,EAAxB,EAA4BiS,QAA5B,EAAsC;AACpC,MAAIrb,GAAG,GAAGqb,QAAQ,CAAC92B,IAAT,CAAc6b,SAAxB;AACA,MAAImgB,KAAK,GAAGF,cAAc,CAACjX,EAAD,EAAKiS,QAAL,CAA1B;AACA,MAAIA,QAAQ,CAAC92B,IAAT,IAAiB82B,QAAQ,CAACnb,IAA9B,EAAoCmb,QAAQ,CAACnb,IAAT,GAAgBqgB,KAAK,CAAChF,GAAtB;AACpCF,EAAAA,QAAQ,CAAC92B,IAAT,CAAclB,UAAd,CAAyB08B,YAAzB,CAAsCQ,KAAK,CAAChF,GAA5C,EAAiDF,QAAQ,CAAC92B,IAA1D;AACA82B,EAAAA,QAAQ,CAAC92B,IAAT,GAAgBg8B,KAAK,CAAChF,GAAtB;;AACA,MAAIgF,KAAK,CAAC3N,OAAN,IAAiByI,QAAQ,CAACzI,OAA1B,IAAqC2N,KAAK,CAAC1N,SAAN,IAAmBwI,QAAQ,CAACxI,SAArE,EAAgF;AAC9EwI,IAAAA,QAAQ,CAACzI,OAAT,GAAmB2N,KAAK,CAAC3N,OAAzB;AACAyI,IAAAA,QAAQ,CAACxI,SAAT,GAAqB0N,KAAK,CAAC1N,SAA3B;AACA+M,IAAAA,iBAAiB,CAACxW,EAAD,EAAKiS,QAAL,CAAjB;AACD,GAJD,MAIO,IAAIrb,GAAJ,EAAS;AACdqb,IAAAA,QAAQ,CAAC92B,IAAT,CAAc6b,SAAd,GAA0BJ,GAA1B;AACD;AACF;;AAED,SAAS4f,iBAAT,CAA2BxW,EAA3B,EAA+BiS,QAA/B,EAAyC;AACvC4E,EAAAA,oBAAoB,CAAC7W,EAAD,EAAKiS,QAAL,CAApB;AACA,MAAIA,QAAQ,CAAC1S,IAAT,CAAc6X,SAAlB,EACEV,iBAAiB,CAACzE,QAAD,CAAjB,CAA4Bjb,SAA5B,GAAwCib,QAAQ,CAAC1S,IAAT,CAAc6X,SAAtD,CADF,KAEK,IAAInF,QAAQ,CAACnb,IAAT,IAAiBmb,QAAQ,CAAC92B,IAA9B,EACH82B,QAAQ,CAACnb,IAAT,CAAcE,SAAd,GAA0B,EAA1B;AACF,MAAIyS,SAAS,GAAGwI,QAAQ,CAACxI,SAAT,GAAqBwI,QAAQ,CAACxI,SAAT,GAAqB,GAArB,IAA4BwI,QAAQ,CAAC1S,IAAT,CAAckK,SAAd,IAA2B,EAAvD,CAArB,GAAkFwI,QAAQ,CAAC1S,IAAT,CAAckK,SAAhH;AACAwI,EAAAA,QAAQ,CAAC92B,IAAT,CAAc6b,SAAd,GAA0ByS,SAAS,IAAI,EAAvC;AACD;;AAED,SAAS8M,gBAAT,CAA0BvW,EAA1B,EAA8BiS,QAA9B,EAAwCzB,KAAxC,EAA+C4F,IAA/C,EAAqD;AACnD,MAAInE,QAAQ,CAACoF,MAAb,EAAqB;AACnBpF,IAAAA,QAAQ,CAACnb,IAAT,CAAcpa,WAAd,CAA0Bu1B,QAAQ,CAACoF,MAAnC;AACApF,IAAAA,QAAQ,CAACoF,MAAT,GAAkB,IAAlB;AACD;;AACD,MAAIpF,QAAQ,CAACqF,gBAAb,EAA+B;AAC7BrF,IAAAA,QAAQ,CAACnb,IAAT,CAAcpa,WAAd,CAA0Bu1B,QAAQ,CAACqF,gBAAnC;AACArF,IAAAA,QAAQ,CAACqF,gBAAT,GAA4B,IAA5B;AACD;;AACD,MAAIrF,QAAQ,CAAC1S,IAAT,CAAcgY,WAAlB,EAA+B;AAC7B,QAAIR,IAAI,GAAGL,iBAAiB,CAACzE,QAAD,CAA5B;AACAA,IAAAA,QAAQ,CAACqF,gBAAT,GAA4B9f,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,kCAAkCya,QAAQ,CAAC1S,IAAT,CAAcgY,WAA9D,EACE,SAAQvX,EAAE,CAAC5S,OAAH,CAAWoqB,WAAX,GAAyBpB,IAAI,CAACqB,QAA9B,GAAyC,CAACrB,IAAI,CAACsB,gBAAiB,cAAatB,IAAI,CAACsB,gBAAiB,IAD7G,CAA/B;AAEA1X,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBE,aAAjB,CAA+BlC,QAAQ,CAACqF,gBAAxC;AACAP,IAAAA,IAAI,CAACC,YAAL,CAAkB/E,QAAQ,CAACqF,gBAA3B,EAA6CrF,QAAQ,CAAC92B,IAAtD;AACD;;AACD,MAAIozB,OAAO,GAAG0D,QAAQ,CAAC1S,IAAT,CAAcoY,aAA5B;;AACA,MAAI3X,EAAE,CAAC5S,OAAH,CAAWwqB,WAAX,IAA0BrJ,OAA9B,EAAuC;AACrC,QAAIwI,IAAI,GAAGL,iBAAiB,CAACzE,QAAD,CAA5B;AACA,QAAI4F,UAAU,GAAG5F,QAAQ,CAACoF,MAAT,GAAkB7f,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,2BAAd,EAA4C,SAAQwI,EAAE,CAAC5S,OAAH,CAAWoqB,WAAX,GAAyBpB,IAAI,CAACqB,QAA9B,GAAyC,CAACrB,IAAI,CAACsB,gBAAiB,IAApH,CAAtC;AACAG,IAAAA,UAAU,CAACzmC,YAAX,CAAwB,aAAxB,EAAuC,MAAvC;AACA4uB,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBE,aAAjB,CAA+B0D,UAA/B;AACAd,IAAAA,IAAI,CAACC,YAAL,CAAkBa,UAAlB,EAA8B5F,QAAQ,CAAC92B,IAAvC;AACA,QAAI82B,QAAQ,CAAC1S,IAAT,CAAcgY,WAAlB,EACEM,UAAU,CAAC7gB,SAAX,IAAwB,MAAMib,QAAQ,CAAC1S,IAAT,CAAcgY,WAA5C;AACF,QAAIvX,EAAE,CAAC5S,OAAH,CAAWwqB,WAAX,KAA2B,CAACrJ,OAAD,IAAY,CAACA,OAAO,CAAC,wBAAD,CAA/C,CAAJ,EACE0D,QAAQ,CAAC6F,UAAT,GAAsBD,UAAU,CAACnmC,WAAX,CACpB8lB,GAAG,CAAC,KAAD,EAAQ2P,aAAa,CAACnH,EAAE,CAAC5S,OAAJ,EAAaojB,KAAb,CAArB,EACC,6CADD,EAEE,SAAQ4F,IAAI,CAAC2B,UAAL,CAAgB,wBAAhB,CAA0C,cAAa/X,EAAE,CAACplB,OAAH,CAAWo9B,iBAAkB,IAF9F,CADiB,CAAtB;AAIF,QAAIzJ,OAAJ,EAAa,KAAK,IAAIzpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkb,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,CAAuBhoC,MAA3C,EAAmD,EAAE6U,CAArD,EAAwD;AACnE,UAAIvH,EAAE,GAAGyiB,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,CAAuBnzB,CAAvB,EAA0BkS,SAAnC;AAAA,UAA8CyG,KAAK,GAAG8Q,OAAO,CAACnoB,cAAR,CAAuB7I,EAAvB,KAA8BgxB,OAAO,CAAChxB,EAAD,CAA3F;AACA,UAAIkgB,KAAJ,EACEoa,UAAU,CAACnmC,WAAX,CAAuB8lB,GAAG,CAAC,KAAD,EAAQ,CAACiG,KAAD,CAAR,EAAiB,uBAAjB,EACE,SAAQ2Y,IAAI,CAAC2B,UAAL,CAAgBx6B,EAAhB,CAAoB,cAAa64B,IAAI,CAAC8B,WAAL,CAAiB36B,EAAjB,CAAqB,IADhE,CAA1B;AAEH;AACF;AACF;;AAED,SAASk5B,iBAAT,CAA2BzW,EAA3B,EAA+BiS,QAA/B,EAAyCmE,IAAzC,EAA+C;AAC7C,MAAInE,QAAQ,CAACkG,SAAb,EAAwBlG,QAAQ,CAACkG,SAAT,GAAqB,IAArB;AACxB,MAAIC,QAAQ,GAAGzhB,SAAS,CAAC,uBAAD,CAAxB;;AACA,OAAK,IAAIG,IAAI,GAAGmb,QAAQ,CAACnb,IAAT,CAAcO,UAAzB,EAAqCuN,IAA1C,EAAgD9N,IAAhD,EAAsDA,IAAI,GAAG8N,IAA7D,EAAmE;AACjEA,IAAAA,IAAI,GAAG9N,IAAI,CAACuhB,WAAZ;AACA,QAAID,QAAQ,CAACznB,IAAT,CAAcmG,IAAI,CAACE,SAAnB,CAAJ,EAAmCib,QAAQ,CAACnb,IAAT,CAAcpa,WAAd,CAA0Boa,IAA1B;AACpC;;AACDwhB,EAAAA,iBAAiB,CAACtY,EAAD,EAAKiS,QAAL,EAAemE,IAAf,CAAjB;AACD;;;AAGD,AAAO,SAASmC,gBAAT,CAA0BvY,EAA1B,EAA8BiS,QAA9B,EAAwCzB,KAAxC,EAA+C4F,IAA/C,EAAqD;AAC1D,MAAIe,KAAK,GAAGF,cAAc,CAACjX,EAAD,EAAKiS,QAAL,CAA1B;AACAA,EAAAA,QAAQ,CAAC92B,IAAT,GAAgB82B,QAAQ,CAACnb,IAAT,GAAgBqgB,KAAK,CAAChF,GAAtC;AACA,MAAIgF,KAAK,CAAC3N,OAAV,EAAmByI,QAAQ,CAACzI,OAAT,GAAmB2N,KAAK,CAAC3N,OAAzB;AACnB,MAAI2N,KAAK,CAAC1N,SAAV,EAAqBwI,QAAQ,CAACxI,SAAT,GAAqB0N,KAAK,CAAC1N,SAA3B;AAErB+M,EAAAA,iBAAiB,CAACxW,EAAD,EAAKiS,QAAL,CAAjB;AACAsE,EAAAA,gBAAgB,CAACvW,EAAD,EAAKiS,QAAL,EAAezB,KAAf,EAAsB4F,IAAtB,CAAhB;AACAkC,EAAAA,iBAAiB,CAACtY,EAAD,EAAKiS,QAAL,EAAemE,IAAf,CAAjB;AACA,SAAOnE,QAAQ,CAACnb,IAAhB;AACD;AAGD;;AACA,SAASwhB,iBAAT,CAA2BtY,EAA3B,EAA+BiS,QAA/B,EAAyCmE,IAAzC,EAA+C;AAC7CoC,EAAAA,oBAAoB,CAACxY,EAAD,EAAKiS,QAAQ,CAAC1S,IAAd,EAAoB0S,QAApB,EAA8BmE,IAA9B,EAAoC,IAApC,CAApB;AACA,MAAInE,QAAQ,CAACK,IAAb,EAAmB,KAAK,IAAItxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGixB,QAAQ,CAACK,IAAT,CAAcriC,MAAlC,EAA0C+Q,CAAC,EAA3C,EACjBw3B,oBAAoB,CAACxY,EAAD,EAAKiS,QAAQ,CAACK,IAAT,CAActxB,CAAd,CAAL,EAAuBixB,QAAvB,EAAiCmE,IAAjC,EAAuC,KAAvC,CAApB;AACH;;AAED,SAASoC,oBAAT,CAA8BxY,EAA9B,EAAkCT,IAAlC,EAAwC0S,QAAxC,EAAkDmE,IAAlD,EAAwDqC,UAAxD,EAAoE;AAClE,MAAI,CAAClZ,IAAI,CAACmZ,OAAV,EAAmB;AACnB,MAAI3B,IAAI,GAAGL,iBAAiB,CAACzE,QAAD,CAA5B;;AACA,OAAK,IAAIjxB,CAAC,GAAG,CAAR,EAAW23B,EAAE,GAAGpZ,IAAI,CAACmZ,OAA1B,EAAmC13B,CAAC,GAAG23B,EAAE,CAAC1oC,MAA1C,EAAkD,EAAE+Q,CAApD,EAAuD;AACrD,QAAIgzB,MAAM,GAAG2E,EAAE,CAAC33B,CAAD,CAAf;AAAA,QAAoB8V,IAAI,GAAGU,GAAG,CAAC,KAAD,EAAQ,CAACwc,MAAM,CAACld,IAAR,CAAR,EAAuB,2BAA2Bkd,MAAM,CAAChd,SAAP,GAAmB,MAAMgd,MAAM,CAAChd,SAAhC,GAA4C,EAAvE,CAAvB,CAA9B;AACA,QAAI,CAACgd,MAAM,CAAC4E,iBAAZ,EAA+B9hB,IAAI,CAAC1lB,YAAL,CAAkB,kBAAlB,EAAsC,MAAtC;AAC/BynC,IAAAA,kBAAkB,CAAC7E,MAAD,EAASld,IAAT,EAAemb,QAAf,EAAyBmE,IAAzB,CAAlB;AACApW,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBE,aAAjB,CAA+Brd,IAA/B;AACA,QAAI2hB,UAAU,IAAIzE,MAAM,CAAC8E,KAAzB,EACE/B,IAAI,CAACC,YAAL,CAAkBlgB,IAAlB,EAAwBmb,QAAQ,CAACoF,MAAT,IAAmBpF,QAAQ,CAAC92B,IAApD,EADF,KAGE47B,IAAI,CAACrlC,WAAL,CAAiBolB,IAAjB;AACFif,IAAAA,WAAW,CAAC/B,MAAD,EAAS,QAAT,CAAX;AACD;AACF;;AAED,SAAS6E,kBAAT,CAA4B7E,MAA5B,EAAoCld,IAApC,EAA0Cmb,QAA1C,EAAoDmE,IAApD,EAA0D;AACxD,MAAIpC,MAAM,CAAC+E,SAAX,EAAsB;AACpB,AAAC,KAAC9G,QAAQ,CAACkG,SAAT,KAAuBlG,QAAQ,CAACkG,SAAT,GAAqB,EAA5C,CAAD,EAAkDh4B,IAAlD,CAAuD2W,IAAvD;AACD,QAAI1pB,KAAK,GAAGgpC,IAAI,CAAC4C,YAAjB;AACAliB,IAAAA,IAAI,CAAC1oB,KAAL,CAAWgU,IAAX,GAAkBg0B,IAAI,CAACqB,QAAL,GAAgB,IAAlC;;AACA,QAAI,CAACzD,MAAM,CAACiF,WAAZ,EAAyB;AACvB7rC,MAAAA,KAAK,IAAIgpC,IAAI,CAACsB,gBAAd;AACA5gB,MAAAA,IAAI,CAAC1oB,KAAL,CAAW8qC,WAAX,GAAyB9C,IAAI,CAACsB,gBAAL,GAAwB,IAAjD;AACD;;AACD5gB,IAAAA,IAAI,CAAC1oB,KAAL,CAAWhB,KAAX,GAAmBA,KAAK,GAAG,IAA3B;AACD;;AACD,MAAI4mC,MAAM,CAACiF,WAAX,EAAwB;AACtBniB,IAAAA,IAAI,CAAC1oB,KAAL,CAAWwoC,MAAX,GAAoB,CAApB;AACA9f,IAAAA,IAAI,CAAC1oB,KAAL,CAAW1B,QAAX,GAAsB,UAAtB;AACA,QAAI,CAACsnC,MAAM,CAAC+E,SAAZ,EAAuBjiB,IAAI,CAAC1oB,KAAL,CAAW+qC,UAAX,GAAwB,CAAC/C,IAAI,CAACsB,gBAAN,GAAyB,IAAjD;AACxB;AACF;;ACzLM,SAAS0B,YAAT,CAAsBpF,MAAtB,EAA8B;AACnC,MAAIA,MAAM,CAAC1mC,MAAP,IAAiB,IAArB,EAA2B,OAAO0mC,MAAM,CAAC1mC,MAAd;AAC3B,MAAI0yB,EAAE,GAAGgU,MAAM,CAAChO,GAAP,CAAWhG,EAApB;AACA,MAAI,CAACA,EAAL,EAAS,OAAO,CAAP;;AACT,MAAI,CAACxH,QAAQ,CAAChnB,QAAQ,CAACkF,IAAV,EAAgBs9B,MAAM,CAACld,IAAvB,CAAb,EAA2C;AACzC,QAAIuiB,WAAW,GAAG,qBAAlB;AACA,QAAIrF,MAAM,CAACiF,WAAX,EACEI,WAAW,IAAI,mBAAmBrZ,EAAE,CAACplB,OAAH,CAAW0+B,OAAX,CAAmB/X,WAAtC,GAAoD,KAAnE;AACF,QAAIyS,MAAM,CAAC+E,SAAX,EACEM,WAAW,IAAI,YAAYrZ,EAAE,CAACplB,OAAH,CAAW2+B,OAAX,CAAmB7nB,WAA/B,GAA6C,KAA5D;AACF4F,IAAAA,oBAAoB,CAAC0I,EAAE,CAACplB,OAAH,CAAW0mB,OAAZ,EAAqB9J,GAAG,CAAC,KAAD,EAAQ,CAACwc,MAAM,CAACld,IAAR,CAAR,EAAuB,IAAvB,EAA6BuiB,WAA7B,CAAxB,CAApB;AACD;;AACD,SAAOrF,MAAM,CAAC1mC,MAAP,GAAgB0mC,MAAM,CAACld,IAAP,CAAY7c,UAAZ,CAAuB+C,YAA9C;AACD;;AAGD,AAAO,SAASw8B,aAAT,CAAuB5+B,OAAvB,EAAgC4N,CAAhC,EAAmC;AACxC,OAAK,IAAI2R,CAAC,GAAG4G,QAAQ,CAACvY,CAAD,CAArB,EAA0B2R,CAAC,IAAIvf,OAAO,CAAC2+B,OAAvC,EAAgDpf,CAAC,GAAGA,CAAC,CAAClgB,UAAtD,EAAkE;AAChE,QAAI,CAACkgB,CAAD,IAAOA,CAAC,CAACzB,QAAF,IAAc,CAAd,IAAmByB,CAAC,CAACjpB,YAAF,CAAe,kBAAf,KAAsC,MAAhE,IACCipB,CAAC,CAAClgB,UAAF,IAAgBW,OAAO,CAAC6+B,KAAxB,IAAiCtf,CAAC,IAAIvf,OAAO,CAAC8+B,KADnD,EAEE,OAAO,IAAP;AACH;AACF;;ACTM,SAASC,UAAT,CAAoB/+B,OAApB,EAA6B;AAAC,SAAOA,OAAO,CAACg/B,SAAR,CAAkBC,SAAzB;AAAmC;AACxE,AAAO,SAASC,WAAT,CAAqBl/B,OAArB,EAA8B;AAAC,SAAOA,OAAO,CAAC8+B,KAAR,CAAc18B,YAAd,GAA6BpC,OAAO,CAACg/B,SAAR,CAAkB58B,YAAtD;AAAmE;AACzG,AAAO,SAAS+8B,QAAT,CAAkBn/B,OAAlB,EAA2B;AAChC,MAAIA,OAAO,CAACo/B,cAAZ,EAA4B,OAAOp/B,OAAO,CAACo/B,cAAf;AAC5B,MAAIxxB,CAAC,GAAG8O,oBAAoB,CAAC1c,OAAO,CAAC0mB,OAAT,EAAkB9J,GAAG,CAAC,KAAD,EAAQ,GAAR,EAAa,sBAAb,CAArB,CAA5B;AACA,MAAIppB,KAAK,GAAGwS,MAAM,CAACq5B,gBAAP,GAA0Br5B,MAAM,CAACq5B,gBAAP,CAAwBzxB,CAAxB,CAA1B,GAAuDA,CAAC,CAAC0xB,YAArE;AACA,MAAItkC,IAAI,GAAG;AAACwM,IAAAA,IAAI,EAAE+3B,QAAQ,CAAC/rC,KAAK,CAAC8qC,WAAP,CAAf;AAAoC52B,IAAAA,KAAK,EAAE63B,QAAQ,CAAC/rC,KAAK,CAACgsC,YAAP;AAAnD,GAAX;AACA,MAAI,CAAClrC,KAAK,CAAC0G,IAAI,CAACwM,IAAN,CAAN,IAAqB,CAAClT,KAAK,CAAC0G,IAAI,CAAC0M,KAAN,CAA/B,EAA6C1H,OAAO,CAACo/B,cAAR,GAAyBpkC,IAAzB;AAC7C,SAAOA,IAAP;AACD;AAED,AAAO,SAASykC,SAAT,CAAmBra,EAAnB,EAAuB;AAAE,SAAOnF,WAAW,GAAGmF,EAAE,CAACplB,OAAH,CAAW0/B,cAAhC;AAAgD;AAChF,AAAO,SAASC,YAAT,CAAsBva,EAAtB,EAA0B;AAC/B,SAAOA,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoB9oB,WAApB,GAAkC2oB,SAAS,CAACra,EAAD,CAA3C,GAAkDA,EAAE,CAACplB,OAAH,CAAW6/B,QAApE;AACD;AACD,AAAO,SAASC,aAAT,CAAuB1a,EAAvB,EAA2B;AAChC,SAAOA,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBG,YAApB,GAAmCN,SAAS,CAACra,EAAD,CAA5C,GAAmDA,EAAE,CAACplB,OAAH,CAAWggC,SAArE;AACD;AAGD;AACA;AACA;;AACA,SAASC,iBAAT,CAA2B7a,EAA3B,EAA+BiS,QAA/B,EAAyC6I,IAAzC,EAA+C;AAC7C,MAAIC,QAAQ,GAAG/a,EAAE,CAAC5S,OAAH,CAAW4tB,YAA1B;AACA,MAAIC,QAAQ,GAAGF,QAAQ,IAAIR,YAAY,CAACva,EAAD,CAAvC;;AACA,MAAI,CAACiS,QAAQ,CAAC3Q,OAAT,CAAiB4Z,OAAlB,IAA6BH,QAAQ,IAAI9I,QAAQ,CAAC3Q,OAAT,CAAiBl0B,KAAjB,IAA0B6tC,QAAvE,EAAiF;AAC/E,QAAIC,OAAO,GAAGjJ,QAAQ,CAAC3Q,OAAT,CAAiB4Z,OAAjB,GAA2B,EAAzC;;AACA,QAAIH,QAAJ,EAAc;AACZ9I,MAAAA,QAAQ,CAAC3Q,OAAT,CAAiBl0B,KAAjB,GAAyB6tC,QAAzB;AACA,UAAIE,KAAK,GAAGlJ,QAAQ,CAAC92B,IAAT,CAAckc,UAAd,CAAyB+jB,cAAzB,EAAZ;;AACA,WAAK,IAAIp6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm6B,KAAK,CAAClrC,MAAN,GAAe,CAAnC,EAAsC+Q,CAAC,EAAvC,EAA2C;AACzC,YAAIgd,GAAG,GAAGmd,KAAK,CAACn6B,CAAD,CAAf;AAAA,YAAoB4jB,IAAI,GAAGuW,KAAK,CAACn6B,CAAC,GAAG,CAAL,CAAhC;AACA,YAAIjI,IAAI,CAAC6pB,GAAL,CAAS5E,GAAG,CAACqd,MAAJ,GAAazW,IAAI,CAACyW,MAA3B,IAAqC,CAAzC,EACEH,OAAO,CAAC/6B,IAAR,CAAa,CAAC6d,GAAG,CAACqd,MAAJ,GAAazW,IAAI,CAACzT,GAAnB,IAA0B,CAA1B,GAA8B2pB,IAAI,CAAC3pB,GAAhD;AACH;AACF;;AACD+pB,IAAAA,OAAO,CAAC/6B,IAAR,CAAa26B,IAAI,CAACO,MAAL,GAAcP,IAAI,CAAC3pB,GAAhC;AACD;AACF;AAGD;AACA;;;AACA,AAAO,SAASmqB,eAAT,CAAyBrJ,QAAzB,EAAmC1S,IAAnC,EAAyCiR,KAAzC,EAAgD;AACrD,MAAIyB,QAAQ,CAAC1S,IAAT,IAAiBA,IAArB,EACE,OAAO;AAAC9X,IAAAA,GAAG,EAAEwqB,QAAQ,CAAC3Q,OAAT,CAAiB7Z,GAAvB;AAA4BsqB,IAAAA,KAAK,EAAEE,QAAQ,CAAC3Q,OAAT,CAAiByQ;AAApD,GAAP;;AACF,OAAK,IAAI/wB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGixB,QAAQ,CAACK,IAAT,CAAcriC,MAAlC,EAA0C+Q,CAAC,EAA3C,EACE,IAAIixB,QAAQ,CAACK,IAAT,CAActxB,CAAd,KAAoBue,IAAxB,EACE,OAAO;AAAC9X,IAAAA,GAAG,EAAEwqB,QAAQ,CAAC3Q,OAAT,CAAiBuR,IAAjB,CAAsB7xB,CAAtB,CAAN;AAAgC+wB,IAAAA,KAAK,EAAEE,QAAQ,CAAC3Q,OAAT,CAAiBwR,MAAjB,CAAwB9xB,CAAxB;AAAvC,GAAP;;AACJ,OAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGixB,QAAQ,CAACK,IAAT,CAAcriC,MAAlC,EAA0C+Q,CAAC,EAA3C,EACE,IAAI4lB,MAAM,CAACqL,QAAQ,CAACK,IAAT,CAActxB,CAAd,CAAD,CAAN,GAA2BwvB,KAA/B,EACE,OAAO;AAAC/oB,IAAAA,GAAG,EAAEwqB,QAAQ,CAAC3Q,OAAT,CAAiBuR,IAAjB,CAAsB7xB,CAAtB,CAAN;AAAgC+wB,IAAAA,KAAK,EAAEE,QAAQ,CAAC3Q,OAAT,CAAiBwR,MAAjB,CAAwB9xB,CAAxB,CAAvC;AAAmE+d,IAAAA,MAAM,EAAE;AAA3E,GAAP;AACL;AAGD;;AACA,SAASwc,yBAAT,CAAmCvb,EAAnC,EAAuCT,IAAvC,EAA6C;AAC3CA,EAAAA,IAAI,GAAG4Q,UAAU,CAAC5Q,IAAD,CAAjB;AACA,MAAIiR,KAAK,GAAG5J,MAAM,CAACrH,IAAD,CAAlB;AACA,MAAI2V,IAAI,GAAGlV,EAAE,CAACplB,OAAH,CAAW+3B,gBAAX,GAA8B,IAAImC,QAAJ,CAAa9U,EAAE,CAACgG,GAAhB,EAAqBzG,IAArB,EAA2BiR,KAA3B,CAAzC;AACA0E,EAAAA,IAAI,CAAC1E,KAAL,GAAaA,KAAb;AACA,MAAI2G,KAAK,GAAGjC,IAAI,CAACiC,KAAL,GAAanF,gBAAgB,CAAChS,EAAD,EAAKkV,IAAL,CAAzC;AACAA,EAAAA,IAAI,CAAC/5B,IAAL,GAAYg8B,KAAK,CAAChF,GAAlB;AACA7a,EAAAA,oBAAoB,CAAC0I,EAAE,CAACplB,OAAH,CAAW4gC,WAAZ,EAAyBrE,KAAK,CAAChF,GAA/B,CAApB;AACA,SAAO+C,IAAP;AACD;AAGD;;;AACA,AAAO,SAASuG,WAAT,CAAqBzb,EAArB,EAAyBT,IAAzB,EAA+B/C,EAA/B,EAAmCkf,IAAnC,EAAyC;AAC9C,SAAOC,mBAAmB,CAAC3b,EAAD,EAAK4b,qBAAqB,CAAC5b,EAAD,EAAKT,IAAL,CAA1B,EAAsC/C,EAAtC,EAA0Ckf,IAA1C,CAA1B;AACD;;AAGD,AAAO,SAASG,eAAT,CAAyB7b,EAAzB,EAA6BwQ,KAA7B,EAAoC;AACzC,MAAIA,KAAK,IAAIxQ,EAAE,CAACplB,OAAH,CAAW0vB,QAApB,IAAgCkG,KAAK,GAAGxQ,EAAE,CAACplB,OAAH,CAAW2vB,MAAvD,EACE,OAAOvK,EAAE,CAACplB,OAAH,CAAWs6B,IAAX,CAAgB4G,aAAa,CAAC9b,EAAD,EAAKwQ,KAAL,CAA7B,CAAP;AACF,MAAI0G,GAAG,GAAGlX,EAAE,CAACplB,OAAH,CAAW+3B,gBAArB;AACA,MAAIuE,GAAG,IAAI1G,KAAK,IAAI0G,GAAG,CAAC1G,KAApB,IAA6BA,KAAK,GAAG0G,GAAG,CAAC1G,KAAJ,GAAY0G,GAAG,CAACpkC,IAAzD,EACE,OAAOokC,GAAP;AACH;AAGD;AACA;AACA;AACA;;AACA,AAAO,SAAS0E,qBAAT,CAA+B5b,EAA/B,EAAmCT,IAAnC,EAAyC;AAC9C,MAAIiR,KAAK,GAAG5J,MAAM,CAACrH,IAAD,CAAlB;AACA,MAAI2V,IAAI,GAAG2G,eAAe,CAAC7b,EAAD,EAAKwQ,KAAL,CAA1B;;AACA,MAAI0E,IAAI,IAAI,CAACA,IAAI,CAAC/5B,IAAlB,EAAwB;AACtB+5B,IAAAA,IAAI,GAAG,IAAP;AACD,GAFD,MAEO,IAAIA,IAAI,IAAIA,IAAI,CAACmB,OAAjB,EAA0B;AAC/BF,IAAAA,oBAAoB,CAACnW,EAAD,EAAKkV,IAAL,EAAW1E,KAAX,EAAkBuL,aAAa,CAAC/b,EAAD,CAA/B,CAApB;AACAA,IAAAA,EAAE,CAACO,KAAH,CAASyb,WAAT,GAAuB,IAAvB;AACD;;AACD,MAAI,CAAC9G,IAAL,EACEA,IAAI,GAAGqG,yBAAyB,CAACvb,EAAD,EAAKT,IAAL,CAAhC;AAEF,MAAI5Y,IAAI,GAAG20B,eAAe,CAACpG,IAAD,EAAO3V,IAAP,EAAaiR,KAAb,CAA1B;AACA,SAAO;AACLjR,IAAAA,IAAI,EAAEA,IADD;AACO2V,IAAAA,IAAI,EAAEA,IADb;AACmB4F,IAAAA,IAAI,EAAE,IADzB;AAELrzB,IAAAA,GAAG,EAAEd,IAAI,CAACc,GAFL;AAEUsqB,IAAAA,KAAK,EAAEprB,IAAI,CAACorB,KAFtB;AAE6BhT,IAAAA,MAAM,EAAEpY,IAAI,CAACoY,MAF1C;AAGLkd,IAAAA,UAAU,EAAE;AAHP,GAAP;AAKD;AAGD;;AACA,AAAO,SAASN,mBAAT,CAA6B3b,EAA7B,EAAiCkc,QAAjC,EAA2C1f,EAA3C,EAA+Ckf,IAA/C,EAAqDS,SAArD,EAAgE;AACrE,MAAID,QAAQ,CAACnd,MAAb,EAAqBvC,EAAE,GAAG,CAAC,CAAN;AACrB,MAAI1b,GAAG,GAAG0b,EAAE,IAAIkf,IAAI,IAAI,EAAZ,CAAZ;AAAA,MAA6Bje,KAA7B;;AACA,MAAIye,QAAQ,CAACnK,KAAT,CAAe3rB,cAAf,CAA8BtF,GAA9B,CAAJ,EAAwC;AACtC2c,IAAAA,KAAK,GAAGye,QAAQ,CAACnK,KAAT,CAAejxB,GAAf,CAAR;AACD,GAFD,MAEO;AACL,QAAI,CAACo7B,QAAQ,CAACpB,IAAd,EACEoB,QAAQ,CAACpB,IAAT,GAAgBoB,QAAQ,CAAChH,IAAT,CAAc/5B,IAAd,CAAmB5G,qBAAnB,EAAhB;;AACF,QAAI,CAAC2nC,QAAQ,CAACD,UAAd,EAA0B;AACxBpB,MAAAA,iBAAiB,CAAC7a,EAAD,EAAKkc,QAAQ,CAAChH,IAAd,EAAoBgH,QAAQ,CAACpB,IAA7B,CAAjB;AACAoB,MAAAA,QAAQ,CAACD,UAAT,GAAsB,IAAtB;AACD;;AACDxe,IAAAA,KAAK,GAAG2e,gBAAgB,CAACpc,EAAD,EAAKkc,QAAL,EAAe1f,EAAf,EAAmBkf,IAAnB,CAAxB;AACA,QAAI,CAACje,KAAK,CAAC4e,KAAX,EAAkBH,QAAQ,CAACnK,KAAT,CAAejxB,GAAf,IAAsB2c,KAAtB;AACnB;;AACD,SAAO;AAACrb,IAAAA,IAAI,EAAEqb,KAAK,CAACrb,IAAb;AAAmBE,IAAAA,KAAK,EAAEmb,KAAK,CAACnb,KAAhC;AACC6O,IAAAA,GAAG,EAAEgrB,SAAS,GAAG1e,KAAK,CAAC6e,IAAT,GAAgB7e,KAAK,CAACtM,GADrC;AAECkqB,IAAAA,MAAM,EAAEc,SAAS,GAAG1e,KAAK,CAAC8e,OAAT,GAAmB9e,KAAK,CAAC4d;AAF3C,GAAP;AAGD;AAED,IAAImB,QAAQ,GAAG;AAACp6B,EAAAA,IAAI,EAAE,CAAP;AAAUE,EAAAA,KAAK,EAAE,CAAjB;AAAoB6O,EAAAA,GAAG,EAAE,CAAzB;AAA4BkqB,EAAAA,MAAM,EAAE;AAApC,CAAf;AAEA,AAAO,SAASoB,sBAAT,CAAgCh1B,GAAhC,EAAqC+U,EAArC,EAAyCkf,IAAzC,EAA+C;AACpD,MAAI5kB,IAAJ,EAAUiB,KAAV,EAAiBlV,GAAjB,EAAsBrN,QAAtB,EAAgCknC,MAAhC,EAAwCC,IAAxC,CADoD;AAGpD;;AACA,OAAK,IAAI37B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyG,GAAG,CAACxX,MAAxB,EAAgC+Q,CAAC,IAAI,CAArC,EAAwC;AACtC07B,IAAAA,MAAM,GAAGj1B,GAAG,CAACzG,CAAD,CAAZ;AACA27B,IAAAA,IAAI,GAAGl1B,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAV;;AACA,QAAIwb,EAAE,GAAGkgB,MAAT,EAAiB;AACf3kB,MAAAA,KAAK,GAAG,CAAR;AAAWlV,MAAAA,GAAG,GAAG,CAAN;AACXrN,MAAAA,QAAQ,GAAG,MAAX;AACD,KAHD,MAGO,IAAIgnB,EAAE,GAAGmgB,IAAT,EAAe;AACpB5kB,MAAAA,KAAK,GAAGyE,EAAE,GAAGkgB,MAAb;AACA75B,MAAAA,GAAG,GAAGkV,KAAK,GAAG,CAAd;AACD,KAHM,MAGA,IAAI/W,CAAC,IAAIyG,GAAG,CAACxX,MAAJ,GAAa,CAAlB,IAAuBusB,EAAE,IAAImgB,IAAN,IAAcl1B,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAH,GAAawb,EAAtD,EAA0D;AAC/D3Z,MAAAA,GAAG,GAAG85B,IAAI,GAAGD,MAAb;AACA3kB,MAAAA,KAAK,GAAGlV,GAAG,GAAG,CAAd;AACA,UAAI2Z,EAAE,IAAImgB,IAAV,EAAgBnnC,QAAQ,GAAG,OAAX;AACjB;;AACD,QAAIuiB,KAAK,IAAI,IAAb,EAAmB;AACjBjB,MAAAA,IAAI,GAAGrP,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAV;AACA,UAAI07B,MAAM,IAAIC,IAAV,IAAkBjB,IAAI,KAAK5kB,IAAI,CAACuW,UAAL,GAAkB,MAAlB,GAA2B,OAAhC,CAA1B,EACE73B,QAAQ,GAAGkmC,IAAX;AACF,UAAIA,IAAI,IAAI,MAAR,IAAkB3jB,KAAK,IAAI,CAA/B,EACE,OAAO/W,CAAC,IAAIyG,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAH,IAAcyG,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAtB,IAAiCyG,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAH,CAAWqsB,UAAnD,EAA+D;AAC7DvW,QAAAA,IAAI,GAAGrP,GAAG,CAAC,CAACzG,CAAC,IAAI,CAAN,IAAW,CAAZ,CAAV;AACAxL,QAAAA,QAAQ,GAAG,MAAX;AACD;AACH,UAAIkmC,IAAI,IAAI,OAAR,IAAmB3jB,KAAK,IAAI4kB,IAAI,GAAGD,MAAvC,EACE,OAAO17B,CAAC,GAAGyG,GAAG,CAACxX,MAAJ,GAAa,CAAjB,IAAsBwX,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAH,IAAcyG,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAvC,IAAkD,CAACyG,GAAG,CAACzG,CAAC,GAAG,CAAL,CAAH,CAAWqsB,UAArE,EAAiF;AAC/EvW,QAAAA,IAAI,GAAGrP,GAAG,CAAC,CAACzG,CAAC,IAAI,CAAN,IAAW,CAAZ,CAAV;AACAxL,QAAAA,QAAQ,GAAG,OAAX;AACD;AACH;AACD;AACF;;AACD,SAAO;AAACshB,IAAAA,IAAI,EAAEA,IAAP;AAAaiB,IAAAA,KAAK,EAAEA,KAApB;AAA2BlV,IAAAA,GAAG,EAAEA,GAAhC;AAAqCrN,IAAAA,QAAQ,EAAEA,QAA/C;AAAyDonC,IAAAA,UAAU,EAAEF,MAArE;AAA6EG,IAAAA,QAAQ,EAAEF;AAAvF,GAAP;AACD;;AAED,SAASG,aAAT,CAAuB3B,KAAvB,EAA8BO,IAA9B,EAAoC;AAClC,MAAIZ,IAAI,GAAG0B,QAAX;AACA,MAAId,IAAI,IAAI,MAAZ,EAAoB,KAAK,IAAI16B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm6B,KAAK,CAAClrC,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC;AACzD,QAAI,CAAC85B,IAAI,GAAGK,KAAK,CAACn6B,CAAD,CAAb,EAAkBoB,IAAlB,IAA0B04B,IAAI,CAACx4B,KAAnC,EAA0C;AAC3C,GAFD,MAEO,KAAK,IAAItB,CAAC,GAAGm6B,KAAK,CAAClrC,MAAN,GAAe,CAA5B,EAA+B+Q,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA4C;AACjD,QAAI,CAAC85B,IAAI,GAAGK,KAAK,CAACn6B,CAAD,CAAb,EAAkBoB,IAAlB,IAA0B04B,IAAI,CAACx4B,KAAnC,EAA0C;AAC3C;AACD,SAAOw4B,IAAP;AACD;;AAED,SAASsB,gBAAT,CAA0Bpc,EAA1B,EAA8Bkc,QAA9B,EAAwC1f,EAAxC,EAA4Ckf,IAA5C,EAAkD;AAChD,MAAIqB,KAAK,GAAGN,sBAAsB,CAACP,QAAQ,CAACz0B,GAAV,EAAe+U,EAAf,EAAmBkf,IAAnB,CAAlC;AACA,MAAI5kB,IAAI,GAAGimB,KAAK,CAACjmB,IAAjB;AAAA,MAAuBiB,KAAK,GAAGglB,KAAK,CAAChlB,KAArC;AAAA,MAA4ClV,GAAG,GAAGk6B,KAAK,CAACl6B,GAAxD;AAAA,MAA6DrN,QAAQ,GAAGunC,KAAK,CAACvnC,QAA9E;AAEA,MAAIslC,IAAJ;;AACA,MAAIhkB,IAAI,CAAC4B,QAAL,IAAiB,CAArB,EAAwB;AAAE;AACxB,SAAK,IAAI1X,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAAE;AAC5B,aAAO+W,KAAK,IAAI8E,eAAe,CAACqf,QAAQ,CAAC3c,IAAT,CAAcpkB,IAAd,CAAmB6hB,MAAnB,CAA0B+f,KAAK,CAACH,UAAN,GAAmB7kB,KAA7C,CAAD,CAA/B,EAAsF,EAAEA,KAAF;;AACtF,aAAOglB,KAAK,CAACH,UAAN,GAAmB/5B,GAAnB,GAAyBk6B,KAAK,CAACF,QAA/B,IAA2ChgB,eAAe,CAACqf,QAAQ,CAAC3c,IAAT,CAAcpkB,IAAd,CAAmB6hB,MAAnB,CAA0B+f,KAAK,CAACH,UAAN,GAAmB/5B,GAA7C,CAAD,CAAjE,EAAsH,EAAEA,GAAF;;AACtH,UAAIyS,EAAE,IAAIC,UAAU,GAAG,CAAnB,IAAwBwC,KAAK,IAAI,CAAjC,IAAsClV,GAAG,IAAIk6B,KAAK,CAACF,QAAN,GAAiBE,KAAK,CAACH,UAAxE,EACE9B,IAAI,GAAGhkB,IAAI,CAAC7c,UAAL,CAAgB1F,qBAAhB,EAAP,CADF,KAGEumC,IAAI,GAAGgC,aAAa,CAACjlB,KAAK,CAACf,IAAD,EAAOiB,KAAP,EAAclV,GAAd,CAAL,CAAwBu4B,cAAxB,EAAD,EAA2CM,IAA3C,CAApB;AACF,UAAIZ,IAAI,CAAC14B,IAAL,IAAa04B,IAAI,CAACx4B,KAAlB,IAA2ByV,KAAK,IAAI,CAAxC,EAA2C;AAC3ClV,MAAAA,GAAG,GAAGkV,KAAN;AACAA,MAAAA,KAAK,GAAGA,KAAK,GAAG,CAAhB;AACAviB,MAAAA,QAAQ,GAAG,OAAX;AACD;;AACD,QAAI8f,EAAE,IAAIC,UAAU,GAAG,EAAvB,EAA2BulB,IAAI,GAAGkC,yBAAyB,CAAChd,EAAE,CAACplB,OAAH,CAAW0mB,OAAZ,EAAqBwZ,IAArB,CAAhC;AAC5B,GAdD,MAcO;AAAE;AACP,QAAI/iB,KAAK,GAAG,CAAZ,EAAeviB,QAAQ,GAAGkmC,IAAI,GAAG,OAAlB;AACf,QAAIP,KAAJ;AACA,QAAInb,EAAE,CAAC5S,OAAH,CAAW4tB,YAAX,IAA2B,CAACG,KAAK,GAAGrkB,IAAI,CAACskB,cAAL,EAAT,EAAgCnrC,MAAhC,GAAyC,CAAxE,EACE6qC,IAAI,GAAGK,KAAK,CAACO,IAAI,IAAI,OAAR,GAAkBP,KAAK,CAAClrC,MAAN,GAAe,CAAjC,GAAqC,CAAtC,CAAZ,CADF,KAGE6qC,IAAI,GAAGhkB,IAAI,CAACviB,qBAAL,EAAP;AACH;;AACD,MAAI+gB,EAAE,IAAIC,UAAU,GAAG,CAAnB,IAAwB,CAACwC,KAAzB,KAAmC,CAAC+iB,IAAD,IAAS,CAACA,IAAI,CAAC14B,IAAN,IAAc,CAAC04B,IAAI,CAACx4B,KAAhE,CAAJ,EAA4E;AAC1E,QAAI26B,KAAK,GAAGnmB,IAAI,CAAC7c,UAAL,CAAgBmhC,cAAhB,GAAiC,CAAjC,CAAZ;AACA,QAAI6B,KAAJ,EACEnC,IAAI,GAAG;AAAC14B,MAAAA,IAAI,EAAE66B,KAAK,CAAC76B,IAAb;AAAmBE,MAAAA,KAAK,EAAE26B,KAAK,CAAC76B,IAAN,GAAa86B,SAAS,CAACld,EAAE,CAACplB,OAAJ,CAAhD;AAA8DuW,MAAAA,GAAG,EAAE8rB,KAAK,CAAC9rB,GAAzE;AAA8EkqB,MAAAA,MAAM,EAAE4B,KAAK,CAAC5B;AAA5F,KAAP,CADF,KAGEP,IAAI,GAAG0B,QAAP;AACH;;AAED,MAAIF,IAAI,GAAGxB,IAAI,CAAC3pB,GAAL,GAAW+qB,QAAQ,CAACpB,IAAT,CAAc3pB,GAApC;AAAA,MAAyCgsB,IAAI,GAAGrC,IAAI,CAACO,MAAL,GAAca,QAAQ,CAACpB,IAAT,CAAc3pB,GAA5E;AACA,MAAIkM,GAAG,GAAG,CAACif,IAAI,GAAGa,IAAR,IAAgB,CAA1B;AACA,MAAIjC,OAAO,GAAGgB,QAAQ,CAAChH,IAAT,CAAc5T,OAAd,CAAsB4Z,OAApC;AACA,MAAIl6B,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGk6B,OAAO,CAACjrC,MAAR,GAAiB,CAA5B,EAA+B+Q,CAAC,EAAhC,EACE,IAAIqc,GAAG,GAAG6d,OAAO,CAACl6B,CAAD,CAAjB,EAAsB;;AACxB,MAAImQ,GAAG,GAAGnQ,CAAC,GAAGk6B,OAAO,CAACl6B,CAAC,GAAG,CAAL,CAAV,GAAoB,CAA/B;AAAA,MAAkCo8B,GAAG,GAAGlC,OAAO,CAACl6B,CAAD,CAA/C;AACA,MAAI9E,MAAM,GAAG;AAACkG,IAAAA,IAAI,EAAE,CAAC5M,QAAQ,IAAI,OAAZ,GAAsBslC,IAAI,CAACx4B,KAA3B,GAAmCw4B,IAAI,CAAC14B,IAAzC,IAAiD85B,QAAQ,CAACpB,IAAT,CAAc14B,IAAtE;AACCE,IAAAA,KAAK,EAAE,CAAC9M,QAAQ,IAAI,MAAZ,GAAqBslC,IAAI,CAAC14B,IAA1B,GAAiC04B,IAAI,CAACx4B,KAAvC,IAAgD45B,QAAQ,CAACpB,IAAT,CAAc14B,IADtE;AAEC+O,IAAAA,GAAG,EAAEA,GAFN;AAEWkqB,IAAAA,MAAM,EAAE+B;AAFnB,GAAb;AAGA,MAAI,CAACtC,IAAI,CAAC14B,IAAN,IAAc,CAAC04B,IAAI,CAACx4B,KAAxB,EAA+BpG,MAAM,CAACmgC,KAAP,GAAe,IAAf;;AAC/B,MAAI,CAACrc,EAAE,CAAC5S,OAAH,CAAWiwB,yBAAhB,EAA2C;AAAEnhC,IAAAA,MAAM,CAACogC,IAAP,GAAcA,IAAd;AAAoBpgC,IAAAA,MAAM,CAACqgC,OAAP,GAAiBY,IAAjB;AAAuB;;AAExF,SAAOjhC,MAAP;AACD;AAGD;;;AACA,SAAS8gC,yBAAT,CAAmC1b,OAAnC,EAA4CwZ,IAA5C,EAAkD;AAChD,MAAI,CAACl6B,MAAM,CAAC08B,MAAR,IAAkBA,MAAM,CAACC,WAAP,IAAsB,IAAxC,IACAD,MAAM,CAACC,WAAP,IAAsBD,MAAM,CAACE,UAD7B,IAC2C,CAAC/a,iBAAiB,CAACnB,OAAD,CADjE,EAEE,OAAOwZ,IAAP;AACF,MAAI2C,MAAM,GAAGH,MAAM,CAACC,WAAP,GAAqBD,MAAM,CAACE,UAAzC;AACA,MAAIE,MAAM,GAAGJ,MAAM,CAACK,WAAP,GAAqBL,MAAM,CAACM,UAAzC;AACA,SAAO;AAACx7B,IAAAA,IAAI,EAAE04B,IAAI,CAAC14B,IAAL,GAAYq7B,MAAnB;AAA2Bn7B,IAAAA,KAAK,EAAEw4B,IAAI,CAACx4B,KAAL,GAAam7B,MAA/C;AACCtsB,IAAAA,GAAG,EAAE2pB,IAAI,CAAC3pB,GAAL,GAAWusB,MADjB;AACyBrC,IAAAA,MAAM,EAAEP,IAAI,CAACO,MAAL,GAAcqC;AAD/C,GAAP;AAED;;AAED,AAAO,SAASG,4BAAT,CAAsC5L,QAAtC,EAAgD;AACrD,MAAIA,QAAQ,CAAC3Q,OAAb,EAAsB;AACpB2Q,IAAAA,QAAQ,CAAC3Q,OAAT,CAAiByQ,KAAjB,GAAyB,EAAzB;AACAE,IAAAA,QAAQ,CAAC3Q,OAAT,CAAiB4Z,OAAjB,GAA2B,IAA3B;AACA,QAAIjJ,QAAQ,CAACK,IAAb,EAAmB,KAAK,IAAItxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGixB,QAAQ,CAACK,IAAT,CAAcriC,MAAlC,EAA0C+Q,CAAC,EAA3C,EACjBixB,QAAQ,CAAC3Q,OAAT,CAAiBwR,MAAjB,CAAwB9xB,CAAxB,IAA6B,EAA7B;AACH;AACF;AAED,AAAO,SAAS88B,yBAAT,CAAmC9d,EAAnC,EAAuC;AAC5CA,EAAAA,EAAE,CAACplB,OAAH,CAAWmjC,eAAX,GAA6B,IAA7B;AACA7mB,EAAAA,cAAc,CAAC8I,EAAE,CAACplB,OAAH,CAAW4gC,WAAZ,CAAd;;AACA,OAAK,IAAIx6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgf,EAAE,CAACplB,OAAH,CAAWs6B,IAAX,CAAgBjlC,MAApC,EAA4C+Q,CAAC,EAA7C,EACE68B,4BAA4B,CAAC7d,EAAE,CAACplB,OAAH,CAAWs6B,IAAX,CAAgBl0B,CAAhB,CAAD,CAA5B;AACH;AAED,AAAO,SAASg9B,WAAT,CAAqBhe,EAArB,EAAyB;AAC9B8d,EAAAA,yBAAyB,CAAC9d,EAAD,CAAzB;AACAA,EAAAA,EAAE,CAACplB,OAAH,CAAWqjC,eAAX,GAA6Bje,EAAE,CAACplB,OAAH,CAAWsjC,gBAAX,GAA8Ble,EAAE,CAACplB,OAAH,CAAWo/B,cAAX,GAA4B,IAAvF;AACA,MAAI,CAACha,EAAE,CAAC5S,OAAH,CAAW4tB,YAAhB,EAA8Bhb,EAAE,CAACplB,OAAH,CAAW02B,cAAX,GAA4B,IAA5B;AAC9BtR,EAAAA,EAAE,CAACplB,OAAH,CAAWujC,YAAX,GAA0B,IAA1B;AACD;;AAED,SAASC,WAAT,GAAuB;AACrB;AACA;AACA;AACA,MAAIzoB,MAAM,IAAIQ,OAAd,EAAuB,OAAO,EAAE3kB,QAAQ,CAACkF,IAAT,CAAcnC,qBAAd,GAAsC6N,IAAtC,GAA6C+3B,QAAQ,CAACF,gBAAgB,CAACzoC,QAAQ,CAACkF,IAAV,CAAhB,CAAgCyiC,UAAjC,CAAvD,CAAP;AACvB,SAAOv4B,MAAM,CAACy9B,WAAP,IAAsB,CAAC7sC,QAAQ,CAAC4gB,eAAT,IAA4B5gB,QAAQ,CAACkF,IAAtC,EAA4C4a,UAAzE;AACD;;AACD,SAASgtB,WAAT,GAAuB;AACrB,MAAI3oB,MAAM,IAAIQ,OAAd,EAAuB,OAAO,EAAE3kB,QAAQ,CAACkF,IAAT,CAAcnC,qBAAd,GAAsC4c,GAAtC,GAA4CgpB,QAAQ,CAACF,gBAAgB,CAACzoC,QAAQ,CAACkF,IAAV,CAAhB,CAAgC6nC,SAAjC,CAAtD,CAAP;AACvB,SAAO39B,MAAM,CAAC49B,WAAP,IAAsB,CAAChtC,QAAQ,CAAC4gB,eAAT,IAA4B5gB,QAAQ,CAACkF,IAAtC,EAA4CtD,SAAzE;AACD;;AAED,SAASqrC,eAAT,CAAyBzN,OAAzB,EAAkC;AAChC,MAAI1jC,MAAM,GAAG,CAAb;AACA,MAAI0jC,OAAO,CAAC0H,OAAZ,EAAqB,KAAK,IAAI13B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgwB,OAAO,CAAC0H,OAAR,CAAgBzoC,MAApC,EAA4C,EAAE+Q,CAA9C,EAAiD,IAAIgwB,OAAO,CAAC0H,OAAR,CAAgB13B,CAAhB,EAAmB83B,KAAvB,EACpExrC,MAAM,IAAI8rC,YAAY,CAACpI,OAAO,CAAC0H,OAAR,CAAgB13B,CAAhB,CAAD,CAAtB;AACF,SAAO1T,MAAP;AACD;AAGD;AACA;AACA;;;AACA,AAAO,SAASoxC,eAAT,CAAyB1e,EAAzB,EAA6BgR,OAA7B,EAAsC8J,IAAtC,EAA4ClS,OAA5C,EAAqD+V,cAArD,EAAqE;AAC1E,MAAI,CAACA,cAAL,EAAqB;AACnB,QAAIrxC,MAAM,GAAGmxC,eAAe,CAACzN,OAAD,CAA5B;AACA8J,IAAAA,IAAI,CAAC3pB,GAAL,IAAY7jB,MAAZ;AAAoBwtC,IAAAA,IAAI,CAACO,MAAL,IAAe/tC,MAAf;AACrB;;AACD,MAAIs7B,OAAO,IAAI,MAAf,EAAuB,OAAOkS,IAAP;AACvB,MAAI,CAAClS,OAAL,EAAcA,OAAO,GAAG,OAAV;AACd,MAAIgW,IAAI,GAAG7N,YAAY,CAACC,OAAD,CAAvB;AACA,MAAIpI,OAAO,IAAI,OAAf,EAAwBgW,IAAI,IAAIjF,UAAU,CAAC3Z,EAAE,CAACplB,OAAJ,CAAlB,CAAxB,KACKgkC,IAAI,IAAI5e,EAAE,CAACplB,OAAH,CAAWikC,UAAnB;;AACL,MAAIjW,OAAO,IAAI,MAAX,IAAqBA,OAAO,IAAI,QAApC,EAA8C;AAC5C,QAAIkW,IAAI,GAAG9e,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBrlC,qBAArB,EAAX;AACAqqC,IAAAA,IAAI,IAAIE,IAAI,CAAC3tB,GAAL,IAAYyX,OAAO,IAAI,QAAX,GAAsB,CAAtB,GAA0B0V,WAAW,EAAjD,CAAR;AACA,QAAIS,IAAI,GAAGD,IAAI,CAAC18B,IAAL,IAAawmB,OAAO,IAAI,QAAX,GAAsB,CAAtB,GAA0BwV,WAAW,EAAlD,CAAX;AACAtD,IAAAA,IAAI,CAAC14B,IAAL,IAAa28B,IAAb;AAAmBjE,IAAAA,IAAI,CAACx4B,KAAL,IAAcy8B,IAAd;AACpB;;AACDjE,EAAAA,IAAI,CAAC3pB,GAAL,IAAYytB,IAAZ;AAAkB9D,EAAAA,IAAI,CAACO,MAAL,IAAeuD,IAAf;AAClB,SAAO9D,IAAP;AACD;AAGD;;AACA,AAAO,SAASkE,eAAT,CAAyBhf,EAAzB,EAA6Bif,MAA7B,EAAqCrW,OAArC,EAA8C;AACnD,MAAIA,OAAO,IAAI,KAAf,EAAsB,OAAOqW,MAAP;AACtB,MAAI78B,IAAI,GAAG68B,MAAM,CAAC78B,IAAlB;AAAA,MAAwB+O,GAAG,GAAG8tB,MAAM,CAAC9tB,GAArC,CAFmD;;AAInD,MAAIyX,OAAO,IAAI,MAAf,EAAuB;AACrBxmB,IAAAA,IAAI,IAAIg8B,WAAW,EAAnB;AACAjtB,IAAAA,GAAG,IAAImtB,WAAW,EAAlB;AACD,GAHD,MAGO,IAAI1V,OAAO,IAAI,OAAX,IAAsB,CAACA,OAA3B,EAAoC;AACzC,QAAIsW,QAAQ,GAAGlf,EAAE,CAACplB,OAAH,CAAW6+B,KAAX,CAAiBllC,qBAAjB,EAAf;AACA6N,IAAAA,IAAI,IAAI88B,QAAQ,CAAC98B,IAAjB;AACA+O,IAAAA,GAAG,IAAI+tB,QAAQ,CAAC/tB,GAAhB;AACD;;AAED,MAAIguB,YAAY,GAAGnf,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBrlC,qBAArB,EAAnB;AACA,SAAO;AAAC6N,IAAAA,IAAI,EAAEA,IAAI,GAAG+8B,YAAY,CAAC/8B,IAA3B;AAAiC+O,IAAAA,GAAG,EAAEA,GAAG,GAAGguB,YAAY,CAAChuB;AAAzD,GAAP;AACD;AAED,AAAO,SAASiuB,UAAT,CAAoBpf,EAApB,EAAwB3E,GAAxB,EAA6BuN,OAA7B,EAAsCoI,OAAtC,EAA+C0K,IAA/C,EAAqD;AAC1D,MAAI,CAAC1K,OAAL,EAAcA,OAAO,GAAGjL,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS3K,GAAG,CAACkE,IAAb,CAAjB;AACd,SAAOmf,eAAe,CAAC1e,EAAD,EAAKgR,OAAL,EAAcyK,WAAW,CAACzb,EAAD,EAAKgR,OAAL,EAAc3V,GAAG,CAACmB,EAAlB,EAAsBkf,IAAtB,CAAzB,EAAsD9S,OAAtD,CAAtB;AACD;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,AAAO,SAASyW,YAAT,CAAsBrf,EAAtB,EAA0B3E,GAA1B,EAA+BuN,OAA/B,EAAwCoI,OAAxC,EAAiDsO,eAAjD,EAAkEnD,SAAlE,EAA6E;AAClFnL,EAAAA,OAAO,GAAGA,OAAO,IAAIjL,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS3K,GAAG,CAACkE,IAAb,CAA5B;AACA,MAAI,CAAC+f,eAAL,EAAsBA,eAAe,GAAG1D,qBAAqB,CAAC5b,EAAD,EAAKgR,OAAL,CAAvC;;AACtB,WAASuO,GAAT,CAAa/iB,EAAb,EAAiBla,KAAjB,EAAwB;AACtB,QAAI0c,CAAC,GAAG2c,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsB9iB,EAAtB,EAA0Bla,KAAK,GAAG,OAAH,GAAa,MAA5C,EAAoD65B,SAApD,CAA3B;AACA,QAAI75B,KAAJ,EAAW0c,CAAC,CAAC5c,IAAF,GAAS4c,CAAC,CAAC1c,KAAX,CAAX,KAAkC0c,CAAC,CAAC1c,KAAF,GAAU0c,CAAC,CAAC5c,IAAZ;AAClC,WAAOs8B,eAAe,CAAC1e,EAAD,EAAKgR,OAAL,EAAchS,CAAd,EAAiB4J,OAAjB,CAAtB;AACD;;AACD,MAAIpL,KAAK,GAAG8B,QAAQ,CAAC0R,OAAD,EAAUhR,EAAE,CAACgG,GAAH,CAAOhoB,SAAjB,CAApB;AAAA,MAAiDwe,EAAE,GAAGnB,GAAG,CAACmB,EAA1D;AAAA,MAA8DuB,MAAM,GAAG1C,GAAG,CAAC0C,MAA3E;;AACA,MAAIvB,EAAE,IAAIwU,OAAO,CAAC71B,IAAR,CAAalL,MAAvB,EAA+B;AAC7BusB,IAAAA,EAAE,GAAGwU,OAAO,CAAC71B,IAAR,CAAalL,MAAlB;AACA8tB,IAAAA,MAAM,GAAG,QAAT;AACD,GAHD,MAGO,IAAIvB,EAAE,IAAI,CAAV,EAAa;AAClBA,IAAAA,EAAE,GAAG,CAAL;AACAuB,IAAAA,MAAM,GAAG,OAAT;AACD;;AACD,MAAI,CAACP,KAAL,EAAY,OAAO+hB,GAAG,CAACxhB,MAAM,IAAI,QAAV,GAAqBvB,EAAE,GAAG,CAA1B,GAA8BA,EAA/B,EAAmCuB,MAAM,IAAI,QAA7C,CAAV;;AAEZ,WAASyhB,OAAT,CAAiBhjB,EAAjB,EAAqBijB,OAArB,EAA8BC,MAA9B,EAAsC;AACpC,QAAIhiB,IAAI,GAAGF,KAAK,CAACiiB,OAAD,CAAhB;AAAA,QAA2Bn9B,KAAK,GAAGob,IAAI,CAACE,KAAL,IAAc,CAAjD;AACA,WAAO2hB,GAAG,CAACG,MAAM,GAAGljB,EAAE,GAAG,CAAR,GAAYA,EAAnB,EAAuBla,KAAK,IAAIo9B,MAAhC,CAAV;AACD;;AACD,MAAID,OAAO,GAAG3hB,aAAa,CAACN,KAAD,EAAQhB,EAAR,EAAYuB,MAAZ,CAA3B;AACA,MAAI4hB,KAAK,GAAG9hB,SAAZ;AACA,MAAIoG,GAAG,GAAGub,OAAO,CAAChjB,EAAD,EAAKijB,OAAL,EAAc1hB,MAAM,IAAI,QAAxB,CAAjB;AACA,MAAI4hB,KAAK,IAAI,IAAb,EAAmB1b,GAAG,CAAC0b,KAAJ,GAAYH,OAAO,CAAChjB,EAAD,EAAKmjB,KAAL,EAAY5hB,MAAM,IAAI,QAAtB,CAAnB;AACnB,SAAOkG,GAAP;AACD;AAGD;;AACA,AAAO,SAAS2b,cAAT,CAAwB5f,EAAxB,EAA4B3E,GAA5B,EAAiC;AACtC,MAAIjZ,IAAI,GAAG,CAAX;AACAiZ,EAAAA,GAAG,GAAGwM,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAAS3K,GAAT,CAAb;AACA,MAAI,CAAC2E,EAAE,CAAC5S,OAAH,CAAW4tB,YAAhB,EAA8B54B,IAAI,GAAG86B,SAAS,CAACld,EAAE,CAACplB,OAAJ,CAAT,GAAwBygB,GAAG,CAACmB,EAAnC;AAC9B,MAAIwU,OAAO,GAAGjL,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS3K,GAAG,CAACkE,IAAb,CAArB;AACA,MAAIpO,GAAG,GAAG4f,YAAY,CAACC,OAAD,CAAZ,GAAwB2I,UAAU,CAAC3Z,EAAE,CAACplB,OAAJ,CAA5C;AACA,SAAO;AAACwH,IAAAA,IAAI,EAAEA,IAAP;AAAaE,IAAAA,KAAK,EAAEF,IAApB;AAA0B+O,IAAAA,GAAG,EAAEA,GAA/B;AAAoCkqB,IAAAA,MAAM,EAAElqB,GAAG,GAAG6f,OAAO,CAAC1jC;AAA1D,GAAP;AACD;AAGD;AACA;AACA;AACA;AACA;;AACA,SAASuyC,WAAT,CAAqBtgB,IAArB,EAA2B/C,EAA3B,EAA+BuB,MAA/B,EAAuC+hB,OAAvC,EAAgDC,IAAhD,EAAsD;AACpD,MAAI1kB,GAAG,GAAGiM,GAAG,CAAC/H,IAAD,EAAO/C,EAAP,EAAWuB,MAAX,CAAb;AACA1C,EAAAA,GAAG,CAAC0kB,IAAJ,GAAWA,IAAX;AACA,MAAID,OAAJ,EAAazkB,GAAG,CAACykB,OAAJ,GAAcA,OAAd;AACb,SAAOzkB,GAAP;AACD;AAGD;;;AACA,AAAO,SAAS2kB,UAAT,CAAoBhgB,EAApB,EAAwB7a,CAAxB,EAA2B4C,CAA3B,EAA8B;AACnC,MAAIie,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AACAje,EAAAA,CAAC,IAAIiY,EAAE,CAACplB,OAAH,CAAWikC,UAAhB;AACA,MAAI92B,CAAC,GAAG,CAAR,EAAW,OAAO83B,WAAW,CAAC7Z,GAAG,CAACC,KAAL,EAAY,CAAZ,EAAe,IAAf,EAAqB,CAAC,CAAtB,EAAyB,CAAC,CAA1B,CAAlB;AACX,MAAIuK,KAAK,GAAG1J,YAAY,CAACd,GAAD,EAAMje,CAAN,CAAxB;AAAA,MAAkCvL,IAAI,GAAGwpB,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAAhE;AACA,MAAI09B,KAAK,GAAGh0B,IAAZ,EACE,OAAOqjC,WAAW,CAAC7Z,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAAxB,EAA2BizB,OAAO,CAACC,GAAD,EAAMxpB,IAAN,CAAP,CAAmBrB,IAAnB,CAAwBlL,MAAnD,EAA2D,IAA3D,EAAiE,CAAjE,EAAoE,CAApE,CAAlB;AACF,MAAIkV,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG,CAAJ;AAEX,MAAI6rB,OAAO,GAAGjL,OAAO,CAACC,GAAD,EAAMwK,KAAN,CAArB;;AACA,WAAS;AACP,QAAI/S,KAAK,GAAGwiB,eAAe,CAACjgB,EAAD,EAAKgR,OAAL,EAAcR,KAAd,EAAqBrrB,CAArB,EAAwB4C,CAAxB,CAA3B;AACA,QAAI+nB,SAAS,GAAGG,mBAAmB,CAACe,OAAD,EAAUvT,KAAK,CAACjB,EAAN,IAAYiB,KAAK,CAACsiB,IAAN,GAAa,CAAb,IAAkBtiB,KAAK,CAACqiB,OAAN,GAAgB,CAAlC,GAAsC,CAAtC,GAA0C,CAAtD,CAAV,CAAnC;AACA,QAAI,CAAChQ,SAAL,EAAgB,OAAOrS,KAAP;AAChB,QAAIyiB,QAAQ,GAAGpQ,SAAS,CAACnB,IAAV,CAAe,CAAf,CAAf;AACA,QAAIuR,QAAQ,CAAC3gB,IAAT,IAAiBiR,KAArB,EAA4B,OAAO0P,QAAP;AAC5BlP,IAAAA,OAAO,GAAGjL,OAAO,CAACC,GAAD,EAAMwK,KAAK,GAAG0P,QAAQ,CAAC3gB,IAAvB,CAAjB;AACD;AACF;;AAED,SAAS4gB,iBAAT,CAA2BngB,EAA3B,EAA+BgR,OAA/B,EAAwCsO,eAAxC,EAAyDv3B,CAAzD,EAA4D;AAC1DA,EAAAA,CAAC,IAAI02B,eAAe,CAACzN,OAAD,CAApB;AACA,MAAInuB,GAAG,GAAGmuB,OAAO,CAAC71B,IAAR,CAAalL,MAAvB;AACA,MAAImwC,KAAK,GAAGnjB,SAAS,CAACT,EAAE,IAAImf,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsB9iB,EAAE,GAAG,CAA3B,CAAnB,CAAiD6e,MAAjD,IAA2DtzB,CAAlE,EAAqElF,GAArE,EAA0E,CAA1E,CAArB;AACAA,EAAAA,GAAG,GAAGoa,SAAS,CAACT,EAAE,IAAImf,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsB9iB,EAAtB,CAAnB,CAA6CrL,GAA7C,GAAmDpJ,CAA1D,EAA6Dq4B,KAA7D,EAAoEv9B,GAApE,CAAf;AACA,SAAO;AAACu9B,IAAAA,KAAD;AAAQv9B,IAAAA;AAAR,GAAP;AACD;;AAED,AAAO,SAASw9B,qBAAT,CAA+BrgB,EAA/B,EAAmCgR,OAAnC,EAA4CsO,eAA5C,EAA6D/jC,MAA7D,EAAqE;AAC1E,MAAI,CAAC+jC,eAAL,EAAsBA,eAAe,GAAG1D,qBAAqB,CAAC5b,EAAD,EAAKgR,OAAL,CAAvC;AACtB,MAAIsP,SAAS,GAAG5B,eAAe,CAAC1e,EAAD,EAAKgR,OAAL,EAAc2K,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsB/jC,MAAtB,CAAjC,EAAgE,MAAhE,CAAf,CAAuF4V,GAAvG;AACA,SAAOgvB,iBAAiB,CAACngB,EAAD,EAAKgR,OAAL,EAAcsO,eAAd,EAA+BgB,SAA/B,CAAxB;AACD;AAGD;;AACA,SAASC,UAAT,CAAoBC,GAApB,EAAyBr7B,CAAzB,EAA4B4C,CAA5B,EAA+B3F,IAA/B,EAAqC;AACnC,SAAOo+B,GAAG,CAACnF,MAAJ,IAActzB,CAAd,GAAkB,KAAlB,GAA0By4B,GAAG,CAACrvB,GAAJ,GAAUpJ,CAAV,GAAc,IAAd,GAAqB,CAAC3F,IAAI,GAAGo+B,GAAG,CAACp+B,IAAP,GAAco+B,GAAG,CAACl+B,KAAvB,IAAgC6C,CAAtF;AACD;;AAED,SAAS86B,eAAT,CAAyBjgB,EAAzB,EAA6BgR,OAA7B,EAAsCpK,MAAtC,EAA8CzhB,CAA9C,EAAiD4C,CAAjD,EAAoD;AAClD;AACAA,EAAAA,CAAC,IAAIgpB,YAAY,CAACC,OAAD,CAAjB;AACA,MAAIsO,eAAe,GAAG1D,qBAAqB,CAAC5b,EAAD,EAAKgR,OAAL,CAA3C,CAHkD;AAKlD;;AACA,MAAIoI,YAAY,GAAGqF,eAAe,CAACzN,OAAD,CAAlC;AACA,MAAIoP,KAAK,GAAG,CAAZ;AAAA,MAAev9B,GAAG,GAAGmuB,OAAO,CAAC71B,IAAR,CAAalL,MAAlC;AAAA,MAA0CwwC,GAAG,GAAG,IAAhD;AAEA,MAAIjjB,KAAK,GAAG8B,QAAQ,CAAC0R,OAAD,EAAUhR,EAAE,CAACgG,GAAH,CAAOhoB,SAAjB,CAApB,CATkD;AAWlD;;AACA,MAAIwf,KAAJ,EAAW;AACT,QAAIE,IAAI,GAAG,CAACsC,EAAE,CAAC5S,OAAH,CAAW4tB,YAAX,GAA0B0F,qBAA1B,GAAkDC,cAAnD,EACG3gB,EADH,EACOgR,OADP,EACgBpK,MADhB,EACwB0Y,eADxB,EACyC9hB,KADzC,EACgDrY,CADhD,EACmD4C,CADnD,CAAX;AAEA04B,IAAAA,GAAG,GAAG/iB,IAAI,CAACE,KAAL,IAAc,CAApB,CAHS;AAKT;AACA;AACA;;AACAwiB,IAAAA,KAAK,GAAGK,GAAG,GAAG/iB,IAAI,CAACpO,IAAR,GAAeoO,IAAI,CAACP,EAAL,GAAU,CAApC;AACAta,IAAAA,GAAG,GAAG49B,GAAG,GAAG/iB,IAAI,CAACP,EAAR,GAAaO,IAAI,CAACpO,IAAL,GAAY,CAAlC;AACD,GAtBiD;AAyBlD;AACA;;;AACA,MAAIsxB,QAAQ,GAAG,IAAf;AAAA,MAAqBC,SAAS,GAAG,IAAjC;AACA,MAAIrkB,EAAE,GAAGS,SAAS,CAACT,EAAE,IAAI;AACvB,QAAIgkB,GAAG,GAAG7E,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsB9iB,EAAtB,CAA7B;AACAgkB,IAAAA,GAAG,CAACrvB,GAAJ,IAAWioB,YAAX;AAAyBoH,IAAAA,GAAG,CAACnF,MAAJ,IAAcjC,YAAd;AACzB,QAAI,CAACmH,UAAU,CAACC,GAAD,EAAMr7B,CAAN,EAAS4C,CAAT,EAAY,KAAZ,CAAf,EAAmC,OAAO,KAAP;;AACnC,QAAIy4B,GAAG,CAACrvB,GAAJ,IAAWpJ,CAAX,IAAgBy4B,GAAG,CAACp+B,IAAJ,IAAY+C,CAAhC,EAAmC;AACjCy7B,MAAAA,QAAQ,GAAGpkB,EAAX;AACAqkB,MAAAA,SAAS,GAAGL,GAAZ;AACD;;AACD,WAAO,IAAP;AACD,GATiB,EASfJ,KATe,EASRv9B,GATQ,CAAlB;AAWA,MAAIi+B,KAAJ;AAAA,MAAW/iB,MAAX;AAAA,MAAmB+hB,OAAO,GAAG,KAA7B,CAvCkD;;AAyClD,MAAIe,SAAJ,EAAe;AACb;AACA,QAAIE,MAAM,GAAG57B,CAAC,GAAG07B,SAAS,CAACz+B,IAAd,GAAqBy+B,SAAS,CAACv+B,KAAV,GAAkB6C,CAApD;AAAA,QAAuD67B,OAAO,GAAGD,MAAM,IAAIN,GAA3E;AACAjkB,IAAAA,EAAE,GAAGokB,QAAQ,IAAII,OAAO,GAAG,CAAH,GAAO,CAAlB,CAAb;AACAjjB,IAAAA,MAAM,GAAGijB,OAAO,GAAG,OAAH,GAAa,QAA7B;AACAF,IAAAA,KAAK,GAAGC,MAAM,GAAGF,SAAS,CAACz+B,IAAb,GAAoBy+B,SAAS,CAACv+B,KAA5C;AACD,GAND,MAMO;AACL;AACA,QAAI,CAACm+B,GAAD,KAASjkB,EAAE,IAAI3Z,GAAN,IAAa2Z,EAAE,IAAI4jB,KAA5B,CAAJ,EAAwC5jB,EAAE,GAFrC;AAIL;AACA;;AACAuB,IAAAA,MAAM,GAAGvB,EAAE,IAAI,CAAN,GAAU,OAAV,GAAoBA,EAAE,IAAIwU,OAAO,CAAC71B,IAAR,CAAalL,MAAnB,GAA4B,QAA5B,GAC1B0rC,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsB9iB,EAAE,IAAIikB,GAAG,GAAG,CAAH,GAAO,CAAd,CAAxB,CAAnB,CAA6DpF,MAA7D,GAAsEjC,YAAtE,IAAsFrxB,CAAvF,IAA6F04B,GAA7F,GACA,OADA,GACU,QAFZ,CANK;AAUL;;AACA,QAAIxB,MAAM,GAAGI,YAAY,CAACrf,EAAD,EAAKsH,GAAG,CAACV,MAAD,EAASpK,EAAT,EAAauB,MAAb,CAAR,EAA8B,MAA9B,EAAsCiT,OAAtC,EAA+CsO,eAA/C,CAAzB;AACAwB,IAAAA,KAAK,GAAG7B,MAAM,CAAC78B,IAAf;AACA09B,IAAAA,OAAO,GAAG/3B,CAAC,GAAGk3B,MAAM,CAAC9tB,GAAX,GAAiB,CAAC,CAAlB,GAAsBpJ,CAAC,IAAIk3B,MAAM,CAAC5D,MAAZ,GAAqB,CAArB,GAAyB,CAAzD;AACD;;AAED7e,EAAAA,EAAE,GAAGM,kBAAkB,CAACkU,OAAO,CAAC71B,IAAT,EAAeqhB,EAAf,EAAmB,CAAnB,CAAvB;AACA,SAAOqjB,WAAW,CAACjZ,MAAD,EAASpK,EAAT,EAAauB,MAAb,EAAqB+hB,OAArB,EAA8B36B,CAAC,GAAG27B,KAAlC,CAAlB;AACD;;AAED,SAASH,cAAT,CAAwB3gB,EAAxB,EAA4BgR,OAA5B,EAAqCpK,MAArC,EAA6C0Y,eAA7C,EAA8D9hB,KAA9D,EAAqErY,CAArE,EAAwE4C,CAAxE,EAA2E;AACzE;AACA;AACA;AACA;AACA,MAAI5L,KAAK,GAAG8gB,SAAS,CAACjc,CAAC,IAAI;AACzB,QAAI0c,IAAI,GAAGF,KAAK,CAACxc,CAAD,CAAhB;AAAA,QAAqBy/B,GAAG,GAAG/iB,IAAI,CAACE,KAAL,IAAc,CAAzC;AACA,WAAO2iB,UAAU,CAAClB,YAAY,CAACrf,EAAD,EAAKsH,GAAG,CAACV,MAAD,EAAS6Z,GAAG,GAAG/iB,IAAI,CAACP,EAAR,GAAaO,IAAI,CAACpO,IAA9B,EAAoCmxB,GAAG,GAAG,QAAH,GAAc,OAArD,CAAR,EACC,MADD,EACSzP,OADT,EACkBsO,eADlB,CAAb,EACiDn6B,CADjD,EACoD4C,CADpD,EACuD,IADvD,CAAjB;AAED,GAJoB,EAIlB,CAJkB,EAIfyV,KAAK,CAACvtB,MAAN,GAAe,CAJA,CAArB;AAKA,MAAIytB,IAAI,GAAGF,KAAK,CAACrhB,KAAD,CAAhB,CAVyE;AAYzE;AACA;;AACA,MAAIA,KAAK,GAAG,CAAZ,EAAe;AACb,QAAIskC,GAAG,GAAG/iB,IAAI,CAACE,KAAL,IAAc,CAAxB;AACA,QAAI7F,KAAK,GAAGsnB,YAAY,CAACrf,EAAD,EAAKsH,GAAG,CAACV,MAAD,EAAS6Z,GAAG,GAAG/iB,IAAI,CAACpO,IAAR,GAAeoO,IAAI,CAACP,EAAhC,EAAoCsjB,GAAG,GAAG,OAAH,GAAa,QAApD,CAAR,EACC,MADD,EACSzP,OADT,EACkBsO,eADlB,CAAxB;AAEA,QAAIiB,UAAU,CAACxoB,KAAD,EAAQ5S,CAAR,EAAW4C,CAAX,EAAc,IAAd,CAAV,IAAiCgQ,KAAK,CAAC5G,GAAN,GAAYpJ,CAAjD,EACE2V,IAAI,GAAGF,KAAK,CAACrhB,KAAK,GAAG,CAAT,CAAZ;AACH;;AACD,SAAOuhB,IAAP;AACD;;AAED,SAASgjB,qBAAT,CAA+B1gB,EAA/B,EAAmCgR,OAAnC,EAA4CiQ,OAA5C,EAAqD3B,eAArD,EAAsE9hB,KAAtE,EAA6ErY,CAA7E,EAAgF4C,CAAhF,EAAmF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAI;AAACq4B,IAAAA,KAAD;AAAQv9B,IAAAA;AAAR,MAAes9B,iBAAiB,CAACngB,EAAD,EAAKgR,OAAL,EAAcsO,eAAd,EAA+Bv3B,CAA/B,CAApC;AACA,MAAI,KAAK4I,IAAL,CAAUqgB,OAAO,CAAC71B,IAAR,CAAa6hB,MAAb,CAAoBna,GAAG,GAAG,CAA1B,CAAV,CAAJ,EAA6CA,GAAG;AAChD,MAAI6a,IAAI,GAAG,IAAX;AAAA,MAAiBwjB,WAAW,GAAG,IAA/B;;AACA,OAAK,IAAIlgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwc,KAAK,CAACvtB,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC;AACrC,QAAI4tB,CAAC,GAAGpR,KAAK,CAACxc,CAAD,CAAb;AACA,QAAI4tB,CAAC,CAACtf,IAAF,IAAUzM,GAAV,IAAiB+rB,CAAC,CAACzR,EAAF,IAAQijB,KAA7B,EAAoC;AACpC,QAAIK,GAAG,GAAG7R,CAAC,CAAChR,KAAF,IAAW,CAArB;AACA,QAAIujB,IAAI,GAAGxF,mBAAmB,CAAC3b,EAAD,EAAKsf,eAAL,EAAsBmB,GAAG,GAAG1nC,IAAI,CAACyiB,GAAL,CAAS3Y,GAAT,EAAc+rB,CAAC,CAACzR,EAAhB,IAAsB,CAAzB,GAA6BpkB,IAAI,CAAC4kB,GAAL,CAASyiB,KAAT,EAAgBxR,CAAC,CAACtf,IAAlB,CAAtD,CAAnB,CAAkGhN,KAA7G,CAJqC;AAMrC;;AACA,QAAI8+B,IAAI,GAAGD,IAAI,GAAGh8B,CAAP,GAAWA,CAAC,GAAGg8B,IAAJ,GAAW,GAAtB,GAA4BA,IAAI,GAAGh8B,CAA9C;;AACA,QAAI,CAACuY,IAAD,IAASwjB,WAAW,GAAGE,IAA3B,EAAiC;AAC/B1jB,MAAAA,IAAI,GAAGkR,CAAP;AACAsS,MAAAA,WAAW,GAAGE,IAAd;AACD;AACF;;AACD,MAAI,CAAC1jB,IAAL,EAAWA,IAAI,GAAGF,KAAK,CAACA,KAAK,CAACvtB,MAAN,GAAe,CAAhB,CAAZ,CAxBsE;;AA0BjF,MAAIytB,IAAI,CAACpO,IAAL,GAAY8wB,KAAhB,EAAuB1iB,IAAI,GAAG;AAACpO,IAAAA,IAAI,EAAE8wB,KAAP;AAAcjjB,IAAAA,EAAE,EAAEO,IAAI,CAACP,EAAvB;AAA2BS,IAAAA,KAAK,EAAEF,IAAI,CAACE;AAAvC,GAAP;AACvB,MAAIF,IAAI,CAACP,EAAL,GAAUta,GAAd,EAAmB6a,IAAI,GAAG;AAACpO,IAAAA,IAAI,EAAEoO,IAAI,CAACpO,IAAZ;AAAkB6N,IAAAA,EAAE,EAAEta,GAAtB;AAA2B+a,IAAAA,KAAK,EAAEF,IAAI,CAACE;AAAvC,GAAP;AACnB,SAAOF,IAAP;AACD;;AAED,IAAI2jB,WAAJ;;AAEA,AAAO,SAASC,UAAT,CAAoB1mC,OAApB,EAA6B;AAClC,MAAIA,OAAO,CAACsjC,gBAAR,IAA4B,IAAhC,EAAsC,OAAOtjC,OAAO,CAACsjC,gBAAf;;AACtC,MAAImD,WAAW,IAAI,IAAnB,EAAyB;AACvBA,IAAAA,WAAW,GAAG7pB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,sBAAd,CAAjB,CADuB;AAGvB;;AACA,SAAK,IAAIxW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwB,EAAEA,CAA1B,EAA6B;AAC3BqgC,MAAAA,WAAW,CAAC3vC,WAAZ,CAAwBF,QAAQ,CAACmmB,cAAT,CAAwB,GAAxB,CAAxB;AACA0pB,MAAAA,WAAW,CAAC3vC,WAAZ,CAAwB8lB,GAAG,CAAC,IAAD,CAA3B;AACD;;AACD6pB,IAAAA,WAAW,CAAC3vC,WAAZ,CAAwBF,QAAQ,CAACmmB,cAAT,CAAwB,GAAxB,CAAxB;AACD;;AACDL,EAAAA,oBAAoB,CAAC1c,OAAO,CAAC0mB,OAAT,EAAkB+f,WAAlB,CAApB;AACA,MAAI/zC,MAAM,GAAG+zC,WAAW,CAACrkC,YAAZ,GAA2B,EAAxC;AACA,MAAI1P,MAAM,GAAG,CAAb,EAAgBsN,OAAO,CAACsjC,gBAAR,GAA2B5wC,MAA3B;AAChB4pB,EAAAA,cAAc,CAACtc,OAAO,CAAC0mB,OAAT,CAAd;AACA,SAAOh0B,MAAM,IAAI,CAAjB;AACD;;AAGD,AAAO,SAAS4vC,SAAT,CAAmBtiC,OAAnB,EAA4B;AACjC,MAAIA,OAAO,CAACqjC,eAAR,IAA2B,IAA/B,EAAqC,OAAOrjC,OAAO,CAACqjC,eAAf;AACrC,MAAIsD,MAAM,GAAG/pB,GAAG,CAAC,MAAD,EAAS,YAAT,CAAhB;AACA,MAAI2a,GAAG,GAAG3a,GAAG,CAAC,KAAD,EAAQ,CAAC+pB,MAAD,CAAR,EAAkB,sBAAlB,CAAb;AACAjqB,EAAAA,oBAAoB,CAAC1c,OAAO,CAAC0mB,OAAT,EAAkB6Q,GAAlB,CAApB;AACA,MAAI2I,IAAI,GAAGyG,MAAM,CAAChtC,qBAAP,EAAX;AAAA,MAA2CnH,KAAK,GAAG,CAAC0tC,IAAI,CAACx4B,KAAL,GAAaw4B,IAAI,CAAC14B,IAAnB,IAA2B,EAA9E;AACA,MAAIhV,KAAK,GAAG,CAAZ,EAAewN,OAAO,CAACqjC,eAAR,GAA0B7wC,KAA1B;AACf,SAAOA,KAAK,IAAI,EAAhB;AACD;AAGD;;AACA,AAAO,SAAS2uC,aAAT,CAAuB/b,EAAvB,EAA2B;AAChC,MAAImR,CAAC,GAAGnR,EAAE,CAACplB,OAAX;AAAA,MAAoBwH,IAAI,GAAG,EAA3B;AAAA,MAA+BhV,KAAK,GAAG,EAAvC;AACA,MAAI2qC,UAAU,GAAG5G,CAAC,CAACmI,OAAF,CAAUkI,UAA3B;;AACA,OAAK,IAAIrnB,CAAC,GAAGgX,CAAC,CAACmI,OAAF,CAAUjiB,UAAlB,EAA8BrW,CAAC,GAAG,CAAvC,EAA0CmZ,CAA1C,EAA6CA,CAAC,GAAGA,CAAC,CAACke,WAAN,EAAmB,EAAEr3B,CAAlE,EAAqE;AACnE,QAAIzD,EAAE,GAAGyiB,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,CAAuBj3B,CAAvB,EAA0BgW,SAAnC;AACA5U,IAAAA,IAAI,CAAC7E,EAAD,CAAJ,GAAW4c,CAAC,CAACsnB,UAAF,GAAetnB,CAAC,CAACqnB,UAAjB,GAA8BzJ,UAAzC;AACA3qC,IAAAA,KAAK,CAACmQ,EAAD,CAAL,GAAY4c,CAAC,CAACzI,WAAd;AACD;;AACD,SAAO;AAAC+lB,IAAAA,QAAQ,EAAEiK,oBAAoB,CAACvQ,CAAD,CAA/B;AACCuG,IAAAA,gBAAgB,EAAEvG,CAAC,CAACmI,OAAF,CAAU/X,WAD7B;AAECwW,IAAAA,UAAU,EAAE31B,IAFb;AAGC81B,IAAAA,WAAW,EAAE9qC,KAHd;AAIC4rC,IAAAA,YAAY,EAAE7H,CAAC,CAACoI,OAAF,CAAU7nB;AAJzB,GAAP;AAKD;AAGD;AACA;;AACA,AAAO,SAASgwB,oBAAT,CAA8B9mC,OAA9B,EAAuC;AAC5C,SAAOA,OAAO,CAAC4/B,QAAR,CAAiBjmC,qBAAjB,GAAyC6N,IAAzC,GAAgDxH,OAAO,CAAC6+B,KAAR,CAAcllC,qBAAd,GAAsC6N,IAA7F;AACD;AAGD;AACA;;AACA,AAAO,SAASovB,cAAT,CAAwBxR,EAAxB,EAA4B;AACjC,MAAI2hB,EAAE,GAAGL,UAAU,CAACthB,EAAE,CAACplB,OAAJ,CAAnB;AAAA,MAAiCmgC,QAAQ,GAAG/a,EAAE,CAAC5S,OAAH,CAAW4tB,YAAvD;AACA,MAAI4G,OAAO,GAAG7G,QAAQ,IAAIhiC,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYqC,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoB9oB,WAApB,GAAkCwrB,SAAS,CAACld,EAAE,CAACplB,OAAJ,CAA3C,GAA0D,CAAtE,CAA1B;AACA,SAAO2kB,IAAI,IAAI;AACb,QAAIqR,YAAY,CAAC5Q,EAAE,CAACgG,GAAJ,EAASzG,IAAT,CAAhB,EAAgC,OAAO,CAAP;AAEhC,QAAIsiB,aAAa,GAAG,CAApB;AACA,QAAItiB,IAAI,CAACmZ,OAAT,EAAkB,KAAK,IAAI13B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGue,IAAI,CAACmZ,OAAL,CAAazoC,MAAjC,EAAyC+Q,CAAC,EAA1C,EAA8C;AAC9D,UAAIue,IAAI,CAACmZ,OAAL,CAAa13B,CAAb,EAAgB1T,MAApB,EAA4Bu0C,aAAa,IAAItiB,IAAI,CAACmZ,OAAL,CAAa13B,CAAb,EAAgB1T,MAAjC;AAC7B;AAED,QAAIytC,QAAJ,EACE,OAAO8G,aAAa,GAAG,CAAC9oC,IAAI,CAACukB,IAAL,CAAUiC,IAAI,CAACpkB,IAAL,CAAUlL,MAAV,GAAmB2xC,OAA7B,KAAyC,CAA1C,IAA+CD,EAAtE,CADF,KAGE,OAAOE,aAAa,GAAGF,EAAvB;AACH,GAZD;AAaD;AAED,AAAO,SAASG,mBAAT,CAA6B9hB,EAA7B,EAAiC;AACtC,MAAIgG,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkB+b,GAAG,GAAGvQ,cAAc,CAACxR,EAAD,CAAtC;AACAgG,EAAAA,GAAG,CAACQ,IAAJ,CAASjH,IAAI,IAAI;AACf,QAAImS,SAAS,GAAGqQ,GAAG,CAACxiB,IAAD,CAAnB;AACA,QAAImS,SAAS,IAAInS,IAAI,CAACjyB,MAAtB,EAA8Bo5B,gBAAgB,CAACnH,IAAD,EAAOmS,SAAP,CAAhB;AAC/B,GAHD;AAID;AAGD;AACA;AACA;AACA;;AACA,AAAO,SAASsQ,YAAT,CAAsBhiB,EAAtB,EAA0BxX,CAA1B,EAA6By5B,OAA7B,EAAsCC,OAAtC,EAA+C;AACpD,MAAItnC,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AACA,MAAI,CAACqnC,OAAD,IAAYlhB,QAAQ,CAACvY,CAAD,CAAR,CAAYtX,YAAZ,CAAyB,gBAAzB,KAA8C,MAA9D,EAAsE,OAAO,IAAP;AAEtE,MAAIiU,CAAJ;AAAA,MAAO4C,CAAP;AAAA,MAAU5F,KAAK,GAAGvH,OAAO,CAACg/B,SAAR,CAAkBrlC,qBAAlB,EAAlB,CAJoD;;AAMpD,MAAI;AAAE4Q,IAAAA,CAAC,GAAGqD,CAAC,CAAC25B,OAAF,GAAYhgC,KAAK,CAACC,IAAtB;AAA4B2F,IAAAA,CAAC,GAAGS,CAAC,CAAC45B,OAAF,GAAYjgC,KAAK,CAACgP,GAAtB;AAA2B,GAA7D,CACA,OAAO3I,CAAP,EAAU;AAAE,WAAO,IAAP;AAAa;;AACzB,MAAIy2B,MAAM,GAAGe,UAAU,CAAChgB,EAAD,EAAK7a,CAAL,EAAQ4C,CAAR,CAAvB;AAAA,MAAmCwX,IAAnC;;AACA,MAAI2iB,OAAO,IAAIjD,MAAM,CAACc,IAAP,GAAc,CAAzB,IAA8B,CAACxgB,IAAI,GAAGwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASiZ,MAAM,CAAC1f,IAAhB,CAAP,CAA6BpkB,IAArC,EAA2ClL,MAA3C,IAAqDgvC,MAAM,CAACziB,EAA9F,EAAkG;AAChG,QAAI6lB,OAAO,GAAGxoB,WAAW,CAAC0F,IAAD,EAAOA,IAAI,CAACtvB,MAAZ,EAAoB+vB,EAAE,CAAC5S,OAAH,CAAW2M,OAA/B,CAAX,GAAqDwF,IAAI,CAACtvB,MAAxE;AACAgvC,IAAAA,MAAM,GAAG3X,GAAG,CAAC2X,MAAM,CAAC1f,IAAR,EAAcxmB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY5kB,IAAI,CAACupC,KAAL,CAAW,CAACn9B,CAAC,GAAG40B,QAAQ,CAAC/Z,EAAE,CAACplB,OAAJ,CAAR,CAAqBwH,IAA1B,IAAkC86B,SAAS,CAACld,EAAE,CAACplB,OAAJ,CAAtD,IAAsEynC,OAAlF,CAAd,CAAZ;AACD;;AACD,SAAOpD,MAAP;AACD;AAGD;;AACA,AAAO,SAASnD,aAAT,CAAuB9b,EAAvB,EAA2B7F,CAA3B,EAA8B;AACnC,MAAIA,CAAC,IAAI6F,EAAE,CAACplB,OAAH,CAAW2vB,MAApB,EAA4B,OAAO,IAAP;AAC5BpQ,EAAAA,CAAC,IAAI6F,EAAE,CAACplB,OAAH,CAAW0vB,QAAhB;AACA,MAAInQ,CAAC,GAAG,CAAR,EAAW,OAAO,IAAP;AACX,MAAI+a,IAAI,GAAGlV,EAAE,CAACplB,OAAH,CAAWs6B,IAAtB;;AACA,OAAK,IAAIl0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk0B,IAAI,CAACjlC,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC;AACpCmZ,IAAAA,CAAC,IAAI+a,IAAI,CAACl0B,CAAD,CAAJ,CAAQlO,IAAb;AACA,QAAIqnB,CAAC,GAAG,CAAR,EAAW,OAAOnZ,CAAP;AACZ;AACF;;ACprBD;AACA;AACA;AACA;AACA;;AACA,AAAO,SAASuhC,SAAT,CAAmBviB,EAAnB,EAAuB1Q,IAAvB,EAA6B6N,EAA7B,EAAiCqlB,OAAjC,EAA0C;AAC/C,MAAIlzB,IAAI,IAAI,IAAZ,EAAkBA,IAAI,GAAG0Q,EAAE,CAACgG,GAAH,CAAOC,KAAd;AAClB,MAAI9I,EAAE,IAAI,IAAV,EAAgBA,EAAE,GAAG6C,EAAE,CAACgG,GAAH,CAAOC,KAAP,GAAejG,EAAE,CAACgG,GAAH,CAAOlzB,IAA3B;AAChB,MAAI,CAAC0vC,OAAL,EAAcA,OAAO,GAAG,CAAV;AAEd,MAAI5nC,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AACA,MAAI4nC,OAAO,IAAIrlB,EAAE,GAAGviB,OAAO,CAAC2vB,MAAxB,KACC3vB,OAAO,CAAC6nC,iBAAR,IAA6B,IAA7B,IAAqC7nC,OAAO,CAAC6nC,iBAAR,GAA4BnzB,IADlE,CAAJ,EAEE1U,OAAO,CAAC6nC,iBAAR,GAA4BnzB,IAA5B;AAEF0Q,EAAAA,EAAE,CAACO,KAAH,CAASmiB,WAAT,GAAuB,IAAvB;;AAEA,MAAIpzB,IAAI,IAAI1U,OAAO,CAAC2vB,MAApB,EAA4B;AAAE;AAC5B,QAAIwB,iBAAiB,IAAIwE,YAAY,CAACvQ,EAAE,CAACgG,GAAJ,EAAS1W,IAAT,CAAZ,GAA6B1U,OAAO,CAAC2vB,MAA9D,EACEoY,SAAS,CAAC3iB,EAAD,CAAT;AACH,GAHD,MAGO,IAAI7C,EAAE,IAAIviB,OAAO,CAAC0vB,QAAlB,EAA4B;AAAE;AACnC,QAAIyB,iBAAiB,IAAI2E,eAAe,CAAC1Q,EAAE,CAACgG,GAAJ,EAAS7I,EAAE,GAAGqlB,OAAd,CAAf,GAAwC5nC,OAAO,CAAC0vB,QAAzE,EAAmF;AACjFqY,MAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACD,KAFD,MAEO;AACLplB,MAAAA,OAAO,CAAC0vB,QAAR,IAAoBkY,OAApB;AACA5nC,MAAAA,OAAO,CAAC2vB,MAAR,IAAkBiY,OAAlB;AACD;AACF,GAPM,MAOA,IAAIlzB,IAAI,IAAI1U,OAAO,CAAC0vB,QAAhB,IAA4BnN,EAAE,IAAIviB,OAAO,CAAC2vB,MAA9C,EAAsD;AAAE;AAC7DoY,IAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACD,GAFM,MAEA,IAAI1Q,IAAI,IAAI1U,OAAO,CAAC0vB,QAApB,EAA8B;AAAE;AACrC,QAAIsY,GAAG,GAAGC,gBAAgB,CAAC7iB,EAAD,EAAK7C,EAAL,EAASA,EAAE,GAAGqlB,OAAd,EAAuB,CAAvB,CAA1B;;AACA,QAAII,GAAJ,EAAS;AACPhoC,MAAAA,OAAO,CAACs6B,IAAR,GAAet6B,OAAO,CAACs6B,IAAR,CAAan5B,KAAb,CAAmB6mC,GAAG,CAACzmC,KAAvB,CAAf;AACAvB,MAAAA,OAAO,CAAC0vB,QAAR,GAAmBsY,GAAG,CAACpS,KAAvB;AACA51B,MAAAA,OAAO,CAAC2vB,MAAR,IAAkBiY,OAAlB;AACD,KAJD,MAIO;AACLG,MAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACD;AACF,GATM,MASA,IAAI7C,EAAE,IAAIviB,OAAO,CAAC2vB,MAAlB,EAA0B;AAAE;AACjC,QAAIqY,GAAG,GAAGC,gBAAgB,CAAC7iB,EAAD,EAAK1Q,IAAL,EAAWA,IAAX,EAAiB,CAAC,CAAlB,CAA1B;;AACA,QAAIszB,GAAJ,EAAS;AACPhoC,MAAAA,OAAO,CAACs6B,IAAR,GAAet6B,OAAO,CAACs6B,IAAR,CAAan5B,KAAb,CAAmB,CAAnB,EAAsB6mC,GAAG,CAACzmC,KAA1B,CAAf;AACAvB,MAAAA,OAAO,CAAC2vB,MAAR,GAAiBqY,GAAG,CAACpS,KAArB;AACD,KAHD,MAGO;AACLmS,MAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACD;AACF,GARM,MAQA;AAAE;AACP,QAAI8iB,MAAM,GAAGD,gBAAgB,CAAC7iB,EAAD,EAAK1Q,IAAL,EAAWA,IAAX,EAAiB,CAAC,CAAlB,CAA7B;AACA,QAAIyzB,MAAM,GAAGF,gBAAgB,CAAC7iB,EAAD,EAAK7C,EAAL,EAASA,EAAE,GAAGqlB,OAAd,EAAuB,CAAvB,CAA7B;;AACA,QAAIM,MAAM,IAAIC,MAAd,EAAsB;AACpBnoC,MAAAA,OAAO,CAACs6B,IAAR,GAAet6B,OAAO,CAACs6B,IAAR,CAAan5B,KAAb,CAAmB,CAAnB,EAAsB+mC,MAAM,CAAC3mC,KAA7B,EACZwE,MADY,CACLq0B,cAAc,CAAChV,EAAD,EAAK8iB,MAAM,CAACtS,KAAZ,EAAmBuS,MAAM,CAACvS,KAA1B,CADT,EAEZ7vB,MAFY,CAEL/F,OAAO,CAACs6B,IAAR,CAAan5B,KAAb,CAAmBgnC,MAAM,CAAC5mC,KAA1B,CAFK,CAAf;AAGAvB,MAAAA,OAAO,CAAC2vB,MAAR,IAAkBiY,OAAlB;AACD,KALD,MAKO;AACLG,MAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACD;AACF;;AAED,MAAIkX,GAAG,GAAGt8B,OAAO,CAAC+3B,gBAAlB;;AACA,MAAIuE,GAAJ,EAAS;AACP,QAAI/Z,EAAE,GAAG+Z,GAAG,CAAC1G,KAAb,EACE0G,GAAG,CAAC1G,KAAJ,IAAagS,OAAb,CADF,KAEK,IAAIlzB,IAAI,GAAG4nB,GAAG,CAAC1G,KAAJ,GAAY0G,GAAG,CAACpkC,IAA3B,EACH8H,OAAO,CAAC+3B,gBAAR,GAA2B,IAA3B;AACH;AACF;AAGD;;AACA,AAAO,SAASqQ,aAAT,CAAuBhjB,EAAvB,EAA2BT,IAA3B,EAAiCtzB,IAAjC,EAAuC;AAC5C+zB,EAAAA,EAAE,CAACO,KAAH,CAASmiB,WAAT,GAAuB,IAAvB;AACA,MAAI9nC,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0Bs8B,GAAG,GAAGlX,EAAE,CAACplB,OAAH,CAAW+3B,gBAA3C;AACA,MAAIuE,GAAG,IAAI3X,IAAI,IAAI2X,GAAG,CAAC1G,KAAnB,IAA4BjR,IAAI,GAAG2X,GAAG,CAAC1G,KAAJ,GAAY0G,GAAG,CAACpkC,IAAvD,EACE8H,OAAO,CAAC+3B,gBAAR,GAA2B,IAA3B;AAEF,MAAIpT,IAAI,GAAG3kB,OAAO,CAAC0vB,QAAf,IAA2B/K,IAAI,IAAI3kB,OAAO,CAAC2vB,MAA/C,EAAuD;AACvD,MAAI0H,QAAQ,GAAGr3B,OAAO,CAACs6B,IAAR,CAAa4G,aAAa,CAAC9b,EAAD,EAAKT,IAAL,CAA1B,CAAf;AACA,MAAI0S,QAAQ,CAACnb,IAAT,IAAiB,IAArB,EAA2B;AAC3B,MAAIxb,GAAG,GAAG22B,QAAQ,CAACoE,OAAT,KAAqBpE,QAAQ,CAACoE,OAAT,GAAmB,EAAxC,CAAV;AACA,MAAIp2B,OAAO,CAAC3E,GAAD,EAAMrP,IAAN,CAAP,IAAsB,CAAC,CAA3B,EAA8BqP,GAAG,CAAC6E,IAAJ,CAASlU,IAAT;AAC/B;;AAGD,AAAO,SAAS02C,SAAT,CAAmB3iB,EAAnB,EAAuB;AAC5BA,EAAAA,EAAE,CAACplB,OAAH,CAAW0vB,QAAX,GAAsBtK,EAAE,CAACplB,OAAH,CAAW2vB,MAAX,GAAoBvK,EAAE,CAACgG,GAAH,CAAOC,KAAjD;AACAjG,EAAAA,EAAE,CAACplB,OAAH,CAAWs6B,IAAX,GAAkB,EAAlB;AACAlV,EAAAA,EAAE,CAACplB,OAAH,CAAWikC,UAAX,GAAwB,CAAxB;AACD;;AAED,SAASgE,gBAAT,CAA0B7iB,EAA1B,EAA8BijB,IAA9B,EAAoCC,IAApC,EAA0CjyB,GAA1C,EAA+C;AAC7C,MAAI9U,KAAK,GAAG2/B,aAAa,CAAC9b,EAAD,EAAKijB,IAAL,CAAzB;AAAA,MAAqCtc,IAArC;AAAA,MAA2CuO,IAAI,GAAGlV,EAAE,CAACplB,OAAH,CAAWs6B,IAA7D;AACA,MAAI,CAACnJ,iBAAD,IAAsBmX,IAAI,IAAIljB,EAAE,CAACgG,GAAH,CAAOC,KAAP,GAAejG,EAAE,CAACgG,GAAH,CAAOlzB,IAAxD,EACE,OAAO;AAACqJ,IAAAA,KAAK,EAAEA,KAAR;AAAeq0B,IAAAA,KAAK,EAAE0S;AAAtB,GAAP;AACF,MAAI/oB,CAAC,GAAG6F,EAAE,CAACplB,OAAH,CAAW0vB,QAAnB;;AACA,OAAK,IAAItpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7E,KAApB,EAA2B6E,CAAC,EAA5B,EACEmZ,CAAC,IAAI+a,IAAI,CAACl0B,CAAD,CAAJ,CAAQlO,IAAb;;AACF,MAAIqnB,CAAC,IAAI8oB,IAAT,EAAe;AACb,QAAIhyB,GAAG,GAAG,CAAV,EAAa;AACX,UAAI9U,KAAK,IAAI+4B,IAAI,CAACjlC,MAAL,GAAc,CAA3B,EAA8B,OAAO,IAAP;AAC9B02B,MAAAA,IAAI,GAAIxM,CAAC,GAAG+a,IAAI,CAAC/4B,KAAD,CAAJ,CAAYrJ,IAAjB,GAAyBmwC,IAAhC;AACA9mC,MAAAA,KAAK;AACN,KAJD,MAIO;AACLwqB,MAAAA,IAAI,GAAGxM,CAAC,GAAG8oB,IAAX;AACD;;AACDA,IAAAA,IAAI,IAAItc,IAAR;AAAcuc,IAAAA,IAAI,IAAIvc,IAAR;AACf;;AACD,SAAO4J,YAAY,CAACvQ,EAAE,CAACgG,GAAJ,EAASkd,IAAT,CAAZ,IAA8BA,IAArC,EAA2C;AACzC,QAAI/mC,KAAK,KAAK8U,GAAG,GAAG,CAAN,GAAU,CAAV,GAAcikB,IAAI,CAACjlC,MAAL,GAAc,CAAjC,CAAT,EAA8C,OAAO,IAAP;AAC9CizC,IAAAA,IAAI,IAAIjyB,GAAG,GAAGikB,IAAI,CAAC/4B,KAAK,IAAI8U,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAlB,CAAN,CAAJ,CAAgCne,IAA9C;AACAqJ,IAAAA,KAAK,IAAI8U,GAAT;AACD;;AACD,SAAO;AAAC9U,IAAAA,KAAK,EAAEA,KAAR;AAAeq0B,IAAAA,KAAK,EAAE0S;AAAtB,GAAP;AACD;AAGD;;;AACA,AAAO,SAASC,UAAT,CAAoBnjB,EAApB,EAAwB1Q,IAAxB,EAA8B6N,EAA9B,EAAkC;AACvC,MAAIviB,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0Bs6B,IAAI,GAAGt6B,OAAO,CAACs6B,IAAzC;;AACA,MAAIA,IAAI,CAACjlC,MAAL,IAAe,CAAf,IAAoBqf,IAAI,IAAI1U,OAAO,CAAC2vB,MAApC,IAA8CpN,EAAE,IAAIviB,OAAO,CAAC0vB,QAAhE,EAA0E;AACxE1vB,IAAAA,OAAO,CAACs6B,IAAR,GAAeF,cAAc,CAAChV,EAAD,EAAK1Q,IAAL,EAAW6N,EAAX,CAA7B;AACAviB,IAAAA,OAAO,CAAC0vB,QAAR,GAAmBhb,IAAnB;AACD,GAHD,MAGO;AACL,QAAI1U,OAAO,CAAC0vB,QAAR,GAAmBhb,IAAvB,EACE1U,OAAO,CAACs6B,IAAR,GAAeF,cAAc,CAAChV,EAAD,EAAK1Q,IAAL,EAAW1U,OAAO,CAAC0vB,QAAnB,CAAd,CAA2C3pB,MAA3C,CAAkD/F,OAAO,CAACs6B,IAA1D,CAAf,CADF,KAEK,IAAIt6B,OAAO,CAAC0vB,QAAR,GAAmBhb,IAAvB,EACH1U,OAAO,CAACs6B,IAAR,GAAet6B,OAAO,CAACs6B,IAAR,CAAan5B,KAAb,CAAmB+/B,aAAa,CAAC9b,EAAD,EAAK1Q,IAAL,CAAhC,CAAf;AACF1U,IAAAA,OAAO,CAAC0vB,QAAR,GAAmBhb,IAAnB;AACA,QAAI1U,OAAO,CAAC2vB,MAAR,GAAiBpN,EAArB,EACEviB,OAAO,CAACs6B,IAAR,GAAet6B,OAAO,CAACs6B,IAAR,CAAav0B,MAAb,CAAoBq0B,cAAc,CAAChV,EAAD,EAAKplB,OAAO,CAAC2vB,MAAb,EAAqBpN,EAArB,CAAlC,CAAf,CADF,KAEK,IAAIviB,OAAO,CAAC2vB,MAAR,GAAiBpN,EAArB,EACHviB,OAAO,CAACs6B,IAAR,GAAet6B,OAAO,CAACs6B,IAAR,CAAan5B,KAAb,CAAmB,CAAnB,EAAsB+/B,aAAa,CAAC9b,EAAD,EAAK7C,EAAL,CAAnC,CAAf;AACH;;AACDviB,EAAAA,OAAO,CAAC2vB,MAAR,GAAiBpN,EAAjB;AACD;AAGD;;AACA,AAAO,SAASimB,cAAT,CAAwBpjB,EAAxB,EAA4B;AACjC,MAAIkV,IAAI,GAAGlV,EAAE,CAACplB,OAAH,CAAWs6B,IAAtB;AAAA,MAA4BmO,KAAK,GAAG,CAApC;;AACA,OAAK,IAAIriC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk0B,IAAI,CAACjlC,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC;AACpC,QAAIixB,QAAQ,GAAGiD,IAAI,CAACl0B,CAAD,CAAnB;AACA,QAAI,CAACixB,QAAQ,CAAC8C,MAAV,KAAqB,CAAC9C,QAAQ,CAACnb,IAAV,IAAkBmb,QAAQ,CAACoE,OAAhD,CAAJ,EAA8D,EAAEgN,KAAF;AAC/D;;AACD,SAAOA,KAAP;AACD;;AChJM,SAASC,eAAT,CAAyBtjB,EAAzB,EAA6B;AAClCA,EAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBsP,aAAjB,CAA+BvjB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBuP,gBAAjB,EAA/B;AACD;AAED,AAAO,SAASA,gBAAT,CAA0BxjB,EAA1B,EAA8ByjB,OAAO,GAAG,IAAxC,EAA8C;AACnD,MAAIzd,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkB9pB,MAAM,GAAG,EAA3B;AACA,MAAIwnC,WAAW,GAAGxnC,MAAM,CAACynC,OAAP,GAAiBnyC,QAAQ,CAAC8hC,sBAAT,EAAnC;AACA,MAAIsQ,WAAW,GAAG1nC,MAAM,CAACqQ,SAAP,GAAmB/a,QAAQ,CAAC8hC,sBAAT,EAArC;;AAEA,OAAK,IAAItyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe7zC,MAAnC,EAA2C+Q,CAAC,EAA5C,EAAgD;AAC9C,QAAI,CAACyiC,OAAD,IAAYziC,CAAC,IAAIglB,GAAG,CAAC6d,GAAJ,CAAQE,SAA7B,EAAwC;AACxC,QAAIlsB,KAAK,GAAGmO,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,CAAZ;AACA,QAAI6W,KAAK,CAACvI,IAAN,GAAaiQ,IAAb,IAAqBS,EAAE,CAACplB,OAAH,CAAW2vB,MAAhC,IAA0C1S,KAAK,CAACsF,EAAN,GAAWoC,IAAX,GAAkBS,EAAE,CAACplB,OAAH,CAAW0vB,QAA3E,EAAqF;AACrF,QAAIwF,SAAS,GAAGjY,KAAK,CAACmsB,KAAN,EAAhB;AACA,QAAIlU,SAAS,IAAI9P,EAAE,CAAC5S,OAAH,CAAW62B,uBAA5B,EACEC,mBAAmB,CAAClkB,EAAD,EAAKnI,KAAK,CAACpmB,IAAX,EAAiBiyC,WAAjB,CAAnB;AACF,QAAI,CAAC5T,SAAL,EACEqU,kBAAkB,CAACnkB,EAAD,EAAKnI,KAAL,EAAY+rB,WAAZ,CAAlB;AACH;;AACD,SAAO1nC,MAAP;AACD;;AAGD,AAAO,SAASgoC,mBAAT,CAA6BlkB,EAA7B,EAAiCvuB,IAAjC,EAAuC0Y,MAAvC,EAA+C;AACpD,MAAIkR,GAAG,GAAGgkB,YAAY,CAACrf,EAAD,EAAKvuB,IAAL,EAAW,KAAX,EAAkB,IAAlB,EAAwB,IAAxB,EAA8B,CAACuuB,EAAE,CAAC5S,OAAH,CAAWiwB,yBAA1C,CAAtB;AAEA,MAAI+G,MAAM,GAAGj6B,MAAM,CAACzY,WAAP,CAAmB8lB,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,mBAAlB,CAAtB,CAAb;AACA4sB,EAAAA,MAAM,CAACh2C,KAAP,CAAagU,IAAb,GAAoBiZ,GAAG,CAACjZ,IAAJ,GAAW,IAA/B;AACAgiC,EAAAA,MAAM,CAACh2C,KAAP,CAAa+iB,GAAb,GAAmBkK,GAAG,CAAClK,GAAJ,GAAU,IAA7B;AACAizB,EAAAA,MAAM,CAACh2C,KAAP,CAAad,MAAb,GAAsByL,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYtC,GAAG,CAACggB,MAAJ,GAAahgB,GAAG,CAAClK,GAA7B,IAAoC6O,EAAE,CAAC5S,OAAH,CAAWi3B,YAA/C,GAA8D,IAApF;;AAEA,MAAIhpB,GAAG,CAACskB,KAAR,EAAe;AACb;AACA,QAAI2E,WAAW,GAAGn6B,MAAM,CAACzY,WAAP,CAAmB8lB,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,8CAAlB,CAAtB,CAAlB;AACA8sB,IAAAA,WAAW,CAACl2C,KAAZ,CAAkBwM,OAAlB,GAA4B,EAA5B;AACA0pC,IAAAA,WAAW,CAACl2C,KAAZ,CAAkBgU,IAAlB,GAAyBiZ,GAAG,CAACskB,KAAJ,CAAUv9B,IAAV,GAAiB,IAA1C;AACAkiC,IAAAA,WAAW,CAACl2C,KAAZ,CAAkB+iB,GAAlB,GAAwBkK,GAAG,CAACskB,KAAJ,CAAUxuB,GAAV,GAAgB,IAAxC;AACAmzB,IAAAA,WAAW,CAACl2C,KAAZ,CAAkBd,MAAlB,GAA2B,CAAC+tB,GAAG,CAACskB,KAAJ,CAAUtE,MAAV,GAAmBhgB,GAAG,CAACskB,KAAJ,CAAUxuB,GAA9B,IAAqC,GAArC,GAA2C,IAAtE;AACD;AACF;;AAED,SAASozB,SAAT,CAAmBx7B,CAAnB,EAAsBiQ,CAAtB,EAAyB;AAAE,SAAOjQ,CAAC,CAACoI,GAAF,GAAQ6H,CAAC,CAAC7H,GAAV,IAAiBpI,CAAC,CAAC3G,IAAF,GAAS4W,CAAC,CAAC5W,IAAnC;AAAyC;;;AAGpE,SAAS+hC,kBAAT,CAA4BnkB,EAA5B,EAAgCnI,KAAhC,EAAuC1N,MAAvC,EAA+C;AAC7C,MAAIvP,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0BorB,GAAG,GAAGhG,EAAE,CAACgG,GAAnC;AACA,MAAIwe,QAAQ,GAAGhzC,QAAQ,CAAC8hC,sBAAT,EAAf;AACA,MAAImR,OAAO,GAAG1K,QAAQ,CAAC/Z,EAAE,CAACplB,OAAJ,CAAtB;AAAA,MAAoC8pC,QAAQ,GAAGD,OAAO,CAACriC,IAAvD;AACA,MAAIuiC,SAAS,GAAG5rC,IAAI,CAAC4kB,GAAL,CAAS/iB,OAAO,CAACgqC,UAAjB,EAA6BrK,YAAY,CAACva,EAAD,CAAZ,GAAmBplB,OAAO,CAAC6+B,KAAR,CAAcgI,UAA9D,IAA4EgD,OAAO,CAACniC,KAApG;AACA,MAAIuiC,MAAM,GAAG7e,GAAG,CAAChoB,SAAJ,IAAiB,KAA9B;;AAEA,WAASQ,GAAT,CAAa4D,IAAb,EAAmB+O,GAAnB,EAAwB/jB,KAAxB,EAA+BiuC,MAA/B,EAAuC;AACrC,QAAIlqB,GAAG,GAAG,CAAV,EAAaA,GAAG,GAAG,CAAN;AACbA,IAAAA,GAAG,GAAGpY,IAAI,CAACupC,KAAL,CAAWnxB,GAAX,CAAN;AACAkqB,IAAAA,MAAM,GAAGtiC,IAAI,CAACupC,KAAL,CAAWjH,MAAX,CAAT;AACAmJ,IAAAA,QAAQ,CAAC9yC,WAAT,CAAqB8lB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,qBAAd,EAAsC,6BAA4BpV,IAAK;AACnG,oCAAoC+O,GAAI,cAAa/jB,KAAK,IAAI,IAAT,GAAgBu3C,SAAS,GAAGviC,IAA5B,GAAmChV,KAAM;AAC9F,uCAAuCiuC,MAAM,GAAGlqB,GAAI,IAFxB,CAAxB;AAGD;;AAED,WAAS2zB,WAAT,CAAqBvlB,IAArB,EAA2BwlB,OAA3B,EAAoCC,KAApC,EAA2C;AACzC,QAAIhU,OAAO,GAAGjL,OAAO,CAACC,GAAD,EAAMzG,IAAN,CAArB;AACA,QAAI0lB,OAAO,GAAGjU,OAAO,CAAC71B,IAAR,CAAalL,MAA3B;AACA,QAAI8nB,KAAJ,EAAWlV,GAAX;;AACA,aAASo8B,MAAT,CAAgBziB,EAAhB,EAAoBkf,IAApB,EAA0B;AACxB,aAAO0D,UAAU,CAACpf,EAAD,EAAKsH,GAAG,CAAC/H,IAAD,EAAO/C,EAAP,CAAR,EAAoB,KAApB,EAA2BwU,OAA3B,EAAoC0K,IAApC,CAAjB;AACD;;AAED,aAASwJ,KAAT,CAAe7pB,GAAf,EAAoBpK,GAApB,EAAyBk0B,IAAzB,EAA+B;AAC7B,UAAIC,MAAM,GAAG/E,qBAAqB,CAACrgB,EAAD,EAAKgR,OAAL,EAAc,IAAd,EAAoB3V,GAApB,CAAlC;AACA,UAAIzB,IAAI,GAAI3I,GAAG,IAAI,KAAR,KAAmBk0B,IAAI,IAAI,OAA3B,IAAsC,MAAtC,GAA+C,OAA1D;AACA,UAAI3oB,EAAE,GAAG2oB,IAAI,IAAI,OAAR,GAAkBC,MAAM,CAAChF,KAAzB,GAAiCgF,MAAM,CAACviC,GAAP,IAAc,KAAK8N,IAAL,CAAUqgB,OAAO,CAAC71B,IAAR,CAAa6hB,MAAb,CAAoBooB,MAAM,CAACviC,GAAP,GAAa,CAAjC,CAAV,IAAiD,CAAjD,GAAqD,CAAnE,CAA1C;AACA,aAAOo8B,MAAM,CAACziB,EAAD,EAAK5C,IAAL,CAAN,CAAiBA,IAAjB,CAAP;AACD;;AAED,QAAI4D,KAAK,GAAG8B,QAAQ,CAAC0R,OAAD,EAAUhL,GAAG,CAAChoB,SAAd,CAApB;AACAuf,IAAAA,mBAAmB,CAACC,KAAD,EAAQunB,OAAO,IAAI,CAAnB,EAAsBC,KAAK,IAAI,IAAT,GAAgBC,OAAhB,GAA0BD,KAAhD,EAAuD,CAAC11B,IAAD,EAAO6N,EAAP,EAAWlM,GAAX,EAAgBjQ,CAAhB,KAAsB;AAC9F,UAAIy/B,GAAG,GAAGxvB,GAAG,IAAI,KAAjB;AACA,UAAIo0B,OAAO,GAAGpG,MAAM,CAAC3vB,IAAD,EAAOmxB,GAAG,GAAG,MAAH,GAAY,OAAtB,CAApB;AACA,UAAI6E,KAAK,GAAGrG,MAAM,CAAC9hB,EAAE,GAAG,CAAN,EAASsjB,GAAG,GAAG,OAAH,GAAa,MAAzB,CAAlB;AAEA,UAAI8E,SAAS,GAAGR,OAAO,IAAI,IAAX,IAAmBz1B,IAAI,IAAI,CAA3C;AAAA,UAA8Ck2B,OAAO,GAAGR,KAAK,IAAI,IAAT,IAAiB7nB,EAAE,IAAI8nB,OAA/E;AACA,UAAIhf,KAAK,GAAGjlB,CAAC,IAAI,CAAjB;AAAA,UAAoBxE,IAAI,GAAG,CAACghB,KAAD,IAAUxc,CAAC,IAAIwc,KAAK,CAACvtB,MAAN,GAAe,CAAzD;;AACA,UAAIq1C,KAAK,CAACn0B,GAAN,GAAYk0B,OAAO,CAACl0B,GAApB,IAA2B,CAA/B,EAAkC;AAAE;AAClC,YAAIs0B,QAAQ,GAAG,CAACZ,MAAM,GAAGU,SAAH,GAAeC,OAAtB,KAAkCvf,KAAjD;AACA,YAAIyf,SAAS,GAAG,CAACb,MAAM,GAAGW,OAAH,GAAaD,SAApB,KAAkC/oC,IAAlD;AACA,YAAI4F,IAAI,GAAGqjC,QAAQ,GAAGf,QAAH,GAAc,CAACjE,GAAG,GAAG4E,OAAH,GAAaC,KAAjB,EAAwBljC,IAAzD;AACA,YAAIE,KAAK,GAAGojC,SAAS,GAAGf,SAAH,GAAe,CAAClE,GAAG,GAAG6E,KAAH,GAAWD,OAAf,EAAwB/iC,KAA5D;AACA9D,QAAAA,GAAG,CAAC4D,IAAD,EAAOijC,OAAO,CAACl0B,GAAf,EAAoB7O,KAAK,GAAGF,IAA5B,EAAkCijC,OAAO,CAAChK,MAA1C,CAAH;AACD,OAND,MAMO;AAAE;AACP,YAAIsK,OAAJ,EAAaC,QAAb,EAAuBC,OAAvB,EAAgCC,QAAhC;;AACA,YAAIrF,GAAJ,EAAS;AACPkF,UAAAA,OAAO,GAAGd,MAAM,IAAIU,SAAV,IAAuBtf,KAAvB,GAA+Bye,QAA/B,GAA0CW,OAAO,CAACjjC,IAA5D;AACAwjC,UAAAA,QAAQ,GAAGf,MAAM,GAAGF,SAAH,GAAeO,KAAK,CAAC51B,IAAD,EAAO2B,GAAP,EAAY,QAAZ,CAArC;AACA40B,UAAAA,OAAO,GAAGhB,MAAM,GAAGH,QAAH,GAAcQ,KAAK,CAAC/nB,EAAD,EAAKlM,GAAL,EAAU,OAAV,CAAnC;AACA60B,UAAAA,QAAQ,GAAGjB,MAAM,IAAIW,OAAV,IAAqBhpC,IAArB,GAA4BmoC,SAA5B,GAAwCW,KAAK,CAAChjC,KAAzD;AACD,SALD,MAKO;AACLqjC,UAAAA,OAAO,GAAG,CAACd,MAAD,GAAUH,QAAV,GAAqBQ,KAAK,CAAC51B,IAAD,EAAO2B,GAAP,EAAY,QAAZ,CAApC;AACA20B,UAAAA,QAAQ,GAAG,CAACf,MAAD,IAAWU,SAAX,IAAwBtf,KAAxB,GAAgC0e,SAAhC,GAA4CU,OAAO,CAAC/iC,KAA/D;AACAujC,UAAAA,OAAO,GAAG,CAAChB,MAAD,IAAWW,OAAX,IAAsBhpC,IAAtB,GAA6BkoC,QAA7B,GAAwCY,KAAK,CAACljC,IAAxD;AACA0jC,UAAAA,QAAQ,GAAG,CAACjB,MAAD,GAAUF,SAAV,GAAsBO,KAAK,CAAC/nB,EAAD,EAAKlM,GAAL,EAAU,OAAV,CAAtC;AACD;;AACDzS,QAAAA,GAAG,CAACmnC,OAAD,EAAUN,OAAO,CAACl0B,GAAlB,EAAuBy0B,QAAQ,GAAGD,OAAlC,EAA2CN,OAAO,CAAChK,MAAnD,CAAH;AACA,YAAIgK,OAAO,CAAChK,MAAR,GAAiBiK,KAAK,CAACn0B,GAA3B,EAAgC3S,GAAG,CAACkmC,QAAD,EAAWW,OAAO,CAAChK,MAAnB,EAA2B,IAA3B,EAAiCiK,KAAK,CAACn0B,GAAvC,CAAH;AAChC3S,QAAAA,GAAG,CAACqnC,OAAD,EAAUP,KAAK,CAACn0B,GAAhB,EAAqB20B,QAAQ,GAAGD,OAAhC,EAAyCP,KAAK,CAACjK,MAA/C,CAAH;AACD;;AAED,UAAI,CAACtjB,KAAD,IAAUwsB,SAAS,CAACc,OAAD,EAAUttB,KAAV,CAAT,GAA4B,CAA1C,EAA6CA,KAAK,GAAGstB,OAAR;AAC7C,UAAId,SAAS,CAACe,KAAD,EAAQvtB,KAAR,CAAT,GAA0B,CAA9B,EAAiCA,KAAK,GAAGutB,KAAR;AACjC,UAAI,CAACziC,GAAD,IAAQ0hC,SAAS,CAACc,OAAD,EAAUxiC,GAAV,CAAT,GAA0B,CAAtC,EAAyCA,GAAG,GAAGwiC,OAAN;AACzC,UAAId,SAAS,CAACe,KAAD,EAAQziC,GAAR,CAAT,GAAwB,CAA5B,EAA+BA,GAAG,GAAGyiC,KAAN;AAChC,KAnCkB,CAAnB;AAoCA,WAAO;AAACvtB,MAAAA,KAAK,EAAEA,KAAR;AAAelV,MAAAA,GAAG,EAAEA;AAApB,KAAP;AACD;;AAED,MAAIkjC,KAAK,GAAGluB,KAAK,CAACvI,IAAN,EAAZ;AAAA,MAA0B02B,GAAG,GAAGnuB,KAAK,CAACsF,EAAN,EAAhC;;AACA,MAAI4oB,KAAK,CAACxmB,IAAN,IAAcymB,GAAG,CAACzmB,IAAtB,EAA4B;AAC1BulB,IAAAA,WAAW,CAACiB,KAAK,CAACxmB,IAAP,EAAawmB,KAAK,CAACvpB,EAAnB,EAAuBwpB,GAAG,CAACxpB,EAA3B,CAAX;AACD,GAFD,MAEO;AACL,QAAIypB,QAAQ,GAAGlgB,OAAO,CAACC,GAAD,EAAM+f,KAAK,CAACxmB,IAAZ,CAAtB;AAAA,QAAyC2mB,MAAM,GAAGngB,OAAO,CAACC,GAAD,EAAMggB,GAAG,CAACzmB,IAAV,CAAzD;AACA,QAAI4mB,WAAW,GAAGhW,UAAU,CAAC8V,QAAD,CAAV,IAAwB9V,UAAU,CAAC+V,MAAD,CAApD;AACA,QAAIE,OAAO,GAAGtB,WAAW,CAACiB,KAAK,CAACxmB,IAAP,EAAawmB,KAAK,CAACvpB,EAAnB,EAAuB2pB,WAAW,GAAGF,QAAQ,CAAC9qC,IAAT,CAAclL,MAAd,GAAuB,CAA1B,GAA8B,IAAhE,CAAX,CAAiF4S,GAA/F;AACA,QAAIwjC,UAAU,GAAGvB,WAAW,CAACkB,GAAG,CAACzmB,IAAL,EAAW4mB,WAAW,GAAG,CAAH,GAAO,IAA7B,EAAmCH,GAAG,CAACxpB,EAAvC,CAAX,CAAsDzE,KAAvE;;AACA,QAAIouB,WAAJ,EAAiB;AACf,UAAIC,OAAO,CAACj1B,GAAR,GAAck1B,UAAU,CAACl1B,GAAX,GAAiB,CAAnC,EAAsC;AACpC3S,QAAAA,GAAG,CAAC4nC,OAAO,CAAC9jC,KAAT,EAAgB8jC,OAAO,CAACj1B,GAAxB,EAA6B,IAA7B,EAAmCi1B,OAAO,CAAC/K,MAA3C,CAAH;AACA78B,QAAAA,GAAG,CAACkmC,QAAD,EAAW2B,UAAU,CAACl1B,GAAtB,EAA2Bk1B,UAAU,CAACjkC,IAAtC,EAA4CikC,UAAU,CAAChL,MAAvD,CAAH;AACD,OAHD,MAGO;AACL78B,QAAAA,GAAG,CAAC4nC,OAAO,CAAC9jC,KAAT,EAAgB8jC,OAAO,CAACj1B,GAAxB,EAA6Bk1B,UAAU,CAACjkC,IAAX,GAAkBgkC,OAAO,CAAC9jC,KAAvD,EAA8D8jC,OAAO,CAAC/K,MAAtE,CAAH;AACD;AACF;;AACD,QAAI+K,OAAO,CAAC/K,MAAR,GAAiBgL,UAAU,CAACl1B,GAAhC,EACE3S,GAAG,CAACkmC,QAAD,EAAW0B,OAAO,CAAC/K,MAAnB,EAA2B,IAA3B,EAAiCgL,UAAU,CAACl1B,GAA5C,CAAH;AACH;;AAEDhH,EAAAA,MAAM,CAACzY,WAAP,CAAmB8yC,QAAnB;AACD;;;AAGD,AAAO,SAAS8B,YAAT,CAAsBtmB,EAAtB,EAA0B;AAC/B,MAAI,CAACA,EAAE,CAAC+D,KAAH,CAAS3Y,OAAd,EAAuB;AACvB,MAAIxQ,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AACA2rC,EAAAA,aAAa,CAAC3rC,OAAO,CAAC4rC,OAAT,CAAb;AACA,MAAI/mB,EAAE,GAAG,IAAT;AACA7kB,EAAAA,OAAO,CAAC6rC,SAAR,CAAkBr4C,KAAlB,CAAwBs4C,UAAxB,GAAqC,EAArC;AACA,MAAI1mB,EAAE,CAAC5S,OAAH,CAAWu5B,eAAX,GAA6B,CAAjC,EACE/rC,OAAO,CAAC4rC,OAAR,GAAkBI,WAAW,CAAC,MAAM;AAClC,QAAI,CAAC5mB,EAAE,CAAC6mB,QAAH,EAAL,EAAoBC,MAAM,CAAC9mB,EAAD,CAAN;AACpBplB,IAAAA,OAAO,CAAC6rC,SAAR,CAAkBr4C,KAAlB,CAAwBs4C,UAAxB,GAAqC,CAACjnB,EAAE,GAAG,CAACA,EAAP,IAAa,EAAb,GAAkB,QAAvD;AACD,GAH4B,EAG1BO,EAAE,CAAC5S,OAAH,CAAWu5B,eAHe,CAA7B,CADF,KAKK,IAAI3mB,EAAE,CAAC5S,OAAH,CAAWu5B,eAAX,GAA6B,CAAjC,EACH/rC,OAAO,CAAC6rC,SAAR,CAAkBr4C,KAAlB,CAAwBs4C,UAAxB,GAAqC,QAArC;AACH;;AC3JM,SAASK,WAAT,CAAqB/mB,EAArB,EAAyB;AAC9B,MAAI,CAACA,EAAE,CAAC6mB,QAAH,EAAL,EAAoB;AAClB7mB,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBhgC,KAAjB;AACA,QAAI,CAAC+rB,EAAE,CAAC+D,KAAH,CAAS3Y,OAAd,EAAuB47B,OAAO,CAAChnB,EAAD,CAAP;AACxB;AACF;AAED,AAAO,SAASinB,cAAT,CAAwBjnB,EAAxB,EAA4B;AACjCA,EAAAA,EAAE,CAAC+D,KAAH,CAASmjB,iBAAT,GAA6B,IAA7B;AACAxnC,EAAAA,UAAU,CAAC,MAAM;AAAE,QAAIsgB,EAAE,CAAC+D,KAAH,CAASmjB,iBAAb,EAAgC;AACjDlnB,MAAAA,EAAE,CAAC+D,KAAH,CAASmjB,iBAAT,GAA6B,KAA7B;AACA,UAAIlnB,EAAE,CAAC+D,KAAH,CAAS3Y,OAAb,EAAsB07B,MAAM,CAAC9mB,EAAD,CAAN;AACvB;AAAE,GAHO,EAGL,GAHK,CAAV;AAID;AAED,AAAO,SAASgnB,OAAT,CAAiBhnB,EAAjB,EAAqBxX,CAArB,EAAwB;AAC7B,MAAIwX,EAAE,CAAC+D,KAAH,CAASmjB,iBAAT,IAA8B,CAAClnB,EAAE,CAAC+D,KAAH,CAASojB,YAA5C,EAA0DnnB,EAAE,CAAC+D,KAAH,CAASmjB,iBAAT,GAA6B,KAA7B;AAE1D,MAAIlnB,EAAE,CAAC5S,OAAH,CAAWngB,QAAX,IAAuB,UAA3B,EAAuC;;AACvC,MAAI,CAAC+yB,EAAE,CAAC+D,KAAH,CAAS3Y,OAAd,EAAuB;AACrB0U,IAAAA,MAAM,CAACE,EAAD,EAAK,OAAL,EAAcA,EAAd,EAAkBxX,CAAlB,CAAN;AACAwX,IAAAA,EAAE,CAAC+D,KAAH,CAAS3Y,OAAT,GAAmB,IAAnB;AACA0N,IAAAA,QAAQ,CAACkH,EAAE,CAACplB,OAAH,CAAW2+B,OAAZ,EAAqB,oBAArB,CAAR,CAHqB;AAKrB;AACA;;AACA,QAAI,CAACvZ,EAAE,CAACO,KAAJ,IAAaP,EAAE,CAACplB,OAAH,CAAWwsC,iBAAX,IAAgCpnB,EAAE,CAACgG,GAAH,CAAO6d,GAAxD,EAA6D;AAC3D7jB,MAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBpnB,KAAjB;AACA,UAAI4I,MAAJ,EAAY/V,UAAU,CAAC,MAAMsgB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBpnB,KAAjB,CAAuB,IAAvB,CAAP,EAAqC,EAArC,CAAV,CAF+C;AAG5D;;AACDmT,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBoT,aAAjB;AACD;;AACDf,EAAAA,YAAY,CAACtmB,EAAD,CAAZ;AACD;AACD,AAAO,SAAS8mB,MAAT,CAAgB9mB,EAAhB,EAAoBxX,CAApB,EAAuB;AAC5B,MAAIwX,EAAE,CAAC+D,KAAH,CAASmjB,iBAAb,EAAgC;;AAEhC,MAAIlnB,EAAE,CAAC+D,KAAH,CAAS3Y,OAAb,EAAsB;AACpB0U,IAAAA,MAAM,CAACE,EAAD,EAAK,MAAL,EAAaA,EAAb,EAAiBxX,CAAjB,CAAN;AACAwX,IAAAA,EAAE,CAAC+D,KAAH,CAAS3Y,OAAT,GAAmB,KAAnB;AACAyL,IAAAA,OAAO,CAACmJ,EAAE,CAACplB,OAAH,CAAW2+B,OAAZ,EAAqB,oBAArB,CAAP;AACD;;AACDgN,EAAAA,aAAa,CAACvmB,EAAE,CAACplB,OAAH,CAAW4rC,OAAZ,CAAb;AACA9mC,EAAAA,UAAU,CAAC,MAAM;AAAE,QAAI,CAACsgB,EAAE,CAAC+D,KAAH,CAAS3Y,OAAd,EAAuB4U,EAAE,CAACplB,OAAH,CAAWsJ,KAAX,GAAmB,KAAnB;AAA0B,GAA1D,EAA4D,GAA5D,CAAV;AACD;;AC3CD;;AACA,AAAO,SAASojC,uBAAT,CAAiCtnB,EAAjC,EAAqC;AAC1C,MAAIplB,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AACA,MAAI2sC,UAAU,GAAG3sC,OAAO,CAAC4sC,OAAR,CAAgB3N,SAAjC;;AACA,OAAK,IAAI74B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpG,OAAO,CAACs6B,IAAR,CAAajlC,MAAjC,EAAyC+Q,CAAC,EAA1C,EAA8C;AAC5C,QAAIgd,GAAG,GAAGpjB,OAAO,CAACs6B,IAAR,CAAal0B,CAAb,CAAV;AAAA,QAA2B+5B,QAAQ,GAAG/a,EAAE,CAAC5S,OAAH,CAAW4tB,YAAjD;AACA,QAAI1tC,MAAJ;AAAA,QAAYF,KAAK,GAAG,CAApB;AACA,QAAI4wB,GAAG,CAAC+W,MAAR,EAAgB;;AAChB,QAAIzf,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B;AACxB,UAAI6nB,GAAG,GAAGpf,GAAG,CAAClH,IAAJ,CAAS+iB,SAAT,GAAqB7b,GAAG,CAAClH,IAAJ,CAAS9Z,YAAxC;AACA1P,MAAAA,MAAM,GAAG8vC,GAAG,GAAGmK,UAAf;AACAA,MAAAA,UAAU,GAAGnK,GAAb;AACD,KAJD,MAIO;AACL,UAAIoD,GAAG,GAAGxiB,GAAG,CAAClH,IAAJ,CAASviB,qBAAT,EAAV;AACAjH,MAAAA,MAAM,GAAGkzC,GAAG,CAACnF,MAAJ,GAAamF,GAAG,CAACrvB,GAA1B,CAFK;AAIL;;AACA,UAAI,CAAC4pB,QAAD,IAAa/c,GAAG,CAAC7iB,IAAJ,CAASkc,UAA1B,EACEjqB,KAAK,GAAG4wB,GAAG,CAAC7iB,IAAJ,CAASkc,UAAT,CAAoB9iB,qBAApB,GAA4C+N,KAA5C,GAAoDk+B,GAAG,CAACp+B,IAAxD,GAA+D,CAAvE;AACH;;AACD,QAAIukB,IAAI,GAAG3I,GAAG,CAACuB,IAAJ,CAASjyB,MAAT,GAAkBA,MAA7B;;AACA,QAAIq5B,IAAI,GAAG,IAAP,IAAeA,IAAI,GAAG,CAAC,IAA3B,EAAiC;AAC/BD,MAAAA,gBAAgB,CAAC1I,GAAG,CAACuB,IAAL,EAAWjyB,MAAX,CAAhB;AACAm6C,MAAAA,kBAAkB,CAACzpB,GAAG,CAACuB,IAAL,CAAlB;AACA,UAAIvB,GAAG,CAACsU,IAAR,EAAc,KAAK,IAAIxT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,GAAG,CAACsU,IAAJ,CAASriC,MAA7B,EAAqC6uB,CAAC,EAAtC,EACZ2oB,kBAAkB,CAACzpB,GAAG,CAACsU,IAAJ,CAASxT,CAAT,CAAD,CAAlB;AACH;;AACD,QAAI1xB,KAAK,GAAG4yB,EAAE,CAACplB,OAAH,CAAWgqC,UAAvB,EAAmC;AACjC,UAAI8C,OAAO,GAAG3uC,IAAI,CAACukB,IAAL,CAAUlwB,KAAK,GAAG8vC,SAAS,CAACld,EAAE,CAACplB,OAAJ,CAA3B,CAAd;;AACA,UAAI8sC,OAAO,GAAG1nB,EAAE,CAACplB,OAAH,CAAWy2B,aAAzB,EAAwC;AACtCrR,QAAAA,EAAE,CAACplB,OAAH,CAAWy2B,aAAX,GAA2BqW,OAA3B;AACA1nB,QAAAA,EAAE,CAACplB,OAAH,CAAWw2B,OAAX,GAAqBpT,GAAG,CAACuB,IAAzB;AACAS,QAAAA,EAAE,CAACplB,OAAH,CAAW02B,cAAX,GAA4B,IAA5B;AACD;AACF;AACF;AACF;AAGD;;AACA,SAASmW,kBAAT,CAA4BloB,IAA5B,EAAkC;AAChC,MAAIA,IAAI,CAACmZ,OAAT,EAAkB,KAAK,IAAI13B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGue,IAAI,CAACmZ,OAAL,CAAazoC,MAAjC,EAAyC,EAAE+Q,CAA3C,EAA8C;AAC9D,QAAI2mC,CAAC,GAAGpoB,IAAI,CAACmZ,OAAL,CAAa13B,CAAb,CAAR;AAAA,QAAyBuW,MAAM,GAAGowB,CAAC,CAAC7wB,IAAF,CAAO7c,UAAzC;AACA,QAAIsd,MAAJ,EAAYowB,CAAC,CAACr6C,MAAF,GAAWiqB,MAAM,CAACva,YAAlB;AACb;AACF;AAGD;AACA;;;AACA,AAAO,SAAS4qC,YAAT,CAAsBhtC,OAAtB,EAA+BorB,GAA/B,EAAoC6hB,QAApC,EAA8C;AACnD,MAAI12B,GAAG,GAAG02B,QAAQ,IAAIA,QAAQ,CAAC12B,GAAT,IAAgB,IAA5B,GAAmCpY,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYkqB,QAAQ,CAAC12B,GAArB,CAAnC,GAA+DvW,OAAO,CAAC4/B,QAAR,CAAiBpnC,SAA1F;AACA+d,EAAAA,GAAG,GAAGpY,IAAI,CAACC,KAAL,CAAWmY,GAAG,GAAGwoB,UAAU,CAAC/+B,OAAD,CAA3B,CAAN;AACA,MAAIygC,MAAM,GAAGwM,QAAQ,IAAIA,QAAQ,CAACxM,MAAT,IAAmB,IAA/B,GAAsCwM,QAAQ,CAACxM,MAA/C,GAAwDlqB,GAAG,GAAGvW,OAAO,CAAC2+B,OAAR,CAAgBoB,YAA3F;AAEA,MAAIrrB,IAAI,GAAGwX,YAAY,CAACd,GAAD,EAAM7U,GAAN,CAAvB;AAAA,MAAmCgM,EAAE,GAAG2J,YAAY,CAACd,GAAD,EAAMqV,MAAN,CAApD,CALmD;AAOnD;;AACA,MAAIwM,QAAQ,IAAIA,QAAQ,CAACC,MAAzB,EAAiC;AAC/B,QAAIC,UAAU,GAAGF,QAAQ,CAACC,MAAT,CAAgBx4B,IAAhB,CAAqBiQ,IAAtC;AAAA,QAA4CyoB,QAAQ,GAAGH,QAAQ,CAACC,MAAT,CAAgB3qB,EAAhB,CAAmBoC,IAA1E;;AACA,QAAIwoB,UAAU,GAAGz4B,IAAjB,EAAuB;AACrBA,MAAAA,IAAI,GAAGy4B,UAAP;AACA5qB,MAAAA,EAAE,GAAG2J,YAAY,CAACd,GAAD,EAAM+K,YAAY,CAAChL,OAAO,CAACC,GAAD,EAAM+hB,UAAN,CAAR,CAAZ,GAAyCntC,OAAO,CAAC2+B,OAAR,CAAgBoB,YAA/D,CAAjB;AACD,KAHD,MAGO,IAAI5hC,IAAI,CAACyiB,GAAL,CAASwsB,QAAT,EAAmBhiB,GAAG,CAAC2K,QAAJ,EAAnB,KAAsCxT,EAA1C,EAA8C;AACnD7N,MAAAA,IAAI,GAAGwX,YAAY,CAACd,GAAD,EAAM+K,YAAY,CAAChL,OAAO,CAACC,GAAD,EAAMgiB,QAAN,CAAR,CAAZ,GAAuCptC,OAAO,CAAC2+B,OAAR,CAAgBoB,YAA7D,CAAnB;AACAxd,MAAAA,EAAE,GAAG6qB,QAAL;AACD;AACF;;AACD,SAAO;AAAC14B,IAAAA,IAAI,EAAEA,IAAP;AAAa6N,IAAAA,EAAE,EAAEpkB,IAAI,CAAC4kB,GAAL,CAASR,EAAT,EAAa7N,IAAI,GAAG,CAApB;AAAjB,GAAP;AACD;;AC/DD;AACA;;AACA,AAAO,SAAS24B,iBAAT,CAA2BjoB,EAA3B,EAA+B8a,IAA/B,EAAqC;AAC1C,MAAI/a,cAAc,CAACC,EAAD,EAAK,sBAAL,CAAlB,EAAgD;AAEhD,MAAIplB,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0B4lC,GAAG,GAAG5lC,OAAO,CAAC6+B,KAAR,CAAcllC,qBAAd,EAAhC;AAAA,MAAuE2zC,QAAQ,GAAG,IAAlF;AACA,MAAIpN,IAAI,CAAC3pB,GAAL,GAAWqvB,GAAG,CAACrvB,GAAf,GAAqB,CAAzB,EAA4B+2B,QAAQ,GAAG,IAAX,CAA5B,KACK,IAAIpN,IAAI,CAACO,MAAL,GAAcmF,GAAG,CAACrvB,GAAlB,IAAyBvQ,MAAM,CAACunC,WAAP,IAAsB32C,QAAQ,CAAC4gB,eAAT,CAAyBuoB,YAAxE,CAAJ,EAA2FuN,QAAQ,GAAG,KAAX;;AAChG,MAAIA,QAAQ,IAAI,IAAZ,IAAoB,CAAClyB,OAAzB,EAAkC;AAChC,QAAIoyB,UAAU,GAAG5wB,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,IAAlB,EAAyB;AACjD,gCAAgCsjB,IAAI,CAAC3pB,GAAL,GAAWvW,OAAO,CAACikC,UAAnB,GAAgClF,UAAU,CAAC3Z,EAAE,CAACplB,OAAJ,CAAa;AACvF,mCAAmCkgC,IAAI,CAACO,MAAL,GAAcP,IAAI,CAAC3pB,GAAnB,GAAyBkpB,SAAS,CAACra,EAAD,CAAlC,GAAyCplB,OAAO,CAACggC,SAAU;AAC9F,iCAAiCE,IAAI,CAAC14B,IAAK,cAAarJ,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYmd,IAAI,CAACx4B,KAAL,GAAaw4B,IAAI,CAAC14B,IAA9B,CAAoC,KAHpE,CAApB;AAIA4d,IAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBloC,WAArB,CAAiC02C,UAAjC;AACAA,IAAAA,UAAU,CAACC,cAAX,CAA0BH,QAA1B;AACAloB,IAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBl9B,WAArB,CAAiC0rC,UAAjC;AACD;AACF;AAGD;AACA;;AACA,AAAO,SAASE,iBAAT,CAA2BtoB,EAA3B,EAA+B3E,GAA/B,EAAoCxY,GAApC,EAAyC0lC,MAAzC,EAAiD;AACtD,MAAIA,MAAM,IAAI,IAAd,EAAoBA,MAAM,GAAG,CAAT;AACpB,MAAIzN,IAAJ;;AACA,MAAI,CAAC9a,EAAE,CAAC5S,OAAH,CAAW4tB,YAAZ,IAA4B3f,GAAG,IAAIxY,GAAvC,EAA4C;AAC1C;AACA;AACA;AACAA,IAAAA,GAAG,GAAGwY,GAAG,CAAC0C,MAAJ,IAAc,QAAd,GAAyBuJ,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAWlE,GAAG,CAACmB,EAAJ,GAAS,CAApB,EAAuB,QAAvB,CAA5B,GAA+DnB,GAArE;AACAA,IAAAA,GAAG,GAAGA,GAAG,CAACmB,EAAJ,GAAS8K,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAWlE,GAAG,CAAC0C,MAAJ,IAAc,QAAd,GAAyB1C,GAAG,CAACmB,EAAJ,GAAS,CAAlC,GAAsCnB,GAAG,CAACmB,EAArD,EAAyD,OAAzD,CAAZ,GAAgFnB,GAAtF;AACD;;AACD,OAAK,IAAImtB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,CAA5B,EAA+BA,KAAK,EAApC,EAAwC;AACtC,QAAIC,OAAO,GAAG,KAAd;AACA,QAAIxJ,MAAM,GAAGI,YAAY,CAACrf,EAAD,EAAK3E,GAAL,CAAzB;AACA,QAAIqtB,SAAS,GAAG,CAAC7lC,GAAD,IAAQA,GAAG,IAAIwY,GAAf,GAAqB4jB,MAArB,GAA8BI,YAAY,CAACrf,EAAD,EAAKnd,GAAL,CAA1D;AACAi4B,IAAAA,IAAI,GAAG;AAAC14B,MAAAA,IAAI,EAAErJ,IAAI,CAACyiB,GAAL,CAASyjB,MAAM,CAAC78B,IAAhB,EAAsBsmC,SAAS,CAACtmC,IAAhC,CAAP;AACC+O,MAAAA,GAAG,EAAEpY,IAAI,CAACyiB,GAAL,CAASyjB,MAAM,CAAC9tB,GAAhB,EAAqBu3B,SAAS,CAACv3B,GAA/B,IAAsCo3B,MAD5C;AAECjmC,MAAAA,KAAK,EAAEvJ,IAAI,CAAC4kB,GAAL,CAASshB,MAAM,CAAC78B,IAAhB,EAAsBsmC,SAAS,CAACtmC,IAAhC,CAFR;AAGCi5B,MAAAA,MAAM,EAAEtiC,IAAI,CAAC4kB,GAAL,CAASshB,MAAM,CAAC5D,MAAhB,EAAwBqN,SAAS,CAACrN,MAAlC,IAA4CkN;AAHrD,KAAP;AAIA,QAAII,SAAS,GAAGC,kBAAkB,CAAC5oB,EAAD,EAAK8a,IAAL,CAAlC;AACA,QAAI+N,QAAQ,GAAG7oB,EAAE,CAACgG,GAAH,CAAO5yB,SAAtB;AAAA,QAAiC01C,SAAS,GAAG9oB,EAAE,CAACgG,GAAH,CAAO1U,UAApD;;AACA,QAAIq3B,SAAS,CAACv1C,SAAV,IAAuB,IAA3B,EAAiC;AAC/B21C,MAAAA,eAAe,CAAC/oB,EAAD,EAAK2oB,SAAS,CAACv1C,SAAf,CAAf;AACA,UAAI2F,IAAI,CAAC6pB,GAAL,CAAS5C,EAAE,CAACgG,GAAH,CAAO5yB,SAAP,GAAmBy1C,QAA5B,IAAwC,CAA5C,EAA+CJ,OAAO,GAAG,IAAV;AAChD;;AACD,QAAIE,SAAS,CAACr3B,UAAV,IAAwB,IAA5B,EAAkC;AAChC03B,MAAAA,aAAa,CAAChpB,EAAD,EAAK2oB,SAAS,CAACr3B,UAAf,CAAb;AACA,UAAIvY,IAAI,CAAC6pB,GAAL,CAAS5C,EAAE,CAACgG,GAAH,CAAO1U,UAAP,GAAoBw3B,SAA7B,IAA0C,CAA9C,EAAiDL,OAAO,GAAG,IAAV;AAClD;;AACD,QAAI,CAACA,OAAL,EAAc;AACf;;AACD,SAAO3N,IAAP;AACD;;AAGD,AAAO,SAASuN,cAAT,CAAwBroB,EAAxB,EAA4B8a,IAA5B,EAAkC;AACvC,MAAI6N,SAAS,GAAGC,kBAAkB,CAAC5oB,EAAD,EAAK8a,IAAL,CAAlC;AACA,MAAI6N,SAAS,CAACv1C,SAAV,IAAuB,IAA3B,EAAiC21C,eAAe,CAAC/oB,EAAD,EAAK2oB,SAAS,CAACv1C,SAAf,CAAf;AACjC,MAAIu1C,SAAS,CAACr3B,UAAV,IAAwB,IAA5B,EAAkC03B,aAAa,CAAChpB,EAAD,EAAK2oB,SAAS,CAACr3B,UAAf,CAAb;AACnC;AAGD;AACA;AACA;;AACA,SAASs3B,kBAAT,CAA4B5oB,EAA5B,EAAgC8a,IAAhC,EAAsC;AACpC,MAAIlgC,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0BquC,UAAU,GAAG3H,UAAU,CAACthB,EAAE,CAACplB,OAAJ,CAAjD;AACA,MAAIkgC,IAAI,CAAC3pB,GAAL,GAAW,CAAf,EAAkB2pB,IAAI,CAAC3pB,GAAL,GAAW,CAAX;AAClB,MAAI+3B,SAAS,GAAGlpB,EAAE,CAACO,KAAH,IAAYP,EAAE,CAACO,KAAH,CAASntB,SAAT,IAAsB,IAAlC,GAAyC4sB,EAAE,CAACO,KAAH,CAASntB,SAAlD,GAA8DwH,OAAO,CAAC4/B,QAAR,CAAiBpnC,SAA/F;AACA,MAAIkqC,MAAM,GAAG5C,aAAa,CAAC1a,EAAD,CAA1B;AAAA,MAAgC9jB,MAAM,GAAG,EAAzC;AACA,MAAI4+B,IAAI,CAACO,MAAL,GAAcP,IAAI,CAAC3pB,GAAnB,GAAyBmsB,MAA7B,EAAqCxC,IAAI,CAACO,MAAL,GAAcP,IAAI,CAAC3pB,GAAL,GAAWmsB,MAAzB;AACrC,MAAI6L,SAAS,GAAGnpB,EAAE,CAACgG,GAAH,CAAO14B,MAAP,GAAgBwsC,WAAW,CAACl/B,OAAD,CAA3C;AACA,MAAIwuC,KAAK,GAAGtO,IAAI,CAAC3pB,GAAL,GAAW83B,UAAvB;AAAA,MAAmCI,QAAQ,GAAGvO,IAAI,CAACO,MAAL,GAAc8N,SAAS,GAAGF,UAAxE;;AACA,MAAInO,IAAI,CAAC3pB,GAAL,GAAW+3B,SAAf,EAA0B;AACxBhtC,IAAAA,MAAM,CAAC9I,SAAP,GAAmBg2C,KAAK,GAAG,CAAH,GAAOtO,IAAI,CAAC3pB,GAApC;AACD,GAFD,MAEO,IAAI2pB,IAAI,CAACO,MAAL,GAAc6N,SAAS,GAAG5L,MAA9B,EAAsC;AAC3C,QAAIgM,MAAM,GAAGvwC,IAAI,CAACyiB,GAAL,CAASsf,IAAI,CAAC3pB,GAAd,EAAmB,CAACk4B,QAAQ,GAAGF,SAAH,GAAerO,IAAI,CAACO,MAA7B,IAAuCiC,MAA1D,CAAb;AACA,QAAIgM,MAAM,IAAIJ,SAAd,EAAyBhtC,MAAM,CAAC9I,SAAP,GAAmBk2C,MAAnB;AAC1B;;AAED,MAAIC,WAAW,GAAGvpB,EAAE,CAAC5S,OAAH,CAAWoqB,WAAX,GAAyB,CAAzB,GAA6B58B,OAAO,CAAC0+B,OAAR,CAAgB/X,WAA/D;AACA,MAAIioB,UAAU,GAAGxpB,EAAE,CAACO,KAAH,IAAYP,EAAE,CAACO,KAAH,CAASjP,UAAT,IAAuB,IAAnC,GAA0C0O,EAAE,CAACO,KAAH,CAASjP,UAAnD,GAAgE1W,OAAO,CAAC4/B,QAAR,CAAiBlpB,UAAjB,GAA8Bi4B,WAA/G;AACA,MAAIE,OAAO,GAAGlP,YAAY,CAACva,EAAD,CAAZ,GAAmBplB,OAAO,CAAC0+B,OAAR,CAAgB/X,WAAjD;AACA,MAAImoB,OAAO,GAAG5O,IAAI,CAACx4B,KAAL,GAAaw4B,IAAI,CAAC14B,IAAlB,GAAyBqnC,OAAvC;AACA,MAAIC,OAAJ,EAAa5O,IAAI,CAACx4B,KAAL,GAAaw4B,IAAI,CAAC14B,IAAL,GAAYqnC,OAAzB;AACb,MAAI3O,IAAI,CAAC14B,IAAL,GAAY,EAAhB,EACElG,MAAM,CAACoV,UAAP,GAAoB,CAApB,CADF,KAEK,IAAIwpB,IAAI,CAAC14B,IAAL,GAAYonC,UAAhB,EACHttC,MAAM,CAACoV,UAAP,GAAoBvY,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYmd,IAAI,CAAC14B,IAAL,GAAYmnC,WAAZ,IAA2BG,OAAO,GAAG,CAAH,GAAO,EAAzC,CAAZ,CAApB,CADG,KAEA,IAAI5O,IAAI,CAACx4B,KAAL,GAAamnC,OAAO,GAAGD,UAAV,GAAuB,CAAxC,EACHttC,MAAM,CAACoV,UAAP,GAAoBwpB,IAAI,CAACx4B,KAAL,IAAconC,OAAO,GAAG,CAAH,GAAO,EAA5B,IAAkCD,OAAtD;AACF,SAAOvtC,MAAP;AACD;AAGD;;;AACA,AAAO,SAASytC,cAAT,CAAwB3pB,EAAxB,EAA4B7O,GAA5B,EAAiC;AACtC,MAAIA,GAAG,IAAI,IAAX,EAAiB;AACjBy4B,EAAAA,kBAAkB,CAAC5pB,EAAD,CAAlB;AACAA,EAAAA,EAAE,CAACO,KAAH,CAASntB,SAAT,GAAqB,CAAC4sB,EAAE,CAACO,KAAH,CAASntB,SAAT,IAAsB,IAAtB,GAA6B4sB,EAAE,CAACgG,GAAH,CAAO5yB,SAApC,GAAgD4sB,EAAE,CAACO,KAAH,CAASntB,SAA1D,IAAuE+d,GAA5F;AACD;AAGD;;AACA,AAAO,SAAS04B,mBAAT,CAA6B7pB,EAA7B,EAAiC;AACtC4pB,EAAAA,kBAAkB,CAAC5pB,EAAD,CAAlB;AACA,MAAIhC,GAAG,GAAGgC,EAAE,CAAC8pB,SAAH,EAAV;AACA9pB,EAAAA,EAAE,CAACO,KAAH,CAASwpB,WAAT,GAAuB;AAACz6B,IAAAA,IAAI,EAAE0O,GAAP;AAAYb,IAAAA,EAAE,EAAEa,GAAhB;AAAqBuqB,IAAAA,MAAM,EAAEvoB,EAAE,CAAC5S,OAAH,CAAW48B;AAAxC,GAAvB;AACD;AAED,AAAO,SAASC,cAAT,CAAwBjqB,EAAxB,EAA4B7a,CAA5B,EAA+B4C,CAA/B,EAAkC;AACvC,MAAI5C,CAAC,IAAI,IAAL,IAAa4C,CAAC,IAAI,IAAtB,EAA4B6hC,kBAAkB,CAAC5pB,EAAD,CAAlB;AAC5B,MAAI7a,CAAC,IAAI,IAAT,EAAe6a,EAAE,CAACO,KAAH,CAASjP,UAAT,GAAsBnM,CAAtB;AACf,MAAI4C,CAAC,IAAI,IAAT,EAAeiY,EAAE,CAACO,KAAH,CAASntB,SAAT,GAAqB2U,CAArB;AAChB;AAED,AAAO,SAASmiC,aAAT,CAAuBlqB,EAAvB,EAA2BnI,KAA3B,EAAkC;AACvC+xB,EAAAA,kBAAkB,CAAC5pB,EAAD,CAAlB;AACAA,EAAAA,EAAE,CAACO,KAAH,CAASwpB,WAAT,GAAuBlyB,KAAvB;AACD;AAGD;AACA;AACA;;AACA,SAAS+xB,kBAAT,CAA4B5pB,EAA5B,EAAgC;AAC9B,MAAInI,KAAK,GAAGmI,EAAE,CAACO,KAAH,CAASwpB,WAArB;;AACA,MAAIlyB,KAAJ,EAAW;AACTmI,IAAAA,EAAE,CAACO,KAAH,CAASwpB,WAAT,GAAuB,IAAvB;AACA,QAAIz6B,IAAI,GAAGswB,cAAc,CAAC5f,EAAD,EAAKnI,KAAK,CAACvI,IAAX,CAAzB;AAAA,QAA2C6N,EAAE,GAAGyiB,cAAc,CAAC5f,EAAD,EAAKnI,KAAK,CAACsF,EAAX,CAA9D;AACAgtB,IAAAA,mBAAmB,CAACnqB,EAAD,EAAK1Q,IAAL,EAAW6N,EAAX,EAAetF,KAAK,CAAC0wB,MAArB,CAAnB;AACD;AACF;;AAED,AAAO,SAAS4B,mBAAT,CAA6BnqB,EAA7B,EAAiC1Q,IAAjC,EAAuC6N,EAAvC,EAA2CorB,MAA3C,EAAmD;AACxD,MAAI6B,IAAI,GAAGxB,kBAAkB,CAAC5oB,EAAD,EAAK;AAChC5d,IAAAA,IAAI,EAAErJ,IAAI,CAACyiB,GAAL,CAASlM,IAAI,CAAClN,IAAd,EAAoB+a,EAAE,CAAC/a,IAAvB,CAD0B;AAEhC+O,IAAAA,GAAG,EAAEpY,IAAI,CAACyiB,GAAL,CAASlM,IAAI,CAAC6B,GAAd,EAAmBgM,EAAE,CAAChM,GAAtB,IAA6Bo3B,MAFF;AAGhCjmC,IAAAA,KAAK,EAAEvJ,IAAI,CAAC4kB,GAAL,CAASrO,IAAI,CAAChN,KAAd,EAAqB6a,EAAE,CAAC7a,KAAxB,CAHyB;AAIhC+4B,IAAAA,MAAM,EAAEtiC,IAAI,CAAC4kB,GAAL,CAASrO,IAAI,CAAC+rB,MAAd,EAAsBle,EAAE,CAACke,MAAzB,IAAmCkN;AAJX,GAAL,CAA7B;AAMA0B,EAAAA,cAAc,CAACjqB,EAAD,EAAKoqB,IAAI,CAAC94B,UAAV,EAAsB84B,IAAI,CAACh3C,SAA3B,CAAd;AACD;AAGD;;AACA,AAAO,SAAS21C,eAAT,CAAyB/oB,EAAzB,EAA6BiE,GAA7B,EAAkC;AACvC,MAAIlrB,IAAI,CAAC6pB,GAAL,CAAS5C,EAAE,CAACgG,GAAH,CAAO5yB,SAAP,GAAmB6wB,GAA5B,IAAmC,CAAvC,EAA0C;AAC1C,MAAI,CAAC/O,KAAL,EAAYm1B,mBAAmB,CAACrqB,EAAD,EAAK;AAAC7O,IAAAA,GAAG,EAAE8S;AAAN,GAAL,CAAnB;AACZqmB,EAAAA,YAAY,CAACtqB,EAAD,EAAKiE,GAAL,EAAU,IAAV,CAAZ;AACA,MAAI/O,KAAJ,EAAWm1B,mBAAmB,CAACrqB,EAAD,CAAnB;AACXuqB,EAAAA,WAAW,CAACvqB,EAAD,EAAK,GAAL,CAAX;AACD;AAED,AAAO,SAASsqB,YAAT,CAAsBtqB,EAAtB,EAA0BiE,GAA1B,EAA+BumB,WAA/B,EAA4C;AACjDvmB,EAAAA,GAAG,GAAGlrB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY5kB,IAAI,CAACyiB,GAAL,CAASwE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBiQ,YAApB,GAAmCzqB,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBG,YAAhE,EAA8E1W,GAA9E,CAAZ,CAAN;AACA,MAAIjE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBpnC,SAApB,IAAiC6wB,GAAjC,IAAwC,CAACumB,WAA7C,EAA0D;AAC1DxqB,EAAAA,EAAE,CAACgG,GAAH,CAAO5yB,SAAP,GAAmB6wB,GAAnB;AACAjE,EAAAA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsBJ,YAAtB,CAAmCrmB,GAAnC;AACA,MAAIjE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBpnC,SAApB,IAAiC6wB,GAArC,EAA0CjE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBpnC,SAApB,GAAgC6wB,GAAhC;AAC3C;AAGD;;AACA,AAAO,SAAS+kB,aAAT,CAAuBhpB,EAAvB,EAA2BiE,GAA3B,EAAgC0mB,UAAhC,EAA4CH,WAA5C,EAAyD;AAC9DvmB,EAAAA,GAAG,GAAGlrB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY5kB,IAAI,CAACyiB,GAAL,CAASyI,GAAT,EAAcjE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoB/oB,WAApB,GAAkCuO,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoB9oB,WAApE,CAAZ,CAAN;AACA,MAAI,CAACi5B,UAAU,GAAG1mB,GAAG,IAAIjE,EAAE,CAACgG,GAAH,CAAO1U,UAAjB,GAA8BvY,IAAI,CAAC6pB,GAAL,CAAS5C,EAAE,CAACgG,GAAH,CAAO1U,UAAP,GAAoB2S,GAA7B,IAAoC,CAA7E,KAAmF,CAACumB,WAAxF,EAAqG;AACrGxqB,EAAAA,EAAE,CAACgG,GAAH,CAAO1U,UAAP,GAAoB2S,GAApB;AACA2mB,EAAAA,iBAAiB,CAAC5qB,EAAD,CAAjB;AACA,MAAIA,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBlpB,UAApB,IAAkC2S,GAAtC,EAA2CjE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBlpB,UAApB,GAAiC2S,GAAjC;AAC3CjE,EAAAA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB1B,aAAtB,CAAoC/kB,GAApC;AACD;;AC7KD;AACA;;AACA,AAAO,SAAS4mB,oBAAT,CAA8B7qB,EAA9B,EAAkC;AACvC,MAAImR,CAAC,GAAGnR,EAAE,CAACplB,OAAX;AAAA,MAAoBkwC,OAAO,GAAG3Z,CAAC,CAACmI,OAAF,CAAU/X,WAAxC;AACA,MAAIwpB,IAAI,GAAGhyC,IAAI,CAACupC,KAAL,CAAWtiB,EAAE,CAACgG,GAAH,CAAO14B,MAAP,GAAgBwsC,WAAW,CAAC9Z,EAAE,CAACplB,OAAJ,CAAtC,CAAX;AACA,SAAO;AACL+/B,IAAAA,YAAY,EAAExJ,CAAC,CAACqJ,QAAF,CAAWG,YADpB;AAELqQ,IAAAA,UAAU,EAAE7Z,CAAC,CAACoI,OAAF,CAAUoB,YAFjB;AAGLlpB,IAAAA,WAAW,EAAE0f,CAAC,CAACqJ,QAAF,CAAW/oB,WAHnB;AAGgCC,IAAAA,WAAW,EAAEyf,CAAC,CAACqJ,QAAF,CAAW9oB,WAHxD;AAILu5B,IAAAA,SAAS,EAAE9Z,CAAC,CAACoI,OAAF,CAAU7nB,WAJhB;AAKLw5B,IAAAA,OAAO,EAAElrB,EAAE,CAAC5S,OAAH,CAAWoqB,WAAX,GAAyBsT,OAAzB,GAAmC,CALvC;AAMLK,IAAAA,SAAS,EAAEJ,IANN;AAOLN,IAAAA,YAAY,EAAEM,IAAI,GAAG1Q,SAAS,CAACra,EAAD,CAAhB,GAAuBmR,CAAC,CAACyJ,SAPlC;AAQLN,IAAAA,cAAc,EAAEnJ,CAAC,CAACmJ,cARb;AASLpC,IAAAA,WAAW,EAAE4S;AATR,GAAP;AAWD;;AAED,MAAMM,gBAAN,CAAuB;AACrBp2C,EAAAA,WAAW,CAAC+nC,KAAD,EAAQ/hB,MAAR,EAAgBgF,EAAhB,EAAoB;AAC7B,SAAKA,EAAL,GAAUA,EAAV;AACA,QAAIqrB,IAAI,GAAG,KAAKA,IAAL,GAAY7zB,GAAG,CAAC,KAAD,EAAQ,CAACA,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,gBAApB,CAAJ,CAAR,EAAoD,uBAApD,CAA1B;AACA,QAAI8zB,KAAK,GAAG,KAAKA,KAAL,GAAa9zB,GAAG,CAAC,KAAD,EAAQ,CAACA,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,+BAApB,CAAJ,CAAR,EAAmE,uBAAnE,CAA5B;AACA6zB,IAAAA,IAAI,CAACE,QAAL,GAAgBD,KAAK,CAACC,QAAN,GAAiB,CAAC,CAAlC;AACAxO,IAAAA,KAAK,CAACsO,IAAD,CAAL;AAAatO,IAAAA,KAAK,CAACuO,KAAD,CAAL;AAEb7rB,IAAAA,EAAE,CAAC4rB,IAAD,EAAO,QAAP,EAAiB,MAAM;AACvB,UAAIA,IAAI,CAAC1Q,YAAT,EAAuB3f,MAAM,CAACqwB,IAAI,CAACj4C,SAAN,EAAiB,UAAjB,CAAN;AACxB,KAFC,CAAF;AAGAqsB,IAAAA,EAAE,CAAC6rB,KAAD,EAAQ,QAAR,EAAkB,MAAM;AACxB,UAAIA,KAAK,CAAC55B,WAAV,EAAuBsJ,MAAM,CAACswB,KAAK,CAACh6B,UAAP,EAAmB,YAAnB,CAAN;AACxB,KAFC,CAAF;AAIA,SAAKk6B,gBAAL,GAAwB,KAAxB,CAd6B;;AAgB7B,QAAIl2B,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B,KAAK+1B,KAAL,CAAWl9C,KAAX,CAAiBq9C,SAAjB,GAA6B,KAAKJ,IAAL,CAAUj9C,KAAV,CAAgBs9C,QAAhB,GAA2B,MAAxD;AAC3B;;AAEDC,EAAAA,MAAM,CAACrqB,OAAD,EAAU;AACd,QAAIsqB,MAAM,GAAGtqB,OAAO,CAAC7P,WAAR,GAAsB6P,OAAO,CAAC5P,WAAR,GAAsB,CAAzD;AACA,QAAIm6B,MAAM,GAAGvqB,OAAO,CAACmpB,YAAR,GAAuBnpB,OAAO,CAACqZ,YAAR,GAAuB,CAA3D;AACA,QAAImR,MAAM,GAAGxqB,OAAO,CAACgZ,cAArB;;AAEA,QAAIuR,MAAJ,EAAY;AACV,WAAKR,IAAL,CAAUj9C,KAAV,CAAgBwM,OAAhB,GAA0B,OAA1B;AACA,WAAKywC,IAAL,CAAUj9C,KAAV,CAAgBitC,MAAhB,GAAyBuQ,MAAM,GAAGE,MAAM,GAAG,IAAZ,GAAmB,GAAlD;AACA,UAAIC,WAAW,GAAGzqB,OAAO,CAAC0pB,UAAR,IAAsBY,MAAM,GAAGE,MAAH,GAAY,CAAxC,CAAlB,CAHU;;AAKV,WAAKT,IAAL,CAAUh0B,UAAV,CAAqBjpB,KAArB,CAA2Bd,MAA3B,GACEyL,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY2D,OAAO,CAACmpB,YAAR,GAAuBnpB,OAAO,CAACqZ,YAA/B,GAA8CoR,WAA1D,IAAyE,IAD3E;AAED,KAPD,MAOO;AACL,WAAKV,IAAL,CAAUj9C,KAAV,CAAgBwM,OAAhB,GAA0B,EAA1B;AACA,WAAKywC,IAAL,CAAUh0B,UAAV,CAAqBjpB,KAArB,CAA2Bd,MAA3B,GAAoC,GAApC;AACD;;AAED,QAAIs+C,MAAJ,EAAY;AACV,WAAKN,KAAL,CAAWl9C,KAAX,CAAiBwM,OAAjB,GAA2B,OAA3B;AACA,WAAK0wC,KAAL,CAAWl9C,KAAX,CAAiBkU,KAAjB,GAAyBupC,MAAM,GAAGC,MAAM,GAAG,IAAZ,GAAmB,GAAlD;AACA,WAAKR,KAAL,CAAWl9C,KAAX,CAAiBgU,IAAjB,GAAwBkf,OAAO,CAAC4pB,OAAR,GAAkB,IAA1C;AACA,UAAIc,UAAU,GAAG1qB,OAAO,CAAC2pB,SAAR,GAAoB3pB,OAAO,CAAC4pB,OAA5B,IAAuCW,MAAM,GAAGC,MAAH,GAAY,CAAzD,CAAjB;AACA,WAAKR,KAAL,CAAWj0B,UAAX,CAAsBjpB,KAAtB,CAA4BhB,KAA5B,GACE2L,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY2D,OAAO,CAAC7P,WAAR,GAAsB6P,OAAO,CAAC5P,WAA9B,GAA4Cs6B,UAAxD,IAAsE,IADxE;AAED,KAPD,MAOO;AACL,WAAKV,KAAL,CAAWl9C,KAAX,CAAiBwM,OAAjB,GAA2B,EAA3B;AACA,WAAK0wC,KAAL,CAAWj0B,UAAX,CAAsBjpB,KAAtB,CAA4BhB,KAA5B,GAAoC,GAApC;AACD;;AAED,QAAI,CAAC,KAAKo+C,gBAAN,IAA0BlqB,OAAO,CAACqZ,YAAR,GAAuB,CAArD,EAAwD;AACtD,UAAImR,MAAM,IAAI,CAAd,EAAiB,KAAKG,aAAL;AACjB,WAAKT,gBAAL,GAAwB,IAAxB;AACD;;AAED,WAAO;AAAClpC,MAAAA,KAAK,EAAEupC,MAAM,GAAGC,MAAH,GAAY,CAA1B;AAA6BzQ,MAAAA,MAAM,EAAEuQ,MAAM,GAAGE,MAAH,GAAY;AAAvD,KAAP;AACD;;AAED9C,EAAAA,aAAa,CAAC3tB,GAAD,EAAM;AACjB,QAAI,KAAKiwB,KAAL,CAAWh6B,UAAX,IAAyB+J,GAA7B,EAAkC,KAAKiwB,KAAL,CAAWh6B,UAAX,GAAwB+J,GAAxB;AAClC,QAAI,KAAK6wB,YAAT,EAAuB,KAAKC,kBAAL,CAAwB,KAAKb,KAA7B,EAAoC,KAAKY,YAAzC,EAAuD,OAAvD;AACxB;;AAED5B,EAAAA,YAAY,CAACjvB,GAAD,EAAM;AAChB,QAAI,KAAKgwB,IAAL,CAAUj4C,SAAV,IAAuBioB,GAA3B,EAAgC,KAAKgwB,IAAL,CAAUj4C,SAAV,GAAsBioB,GAAtB;AAChC,QAAI,KAAK+wB,WAAT,EAAsB,KAAKD,kBAAL,CAAwB,KAAKd,IAA7B,EAAmC,KAAKe,WAAxC,EAAqD,MAArD;AACvB;;AAEDH,EAAAA,aAAa,GAAG;AACd,QAAItE,CAAC,GAAGtxB,GAAG,IAAI,CAACN,kBAAR,GAA6B,MAA7B,GAAsC,MAA9C;AACA,SAAKu1B,KAAL,CAAWl9C,KAAX,CAAiBd,MAAjB,GAA0B,KAAK+9C,IAAL,CAAUj9C,KAAV,CAAgBhB,KAAhB,GAAwBu6C,CAAlD;AACA,SAAK2D,KAAL,CAAWl9C,KAAX,CAAiBi+C,aAAjB,GAAiC,KAAKhB,IAAL,CAAUj9C,KAAV,CAAgBi+C,aAAhB,GAAgC,MAAjE;AACA,SAAKH,YAAL,GAAoB,IAAI7xB,OAAJ,EAApB;AACA,SAAK+xB,WAAL,GAAmB,IAAI/xB,OAAJ,EAAnB;AACD;;AAED8xB,EAAAA,kBAAkB,CAACG,GAAD,EAAMC,KAAN,EAAatgD,IAAb,EAAmB;AACnCqgD,IAAAA,GAAG,CAACl+C,KAAJ,CAAUi+C,aAAV,GAA0B,MAA1B;;AACA,aAASG,YAAT,GAAwB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,UAAIhM,GAAG,GAAG8L,GAAG,CAAC/3C,qBAAJ,EAAV;AACA,UAAIijB,GAAG,GAAGvrB,IAAI,IAAI,MAAR,GAAiBuF,QAAQ,CAACi7C,gBAAT,CAA0BjM,GAAG,CAACl+B,KAAJ,GAAY,CAAtC,EAAyC,CAACk+B,GAAG,CAACrvB,GAAJ,GAAUqvB,GAAG,CAACnF,MAAf,IAAyB,CAAlE,CAAjB,GACJ7pC,QAAQ,CAACi7C,gBAAT,CAA0B,CAACjM,GAAG,CAACl+B,KAAJ,GAAYk+B,GAAG,CAACp+B,IAAjB,IAAyB,CAAnD,EAAsDo+B,GAAG,CAACnF,MAAJ,GAAa,CAAnE,CADN;AAEA,UAAI7jB,GAAG,IAAI80B,GAAX,EAAgBA,GAAG,CAACl+C,KAAJ,CAAUi+C,aAAV,GAA0B,MAA1B,CAAhB,KACKE,KAAK,CAAC9xB,GAAN,CAAU,IAAV,EAAgB+xB,YAAhB;AACN;;AACDD,IAAAA,KAAK,CAAC9xB,GAAN,CAAU,IAAV,EAAgB+xB,YAAhB;AACD;;AAED1qC,EAAAA,KAAK,GAAG;AACN,QAAIyV,MAAM,GAAG,KAAK+zB,KAAL,CAAWrxC,UAAxB;AACAsd,IAAAA,MAAM,CAAC7a,WAAP,CAAmB,KAAK4uC,KAAxB;AACA/zB,IAAAA,MAAM,CAAC7a,WAAP,CAAmB,KAAK2uC,IAAxB;AACD;;AAjGoB;;AAoGvB,MAAMqB,cAAN,CAAqB;AACnBf,EAAAA,MAAM,GAAG;AAAE,WAAO;AAACtQ,MAAAA,MAAM,EAAE,CAAT;AAAY/4B,MAAAA,KAAK,EAAE;AAAnB,KAAP;AAA8B;;AACzC0mC,EAAAA,aAAa,GAAG;;AAChBsB,EAAAA,YAAY,GAAG;;AACfxoC,EAAAA,KAAK,GAAG;;AAJW;;AAOrB,AAAO,SAAS6qC,gBAAT,CAA0B3sB,EAA1B,EAA8BsB,OAA9B,EAAuC;AAC5C,MAAI,CAACA,OAAL,EAAcA,OAAO,GAAGupB,oBAAoB,CAAC7qB,EAAD,CAA9B;AACd,MAAI4sB,UAAU,GAAG5sB,EAAE,CAACplB,OAAH,CAAW6/B,QAA5B;AAAA,MAAsCoS,WAAW,GAAG7sB,EAAE,CAACplB,OAAH,CAAWggC,SAA/D;AACAkS,EAAAA,qBAAqB,CAAC9sB,EAAD,EAAKsB,OAAL,CAArB;;AACA,OAAK,IAAItgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAAJ,IAAS4rC,UAAU,IAAI5sB,EAAE,CAACplB,OAAH,CAAW6/B,QAAlC,IAA8CoS,WAAW,IAAI7sB,EAAE,CAACplB,OAAH,CAAWggC,SAAxF,EAAmG55B,CAAC,EAApG,EAAwG;AACtG,QAAI4rC,UAAU,IAAI5sB,EAAE,CAACplB,OAAH,CAAW6/B,QAAzB,IAAqCza,EAAE,CAAC5S,OAAH,CAAW4tB,YAApD,EACEsM,uBAAuB,CAACtnB,EAAD,CAAvB;AACF8sB,IAAAA,qBAAqB,CAAC9sB,EAAD,EAAK6qB,oBAAoB,CAAC7qB,EAAD,CAAzB,CAArB;AACA4sB,IAAAA,UAAU,GAAG5sB,EAAE,CAACplB,OAAH,CAAW6/B,QAAxB;AAAkCoS,IAAAA,WAAW,GAAG7sB,EAAE,CAACplB,OAAH,CAAWggC,SAAzB;AACnC;AACF;AAGD;;AACA,SAASkS,qBAAT,CAA+B9sB,EAA/B,EAAmCsB,OAAnC,EAA4C;AAC1C,MAAI6P,CAAC,GAAGnR,EAAE,CAACplB,OAAX;AACA,MAAImyC,KAAK,GAAG5b,CAAC,CAACuZ,UAAF,CAAaiB,MAAb,CAAoBrqB,OAApB,CAAZ;AAEA6P,EAAAA,CAAC,CAACsI,KAAF,CAAQrrC,KAAR,CAAcgsC,YAAd,GAA6B,CAACjJ,CAAC,CAACsJ,QAAF,GAAasS,KAAK,CAACzqC,KAApB,IAA6B,IAA1D;AACA6uB,EAAAA,CAAC,CAACsI,KAAF,CAAQrrC,KAAR,CAAc4+C,aAAd,GAA8B,CAAC7b,CAAC,CAACyJ,SAAF,GAAcmS,KAAK,CAAC1R,MAArB,IAA+B,IAA7D;AACAlK,EAAAA,CAAC,CAAC8b,YAAF,CAAe7+C,KAAf,CAAqB8+C,YAArB,GAAoCH,KAAK,CAAC1R,MAAN,GAAe,sBAAnD;;AAEA,MAAI0R,KAAK,CAACzqC,KAAN,IAAeyqC,KAAK,CAAC1R,MAAzB,EAAiC;AAC/BlK,IAAAA,CAAC,CAACgc,eAAF,CAAkB/+C,KAAlB,CAAwBwM,OAAxB,GAAkC,OAAlC;AACAu2B,IAAAA,CAAC,CAACgc,eAAF,CAAkB/+C,KAAlB,CAAwBd,MAAxB,GAAiCy/C,KAAK,CAAC1R,MAAN,GAAe,IAAhD;AACAlK,IAAAA,CAAC,CAACgc,eAAF,CAAkB/+C,KAAlB,CAAwBhB,KAAxB,GAAgC2/C,KAAK,CAACzqC,KAAN,GAAc,IAA9C;AACD,GAJD,MAIO6uB,CAAC,CAACgc,eAAF,CAAkB/+C,KAAlB,CAAwBwM,OAAxB,GAAkC,EAAlC;;AACP,MAAImyC,KAAK,CAAC1R,MAAN,IAAgBrb,EAAE,CAAC5S,OAAH,CAAWggC,0BAA3B,IAAyDptB,EAAE,CAAC5S,OAAH,CAAWoqB,WAAxE,EAAqF;AACnFrG,IAAAA,CAAC,CAACkc,YAAF,CAAej/C,KAAf,CAAqBwM,OAArB,GAA+B,OAA/B;AACAu2B,IAAAA,CAAC,CAACkc,YAAF,CAAej/C,KAAf,CAAqBd,MAArB,GAA8By/C,KAAK,CAAC1R,MAAN,GAAe,IAA7C;AACAlK,IAAAA,CAAC,CAACkc,YAAF,CAAej/C,KAAf,CAAqBhB,KAArB,GAA6Bk0B,OAAO,CAAC4W,WAAR,GAAsB,IAAnD;AACD,GAJD,MAIO/G,CAAC,CAACkc,YAAF,CAAej/C,KAAf,CAAqBwM,OAArB,GAA+B,EAA/B;AACR;;AAED,AAAO,IAAI0yC,cAAc,GAAG;AAAC,YAAUlC,gBAAX;AAA6B,UAAQsB;AAArC,CAArB;AAEP,AAAO,SAASa,cAAT,CAAwBvtB,EAAxB,EAA4B;AACjC,MAAIA,EAAE,CAACplB,OAAH,CAAW8vC,UAAf,EAA2B;AACzB1qB,IAAAA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB5oC,KAAtB;AACA,QAAIke,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB5xB,QAA1B,EACEjC,OAAO,CAACmJ,EAAE,CAACplB,OAAH,CAAW2+B,OAAZ,EAAqBvZ,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB5xB,QAA3C,CAAP;AACH;;AAEDkH,EAAAA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,GAAwB,IAAI4C,cAAc,CAACttB,EAAE,CAAC5S,OAAH,CAAWogC,cAAZ,CAAlB,CAA8C12B,IAAI,IAAI;AAC5EkJ,IAAAA,EAAE,CAACplB,OAAH,CAAW2+B,OAAX,CAAmBvC,YAAnB,CAAgClgB,IAAhC,EAAsCkJ,EAAE,CAACplB,OAAH,CAAWuyC,eAAjD,EAD4E;;AAG5E1tB,IAAAA,EAAE,CAAC3I,IAAD,EAAO,WAAP,EAAoB,MAAM;AAC1B,UAAIkJ,EAAE,CAAC+D,KAAH,CAAS3Y,OAAb,EAAsB1L,UAAU,CAAC,MAAMsgB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBhgC,KAAjB,EAAP,EAAiC,CAAjC,CAAV;AACvB,KAFC,CAAF;AAGA6iB,IAAAA,IAAI,CAAC1lB,YAAL,CAAkB,gBAAlB,EAAoC,MAApC;AACD,GAPuB,EAOrB,CAACiqB,GAAD,EAAMoyB,IAAN,KAAe;AAChB,QAAIA,IAAI,IAAI,YAAZ,EAA0BzE,aAAa,CAAChpB,EAAD,EAAK3E,GAAL,CAAb,CAA1B,KACK0tB,eAAe,CAAC/oB,EAAD,EAAK3E,GAAL,CAAf;AACN,GAVuB,EAUrB2E,EAVqB,CAAxB;AAWA,MAAIA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB5xB,QAA1B,EACEA,QAAQ,CAACkH,EAAE,CAACplB,OAAH,CAAW2+B,OAAZ,EAAqBvZ,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB5xB,QAA3C,CAAR;AACH;;ACjLD;AACA;AACA;AACA;;AAEA,IAAI40B,QAAQ,GAAG,CAAf;;AAEA,AAAO,SAASC,cAAT,CAAwB3tB,EAAxB,EAA4B;AACjCA,EAAAA,EAAE,CAACO,KAAH,GAAW;AACTP,IAAAA,EAAE,EAAEA,EADK;AAET0iB,IAAAA,WAAW,EAAE,KAFJ;AAEgB;AACzBmK,IAAAA,WAAW,EAAE7sB,EAAE,CAACgG,GAAH,CAAO14B,MAHX;AAGmB;AAC5B0uC,IAAAA,WAAW,EAAE,KAJJ;AAIgB;AACzB4R,IAAAA,WAAW,EAAE,CALJ;AAKa;AACtBC,IAAAA,MAAM,EAAE,KANC;AAMgB;AACzBC,IAAAA,UAAU,EAAE,IAPH;AAOgB;AACzBttB,IAAAA,sBAAsB,EAAE,IARf;AAQqB;AAC9BmV,IAAAA,oBAAoB,EAAE,CATb;AASgB;AACzBoY,IAAAA,gBAAgB,EAAE,KAVT;AAUgB;AACzBC,IAAAA,aAAa,EAAE,KAXN;AAWgB;AACzB18B,IAAAA,UAAU,EAAE,IAZH;AAYSle,IAAAA,SAAS,EAAE,IAZpB;AAY0B;AACnC22C,IAAAA,WAAW,EAAE,IAbJ;AAagB;AACzB91C,IAAAA,KAAK,EAAE,KAdE;AAeTsJ,IAAAA,EAAE,EAAE,EAAEmwC,QAfG;AAegB;AACzBO,IAAAA,UAAU,EAAE,IAhBH;;AAAA,GAAX;AAkBA7Y,EAAAA,aAAa,CAACpV,EAAE,CAACO,KAAJ,CAAb;AACD;;AAGD,AAAO,SAAS2tB,YAAT,CAAsBluB,EAAtB,EAA0B;AAC/B,MAAIyM,EAAE,GAAGzM,EAAE,CAACO,KAAZ;AACA,MAAIkM,EAAJ,EAAQmJ,eAAe,CAACnJ,EAAD,EAAKgJ,KAAK,IAAI;AACnC,SAAK,IAAIz0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGy0B,KAAK,CAACJ,GAAN,CAAUplC,MAA9B,EAAsC+Q,CAAC,EAAvC,EACEy0B,KAAK,CAACJ,GAAN,CAAUr0B,CAAV,EAAagf,EAAb,CAAgBO,KAAhB,GAAwB,IAAxB;;AACF4tB,IAAAA,aAAa,CAAC1Y,KAAD,CAAb;AACD,GAJsB,CAAf;AAKT;AAGD;;AACA,SAAS0Y,aAAT,CAAuB1Y,KAAvB,EAA8B;AAC5B,MAAIJ,GAAG,GAAGI,KAAK,CAACJ,GAAhB;;AACA,OAAK,IAAIr0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq0B,GAAG,CAACplC,MAAxB,EAAgC+Q,CAAC,EAAjC;AACEotC,EAAAA,eAAe,CAAC/Y,GAAG,CAACr0B,CAAD,CAAJ,CAAf;;AACF,OAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq0B,GAAG,CAACplC,MAAxB,EAAgC+Q,CAAC,EAAjC;AACEqtC,EAAAA,eAAe,CAAChZ,GAAG,CAACr0B,CAAD,CAAJ,CAAf;;AACF,OAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq0B,GAAG,CAACplC,MAAxB,EAAgC+Q,CAAC,EAAjC;AACEstC,EAAAA,eAAe,CAACjZ,GAAG,CAACr0B,CAAD,CAAJ,CAAf;;AACF,OAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq0B,GAAG,CAACplC,MAAxB,EAAgC+Q,CAAC,EAAjC;AACEutC,EAAAA,eAAe,CAAClZ,GAAG,CAACr0B,CAAD,CAAJ,CAAf;;AACF,OAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq0B,GAAG,CAACplC,MAAxB,EAAgC+Q,CAAC,EAAjC;AACEwtC,EAAAA,mBAAmB,CAACnZ,GAAG,CAACr0B,CAAD,CAAJ,CAAnB;AACH;;AAED,SAASotC,eAAT,CAAyB3hB,EAAzB,EAA6B;AAC3B,MAAIzM,EAAE,GAAGyM,EAAE,CAACzM,EAAZ;AAAA,MAAgBplB,OAAO,GAAGolB,EAAE,CAACplB,OAA7B;AACA6zC,EAAAA,mBAAmB,CAACzuB,EAAD,CAAnB;AACA,MAAIyM,EAAE,CAACuhB,aAAP,EAAsB9c,WAAW,CAAClR,EAAD,CAAX;AAEtByM,EAAAA,EAAE,CAACiiB,UAAH,GAAgBjiB,EAAE,CAACiW,WAAH,IAAkBjW,EAAE,CAACuP,WAArB,IAAoCvP,EAAE,CAACr5B,SAAH,IAAgB,IAApD,IACdq5B,EAAE,CAACsd,WAAH,KAAmBtd,EAAE,CAACsd,WAAH,CAAez6B,IAAf,CAAoBiQ,IAApB,GAA2B3kB,OAAO,CAAC0vB,QAAnC,IACAmC,EAAE,CAACsd,WAAH,CAAe5sB,EAAf,CAAkBoC,IAAlB,IAA0B3kB,OAAO,CAAC2vB,MADrD,CADc,IAGd3vB,OAAO,CAAC02B,cAAR,IAA0BtR,EAAE,CAAC5S,OAAH,CAAW4tB,YAHvC;AAIAvO,EAAAA,EAAE,CAACkf,MAAH,GAAYlf,EAAE,CAACiiB,UAAH,IACV,IAAIC,aAAJ,CAAkB3uB,EAAlB,EAAsByM,EAAE,CAACiiB,UAAH,IAAiB;AAACv9B,IAAAA,GAAG,EAAEsb,EAAE,CAACr5B,SAAT;AAAoB00C,IAAAA,MAAM,EAAErb,EAAE,CAACsd;AAA/B,GAAvC,EAAoFtd,EAAE,CAACuP,WAAvF,CADF;AAED;;AAED,SAASqS,eAAT,CAAyB5hB,EAAzB,EAA6B;AAC3BA,EAAAA,EAAE,CAACmiB,cAAH,GAAoBniB,EAAE,CAACiiB,UAAH,IAAiBG,qBAAqB,CAACpiB,EAAE,CAACzM,EAAJ,EAAQyM,EAAE,CAACkf,MAAX,CAA1D;AACD;;AAED,SAAS2C,eAAT,CAAyB7hB,EAAzB,EAA6B;AAC3B,MAAIzM,EAAE,GAAGyM,EAAE,CAACzM,EAAZ;AAAA,MAAgBplB,OAAO,GAAGolB,EAAE,CAACplB,OAA7B;AACA,MAAI6xB,EAAE,CAACmiB,cAAP,EAAuBtH,uBAAuB,CAACtnB,EAAD,CAAvB;AAEvByM,EAAAA,EAAE,CAACqiB,UAAH,GAAgBjE,oBAAoB,CAAC7qB,EAAD,CAApC,CAJ2B;AAO3B;AACA;;AACA,MAAIplB,OAAO,CAAC02B,cAAR,IAA0B,CAACtR,EAAE,CAAC5S,OAAH,CAAW4tB,YAA1C,EAAwD;AACtDvO,IAAAA,EAAE,CAACsiB,aAAH,GAAmBtT,WAAW,CAACzb,EAAD,EAAKplB,OAAO,CAACw2B,OAAb,EAAsBx2B,OAAO,CAACw2B,OAAR,CAAgBj2B,IAAhB,CAAqBlL,MAA3C,CAAX,CAA8DmS,IAA9D,GAAqE,CAAxF;AACA4d,IAAAA,EAAE,CAACplB,OAAH,CAAWgqC,UAAX,GAAwBnY,EAAE,CAACsiB,aAA3B;AACAtiB,IAAAA,EAAE,CAACqiB,UAAH,CAAcr9B,WAAd,GACE1Y,IAAI,CAAC4kB,GAAL,CAAS/iB,OAAO,CAAC4/B,QAAR,CAAiB9oB,WAA1B,EAAuC9W,OAAO,CAAC6+B,KAAR,CAAcgI,UAAd,GAA2BhV,EAAE,CAACsiB,aAA9B,GAA8C1U,SAAS,CAACra,EAAD,CAAvD,GAA8DA,EAAE,CAACplB,OAAH,CAAW6/B,QAAhH,CADF;AAEAhO,IAAAA,EAAE,CAACuiB,aAAH,GAAmBj2C,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY/iB,OAAO,CAAC6+B,KAAR,CAAcgI,UAAd,GAA2BhV,EAAE,CAACsiB,aAA9B,GAA8CxU,YAAY,CAACva,EAAD,CAAtE,CAAnB;AACD;;AAED,MAAIyM,EAAE,CAACmiB,cAAH,IAAqBniB,EAAE,CAACshB,gBAA5B,EACEthB,EAAE,CAACwiB,iBAAH,GAAuBr0C,OAAO,CAACq5B,KAAR,CAAcuP,gBAAd,EAAvB;AACH;;AAED,SAAS+K,eAAT,CAAyB9hB,EAAzB,EAA6B;AAC3B,MAAIzM,EAAE,GAAGyM,EAAE,CAACzM,EAAZ;;AAEA,MAAIyM,EAAE,CAACsiB,aAAH,IAAoB,IAAxB,EAA8B;AAC5B/uB,IAAAA,EAAE,CAACplB,OAAH,CAAW6+B,KAAX,CAAiBrrC,KAAjB,CAAuBs9C,QAAvB,GAAkCjf,EAAE,CAACsiB,aAAH,GAAmB,IAArD;AACA,QAAItiB,EAAE,CAACuiB,aAAH,GAAmBhvB,EAAE,CAACgG,GAAH,CAAO1U,UAA9B,EACE03B,aAAa,CAAChpB,EAAD,EAAKjnB,IAAI,CAACyiB,GAAL,CAASwE,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBlpB,UAA7B,EAAyCmb,EAAE,CAACuiB,aAA5C,CAAL,EAAiE,IAAjE,CAAb;AACFhvB,IAAAA,EAAE,CAACplB,OAAH,CAAW02B,cAAX,GAA4B,KAA5B;AACD;;AAED,MAAI4d,SAAS,GAAGziB,EAAE,CAACx4B,KAAH,IAAYw4B,EAAE,CAACx4B,KAAH,IAAY0kB,SAAS,EAAjD;AACA,MAAI8T,EAAE,CAACwiB,iBAAP,EACEjvB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBsP,aAAjB,CAA+B9W,EAAE,CAACwiB,iBAAlC,EAAqDC,SAArD;AACF,MAAIziB,EAAE,CAACmiB,cAAH,IAAqBniB,EAAE,CAACogB,WAAH,IAAkB7sB,EAAE,CAACgG,GAAH,CAAO14B,MAAlD,EACEq/C,gBAAgB,CAAC3sB,EAAD,EAAKyM,EAAE,CAACqiB,UAAR,CAAhB;AACF,MAAIriB,EAAE,CAACmiB,cAAP,EACEO,iBAAiB,CAACnvB,EAAD,EAAKyM,EAAE,CAACqiB,UAAR,CAAjB;AAEF,MAAIriB,EAAE,CAACshB,gBAAP,EAAyBzH,YAAY,CAACtmB,EAAD,CAAZ;AAEzB,MAAIA,EAAE,CAAC+D,KAAH,CAAS3Y,OAAT,IAAoBqhB,EAAE,CAACmhB,WAA3B,EACE5tB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBpnB,KAAjB,CAAuB4f,EAAE,CAACohB,MAA1B;AACF,MAAIqB,SAAJ,EAAenI,WAAW,CAACta,EAAE,CAACzM,EAAJ,CAAX;AAChB;;AAED,SAASwuB,mBAAT,CAA6B/hB,EAA7B,EAAiC;AAC/B,MAAIzM,EAAE,GAAGyM,EAAE,CAACzM,EAAZ;AAAA,MAAgBplB,OAAO,GAAGolB,EAAE,CAACplB,OAA7B;AAAA,MAAsCorB,GAAG,GAAGhG,EAAE,CAACgG,GAA/C;AAEA,MAAIyG,EAAE,CAACmiB,cAAP,EAAuBQ,iBAAiB,CAACpvB,EAAD,EAAKyM,EAAE,CAACkf,MAAR,CAAjB,CAHQ;;AAM/B,MAAI/wC,OAAO,CAACy0C,WAAR,IAAuB,IAAvB,KAAgC5iB,EAAE,CAACr5B,SAAH,IAAgB,IAAhB,IAAwBq5B,EAAE,CAACnb,UAAH,IAAiB,IAAzC,IAAiDmb,EAAE,CAACsd,WAApF,CAAJ,EACEnvC,OAAO,CAACy0C,WAAR,GAAsBz0C,OAAO,CAAC00C,WAAR,GAAsB,IAA5C,CAP6B;;AAU/B,MAAI7iB,EAAE,CAACr5B,SAAH,IAAgB,IAApB,EAA0Bk3C,YAAY,CAACtqB,EAAD,EAAKyM,EAAE,CAACr5B,SAAR,EAAmBq5B,EAAE,CAAC+d,WAAtB,CAAZ;AAE1B,MAAI/d,EAAE,CAACnb,UAAH,IAAiB,IAArB,EAA2B03B,aAAa,CAAChpB,EAAD,EAAKyM,EAAE,CAACnb,UAAR,EAAoB,IAApB,EAA0B,IAA1B,CAAb,CAZI;;AAc/B,MAAImb,EAAE,CAACsd,WAAP,EAAoB;AAClB,QAAIjP,IAAI,GAAGwN,iBAAiB,CAACtoB,EAAD,EAAK6H,OAAO,CAAC7B,GAAD,EAAMyG,EAAE,CAACsd,WAAH,CAAez6B,IAArB,CAAZ,EACCuY,OAAO,CAAC7B,GAAD,EAAMyG,EAAE,CAACsd,WAAH,CAAe5sB,EAArB,CADR,EACkCsP,EAAE,CAACsd,WAAH,CAAexB,MADjD,CAA5B;AAEAN,IAAAA,iBAAiB,CAACjoB,EAAD,EAAK8a,IAAL,CAAjB;AACD,GAlB8B;AAqB/B;;;AACA,MAAI/F,MAAM,GAAGtI,EAAE,CAAC8iB,kBAAhB;AAAA,MAAoCC,QAAQ,GAAG/iB,EAAE,CAACgjB,oBAAlD;AACA,MAAI1a,MAAJ,EAAY,KAAK,IAAI/zB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+zB,MAAM,CAAC9kC,MAA3B,EAAmC,EAAE+Q,CAArC,EACV,IAAI,CAAC+zB,MAAM,CAAC/zB,CAAD,CAAN,CAAUmlB,KAAV,CAAgBl2B,MAArB,EAA6B6vB,MAAM,CAACiV,MAAM,CAAC/zB,CAAD,CAAP,EAAY,MAAZ,CAAN;AAC/B,MAAIwuC,QAAJ,EAAc,KAAK,IAAIxuC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwuC,QAAQ,CAACv/C,MAA7B,EAAqC,EAAE+Q,CAAvC,EACZ,IAAIwuC,QAAQ,CAACxuC,CAAD,CAAR,CAAYmlB,KAAZ,CAAkBl2B,MAAtB,EAA8B6vB,MAAM,CAAC0vB,QAAQ,CAACxuC,CAAD,CAAT,EAAc,QAAd,CAAN;AAEhC,MAAIpG,OAAO,CAAC2+B,OAAR,CAAgBv8B,YAApB,EACEgpB,GAAG,CAAC5yB,SAAJ,GAAgB4sB,EAAE,CAACplB,OAAH,CAAW4/B,QAAX,CAAoBpnC,SAApC,CA7B6B;;AAgC/B,MAAIq5B,EAAE,CAACqhB,UAAP,EACEhuB,MAAM,CAACE,EAAD,EAAK,SAAL,EAAgBA,EAAhB,EAAoByM,EAAE,CAACqhB,UAAvB,CAAN;AACF,MAAIrhB,EAAE,CAACkf,MAAP,EACElf,EAAE,CAACkf,MAAH,CAAU+D,MAAV;AACH;;;AAGD,AAAO,SAASC,OAAT,CAAiB3vB,EAAjB,EAAqBzG,CAArB,EAAwB;AAC7B,MAAIyG,EAAE,CAACO,KAAP,EAAc,OAAOhH,CAAC,EAAR;AACdo0B,EAAAA,cAAc,CAAC3tB,EAAD,CAAd;;AACA,MAAI;AAAE,WAAOzG,CAAC,EAAR;AAAY,GAAlB,SACQ;AAAE20B,IAAAA,YAAY,CAACluB,EAAD,CAAZ;AAAkB;AAC7B;;AAED,AAAO,SAAS4vB,SAAT,CAAmB5vB,EAAnB,EAAuBzG,CAAvB,EAA0B;AAC/B,SAAO,YAAW;AAChB,QAAIyG,EAAE,CAACO,KAAP,EAAc,OAAOhH,CAAC,CAACC,KAAF,CAAQwG,EAAR,EAAYlZ,SAAZ,CAAP;AACd6mC,IAAAA,cAAc,CAAC3tB,EAAD,CAAd;;AACA,QAAI;AAAE,aAAOzG,CAAC,CAACC,KAAF,CAAQwG,EAAR,EAAYlZ,SAAZ,CAAP;AAA+B,KAArC,SACQ;AAAEonC,MAAAA,YAAY,CAACluB,EAAD,CAAZ;AAAkB;AAC7B,GALD;AAMD;AAED;;AACA,AAAO,SAAS6vB,QAAT,CAAkBt2B,CAAlB,EAAqB;AAC1B,SAAO,YAAW;AAChB,QAAI,KAAKgH,KAAT,EAAgB,OAAOhH,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAc1S,SAAd,CAAP;AAChB6mC,IAAAA,cAAc,CAAC,IAAD,CAAd;;AACA,QAAI;AAAE,aAAOp0B,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAc1S,SAAd,CAAP;AAAiC,KAAvC,SACQ;AAAEonC,MAAAA,YAAY,CAAC,IAAD,CAAZ;AAAoB;AAC/B,GALD;AAMD;AACD,AAAO,SAAS4B,WAAT,CAAqBv2B,CAArB,EAAwB;AAC7B,SAAO,YAAW;AAChB,QAAIyG,EAAE,GAAG,KAAKA,EAAd;AACA,QAAI,CAACA,EAAD,IAAOA,EAAE,CAACO,KAAd,EAAqB,OAAOhH,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAc1S,SAAd,CAAP;AACrB6mC,IAAAA,cAAc,CAAC3tB,EAAD,CAAd;;AACA,QAAI;AAAE,aAAOzG,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAc1S,SAAd,CAAP;AAAiC,KAAvC,SACQ;AAAEonC,MAAAA,YAAY,CAACluB,EAAD,CAAZ;AAAkB;AAC7B,GAND;AAOD;;ACpMM,SAASuqB,WAAT,CAAqBvqB,EAArB,EAAyB1F,IAAzB,EAA+B;AACpC,MAAI0F,EAAE,CAACgG,GAAH,CAAOiE,iBAAP,GAA2BjK,EAAE,CAACplB,OAAH,CAAW2vB,MAA1C,EACEvK,EAAE,CAAC+D,KAAH,CAASgsB,SAAT,CAAmBt1B,GAAnB,CAAuBH,IAAvB,EAA6BjgB,IAAI,CAAC21C,eAAD,EAAkBhwB,EAAlB,CAAjC;AACH;;AAED,SAASgwB,eAAT,CAAyBhwB,EAAzB,EAA6B;AAC3B,MAAIgG,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AACA,MAAIA,GAAG,CAACiE,iBAAJ,IAAyBjK,EAAE,CAACplB,OAAH,CAAW2vB,MAAxC,EAAgD;AAChD,MAAI1nB,GAAG,GAAG,CAAC,IAAIhK,IAAJ,EAAD,GAAYmnB,EAAE,CAAC5S,OAAH,CAAW6iC,QAAjC;AACA,MAAIrnB,OAAO,GAAGgB,gBAAgB,CAAC5J,EAAD,EAAKgG,GAAG,CAACiE,iBAAT,CAA9B;AACA,MAAIimB,YAAY,GAAG,EAAnB;AAEAlqB,EAAAA,GAAG,CAACQ,IAAJ,CAASoC,OAAO,CAACrJ,IAAjB,EAAuBxmB,IAAI,CAACyiB,GAAL,CAASwK,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAzB,EAA+BktB,EAAE,CAACplB,OAAH,CAAW2vB,MAAX,GAAoB,GAAnD,CAAvB,EAAgFhL,IAAI,IAAI;AACtF,QAAIqJ,OAAO,CAACrJ,IAAR,IAAgBS,EAAE,CAACplB,OAAH,CAAW0vB,QAA/B,EAAyC;AAAE;AACzC,UAAI6lB,SAAS,GAAG5wB,IAAI,CAACzpB,MAArB;AACA,UAAI+zB,UAAU,GAAGtK,IAAI,CAACpkB,IAAL,CAAUlL,MAAV,GAAmB+vB,EAAE,CAAC5S,OAAH,CAAW0c,kBAA9B,GAAmDhG,SAAS,CAACkC,GAAG,CAAChD,IAAL,EAAW4F,OAAO,CAAC7E,KAAnB,CAA5D,GAAwF,IAAzG;AACA,UAAIqsB,WAAW,GAAGznB,aAAa,CAAC3I,EAAD,EAAKT,IAAL,EAAWqJ,OAAX,EAAoB,IAApB,CAA/B;AACA,UAAIiB,UAAJ,EAAgBjB,OAAO,CAAC7E,KAAR,GAAgB8F,UAAhB;AAChBtK,MAAAA,IAAI,CAACzpB,MAAL,GAAcs6C,WAAW,CAACt6C,MAA1B;AACA,UAAIu6C,MAAM,GAAG9wB,IAAI,CAACyK,YAAlB;AAAA,UAAgCsmB,MAAM,GAAGF,WAAW,CAAC7mB,OAArD;AACA,UAAI+mB,MAAJ,EAAY/wB,IAAI,CAACyK,YAAL,GAAoBsmB,MAApB,CAAZ,KACK,IAAID,MAAJ,EAAY9wB,IAAI,CAACyK,YAAL,GAAoB,IAApB;AACjB,UAAIumB,QAAQ,GAAG,CAACJ,SAAD,IAAcA,SAAS,CAAClgD,MAAV,IAAoBsvB,IAAI,CAACzpB,MAAL,CAAY7F,MAA9C,IACbogD,MAAM,IAAIC,MAAV,KAAqB,CAACD,MAAD,IAAW,CAACC,MAAZ,IAAsBD,MAAM,CAAC7mB,OAAP,IAAkB8mB,MAAM,CAAC9mB,OAA/C,IAA0D6mB,MAAM,CAAC5mB,SAAP,IAAoB6mB,MAAM,CAAC7mB,SAA1G,CADF;;AAEA,WAAK,IAAIzoB,CAAC,GAAG,CAAb,EAAgB,CAACuvC,QAAD,IAAavvC,CAAC,GAAGmvC,SAAS,CAAClgD,MAA3C,EAAmD,EAAE+Q,CAArD,EAAwDuvC,QAAQ,GAAGJ,SAAS,CAACnvC,CAAD,CAAT,IAAgBue,IAAI,CAACzpB,MAAL,CAAYkL,CAAZ,CAA3B;;AACxD,UAAIuvC,QAAJ,EAAcL,YAAY,CAAC/vC,IAAb,CAAkByoB,OAAO,CAACrJ,IAA1B;AACdA,MAAAA,IAAI,CAACwK,UAAL,GAAkBnB,OAAO,CAACH,IAAR,EAAlB;AACAG,MAAAA,OAAO,CAACN,QAAR;AACD,KAfD,MAeO;AACL,UAAI/I,IAAI,CAACpkB,IAAL,CAAUlL,MAAV,IAAoB+vB,EAAE,CAAC5S,OAAH,CAAW0c,kBAAnC,EACEO,WAAW,CAACrK,EAAD,EAAKT,IAAI,CAACpkB,IAAV,EAAgBytB,OAAhB,CAAX;AACFrJ,MAAAA,IAAI,CAACwK,UAAL,GAAkBnB,OAAO,CAACrJ,IAAR,GAAe,CAAf,IAAoB,CAApB,GAAwBqJ,OAAO,CAACH,IAAR,EAAxB,GAAyC,IAA3D;AACAG,MAAAA,OAAO,CAACN,QAAR;AACD;;AACD,QAAI,CAAC,IAAIzvB,IAAJ,EAAD,GAAYgK,GAAhB,EAAqB;AACnB0nC,MAAAA,WAAW,CAACvqB,EAAD,EAAKA,EAAE,CAAC5S,OAAH,CAAWojC,SAAhB,CAAX;AACA,aAAO,IAAP;AACD;AACF,GA1BD;AA2BAxqB,EAAAA,GAAG,CAACiE,iBAAJ,GAAwBrB,OAAO,CAACrJ,IAAhC;AACAyG,EAAAA,GAAG,CAACkE,YAAJ,GAAmBnxB,IAAI,CAAC4kB,GAAL,CAASqI,GAAG,CAACkE,YAAb,EAA2BtB,OAAO,CAACrJ,IAAnC,CAAnB;AACA,MAAI2wB,YAAY,CAACjgD,MAAjB,EAAyB0/C,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AACzC,SAAK,IAAIhf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkvC,YAAY,CAACjgD,MAAjC,EAAyC+Q,CAAC,EAA1C,EACEgiC,aAAa,CAAChjB,EAAD,EAAKkwB,YAAY,CAAClvC,CAAD,CAAjB,EAAsB,MAAtB,CAAb;AACH,GAH+B,CAAP;AAI1B;;AClCM,MAAM2tC,aAAN,CAAoB;AACzB35C,EAAAA,WAAW,CAACgrB,EAAD,EAAK6nB,QAAL,EAAe4I,KAAf,EAAsB;AAC/B,QAAI71C,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAEA,SAAKitC,QAAL,GAAgBA,QAAhB,CAH+B;;AAK/B,SAAK6I,OAAL,GAAe9I,YAAY,CAAChtC,OAAD,EAAUolB,EAAE,CAACgG,GAAb,EAAkB6hB,QAAlB,CAA3B;AACA,SAAK8I,cAAL,GAAsB,CAAC/1C,OAAO,CAAC2+B,OAAR,CAAgBhY,WAAvC;AACA,SAAKqvB,aAAL,GAAqBh2C,OAAO,CAAC2+B,OAAR,CAAgBoB,YAArC;AACA,SAAK3B,YAAL,GAAoBp+B,OAAO,CAAC2+B,OAAR,CAAgB7nB,WAApC;AACA,SAAKm/B,eAAL,GAAuBtW,YAAY,CAACva,EAAD,CAAnC;AACA,SAAKywB,KAAL,GAAaA,KAAb;AACA,SAAKra,IAAL,GAAY2F,aAAa,CAAC/b,EAAD,CAAzB;AACA,SAAK8wB,MAAL,GAAc,EAAd;AACD;;AAEDhxB,EAAAA,MAAM,CAACJ,OAAD,EAAUzzB,IAAV,EAAgB;AACpB,QAAIw0B,UAAU,CAACf,OAAD,EAAUzzB,IAAV,CAAd,EACE,KAAK6kD,MAAL,CAAY3wC,IAAZ,CAAiB2G,SAAjB;AACH;;AACD4oC,EAAAA,MAAM,GAAG;AACP,SAAK,IAAI1uC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8vC,MAAL,CAAY7gD,MAAhC,EAAwC+Q,CAAC,EAAzC,EACE8e,MAAM,CAACtG,KAAP,CAAa,IAAb,EAAmB,KAAKs3B,MAAL,CAAY9vC,CAAZ,CAAnB;AACH;;AAvBwB;AA0B3B,AAAO,SAASytC,mBAAT,CAA6BzuB,EAA7B,EAAiC;AACtC,MAAIplB,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;;AACA,MAAI,CAACA,OAAO,CAACm2C,iBAAT,IAA8Bn2C,OAAO,CAAC4/B,QAAR,CAAiBjZ,WAAnD,EAAgE;AAC9D3mB,IAAAA,OAAO,CAAC0/B,cAAR,GAAyB1/B,OAAO,CAAC4/B,QAAR,CAAiBjZ,WAAjB,GAA+B3mB,OAAO,CAAC4/B,QAAR,CAAiB9oB,WAAzE;AACA9W,IAAAA,OAAO,CAACqyC,YAAR,CAAqB7+C,KAArB,CAA2Bd,MAA3B,GAAoC+sC,SAAS,CAACra,EAAD,CAAT,GAAgB,IAApD;AACAplB,IAAAA,OAAO,CAAC6+B,KAAR,CAAcrrC,KAAd,CAAoB4iD,YAApB,GAAmC,CAACp2C,OAAO,CAAC0/B,cAAT,GAA0B,IAA7D;AACA1/B,IAAAA,OAAO,CAAC6+B,KAAR,CAAcrrC,KAAd,CAAoB6iD,gBAApB,GAAuC5W,SAAS,CAACra,EAAD,CAAT,GAAgB,IAAvD;AACAplB,IAAAA,OAAO,CAACm2C,iBAAR,GAA4B,IAA5B;AACD;AACF;;AAED,SAASG,iBAAT,CAA2BlxB,EAA3B,EAA+B;AAC7B,MAAIA,EAAE,CAAC6mB,QAAH,EAAJ,EAAmB,OAAO,IAAP;AACnB,MAAIsK,MAAM,GAAGx4B,SAAS,EAAtB;AACA,MAAI,CAACw4B,MAAD,IAAW,CAAC34B,QAAQ,CAACwH,EAAE,CAACplB,OAAH,CAAW4sC,OAAZ,EAAqB2J,MAArB,CAAxB,EAAsD,OAAO,IAAP;AACtD,MAAIj1C,MAAM,GAAG;AAACyc,IAAAA,SAAS,EAAEw4B;AAAZ,GAAb;;AACA,MAAIvwC,MAAM,CAACshB,YAAX,EAAyB;AACvB,QAAI2hB,GAAG,GAAGjjC,MAAM,CAACshB,YAAP,EAAV;;AACA,QAAI2hB,GAAG,CAACuN,UAAJ,IAAkBvN,GAAG,CAACwN,MAAtB,IAAgC74B,QAAQ,CAACwH,EAAE,CAACplB,OAAH,CAAW4sC,OAAZ,EAAqB3D,GAAG,CAACuN,UAAzB,CAA5C,EAAkF;AAChFl1C,MAAAA,MAAM,CAACk1C,UAAP,GAAoBvN,GAAG,CAACuN,UAAxB;AACAl1C,MAAAA,MAAM,CAACo1C,YAAP,GAAsBzN,GAAG,CAACyN,YAA1B;AACAp1C,MAAAA,MAAM,CAACq1C,SAAP,GAAmB1N,GAAG,CAAC0N,SAAvB;AACAr1C,MAAAA,MAAM,CAACs1C,WAAP,GAAqB3N,GAAG,CAAC2N,WAAzB;AACD;AACF;;AACD,SAAOt1C,MAAP;AACD;;AAED,SAASu1C,gBAAT,CAA0BC,QAA1B,EAAoC;AAClC,MAAI,CAACA,QAAD,IAAa,CAACA,QAAQ,CAAC/4B,SAAvB,IAAoC+4B,QAAQ,CAAC/4B,SAAT,IAAsBA,SAAS,EAAvE,EAA2E;AAC3E+4B,EAAAA,QAAQ,CAAC/4B,SAAT,CAAmB1kB,KAAnB;;AACA,MAAI,CAAC,qBAAqB0c,IAArB,CAA0B+gC,QAAQ,CAAC/4B,SAAT,CAAmBg5B,QAA7C,CAAD,IACAD,QAAQ,CAACN,UADT,IACuB54B,QAAQ,CAAChnB,QAAQ,CAACkF,IAAV,EAAgBg7C,QAAQ,CAACN,UAAzB,CAD/B,IACuE54B,QAAQ,CAAChnB,QAAQ,CAACkF,IAAV,EAAgBg7C,QAAQ,CAACH,SAAzB,CADnF,EACwH;AACtH,QAAI1N,GAAG,GAAGjjC,MAAM,CAACshB,YAAP,EAAV;AAAA,QAAiCrK,KAAK,GAAGrmB,QAAQ,CAACsmB,WAAT,EAAzC;AACAD,IAAAA,KAAK,CAACK,MAAN,CAAaw5B,QAAQ,CAACN,UAAtB,EAAkCM,QAAQ,CAACJ,YAA3C;AACAz5B,IAAAA,KAAK,CAACriB,QAAN,CAAe,KAAf;AACAquC,IAAAA,GAAG,CAAC+N,eAAJ;AACA/N,IAAAA,GAAG,CAACgO,QAAJ,CAAah6B,KAAb;AACAgsB,IAAAA,GAAG,CAACwN,MAAJ,CAAWK,QAAQ,CAACH,SAApB,EAA+BG,QAAQ,CAACF,WAAxC;AACD;AACF;AAGD;AACA;;;AACA,AAAO,SAAS3C,qBAAT,CAA+B7uB,EAA/B,EAAmC2rB,MAAnC,EAA2C;AAChD,MAAI/wC,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0BorB,GAAG,GAAGhG,EAAE,CAACgG,GAAnC;;AAEA,MAAI2lB,MAAM,CAACgF,cAAX,EAA2B;AACzBhO,IAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACA,WAAO,KAAP;AACD,GAN+C;;;AAShD,MAAI,CAAC2rB,MAAM,CAAC8E,KAAR,IACA9E,MAAM,CAAC+E,OAAP,CAAephC,IAAf,IAAuB1U,OAAO,CAAC0vB,QAD/B,IAC2CqhB,MAAM,CAAC+E,OAAP,CAAevzB,EAAf,IAAqBviB,OAAO,CAAC2vB,MADxE,KAEC3vB,OAAO,CAAC6nC,iBAAR,IAA6B,IAA7B,IAAqC7nC,OAAO,CAAC6nC,iBAAR,IAA6B7nC,OAAO,CAAC2vB,MAF3E,KAGA3vB,OAAO,CAACk3C,YAAR,IAAwBl3C,OAAO,CAACs6B,IAHhC,IAGwCkO,cAAc,CAACpjB,EAAD,CAAd,IAAsB,CAHlE,EAIE,OAAO,KAAP;;AAEF,MAAI+xB,0BAA0B,CAAC/xB,EAAD,CAA9B,EAAoC;AAClC2iB,IAAAA,SAAS,CAAC3iB,EAAD,CAAT;AACA2rB,IAAAA,MAAM,CAACvV,IAAP,GAAc2F,aAAa,CAAC/b,EAAD,CAA3B;AACD,GAlB+C;;;AAqBhD,MAAInd,GAAG,GAAGmjB,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAA1B;AACA,MAAIwc,IAAI,GAAGvW,IAAI,CAAC4kB,GAAL,CAASguB,MAAM,CAAC+E,OAAP,CAAephC,IAAf,GAAsB0Q,EAAE,CAAC5S,OAAH,CAAW4kC,cAA1C,EAA0DhsB,GAAG,CAACC,KAA9D,CAAX;AACA,MAAI9I,EAAE,GAAGpkB,IAAI,CAACyiB,GAAL,CAAS3Y,GAAT,EAAc8oC,MAAM,CAAC+E,OAAP,CAAevzB,EAAf,GAAoB6C,EAAE,CAAC5S,OAAH,CAAW4kC,cAA7C,CAAT;AACA,MAAIp3C,OAAO,CAAC0vB,QAAR,GAAmBhb,IAAnB,IAA2BA,IAAI,GAAG1U,OAAO,CAAC0vB,QAAf,GAA0B,EAAzD,EAA6Dhb,IAAI,GAAGvW,IAAI,CAAC4kB,GAAL,CAASqI,GAAG,CAACC,KAAb,EAAoBrrB,OAAO,CAAC0vB,QAA5B,CAAP;AAC7D,MAAI1vB,OAAO,CAAC2vB,MAAR,GAAiBpN,EAAjB,IAAuBviB,OAAO,CAAC2vB,MAAR,GAAiBpN,EAAjB,GAAsB,EAAjD,EAAqDA,EAAE,GAAGpkB,IAAI,CAACyiB,GAAL,CAAS3Y,GAAT,EAAcjI,OAAO,CAAC2vB,MAAtB,CAAL;;AACrD,MAAIwB,iBAAJ,EAAuB;AACrBzc,IAAAA,IAAI,GAAGihB,YAAY,CAACvQ,EAAE,CAACgG,GAAJ,EAAS1W,IAAT,CAAnB;AACA6N,IAAAA,EAAE,GAAGuT,eAAe,CAAC1Q,EAAE,CAACgG,GAAJ,EAAS7I,EAAT,CAApB;AACD;;AAED,MAAI80B,SAAS,GAAG3iC,IAAI,IAAI1U,OAAO,CAAC0vB,QAAhB,IAA4BnN,EAAE,IAAIviB,OAAO,CAAC2vB,MAA1C,IACd3vB,OAAO,CAACs3C,cAAR,IAA0BvG,MAAM,CAACiF,aADnB,IACoCh2C,OAAO,CAACu3C,aAAR,IAAyBxG,MAAM,CAAC3S,YADpF;AAEAmK,EAAAA,UAAU,CAACnjB,EAAD,EAAK1Q,IAAL,EAAW6N,EAAX,CAAV;AAEAviB,EAAAA,OAAO,CAACikC,UAAR,GAAqB9N,YAAY,CAAChL,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASprB,OAAO,CAAC0vB,QAAjB,CAAR,CAAjC,CAnCgD;;AAqChDtK,EAAAA,EAAE,CAACplB,OAAH,CAAW8+B,KAAX,CAAiBtrC,KAAjB,CAAuB+iB,GAAvB,GAA6BvW,OAAO,CAACikC,UAAR,GAAqB,IAAlD;AAEA,MAAIuT,QAAQ,GAAGhP,cAAc,CAACpjB,EAAD,CAA7B;AACA,MAAI,CAACiyB,SAAD,IAAcG,QAAQ,IAAI,CAA1B,IAA+B,CAACzG,MAAM,CAAC8E,KAAvC,IAAgD71C,OAAO,CAACk3C,YAAR,IAAwBl3C,OAAO,CAACs6B,IAAhF,KACCt6B,OAAO,CAAC6nC,iBAAR,IAA6B,IAA7B,IAAqC7nC,OAAO,CAAC6nC,iBAAR,IAA6B7nC,OAAO,CAAC2vB,MAD3E,CAAJ,EAEE,OAAO,KAAP,CA1C8C;AA6ChD;;AACA,MAAI8nB,WAAW,GAAGnB,iBAAiB,CAAClxB,EAAD,CAAnC;AACA,MAAIoyB,QAAQ,GAAG,CAAf,EAAkBx3C,OAAO,CAAC4sC,OAAR,CAAgBp5C,KAAhB,CAAsBwM,OAAtB,GAAgC,MAAhC;AAClB03C,EAAAA,YAAY,CAACtyB,EAAD,EAAKplB,OAAO,CAAC6nC,iBAAb,EAAgCkJ,MAAM,CAACvV,IAAvC,CAAZ;AACA,MAAIgc,QAAQ,GAAG,CAAf,EAAkBx3C,OAAO,CAAC4sC,OAAR,CAAgBp5C,KAAhB,CAAsBwM,OAAtB,GAAgC,EAAhC;AAClBA,EAAAA,OAAO,CAACk3C,YAAR,GAAuBl3C,OAAO,CAACs6B,IAA/B,CAlDgD;AAoDhD;;AACAuc,EAAAA,gBAAgB,CAACY,WAAD,CAAhB,CArDgD;AAwDhD;;AACAn7B,EAAAA,cAAc,CAACtc,OAAO,CAAC6rC,SAAT,CAAd;AACAvvB,EAAAA,cAAc,CAACtc,OAAO,CAAC23C,YAAT,CAAd;AACA33C,EAAAA,OAAO,CAAC0+B,OAAR,CAAgBlrC,KAAhB,CAAsBd,MAAtB,GAA+BsN,OAAO,CAAC6+B,KAAR,CAAcrrC,KAAd,CAAoBq9C,SAApB,GAAgC,CAA/D;;AAEA,MAAIwG,SAAJ,EAAe;AACbr3C,IAAAA,OAAO,CAACs3C,cAAR,GAAyBvG,MAAM,CAACiF,aAAhC;AACAh2C,IAAAA,OAAO,CAACu3C,aAAR,GAAwBxG,MAAM,CAAC3S,YAA/B;AACAuR,IAAAA,WAAW,CAACvqB,EAAD,EAAK,GAAL,CAAX;AACD;;AAEDplB,EAAAA,OAAO,CAAC6nC,iBAAR,GAA4B,IAA5B;AAEA,SAAO,IAAP;AACD;AAED,AAAO,SAAS2M,iBAAT,CAA2BpvB,EAA3B,EAA+B2rB,MAA/B,EAAuC;AAC5C,MAAI9D,QAAQ,GAAG8D,MAAM,CAAC9D,QAAtB;;AAEA,OAAK,IAAI5hB,KAAK,GAAG,IAAjB,GAAwBA,KAAK,GAAG,KAAhC,EAAuC;AACrC,QAAI,CAACA,KAAD,IAAU,CAACjG,EAAE,CAAC5S,OAAH,CAAW4tB,YAAtB,IAAsC2Q,MAAM,CAACkF,eAAP,IAA0BtW,YAAY,CAACva,EAAD,CAAhF,EAAsF;AACpF;AACA,UAAI6nB,QAAQ,IAAIA,QAAQ,CAAC12B,GAAT,IAAgB,IAAhC,EACE02B,QAAQ,GAAG;AAAC12B,QAAAA,GAAG,EAAEpY,IAAI,CAACyiB,GAAL,CAASwE,EAAE,CAACgG,GAAH,CAAO14B,MAAP,GAAgBwsC,WAAW,CAAC9Z,EAAE,CAACplB,OAAJ,CAA3B,GAA0C8/B,aAAa,CAAC1a,EAAD,CAAhE,EAAsE6nB,QAAQ,CAAC12B,GAA/E;AAAN,OAAX,CAHkF;AAKpF;;AACAw6B,MAAAA,MAAM,CAAC+E,OAAP,GAAiB9I,YAAY,CAAC5nB,EAAE,CAACplB,OAAJ,EAAaolB,EAAE,CAACgG,GAAhB,EAAqB6hB,QAArB,CAA7B;AACA,UAAI8D,MAAM,CAAC+E,OAAP,CAAephC,IAAf,IAAuB0Q,EAAE,CAACplB,OAAH,CAAW0vB,QAAlC,IAA8CqhB,MAAM,CAAC+E,OAAP,CAAevzB,EAAf,IAAqB6C,EAAE,CAACplB,OAAH,CAAW2vB,MAAlF,EACE;AACH,KATD,MASO,IAAItE,KAAJ,EAAW;AAChB0lB,MAAAA,MAAM,CAAC+E,OAAP,GAAiB9I,YAAY,CAAC5nB,EAAE,CAACplB,OAAJ,EAAaolB,EAAE,CAACgG,GAAhB,EAAqB6hB,QAArB,CAA7B;AACD;;AACD,QAAI,CAACgH,qBAAqB,CAAC7uB,EAAD,EAAK2rB,MAAL,CAA1B,EAAwC;AACxCrE,IAAAA,uBAAuB,CAACtnB,EAAD,CAAvB;AACA,QAAI8uB,UAAU,GAAGjE,oBAAoB,CAAC7qB,EAAD,CAArC;AACAsjB,IAAAA,eAAe,CAACtjB,EAAD,CAAf;AACA2sB,IAAAA,gBAAgB,CAAC3sB,EAAD,EAAK8uB,UAAL,CAAhB;AACAK,IAAAA,iBAAiB,CAACnvB,EAAD,EAAK8uB,UAAL,CAAjB;AACAnD,IAAAA,MAAM,CAAC8E,KAAP,GAAe,KAAf;AACD;;AAED9E,EAAAA,MAAM,CAAC7rB,MAAP,CAAcE,EAAd,EAAkB,QAAlB,EAA4BA,EAA5B;;AACA,MAAIA,EAAE,CAACplB,OAAH,CAAW0vB,QAAX,IAAuBtK,EAAE,CAACplB,OAAH,CAAW43C,gBAAlC,IAAsDxyB,EAAE,CAACplB,OAAH,CAAW2vB,MAAX,IAAqBvK,EAAE,CAACplB,OAAH,CAAW63C,cAA1F,EAA0G;AACxG9G,IAAAA,MAAM,CAAC7rB,MAAP,CAAcE,EAAd,EAAkB,gBAAlB,EAAoCA,EAApC,EAAwCA,EAAE,CAACplB,OAAH,CAAW0vB,QAAnD,EAA6DtK,EAAE,CAACplB,OAAH,CAAW2vB,MAAxE;AACAvK,IAAAA,EAAE,CAACplB,OAAH,CAAW43C,gBAAX,GAA8BxyB,EAAE,CAACplB,OAAH,CAAW0vB,QAAzC;AAAmDtK,IAAAA,EAAE,CAACplB,OAAH,CAAW63C,cAAX,GAA4BzyB,EAAE,CAACplB,OAAH,CAAW2vB,MAAvC;AACpD;AACF;AAED,AAAO,SAAS8f,mBAAT,CAA6BrqB,EAA7B,EAAiC6nB,QAAjC,EAA2C;AAChD,MAAI8D,MAAM,GAAG,IAAIgD,aAAJ,CAAkB3uB,EAAlB,EAAsB6nB,QAAtB,CAAb;;AACA,MAAIgH,qBAAqB,CAAC7uB,EAAD,EAAK2rB,MAAL,CAAzB,EAAuC;AACrCrE,IAAAA,uBAAuB,CAACtnB,EAAD,CAAvB;AACAovB,IAAAA,iBAAiB,CAACpvB,EAAD,EAAK2rB,MAAL,CAAjB;AACA,QAAImD,UAAU,GAAGjE,oBAAoB,CAAC7qB,EAAD,CAArC;AACAsjB,IAAAA,eAAe,CAACtjB,EAAD,CAAf;AACA2sB,IAAAA,gBAAgB,CAAC3sB,EAAD,EAAK8uB,UAAL,CAAhB;AACAK,IAAAA,iBAAiB,CAACnvB,EAAD,EAAK8uB,UAAL,CAAjB;AACAnD,IAAAA,MAAM,CAAC+D,MAAP;AACD;AACF;AAGD;AACA;AACA;;AACA,SAAS4C,YAAT,CAAsBtyB,EAAtB,EAA0B0yB,iBAA1B,EAA6Ctc,IAA7C,EAAmD;AACjD,MAAIx7B,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0Bg9B,WAAW,GAAG5X,EAAE,CAAC5S,OAAH,CAAWwqB,WAAnD;AACA,MAAI+a,SAAS,GAAG/3C,OAAO,CAAC4sC,OAAxB;AAAA,MAAiCxpB,GAAG,GAAG20B,SAAS,CAACt7B,UAAjD;;AAEA,WAASu7B,EAAT,CAAY97B,IAAZ,EAAkB;AAChB,QAAI8N,IAAI,GAAG9N,IAAI,CAACuhB,WAAhB,CADgB;;AAGhB,QAAI5iB,MAAM,IAAIY,GAAV,IAAiB2J,EAAE,CAACplB,OAAH,CAAWi4C,kBAAX,IAAiC/7B,IAAtD,EACEA,IAAI,CAAC1oB,KAAL,CAAWwM,OAAX,GAAqB,MAArB,CADF,KAGEkc,IAAI,CAAC7c,UAAL,CAAgByC,WAAhB,CAA4Boa,IAA5B;AACF,WAAO8N,IAAP;AACD;;AAED,MAAIsQ,IAAI,GAAGt6B,OAAO,CAACs6B,IAAnB;AAAA,MAAyB1E,KAAK,GAAG51B,OAAO,CAAC0vB,QAAzC,CAdiD;AAgBjD;;AACA,OAAK,IAAItpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk0B,IAAI,CAACjlC,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC;AACpC,QAAIixB,QAAQ,GAAGiD,IAAI,CAACl0B,CAAD,CAAnB;;AACA,QAAIixB,QAAQ,CAAC8C,MAAb,EAAqB,CAArB,MACO,IAAI,CAAC9C,QAAQ,CAACnb,IAAV,IAAkBmb,QAAQ,CAACnb,IAAT,CAAc7c,UAAd,IAA4B04C,SAAlD,EAA6D;AAAE;AACpE,UAAI77B,IAAI,GAAGyhB,gBAAgB,CAACvY,EAAD,EAAKiS,QAAL,EAAezB,KAAf,EAAsB4F,IAAtB,CAA3B;AACAuc,MAAAA,SAAS,CAAC3b,YAAV,CAAuBlgB,IAAvB,EAA6BkH,GAA7B;AACD,KAHM,MAGA;AAAE;AACP,aAAOA,GAAG,IAAIiU,QAAQ,CAACnb,IAAvB,EAA6BkH,GAAG,GAAG40B,EAAE,CAAC50B,GAAD,CAAR;;AAC7B,UAAI80B,YAAY,GAAGlb,WAAW,IAAI8a,iBAAiB,IAAI,IAApC,IACjBA,iBAAiB,IAAIliB,KADJ,IACayB,QAAQ,CAAC6F,UADzC;;AAEA,UAAI7F,QAAQ,CAACoE,OAAb,EAAsB;AACpB,YAAIp2B,OAAO,CAACgyB,QAAQ,CAACoE,OAAV,EAAmB,QAAnB,CAAP,GAAsC,CAAC,CAA3C,EAA8Cyc,YAAY,GAAG,KAAf;AAC9C3c,QAAAA,oBAAoB,CAACnW,EAAD,EAAKiS,QAAL,EAAezB,KAAf,EAAsB4F,IAAtB,CAApB;AACD;;AACD,UAAI0c,YAAJ,EAAkB;AAChB57B,QAAAA,cAAc,CAAC+a,QAAQ,CAAC6F,UAAV,CAAd;AACA7F,QAAAA,QAAQ,CAAC6F,UAAT,CAAoBpmC,WAApB,CAAgCF,QAAQ,CAACmmB,cAAT,CAAwBwP,aAAa,CAACnH,EAAE,CAAC5S,OAAJ,EAAaojB,KAAb,CAArC,CAAhC;AACD;;AACDxS,MAAAA,GAAG,GAAGiU,QAAQ,CAACnb,IAAT,CAAcuhB,WAApB;AACD;;AACD7H,IAAAA,KAAK,IAAIyB,QAAQ,CAACn/B,IAAlB;AACD;;AACD,SAAOkrB,GAAP,EAAYA,GAAG,GAAG40B,EAAE,CAAC50B,GAAD,CAAR;AACb;;AAED,AAAO,SAAS+0B,iBAAT,CAA2Bn4C,OAA3B,EAAoC;AACzC,MAAIxN,KAAK,GAAGwN,OAAO,CAAC0+B,OAAR,CAAgB/X,WAA5B;AACA3mB,EAAAA,OAAO,CAAC6+B,KAAR,CAAcrrC,KAAd,CAAoB+qC,UAApB,GAAiC/rC,KAAK,GAAG,IAAzC,CAFyC;;AAIzC2oC,EAAAA,WAAW,CAACn7B,OAAD,EAAU,eAAV,EAA2BA,OAA3B,CAAX;AACD;AAED,AAAO,SAASu0C,iBAAT,CAA2BnvB,EAA3B,EAA+BsB,OAA/B,EAAwC;AAC7CtB,EAAAA,EAAE,CAACplB,OAAH,CAAW6+B,KAAX,CAAiBrrC,KAAjB,CAAuBq9C,SAAvB,GAAmCnqB,OAAO,CAAC6pB,SAAR,GAAoB,IAAvD;AACAnrB,EAAAA,EAAE,CAACplB,OAAH,CAAWqyC,YAAX,CAAwB7+C,KAAxB,CAA8B+iB,GAA9B,GAAoCmQ,OAAO,CAAC6pB,SAAR,GAAoB,IAAxD;AACAnrB,EAAAA,EAAE,CAACplB,OAAH,CAAW0+B,OAAX,CAAmBlrC,KAAnB,CAAyBd,MAAzB,GAAmCg0B,OAAO,CAAC6pB,SAAR,GAAoBnrB,EAAE,CAACplB,OAAH,CAAWggC,SAA/B,GAA2CP,SAAS,CAACra,EAAD,CAArD,GAA6D,IAA/F;AACD;;AClQD;;AACA,AAAO,SAAS4qB,iBAAT,CAA2B5qB,EAA3B,EAA+B;AACpC,MAAIplB,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0Bs6B,IAAI,GAAGt6B,OAAO,CAACs6B,IAAzC;AACA,MAAI,CAACt6B,OAAO,CAACo4C,YAAT,KAA0B,CAACp4C,OAAO,CAAC0+B,OAAR,CAAgBjiB,UAAjB,IAA+B,CAAC2I,EAAE,CAAC5S,OAAH,CAAWoqB,WAArE,CAAJ,EAAuF;AACvF,MAAIyb,IAAI,GAAGvR,oBAAoB,CAAC9mC,OAAD,CAApB,GAAgCA,OAAO,CAAC4/B,QAAR,CAAiBlpB,UAAjD,GAA8D0O,EAAE,CAACgG,GAAH,CAAO1U,UAAhF;AACA,MAAIw5B,OAAO,GAAGlwC,OAAO,CAAC0+B,OAAR,CAAgB/X,WAA9B;AAAA,MAA2Cnf,IAAI,GAAG6wC,IAAI,GAAG,IAAzD;;AACA,OAAK,IAAIjyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk0B,IAAI,CAACjlC,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC,IAAI,CAACk0B,IAAI,CAACl0B,CAAD,CAAJ,CAAQ+zB,MAAb,EAAqB;AACzD,QAAI/U,EAAE,CAAC5S,OAAH,CAAWoqB,WAAf,EAA4B;AAC1B,UAAItC,IAAI,CAACl0B,CAAD,CAAJ,CAAQq2B,MAAZ,EACEnC,IAAI,CAACl0B,CAAD,CAAJ,CAAQq2B,MAAR,CAAejpC,KAAf,CAAqBgU,IAArB,GAA4BA,IAA5B;AACF,UAAI8yB,IAAI,CAACl0B,CAAD,CAAJ,CAAQs2B,gBAAZ,EACEpC,IAAI,CAACl0B,CAAD,CAAJ,CAAQs2B,gBAAR,CAAyBlpC,KAAzB,CAA+BgU,IAA/B,GAAsCA,IAAtC;AACH;;AACD,QAAI8wC,KAAK,GAAGhe,IAAI,CAACl0B,CAAD,CAAJ,CAAQm3B,SAApB;AACA,QAAI+a,KAAJ,EAAW,KAAK,IAAIp0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGo0B,KAAK,CAACjjD,MAA1B,EAAkC6uB,CAAC,EAAnC,EACTo0B,KAAK,CAACp0B,CAAD,CAAL,CAAS1wB,KAAT,CAAegU,IAAf,GAAsBA,IAAtB;AACH;;AACD,MAAI4d,EAAE,CAAC5S,OAAH,CAAWoqB,WAAf,EACE58B,OAAO,CAAC0+B,OAAR,CAAgBlrC,KAAhB,CAAsBgU,IAAtB,GAA8B6wC,IAAI,GAAGnI,OAAR,GAAmB,IAAhD;AACH;AAGD;AACA;;AACA,AAAO,SAASiH,0BAAT,CAAoC/xB,EAApC,EAAwC;AAC7C,MAAI,CAACA,EAAE,CAAC5S,OAAH,CAAWwqB,WAAhB,EAA6B,OAAO,KAAP;AAC7B,MAAI5R,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkBxpB,IAAI,GAAG2qB,aAAa,CAACnH,EAAE,CAAC5S,OAAJ,EAAa4Y,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAApC,CAAtC;AAAA,MAA8E8H,OAAO,GAAGolB,EAAE,CAACplB,OAA3F;;AACA,MAAI4B,IAAI,CAACvM,MAAL,IAAe2K,OAAO,CAACujC,YAA3B,EAAyC;AACvC,QAAIxtB,IAAI,GAAG/V,OAAO,CAAC0mB,OAAR,CAAgB5vB,WAAhB,CAA4B8lB,GAAG,CAAC,KAAD,EAAQ,CAACA,GAAG,CAAC,KAAD,EAAQhb,IAAR,CAAJ,CAAR,EACC,6CADD,CAA/B,CAAX;AAEA,QAAI22C,MAAM,GAAGxiC,IAAI,CAAC0G,UAAL,CAAgBkK,WAA7B;AAAA,QAA0CkjB,OAAO,GAAG9zB,IAAI,CAAC4Q,WAAL,GAAmB4xB,MAAvE;AACAv4C,IAAAA,OAAO,CAACw4C,UAAR,CAAmBhlD,KAAnB,CAAyBhB,KAAzB,GAAiC,EAAjC;AACAwN,IAAAA,OAAO,CAACo9B,iBAAR,GAA4Bj/B,IAAI,CAAC4kB,GAAL,CAASw1B,MAAT,EAAiBv4C,OAAO,CAACw4C,UAAR,CAAmB7xB,WAAnB,GAAiCkjB,OAAlD,IAA6D,CAAzF;AACA7pC,IAAAA,OAAO,CAACy4C,YAAR,GAAuBz4C,OAAO,CAACo9B,iBAAR,GAA4ByM,OAAnD;AACA7pC,IAAAA,OAAO,CAACujC,YAAR,GAAuBvjC,OAAO,CAACo9B,iBAAR,GAA4Bx7B,IAAI,CAACvM,MAAjC,GAA0C,CAAC,CAAlE;AACA2K,IAAAA,OAAO,CAACw4C,UAAR,CAAmBhlD,KAAnB,CAAyBhB,KAAzB,GAAiCwN,OAAO,CAACy4C,YAAR,GAAuB,IAAxD;AACAN,IAAAA,iBAAiB,CAAC/yB,EAAE,CAACplB,OAAJ,CAAjB;AACA,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD;;AC1CM,SAAS04C,UAAT,CAAoBha,OAApB,EAA6B1B,WAA7B,EAA0C;AAC/C,MAAI17B,MAAM,GAAG,EAAb;AAAA,MAAiBq3C,cAAc,GAAG,KAAlC;;AACA,OAAK,IAAIvyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs4B,OAAO,CAACrpC,MAA5B,EAAoC+Q,CAAC,EAArC,EAAyC;AACvC,QAAIiJ,IAAI,GAAGqvB,OAAO,CAACt4B,CAAD,CAAlB;AAAA,QAAuB5S,KAAK,GAAG,IAA/B;;AACA,QAAI,OAAO6b,IAAP,IAAe,QAAnB,EAA6B;AAAE7b,MAAAA,KAAK,GAAG6b,IAAI,CAAC7b,KAAb;AAAoB6b,MAAAA,IAAI,GAAGA,IAAI,CAAC+M,SAAZ;AAAuB;;AAC1E,QAAI/M,IAAI,IAAI,wBAAZ,EAAsC;AACpC,UAAI,CAAC2tB,WAAL,EAAkB,SAAlB,KACK2b,cAAc,GAAG,IAAjB;AACN;;AACDr3C,IAAAA,MAAM,CAACiE,IAAP,CAAY;AAAC6W,MAAAA,SAAS,EAAE/M,IAAZ;AAAkB7b,MAAAA;AAAlB,KAAZ;AACD;;AACD,MAAIwpC,WAAW,IAAI,CAAC2b,cAApB,EAAoCr3C,MAAM,CAACiE,IAAP,CAAY;AAAC6W,IAAAA,SAAS,EAAE,wBAAZ;AAAsC5oB,IAAAA,KAAK,EAAE;AAA7C,GAAZ;AACpC,SAAO8N,MAAP;AACD;AAGD;;AACA,AAAO,SAASs3C,aAAT,CAAuB54C,OAAvB,EAAgC;AACrC,MAAI0+B,OAAO,GAAG1+B,OAAO,CAAC0+B,OAAtB;AAAA,MAA+Bma,KAAK,GAAG74C,OAAO,CAACq9B,WAA/C;AACA/gB,EAAAA,cAAc,CAACoiB,OAAD,CAAd;AACA1+B,EAAAA,OAAO,CAACw4C,UAAR,GAAqB,IAArB;;AACA,OAAK,IAAIpyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyyC,KAAK,CAACxjD,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,QAAI;AAACgW,MAAAA,SAAD;AAAY5oB,MAAAA;AAAZ,QAAqBqlD,KAAK,CAACzyC,CAAD,CAA9B;AACA,QAAI0yC,IAAI,GAAGpa,OAAO,CAAC5nC,WAAR,CAAoB8lB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,uBAAuBR,SAArC,CAAvB,CAAX;AACA,QAAI5oB,KAAJ,EAAWslD,IAAI,CAACtlD,KAAL,CAAWspB,OAAX,GAAqBtpB,KAArB;;AACX,QAAI4oB,SAAS,IAAI,wBAAjB,EAA2C;AACzCpc,MAAAA,OAAO,CAACw4C,UAAR,GAAqBM,IAArB;AACAA,MAAAA,IAAI,CAACtlD,KAAL,CAAWhB,KAAX,GAAmB,CAACwN,OAAO,CAACy4C,YAAR,IAAwB,CAAzB,IAA8B,IAAjD;AACD;AACF;;AACD/Z,EAAAA,OAAO,CAAClrC,KAAR,CAAcwM,OAAd,GAAwB64C,KAAK,CAACxjD,MAAN,GAAe,EAAf,GAAoB,MAA5C;AACA8iD,EAAAA,iBAAiB,CAACn4C,OAAD,CAAjB;AACD;AAED,AAAO,SAAS+4C,aAAT,CAAuB3zB,EAAvB,EAA2B;AAChCwzB,EAAAA,aAAa,CAACxzB,EAAE,CAACplB,OAAJ,CAAb;AACA2nC,EAAAA,SAAS,CAACviB,EAAD,CAAT;AACA4qB,EAAAA,iBAAiB,CAAC5qB,EAAD,CAAjB;AACD;;ACrCD;AACA;;AAEA,AAAO,SAAS4zB,OAAT,CAAiB7W,KAAjB,EAAwB/W,GAAxB,EAA6BiO,KAA7B,EAAoC7mB,OAApC,EAA6C;AAClD,MAAI+jB,CAAC,GAAG,IAAR;AACA,OAAK8C,KAAL,GAAaA,KAAb,CAFkD;;AAKlD9C,EAAAA,CAAC,CAACgc,eAAF,GAAoB31B,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,6BAAd,CAAvB;AACA2Z,EAAAA,CAAC,CAACgc,eAAF,CAAkB/7C,YAAlB,CAA+B,gBAA/B,EAAiD,MAAjD,EANkD;AAQlD;;AACA+/B,EAAAA,CAAC,CAACkc,YAAF,GAAiB71B,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,0BAAd,CAApB;AACA2Z,EAAAA,CAAC,CAACkc,YAAF,CAAej8C,YAAf,CAA4B,gBAA5B,EAA8C,MAA9C,EAVkD;;AAYlD+/B,EAAAA,CAAC,CAACqW,OAAF,GAAY5vB,IAAI,CAAC,KAAD,EAAQ,IAAR,EAAc,iBAAd,CAAhB,CAZkD;;AAclDuZ,EAAAA,CAAC,CAACohB,YAAF,GAAiB/6B,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,gCAApB,CAApB;AACA2Z,EAAAA,CAAC,CAACsV,SAAF,GAAcjvB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,oBAAd,CAAjB,CAfkD;;AAiBlD2Z,EAAAA,CAAC,CAAC7P,OAAF,GAAY9J,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,oBAAd,CAAf,CAjBkD;;AAmBlD2Z,EAAAA,CAAC,CAACqK,WAAF,GAAgBhkB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,oBAAd,CAAnB,CAnBkD;;AAqBlD2Z,EAAAA,CAAC,CAACyI,SAAF,GAAchiB,IAAI,CAAC,KAAD,EAAQ,CAACuZ,CAAC,CAAC7P,OAAH,EAAY6P,CAAC,CAACqK,WAAd,EAA2BrK,CAAC,CAACohB,YAA7B,EAA2CphB,CAAC,CAACsV,SAA7C,EAAwDtV,CAAC,CAACqW,OAA1D,CAAR,EACA,IADA,EACM,mCADN,CAAlB;AAEA,MAAIrhB,KAAK,GAAGvO,IAAI,CAAC,KAAD,EAAQ,CAACuZ,CAAC,CAACyI,SAAH,CAAR,EAAuB,kBAAvB,CAAhB,CAvBkD;;AAyBlDzI,EAAAA,CAAC,CAACuI,KAAF,GAAUliB,GAAG,CAAC,KAAD,EAAQ,CAAC2O,KAAD,CAAR,EAAiB,IAAjB,EAAuB,oBAAvB,CAAb,CAzBkD;;AA2BlDgL,EAAAA,CAAC,CAACsI,KAAF,GAAUjiB,GAAG,CAAC,KAAD,EAAQ,CAAC2Z,CAAC,CAACuI,KAAH,CAAR,EAAmB,kBAAnB,CAAb;AACAvI,EAAAA,CAAC,CAACyT,UAAF,GAAe,IAAf,CA5BkD;AA8BlD;AACA;;AACAzT,EAAAA,CAAC,CAAC8b,YAAF,GAAiBz1B,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,iCAAiCqD,WAAjC,GAA+C,iBAAnE,CAApB,CAhCkD;;AAkClDsW,EAAAA,CAAC,CAACmI,OAAF,GAAY9hB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,oBAAd,CAAf;AACA2Z,EAAAA,CAAC,CAACiiB,UAAF,GAAe,IAAf,CAnCkD;;AAqClDjiB,EAAAA,CAAC,CAACqJ,QAAF,GAAahjB,GAAG,CAAC,KAAD,EAAQ,CAAC2Z,CAAC,CAACsI,KAAH,EAAUtI,CAAC,CAAC8b,YAAZ,EAA0B9b,CAAC,CAACmI,OAA5B,CAAR,EAA8C,mBAA9C,CAAhB;AACAnI,EAAAA,CAAC,CAACqJ,QAAF,CAAWppC,YAAX,CAAwB,UAAxB,EAAoC,IAApC,EAtCkD;;AAwClD+/B,EAAAA,CAAC,CAACoI,OAAF,GAAY/hB,GAAG,CAAC,KAAD,EAAQ,CAAC2Z,CAAC,CAACgc,eAAH,EAAoBhc,CAAC,CAACkc,YAAtB,EAAoClc,CAAC,CAACqJ,QAAtC,CAAR,EAAyD,YAAzD,CAAf,CAxCkD;;AA2ClD,MAAIllB,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B;AAAE4b,IAAAA,CAAC,CAACmI,OAAF,CAAUlrC,KAAV,CAAgBwoC,MAAhB,GAAyB,CAAC,CAA1B;AAA6BzF,IAAAA,CAAC,CAACqJ,QAAF,CAAWpsC,KAAX,CAAiBgsC,YAAjB,GAAgC,CAAhC;AAAmC;;AAC5F,MAAI,CAAC3kB,MAAD,IAAW,EAAEP,KAAK,IAAIkB,MAAX,CAAf,EAAmC+a,CAAC,CAACqJ,QAAF,CAAWqZ,SAAX,GAAuB,IAAvB;;AAEnC,MAAI9W,KAAJ,EAAW;AACT,QAAIA,KAAK,CAACrrC,WAAV,EAAuBqrC,KAAK,CAACrrC,WAAN,CAAkBy/B,CAAC,CAACoI,OAApB,EAAvB,KACKwD,KAAK,CAAC5L,CAAC,CAACoI,OAAH,CAAL;AACN,GAjDiD;;;AAoDlDpI,EAAAA,CAAC,CAAC7G,QAAF,GAAa6G,CAAC,CAAC5G,MAAF,GAAWvE,GAAG,CAACC,KAA5B;AACAkL,EAAAA,CAAC,CAACqhB,gBAAF,GAAqBrhB,CAAC,CAACshB,cAAF,GAAmBzsB,GAAG,CAACC,KAA5C,CArDkD;;AAuDlDkL,EAAAA,CAAC,CAAC+D,IAAF,GAAS,EAAT;AACA/D,EAAAA,CAAC,CAAC2gB,YAAF,GAAiB,IAAjB,CAxDkD;AA0DlD;;AACA3gB,EAAAA,CAAC,CAACwB,gBAAF,GAAqB,IAArB,CA3DkD;;AA6DlDxB,EAAAA,CAAC,CAAC0N,UAAF,GAAe,CAAf;AACA1N,EAAAA,CAAC,CAAC+gB,cAAF,GAAmB/gB,CAAC,CAACghB,aAAF,GAAkB,CAArC;AACAhhB,EAAAA,CAAC,CAACsR,iBAAF,GAAsB,IAAtB;AAEAtR,EAAAA,CAAC,CAACmJ,cAAF,GAAmBnJ,CAAC,CAACyJ,SAAF,GAAczJ,CAAC,CAACsJ,QAAF,GAAa,CAA9C;AACAtJ,EAAAA,CAAC,CAAC4f,iBAAF,GAAsB,KAAtB,CAlEkD;AAqElD;;AACA5f,EAAAA,CAAC,CAACkiB,YAAF,GAAiBliB,CAAC,CAAC6G,iBAAF,GAAsB7G,CAAC,CAACgN,YAAF,GAAiB,IAAxD,CAtEkD;AAwElD;AACA;;AACAhN,EAAAA,CAAC,CAAC6hB,YAAF,GAAiB,KAAjB;AAEA7hB,EAAAA,CAAC,CAAC8M,eAAF,GAAoB9M,CAAC,CAAC+M,gBAAF,GAAqB/M,CAAC,CAAC6I,cAAF,GAAmB,IAA5D,CA5EkD;AA+ElD;;AACA7I,EAAAA,CAAC,CAACC,OAAF,GAAY,IAAZ;AACAD,EAAAA,CAAC,CAACE,aAAF,GAAkB,CAAlB;AACAF,EAAAA,CAAC,CAACG,cAAF,GAAmB,KAAnB,CAlFkD;;AAqFlDH,EAAAA,CAAC,CAAC2iB,OAAF,GAAY3iB,CAAC,CAAC4iB,OAAF,GAAY5iB,CAAC,CAACke,WAAF,GAAgBle,CAAC,CAACme,WAAF,GAAgB,IAAxD,CArFkD;;AAwFlDne,EAAAA,CAAC,CAACjtB,KAAF,GAAU,KAAV,CAxFkD;AA2FlD;;AACAitB,EAAAA,CAAC,CAACiW,iBAAF,GAAsB,IAAtB;AAEAjW,EAAAA,CAAC,CAAC6iB,WAAF,GAAgB,IAAhB;AAEA7iB,EAAAA,CAAC,CAAC8G,WAAF,GAAgBqb,UAAU,CAAClmC,OAAO,CAACksB,OAAT,EAAkBlsB,OAAO,CAACwqB,WAA1B,CAA1B;AACA4b,EAAAA,aAAa,CAACriB,CAAD,CAAb;AAEA8C,EAAAA,KAAK,CAACggB,IAAN,CAAW9iB,CAAX;AACD;;ACtGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI+iB,YAAY,GAAG,CAAnB;AAAA,IAAsBC,kBAAkB,GAAG,IAA3C;AAEA;AACA;AACA;;AACA,IAAI7+B,EAAJ,EAAQ6+B,kBAAkB,GAAG,CAAC,GAAtB,CAAR,KACK,IAAIj/B,KAAJ,EAAWi/B,kBAAkB,GAAG,EAArB,CAAX,KACA,IAAIx+B,MAAJ,EAAYw+B,kBAAkB,GAAG,CAAC,EAAtB,CAAZ,KACA,IAAIt+B,MAAJ,EAAYs+B,kBAAkB,GAAG,CAAC,CAAD,GAAG,CAAxB;;AAEjB,SAASC,eAAT,CAAyB5rC,CAAzB,EAA4B;AAC1B,MAAI6rC,EAAE,GAAG7rC,CAAC,CAAC8rC,WAAX;AAAA,MAAwBC,EAAE,GAAG/rC,CAAC,CAACgsC,WAA/B;AACA,MAAIH,EAAE,IAAI,IAAN,IAAc7rC,CAAC,CAAClT,MAAhB,IAA0BkT,CAAC,CAACilC,IAAF,IAAUjlC,CAAC,CAACisC,eAA1C,EAA2DJ,EAAE,GAAG7rC,CAAC,CAAClT,MAAP;AAC3D,MAAIi/C,EAAE,IAAI,IAAN,IAAc/rC,CAAC,CAAClT,MAAhB,IAA0BkT,CAAC,CAACilC,IAAF,IAAUjlC,CAAC,CAACksC,aAA1C,EAAyDH,EAAE,GAAG/rC,CAAC,CAAClT,MAAP,CAAzD,KACK,IAAIi/C,EAAE,IAAI,IAAV,EAAgBA,EAAE,GAAG/rC,CAAC,CAACmsC,UAAP;AACrB,SAAO;AAACxvC,IAAAA,CAAC,EAAEkvC,EAAJ;AAAQtsC,IAAAA,CAAC,EAAEwsC;AAAX,GAAP;AACD;;AACD,AAAO,SAASK,gBAAT,CAA0BpsC,CAA1B,EAA6B;AAClC,MAAIqsC,KAAK,GAAGT,eAAe,CAAC5rC,CAAD,CAA3B;AACAqsC,EAAAA,KAAK,CAAC1vC,CAAN,IAAWgvC,kBAAX;AACAU,EAAAA,KAAK,CAAC9sC,CAAN,IAAWosC,kBAAX;AACA,SAAOU,KAAP;AACD;AAED,AAAO,SAASC,aAAT,CAAuB90B,EAAvB,EAA2BxX,CAA3B,EAA8B;AACnC,MAAIqsC,KAAK,GAAGT,eAAe,CAAC5rC,CAAD,CAA3B;AAAA,MAAgC6rC,EAAE,GAAGQ,KAAK,CAAC1vC,CAA3C;AAAA,MAA8CovC,EAAE,GAAGM,KAAK,CAAC9sC,CAAzD;AAEA,MAAInN,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0BogB,MAAM,GAAGpgB,OAAO,CAAC4/B,QAA3C,CAHmC;;AAKnC,MAAIua,UAAU,GAAG/5B,MAAM,CAACvJ,WAAP,GAAqBuJ,MAAM,CAACtJ,WAA7C;AACA,MAAIsjC,UAAU,GAAGh6B,MAAM,CAACyvB,YAAP,GAAsBzvB,MAAM,CAAC2f,YAA9C;AACA,MAAI,EAAE0Z,EAAE,IAAIU,UAAN,IAAoBR,EAAE,IAAIS,UAA5B,CAAJ,EAA6C,OAPV;AAUnC;AACA;AACA;;AACA,MAAIT,EAAE,IAAIl+B,GAAN,IAAaZ,MAAjB,EAAyB;AACvBuR,IAAAA,KAAK,EAAE,KAAK,IAAIhJ,GAAG,GAAGxV,CAAC,CAACjN,MAAZ,EAAoB25B,IAAI,GAAGt6B,OAAO,CAACs6B,IAAxC,EAA8ClX,GAAG,IAAIhD,MAArD,EAA6DgD,GAAG,GAAGA,GAAG,CAAC/jB,UAAvE,EAAmF;AACxF,WAAK,IAAI+G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk0B,IAAI,CAACjlC,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC;AACpC,YAAIk0B,IAAI,CAACl0B,CAAD,CAAJ,CAAQ8V,IAAR,IAAgBkH,GAApB,EAAyB;AACvBgC,UAAAA,EAAE,CAACplB,OAAH,CAAWi4C,kBAAX,GAAgC70B,GAAhC;AACA,gBAAMgJ,KAAN;AACD;AACF;AACF;AACF,GAtBkC;AAyBnC;AACA;AACA;AACA;AACA;;;AACA,MAAIqtB,EAAE,IAAI,CAACn/B,KAAP,IAAgB,CAACU,MAAjB,IAA2Bu+B,kBAAkB,IAAI,IAArD,EAA2D;AACzD,QAAII,EAAE,IAAIS,UAAV,EACEjM,eAAe,CAAC/oB,EAAD,EAAKjnB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY3C,MAAM,CAAC5nB,SAAP,GAAmBmhD,EAAE,GAAGJ,kBAApC,CAAL,CAAf;AACFnL,IAAAA,aAAa,CAAChpB,EAAD,EAAKjnB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY3C,MAAM,CAAC1J,UAAP,GAAoB+iC,EAAE,GAAGF,kBAArC,CAAL,CAAb,CAHyD;AAKzD;AACA;AACA;;AACA,QAAI,CAACI,EAAD,IAAQA,EAAE,IAAIS,UAAlB,EACEp0B,gBAAgB,CAACpY,CAAD,CAAhB;AACF5N,IAAAA,OAAO,CAACy0C,WAAR,GAAsB,IAAtB,CAVyD;;AAWzD;AACD,GA1CkC;AA6CnC;;;AACA,MAAIkF,EAAE,IAAIJ,kBAAkB,IAAI,IAAhC,EAAsC;AACpC,QAAIc,MAAM,GAAGV,EAAE,GAAGJ,kBAAlB;AACA,QAAIhjC,GAAG,GAAG6O,EAAE,CAACgG,GAAH,CAAO5yB,SAAjB;AAAA,QAA4BgqC,GAAG,GAAGjsB,GAAG,GAAGvW,OAAO,CAAC2+B,OAAR,CAAgBoB,YAAxD;AACA,QAAIsa,MAAM,GAAG,CAAb,EAAgB9jC,GAAG,GAAGpY,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYxM,GAAG,GAAG8jC,MAAN,GAAe,EAA3B,CAAN,CAAhB,KACK7X,GAAG,GAAGrkC,IAAI,CAACyiB,GAAL,CAASwE,EAAE,CAACgG,GAAH,CAAO14B,MAAhB,EAAwB8vC,GAAG,GAAG6X,MAAN,GAAe,EAAvC,CAAN;AACL5K,IAAAA,mBAAmB,CAACrqB,EAAD,EAAK;AAAC7O,MAAAA,GAAG,EAAEA,GAAN;AAAWkqB,MAAAA,MAAM,EAAE+B;AAAnB,KAAL,CAAnB;AACD;;AAED,MAAI8W,YAAY,GAAG,EAAnB,EAAuB;AACrB,QAAIt5C,OAAO,CAACy0C,WAAR,IAAuB,IAA3B,EAAiC;AAC/Bz0C,MAAAA,OAAO,CAACy0C,WAAR,GAAsBr0B,MAAM,CAAC1J,UAA7B;AAAyC1W,MAAAA,OAAO,CAAC00C,WAAR,GAAsBt0B,MAAM,CAAC5nB,SAA7B;AACzCwH,MAAAA,OAAO,CAACk5C,OAAR,GAAkBO,EAAlB;AAAsBz5C,MAAAA,OAAO,CAACm5C,OAAR,GAAkBQ,EAAlB;AACtB70C,MAAAA,UAAU,CAAC,MAAM;AACf,YAAI9E,OAAO,CAACy0C,WAAR,IAAuB,IAA3B,EAAiC;AACjC,YAAI6F,MAAM,GAAGl6B,MAAM,CAAC1J,UAAP,GAAoB1W,OAAO,CAACy0C,WAAzC;AACA,YAAI8F,MAAM,GAAGn6B,MAAM,CAAC5nB,SAAP,GAAmBwH,OAAO,CAAC00C,WAAxC;AACA,YAAI8F,MAAM,GAAID,MAAM,IAAIv6C,OAAO,CAACm5C,OAAlB,IAA6BoB,MAAM,GAAGv6C,OAAO,CAACm5C,OAA/C,IACVmB,MAAM,IAAIt6C,OAAO,CAACk5C,OAAlB,IAA6BoB,MAAM,GAAGt6C,OAAO,CAACk5C,OADjD;AAEAl5C,QAAAA,OAAO,CAACy0C,WAAR,GAAsBz0C,OAAO,CAAC00C,WAAR,GAAsB,IAA5C;AACA,YAAI,CAAC8F,MAAL,EAAa;AACbjB,QAAAA,kBAAkB,GAAG,CAACA,kBAAkB,GAAGD,YAArB,GAAoCkB,MAArC,KAAgDlB,YAAY,GAAG,CAA/D,CAArB;AACA,UAAEA,YAAF;AACD,OAVS,EAUP,GAVO,CAAV;AAWD,KAdD,MAcO;AACLt5C,MAAAA,OAAO,CAACk5C,OAAR,IAAmBO,EAAnB;AAAuBz5C,MAAAA,OAAO,CAACm5C,OAAR,IAAmBQ,EAAnB;AACxB;AACF;AACF;;AC9GD;AACA;AACA;AACA;;AACA,AAAO,MAAMc,SAAN,CAAgB;AACrBrgD,EAAAA,WAAW,CAAC8uC,MAAD,EAASC,SAAT,EAAoB;AAC7B,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACD;;AAEDN,EAAAA,OAAO,GAAG;AAAE,WAAO,KAAKK,MAAL,CAAY,KAAKC,SAAjB,CAAP;AAAoC;;AAEhDuR,EAAAA,MAAM,CAAC3V,KAAD,EAAQ;AACZ,QAAIA,KAAK,IAAI,IAAb,EAAmB,OAAO,IAAP;AACnB,QAAIA,KAAK,CAACoE,SAAN,IAAmB,KAAKA,SAAxB,IAAqCpE,KAAK,CAACmE,MAAN,CAAa7zC,MAAb,IAAuB,KAAK6zC,MAAL,CAAY7zC,MAA5E,EAAoF,OAAO,KAAP;;AACpF,SAAK,IAAI+Q,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8iC,MAAL,CAAY7zC,MAAhC,EAAwC+Q,CAAC,EAAzC,EAA6C;AAC3C,UAAIu0C,IAAI,GAAG,KAAKzR,MAAL,CAAY9iC,CAAZ,CAAX;AAAA,UAA2Bw0C,KAAK,GAAG7V,KAAK,CAACmE,MAAN,CAAa9iC,CAAb,CAAnC;AACA,UAAI,CAACwmB,cAAc,CAAC+tB,IAAI,CAAChU,MAAN,EAAciU,KAAK,CAACjU,MAApB,CAAf,IAA8C,CAAC/Z,cAAc,CAAC+tB,IAAI,CAAC9jD,IAAN,EAAY+jD,KAAK,CAAC/jD,IAAlB,CAAjE,EAA0F,OAAO,KAAP;AAC3F;;AACD,WAAO,IAAP;AACD;;AAEDgkD,EAAAA,QAAQ,GAAG;AACT,QAAI75B,GAAG,GAAG,EAAV;;AACA,SAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8iC,MAAL,CAAY7zC,MAAhC,EAAwC+Q,CAAC,EAAzC,EACE4a,GAAG,CAAC5a,CAAD,CAAH,GAAS,IAAI00C,KAAJ,CAAUjuB,OAAO,CAAC,KAAKqc,MAAL,CAAY9iC,CAAZ,EAAeugC,MAAhB,CAAjB,EAA0C9Z,OAAO,CAAC,KAAKqc,MAAL,CAAY9iC,CAAZ,EAAevP,IAAhB,CAAjD,CAAT;;AACF,WAAO,IAAI4jD,SAAJ,CAAcz5B,GAAd,EAAmB,KAAKmoB,SAAxB,CAAP;AACD;;AAED4R,EAAAA,iBAAiB,GAAG;AAClB,SAAK,IAAI30C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8iC,MAAL,CAAY7zC,MAAhC,EAAwC+Q,CAAC,EAAzC,EACE,IAAI,CAAC,KAAK8iC,MAAL,CAAY9iC,CAAZ,EAAegjC,KAAf,EAAL,EAA6B,OAAO,IAAP;;AAC/B,WAAO,KAAP;AACD;;AAEDxrB,EAAAA,QAAQ,CAAC6C,GAAD,EAAMxY,GAAN,EAAW;AACjB,QAAI,CAACA,GAAL,EAAUA,GAAG,GAAGwY,GAAN;;AACV,SAAK,IAAIra,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8iC,MAAL,CAAY7zC,MAAhC,EAAwC+Q,CAAC,EAAzC,EAA6C;AAC3C,UAAI6W,KAAK,GAAG,KAAKisB,MAAL,CAAY9iC,CAAZ,CAAZ;AACA,UAAIumB,GAAG,CAAC1kB,GAAD,EAAMgV,KAAK,CAACvI,IAAN,EAAN,CAAH,IAA0B,CAA1B,IAA+BiY,GAAG,CAAClM,GAAD,EAAMxD,KAAK,CAACsF,EAAN,EAAN,CAAH,IAAwB,CAA3D,EACE,OAAOnc,CAAP;AACH;;AACD,WAAO,CAAC,CAAR;AACD;;AAvCoB;AA0CvB,AAAO,MAAM00C,KAAN,CAAY;AACjB1gD,EAAAA,WAAW,CAACusC,MAAD,EAAS9vC,IAAT,EAAe;AACxB,SAAK8vC,MAAL,GAAcA,MAAd;AAAsB,SAAK9vC,IAAL,GAAYA,IAAZ;AACvB;;AAED6d,EAAAA,IAAI,GAAG;AAAE,WAAOqY,MAAM,CAAC,KAAK4Z,MAAN,EAAc,KAAK9vC,IAAnB,CAAb;AAAuC;;AAChD0rB,EAAAA,EAAE,GAAG;AAAE,WAAOuK,MAAM,CAAC,KAAK6Z,MAAN,EAAc,KAAK9vC,IAAnB,CAAb;AAAuC;;AAC9CuyC,EAAAA,KAAK,GAAG;AAAE,WAAO,KAAKvyC,IAAL,CAAU8tB,IAAV,IAAkB,KAAKgiB,MAAL,CAAYhiB,IAA9B,IAAsC,KAAK9tB,IAAL,CAAU+qB,EAAV,IAAgB,KAAK+kB,MAAL,CAAY/kB,EAAzE;AAA6E;;AAPtE;AAWnB;AACA;;AACA,AAAO,SAASo5B,kBAAT,CAA4B51B,EAA5B,EAAgC8jB,MAAhC,EAAwCC,SAAxC,EAAmD;AACxD,MAAI8R,QAAQ,GAAG71B,EAAE,IAAIA,EAAE,CAAC5S,OAAH,CAAW0oC,kBAAhC;AACA,MAAIC,IAAI,GAAGjS,MAAM,CAACC,SAAD,CAAjB;AACAD,EAAAA,MAAM,CAAC96B,IAAP,CAAY,CAACD,CAAD,EAAIiQ,CAAJ,KAAUuO,GAAG,CAACxe,CAAC,CAACuG,IAAF,EAAD,EAAW0J,CAAC,CAAC1J,IAAF,EAAX,CAAzB;AACAy0B,EAAAA,SAAS,GAAG9jC,OAAO,CAAC6jC,MAAD,EAASiS,IAAT,CAAnB;;AACA,OAAK,IAAI/0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,QAAIgd,GAAG,GAAG8lB,MAAM,CAAC9iC,CAAD,CAAhB;AAAA,QAAqB6d,IAAI,GAAGilB,MAAM,CAAC9iC,CAAC,GAAG,CAAL,CAAlC;AACA,QAAI2lB,IAAI,GAAGY,GAAG,CAAC1I,IAAI,CAAC1B,EAAL,EAAD,EAAYa,GAAG,CAAC1O,IAAJ,EAAZ,CAAd;;AACA,QAAIumC,QAAQ,IAAI,CAAC73B,GAAG,CAACgmB,KAAJ,EAAb,GAA2Brd,IAAI,GAAG,CAAlC,GAAsCA,IAAI,IAAI,CAAlD,EAAqD;AACnD,UAAIrX,IAAI,GAAGqY,MAAM,CAAC9I,IAAI,CAACvP,IAAL,EAAD,EAAc0O,GAAG,CAAC1O,IAAJ,EAAd,CAAjB;AAAA,UAA4C6N,EAAE,GAAGuK,MAAM,CAAC7I,IAAI,CAAC1B,EAAL,EAAD,EAAYa,GAAG,CAACb,EAAJ,EAAZ,CAAvD;AACA,UAAI64B,GAAG,GAAGn3B,IAAI,CAACmlB,KAAL,KAAehmB,GAAG,CAAC1O,IAAJ,MAAc0O,GAAG,CAACvsB,IAAjC,GAAwCotB,IAAI,CAACvP,IAAL,MAAeuP,IAAI,CAACptB,IAAtE;AACA,UAAIuP,CAAC,IAAI+iC,SAAT,EAAoB,EAAEA,SAAF;AACpBD,MAAAA,MAAM,CAAC1iC,MAAP,CAAc,EAAEJ,CAAhB,EAAmB,CAAnB,EAAsB,IAAI00C,KAAJ,CAAUM,GAAG,GAAG74B,EAAH,GAAQ7N,IAArB,EAA2B0mC,GAAG,GAAG1mC,IAAH,GAAU6N,EAAxC,CAAtB;AACD;AACF;;AACD,SAAO,IAAIk4B,SAAJ,CAAcvR,MAAd,EAAsBC,SAAtB,CAAP;AACD;AAED,AAAO,SAASkS,eAAT,CAAyB1U,MAAzB,EAAiC9vC,IAAjC,EAAuC;AAC5C,SAAO,IAAI4jD,SAAJ,CAAc,CAAC,IAAIK,KAAJ,CAAUnU,MAAV,EAAkB9vC,IAAI,IAAI8vC,MAA1B,CAAD,CAAd,EAAmD,CAAnD,CAAP;AACD;;AC7ED;;AACA,AAAO,SAAS2U,SAAT,CAAmBvoB,MAAnB,EAA2B;AAChC,MAAI,CAACA,MAAM,CAACxyB,IAAZ,EAAkB,OAAOwyB,MAAM,CAACxQ,EAAd;AAClB,SAAOmK,GAAG,CAACqG,MAAM,CAACre,IAAP,CAAYiQ,IAAZ,GAAmBoO,MAAM,CAACxyB,IAAP,CAAYlL,MAA/B,GAAwC,CAAzC,EACC0rB,GAAG,CAACgS,MAAM,CAACxyB,IAAR,CAAH,CAAiBlL,MAAjB,IAA2B09B,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,IAAsB,CAAtB,GAA0B09B,MAAM,CAACre,IAAP,CAAYkN,EAAtC,GAA2C,CAAtE,CADD,CAAV;AAED;AAGD;;AACA,SAAS25B,eAAT,CAAyB96B,GAAzB,EAA8BsS,MAA9B,EAAsC;AACpC,MAAIpG,GAAG,CAAClM,GAAD,EAAMsS,MAAM,CAACre,IAAb,CAAH,GAAwB,CAA5B,EAA+B,OAAO+L,GAAP;AAC/B,MAAIkM,GAAG,CAAClM,GAAD,EAAMsS,MAAM,CAACxQ,EAAb,CAAH,IAAuB,CAA3B,EAA8B,OAAO+4B,SAAS,CAACvoB,MAAD,CAAhB;AAE9B,MAAIpO,IAAI,GAAGlE,GAAG,CAACkE,IAAJ,GAAWoO,MAAM,CAACxyB,IAAP,CAAYlL,MAAvB,IAAiC09B,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiBoO,MAAM,CAACre,IAAP,CAAYiQ,IAA9D,IAAsE,CAAjF;AAAA,MAAoF/C,EAAE,GAAGnB,GAAG,CAACmB,EAA7F;AACA,MAAInB,GAAG,CAACkE,IAAJ,IAAYoO,MAAM,CAACxQ,EAAP,CAAUoC,IAA1B,EAAgC/C,EAAE,IAAI05B,SAAS,CAACvoB,MAAD,CAAT,CAAkBnR,EAAlB,GAAuBmR,MAAM,CAACxQ,EAAP,CAAUX,EAAvC;AAChC,SAAO8K,GAAG,CAAC/H,IAAD,EAAO/C,EAAP,CAAV;AACD;;AAED,AAAO,SAAS45B,qBAAT,CAA+BpwB,GAA/B,EAAoC2H,MAApC,EAA4C;AACjD,MAAI/R,GAAG,GAAG,EAAV;;AACA,OAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe7zC,MAAnC,EAA2C+Q,CAAC,EAA5C,EAAgD;AAC9C,QAAI6W,KAAK,GAAGmO,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,CAAZ;AACA4a,IAAAA,GAAG,CAACzb,IAAJ,CAAS,IAAIu1C,KAAJ,CAAUS,eAAe,CAACt+B,KAAK,CAAC0pB,MAAP,EAAe5T,MAAf,CAAzB,EACUwoB,eAAe,CAACt+B,KAAK,CAACpmB,IAAP,EAAak8B,MAAb,CADzB,CAAT;AAED;;AACD,SAAOioB,kBAAkB,CAAC5vB,GAAG,CAAChG,EAAL,EAASpE,GAAT,EAAcoK,GAAG,CAAC6d,GAAJ,CAAQE,SAAtB,CAAzB;AACD;;AAED,SAASsS,SAAT,CAAmBh7B,GAAnB,EAAwB0R,GAAxB,EAA6BG,EAA7B,EAAiC;AAC/B,MAAI7R,GAAG,CAACkE,IAAJ,IAAYwN,GAAG,CAACxN,IAApB,EACE,OAAO+H,GAAG,CAAC4F,EAAE,CAAC3N,IAAJ,EAAUlE,GAAG,CAACmB,EAAJ,GAASuQ,GAAG,CAACvQ,EAAb,GAAkB0Q,EAAE,CAAC1Q,EAA/B,CAAV,CADF,KAGE,OAAO8K,GAAG,CAAC4F,EAAE,CAAC3N,IAAH,IAAWlE,GAAG,CAACkE,IAAJ,GAAWwN,GAAG,CAACxN,IAA1B,CAAD,EAAkClE,GAAG,CAACmB,EAAtC,CAAV;AACH;AAGD;;;AACA,AAAO,SAAS85B,kBAAT,CAA4BtwB,GAA5B,EAAiCqQ,OAAjC,EAA0CkgB,IAA1C,EAAgD;AACrD,MAAI36B,GAAG,GAAG,EAAV;AACA,MAAI46B,OAAO,GAAGlvB,GAAG,CAACtB,GAAG,CAACC,KAAL,EAAY,CAAZ,CAAjB;AAAA,MAAiCwwB,OAAO,GAAGD,OAA3C;;AACA,OAAK,IAAIx1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq1B,OAAO,CAACpmC,MAA5B,EAAoC+Q,CAAC,EAArC,EAAyC;AACvC,QAAI2sB,MAAM,GAAG0I,OAAO,CAACr1B,CAAD,CAApB;AACA,QAAIsO,IAAI,GAAG+mC,SAAS,CAAC1oB,MAAM,CAACre,IAAR,EAAcknC,OAAd,EAAuBC,OAAvB,CAApB;AACA,QAAIt5B,EAAE,GAAGk5B,SAAS,CAACH,SAAS,CAACvoB,MAAD,CAAV,EAAoB6oB,OAApB,EAA6BC,OAA7B,CAAlB;AACAD,IAAAA,OAAO,GAAG7oB,MAAM,CAACxQ,EAAjB;AACAs5B,IAAAA,OAAO,GAAGt5B,EAAV;;AACA,QAAIo5B,IAAI,IAAI,QAAZ,EAAsB;AACpB,UAAI1+B,KAAK,GAAGmO,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,CAAZ;AAAA,UAA+Bg1C,GAAG,GAAGzuB,GAAG,CAAC1P,KAAK,CAACpmB,IAAP,EAAaomB,KAAK,CAAC0pB,MAAnB,CAAH,GAAgC,CAArE;AACA3lB,MAAAA,GAAG,CAAC5a,CAAD,CAAH,GAAS,IAAI00C,KAAJ,CAAUM,GAAG,GAAG74B,EAAH,GAAQ7N,IAArB,EAA2B0mC,GAAG,GAAG1mC,IAAH,GAAU6N,EAAxC,CAAT;AACD,KAHD,MAGO;AACLvB,MAAAA,GAAG,CAAC5a,CAAD,CAAH,GAAS,IAAI00C,KAAJ,CAAUpmC,IAAV,EAAgBA,IAAhB,CAAT;AACD;AACF;;AACD,SAAO,IAAI+lC,SAAJ,CAAcz5B,GAAd,EAAmBoK,GAAG,CAAC6d,GAAJ,CAAQE,SAA3B,CAAP;AACD;;ACrDM,SAAS2S,QAAT,CAAkB12B,EAAlB,EAAsB;AAC3BA,EAAAA,EAAE,CAACgG,GAAH,CAAOhD,IAAP,GAAcM,OAAO,CAACtD,EAAE,CAAC5S,OAAJ,EAAa4S,EAAE,CAACgG,GAAH,CAAO2wB,UAApB,CAArB;AACAC,EAAAA,cAAc,CAAC52B,EAAD,CAAd;AACD;AAED,AAAO,SAAS42B,cAAT,CAAwB52B,EAAxB,EAA4B;AACjCA,EAAAA,EAAE,CAACgG,GAAH,CAAOQ,IAAP,CAAYjH,IAAI,IAAI;AAClB,QAAIA,IAAI,CAACwK,UAAT,EAAqBxK,IAAI,CAACwK,UAAL,GAAkB,IAAlB;AACrB,QAAIxK,IAAI,CAACzpB,MAAT,EAAiBypB,IAAI,CAACzpB,MAAL,GAAc,IAAd;AAClB,GAHD;AAIAkqB,EAAAA,EAAE,CAACgG,GAAH,CAAOkE,YAAP,GAAsBlK,EAAE,CAACgG,GAAH,CAAOiE,iBAAP,GAA2BjK,EAAE,CAACgG,GAAH,CAAOC,KAAxD;AACAskB,EAAAA,WAAW,CAACvqB,EAAD,EAAK,GAAL,CAAX;AACAA,EAAAA,EAAE,CAAC+D,KAAH,CAASgF,OAAT;AACA,MAAI/I,EAAE,CAACO,KAAP,EAAcgiB,SAAS,CAACviB,EAAD,CAAT;AACf;;ACRD;AACA;AACA;;AACA,AAAO,SAAS62B,iBAAT,CAA2B7wB,GAA3B,EAAgC2H,MAAhC,EAAwC;AAC7C,SAAOA,MAAM,CAACre,IAAP,CAAYkN,EAAZ,IAAkB,CAAlB,IAAuBmR,MAAM,CAACxQ,EAAP,CAAUX,EAAV,IAAgB,CAAvC,IAA4Cb,GAAG,CAACgS,MAAM,CAACxyB,IAAR,CAAH,IAAoB,EAAhE,KACJ,CAAC6qB,GAAG,CAAChG,EAAL,IAAWgG,GAAG,CAAChG,EAAJ,CAAO5S,OAAP,CAAe0pC,qBADtB,CAAP;AAED;;AAGD,AAAO,SAASC,SAAT,CAAmB/wB,GAAnB,EAAwB2H,MAAxB,EAAgCf,WAAhC,EAA6C4E,cAA7C,EAA6D;AAClE,WAASwlB,QAAT,CAAkB78B,CAAlB,EAAqB;AAAC,WAAOyS,WAAW,GAAGA,WAAW,CAACzS,CAAD,CAAd,GAAoB,IAAtC;AAA2C;;AACjE,WAASwxB,MAAT,CAAgBpsB,IAAhB,EAAsBpkB,IAAtB,EAA4BkxB,KAA5B,EAAmC;AACjCoF,IAAAA,UAAU,CAAClS,IAAD,EAAOpkB,IAAP,EAAakxB,KAAb,EAAoBmF,cAApB,CAAV;AACAuE,IAAAA,WAAW,CAACxW,IAAD,EAAO,QAAP,EAAiBA,IAAjB,EAAuBoO,MAAvB,CAAX;AACD;;AACD,WAASspB,QAAT,CAAkBl/B,KAAlB,EAAyBlV,GAAzB,EAA8B;AAC5B,QAAI3G,MAAM,GAAG,EAAb;;AACA,SAAK,IAAI8E,CAAC,GAAG+W,KAAb,EAAoB/W,CAAC,GAAG6B,GAAxB,EAA6B,EAAE7B,CAA/B,EACE9E,MAAM,CAACiE,IAAP,CAAY,IAAIoxB,IAAJ,CAASp2B,IAAI,CAAC6F,CAAD,CAAb,EAAkBg2C,QAAQ,CAACh2C,CAAD,CAA1B,EAA+BwwB,cAA/B,CAAZ;;AACF,WAAOt1B,MAAP;AACD;;AAED,MAAIoT,IAAI,GAAGqe,MAAM,CAACre,IAAlB;AAAA,MAAwB6N,EAAE,GAAGwQ,MAAM,CAACxQ,EAApC;AAAA,MAAwChiB,IAAI,GAAGwyB,MAAM,CAACxyB,IAAtD;AACA,MAAI+7C,SAAS,GAAGnxB,OAAO,CAACC,GAAD,EAAM1W,IAAI,CAACiQ,IAAX,CAAvB;AAAA,MAAyCoR,QAAQ,GAAG5K,OAAO,CAACC,GAAD,EAAM7I,EAAE,CAACoC,IAAT,CAA3D;AACA,MAAI43B,QAAQ,GAAGx7B,GAAG,CAACxgB,IAAD,CAAlB;AAAA,MAA0Bi8C,SAAS,GAAGJ,QAAQ,CAAC77C,IAAI,CAAClL,MAAL,GAAc,CAAf,CAA9C;AAAA,MAAiEonD,MAAM,GAAGl6B,EAAE,CAACoC,IAAH,GAAUjQ,IAAI,CAACiQ,IAAzF,CAfkE;;AAkBlE,MAAIoO,MAAM,CAACC,IAAX,EAAiB;AACf5H,IAAAA,GAAG,CAACrjB,MAAJ,CAAW,CAAX,EAAcs0C,QAAQ,CAAC,CAAD,EAAI97C,IAAI,CAAClL,MAAT,CAAtB;AACA+1B,IAAAA,GAAG,CAACpoB,MAAJ,CAAWzC,IAAI,CAAClL,MAAhB,EAAwB+1B,GAAG,CAAClzB,IAAJ,GAAWqI,IAAI,CAAClL,MAAxC;AACD,GAHD,MAGO,IAAI4mD,iBAAiB,CAAC7wB,GAAD,EAAM2H,MAAN,CAArB,EAAoC;AACzC;AACA;AACA,QAAI2pB,KAAK,GAAGL,QAAQ,CAAC,CAAD,EAAI97C,IAAI,CAAClL,MAAL,GAAc,CAAlB,CAApB;AACA07C,IAAAA,MAAM,CAAChb,QAAD,EAAWA,QAAQ,CAACx1B,IAApB,EAA0Bi8C,SAA1B,CAAN;AACA,QAAIC,MAAJ,EAAYrxB,GAAG,CAACpoB,MAAJ,CAAW0R,IAAI,CAACiQ,IAAhB,EAAsB83B,MAAtB;AACZ,QAAIC,KAAK,CAACrnD,MAAV,EAAkB+1B,GAAG,CAACrjB,MAAJ,CAAW2M,IAAI,CAACiQ,IAAhB,EAAsB+3B,KAAtB;AACnB,GAPM,MAOA,IAAIJ,SAAS,IAAIvmB,QAAjB,EAA2B;AAChC,QAAIx1B,IAAI,CAAClL,MAAL,IAAe,CAAnB,EAAsB;AACpB07C,MAAAA,MAAM,CAACuL,SAAD,EAAYA,SAAS,CAAC/7C,IAAV,CAAeY,KAAf,CAAqB,CAArB,EAAwBuT,IAAI,CAACkN,EAA7B,IAAmC26B,QAAnC,GAA8CD,SAAS,CAAC/7C,IAAV,CAAeY,KAAf,CAAqBohB,EAAE,CAACX,EAAxB,CAA1D,EAAuF46B,SAAvF,CAAN;AACD,KAFD,MAEO;AACL,UAAIE,KAAK,GAAGL,QAAQ,CAAC,CAAD,EAAI97C,IAAI,CAAClL,MAAL,GAAc,CAAlB,CAApB;AACAqnD,MAAAA,KAAK,CAACn3C,IAAN,CAAW,IAAIoxB,IAAJ,CAAS4lB,QAAQ,GAAGD,SAAS,CAAC/7C,IAAV,CAAeY,KAAf,CAAqBohB,EAAE,CAACX,EAAxB,CAApB,EAAiD46B,SAAjD,EAA4D5lB,cAA5D,CAAX;AACAma,MAAAA,MAAM,CAACuL,SAAD,EAAYA,SAAS,CAAC/7C,IAAV,CAAeY,KAAf,CAAqB,CAArB,EAAwBuT,IAAI,CAACkN,EAA7B,IAAmCrhB,IAAI,CAAC,CAAD,CAAnD,EAAwD67C,QAAQ,CAAC,CAAD,CAAhE,CAAN;AACAhxB,MAAAA,GAAG,CAACrjB,MAAJ,CAAW2M,IAAI,CAACiQ,IAAL,GAAY,CAAvB,EAA0B+3B,KAA1B;AACD;AACF,GATM,MASA,IAAIn8C,IAAI,CAAClL,MAAL,IAAe,CAAnB,EAAsB;AAC3B07C,IAAAA,MAAM,CAACuL,SAAD,EAAYA,SAAS,CAAC/7C,IAAV,CAAeY,KAAf,CAAqB,CAArB,EAAwBuT,IAAI,CAACkN,EAA7B,IAAmCrhB,IAAI,CAAC,CAAD,CAAvC,GAA6Cw1B,QAAQ,CAACx1B,IAAT,CAAcY,KAAd,CAAoBohB,EAAE,CAACX,EAAvB,CAAzD,EAAqFw6B,QAAQ,CAAC,CAAD,CAA7F,CAAN;AACAhxB,IAAAA,GAAG,CAACpoB,MAAJ,CAAW0R,IAAI,CAACiQ,IAAL,GAAY,CAAvB,EAA0B83B,MAA1B;AACD,GAHM,MAGA;AACL1L,IAAAA,MAAM,CAACuL,SAAD,EAAYA,SAAS,CAAC/7C,IAAV,CAAeY,KAAf,CAAqB,CAArB,EAAwBuT,IAAI,CAACkN,EAA7B,IAAmCrhB,IAAI,CAAC,CAAD,CAAnD,EAAwD67C,QAAQ,CAAC,CAAD,CAAhE,CAAN;AACArL,IAAAA,MAAM,CAAChb,QAAD,EAAWwmB,QAAQ,GAAGxmB,QAAQ,CAACx1B,IAAT,CAAcY,KAAd,CAAoBohB,EAAE,CAACX,EAAvB,CAAtB,EAAkD46B,SAAlD,CAAN;AACA,QAAIE,KAAK,GAAGL,QAAQ,CAAC,CAAD,EAAI97C,IAAI,CAAClL,MAAL,GAAc,CAAlB,CAApB;AACA,QAAIonD,MAAM,GAAG,CAAb,EAAgBrxB,GAAG,CAACpoB,MAAJ,CAAW0R,IAAI,CAACiQ,IAAL,GAAY,CAAvB,EAA0B83B,MAAM,GAAG,CAAnC;AAChBrxB,IAAAA,GAAG,CAACrjB,MAAJ,CAAW2M,IAAI,CAACiQ,IAAL,GAAY,CAAvB,EAA0B+3B,KAA1B;AACD;;AAEDvhB,EAAAA,WAAW,CAAC/P,GAAD,EAAM,QAAN,EAAgBA,GAAhB,EAAqB2H,MAArB,CAAX;AACD;;AAGD,AAAO,SAAS4pB,UAAT,CAAoBvxB,GAApB,EAAyBzM,CAAzB,EAA4Bi+B,cAA5B,EAA4C;AACjD,WAASC,SAAT,CAAmBzxB,GAAnB,EAAwB0xB,IAAxB,EAA8BC,UAA9B,EAA0C;AACxC,QAAI3xB,GAAG,CAAC4xB,MAAR,EAAgB,KAAK,IAAI52C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC4xB,MAAJ,CAAW3nD,MAA/B,EAAuC,EAAE+Q,CAAzC,EAA4C;AAC1D,UAAI62C,GAAG,GAAG7xB,GAAG,CAAC4xB,MAAJ,CAAW52C,CAAX,CAAV;AACA,UAAI62C,GAAG,CAAC7xB,GAAJ,IAAW0xB,IAAf,EAAqB;AACrB,UAAII,MAAM,GAAGH,UAAU,IAAIE,GAAG,CAACF,UAA/B;AACA,UAAIH,cAAc,IAAI,CAACM,MAAvB,EAA+B;AAC/Bv+B,MAAAA,CAAC,CAACs+B,GAAG,CAAC7xB,GAAL,EAAU8xB,MAAV,CAAD;AACAL,MAAAA,SAAS,CAACI,GAAG,CAAC7xB,GAAL,EAAUA,GAAV,EAAe8xB,MAAf,CAAT;AACD;AACF;;AACDL,EAAAA,SAAS,CAACzxB,GAAD,EAAM,IAAN,EAAY,IAAZ,CAAT;AACD;;AAGD,AAAO,SAAS+xB,SAAT,CAAmB/3B,EAAnB,EAAuBgG,GAAvB,EAA4B;AACjC,MAAIA,GAAG,CAAChG,EAAR,EAAY,MAAM,IAAI5lB,KAAJ,CAAU,kCAAV,CAAN;AACZ4lB,EAAAA,EAAE,CAACgG,GAAH,GAASA,GAAT;AACAA,EAAAA,GAAG,CAAChG,EAAJ,GAASA,EAAT;AACA8hB,EAAAA,mBAAmB,CAAC9hB,EAAD,CAAnB;AACA02B,EAAAA,QAAQ,CAAC12B,EAAD,CAAR;AACAg4B,EAAAA,iBAAiB,CAACh4B,EAAD,CAAjB;AACAA,EAAAA,EAAE,CAAC5S,OAAH,CAAWpP,SAAX,GAAuBgoB,GAAG,CAAChoB,SAA3B;AACA,MAAI,CAACgiB,EAAE,CAAC5S,OAAH,CAAW4tB,YAAhB,EAA8B9J,WAAW,CAAClR,EAAD,CAAX;AAC9BA,EAAAA,EAAE,CAAC5S,OAAH,CAAW4V,IAAX,GAAkBgD,GAAG,CAAC2wB,UAAtB;AACApU,EAAAA,SAAS,CAACviB,EAAD,CAAT;AACD;;AAED,SAASg4B,iBAAT,CAA2Bh4B,EAA3B,EAA+B;AAC7B,AAAC,GAACA,EAAE,CAACgG,GAAH,CAAOhoB,SAAP,IAAoB,KAApB,GAA4B8a,QAA5B,GAAuCjC,OAAxC,EAAiDmJ,EAAE,CAACplB,OAAH,CAAW4sC,OAA5D,EAAqE,gBAArE;AACF;;AAED,AAAO,SAASyQ,gBAAT,CAA0Bj4B,EAA1B,EAA8B;AACnC2vB,EAAAA,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AAChBg4B,IAAAA,iBAAiB,CAACh4B,EAAD,CAAjB;AACAuiB,IAAAA,SAAS,CAACviB,EAAD,CAAT;AACD,GAHM,CAAP;AAID;;ACrGM,SAASk4B,OAAT,CAAiBr5B,IAAjB,EAAuB;AAC5B;AACA;AACA;AACA,OAAKs5B,IAAL,GAAY,EAAZ;AAAgB,OAAKC,MAAL,GAAc,EAAd;AAChB,OAAKC,SAAL,GAAiBx5B,IAAI,GAAGA,IAAI,CAACw5B,SAAR,GAAoB5jB,QAAzC,CAL4B;AAO5B;;AACA,OAAK6jB,WAAL,GAAmB,KAAKC,WAAL,GAAmB,CAAtC;AACA,OAAKC,MAAL,GAAc,KAAKC,SAAL,GAAiB,IAA/B;AACA,OAAKC,UAAL,GAAkB,KAAKC,aAAL,GAAqB,IAAvC,CAV4B;;AAY5B,OAAKC,UAAL,GAAkB,KAAKC,aAAL,GAAqBh6B,IAAI,GAAGA,IAAI,CAACg6B,aAAR,GAAwB,CAAnE;AACD;AAGD;;AACA,AAAO,SAASC,uBAAT,CAAiC9yB,GAAjC,EAAsC2H,MAAtC,EAA8C;AACnD,MAAIorB,UAAU,GAAG;AAACzpC,IAAAA,IAAI,EAAEmY,OAAO,CAACkG,MAAM,CAACre,IAAR,CAAd;AAA6B6N,IAAAA,EAAE,EAAE+4B,SAAS,CAACvoB,MAAD,CAA1C;AAAoDxyB,IAAAA,IAAI,EAAEorB,UAAU,CAACP,GAAD,EAAM2H,MAAM,CAACre,IAAb,EAAmBqe,MAAM,CAACxQ,EAA1B;AAApE,GAAjB;AACA67B,EAAAA,gBAAgB,CAAChzB,GAAD,EAAM+yB,UAAN,EAAkBprB,MAAM,CAACre,IAAP,CAAYiQ,IAA9B,EAAoCoO,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiB,CAArD,CAAhB;AACAg4B,EAAAA,UAAU,CAACvxB,GAAD,EAAMA,GAAG,IAAIgzB,gBAAgB,CAAChzB,GAAD,EAAM+yB,UAAN,EAAkBprB,MAAM,CAACre,IAAP,CAAYiQ,IAA9B,EAAoCoO,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiB,CAArD,CAA7B,EAAsF,IAAtF,CAAV;AACA,SAAOw5B,UAAP;AACD;AAGD;;AACA,SAASE,oBAAT,CAA8Br+B,KAA9B,EAAqC;AACnC,SAAOA,KAAK,CAAC3qB,MAAb,EAAqB;AACnB,QAAIuM,IAAI,GAAGmf,GAAG,CAACf,KAAD,CAAd;AACA,QAAIpe,IAAI,CAACsnC,MAAT,EAAiBlpB,KAAK,CAAC7rB,GAAN,GAAjB,KACK;AACN;AACF;AAGD;;;AACA,SAASmqD,eAAT,CAAyBC,IAAzB,EAA+B1I,KAA/B,EAAsC;AACpC,MAAIA,KAAJ,EAAW;AACTwI,IAAAA,oBAAoB,CAACE,IAAI,CAAChB,IAAN,CAApB;AACA,WAAOx8B,GAAG,CAACw9B,IAAI,CAAChB,IAAN,CAAV;AACD,GAHD,MAGO,IAAIgB,IAAI,CAAChB,IAAL,CAAUloD,MAAV,IAAoB,CAAC0rB,GAAG,CAACw9B,IAAI,CAAChB,IAAN,CAAH,CAAerU,MAAxC,EAAgD;AACrD,WAAOnoB,GAAG,CAACw9B,IAAI,CAAChB,IAAN,CAAV;AACD,GAFM,MAEA,IAAIgB,IAAI,CAAChB,IAAL,CAAUloD,MAAV,GAAmB,CAAnB,IAAwB,CAACkpD,IAAI,CAAChB,IAAL,CAAUgB,IAAI,CAAChB,IAAL,CAAUloD,MAAV,GAAmB,CAA7B,EAAgC6zC,MAA7D,EAAqE;AAC1EqV,IAAAA,IAAI,CAAChB,IAAL,CAAUppD,GAAV;AACA,WAAO4sB,GAAG,CAACw9B,IAAI,CAAChB,IAAN,CAAV;AACD;AACF;AAGD;AACA;;;AACA,AAAO,SAASiB,kBAAT,CAA4BpzB,GAA5B,EAAiC2H,MAAjC,EAAyC0rB,QAAzC,EAAmDC,IAAnD,EAAyD;AAC9D,MAAIH,IAAI,GAAGnzB,GAAG,CAACuzB,OAAf;AACAJ,EAAAA,IAAI,CAACf,MAAL,CAAYnoD,MAAZ,GAAqB,CAArB;AACA,MAAIqqB,IAAI,GAAG,CAAC,IAAIzhB,IAAJ,EAAZ;AAAA,MAAsBmlB,GAAtB;AACA,MAAIxhB,IAAJ;;AAEA,MAAI,CAAC28C,IAAI,CAACX,MAAL,IAAec,IAAf,IACAH,IAAI,CAACT,UAAL,IAAmB/qB,MAAM,CAACx9B,MAA1B,IAAoCw9B,MAAM,CAACx9B,MAA3C,KACEw9B,MAAM,CAACx9B,MAAP,CAAc6sB,MAAd,CAAqB,CAArB,KAA2B,GAA3B,IAAkCm8B,IAAI,CAACb,WAAL,GAAmBh+B,IAAI,IAAI0L,GAAG,CAAChG,EAAJ,GAASgG,GAAG,CAAChG,EAAJ,CAAO5S,OAAP,CAAeosC,iBAAxB,GAA4C,GAAhD,CAA1D,IACA7rB,MAAM,CAACx9B,MAAP,CAAc6sB,MAAd,CAAqB,CAArB,KAA2B,GAF5B,CADD,MAICgB,GAAG,GAAGk7B,eAAe,CAACC,IAAD,EAAOA,IAAI,CAACX,MAAL,IAAec,IAAtB,CAJtB,CAAJ,EAIwD;AACtD;AACA98C,IAAAA,IAAI,GAAGmf,GAAG,CAACqC,GAAG,CAACqY,OAAL,CAAV;;AACA,QAAI9O,GAAG,CAACoG,MAAM,CAACre,IAAR,EAAcqe,MAAM,CAACxQ,EAArB,CAAH,IAA+B,CAA/B,IAAoCoK,GAAG,CAACoG,MAAM,CAACre,IAAR,EAAc9S,IAAI,CAAC2gB,EAAnB,CAAH,IAA6B,CAArE,EAAwE;AACtE;AACA;AACA3gB,MAAAA,IAAI,CAAC2gB,EAAL,GAAU+4B,SAAS,CAACvoB,MAAD,CAAnB;AACD,KAJD,MAIO;AACL;AACA3P,MAAAA,GAAG,CAACqY,OAAJ,CAAYl2B,IAAZ,CAAiB24C,uBAAuB,CAAC9yB,GAAD,EAAM2H,MAAN,CAAxC;AACD;AACF,GAfD,MAeO;AACL;AACA,QAAI5O,MAAM,GAAGpD,GAAG,CAACw9B,IAAI,CAAChB,IAAN,CAAhB;AACA,QAAI,CAACp5B,MAAD,IAAW,CAACA,MAAM,CAAC+kB,MAAvB,EACE2V,sBAAsB,CAACzzB,GAAG,CAAC6d,GAAL,EAAUsV,IAAI,CAAChB,IAAf,CAAtB;AACFn6B,IAAAA,GAAG,GAAG;AAACqY,MAAAA,OAAO,EAAE,CAACyiB,uBAAuB,CAAC9yB,GAAD,EAAM2H,MAAN,CAAxB,CAAV;AACCirB,MAAAA,UAAU,EAAEO,IAAI,CAACP;AADlB,KAAN;AAEAO,IAAAA,IAAI,CAAChB,IAAL,CAAUh4C,IAAV,CAAe6d,GAAf;;AACA,WAAOm7B,IAAI,CAAChB,IAAL,CAAUloD,MAAV,GAAmBkpD,IAAI,CAACd,SAA/B,EAA0C;AACxCc,MAAAA,IAAI,CAAChB,IAAL,CAAUj0C,KAAV;AACA,UAAI,CAACi1C,IAAI,CAAChB,IAAL,CAAU,CAAV,EAAarU,MAAlB,EAA0BqV,IAAI,CAAChB,IAAL,CAAUj0C,KAAV;AAC3B;AACF;;AACDi1C,EAAAA,IAAI,CAAChB,IAAL,CAAUh4C,IAAV,CAAek5C,QAAf;AACAF,EAAAA,IAAI,CAACP,UAAL,GAAkB,EAAEO,IAAI,CAACN,aAAzB;AACAM,EAAAA,IAAI,CAACb,WAAL,GAAmBa,IAAI,CAACZ,WAAL,GAAmBj+B,IAAtC;AACA6+B,EAAAA,IAAI,CAACX,MAAL,GAAcW,IAAI,CAACV,SAAL,GAAiBa,IAA/B;AACAH,EAAAA,IAAI,CAACT,UAAL,GAAkBS,IAAI,CAACR,aAAL,GAAqBhrB,MAAM,CAACx9B,MAA9C;AAEA,MAAI,CAACqM,IAAL,EAAWsjB,MAAM,CAACkG,GAAD,EAAM,cAAN,CAAN;AACZ;;AAED,SAAS0zB,yBAAT,CAAmC1zB,GAAnC,EAAwC71B,MAAxC,EAAgD0uB,IAAhD,EAAsDglB,GAAtD,EAA2D;AACzD,MAAIrnB,EAAE,GAAGrsB,MAAM,CAAC6sB,MAAP,CAAc,CAAd,CAAT;AACA,SAAOR,EAAE,IAAI,GAAN,IACLA,EAAE,IAAI,GAAN,IACAqC,IAAI,CAACilB,MAAL,CAAY7zC,MAAZ,IAAsB4zC,GAAG,CAACC,MAAJ,CAAW7zC,MADjC,IAEA4uB,IAAI,CAAC82B,iBAAL,MAA4B9R,GAAG,CAAC8R,iBAAJ,EAF5B,IAGA,IAAI98C,IAAJ,KAAWmtB,GAAG,CAACuzB,OAAJ,CAAYhB,WAAvB,KAAuCvyB,GAAG,CAAChG,EAAJ,GAASgG,GAAG,CAAChG,EAAJ,CAAO5S,OAAP,CAAeosC,iBAAxB,GAA4C,GAAnF,CAJF;AAKD;AAGD;AACA;AACA;;;AACA,AAAO,SAASG,qBAAT,CAA+B3zB,GAA/B,EAAoC6d,GAApC,EAAyCyV,IAAzC,EAA+ClsC,OAA/C,EAAwD;AAC7D,MAAI+rC,IAAI,GAAGnzB,GAAG,CAACuzB,OAAf;AAAA,MAAwBppD,MAAM,GAAGid,OAAO,IAAIA,OAAO,CAACjd,MAApD,CAD6D;AAI7D;AACA;AACA;;AACA,MAAImpD,IAAI,IAAIH,IAAI,CAACV,SAAb,IACCtoD,MAAM,IAAIgpD,IAAI,CAACR,aAAL,IAAsBxoD,MAAhC,KACCgpD,IAAI,CAACb,WAAL,IAAoBa,IAAI,CAACZ,WAAzB,IAAwCY,IAAI,CAACT,UAAL,IAAmBvoD,MAA3D,IACAupD,yBAAyB,CAAC1zB,GAAD,EAAM71B,MAAN,EAAcwrB,GAAG,CAACw9B,IAAI,CAAChB,IAAN,CAAjB,EAA8BtU,GAA9B,CAF1B,CADL,EAIEsV,IAAI,CAAChB,IAAL,CAAUgB,IAAI,CAAChB,IAAL,CAAUloD,MAAV,GAAmB,CAA7B,IAAkC4zC,GAAlC,CAJF,KAME4V,sBAAsB,CAAC5V,GAAD,EAAMsV,IAAI,CAAChB,IAAX,CAAtB;AAEFgB,EAAAA,IAAI,CAACZ,WAAL,GAAmB,CAAC,IAAI1/C,IAAJ,EAApB;AACAsgD,EAAAA,IAAI,CAACR,aAAL,GAAqBxoD,MAArB;AACAgpD,EAAAA,IAAI,CAACV,SAAL,GAAiBa,IAAjB;AACA,MAAIlsC,OAAO,IAAIA,OAAO,CAACwsC,SAAR,KAAsB,KAArC,EACEX,oBAAoB,CAACE,IAAI,CAACf,MAAN,CAApB;AACH;AAED,AAAO,SAASqB,sBAAT,CAAgC5V,GAAhC,EAAqCgW,IAArC,EAA2C;AAChD,MAAI1oC,GAAG,GAAGwK,GAAG,CAACk+B,IAAD,CAAb;AACA,MAAI,EAAE1oC,GAAG,IAAIA,GAAG,CAAC2yB,MAAX,IAAqB3yB,GAAG,CAACmkC,MAAJ,CAAWzR,GAAX,CAAvB,CAAJ,EACEgW,IAAI,CAAC15C,IAAL,CAAU0jC,GAAV;AACH;;AAGD,SAASmV,gBAAT,CAA0BhzB,GAA1B,EAA+B2H,MAA/B,EAAuCre,IAAvC,EAA6C6N,EAA7C,EAAiD;AAC/C,MAAI28B,QAAQ,GAAGnsB,MAAM,CAAC,WAAW3H,GAAG,CAACzoB,EAAhB,CAArB;AAAA,MAA0C4c,CAAC,GAAG,CAA9C;AACA6L,EAAAA,GAAG,CAACQ,IAAJ,CAASztB,IAAI,CAAC4kB,GAAL,CAASqI,GAAG,CAACC,KAAb,EAAoB3W,IAApB,CAAT,EAAoCvW,IAAI,CAACyiB,GAAL,CAASwK,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAzB,EAA+BqqB,EAA/B,CAApC,EAAwEoC,IAAI,IAAI;AAC9E,QAAIA,IAAI,CAACqN,WAAT,EACE,CAACktB,QAAQ,KAAKA,QAAQ,GAAGnsB,MAAM,CAAC,WAAW3H,GAAG,CAACzoB,EAAhB,CAAN,GAA4B,EAA5C,CAAT,EAA0D4c,CAA1D,IAA+DoF,IAAI,CAACqN,WAApE;AACF,MAAEzS,CAAF;AACD,GAJD;AAKD;AAGD;;;AACA,SAAS4/B,kBAAT,CAA4B1tB,KAA5B,EAAmC;AACjC,MAAI,CAACA,KAAL,EAAY,OAAO,IAAP;AACZ,MAAIzQ,GAAJ;;AACA,OAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,QAAIqrB,KAAK,CAACrrB,CAAD,CAAL,CAASmrB,MAAT,CAAgB6tB,iBAApB,EAAuC;AAAE,UAAI,CAACp+B,GAAL,EAAUA,GAAG,GAAGyQ,KAAK,CAACtwB,KAAN,CAAY,CAAZ,EAAeiF,CAAf,CAAN;AAAyB,KAA5E,MACK,IAAI4a,GAAJ,EAASA,GAAG,CAACzb,IAAJ,CAASksB,KAAK,CAACrrB,CAAD,CAAd;AACf;;AACD,SAAO,CAAC4a,GAAD,GAAOyQ,KAAP,GAAezQ,GAAG,CAAC3rB,MAAJ,GAAa2rB,GAAb,GAAmB,IAAzC;AACD;;;AAGD,SAASq+B,WAAT,CAAqBj0B,GAArB,EAA0B2H,MAA1B,EAAkC;AAChC,MAAIlQ,KAAK,GAAGkQ,MAAM,CAAC,WAAW3H,GAAG,CAACzoB,EAAhB,CAAlB;AACA,MAAI,CAACkgB,KAAL,EAAY,OAAO,IAAP;AACZ,MAAIyP,EAAE,GAAG,EAAT;;AACA,OAAK,IAAIlsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2sB,MAAM,CAACxyB,IAAP,CAAYlL,MAAhC,EAAwC,EAAE+Q,CAA1C,EACEksB,EAAE,CAAC/sB,IAAH,CAAQ45C,kBAAkB,CAACt8B,KAAK,CAACzc,CAAD,CAAN,CAA1B;;AACF,SAAOksB,EAAP;AACD;AAGD;AACA;AACA;;;AACA,AAAO,SAASgtB,aAAT,CAAuBl0B,GAAvB,EAA4B2H,MAA5B,EAAoC;AACzC,MAAIZ,GAAG,GAAGktB,WAAW,CAACj0B,GAAD,EAAM2H,MAAN,CAArB;AACA,MAAIwsB,SAAS,GAAGzsB,sBAAsB,CAAC1H,GAAD,EAAM2H,MAAN,CAAtC;AACA,MAAI,CAACZ,GAAL,EAAU,OAAOotB,SAAP;AACV,MAAI,CAACA,SAAL,EAAgB,OAAOptB,GAAP;;AAEhB,OAAK,IAAI/rB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+rB,GAAG,CAAC98B,MAAxB,EAAgC,EAAE+Q,CAAlC,EAAqC;AACnC,QAAIo5C,MAAM,GAAGrtB,GAAG,CAAC/rB,CAAD,CAAhB;AAAA,QAAqBq5C,UAAU,GAAGF,SAAS,CAACn5C,CAAD,CAA3C;;AACA,QAAIo5C,MAAM,IAAIC,UAAd,EAA0B;AACxBhuB,MAAAA,KAAK,EAAE,KAAK,IAAIvN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGu7B,UAAU,CAACpqD,MAA/B,EAAuC,EAAE6uB,CAAzC,EAA4C;AACjD,YAAIwN,IAAI,GAAG+tB,UAAU,CAACv7B,CAAD,CAArB;;AACA,aAAK,IAAIha,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs1C,MAAM,CAACnqD,MAA3B,EAAmC,EAAE6U,CAArC,EACE,IAAIs1C,MAAM,CAACt1C,CAAD,CAAN,CAAUqnB,MAAV,IAAoBG,IAAI,CAACH,MAA7B,EAAqC,SAASE,KAAT;;AACvC+tB,QAAAA,MAAM,CAACj6C,IAAP,CAAYmsB,IAAZ;AACD;AACF,KAPD,MAOO,IAAI+tB,UAAJ,EAAgB;AACrBttB,MAAAA,GAAG,CAAC/rB,CAAD,CAAH,GAASq5C,UAAT;AACD;AACF;;AACD,SAAOttB,GAAP;AACD;AAGD;;AACA,AAAO,SAASutB,gBAAT,CAA0BxJ,MAA1B,EAAkCyJ,QAAlC,EAA4CC,cAA5C,EAA4D;AACjE,MAAI9xB,IAAI,GAAG,EAAX;;AACA,OAAK,IAAI1nB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8vC,MAAM,CAAC7gD,MAA3B,EAAmC,EAAE+Q,CAArC,EAAwC;AACtC,QAAI5M,KAAK,GAAG08C,MAAM,CAAC9vC,CAAD,CAAlB;;AACA,QAAI5M,KAAK,CAAC0vC,MAAV,EAAkB;AAChBpb,MAAAA,IAAI,CAACvoB,IAAL,CAAUq6C,cAAc,GAAGnF,SAAS,CAAClvC,SAAV,CAAoBsvC,QAApB,CAA6Bz5C,IAA7B,CAAkC5H,KAAlC,CAAH,GAA8CA,KAAtE;AACA;AACD;;AACD,QAAIiiC,OAAO,GAAGjiC,KAAK,CAACiiC,OAApB;AAAA,QAA6BokB,UAAU,GAAG,EAA1C;AACA/xB,IAAAA,IAAI,CAACvoB,IAAL,CAAU;AAACk2B,MAAAA,OAAO,EAAEokB;AAAV,KAAV;;AACA,SAAK,IAAI37B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuX,OAAO,CAACpmC,MAA5B,EAAoC,EAAE6uB,CAAtC,EAAyC;AACvC,UAAI6O,MAAM,GAAG0I,OAAO,CAACvX,CAAD,CAApB;AAAA,UAAyBE,CAAzB;AACAy7B,MAAAA,UAAU,CAACt6C,IAAX,CAAgB;AAACmP,QAAAA,IAAI,EAAEqe,MAAM,CAACre,IAAd;AAAoB6N,QAAAA,EAAE,EAAEwQ,MAAM,CAACxQ,EAA/B;AAAmChiB,QAAAA,IAAI,EAAEwyB,MAAM,CAACxyB;AAAhD,OAAhB;AACA,UAAIo/C,QAAJ,EAAc,KAAK,IAAI3gC,IAAT,IAAiB+T,MAAjB,EAAyB,IAAI3O,CAAC,GAAGpF,IAAI,CAAC1F,KAAL,CAAW,eAAX,CAAR,EAAqC;AAC1E,YAAIjU,OAAO,CAACs6C,QAAD,EAAWltD,MAAM,CAAC2xB,CAAC,CAAC,CAAD,CAAF,CAAjB,CAAP,GAAkC,CAAC,CAAvC,EAA0C;AACxCrD,UAAAA,GAAG,CAAC8+B,UAAD,CAAH,CAAgB7gC,IAAhB,IAAwB+T,MAAM,CAAC/T,IAAD,CAA9B;AACA,iBAAO+T,MAAM,CAAC/T,IAAD,CAAb;AACD;AACF;AACF;AACF;;AACD,SAAO8O,IAAP;AACD;;ACxND;AACA;AAEA;AACA;AACA;AACA;;AACA,AAAO,SAASgyB,WAAT,CAAqB7iC,KAArB,EAA4BpmB,IAA5B,EAAkCkuC,KAAlC,EAAyC0R,MAAzC,EAAiD;AACtD,MAAIA,MAAJ,EAAY;AACV,QAAI9P,MAAM,GAAG1pB,KAAK,CAAC0pB,MAAnB;;AACA,QAAI5B,KAAJ,EAAW;AACT,UAAIgb,SAAS,GAAGpzB,GAAG,CAAC91B,IAAD,EAAO8vC,MAAP,CAAH,GAAoB,CAApC;;AACA,UAAIoZ,SAAS,IAAKpzB,GAAG,CAACoY,KAAD,EAAQ4B,MAAR,CAAH,GAAqB,CAAvC,EAA2C;AACzCA,QAAAA,MAAM,GAAG9vC,IAAT;AACAA,QAAAA,IAAI,GAAGkuC,KAAP;AACD,OAHD,MAGO,IAAIgb,SAAS,IAAKpzB,GAAG,CAAC91B,IAAD,EAAOkuC,KAAP,CAAH,GAAmB,CAArC,EAAyC;AAC9CluC,QAAAA,IAAI,GAAGkuC,KAAP;AACD;AACF;;AACD,WAAO,IAAI+V,KAAJ,CAAUnU,MAAV,EAAkB9vC,IAAlB,CAAP;AACD,GAZD,MAYO;AACL,WAAO,IAAIikD,KAAJ,CAAU/V,KAAK,IAAIluC,IAAnB,EAAyBA,IAAzB,CAAP;AACD;AACF;;AAGD,AAAO,SAASmpD,eAAT,CAAyB50B,GAAzB,EAA8Bv0B,IAA9B,EAAoCkuC,KAApC,EAA2CvyB,OAA3C,EAAoDikC,MAApD,EAA4D;AACjE,MAAIA,MAAM,IAAI,IAAd,EAAoBA,MAAM,GAAGrrB,GAAG,CAAChG,EAAJ,KAAWgG,GAAG,CAAChG,EAAJ,CAAOplB,OAAP,CAAesJ,KAAf,IAAwB8hB,GAAG,CAACqrB,MAAvC,CAAT;AACpBwJ,EAAAA,YAAY,CAAC70B,GAAD,EAAM,IAAIqvB,SAAJ,CAAc,CAACqF,WAAW,CAAC10B,GAAG,CAAC6d,GAAJ,CAAQJ,OAAR,EAAD,EAAoBhyC,IAApB,EAA0BkuC,KAA1B,EAAiC0R,MAAjC,CAAZ,CAAd,EAAqE,CAArE,CAAN,EAA+EjkC,OAA/E,CAAZ;AACD;AAGD;;AACA,AAAO,SAAS0tC,gBAAT,CAA0B90B,GAA1B,EAA+B+0B,KAA/B,EAAsC3tC,OAAtC,EAA+C;AACpD,MAAIwO,GAAG,GAAG,EAAV;AACA,MAAIy1B,MAAM,GAAGrrB,GAAG,CAAChG,EAAJ,KAAWgG,GAAG,CAAChG,EAAJ,CAAOplB,OAAP,CAAesJ,KAAf,IAAwB8hB,GAAG,CAACqrB,MAAvC,CAAb;;AACA,OAAK,IAAIrwC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe7zC,MAAnC,EAA2C+Q,CAAC,EAA5C,EACE4a,GAAG,CAAC5a,CAAD,CAAH,GAAS05C,WAAW,CAAC10B,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,CAAD,EAAoB+5C,KAAK,CAAC/5C,CAAD,CAAzB,EAA8B,IAA9B,EAAoCqwC,MAApC,CAApB;;AACF,MAAI2J,MAAM,GAAGpF,kBAAkB,CAAC5vB,GAAG,CAAChG,EAAL,EAASpE,GAAT,EAAcoK,GAAG,CAAC6d,GAAJ,CAAQE,SAAtB,CAA/B;AACA8W,EAAAA,YAAY,CAAC70B,GAAD,EAAMg1B,MAAN,EAAc5tC,OAAd,CAAZ;AACD;;AAGD,AAAO,SAAS6tC,mBAAT,CAA6Bj1B,GAA7B,EAAkChlB,CAAlC,EAAqC6W,KAArC,EAA4CzK,OAA5C,EAAqD;AAC1D,MAAI02B,MAAM,GAAG9d,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe/nC,KAAf,CAAqB,CAArB,CAAb;AACA+nC,EAAAA,MAAM,CAAC9iC,CAAD,CAAN,GAAY6W,KAAZ;AACAgjC,EAAAA,YAAY,CAAC70B,GAAD,EAAM4vB,kBAAkB,CAAC5vB,GAAG,CAAChG,EAAL,EAAS8jB,MAAT,EAAiB9d,GAAG,CAAC6d,GAAJ,CAAQE,SAAzB,CAAxB,EAA6D32B,OAA7D,CAAZ;AACD;;AAGD,AAAO,SAAS8tC,kBAAT,CAA4Bl1B,GAA5B,EAAiCub,MAAjC,EAAyC9vC,IAAzC,EAA+C2b,OAA/C,EAAwD;AAC7DytC,EAAAA,YAAY,CAAC70B,GAAD,EAAMiwB,eAAe,CAAC1U,MAAD,EAAS9vC,IAAT,CAArB,EAAqC2b,OAArC,CAAZ;AACD;AAGD;;AACA,SAAS+tC,qBAAT,CAA+Bn1B,GAA/B,EAAoC6d,GAApC,EAAyCz2B,OAAzC,EAAkD;AAChD,MAAIsM,GAAG,GAAG;AACRoqB,IAAAA,MAAM,EAAED,GAAG,CAACC,MADJ;AAER6H,IAAAA,MAAM,EAAE,UAAS7H,MAAT,EAAiB;AACvB,WAAKA,MAAL,GAAc,EAAd;;AACA,WAAK,IAAI9iC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EACE,KAAK8iC,MAAL,CAAY9iC,CAAZ,IAAiB,IAAI00C,KAAJ,CAAU7tB,OAAO,CAAC7B,GAAD,EAAM8d,MAAM,CAAC9iC,CAAD,CAAN,CAAUugC,MAAhB,CAAjB,EACU1Z,OAAO,CAAC7B,GAAD,EAAM8d,MAAM,CAAC9iC,CAAD,CAAN,CAAUvP,IAAhB,CADjB,CAAjB;AAEH,KAPO;AAQRtB,IAAAA,MAAM,EAAEid,OAAO,IAAIA,OAAO,CAACjd;AARnB,GAAV;AAUA2vB,EAAAA,MAAM,CAACkG,GAAD,EAAM,uBAAN,EAA+BA,GAA/B,EAAoCtM,GAApC,CAAN;AACA,MAAIsM,GAAG,CAAChG,EAAR,EAAYF,MAAM,CAACkG,GAAG,CAAChG,EAAL,EAAS,uBAAT,EAAkCgG,GAAG,CAAChG,EAAtC,EAA0CtG,GAA1C,CAAN;AACZ,MAAIA,GAAG,CAACoqB,MAAJ,IAAcD,GAAG,CAACC,MAAtB,EAA8B,OAAO8R,kBAAkB,CAAC5vB,GAAG,CAAChG,EAAL,EAAStG,GAAG,CAACoqB,MAAb,EAAqBpqB,GAAG,CAACoqB,MAAJ,CAAW7zC,MAAX,GAAoB,CAAzC,CAAzB,CAA9B,KACK,OAAO4zC,GAAP;AACN;;AAED,AAAO,SAASuX,0BAAT,CAAoCp1B,GAApC,EAAyC6d,GAAzC,EAA8Cz2B,OAA9C,EAAuD;AAC5D,MAAI+qC,IAAI,GAAGnyB,GAAG,CAACuzB,OAAJ,CAAYpB,IAAvB;AAAA,MAA6B37C,IAAI,GAAGmf,GAAG,CAACw8B,IAAD,CAAvC;;AACA,MAAI37C,IAAI,IAAIA,IAAI,CAACsnC,MAAjB,EAAyB;AACvBqU,IAAAA,IAAI,CAACA,IAAI,CAACloD,MAAL,GAAc,CAAf,CAAJ,GAAwB4zC,GAAxB;AACAwX,IAAAA,kBAAkB,CAACr1B,GAAD,EAAM6d,GAAN,EAAWz2B,OAAX,CAAlB;AACD,GAHD,MAGO;AACLytC,IAAAA,YAAY,CAAC70B,GAAD,EAAM6d,GAAN,EAAWz2B,OAAX,CAAZ;AACD;AACF;;AAGD,AAAO,SAASytC,YAAT,CAAsB70B,GAAtB,EAA2B6d,GAA3B,EAAgCz2B,OAAhC,EAAyC;AAC9CiuC,EAAAA,kBAAkB,CAACr1B,GAAD,EAAM6d,GAAN,EAAWz2B,OAAX,CAAlB;AACAusC,EAAAA,qBAAqB,CAAC3zB,GAAD,EAAMA,GAAG,CAAC6d,GAAV,EAAe7d,GAAG,CAAChG,EAAJ,GAASgG,GAAG,CAAChG,EAAJ,CAAOO,KAAP,CAAahjB,EAAtB,GAA2B+9C,GAA1C,EAA+CluC,OAA/C,CAArB;AACD;AAED,AAAO,SAASiuC,kBAAT,CAA4Br1B,GAA5B,EAAiC6d,GAAjC,EAAsCz2B,OAAtC,EAA+C;AACpD,MAAIqT,UAAU,CAACuF,GAAD,EAAM,uBAAN,CAAV,IAA4CA,GAAG,CAAChG,EAAJ,IAAUS,UAAU,CAACuF,GAAG,CAAChG,EAAL,EAAS,uBAAT,CAApE,EACE6jB,GAAG,GAAGsX,qBAAqB,CAACn1B,GAAD,EAAM6d,GAAN,EAAWz2B,OAAX,CAA3B;AAEF,MAAIsuB,IAAI,GAAGtuB,OAAO,IAAIA,OAAO,CAACsuB,IAAnB,KACRnU,GAAG,CAACsc,GAAG,CAACJ,OAAJ,GAAchyC,IAAf,EAAqBu0B,GAAG,CAAC6d,GAAJ,CAAQJ,OAAR,GAAkBhyC,IAAvC,CAAH,GAAkD,CAAlD,GAAsD,CAAC,CAAvD,GAA2D,CADnD,CAAX;AAEA8pD,EAAAA,iBAAiB,CAACv1B,GAAD,EAAMw1B,qBAAqB,CAACx1B,GAAD,EAAM6d,GAAN,EAAWnI,IAAX,EAAiB,IAAjB,CAA3B,CAAjB;AAEA,MAAI,EAAEtuB,OAAO,IAAIA,OAAO,CAAC4N,MAAR,KAAmB,KAAhC,KAA0CgL,GAAG,CAAChG,EAA9C,IAAoDgG,GAAG,CAAChG,EAAJ,CAAOxT,SAAP,CAAiB,UAAjB,KAAgC,UAAxF,EACEq9B,mBAAmB,CAAC7jB,GAAG,CAAChG,EAAL,CAAnB;AACH;;AAED,SAASu7B,iBAAT,CAA2Bv1B,GAA3B,EAAgC6d,GAAhC,EAAqC;AACnC,MAAIA,GAAG,CAACyR,MAAJ,CAAWtvB,GAAG,CAAC6d,GAAf,CAAJ,EAAyB;AAEzB7d,EAAAA,GAAG,CAAC6d,GAAJ,GAAUA,GAAV;;AAEA,MAAI7d,GAAG,CAAChG,EAAR,EAAY;AACVgG,IAAAA,GAAG,CAAChG,EAAJ,CAAOO,KAAP,CAAaqtB,WAAb,GAA2B,CAA3B;AACA5nB,IAAAA,GAAG,CAAChG,EAAJ,CAAOO,KAAP,CAAawtB,gBAAb,GAAgC,IAAhC;AACA1tB,IAAAA,oBAAoB,CAAC2F,GAAG,CAAChG,EAAL,CAApB;AACD;;AACD+V,EAAAA,WAAW,CAAC/P,GAAD,EAAM,gBAAN,EAAwBA,GAAxB,CAAX;AACD;AAGD;;;AACA,AAAO,SAASy1B,gBAAT,CAA0Bz1B,GAA1B,EAA+B;AACpCu1B,EAAAA,iBAAiB,CAACv1B,GAAD,EAAMw1B,qBAAqB,CAACx1B,GAAD,EAAMA,GAAG,CAAC6d,GAAV,EAAe,IAAf,EAAqB,KAArB,CAA3B,CAAjB;AACD;AAGD;;AACA,SAAS2X,qBAAT,CAA+Bx1B,GAA/B,EAAoC6d,GAApC,EAAyCnI,IAAzC,EAA+CggB,QAA/C,EAAyD;AACvD,MAAI9/B,GAAJ;;AACA,OAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6iC,GAAG,CAACC,MAAJ,CAAW7zC,MAA/B,EAAuC+Q,CAAC,EAAxC,EAA4C;AAC1C,QAAI6W,KAAK,GAAGgsB,GAAG,CAACC,MAAJ,CAAW9iC,CAAX,CAAZ;AACA,QAAI+rB,GAAG,GAAG8W,GAAG,CAACC,MAAJ,CAAW7zC,MAAX,IAAqB+1B,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe7zC,MAApC,IAA8C+1B,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,CAAxD;AACA,QAAI26C,SAAS,GAAGC,UAAU,CAAC51B,GAAD,EAAMnO,KAAK,CAAC0pB,MAAZ,EAAoBxU,GAAG,IAAIA,GAAG,CAACwU,MAA/B,EAAuC7F,IAAvC,EAA6CggB,QAA7C,CAA1B;AACA,QAAIG,OAAO,GAAGD,UAAU,CAAC51B,GAAD,EAAMnO,KAAK,CAACpmB,IAAZ,EAAkBs7B,GAAG,IAAIA,GAAG,CAACt7B,IAA7B,EAAmCiqC,IAAnC,EAAyCggB,QAAzC,CAAxB;;AACA,QAAI9/B,GAAG,IAAI+/B,SAAS,IAAI9jC,KAAK,CAAC0pB,MAA1B,IAAoCsa,OAAO,IAAIhkC,KAAK,CAACpmB,IAAzD,EAA+D;AAC7D,UAAI,CAACmqB,GAAL,EAAUA,GAAG,GAAGioB,GAAG,CAACC,MAAJ,CAAW/nC,KAAX,CAAiB,CAAjB,EAAoBiF,CAApB,CAAN;AACV4a,MAAAA,GAAG,CAAC5a,CAAD,CAAH,GAAS,IAAI00C,KAAJ,CAAUiG,SAAV,EAAqBE,OAArB,CAAT;AACD;AACF;;AACD,SAAOjgC,GAAG,GAAGg6B,kBAAkB,CAAC5vB,GAAG,CAAChG,EAAL,EAASpE,GAAT,EAAcioB,GAAG,CAACE,SAAlB,CAArB,GAAoDF,GAA9D;AACD;;AAED,SAASiY,eAAT,CAAyB91B,GAAzB,EAA8B3K,GAA9B,EAAmC0gC,MAAnC,EAA2C9qC,GAA3C,EAAgDyqC,QAAhD,EAA0D;AACxD,MAAIn8B,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAAlB;AACA,MAAIA,IAAI,CAACqN,WAAT,EAAsB,KAAK,IAAI5rB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGue,IAAI,CAACqN,WAAL,CAAiB38B,MAArC,EAA6C,EAAE+Q,CAA/C,EAAkD;AACtE,QAAI6uB,EAAE,GAAGtQ,IAAI,CAACqN,WAAL,CAAiB5rB,CAAjB,CAAT;AAAA,QAA8Bge,CAAC,GAAG6Q,EAAE,CAAC1D,MAArC,CADsE;AAItE;AACA;;AACA,QAAI6vB,iBAAiB,GAAI,gBAAgBh9B,CAAjB,GAAsB,CAACA,CAAC,CAACi9B,UAAzB,GAAsCj9B,CAAC,CAACoO,aAAhE;AACA,QAAI8uB,kBAAkB,GAAI,iBAAiBl9B,CAAlB,GAAuB,CAACA,CAAC,CAACm9B,WAA1B,GAAwCn9B,CAAC,CAACuO,cAAnE;;AAEA,QAAI,CAACsC,EAAE,CAACvgB,IAAH,IAAW,IAAX,KAAoB0sC,iBAAiB,GAAGnsB,EAAE,CAACvgB,IAAH,IAAW+L,GAAG,CAACmB,EAAlB,GAAuBqT,EAAE,CAACvgB,IAAH,GAAU+L,GAAG,CAACmB,EAA1E,CAAD,MACCqT,EAAE,CAAC1S,EAAH,IAAS,IAAT,KAAkB++B,kBAAkB,GAAGrsB,EAAE,CAAC1S,EAAH,IAAS9B,GAAG,CAACmB,EAAhB,GAAqBqT,EAAE,CAAC1S,EAAH,GAAQ9B,GAAG,CAACmB,EAArE,CADD,CAAJ,EACgF;AAC9E,UAAIk/B,QAAJ,EAAc;AACZ57B,QAAAA,MAAM,CAACd,CAAD,EAAI,mBAAJ,CAAN;;AACA,YAAIA,CAAC,CAACg7B,iBAAN,EAAyB;AACvB,cAAI,CAACz6B,IAAI,CAACqN,WAAV,EAAuB,MAAvB,KACK;AAAC,cAAE5rB,CAAF;AAAK;AAAS;AACrB;AACF;;AACD,UAAI,CAACge,CAAC,CAACo9B,MAAP,EAAe;;AAEf,UAAIL,MAAJ,EAAY;AACV,YAAIM,IAAI,GAAGr9B,CAAC,CAAC2P,IAAF,CAAO1d,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAC,CAAtB,CAAX;AAAA,YAAqC0V,IAArC;AACA,YAAI1V,GAAG,GAAG,CAAN,GAAUirC,kBAAV,GAA+BF,iBAAnC,EACEK,IAAI,GAAGC,OAAO,CAACt2B,GAAD,EAAMq2B,IAAN,EAAY,CAACprC,GAAb,EAAkBorC,IAAI,IAAIA,IAAI,CAAC98B,IAAL,IAAalE,GAAG,CAACkE,IAAzB,GAAgCA,IAAhC,GAAuC,IAAzD,CAAd;AACF,YAAI88B,IAAI,IAAIA,IAAI,CAAC98B,IAAL,IAAalE,GAAG,CAACkE,IAAzB,KAAkCoH,IAAI,GAAGY,GAAG,CAAC80B,IAAD,EAAON,MAAP,CAA5C,MAAgE9qC,GAAG,GAAG,CAAN,GAAU0V,IAAI,GAAG,CAAjB,GAAqBA,IAAI,GAAG,CAA5F,CAAJ,EACE,OAAOm1B,eAAe,CAAC91B,GAAD,EAAMq2B,IAAN,EAAYhhC,GAAZ,EAAiBpK,GAAjB,EAAsByqC,QAAtB,CAAtB;AACH;;AAED,UAAIa,GAAG,GAAGv9B,CAAC,CAAC2P,IAAF,CAAO1d,GAAG,GAAG,CAAN,GAAU,CAAC,CAAX,GAAe,CAAtB,CAAV;AACA,UAAIA,GAAG,GAAG,CAAN,GAAU+qC,iBAAV,GAA8BE,kBAAlC,EACEK,GAAG,GAAGD,OAAO,CAACt2B,GAAD,EAAMu2B,GAAN,EAAWtrC,GAAX,EAAgBsrC,GAAG,CAACh9B,IAAJ,IAAYlE,GAAG,CAACkE,IAAhB,GAAuBA,IAAvB,GAA8B,IAA9C,CAAb;AACF,aAAOg9B,GAAG,GAAGT,eAAe,CAAC91B,GAAD,EAAMu2B,GAAN,EAAWlhC,GAAX,EAAgBpK,GAAhB,EAAqByqC,QAArB,CAAlB,GAAmD,IAA7D;AACD;AACF;AACD,SAAOrgC,GAAP;AACD;;;AAGD,AAAO,SAASugC,UAAT,CAAoB51B,GAApB,EAAyB3K,GAAzB,EAA8B0gC,MAA9B,EAAsCrgB,IAAtC,EAA4CggB,QAA5C,EAAsD;AAC3D,MAAIzqC,GAAG,GAAGyqB,IAAI,IAAI,CAAlB;AACA,MAAIje,KAAK,GAAGq+B,eAAe,CAAC91B,GAAD,EAAM3K,GAAN,EAAW0gC,MAAX,EAAmB9qC,GAAnB,EAAwByqC,QAAxB,CAAf,IACP,CAACA,QAAD,IAAaI,eAAe,CAAC91B,GAAD,EAAM3K,GAAN,EAAW0gC,MAAX,EAAmB9qC,GAAnB,EAAwB,IAAxB,CADrB,IAER6qC,eAAe,CAAC91B,GAAD,EAAM3K,GAAN,EAAW0gC,MAAX,EAAmB,CAAC9qC,GAApB,EAAyByqC,QAAzB,CAFP,IAGP,CAACA,QAAD,IAAaI,eAAe,CAAC91B,GAAD,EAAM3K,GAAN,EAAW0gC,MAAX,EAAmB,CAAC9qC,GAApB,EAAyB,IAAzB,CAHjC;;AAIA,MAAI,CAACwM,KAAL,EAAY;AACVuI,IAAAA,GAAG,CAACw2B,QAAJ,GAAe,IAAf;AACA,WAAOl1B,GAAG,CAACtB,GAAG,CAACC,KAAL,EAAY,CAAZ,CAAV;AACD;;AACD,SAAOxI,KAAP;AACD;;AAED,SAAS6+B,OAAT,CAAiBt2B,GAAjB,EAAsB3K,GAAtB,EAA2BpK,GAA3B,EAAgCsO,IAAhC,EAAsC;AACpC,MAAItO,GAAG,GAAG,CAAN,IAAWoK,GAAG,CAACmB,EAAJ,IAAU,CAAzB,EAA4B;AAC1B,QAAInB,GAAG,CAACkE,IAAJ,GAAWyG,GAAG,CAACC,KAAnB,EAA0B,OAAO4B,OAAO,CAAC7B,GAAD,EAAMsB,GAAG,CAACjM,GAAG,CAACkE,IAAJ,GAAW,CAAZ,CAAT,CAAd,CAA1B,KACK,OAAO,IAAP;AACN,GAHD,MAGO,IAAItO,GAAG,GAAG,CAAN,IAAWoK,GAAG,CAACmB,EAAJ,IAAU,CAAC+C,IAAI,IAAIwG,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAAhB,EAAiCpkB,IAAjC,CAAsClL,MAA/D,EAAuE;AAC5E,QAAIorB,GAAG,CAACkE,IAAJ,GAAWyG,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAAtC,EAAyC,OAAOw0B,GAAG,CAACjM,GAAG,CAACkE,IAAJ,GAAW,CAAZ,EAAe,CAAf,CAAV,CAAzC,KACK,OAAO,IAAP;AACN,GAHM,MAGA;AACL,WAAO,IAAI+H,GAAJ,CAAQjM,GAAG,CAACkE,IAAZ,EAAkBlE,GAAG,CAACmB,EAAJ,GAASvL,GAA3B,CAAP;AACD;AACF;;AAED,AAAO,SAASwrC,SAAT,CAAmBz8B,EAAnB,EAAuB;AAC5BA,EAAAA,EAAE,CAAC66B,YAAH,CAAgBvzB,GAAG,CAACtH,EAAE,CAACk3B,SAAH,EAAD,EAAiB,CAAjB,CAAnB,EAAwC5vB,GAAG,CAACtH,EAAE,CAAC2Q,QAAH,EAAD,CAA3C,EAA4D5V,cAA5D;AACD;;AClMD;;AACA,SAAS2hC,YAAT,CAAsB12B,GAAtB,EAA2B2H,MAA3B,EAAmCge,MAAnC,EAA2C;AACzC,MAAIjyB,GAAG,GAAG;AACRijC,IAAAA,QAAQ,EAAE,KADF;AAERrtC,IAAAA,IAAI,EAAEqe,MAAM,CAACre,IAFL;AAGR6N,IAAAA,EAAE,EAAEwQ,MAAM,CAACxQ,EAHH;AAIRhiB,IAAAA,IAAI,EAAEwyB,MAAM,CAACxyB,IAJL;AAKRhL,IAAAA,MAAM,EAAEw9B,MAAM,CAACx9B,MALP;AAMRysD,IAAAA,MAAM,EAAE,MAAMljC,GAAG,CAACijC,QAAJ,GAAe;AANrB,GAAV;AAQA,MAAIhR,MAAJ,EAAYjyB,GAAG,CAACiyB,MAAJ,GAAa,CAACr8B,IAAD,EAAO6N,EAAP,EAAWhiB,IAAX,EAAiBhL,MAAjB,KAA4B;AACnD,QAAImf,IAAJ,EAAUoK,GAAG,CAACpK,IAAJ,GAAWuY,OAAO,CAAC7B,GAAD,EAAM1W,IAAN,CAAlB;AACV,QAAI6N,EAAJ,EAAQzD,GAAG,CAACyD,EAAJ,GAAS0K,OAAO,CAAC7B,GAAD,EAAM7I,EAAN,CAAhB;AACR,QAAIhiB,IAAJ,EAAUue,GAAG,CAACve,IAAJ,GAAWA,IAAX;AACV,QAAIhL,MAAM,KAAKzB,SAAf,EAA0BgrB,GAAG,CAACvpB,MAAJ,GAAaA,MAAb;AAC3B,GALW;AAMZ2vB,EAAAA,MAAM,CAACkG,GAAD,EAAM,cAAN,EAAsBA,GAAtB,EAA2BtM,GAA3B,CAAN;AACA,MAAIsM,GAAG,CAAChG,EAAR,EAAYF,MAAM,CAACkG,GAAG,CAAChG,EAAL,EAAS,cAAT,EAAyBgG,GAAG,CAAChG,EAA7B,EAAiCtG,GAAjC,CAAN;;AAEZ,MAAIA,GAAG,CAACijC,QAAR,EAAkB;AAChB,QAAI32B,GAAG,CAAChG,EAAR,EAAYgG,GAAG,CAAChG,EAAJ,CAAOO,KAAP,CAAaqtB,WAAb,GAA2B,CAA3B;AACZ,WAAO,IAAP;AACD;;AACD,SAAO;AAACt+B,IAAAA,IAAI,EAAEoK,GAAG,CAACpK,IAAX;AAAiB6N,IAAAA,EAAE,EAAEzD,GAAG,CAACyD,EAAzB;AAA6BhiB,IAAAA,IAAI,EAAEue,GAAG,CAACve,IAAvC;AAA6ChL,IAAAA,MAAM,EAAEupB,GAAG,CAACvpB;AAAzD,GAAP;AACD;AAGD;;;AACA,AAAO,SAAS0sD,UAAT,CAAoB72B,GAApB,EAAyB2H,MAAzB,EAAiCmvB,cAAjC,EAAiD;AACtD,MAAI92B,GAAG,CAAChG,EAAR,EAAY;AACV,QAAI,CAACgG,GAAG,CAAChG,EAAJ,CAAOO,KAAZ,EAAmB,OAAOqvB,SAAS,CAAC5pB,GAAG,CAAChG,EAAL,EAAS68B,UAAT,CAAT,CAA8B72B,GAA9B,EAAmC2H,MAAnC,EAA2CmvB,cAA3C,CAAP;AACnB,QAAI92B,GAAG,CAAChG,EAAJ,CAAO+D,KAAP,CAAag5B,aAAjB,EAAgC;AACjC;;AAED,MAAIt8B,UAAU,CAACuF,GAAD,EAAM,cAAN,CAAV,IAAmCA,GAAG,CAAChG,EAAJ,IAAUS,UAAU,CAACuF,GAAG,CAAChG,EAAL,EAAS,cAAT,CAA3D,EAAqF;AACnF2N,IAAAA,MAAM,GAAG+uB,YAAY,CAAC12B,GAAD,EAAM2H,MAAN,EAAc,IAAd,CAArB;AACA,QAAI,CAACA,MAAL,EAAa;AACd,GATqD;AAYtD;;;AACA,MAAI7+B,KAAK,GAAGg9B,gBAAgB,IAAI,CAACgxB,cAArB,IAAuCxuB,oBAAoB,CAACtI,GAAD,EAAM2H,MAAM,CAACre,IAAb,EAAmBqe,MAAM,CAACxQ,EAA1B,CAAvE;;AACA,MAAIruB,KAAJ,EAAW;AACT,SAAK,IAAIkS,CAAC,GAAGlS,KAAK,CAACmB,MAAN,GAAe,CAA5B,EAA+B+Q,CAAC,IAAI,CAApC,EAAuC,EAAEA,CAAzC,EACEg8C,eAAe,CAACh3B,GAAD,EAAM;AAAC1W,MAAAA,IAAI,EAAExgB,KAAK,CAACkS,CAAD,CAAL,CAASsO,IAAhB;AAAsB6N,MAAAA,EAAE,EAAEruB,KAAK,CAACkS,CAAD,CAAL,CAASmc,EAAnC;AAAuChiB,MAAAA,IAAI,EAAE6F,CAAC,GAAG,CAAC,EAAD,CAAH,GAAU2sB,MAAM,CAACxyB,IAA/D;AAAqEhL,MAAAA,MAAM,EAAEw9B,MAAM,CAACx9B;AAApF,KAAN,CAAf;AACH,GAHD,MAGO;AACL6sD,IAAAA,eAAe,CAACh3B,GAAD,EAAM2H,MAAN,CAAf;AACD;AACF;;AAED,SAASqvB,eAAT,CAAyBh3B,GAAzB,EAA8B2H,MAA9B,EAAsC;AACpC,MAAIA,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,IAAsB,CAAtB,IAA2B09B,MAAM,CAACxyB,IAAP,CAAY,CAAZ,KAAkB,EAA7C,IAAmDosB,GAAG,CAACoG,MAAM,CAACre,IAAR,EAAcqe,MAAM,CAACxQ,EAArB,CAAH,IAA+B,CAAtF,EAAyF;AACzF,MAAIk8B,QAAQ,GAAGjD,qBAAqB,CAACpwB,GAAD,EAAM2H,MAAN,CAApC;AACAyrB,EAAAA,kBAAkB,CAACpzB,GAAD,EAAM2H,MAAN,EAAc0rB,QAAd,EAAwBrzB,GAAG,CAAChG,EAAJ,GAASgG,GAAG,CAAChG,EAAJ,CAAOO,KAAP,CAAahjB,EAAtB,GAA2B+9C,GAAnD,CAAlB;AAEA2B,EAAAA,mBAAmB,CAACj3B,GAAD,EAAM2H,MAAN,EAAc0rB,QAAd,EAAwB3rB,sBAAsB,CAAC1H,GAAD,EAAM2H,MAAN,CAA9C,CAAnB;AACA,MAAIuvB,OAAO,GAAG,EAAd;AAEA3F,EAAAA,UAAU,CAACvxB,GAAD,EAAM,CAACA,GAAD,EAAM2xB,UAAN,KAAqB;AACnC,QAAI,CAACA,UAAD,IAAe13C,OAAO,CAACi9C,OAAD,EAAUl3B,GAAG,CAACuzB,OAAd,CAAP,IAAiC,CAAC,CAArD,EAAwD;AACtD4D,MAAAA,UAAU,CAACn3B,GAAG,CAACuzB,OAAL,EAAc5rB,MAAd,CAAV;AACAuvB,MAAAA,OAAO,CAAC/8C,IAAR,CAAa6lB,GAAG,CAACuzB,OAAjB;AACD;;AACD0D,IAAAA,mBAAmB,CAACj3B,GAAD,EAAM2H,MAAN,EAAc,IAAd,EAAoBD,sBAAsB,CAAC1H,GAAD,EAAM2H,MAAN,CAA1C,CAAnB;AACD,GANS,CAAV;AAOD;;;AAGD,AAAO,SAASyvB,qBAAT,CAA+Bp3B,GAA/B,EAAoC/5B,IAApC,EAA0CoxD,kBAA1C,EAA8D;AACnE,MAAIC,QAAQ,GAAGt3B,GAAG,CAAChG,EAAJ,IAAUgG,GAAG,CAAChG,EAAJ,CAAO+D,KAAP,CAAag5B,aAAtC;AACA,MAAIO,QAAQ,IAAI,CAACD,kBAAjB,EAAqC;AAErC,MAAIlE,IAAI,GAAGnzB,GAAG,CAACuzB,OAAf;AAAA,MAAwBnlD,KAAxB;AAAA,MAA+BilD,QAAQ,GAAGrzB,GAAG,CAAC6d,GAA9C;AACA,MAAIlsC,MAAM,GAAG1L,IAAI,IAAI,MAAR,GAAiBktD,IAAI,CAAChB,IAAtB,GAA6BgB,IAAI,CAACf,MAA/C;AAAA,MAAuDyB,IAAI,GAAG5tD,IAAI,IAAI,MAAR,GAAiBktD,IAAI,CAACf,MAAtB,GAA+Be,IAAI,CAAChB,IAAlG,CALmE;AAQnE;;AACA,MAAIn3C,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGrJ,MAAM,CAAC1H,MAAlB,EAA0B+Q,CAAC,EAA3B,EAA+B;AAC7B5M,IAAAA,KAAK,GAAGuD,MAAM,CAACqJ,CAAD,CAAd;AACA,QAAIq8C,kBAAkB,GAAGjpD,KAAK,CAAC0vC,MAAN,IAAgB,CAAC1vC,KAAK,CAACkhD,MAAN,CAAatvB,GAAG,CAAC6d,GAAjB,CAApB,GAA4C,CAACzvC,KAAK,CAAC0vC,MAAzE,EACE;AACH;;AACD,MAAI9iC,CAAC,IAAIrJ,MAAM,CAAC1H,MAAhB,EAAwB;AACxBkpD,EAAAA,IAAI,CAACT,UAAL,GAAkBS,IAAI,CAACR,aAAL,GAAqB,IAAvC;;AAEA,WAAS;AACPvkD,IAAAA,KAAK,GAAGuD,MAAM,CAAC5I,GAAP,EAAR;;AACA,QAAIqF,KAAK,CAAC0vC,MAAV,EAAkB;AAChB2V,MAAAA,sBAAsB,CAACrlD,KAAD,EAAQylD,IAAR,CAAtB;;AACA,UAAIwD,kBAAkB,IAAI,CAACjpD,KAAK,CAACkhD,MAAN,CAAatvB,GAAG,CAAC6d,GAAjB,CAA3B,EAAkD;AAChDgX,QAAAA,YAAY,CAAC70B,GAAD,EAAM5xB,KAAN,EAAa;AAACwlD,UAAAA,SAAS,EAAE;AAAZ,SAAb,CAAZ;AACA;AACD;;AACDP,MAAAA,QAAQ,GAAGjlD,KAAX;AACD,KAPD,MAOO,IAAIkpD,QAAJ,EAAc;AACnB3lD,MAAAA,MAAM,CAACwI,IAAP,CAAY/L,KAAZ;AACA;AACD,KAHM,MAGA;AACR,GA/BkE;AAkCnE;;;AACA,MAAImpD,WAAW,GAAG,EAAlB;AACA9D,EAAAA,sBAAsB,CAACJ,QAAD,EAAWQ,IAAX,CAAtB;AACAA,EAAAA,IAAI,CAAC15C,IAAL,CAAU;AAACk2B,IAAAA,OAAO,EAAEknB,WAAV;AAAuB3E,IAAAA,UAAU,EAAEO,IAAI,CAACP;AAAxC,GAAV;AACAO,EAAAA,IAAI,CAACP,UAAL,GAAkBxkD,KAAK,CAACwkD,UAAN,IAAoB,EAAEO,IAAI,CAACN,aAA7C;AAEA,MAAInzC,MAAM,GAAG+a,UAAU,CAACuF,GAAD,EAAM,cAAN,CAAV,IAAmCA,GAAG,CAAChG,EAAJ,IAAUS,UAAU,CAACuF,GAAG,CAAChG,EAAL,EAAS,cAAT,CAApE;;AAEA,OAAK,IAAIhf,CAAC,GAAG5M,KAAK,CAACiiC,OAAN,CAAcpmC,MAAd,GAAuB,CAApC,EAAuC+Q,CAAC,IAAI,CAA5C,EAA+C,EAAEA,CAAjD,EAAoD;AAClD,QAAI2sB,MAAM,GAAGv5B,KAAK,CAACiiC,OAAN,CAAcr1B,CAAd,CAAb;AACA2sB,IAAAA,MAAM,CAACx9B,MAAP,GAAgBlE,IAAhB;;AACA,QAAIyZ,MAAM,IAAI,CAACg3C,YAAY,CAAC12B,GAAD,EAAM2H,MAAN,EAAc,KAAd,CAA3B,EAAiD;AAC/Ch2B,MAAAA,MAAM,CAAC1H,MAAP,GAAgB,CAAhB;AACA;AACD;;AAEDstD,IAAAA,WAAW,CAACp9C,IAAZ,CAAiB24C,uBAAuB,CAAC9yB,GAAD,EAAM2H,MAAN,CAAxC;AAEA,QAAI1W,KAAK,GAAGjW,CAAC,GAAGo1C,qBAAqB,CAACpwB,GAAD,EAAM2H,MAAN,CAAxB,GAAwChS,GAAG,CAAChkB,MAAD,CAAxD;AACAslD,IAAAA,mBAAmB,CAACj3B,GAAD,EAAM2H,MAAN,EAAc1W,KAAd,EAAqBijC,aAAa,CAACl0B,GAAD,EAAM2H,MAAN,CAAlC,CAAnB;AACA,QAAI,CAAC3sB,CAAD,IAAMglB,GAAG,CAAChG,EAAd,EAAkBgG,GAAG,CAAChG,EAAJ,CAAOqoB,cAAP,CAAsB;AAAC/4B,MAAAA,IAAI,EAAEqe,MAAM,CAACre,IAAd;AAAoB6N,MAAAA,EAAE,EAAE+4B,SAAS,CAACvoB,MAAD;AAAjC,KAAtB;AAClB,QAAIuvB,OAAO,GAAG,EAAd,CAbkD;;AAgBlD3F,IAAAA,UAAU,CAACvxB,GAAD,EAAM,CAACA,GAAD,EAAM2xB,UAAN,KAAqB;AACnC,UAAI,CAACA,UAAD,IAAe13C,OAAO,CAACi9C,OAAD,EAAUl3B,GAAG,CAACuzB,OAAd,CAAP,IAAiC,CAAC,CAArD,EAAwD;AACtD4D,QAAAA,UAAU,CAACn3B,GAAG,CAACuzB,OAAL,EAAc5rB,MAAd,CAAV;AACAuvB,QAAAA,OAAO,CAAC/8C,IAAR,CAAa6lB,GAAG,CAACuzB,OAAjB;AACD;;AACD0D,MAAAA,mBAAmB,CAACj3B,GAAD,EAAM2H,MAAN,EAAc,IAAd,EAAoBusB,aAAa,CAACl0B,GAAD,EAAM2H,MAAN,CAAjC,CAAnB;AACD,KANS,CAAV;AAOD;AACF;AAGD;;AACA,SAAS6vB,QAAT,CAAkBx3B,GAAlB,EAAuBy3B,QAAvB,EAAiC;AAC/B,MAAIA,QAAQ,IAAI,CAAhB,EAAmB;AACnBz3B,EAAAA,GAAG,CAACC,KAAJ,IAAaw3B,QAAb;AACAz3B,EAAAA,GAAG,CAAC6d,GAAJ,GAAU,IAAIwR,SAAJ,CAAc5tC,GAAG,CAACue,GAAG,CAAC6d,GAAJ,CAAQC,MAAT,EAAiBjsB,KAAK,IAAI,IAAI69B,KAAJ,CACnDpuB,GAAG,CAACzP,KAAK,CAAC0pB,MAAN,CAAahiB,IAAb,GAAoBk+B,QAArB,EAA+B5lC,KAAK,CAAC0pB,MAAN,CAAa/kB,EAA5C,CADgD,EAEnD8K,GAAG,CAACzP,KAAK,CAACpmB,IAAN,CAAW8tB,IAAX,GAAkBk+B,QAAnB,EAA6B5lC,KAAK,CAACpmB,IAAN,CAAW+qB,EAAxC,CAFgD,CAA1B,CAAjB,EAGNwJ,GAAG,CAAC6d,GAAJ,CAAQE,SAHF,CAAV;;AAIA,MAAI/d,GAAG,CAAChG,EAAR,EAAY;AACVuiB,IAAAA,SAAS,CAACvc,GAAG,CAAChG,EAAL,EAASgG,GAAG,CAACC,KAAb,EAAoBD,GAAG,CAACC,KAAJ,GAAYw3B,QAAhC,EAA0CA,QAA1C,CAAT;;AACA,SAAK,IAAItsB,CAAC,GAAGnL,GAAG,CAAChG,EAAJ,CAAOplB,OAAf,EAAwBknB,CAAC,GAAGqP,CAAC,CAAC7G,QAAnC,EAA6CxI,CAAC,GAAGqP,CAAC,CAAC5G,MAAnD,EAA2DzI,CAAC,EAA5D,EACEkhB,aAAa,CAAChd,GAAG,CAAChG,EAAL,EAAS8B,CAAT,EAAY,QAAZ,CAAb;AACH;AACF;AAGD;;;AACA,SAASm7B,mBAAT,CAA6Bj3B,GAA7B,EAAkC2H,MAAlC,EAA0C0rB,QAA1C,EAAoDhtB,KAApD,EAA2D;AACzD,MAAIrG,GAAG,CAAChG,EAAJ,IAAU,CAACgG,GAAG,CAAChG,EAAJ,CAAOO,KAAtB,EACE,OAAOqvB,SAAS,CAAC5pB,GAAG,CAAChG,EAAL,EAASi9B,mBAAT,CAAT,CAAuCj3B,GAAvC,EAA4C2H,MAA5C,EAAoD0rB,QAApD,EAA8DhtB,KAA9D,CAAP;;AAEF,MAAIsB,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiByG,GAAG,CAACC,KAAzB,EAAgC;AAC9Bu3B,IAAAA,QAAQ,CAACx3B,GAAD,EAAM2H,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,GAAqB,CAArB,IAA0B09B,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiBoO,MAAM,CAACre,IAAP,CAAYiQ,IAAvD,CAAN,CAAR;AACA;AACD;;AACD,MAAIoO,MAAM,CAACre,IAAP,CAAYiQ,IAAZ,GAAmByG,GAAG,CAAC2K,QAAJ,EAAvB,EAAuC,OARkB;;AAWzD,MAAIhD,MAAM,CAACre,IAAP,CAAYiQ,IAAZ,GAAmByG,GAAG,CAACC,KAA3B,EAAkC;AAChC,QAAI/hB,KAAK,GAAGypB,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,GAAqB,CAArB,IAA0B+1B,GAAG,CAACC,KAAJ,GAAY0H,MAAM,CAACre,IAAP,CAAYiQ,IAAlD,CAAZ;AACAi+B,IAAAA,QAAQ,CAACx3B,GAAD,EAAM9hB,KAAN,CAAR;AACAypB,IAAAA,MAAM,GAAG;AAACre,MAAAA,IAAI,EAAEgY,GAAG,CAACtB,GAAG,CAACC,KAAL,EAAY,CAAZ,CAAV;AAA0B9I,MAAAA,EAAE,EAAEmK,GAAG,CAACqG,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiBrb,KAAlB,EAAyBypB,MAAM,CAACxQ,EAAP,CAAUX,EAAnC,CAAjC;AACCrhB,MAAAA,IAAI,EAAE,CAACwgB,GAAG,CAACgS,MAAM,CAACxyB,IAAR,CAAJ,CADP;AAC2BhL,MAAAA,MAAM,EAAEw9B,MAAM,CAACx9B;AAD1C,KAAT;AAED;;AACD,MAAIqM,IAAI,GAAGwpB,GAAG,CAAC2K,QAAJ,EAAX;;AACA,MAAIhD,MAAM,CAACxQ,EAAP,CAAUoC,IAAV,GAAiB/iB,IAArB,EAA2B;AACzBmxB,IAAAA,MAAM,GAAG;AAACre,MAAAA,IAAI,EAAEqe,MAAM,CAACre,IAAd;AAAoB6N,MAAAA,EAAE,EAAEmK,GAAG,CAAC9qB,IAAD,EAAOupB,OAAO,CAACC,GAAD,EAAMxpB,IAAN,CAAP,CAAmBrB,IAAnB,CAAwBlL,MAA/B,CAA3B;AACCkL,MAAAA,IAAI,EAAE,CAACwyB,MAAM,CAACxyB,IAAP,CAAY,CAAZ,CAAD,CADP;AACyBhL,MAAAA,MAAM,EAAEw9B,MAAM,CAACx9B;AADxC,KAAT;AAED;;AAEDw9B,EAAAA,MAAM,CAAC+vB,OAAP,GAAiBn3B,UAAU,CAACP,GAAD,EAAM2H,MAAM,CAACre,IAAb,EAAmBqe,MAAM,CAACxQ,EAA1B,CAA3B;AAEA,MAAI,CAACk8B,QAAL,EAAeA,QAAQ,GAAGjD,qBAAqB,CAACpwB,GAAD,EAAM2H,MAAN,CAAhC;AACf,MAAI3H,GAAG,CAAChG,EAAR,EAAY29B,2BAA2B,CAAC33B,GAAG,CAAChG,EAAL,EAAS2N,MAAT,EAAiBtB,KAAjB,CAA3B,CAAZ,KACK0qB,SAAS,CAAC/wB,GAAD,EAAM2H,MAAN,EAActB,KAAd,CAAT;AACLgvB,EAAAA,kBAAkB,CAACr1B,GAAD,EAAMqzB,QAAN,EAAgBt+B,cAAhB,CAAlB;AAEA,MAAIiL,GAAG,CAACw2B,QAAJ,IAAgBZ,UAAU,CAAC51B,GAAD,EAAMsB,GAAG,CAACtB,GAAG,CAACkxB,SAAJ,EAAD,EAAkB,CAAlB,CAAT,CAA9B,EACElxB,GAAG,CAACw2B,QAAJ,GAAe,KAAf;AACH;AAGD;;;AACA,SAASmB,2BAAT,CAAqC39B,EAArC,EAAyC2N,MAAzC,EAAiDtB,KAAjD,EAAwD;AACtD,MAAIrG,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkBprB,OAAO,GAAGolB,EAAE,CAACplB,OAA/B;AAAA,MAAwC0U,IAAI,GAAGqe,MAAM,CAACre,IAAtD;AAAA,MAA4D6N,EAAE,GAAGwQ,MAAM,CAACxQ,EAAxE;AAEA,MAAIygC,kBAAkB,GAAG,KAAzB;AAAA,MAAgCC,eAAe,GAAGvuC,IAAI,CAACiQ,IAAvD;;AACA,MAAI,CAACS,EAAE,CAAC5S,OAAH,CAAW4tB,YAAhB,EAA8B;AAC5B6iB,IAAAA,eAAe,GAAGj3B,MAAM,CAACuJ,UAAU,CAACpK,OAAO,CAACC,GAAD,EAAM1W,IAAI,CAACiQ,IAAX,CAAR,CAAX,CAAxB;AACAyG,IAAAA,GAAG,CAACQ,IAAJ,CAASq3B,eAAT,EAA0B1gC,EAAE,CAACoC,IAAH,GAAU,CAApC,EAAuCA,IAAI,IAAI;AAC7C,UAAIA,IAAI,IAAI3kB,OAAO,CAACw2B,OAApB,EAA6B;AAC3BwsB,QAAAA,kBAAkB,GAAG,IAArB;AACA,eAAO,IAAP;AACD;AACF,KALD;AAMD;;AAED,MAAI53B,GAAG,CAAC6d,GAAJ,CAAQrrB,QAAR,CAAiBmV,MAAM,CAACre,IAAxB,EAA8Bqe,MAAM,CAACxQ,EAArC,IAA2C,CAAC,CAAhD,EACEkD,oBAAoB,CAACL,EAAD,CAApB;AAEF+2B,EAAAA,SAAS,CAAC/wB,GAAD,EAAM2H,MAAN,EAActB,KAAd,EAAqBmF,cAAc,CAACxR,EAAD,CAAnC,CAAT;;AAEA,MAAI,CAACA,EAAE,CAAC5S,OAAH,CAAW4tB,YAAhB,EAA8B;AAC5BhV,IAAAA,GAAG,CAACQ,IAAJ,CAASq3B,eAAT,EAA0BvuC,IAAI,CAACiQ,IAAL,GAAYoO,MAAM,CAACxyB,IAAP,CAAYlL,MAAlD,EAA0DsvB,IAAI,IAAI;AAChE,UAAIhY,GAAG,GAAG0pB,UAAU,CAAC1R,IAAD,CAApB;;AACA,UAAIhY,GAAG,GAAG3M,OAAO,CAACy2B,aAAlB,EAAiC;AAC/Bz2B,QAAAA,OAAO,CAACw2B,OAAR,GAAkB7R,IAAlB;AACA3kB,QAAAA,OAAO,CAACy2B,aAAR,GAAwB9pB,GAAxB;AACA3M,QAAAA,OAAO,CAAC02B,cAAR,GAAyB,IAAzB;AACAssB,QAAAA,kBAAkB,GAAG,KAArB;AACD;AACF,KARD;AASA,QAAIA,kBAAJ,EAAwB59B,EAAE,CAACO,KAAH,CAASytB,aAAT,GAAyB,IAAzB;AACzB;;AAEDniB,EAAAA,eAAe,CAAC7F,GAAD,EAAM1W,IAAI,CAACiQ,IAAX,CAAf;AACAgrB,EAAAA,WAAW,CAACvqB,EAAD,EAAK,GAAL,CAAX;AAEA,MAAIwiB,OAAO,GAAG7U,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,IAAsBktB,EAAE,CAACoC,IAAH,GAAUjQ,IAAI,CAACiQ,IAArC,IAA6C,CAA3D,CAnCsD;;AAqCtD,MAAIoO,MAAM,CAACC,IAAX,EACE2U,SAAS,CAACviB,EAAD,CAAT,CADF,KAEK,IAAI1Q,IAAI,CAACiQ,IAAL,IAAapC,EAAE,CAACoC,IAAhB,IAAwBoO,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,IAAsB,CAA9C,IAAmD,CAAC4mD,iBAAiB,CAAC72B,EAAE,CAACgG,GAAJ,EAAS2H,MAAT,CAAzE,EACHqV,aAAa,CAAChjB,EAAD,EAAK1Q,IAAI,CAACiQ,IAAV,EAAgB,MAAhB,CAAb,CADG,KAGHgjB,SAAS,CAACviB,EAAD,EAAK1Q,IAAI,CAACiQ,IAAV,EAAgBpC,EAAE,CAACoC,IAAH,GAAU,CAA1B,EAA6BijB,OAA7B,CAAT;AAEF,MAAIsb,cAAc,GAAGr9B,UAAU,CAACT,EAAD,EAAK,SAAL,CAA/B;AAAA,MAAgD+9B,aAAa,GAAGt9B,UAAU,CAACT,EAAD,EAAK,QAAL,CAA1E;;AACA,MAAI+9B,aAAa,IAAID,cAArB,EAAqC;AACnC,QAAIpkC,GAAG,GAAG;AACRpK,MAAAA,IAAI,EAAEA,IADE;AACI6N,MAAAA,EAAE,EAAEA,EADR;AAERhiB,MAAAA,IAAI,EAAEwyB,MAAM,CAACxyB,IAFL;AAGRuiD,MAAAA,OAAO,EAAE/vB,MAAM,CAAC+vB,OAHR;AAIRvtD,MAAAA,MAAM,EAAEw9B,MAAM,CAACx9B;AAJP,KAAV;AAMA,QAAI4tD,aAAJ,EAAmBhoB,WAAW,CAAC/V,EAAD,EAAK,QAAL,EAAeA,EAAf,EAAmBtG,GAAnB,CAAX;AACnB,QAAIokC,cAAJ,EAAoB,CAAC99B,EAAE,CAACO,KAAH,CAASutB,UAAT,KAAwB9tB,EAAE,CAACO,KAAH,CAASutB,UAAT,GAAsB,EAA9C,CAAD,EAAoD3tC,IAApD,CAAyDuZ,GAAzD;AACrB;;AACDsG,EAAAA,EAAE,CAACplB,OAAH,CAAWwsC,iBAAX,GAA+B,IAA/B;AACD;;AAED,AAAO,SAAS4W,YAAT,CAAsBh4B,GAAtB,EAA2B9gB,IAA3B,EAAiCoK,IAAjC,EAAuC6N,EAAvC,EAA2ChtB,MAA3C,EAAmD;AACxD,MAAI,CAACgtB,EAAL,EAASA,EAAE,GAAG7N,IAAL;AACT,MAAIiY,GAAG,CAACpK,EAAD,EAAK7N,IAAL,CAAH,GAAgB,CAApB,EAAuB,CAACA,IAAD,EAAO6N,EAAP,IAAa,CAACA,EAAD,EAAK7N,IAAL,CAAb;AACvB,MAAI,OAAOpK,IAAP,IAAe,QAAnB,EAA6BA,IAAI,GAAG8gB,GAAG,CAACi4B,UAAJ,CAAe/4C,IAAf,CAAP;AAC7B23C,EAAAA,UAAU,CAAC72B,GAAD,EAAM;AAAC1W,IAAAA,IAAD;AAAO6N,IAAAA,EAAP;AAAWhiB,IAAAA,IAAI,EAAE+J,IAAjB;AAAuB/U,IAAAA;AAAvB,GAAN,CAAV;AACD;;AAID,SAAS+tD,mBAAT,CAA6B7iC,GAA7B,EAAkC/L,IAAlC,EAAwC6N,EAAxC,EAA4CwJ,IAA5C,EAAkD;AAChD,MAAIxJ,EAAE,GAAG9B,GAAG,CAACkE,IAAb,EAAmB;AACjBlE,IAAAA,GAAG,CAACkE,IAAJ,IAAYoH,IAAZ;AACD,GAFD,MAEO,IAAIrX,IAAI,GAAG+L,GAAG,CAACkE,IAAf,EAAqB;AAC1BlE,IAAAA,GAAG,CAACkE,IAAJ,GAAWjQ,IAAX;AACA+L,IAAAA,GAAG,CAACmB,EAAJ,GAAS,CAAT;AACD;AACF;AAGD;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS2hC,eAAT,CAAyBvjC,KAAzB,EAAgCtL,IAAhC,EAAsC6N,EAAtC,EAA0CwJ,IAA1C,EAAgD;AAC9C,OAAK,IAAI3lB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Z,KAAK,CAAC3qB,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,QAAIo9C,GAAG,GAAGxjC,KAAK,CAAC5Z,CAAD,CAAf;AAAA,QAAoB8jB,EAAE,GAAG,IAAzB;;AACA,QAAIs5B,GAAG,CAACta,MAAR,EAAgB;AACd,UAAI,CAACsa,GAAG,CAACC,MAAT,EAAiB;AAAED,QAAAA,GAAG,GAAGxjC,KAAK,CAAC5Z,CAAD,CAAL,GAAWo9C,GAAG,CAAC3I,QAAJ,EAAjB;AAAiC2I,QAAAA,GAAG,CAACC,MAAJ,GAAa,IAAb;AAAmB;;AACvE,WAAK,IAAIv/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs/B,GAAG,CAACta,MAAJ,CAAW7zC,MAA/B,EAAuC6uB,CAAC,EAAxC,EAA4C;AAC1Co/B,QAAAA,mBAAmB,CAACE,GAAG,CAACta,MAAJ,CAAWhlB,CAAX,EAAcyiB,MAAf,EAAuBjyB,IAAvB,EAA6B6N,EAA7B,EAAiCwJ,IAAjC,CAAnB;AACAu3B,QAAAA,mBAAmB,CAACE,GAAG,CAACta,MAAJ,CAAWhlB,CAAX,EAAcrtB,IAAf,EAAqB6d,IAArB,EAA2B6N,EAA3B,EAA+BwJ,IAA/B,CAAnB;AACD;;AACD;AACD;;AACD,SAAK,IAAI7H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs/B,GAAG,CAAC/nB,OAAJ,CAAYpmC,MAAhC,EAAwC,EAAE6uB,CAA1C,EAA6C;AAC3C,UAAId,GAAG,GAAGogC,GAAG,CAAC/nB,OAAJ,CAAYvX,CAAZ,CAAV;;AACA,UAAI3B,EAAE,GAAGa,GAAG,CAAC1O,IAAJ,CAASiQ,IAAlB,EAAwB;AACtBvB,QAAAA,GAAG,CAAC1O,IAAJ,GAAWgY,GAAG,CAACtJ,GAAG,CAAC1O,IAAJ,CAASiQ,IAAT,GAAgBoH,IAAjB,EAAuB3I,GAAG,CAAC1O,IAAJ,CAASkN,EAAhC,CAAd;AACAwB,QAAAA,GAAG,CAACb,EAAJ,GAASmK,GAAG,CAACtJ,GAAG,CAACb,EAAJ,CAAOoC,IAAP,GAAcoH,IAAf,EAAqB3I,GAAG,CAACb,EAAJ,CAAOX,EAA5B,CAAZ;AACD,OAHD,MAGO,IAAIlN,IAAI,IAAI0O,GAAG,CAACb,EAAJ,CAAOoC,IAAnB,EAAyB;AAC9BuF,QAAAA,EAAE,GAAG,KAAL;AACA;AACD;AACF;;AACD,QAAI,CAACA,EAAL,EAAS;AACPlK,MAAAA,KAAK,CAACxZ,MAAN,CAAa,CAAb,EAAgBJ,CAAC,GAAG,CAApB;AACAA,MAAAA,CAAC,GAAG,CAAJ;AACD;AACF;AACF;;AAED,SAASm8C,UAAT,CAAoBhE,IAApB,EAA0BxrB,MAA1B,EAAkC;AAChC,MAAIre,IAAI,GAAGqe,MAAM,CAACre,IAAP,CAAYiQ,IAAvB;AAAA,MAA6BpC,EAAE,GAAGwQ,MAAM,CAACxQ,EAAP,CAAUoC,IAA5C;AAAA,MAAkDoH,IAAI,GAAGgH,MAAM,CAACxyB,IAAP,CAAYlL,MAAZ,IAAsBktB,EAAE,GAAG7N,IAA3B,IAAmC,CAA5F;AACA6uC,EAAAA,eAAe,CAAChF,IAAI,CAAChB,IAAN,EAAY7oC,IAAZ,EAAkB6N,EAAlB,EAAsBwJ,IAAtB,CAAf;AACAw3B,EAAAA,eAAe,CAAChF,IAAI,CAACf,MAAN,EAAc9oC,IAAd,EAAoB6N,EAApB,EAAwBwJ,IAAxB,CAAf;AACD;AAGD;AACA;;;AACA,AAAO,SAAS23B,UAAT,CAAoBt4B,GAApB,EAAyBu4B,MAAzB,EAAiCC,UAAjC,EAA6C/xB,EAA7C,EAAiD;AACtD,MAAI5F,EAAE,GAAG03B,MAAT;AAAA,MAAiBh/B,IAAI,GAAGg/B,MAAxB;AACA,MAAI,OAAOA,MAAP,IAAiB,QAArB,EAA+Bh/B,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAM4B,QAAQ,CAAC5B,GAAD,EAAMu4B,MAAN,CAAd,CAAd,CAA/B,KACK13B,EAAE,GAAGD,MAAM,CAAC23B,MAAD,CAAX;AACL,MAAI13B,EAAE,IAAI,IAAV,EAAgB,OAAO,IAAP;AAChB,MAAI4F,EAAE,CAAClN,IAAD,EAAOsH,EAAP,CAAF,IAAgBb,GAAG,CAAChG,EAAxB,EAA4BgjB,aAAa,CAAChd,GAAG,CAAChG,EAAL,EAAS6G,EAAT,EAAa23B,UAAb,CAAb;AAC5B,SAAOj/B,IAAP;AACD;;AC7UD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,AAAO,SAASk/B,SAAT,CAAmBt4B,KAAnB,EAA0B;AAC/B,OAAKA,KAAL,GAAaA,KAAb;AACA,OAAK5O,MAAL,GAAc,IAAd;AACA,MAAIjqB,MAAM,GAAG,CAAb;;AACA,OAAK,IAAI0T,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmlB,KAAK,CAACl2B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrCmlB,IAAAA,KAAK,CAACnlB,CAAD,CAAL,CAASuW,MAAT,GAAkB,IAAlB;AACAjqB,IAAAA,MAAM,IAAI64B,KAAK,CAACnlB,CAAD,CAAL,CAAS1T,MAAnB;AACD;;AACD,OAAKA,MAAL,GAAcA,MAAd;AACD;AAEDmxD,SAAS,CAACt4C,SAAV,GAAsB;AACpBmgB,EAAAA,SAAS,GAAG;AAAE,WAAO,KAAKH,KAAL,CAAWl2B,MAAlB;AAA0B,GADpB;;AAGpB;AACAyuD,EAAAA,WAAW,CAACz/B,EAAD,EAAK9E,CAAL,EAAQ;AACjB,SAAK,IAAInZ,CAAC,GAAGie,EAAR,EAAYzW,CAAC,GAAGyW,EAAE,GAAG9E,CAA1B,EAA6BnZ,CAAC,GAAGwH,CAAjC,EAAoC,EAAExH,CAAtC,EAAyC;AACvC,UAAIue,IAAI,GAAG,KAAK4G,KAAL,CAAWnlB,CAAX,CAAX;AACA,WAAK1T,MAAL,IAAeiyB,IAAI,CAACjyB,MAApB;AACAqkC,MAAAA,WAAW,CAACpS,IAAD,CAAX;AACAwW,MAAAA,WAAW,CAACxW,IAAD,EAAO,QAAP,CAAX;AACD;;AACD,SAAK4G,KAAL,CAAW/kB,MAAX,CAAkB6d,EAAlB,EAAsB9E,CAAtB;AACD,GAZmB;;AAcpB;AACA3kB,EAAAA,QAAQ,CAAC2wB,KAAD,EAAQ;AACdA,IAAAA,KAAK,CAAChmB,IAAN,CAAWqZ,KAAX,CAAiB2M,KAAjB,EAAwB,KAAKA,KAA7B;AACD,GAjBmB;;AAmBpB;AACA;AACAw4B,EAAAA,WAAW,CAAC1/B,EAAD,EAAKkH,KAAL,EAAY74B,MAAZ,EAAoB;AAC7B,SAAKA,MAAL,IAAeA,MAAf;AACA,SAAK64B,KAAL,GAAa,KAAKA,KAAL,CAAWpqB,KAAX,CAAiB,CAAjB,EAAoBkjB,EAApB,EAAwBte,MAAxB,CAA+BwlB,KAA/B,EAAsCxlB,MAAtC,CAA6C,KAAKwlB,KAAL,CAAWpqB,KAAX,CAAiBkjB,EAAjB,CAA7C,CAAb;;AACA,SAAK,IAAIje,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmlB,KAAK,CAACl2B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuCmlB,KAAK,CAACnlB,CAAD,CAAL,CAASuW,MAAT,GAAkB,IAAlB;AACxC,GAzBmB;;AA2BpB;AACAqnC,EAAAA,KAAK,CAAC3/B,EAAD,EAAK9E,CAAL,EAAQsS,EAAR,EAAY;AACf,SAAK,IAAIjkB,CAAC,GAAGyW,EAAE,GAAG9E,CAAlB,EAAqB8E,EAAE,GAAGzW,CAA1B,EAA6B,EAAEyW,EAA/B,EACE,IAAIwN,EAAE,CAAC,KAAKtG,KAAL,CAAWlH,EAAX,CAAD,CAAN,EAAwB,OAAO,IAAP;AAC3B;;AA/BmB,CAAtB;AAkCA,AAAO,SAAS4/B,WAAT,CAAqBz4B,QAArB,EAA+B;AACpC,OAAKA,QAAL,GAAgBA,QAAhB;AACA,MAAItzB,IAAI,GAAG,CAAX;AAAA,MAAcxF,MAAM,GAAG,CAAvB;;AACA,OAAK,IAAI0T,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGolB,QAAQ,CAACn2B,MAA7B,EAAqC,EAAE+Q,CAAvC,EAA0C;AACxC,QAAIwb,EAAE,GAAG4J,QAAQ,CAACplB,CAAD,CAAjB;AACAlO,IAAAA,IAAI,IAAI0pB,EAAE,CAAC8J,SAAH,EAAR;AAAwBh5B,IAAAA,MAAM,IAAIkvB,EAAE,CAAClvB,MAAb;AACxBkvB,IAAAA,EAAE,CAACjF,MAAH,GAAY,IAAZ;AACD;;AACD,OAAKzkB,IAAL,GAAYA,IAAZ;AACA,OAAKxF,MAAL,GAAcA,MAAd;AACA,OAAKiqB,MAAL,GAAc,IAAd;AACD;AAEDsnC,WAAW,CAAC14C,SAAZ,GAAwB;AACtBmgB,EAAAA,SAAS,GAAG;AAAE,WAAO,KAAKxzB,IAAZ;AAAkB,GADV;;AAGtB4rD,EAAAA,WAAW,CAACz/B,EAAD,EAAK9E,CAAL,EAAQ;AACjB,SAAKrnB,IAAL,IAAaqnB,CAAb;;AACA,SAAK,IAAInZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKolB,QAAL,CAAcn2B,MAAlC,EAA0C,EAAE+Q,CAA5C,EAA+C;AAC7C,UAAIyX,KAAK,GAAG,KAAK2N,QAAL,CAAcplB,CAAd,CAAZ;AAAA,UAA8BqlB,EAAE,GAAG5N,KAAK,CAAC6N,SAAN,EAAnC;;AACA,UAAIrH,EAAE,GAAGoH,EAAT,EAAa;AACX,YAAIusB,EAAE,GAAG75C,IAAI,CAACyiB,GAAL,CAASrB,CAAT,EAAYkM,EAAE,GAAGpH,EAAjB,CAAT;AAAA,YAA+B6/B,SAAS,GAAGrmC,KAAK,CAACnrB,MAAjD;AACAmrB,QAAAA,KAAK,CAACimC,WAAN,CAAkBz/B,EAAlB,EAAsB2zB,EAAtB;AACA,aAAKtlD,MAAL,IAAewxD,SAAS,GAAGrmC,KAAK,CAACnrB,MAAjC;;AACA,YAAI+4B,EAAE,IAAIusB,EAAV,EAAc;AAAE,eAAKxsB,QAAL,CAAchlB,MAAd,CAAqBJ,CAAC,EAAtB,EAA0B,CAA1B;AAA8ByX,UAAAA,KAAK,CAAClB,MAAN,GAAe,IAAf;AAAqB;;AACnE,YAAI,CAAC4C,CAAC,IAAIy4B,EAAN,KAAa,CAAjB,EAAoB;AACpB3zB,QAAAA,EAAE,GAAG,CAAL;AACD,OAPD,MAOOA,EAAE,IAAIoH,EAAN;AACR,KAZgB;AAcjB;;;AACA,QAAI,KAAKvzB,IAAL,GAAYqnB,CAAZ,GAAgB,EAAhB,KACC,KAAKiM,QAAL,CAAcn2B,MAAd,GAAuB,CAAvB,IAA4B,EAAE,KAAKm2B,QAAL,CAAc,CAAd,aAA4Bq4B,SAA9B,CAD7B,CAAJ,EAC4E;AAC1E,UAAIt4B,KAAK,GAAG,EAAZ;AACA,WAAK3wB,QAAL,CAAc2wB,KAAd;AACA,WAAKC,QAAL,GAAgB,CAAC,IAAIq4B,SAAJ,CAAct4B,KAAd,CAAD,CAAhB;AACA,WAAKC,QAAL,CAAc,CAAd,EAAiB7O,MAAjB,GAA0B,IAA1B;AACD;AACF,GAzBqB;;AA2BtB/hB,EAAAA,QAAQ,CAAC2wB,KAAD,EAAQ;AACd,SAAK,IAAInlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKolB,QAAL,CAAcn2B,MAAlC,EAA0C,EAAE+Q,CAA5C,EAA+C,KAAKolB,QAAL,CAAcplB,CAAd,EAAiBxL,QAAjB,CAA0B2wB,KAA1B;AAChD,GA7BqB;;AA+BtBw4B,EAAAA,WAAW,CAAC1/B,EAAD,EAAKkH,KAAL,EAAY74B,MAAZ,EAAoB;AAC7B,SAAKwF,IAAL,IAAaqzB,KAAK,CAACl2B,MAAnB;AACA,SAAK3C,MAAL,IAAeA,MAAf;;AACA,SAAK,IAAI0T,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKolB,QAAL,CAAcn2B,MAAlC,EAA0C,EAAE+Q,CAA5C,EAA+C;AAC7C,UAAIyX,KAAK,GAAG,KAAK2N,QAAL,CAAcplB,CAAd,CAAZ;AAAA,UAA8BqlB,EAAE,GAAG5N,KAAK,CAAC6N,SAAN,EAAnC;;AACA,UAAIrH,EAAE,IAAIoH,EAAV,EAAc;AACZ5N,QAAAA,KAAK,CAACkmC,WAAN,CAAkB1/B,EAAlB,EAAsBkH,KAAtB,EAA6B74B,MAA7B;;AACA,YAAImrB,KAAK,CAAC0N,KAAN,IAAe1N,KAAK,CAAC0N,KAAN,CAAYl2B,MAAZ,GAAqB,EAAxC,EAA4C;AAC1C;AACA;AACA,cAAI8uD,SAAS,GAAGtmC,KAAK,CAAC0N,KAAN,CAAYl2B,MAAZ,GAAqB,EAArB,GAA0B,EAA1C;;AACA,eAAK,IAAIorB,GAAG,GAAG0jC,SAAf,EAA0B1jC,GAAG,GAAG5C,KAAK,CAAC0N,KAAN,CAAYl2B,MAA5C,GAAqD;AACnD,gBAAI+uD,IAAI,GAAG,IAAIP,SAAJ,CAAchmC,KAAK,CAAC0N,KAAN,CAAYpqB,KAAZ,CAAkBsf,GAAlB,EAAuBA,GAAG,IAAI,EAA9B,CAAd,CAAX;AACA5C,YAAAA,KAAK,CAACnrB,MAAN,IAAgB0xD,IAAI,CAAC1xD,MAArB;AACA,iBAAK84B,QAAL,CAAchlB,MAAd,CAAqB,EAAEJ,CAAvB,EAA0B,CAA1B,EAA6Bg+C,IAA7B;AACAA,YAAAA,IAAI,CAACznC,MAAL,GAAc,IAAd;AACD;;AACDkB,UAAAA,KAAK,CAAC0N,KAAN,GAAc1N,KAAK,CAAC0N,KAAN,CAAYpqB,KAAZ,CAAkB,CAAlB,EAAqBgjD,SAArB,CAAd;AACA,eAAKE,UAAL;AACD;;AACD;AACD;;AACDhgC,MAAAA,EAAE,IAAIoH,EAAN;AACD;AACF,GAvDqB;;AAyDtB;AACA44B,EAAAA,UAAU,GAAG;AACX,QAAI,KAAK74B,QAAL,CAAcn2B,MAAd,IAAwB,EAA5B,EAAgC;AAChC,QAAIivD,EAAE,GAAG,IAAT;;AACA,OAAG;AACD,UAAIC,OAAO,GAAGD,EAAE,CAAC94B,QAAH,CAAYhlB,MAAZ,CAAmB89C,EAAE,CAAC94B,QAAH,CAAYn2B,MAAZ,GAAqB,CAAxC,EAA2C,CAA3C,CAAd;AACA,UAAImvD,OAAO,GAAG,IAAIP,WAAJ,CAAgBM,OAAhB,CAAd;;AACA,UAAI,CAACD,EAAE,CAAC3nC,MAAR,EAAgB;AAAE;AAChB,YAAImR,IAAI,GAAG,IAAIm2B,WAAJ,CAAgBK,EAAE,CAAC94B,QAAnB,CAAX;AACAsC,QAAAA,IAAI,CAACnR,MAAL,GAAc2nC,EAAd;AACAA,QAAAA,EAAE,CAAC94B,QAAH,GAAc,CAACsC,IAAD,EAAO02B,OAAP,CAAd;AACAF,QAAAA,EAAE,GAAGx2B,IAAL;AACF,OALA,MAKM;AACJw2B,QAAAA,EAAE,CAACpsD,IAAH,IAAWssD,OAAO,CAACtsD,IAAnB;AACAosD,QAAAA,EAAE,CAAC5xD,MAAH,IAAa8xD,OAAO,CAAC9xD,MAArB;AACA,YAAI+xD,OAAO,GAAGp/C,OAAO,CAACi/C,EAAE,CAAC3nC,MAAH,CAAU6O,QAAX,EAAqB84B,EAArB,CAArB;AACAA,QAAAA,EAAE,CAAC3nC,MAAH,CAAU6O,QAAV,CAAmBhlB,MAAnB,CAA0Bi+C,OAAO,GAAG,CAApC,EAAuC,CAAvC,EAA0CD,OAA1C;AACD;;AACDA,MAAAA,OAAO,CAAC7nC,MAAR,GAAiB2nC,EAAE,CAAC3nC,MAApB;AACD,KAfD,QAeS2nC,EAAE,CAAC94B,QAAH,CAAYn2B,MAAZ,GAAqB,EAf9B;;AAgBAivD,IAAAA,EAAE,CAAC3nC,MAAH,CAAU0nC,UAAV;AACD,GA9EqB;;AAgFtBL,EAAAA,KAAK,CAAC3/B,EAAD,EAAK9E,CAAL,EAAQsS,EAAR,EAAY;AACf,SAAK,IAAIzrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKolB,QAAL,CAAcn2B,MAAlC,EAA0C,EAAE+Q,CAA5C,EAA+C;AAC7C,UAAIyX,KAAK,GAAG,KAAK2N,QAAL,CAAcplB,CAAd,CAAZ;AAAA,UAA8BqlB,EAAE,GAAG5N,KAAK,CAAC6N,SAAN,EAAnC;;AACA,UAAIrH,EAAE,GAAGoH,EAAT,EAAa;AACX,YAAIi5B,IAAI,GAAGvmD,IAAI,CAACyiB,GAAL,CAASrB,CAAT,EAAYkM,EAAE,GAAGpH,EAAjB,CAAX;AACA,YAAIxG,KAAK,CAACmmC,KAAN,CAAY3/B,EAAZ,EAAgBqgC,IAAhB,EAAsB7yB,EAAtB,CAAJ,EAA+B,OAAO,IAAP;AAC/B,YAAI,CAACtS,CAAC,IAAImlC,IAAN,KAAe,CAAnB,EAAsB;AACtBrgC,QAAAA,EAAE,GAAG,CAAL;AACD,OALD,MAKOA,EAAE,IAAIoH,EAAN;AACR;AACF;;AA1FqB,CAAxB;;AC/DO,MAAMk5B,UAAN,CAAiB;AACtBvqD,EAAAA,WAAW,CAACgxB,GAAD,EAAMlP,IAAN,EAAY1J,OAAZ,EAAqB;AAC9B,QAAIA,OAAJ,EAAa,KAAK,IAAIoyC,GAAT,IAAgBpyC,OAAhB,EAAyB,IAAIA,OAAO,CAAChH,cAAR,CAAuBo5C,GAAvB,CAAJ,EACpC,KAAKA,GAAL,IAAYpyC,OAAO,CAACoyC,GAAD,CAAnB;AACF,SAAKx5B,GAAL,GAAWA,GAAX;AACA,SAAKlP,IAAL,GAAYA,IAAZ;AACD;;AAEDhV,EAAAA,KAAK,GAAG;AACN,QAAIke,EAAE,GAAG,KAAKgG,GAAL,CAAShG,EAAlB;AAAA,QAAsB2Y,EAAE,GAAG,KAAKpZ,IAAL,CAAUmZ,OAArC;AAAA,QAA8CnZ,IAAI,GAAG,KAAKA,IAA1D;AAAA,QAAgEsH,EAAE,GAAGD,MAAM,CAACrH,IAAD,CAA3E;AACA,QAAIsH,EAAE,IAAI,IAAN,IAAc,CAAC8R,EAAnB,EAAuB;;AACvB,SAAK,IAAI33B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG23B,EAAE,CAAC1oC,MAAvB,EAA+B,EAAE+Q,CAAjC,EAAoC,IAAI23B,EAAE,CAAC33B,CAAD,CAAF,IAAS,IAAb,EAAmB23B,EAAE,CAACv3B,MAAH,CAAUJ,CAAC,EAAX,EAAe,CAAf;;AACvD,QAAI,CAAC23B,EAAE,CAAC1oC,MAAR,EAAgBsvB,IAAI,CAACmZ,OAAL,GAAe,IAAf;AAChB,QAAIprC,MAAM,GAAG8rC,YAAY,CAAC,IAAD,CAAzB;AACA1S,IAAAA,gBAAgB,CAACnH,IAAD,EAAOxmB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY4B,IAAI,CAACjyB,MAAL,GAAcA,MAA1B,CAAP,CAAhB;;AACA,QAAI0yB,EAAJ,EAAQ;AACN2vB,MAAAA,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AAChBy/B,QAAAA,4BAA4B,CAACz/B,EAAD,EAAKT,IAAL,EAAW,CAACjyB,MAAZ,CAA5B;AACA01C,QAAAA,aAAa,CAAChjB,EAAD,EAAK6G,EAAL,EAAS,QAAT,CAAb;AACD,OAHM,CAAP;AAIAkP,MAAAA,WAAW,CAAC/V,EAAD,EAAK,mBAAL,EAA0BA,EAA1B,EAA8B,IAA9B,EAAoC6G,EAApC,CAAX;AACD;AACF;;AAED4hB,EAAAA,OAAO,GAAG;AACR,QAAIiX,IAAI,GAAG,KAAKpyD,MAAhB;AAAA,QAAwB0yB,EAAE,GAAG,KAAKgG,GAAL,CAAShG,EAAtC;AAAA,QAA0CT,IAAI,GAAG,KAAKA,IAAtD;AACA,SAAKjyB,MAAL,GAAc,IAAd;AACA,QAAIq5B,IAAI,GAAGyS,YAAY,CAAC,IAAD,CAAZ,GAAqBsmB,IAAhC;AACA,QAAI,CAAC/4B,IAAL,EAAW;AACX,QAAI,CAACiK,YAAY,CAAC,KAAK5K,GAAN,EAAWzG,IAAX,CAAjB,EAAmCmH,gBAAgB,CAACnH,IAAD,EAAOA,IAAI,CAACjyB,MAAL,GAAcq5B,IAArB,CAAhB;;AACnC,QAAI3G,EAAJ,EAAQ;AACN2vB,MAAAA,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AAChBA,QAAAA,EAAE,CAACO,KAAH,CAASyb,WAAT,GAAuB,IAAvB;AACAyjB,QAAAA,4BAA4B,CAACz/B,EAAD,EAAKT,IAAL,EAAWoH,IAAX,CAA5B;AACAoP,QAAAA,WAAW,CAAC/V,EAAD,EAAK,mBAAL,EAA0BA,EAA1B,EAA8B,IAA9B,EAAoC4G,MAAM,CAACrH,IAAD,CAA1C,CAAX;AACD,OAJM,CAAP;AAKD;AACF;;AArCqB;AAuCxBmB,UAAU,CAAC6+B,UAAD,CAAV;;AAEA,SAASE,4BAAT,CAAsCz/B,EAAtC,EAA0CT,IAA1C,EAAgDoH,IAAhD,EAAsD;AACpD,MAAIoK,YAAY,CAACxR,IAAD,CAAZ,IAAuBS,EAAE,CAACO,KAAH,IAAYP,EAAE,CAACO,KAAH,CAASntB,SAAtB,IAAoC4sB,EAAE,CAACgG,GAAH,CAAO5yB,SAAjE,CAAJ,EACEu2C,cAAc,CAAC3pB,EAAD,EAAK2G,IAAL,CAAd;AACH;;AAED,AAAO,SAASg5B,aAAT,CAAuB35B,GAAvB,EAA4Bu4B,MAA5B,EAAoCznC,IAApC,EAA0C1J,OAA1C,EAAmD;AACxD,MAAI4mB,MAAM,GAAG,IAAIurB,UAAJ,CAAev5B,GAAf,EAAoBlP,IAApB,EAA0B1J,OAA1B,CAAb;AACA,MAAI4S,EAAE,GAAGgG,GAAG,CAAChG,EAAb;AACA,MAAIA,EAAE,IAAIgU,MAAM,CAAC+E,SAAjB,EAA4B/Y,EAAE,CAACplB,OAAH,CAAWo4C,YAAX,GAA0B,IAA1B;AAC5BsL,EAAAA,UAAU,CAACt4B,GAAD,EAAMu4B,MAAN,EAAc,QAAd,EAAwBh/B,IAAI,IAAI;AACxC,QAAImZ,OAAO,GAAGnZ,IAAI,CAACmZ,OAAL,KAAiBnZ,IAAI,CAACmZ,OAAL,GAAe,EAAhC,CAAd;AACA,QAAI1E,MAAM,CAAC4rB,QAAP,IAAmB,IAAvB,EAA6BlnB,OAAO,CAACv4B,IAAR,CAAa6zB,MAAb,EAA7B,KACK0E,OAAO,CAACt3B,MAAR,CAAerI,IAAI,CAACyiB,GAAL,CAASkd,OAAO,CAACzoC,MAAjB,EAAyB8I,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYqW,MAAM,CAAC4rB,QAAnB,CAAzB,CAAf,EAAuE,CAAvE,EAA0E5rB,MAA1E;AACLA,IAAAA,MAAM,CAACzU,IAAP,GAAcA,IAAd;;AACA,QAAIS,EAAE,IAAI,CAAC4Q,YAAY,CAAC5K,GAAD,EAAMzG,IAAN,CAAvB,EAAoC;AAClC,UAAIsgC,YAAY,GAAG9uB,YAAY,CAACxR,IAAD,CAAZ,GAAqByG,GAAG,CAAC5yB,SAA5C;AACAszB,MAAAA,gBAAgB,CAACnH,IAAD,EAAOA,IAAI,CAACjyB,MAAL,GAAc8rC,YAAY,CAACpF,MAAD,CAAjC,CAAhB;AACA,UAAI6rB,YAAJ,EAAkBlW,cAAc,CAAC3pB,EAAD,EAAKgU,MAAM,CAAC1mC,MAAZ,CAAd;AAClB0yB,MAAAA,EAAE,CAACO,KAAH,CAASyb,WAAT,GAAuB,IAAvB;AACD;;AACD,WAAO,IAAP;AACD,GAZS,CAAV;AAaA,MAAIhc,EAAJ,EAAQ+V,WAAW,CAAC/V,EAAD,EAAK,iBAAL,EAAwBA,EAAxB,EAA4BgU,MAA5B,EAAoC,OAAOuqB,MAAP,IAAiB,QAAjB,GAA4BA,MAA5B,GAAqC33B,MAAM,CAAC23B,MAAD,CAA/E,CAAX;AACR,SAAOvqB,MAAP;AACD;;AC1DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AACA,IAAI8rB,YAAY,GAAG,CAAnB;AAEA,AAAO,MAAMC,UAAN,CAAiB;AACtB/qD,EAAAA,WAAW,CAACgxB,GAAD,EAAM/5B,IAAN,EAAY;AACrB,SAAKk6B,KAAL,GAAa,EAAb;AACA,SAAKl6B,IAAL,GAAYA,IAAZ;AACA,SAAK+5B,GAAL,GAAWA,GAAX;AACA,SAAKzoB,EAAL,GAAU,EAAEuiD,YAAZ;AACD,GANqB;;;AAStBh+C,EAAAA,KAAK,GAAG;AACN,QAAI,KAAKk4C,iBAAT,EAA4B;AAC5B,QAAIh6B,EAAE,GAAG,KAAKgG,GAAL,CAAShG,EAAlB;AAAA,QAAsBggC,MAAM,GAAGhgC,EAAE,IAAI,CAACA,EAAE,CAACO,KAAzC;AACA,QAAIy/B,MAAJ,EAAYrS,cAAc,CAAC3tB,EAAD,CAAd;;AACZ,QAAIS,UAAU,CAAC,IAAD,EAAO,OAAP,CAAd,EAA+B;AAC7B,UAAIhD,KAAK,GAAG,KAAKkR,IAAL,EAAZ;AACA,UAAIlR,KAAJ,EAAWsY,WAAW,CAAC,IAAD,EAAO,OAAP,EAAgBtY,KAAK,CAACnO,IAAtB,EAA4BmO,KAAK,CAACN,EAAlC,CAAX;AACZ;;AACD,QAAI3B,GAAG,GAAG,IAAV;AAAA,QAAgBmC,GAAG,GAAG,IAAtB;;AACA,SAAK,IAAI3c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKmlB,KAAL,CAAWl2B,MAA/B,EAAuC,EAAE+Q,CAAzC,EAA4C;AAC1C,UAAIue,IAAI,GAAG,KAAK4G,KAAL,CAAWnlB,CAAX,CAAX;AACA,UAAIsrB,IAAI,GAAGF,gBAAgB,CAAC7M,IAAI,CAACqN,WAAN,EAAmB,IAAnB,CAA3B;AACA,UAAI5M,EAAE,IAAI,CAAC,KAAK8P,SAAhB,EAA2BkT,aAAa,CAAChjB,EAAD,EAAK4G,MAAM,CAACrH,IAAD,CAAX,EAAmB,MAAnB,CAAb,CAA3B,KACK,IAAIS,EAAJ,EAAQ;AACX,YAAIsM,IAAI,CAACnP,EAAL,IAAW,IAAf,EAAqBQ,GAAG,GAAGiJ,MAAM,CAACrH,IAAD,CAAZ;AACrB,YAAI+M,IAAI,CAAChd,IAAL,IAAa,IAAjB,EAAuBkM,GAAG,GAAGoL,MAAM,CAACrH,IAAD,CAAZ;AACxB;AACDA,MAAAA,IAAI,CAACqN,WAAL,GAAmBL,gBAAgB,CAAChN,IAAI,CAACqN,WAAN,EAAmBN,IAAnB,CAAnC;AACA,UAAIA,IAAI,CAAChd,IAAL,IAAa,IAAb,IAAqB,KAAKwgB,SAA1B,IAAuC,CAACc,YAAY,CAAC,KAAK5K,GAAN,EAAWzG,IAAX,CAApD,IAAwES,EAA5E,EACE0G,gBAAgB,CAACnH,IAAD,EAAO+hB,UAAU,CAACthB,EAAE,CAACplB,OAAJ,CAAjB,CAAhB;AACH;;AACD,QAAIolB,EAAE,IAAI,KAAK8P,SAAX,IAAwB,CAAC9P,EAAE,CAAC5S,OAAH,CAAW4tB,YAAxC,EAAsD,KAAK,IAAIh6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKmlB,KAAL,CAAWl2B,MAA/B,EAAuC,EAAE+Q,CAAzC,EAA4C;AAChG,UAAIi/C,MAAM,GAAG9vB,UAAU,CAAC,KAAKhK,KAAL,CAAWnlB,CAAX,CAAD,CAAvB;AAAA,UAAwCuG,GAAG,GAAG0pB,UAAU,CAACgvB,MAAD,CAAxD;;AACA,UAAI14C,GAAG,GAAGyY,EAAE,CAACplB,OAAH,CAAWy2B,aAArB,EAAoC;AAClCrR,QAAAA,EAAE,CAACplB,OAAH,CAAWw2B,OAAX,GAAqB6uB,MAArB;AACAjgC,QAAAA,EAAE,CAACplB,OAAH,CAAWy2B,aAAX,GAA2B9pB,GAA3B;AACAyY,QAAAA,EAAE,CAACplB,OAAH,CAAW02B,cAAX,GAA4B,IAA5B;AACD;AACF;AAED,QAAI9V,GAAG,IAAI,IAAP,IAAewE,EAAf,IAAqB,KAAK8P,SAA9B,EAAyCyS,SAAS,CAACviB,EAAD,EAAKxE,GAAL,EAAUmC,GAAG,GAAG,CAAhB,CAAT;AACzC,SAAKwI,KAAL,CAAWl2B,MAAX,GAAoB,CAApB;AACA,SAAK+pD,iBAAL,GAAyB,IAAzB;;AACA,QAAI,KAAKoC,MAAL,IAAe,KAAKp2B,GAAL,CAASw2B,QAA5B,EAAsC;AACpC,WAAKx2B,GAAL,CAASw2B,QAAT,GAAoB,KAApB;AACA,UAAIx8B,EAAJ,EAAQy7B,gBAAgB,CAACz7B,EAAE,CAACgG,GAAJ,CAAhB;AACT;;AACD,QAAIhG,EAAJ,EAAQ+V,WAAW,CAAC/V,EAAD,EAAK,eAAL,EAAsBA,EAAtB,EAA0B,IAA1B,EAAgCxE,GAAhC,EAAqCmC,GAArC,CAAX;AACR,QAAIqiC,MAAJ,EAAY9R,YAAY,CAACluB,EAAD,CAAZ;AACZ,QAAI,KAAKzI,MAAT,EAAiB,KAAKA,MAAL,CAAYzV,KAAZ;AAClB,GAjDqB;AAoDtB;AACA;AACA;AACA;;;AACA6sB,EAAAA,IAAI,CAACwW,IAAD,EAAOnU,OAAP,EAAgB;AAClB,QAAImU,IAAI,IAAI,IAAR,IAAgB,KAAKl5C,IAAL,IAAa,UAAjC,EAA6Ck5C,IAAI,GAAG,CAAP;AAC7C,QAAI71B,IAAJ,EAAU6N,EAAV;;AACA,SAAK,IAAInc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKmlB,KAAL,CAAWl2B,MAA/B,EAAuC,EAAE+Q,CAAzC,EAA4C;AAC1C,UAAIue,IAAI,GAAG,KAAK4G,KAAL,CAAWnlB,CAAX,CAAX;AACA,UAAIsrB,IAAI,GAAGF,gBAAgB,CAAC7M,IAAI,CAACqN,WAAN,EAAmB,IAAnB,CAA3B;;AACA,UAAIN,IAAI,CAAChd,IAAL,IAAa,IAAjB,EAAuB;AACrBA,QAAAA,IAAI,GAAGgY,GAAG,CAAC0J,OAAO,GAAGzR,IAAH,GAAUqH,MAAM,CAACrH,IAAD,CAAxB,EAAgC+M,IAAI,CAAChd,IAArC,CAAV;AACA,YAAI61B,IAAI,IAAI,CAAC,CAAb,EAAgB,OAAO71B,IAAP;AACjB;;AACD,UAAIgd,IAAI,CAACnP,EAAL,IAAW,IAAf,EAAqB;AACnBA,QAAAA,EAAE,GAAGmK,GAAG,CAAC0J,OAAO,GAAGzR,IAAH,GAAUqH,MAAM,CAACrH,IAAD,CAAxB,EAAgC+M,IAAI,CAACnP,EAArC,CAAR;AACA,YAAIgoB,IAAI,IAAI,CAAZ,EAAe,OAAOhoB,EAAP;AAChB;AACF;;AACD,WAAO7N,IAAI,IAAI;AAACA,MAAAA,IAAI,EAAEA,IAAP;AAAa6N,MAAAA,EAAE,EAAEA;AAAjB,KAAf;AACD,GAxEqB;AA2EtB;;;AACAsrB,EAAAA,OAAO,GAAG;AACR,QAAIptB,GAAG,GAAG,KAAKsT,IAAL,CAAU,CAAC,CAAX,EAAc,IAAd,CAAV;AAAA,QAA+BqF,MAAM,GAAG,IAAxC;AAAA,QAA8ChU,EAAE,GAAG,KAAKgG,GAAL,CAAShG,EAA5D;AACA,QAAI,CAAC3E,GAAD,IAAQ,CAAC2E,EAAb,EAAiB;AACjB2vB,IAAAA,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AAChB,UAAIT,IAAI,GAAGlE,GAAG,CAACkE,IAAf;AAAA,UAAqBiR,KAAK,GAAG5J,MAAM,CAACvL,GAAG,CAACkE,IAAL,CAAnC;AACA,UAAI2V,IAAI,GAAG2G,eAAe,CAAC7b,EAAD,EAAKwQ,KAAL,CAA1B;;AACA,UAAI0E,IAAJ,EAAU;AACR2I,QAAAA,4BAA4B,CAAC3I,IAAD,CAA5B;AACAlV,QAAAA,EAAE,CAACO,KAAH,CAASwtB,gBAAT,GAA4B/tB,EAAE,CAACO,KAAH,CAASyb,WAAT,GAAuB,IAAnD;AACD;;AACDhc,MAAAA,EAAE,CAACO,KAAH,CAASytB,aAAT,GAAyB,IAAzB;;AACA,UAAI,CAACpd,YAAY,CAACoD,MAAM,CAAChO,GAAR,EAAazG,IAAb,CAAb,IAAmCyU,MAAM,CAAC1mC,MAAP,IAAiB,IAAxD,EAA8D;AAC5D,YAAIwxD,SAAS,GAAG9qB,MAAM,CAAC1mC,MAAvB;AACA0mC,QAAAA,MAAM,CAAC1mC,MAAP,GAAgB,IAAhB;AACA,YAAI4yD,OAAO,GAAG9mB,YAAY,CAACpF,MAAD,CAAZ,GAAuB8qB,SAArC;AACA,YAAIoB,OAAJ,EACEx5B,gBAAgB,CAACnH,IAAD,EAAOA,IAAI,CAACjyB,MAAL,GAAc4yD,OAArB,CAAhB;AACH;;AACDnqB,MAAAA,WAAW,CAAC/V,EAAD,EAAK,eAAL,EAAsBA,EAAtB,EAA0B,IAA1B,CAAX;AACD,KAhBM,CAAP;AAiBD;;AAED6M,EAAAA,UAAU,CAACtN,IAAD,EAAO;AACf,QAAI,CAAC,KAAK4G,KAAL,CAAWl2B,MAAZ,IAAsB,KAAK+1B,GAAL,CAAShG,EAAnC,EAAuC;AACrC,UAAIyM,EAAE,GAAG,KAAKzG,GAAL,CAAShG,EAAT,CAAYO,KAArB;AACA,UAAI,CAACkM,EAAE,CAAC8iB,kBAAJ,IAA0BtvC,OAAO,CAACwsB,EAAE,CAAC8iB,kBAAJ,EAAwB,IAAxB,CAAP,IAAwC,CAAC,CAAvE,EACE,CAAC9iB,EAAE,CAACgjB,oBAAH,KAA4BhjB,EAAE,CAACgjB,oBAAH,GAA0B,EAAtD,CAAD,EAA4DtvC,IAA5D,CAAiE,IAAjE;AACH;;AACD,SAAKgmB,KAAL,CAAWhmB,IAAX,CAAgBof,IAAhB;AACD;;AAED0P,EAAAA,UAAU,CAAC1P,IAAD,EAAO;AACf,SAAK4G,KAAL,CAAW/kB,MAAX,CAAkBnB,OAAO,CAAC,KAAKkmB,KAAN,EAAa5G,IAAb,CAAzB,EAA6C,CAA7C;;AACA,QAAI,CAAC,KAAK4G,KAAL,CAAWl2B,MAAZ,IAAsB,KAAK+1B,GAAL,CAAShG,EAAnC,EAAuC;AACrC,UAAIyM,EAAE,GAAG,KAAKzG,GAAL,CAAShG,EAAT,CAAYO,KAArB;AACC,OAACkM,EAAE,CAAC8iB,kBAAH,KAA0B9iB,EAAE,CAAC8iB,kBAAH,GAAwB,EAAlD,CAAD,EAAwDpvC,IAAxD,CAA6D,IAA7D;AACF;AACF;;AAjHqB;AAmHxBugB,UAAU,CAACq/B,UAAD,CAAV;;AAGA,AAAO,SAASI,QAAT,CAAkBn6B,GAAlB,EAAuB1W,IAAvB,EAA6B6N,EAA7B,EAAiC/P,OAAjC,EAA0CnhB,IAA1C,EAAgD;AACrD;AACA;AACA;AACA,MAAImhB,OAAO,IAAIA,OAAO,CAAC0qC,MAAvB,EAA+B,OAAOsI,cAAc,CAACp6B,GAAD,EAAM1W,IAAN,EAAY6N,EAAZ,EAAgB/P,OAAhB,EAAyBnhB,IAAzB,CAArB,CAJsB;;AAMrD,MAAI+5B,GAAG,CAAChG,EAAJ,IAAU,CAACgG,GAAG,CAAChG,EAAJ,CAAOO,KAAtB,EAA6B,OAAOqvB,SAAS,CAAC5pB,GAAG,CAAChG,EAAL,EAASmgC,QAAT,CAAT,CAA4Bn6B,GAA5B,EAAiC1W,IAAjC,EAAuC6N,EAAvC,EAA2C/P,OAA3C,EAAoDnhB,IAApD,CAAP;AAE7B,MAAIkgC,MAAM,GAAG,IAAI4zB,UAAJ,CAAe/5B,GAAf,EAAoB/5B,IAApB,CAAb;AAAA,MAAwC06B,IAAI,GAAGY,GAAG,CAACjY,IAAD,EAAO6N,EAAP,CAAlD;AACA,MAAI/P,OAAJ,EAAaqM,OAAO,CAACrM,OAAD,EAAU+e,MAAV,EAAkB,KAAlB,CAAP,CATwC;;AAWrD,MAAIxF,IAAI,GAAG,CAAP,IAAYA,IAAI,IAAI,CAAR,IAAawF,MAAM,CAACkC,cAAP,KAA0B,KAAvD,EACE,OAAOlC,MAAP;;AACF,MAAIA,MAAM,CAACk0B,YAAX,EAAyB;AACvB;AACAl0B,IAAAA,MAAM,CAAC2D,SAAP,GAAmB,IAAnB;AACA3D,IAAAA,MAAM,CAAC0E,UAAP,GAAoBjZ,IAAI,CAAC,MAAD,EAAS,CAACuU,MAAM,CAACk0B,YAAR,CAAT,EAAgC,mBAAhC,CAAxB;AACA,QAAI,CAACjzC,OAAO,CAACwrB,iBAAb,EAAgCzM,MAAM,CAAC0E,UAAP,CAAkBz/B,YAAlB,CAA+B,kBAA/B,EAAmD,MAAnD;AAChC,QAAIgc,OAAO,CAACigB,UAAZ,EAAwBlB,MAAM,CAAC0E,UAAP,CAAkBxD,UAAlB,GAA+B,IAA/B;AACzB;;AACD,MAAIlB,MAAM,CAAC2D,SAAX,EAAsB;AACpB,QAAII,yBAAyB,CAAClK,GAAD,EAAM1W,IAAI,CAACiQ,IAAX,EAAiBjQ,IAAjB,EAAuB6N,EAAvB,EAA2BgP,MAA3B,CAAzB,IACA7c,IAAI,CAACiQ,IAAL,IAAapC,EAAE,CAACoC,IAAhB,IAAwB2Q,yBAAyB,CAAClK,GAAD,EAAM7I,EAAE,CAACoC,IAAT,EAAejQ,IAAf,EAAqB6N,EAArB,EAAyBgP,MAAzB,CADrD,EAEE,MAAM,IAAI/xB,KAAJ,CAAU,kEAAV,CAAN;AACF6xB,IAAAA,iBAAiB;AAClB;;AAED,MAAIE,MAAM,CAACm0B,YAAX,EACElH,kBAAkB,CAACpzB,GAAD,EAAM;AAAC1W,IAAAA,IAAI,EAAEA,IAAP;AAAa6N,IAAAA,EAAE,EAAEA,EAAjB;AAAqBhtB,IAAAA,MAAM,EAAE;AAA7B,GAAN,EAAgD61B,GAAG,CAAC6d,GAApD,EAAyDyX,GAAzD,CAAlB;AAEF,MAAIiF,OAAO,GAAGjxC,IAAI,CAACiQ,IAAnB;AAAA,MAAyBS,EAAE,GAAGgG,GAAG,CAAChG,EAAlC;AAAA,MAAsCguB,aAAtC;AACAhoB,EAAAA,GAAG,CAACQ,IAAJ,CAAS+5B,OAAT,EAAkBpjC,EAAE,CAACoC,IAAH,GAAU,CAA5B,EAA+BA,IAAI,IAAI;AACrC,QAAIS,EAAE,IAAImM,MAAM,CAAC2D,SAAb,IAA0B,CAAC9P,EAAE,CAAC5S,OAAH,CAAW4tB,YAAtC,IAAsD7K,UAAU,CAAC5Q,IAAD,CAAV,IAAoBS,EAAE,CAACplB,OAAH,CAAWw2B,OAAzF,EACE4c,aAAa,GAAG,IAAhB;AACF,QAAI7hB,MAAM,CAAC2D,SAAP,IAAoBywB,OAAO,IAAIjxC,IAAI,CAACiQ,IAAxC,EAA8CmH,gBAAgB,CAACnH,IAAD,EAAO,CAAP,CAAhB;AAC9CiN,IAAAA,aAAa,CAACjN,IAAD,EAAO,IAAI2M,UAAJ,CAAeC,MAAf,EACeo0B,OAAO,IAAIjxC,IAAI,CAACiQ,IAAhB,GAAuBjQ,IAAI,CAACkN,EAA5B,GAAiC,IADhD,EAEe+jC,OAAO,IAAIpjC,EAAE,CAACoC,IAAd,GAAqBpC,EAAE,CAACX,EAAxB,GAA6B,IAF5C,CAAP,EAE0DwJ,GAAG,CAAChG,EAAJ,IAAUgG,GAAG,CAAChG,EAAJ,CAAOO,KAF3E,CAAb;AAGA,MAAEggC,OAAF;AACD,GARD,EA/BqD;;AAyCrD,MAAIp0B,MAAM,CAAC2D,SAAX,EAAsB9J,GAAG,CAACQ,IAAJ,CAASlX,IAAI,CAACiQ,IAAd,EAAoBpC,EAAE,CAACoC,IAAH,GAAU,CAA9B,EAAiCA,IAAI,IAAI;AAC7D,QAAIqR,YAAY,CAAC5K,GAAD,EAAMzG,IAAN,CAAhB,EAA6BmH,gBAAgB,CAACnH,IAAD,EAAO,CAAP,CAAhB;AAC9B,GAFqB;AAItB,MAAI4M,MAAM,CAACq0B,YAAX,EAAyB/gC,EAAE,CAAC0M,MAAD,EAAS,mBAAT,EAA8B,MAAMA,MAAM,CAACrqB,KAAP,EAApC,CAAF;;AAEzB,MAAIqqB,MAAM,CAACl/B,QAAX,EAAqB;AACnB++B,IAAAA,gBAAgB;AAChB,QAAIhG,GAAG,CAACuzB,OAAJ,CAAYpB,IAAZ,CAAiBloD,MAAjB,IAA2B+1B,GAAG,CAACuzB,OAAJ,CAAYnB,MAAZ,CAAmBnoD,MAAlD,EACE+1B,GAAG,CAACy6B,YAAJ;AACH;;AACD,MAAIt0B,MAAM,CAAC2D,SAAX,EAAsB;AACpB3D,IAAAA,MAAM,CAAC5uB,EAAP,GAAY,EAAEuiD,YAAd;AACA3zB,IAAAA,MAAM,CAACiwB,MAAP,GAAgB,IAAhB;AACD;;AACD,MAAIp8B,EAAJ,EAAQ;AACN;AACA,QAAIguB,aAAJ,EAAmBhuB,EAAE,CAACO,KAAH,CAASytB,aAAT,GAAyB,IAAzB;AACnB,QAAI7hB,MAAM,CAAC2D,SAAX,EACEyS,SAAS,CAACviB,EAAD,EAAK1Q,IAAI,CAACiQ,IAAV,EAAgBpC,EAAE,CAACoC,IAAH,GAAU,CAA1B,CAAT,CADF,KAEK,IAAI4M,MAAM,CAACnV,SAAP,IAAoBmV,MAAM,CAAC6G,UAA3B,IAAyC7G,MAAM,CAAC8G,QAAhD,IAA4D9G,MAAM,CAACp2B,GAAnE,IACAo2B,MAAM,CAAC9Z,UADP,IACqB8Z,MAAM,CAAClf,KADhC,EAEH,KAAK,IAAIjM,CAAC,GAAGsO,IAAI,CAACiQ,IAAlB,EAAwBve,CAAC,IAAImc,EAAE,CAACoC,IAAhC,EAAsCve,CAAC,EAAvC,EAA2CgiC,aAAa,CAAChjB,EAAD,EAAKhf,CAAL,EAAQ,MAAR,CAAb;AAC7C,QAAImrB,MAAM,CAACiwB,MAAX,EAAmBX,gBAAgB,CAACz7B,EAAE,CAACgG,GAAJ,CAAhB;AACnB+P,IAAAA,WAAW,CAAC/V,EAAD,EAAK,aAAL,EAAoBA,EAApB,EAAwBmM,MAAxB,CAAX;AACD;;AACD,SAAOA,MAAP;AACD;AAID;AACA;AACA;;AACA,AAAO,MAAMu0B,gBAAN,CAAuB;AAC5B1rD,EAAAA,WAAW,CAACu5B,OAAD,EAAUkV,OAAV,EAAmB;AAC5B,SAAKlV,OAAL,GAAeA,OAAf;AACA,SAAKkV,OAAL,GAAeA,OAAf;;AACA,SAAK,IAAIziC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGutB,OAAO,CAACt+B,MAA5B,EAAoC,EAAE+Q,CAAtC,EACEutB,OAAO,CAACvtB,CAAD,CAAP,CAAWuW,MAAX,GAAoB,IAApB;AACH;;AAEDzV,EAAAA,KAAK,GAAG;AACN,QAAI,KAAKk4C,iBAAT,EAA4B;AAC5B,SAAKA,iBAAL,GAAyB,IAAzB;;AACA,SAAK,IAAIh5C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKutB,OAAL,CAAat+B,MAAjC,EAAyC,EAAE+Q,CAA3C,EACE,KAAKutB,OAAL,CAAavtB,CAAb,EAAgBc,KAAhB;;AACFi0B,IAAAA,WAAW,CAAC,IAAD,EAAO,OAAP,CAAX;AACD;;AAEDpH,EAAAA,IAAI,CAACwW,IAAD,EAAOnU,OAAP,EAAgB;AAClB,WAAO,KAAKyS,OAAL,CAAa9U,IAAb,CAAkBwW,IAAlB,EAAwBnU,OAAxB,CAAP;AACD;;AAlB2B;AAoB9BtQ,UAAU,CAACggC,gBAAD,CAAV;;AAEA,SAASN,cAAT,CAAwBp6B,GAAxB,EAA6B1W,IAA7B,EAAmC6N,EAAnC,EAAuC/P,OAAvC,EAAgDnhB,IAAhD,EAAsD;AACpDmhB,EAAAA,OAAO,GAAGqM,OAAO,CAACrM,OAAD,CAAjB;AACAA,EAAAA,OAAO,CAAC0qC,MAAR,GAAiB,KAAjB;AACA,MAAIvpB,OAAO,GAAG,CAAC4xB,QAAQ,CAACn6B,GAAD,EAAM1W,IAAN,EAAY6N,EAAZ,EAAgB/P,OAAhB,EAAyBnhB,IAAzB,CAAT,CAAd;AAAA,MAAwDw3C,OAAO,GAAGlV,OAAO,CAAC,CAAD,CAAzE;AACA,MAAIyF,MAAM,GAAG5mB,OAAO,CAACyjB,UAArB;AACA0mB,EAAAA,UAAU,CAACvxB,GAAD,EAAMA,GAAG,IAAI;AACrB,QAAIgO,MAAJ,EAAY5mB,OAAO,CAACyjB,UAAR,GAAqBmD,MAAM,CAAC2sB,SAAP,CAAiB,IAAjB,CAArB;AACZpyB,IAAAA,OAAO,CAACpuB,IAAR,CAAaggD,QAAQ,CAACn6B,GAAD,EAAM6B,OAAO,CAAC7B,GAAD,EAAM1W,IAAN,CAAb,EAA0BuY,OAAO,CAAC7B,GAAD,EAAM7I,EAAN,CAAjC,EAA4C/P,OAA5C,EAAqDnhB,IAArD,CAArB;;AACA,SAAK,IAAI+U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC4xB,MAAJ,CAAW3nD,MAA/B,EAAuC,EAAE+Q,CAAzC,EACE,IAAIglB,GAAG,CAAC4xB,MAAJ,CAAW52C,CAAX,EAAc4/C,QAAlB,EAA4B;;AAC9Bnd,IAAAA,OAAO,GAAG9nB,GAAG,CAAC4S,OAAD,CAAb;AACD,GANS,CAAV;AAOA,SAAO,IAAImyB,gBAAJ,CAAqBnyB,OAArB,EAA8BkV,OAA9B,CAAP;AACD;;AAED,AAAO,SAASod,iBAAT,CAA2B76B,GAA3B,EAAgC;AACrC,SAAOA,GAAG,CAAC86B,SAAJ,CAAcx5B,GAAG,CAACtB,GAAG,CAACC,KAAL,EAAY,CAAZ,CAAjB,EAAiCD,GAAG,CAAC6B,OAAJ,CAAYP,GAAG,CAACtB,GAAG,CAAC2K,QAAJ,EAAD,CAAf,CAAjC,EAAmE3R,CAAC,IAAIA,CAAC,CAACzH,MAA1E,CAAP;AACD;AAED,AAAO,SAASwpC,iBAAT,CAA2B/6B,GAA3B,EAAgCuI,OAAhC,EAAyC;AAC9C,OAAK,IAAIvtB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGutB,OAAO,CAACt+B,MAA5B,EAAoC+Q,CAAC,EAArC,EAAyC;AACvC,QAAImrB,MAAM,GAAGoC,OAAO,CAACvtB,CAAD,CAApB;AAAA,QAAyBqa,GAAG,GAAG8Q,MAAM,CAACwC,IAAP,EAA/B;AACA,QAAIqyB,KAAK,GAAGh7B,GAAG,CAAC6B,OAAJ,CAAYxM,GAAG,CAAC/L,IAAhB,CAAZ;AAAA,QAAmC2xC,GAAG,GAAGj7B,GAAG,CAAC6B,OAAJ,CAAYxM,GAAG,CAAC8B,EAAhB,CAAzC;;AACA,QAAIoK,GAAG,CAACy5B,KAAD,EAAQC,GAAR,CAAP,EAAqB;AACnB,UAAIC,OAAO,GAAGf,QAAQ,CAACn6B,GAAD,EAAMg7B,KAAN,EAAaC,GAAb,EAAkB90B,MAAM,CAACsX,OAAzB,EAAkCtX,MAAM,CAACsX,OAAP,CAAex3C,IAAjD,CAAtB;AACAkgC,MAAAA,MAAM,CAACoC,OAAP,CAAepuB,IAAf,CAAoB+gD,OAApB;AACAA,MAAAA,OAAO,CAAC3pC,MAAR,GAAiB4U,MAAjB;AACD;AACF;AACF;AAED,AAAO,SAASg1B,mBAAT,CAA6B5yB,OAA7B,EAAsC;AAC3C,OAAK,IAAIvtB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGutB,OAAO,CAACt+B,MAA5B,EAAoC+Q,CAAC,EAArC,EAAyC;AACvC,QAAImrB,MAAM,GAAGoC,OAAO,CAACvtB,CAAD,CAApB;AAAA,QAAyB42C,MAAM,GAAG,CAACzrB,MAAM,CAACsX,OAAP,CAAezd,GAAhB,CAAlC;AACAuxB,IAAAA,UAAU,CAACprB,MAAM,CAACsX,OAAP,CAAezd,GAAhB,EAAqBmL,CAAC,IAAIymB,MAAM,CAACz3C,IAAP,CAAYgxB,CAAZ,CAA1B,CAAV;;AACA,SAAK,IAAIrS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqN,MAAM,CAACoC,OAAP,CAAet+B,MAAnC,EAA2C6uB,CAAC,EAA5C,EAAgD;AAC9C,UAAIsiC,SAAS,GAAGj1B,MAAM,CAACoC,OAAP,CAAezP,CAAf,CAAhB;;AACA,UAAI7e,OAAO,CAAC23C,MAAD,EAASwJ,SAAS,CAACp7B,GAAnB,CAAP,IAAkC,CAAC,CAAvC,EAA0C;AACxCo7B,QAAAA,SAAS,CAAC7pC,MAAV,GAAmB,IAAnB;AACA4U,QAAAA,MAAM,CAACoC,OAAP,CAAentB,MAAf,CAAsB0d,CAAC,EAAvB,EAA2B,CAA3B;AACD;AACF;AACF;AACF;;AC/QD,IAAIuiC,SAAS,GAAG,CAAhB;;AACA,IAAIC,GAAG,GAAG,UAASnmD,IAAT,EAAe6nB,IAAf,EAAqBk0B,SAArB,EAAgCqK,OAAhC,EAAyCvjD,SAAzC,EAAoD;AAC5D,MAAI,EAAE,gBAAgBsjD,GAAlB,CAAJ,EAA4B,OAAO,IAAIA,GAAJ,CAAQnmD,IAAR,EAAc6nB,IAAd,EAAoBk0B,SAApB,EAA+BqK,OAA/B,EAAwCvjD,SAAxC,CAAP;AAC5B,MAAIk5C,SAAS,IAAI,IAAjB,EAAuBA,SAAS,GAAG,CAAZ;AAEvB2H,EAAAA,WAAW,CAAC7iD,IAAZ,CAAiB,IAAjB,EAAuB,CAAC,IAAIyiD,SAAJ,CAAc,CAAC,IAAIltB,IAAJ,CAAS,EAAT,EAAa,IAAb,CAAD,CAAd,CAAD,CAAvB;AACA,OAAKtL,KAAL,GAAaixB,SAAb;AACA,OAAK9jD,SAAL,GAAiB,KAAKke,UAAL,GAAkB,CAAnC;AACA,OAAKkrC,QAAL,GAAgB,KAAhB;AACA,OAAKgF,eAAL,GAAuB,CAAvB;AACA,OAAKt3B,YAAL,GAAoB,KAAKD,iBAAL,GAAyBitB,SAA7C;AACA,MAAIn/B,KAAK,GAAGuP,GAAG,CAAC4vB,SAAD,EAAY,CAAZ,CAAf;AACA,OAAKrT,GAAL,GAAWoS,eAAe,CAACl+B,KAAD,CAA1B;AACA,OAAKwhC,OAAL,GAAe,IAAIrB,OAAJ,CAAY,IAAZ,CAAf;AACA,OAAK36C,EAAL,GAAU,EAAE8jD,SAAZ;AACA,OAAK1K,UAAL,GAAkB3zB,IAAlB;AACA,OAAKu+B,OAAL,GAAeA,OAAf;AACA,OAAKvjD,SAAL,GAAkBA,SAAS,IAAI,KAAd,GAAuB,KAAvB,GAA+B,KAAhD;AACA,OAAKqzC,MAAL,GAAc,KAAd;AAEA,MAAI,OAAOl2C,IAAP,IAAe,QAAnB,EAA6BA,IAAI,GAAG,KAAK8iD,UAAL,CAAgB9iD,IAAhB,CAAP;AAC7B47C,EAAAA,SAAS,CAAC,IAAD,EAAO;AAACznC,IAAAA,IAAI,EAAEyI,KAAP;AAAcoF,IAAAA,EAAE,EAAEpF,KAAlB;AAAyB5c,IAAAA,IAAI,EAAEA;AAA/B,GAAP,CAAT;AACA0/C,EAAAA,YAAY,CAAC,IAAD,EAAO5E,eAAe,CAACl+B,KAAD,CAAtB,EAA+BgD,cAA/B,CAAZ;AACD,CAtBD;;AAwBAumC,GAAG,CAACn7C,SAAJ,GAAgB8V,SAAS,CAAC4iC,WAAW,CAAC14C,SAAb,EAAwB;AAC/CnR,EAAAA,WAAW,EAAEssD,GADkC;AAE/C;AACA;AACA;AACA;AACA96B,EAAAA,IAAI,EAAE,UAASlX,IAAT,EAAe6N,EAAf,EAAmBsP,EAAnB,EAAuB;AAC3B,QAAIA,EAAJ,EAAQ,KAAKmyB,KAAL,CAAWtvC,IAAI,GAAG,KAAK2W,KAAvB,EAA8B9I,EAAE,GAAG7N,IAAnC,EAAyCmd,EAAzC,EAAR,KACK,KAAKmyB,KAAL,CAAW,KAAK34B,KAAhB,EAAuB,KAAKA,KAAL,GAAa,KAAKnzB,IAAzC,EAA+Cwc,IAA/C;AACN,GAT8C;AAW/C;AACA3M,EAAAA,MAAM,EAAE,UAASsc,EAAT,EAAakH,KAAb,EAAoB;AAC1B,QAAI74B,MAAM,GAAG,CAAb;;AACA,SAAK,IAAI0T,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmlB,KAAK,CAACl2B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC1T,MAAM,IAAI64B,KAAK,CAACnlB,CAAD,CAAL,CAAS1T,MAAnB;;AACvC,SAAKqxD,WAAL,CAAiB1/B,EAAE,GAAG,KAAKgH,KAA3B,EAAkCE,KAAlC,EAAyC74B,MAAzC;AACD,GAhB8C;AAiB/CsQ,EAAAA,MAAM,EAAE,UAASqhB,EAAT,EAAa9E,CAAb,EAAgB;AAAE,SAAKukC,WAAL,CAAiBz/B,EAAE,GAAG,KAAKgH,KAA3B,EAAkC9L,CAAlC;AAAsC,GAjBjB;AAmB/C;AACA;AAEAsnC,EAAAA,QAAQ,EAAE,UAASF,OAAT,EAAkB;AAC1B,QAAIp7B,KAAK,GAAGM,QAAQ,CAAC,IAAD,EAAO,KAAKR,KAAZ,EAAmB,KAAKA,KAAL,GAAa,KAAKnzB,IAArC,CAApB;AACA,QAAIyuD,OAAO,KAAK,KAAhB,EAAuB,OAAOp7B,KAAP;AACvB,WAAOA,KAAK,CAACld,IAAN,CAAWs4C,OAAO,IAAI,KAAKG,aAAL,EAAtB,CAAP;AACD,GA1B8C;AA2B/CC,EAAAA,QAAQ,EAAE7R,WAAW,CAAC,UAAS5qC,IAAT,EAAe;AACnC,QAAIiM,GAAG,GAAGmW,GAAG,CAAC,KAAKrB,KAAN,EAAa,CAAb,CAAb;AAAA,QAA8BzpB,IAAI,GAAG,KAAKypB,KAAL,GAAa,KAAKnzB,IAAlB,GAAyB,CAA9D;AACA+pD,IAAAA,UAAU,CAAC,IAAD,EAAO;AAACvtC,MAAAA,IAAI,EAAE6B,GAAP;AAAYgM,MAAAA,EAAE,EAAEmK,GAAG,CAAC9qB,IAAD,EAAOupB,OAAO,CAAC,IAAD,EAAOvpB,IAAP,CAAP,CAAoBrB,IAApB,CAAyBlL,MAAhC,CAAnB;AACCkL,MAAAA,IAAI,EAAE,KAAK8iD,UAAL,CAAgB/4C,IAAhB,CADP;AAC8B/U,MAAAA,MAAM,EAAE,UADtC;AACkDy9B,MAAAA,IAAI,EAAE;AADxD,KAAP,EACsE,IADtE,CAAV;AAEA,QAAI,KAAK5N,EAAT,EAAaiqB,cAAc,CAAC,KAAKjqB,EAAN,EAAU,CAAV,EAAa,CAAb,CAAd;AACb66B,IAAAA,YAAY,CAAC,IAAD,EAAO5E,eAAe,CAAC9kC,GAAD,CAAtB,EAA6B4J,cAA7B,CAAZ;AACD,GANoB,CA3B0B;AAkC/CijC,EAAAA,YAAY,EAAE,UAAS94C,IAAT,EAAeoK,IAAf,EAAqB6N,EAArB,EAAyBhtB,MAAzB,EAAiC;AAC7Cmf,IAAAA,IAAI,GAAGuY,OAAO,CAAC,IAAD,EAAOvY,IAAP,CAAd;AACA6N,IAAAA,EAAE,GAAGA,EAAE,GAAG0K,OAAO,CAAC,IAAD,EAAO1K,EAAP,CAAV,GAAuB7N,IAA9B;AACA0uC,IAAAA,YAAY,CAAC,IAAD,EAAO94C,IAAP,EAAaoK,IAAb,EAAmB6N,EAAnB,EAAuBhtB,MAAvB,CAAZ;AACD,GAtC8C;AAuC/CyxD,EAAAA,QAAQ,EAAE,UAAStyC,IAAT,EAAe6N,EAAf,EAAmBokC,OAAnB,EAA4B;AACpC,QAAIp7B,KAAK,GAAGI,UAAU,CAAC,IAAD,EAAOsB,OAAO,CAAC,IAAD,EAAOvY,IAAP,CAAd,EAA4BuY,OAAO,CAAC,IAAD,EAAO1K,EAAP,CAAnC,CAAtB;AACA,QAAIokC,OAAO,KAAK,KAAhB,EAAuB,OAAOp7B,KAAP;AACvB,QAAIo7B,OAAO,KAAK,EAAhB,EAAoB,OAAOp7B,KAAK,CAACld,IAAN,CAAW,EAAX,CAAP;AACpB,WAAOkd,KAAK,CAACld,IAAN,CAAWs4C,OAAO,IAAI,KAAKG,aAAL,EAAtB,CAAP;AACD,GA5C8C;AA8C/C37B,EAAAA,OAAO,EAAE,UAASxG,IAAT,EAAe;AAAC,QAAIuC,CAAC,GAAG,KAAK+/B,aAAL,CAAmBtiC,IAAnB,CAAR;AAAkC,WAAOuC,CAAC,IAAIA,CAAC,CAAC3mB,IAAd;AAAmB,GA9C/B;AAgD/C0mD,EAAAA,aAAa,EAAE,UAAStiC,IAAT,EAAe;AAAC,QAAI2H,MAAM,CAAC,IAAD,EAAO3H,IAAP,CAAV,EAAwB,OAAOwG,OAAO,CAAC,IAAD,EAAOxG,IAAP,CAAd;AAA2B,GAhDnC;AAiD/CuiC,EAAAA,aAAa,EAAE,UAASviC,IAAT,EAAe;AAAC,WAAOqH,MAAM,CAACrH,IAAD,CAAb;AAAoB,GAjDJ;AAmD/CwiC,EAAAA,wBAAwB,EAAE,UAASxiC,IAAT,EAAe;AACvC,QAAI,OAAOA,IAAP,IAAe,QAAnB,EAA6BA,IAAI,GAAGwG,OAAO,CAAC,IAAD,EAAOxG,IAAP,CAAd;AAC7B,WAAO4Q,UAAU,CAAC5Q,IAAD,CAAjB;AACD,GAtD8C;AAwD/CyiC,EAAAA,SAAS,EAAE,YAAW;AAAC,WAAO,KAAKlvD,IAAZ;AAAiB,GAxDO;AAyD/CokD,EAAAA,SAAS,EAAE,YAAW;AAAC,WAAO,KAAKjxB,KAAZ;AAAkB,GAzDM;AA0D/C0K,EAAAA,QAAQ,EAAE,YAAW;AAAC,WAAO,KAAK1K,KAAL,GAAa,KAAKnzB,IAAlB,GAAyB,CAAhC;AAAkC,GA1DT;AA4D/C+0B,EAAAA,OAAO,EAAE,UAASxM,GAAT,EAAc;AAAC,WAAOwM,OAAO,CAAC,IAAD,EAAOxM,GAAP,CAAd;AAA0B,GA5DH;AA8D/CyuB,EAAAA,SAAS,EAAE,UAAS/xB,KAAT,EAAgB;AACzB,QAAIF,KAAK,GAAG,KAAKgsB,GAAL,CAASJ,OAAT,EAAZ;AAAA,QAAgCpoB,GAAhC;AACA,QAAItD,KAAK,IAAI,IAAT,IAAiBA,KAAK,IAAI,MAA9B,EAAsCsD,GAAG,GAAGxD,KAAK,CAACpmB,IAAZ,CAAtC,KACK,IAAIsmB,KAAK,IAAI,QAAb,EAAuBsD,GAAG,GAAGxD,KAAK,CAAC0pB,MAAZ,CAAvB,KACA,IAAIxpB,KAAK,IAAI,KAAT,IAAkBA,KAAK,IAAI,IAA3B,IAAmCA,KAAK,KAAK,KAAjD,EAAwDsD,GAAG,GAAGxD,KAAK,CAACsF,EAAN,EAAN,CAAxD,KACA9B,GAAG,GAAGxD,KAAK,CAACvI,IAAN,EAAN;AACL,WAAO+L,GAAP;AACD,GArE8C;AAsE/C4mC,EAAAA,cAAc,EAAE,YAAW;AAAE,WAAO,KAAKpe,GAAL,CAASC,MAAhB;AAAwB,GAtEN;AAuE/C6R,EAAAA,iBAAiB,EAAE,YAAW;AAAC,WAAO,KAAK9R,GAAL,CAAS8R,iBAAT,EAAP;AAAoC,GAvEpB;AAyE/CuM,EAAAA,SAAS,EAAEpS,WAAW,CAAC,UAASvwB,IAAT,EAAe/C,EAAf,EAAmBpP,OAAnB,EAA4B;AACjD8tC,IAAAA,kBAAkB,CAAC,IAAD,EAAOrzB,OAAO,CAAC,IAAD,EAAO,OAAOtI,IAAP,IAAe,QAAf,GAA0B+H,GAAG,CAAC/H,IAAD,EAAO/C,EAAE,IAAI,CAAb,CAA7B,GAA+C+C,IAAtD,CAAd,EAA2E,IAA3E,EAAiFnS,OAAjF,CAAlB;AACD,GAFqB,CAzEyB;AA4E/CytC,EAAAA,YAAY,EAAE/K,WAAW,CAAC,UAASvO,MAAT,EAAiB9vC,IAAjB,EAAuB2b,OAAvB,EAAgC;AACxD8tC,IAAAA,kBAAkB,CAAC,IAAD,EAAOrzB,OAAO,CAAC,IAAD,EAAO0Z,MAAP,CAAd,EAA8B1Z,OAAO,CAAC,IAAD,EAAOp2B,IAAI,IAAI8vC,MAAf,CAArC,EAA6Dn0B,OAA7D,CAAlB;AACD,GAFwB,CA5EsB;AA+E/CwtC,EAAAA,eAAe,EAAE9K,WAAW,CAAC,UAASr+C,IAAT,EAAekuC,KAAf,EAAsBvyB,OAAtB,EAA+B;AAC1DwtC,IAAAA,eAAe,CAAC,IAAD,EAAO/yB,OAAO,CAAC,IAAD,EAAOp2B,IAAP,CAAd,EAA4BkuC,KAAK,IAAI9X,OAAO,CAAC,IAAD,EAAO8X,KAAP,CAA5C,EAA2DvyB,OAA3D,CAAf;AACD,GAF2B,CA/EmB;AAkF/C0tC,EAAAA,gBAAgB,EAAEhL,WAAW,CAAC,UAASiL,KAAT,EAAgB3tC,OAAhB,EAAyB;AACrD0tC,IAAAA,gBAAgB,CAAC,IAAD,EAAO9yB,YAAY,CAAC,IAAD,EAAO+yB,KAAP,CAAnB,EAAkC3tC,OAAlC,CAAhB;AACD,GAF4B,CAlFkB;AAqF/C+0C,EAAAA,kBAAkB,EAAErS,WAAW,CAAC,UAASv2B,CAAT,EAAYnM,OAAZ,EAAqB;AACnD,QAAI2tC,KAAK,GAAGtzC,GAAG,CAAC,KAAKo8B,GAAL,CAASC,MAAV,EAAkBvqB,CAAlB,CAAf;AACAuhC,IAAAA,gBAAgB,CAAC,IAAD,EAAO9yB,YAAY,CAAC,IAAD,EAAO+yB,KAAP,CAAnB,EAAkC3tC,OAAlC,CAAhB;AACD,GAH8B,CArFgB;AAyF/Cg1C,EAAAA,aAAa,EAAEtS,WAAW,CAAC,UAAShM,MAAT,EAAiBL,OAAjB,EAA0Br2B,OAA1B,EAAmC;AAC5D,QAAI,CAAC02B,MAAM,CAAC7zC,MAAZ,EAAoB;AACpB,QAAI2rB,GAAG,GAAG,EAAV;;AACA,SAAK,IAAI5a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EACE4a,GAAG,CAAC5a,CAAD,CAAH,GAAS,IAAI00C,KAAJ,CAAU7tB,OAAO,CAAC,IAAD,EAAOic,MAAM,CAAC9iC,CAAD,CAAN,CAAUugC,MAAjB,CAAjB,EACU1Z,OAAO,CAAC,IAAD,EAAOic,MAAM,CAAC9iC,CAAD,CAAN,CAAUvP,IAAV,IAAkBqyC,MAAM,CAAC9iC,CAAD,CAAN,CAAUugC,MAAnC,CADjB,CAAT;;AAEF,QAAIkC,OAAO,IAAI,IAAf,EAAqBA,OAAO,GAAG1qC,IAAI,CAACyiB,GAAL,CAASsoB,MAAM,CAAC7zC,MAAP,GAAgB,CAAzB,EAA4B,KAAK4zC,GAAL,CAASE,SAArC,CAAV;AACrB8W,IAAAA,YAAY,CAAC,IAAD,EAAOjF,kBAAkB,CAAC,KAAK51B,EAAN,EAAUpE,GAAV,EAAe6nB,OAAf,CAAzB,EAAkDr2B,OAAlD,CAAZ;AACD,GARyB,CAzFqB;AAkG/Ci1C,EAAAA,YAAY,EAAEvS,WAAW,CAAC,UAASvO,MAAT,EAAiB9vC,IAAjB,EAAuB2b,OAAvB,EAAgC;AACxD,QAAI02B,MAAM,GAAG,KAAKD,GAAL,CAASC,MAAT,CAAgB/nC,KAAhB,CAAsB,CAAtB,CAAb;AACA+nC,IAAAA,MAAM,CAAC3jC,IAAP,CAAY,IAAIu1C,KAAJ,CAAU7tB,OAAO,CAAC,IAAD,EAAO0Z,MAAP,CAAjB,EAAiC1Z,OAAO,CAAC,IAAD,EAAOp2B,IAAI,IAAI8vC,MAAf,CAAxC,CAAZ;AACAsZ,IAAAA,YAAY,CAAC,IAAD,EAAOjF,kBAAkB,CAAC,KAAK51B,EAAN,EAAU8jB,MAAV,EAAkBA,MAAM,CAAC7zC,MAAP,GAAgB,CAAlC,CAAzB,EAA+Dmd,OAA/D,CAAZ;AACD,GAJwB,CAlGsB;AAwG/C8U,EAAAA,YAAY,EAAE,UAASq/B,OAAT,EAAkB;AAC9B,QAAIzd,MAAM,GAAG,KAAKD,GAAL,CAASC,MAAtB;AAAA,QAA8B3d,KAA9B;;AACA,SAAK,IAAInlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,UAAI6iC,GAAG,GAAGtd,UAAU,CAAC,IAAD,EAAOud,MAAM,CAAC9iC,CAAD,CAAN,CAAUsO,IAAV,EAAP,EAAyBw0B,MAAM,CAAC9iC,CAAD,CAAN,CAAUmc,EAAV,EAAzB,CAApB;AACAgJ,MAAAA,KAAK,GAAGA,KAAK,GAAGA,KAAK,CAACxlB,MAAN,CAAakjC,GAAb,CAAH,GAAuBA,GAApC;AACD;;AACD,QAAI0d,OAAO,KAAK,KAAhB,EAAuB,OAAOp7B,KAAP,CAAvB,KACK,OAAOA,KAAK,CAACld,IAAN,CAAWs4C,OAAO,IAAI,KAAKG,aAAL,EAAtB,CAAP;AACN,GAhH8C;AAiH/CY,EAAAA,aAAa,EAAE,UAASf,OAAT,EAAkB;AAC/B,QAAI9yB,KAAK,GAAG,EAAZ;AAAA,QAAgBqV,MAAM,GAAG,KAAKD,GAAL,CAASC,MAAlC;;AACA,SAAK,IAAI9iC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,UAAI6iC,GAAG,GAAGtd,UAAU,CAAC,IAAD,EAAOud,MAAM,CAAC9iC,CAAD,CAAN,CAAUsO,IAAV,EAAP,EAAyBw0B,MAAM,CAAC9iC,CAAD,CAAN,CAAUmc,EAAV,EAAzB,CAApB;AACA,UAAIokC,OAAO,KAAK,KAAhB,EAAuB1d,GAAG,GAAGA,GAAG,CAAC56B,IAAJ,CAASs4C,OAAO,IAAI,KAAKG,aAAL,EAApB,CAAN;AACvBjzB,MAAAA,KAAK,CAACztB,CAAD,CAAL,GAAW6iC,GAAX;AACD;;AACD,WAAOpV,KAAP;AACD,GAzH8C;AA0H/C8zB,EAAAA,gBAAgB,EAAE,UAASr9C,IAAT,EAAe1P,QAAf,EAAyBrF,MAAzB,EAAiC;AACjD,QAAIqyD,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIxhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK6iC,GAAL,CAASC,MAAT,CAAgB7zC,MAApC,EAA4C+Q,CAAC,EAA7C,EACEwhD,GAAG,CAACxhD,CAAD,CAAH,GAASkE,IAAT;;AACF,SAAKu9C,iBAAL,CAAuBD,GAAvB,EAA4BhtD,QAA5B,EAAsCrF,MAAM,IAAI,QAAhD;AACD,GA/H8C;AAgI/CsyD,EAAAA,iBAAiB,EAAE3S,WAAW,CAAC,UAAS5qC,IAAT,EAAe1P,QAAf,EAAyBrF,MAAzB,EAAiC;AAC9D,QAAIkmC,OAAO,GAAG,EAAd;AAAA,QAAkBwN,GAAG,GAAG,KAAKA,GAA7B;;AACA,SAAK,IAAI7iC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6iC,GAAG,CAACC,MAAJ,CAAW7zC,MAA/B,EAAuC+Q,CAAC,EAAxC,EAA4C;AAC1C,UAAI6W,KAAK,GAAGgsB,GAAG,CAACC,MAAJ,CAAW9iC,CAAX,CAAZ;AACAq1B,MAAAA,OAAO,CAACr1B,CAAD,CAAP,GAAa;AAACsO,QAAAA,IAAI,EAAEuI,KAAK,CAACvI,IAAN,EAAP;AAAqB6N,QAAAA,EAAE,EAAEtF,KAAK,CAACsF,EAAN,EAAzB;AAAqChiB,QAAAA,IAAI,EAAE,KAAK8iD,UAAL,CAAgB/4C,IAAI,CAAClE,CAAD,CAApB,CAA3C;AAAqE7Q,QAAAA,MAAM,EAAEA;AAA7E,OAAb;AACD;;AACD,QAAI6qD,MAAM,GAAGxlD,QAAQ,IAAIA,QAAQ,IAAI,KAAxB,IAAiC8gD,kBAAkB,CAAC,IAAD,EAAOjgB,OAAP,EAAgB7gC,QAAhB,CAAhE;;AACA,SAAK,IAAIwL,CAAC,GAAGq1B,OAAO,CAACpmC,MAAR,GAAiB,CAA9B,EAAiC+Q,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EACE67C,UAAU,CAAC,IAAD,EAAOxmB,OAAO,CAACr1B,CAAD,CAAd,CAAV;;AACF,QAAIg6C,MAAJ,EAAYI,0BAA0B,CAAC,IAAD,EAAOJ,MAAP,CAA1B,CAAZ,KACK,IAAI,KAAKh7B,EAAT,EAAa6pB,mBAAmB,CAAC,KAAK7pB,EAAN,CAAnB;AACnB,GAX6B,CAhIiB;AA4I/C0iC,EAAAA,IAAI,EAAE5S,WAAW,CAAC,YAAW;AAACsN,IAAAA,qBAAqB,CAAC,IAAD,EAAO,MAAP,CAArB;AAAoC,GAAjD,CA5I8B;AA6I/CuF,EAAAA,IAAI,EAAE7S,WAAW,CAAC,YAAW;AAACsN,IAAAA,qBAAqB,CAAC,IAAD,EAAO,MAAP,CAArB;AAAoC,GAAjD,CA7I8B;AA8I/CwF,EAAAA,aAAa,EAAE9S,WAAW,CAAC,YAAW;AAACsN,IAAAA,qBAAqB,CAAC,IAAD,EAAO,MAAP,EAAe,IAAf,CAArB;AAA0C,GAAvD,CA9IqB;AA+I/CyF,EAAAA,aAAa,EAAE/S,WAAW,CAAC,YAAW;AAACsN,IAAAA,qBAAqB,CAAC,IAAD,EAAO,MAAP,EAAe,IAAf,CAArB;AAA0C,GAAvD,CA/IqB;AAiJ/C0F,EAAAA,YAAY,EAAE,UAAS7+B,GAAT,EAAc;AAAC,SAAKotB,MAAL,GAAcptB,GAAd;AAAkB,GAjJA;AAkJ/C8+B,EAAAA,YAAY,EAAE,YAAW;AAAC,WAAO,KAAK1R,MAAZ;AAAmB,GAlJE;AAoJ/C2R,EAAAA,WAAW,EAAE,YAAW;AACtB,QAAI7J,IAAI,GAAG,KAAKI,OAAhB;AAAA,QAAyBpB,IAAI,GAAG,CAAhC;AAAA,QAAmCC,MAAM,GAAG,CAA5C;;AACA,SAAK,IAAIp3C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm4C,IAAI,CAAChB,IAAL,CAAUloD,MAA9B,EAAsC+Q,CAAC,EAAvC,EAA2C,IAAI,CAACm4C,IAAI,CAAChB,IAAL,CAAUn3C,CAAV,EAAa8iC,MAAlB,EAA0B,EAAEqU,IAAF;;AACrE,SAAK,IAAIn3C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm4C,IAAI,CAACf,MAAL,CAAYnoD,MAAhC,EAAwC+Q,CAAC,EAAzC,EAA6C,IAAI,CAACm4C,IAAI,CAACf,MAAL,CAAYp3C,CAAZ,EAAe8iC,MAApB,EAA4B,EAAEsU,MAAF;;AACzE,WAAO;AAACsK,MAAAA,IAAI,EAAEvK,IAAP;AAAawK,MAAAA,IAAI,EAAEvK;AAAnB,KAAP;AACD,GAzJ8C;AA0J/CqI,EAAAA,YAAY,EAAE,YAAW;AACvB,SAAKlH,OAAL,GAAe,IAAIrB,OAAJ,CAAY,KAAKqB,OAAjB,CAAf;AACAhC,IAAAA,UAAU,CAAC,IAAD,EAAOvxB,GAAG,IAAIA,GAAG,CAACuzB,OAAJ,GAAc,KAAKA,OAAjC,EAA0C,IAA1C,CAAV;AACD,GA7J8C;AA+J/C0J,EAAAA,SAAS,EAAE,YAAW;AACpB,SAAKzB,eAAL,GAAuB,KAAK0B,gBAAL,CAAsB,IAAtB,CAAvB;AACD,GAjK8C;AAkK/CA,EAAAA,gBAAgB,EAAE,UAASC,UAAT,EAAqB;AACrC,QAAIA,UAAJ,EACE,KAAK5J,OAAL,CAAaf,MAAb,GAAsB,KAAKe,OAAL,CAAad,SAAb,GAAyB,KAAKc,OAAL,CAAab,UAAb,GAA0B,IAAzE;AACF,WAAO,KAAKa,OAAL,CAAaX,UAApB;AACD,GAtK8C;AAuK/CwK,EAAAA,OAAO,EAAE,UAAUC,GAAV,EAAe;AACtB,WAAO,KAAK9J,OAAL,CAAaX,UAAb,KAA4ByK,GAAG,IAAI,KAAK7B,eAAxC,CAAP;AACD,GAzK8C;AA2K/C8B,EAAAA,UAAU,EAAE,YAAW;AACrB,WAAO;AAACnL,MAAAA,IAAI,EAAEmC,gBAAgB,CAAC,KAAKf,OAAL,CAAapB,IAAd,CAAvB;AACCC,MAAAA,MAAM,EAAEkC,gBAAgB,CAAC,KAAKf,OAAL,CAAanB,MAAd;AADzB,KAAP;AAED,GA9K8C;AA+K/CmL,EAAAA,UAAU,EAAE,UAASC,QAAT,EAAmB;AAC7B,QAAIrK,IAAI,GAAG,KAAKI,OAAL,GAAe,IAAIrB,OAAJ,CAAY,KAAKqB,OAAjB,CAA1B;AACAJ,IAAAA,IAAI,CAAChB,IAAL,GAAYmC,gBAAgB,CAACkJ,QAAQ,CAACrL,IAAT,CAAcp8C,KAAd,CAAoB,CAApB,CAAD,EAAyB,IAAzB,EAA+B,IAA/B,CAA5B;AACAo9C,IAAAA,IAAI,CAACf,MAAL,GAAckC,gBAAgB,CAACkJ,QAAQ,CAACpL,MAAT,CAAgBr8C,KAAhB,CAAsB,CAAtB,CAAD,EAA2B,IAA3B,EAAiC,IAAjC,CAA9B;AACD,GAnL8C;AAqL/C0nD,EAAAA,eAAe,EAAE3T,WAAW,CAAC,UAASvwB,IAAT,EAAemkC,QAAf,EAAyBv3D,KAAzB,EAAgC;AAC3D,WAAOmyD,UAAU,CAAC,IAAD,EAAO/+B,IAAP,EAAa,QAAb,EAAuBA,IAAI,IAAI;AAC9C,UAAIgP,OAAO,GAAGhP,IAAI,CAACoY,aAAL,KAAuBpY,IAAI,CAACoY,aAAL,GAAqB,EAA5C,CAAd;AACApJ,MAAAA,OAAO,CAACm1B,QAAD,CAAP,GAAoBv3D,KAApB;AACA,UAAI,CAACA,KAAD,IAAUwwB,OAAO,CAAC4R,OAAD,CAArB,EAAgChP,IAAI,CAACoY,aAAL,GAAqB,IAArB;AAChC,aAAO,IAAP;AACD,KALgB,CAAjB;AAMD,GAP2B,CArLmB;AA8L/CgsB,EAAAA,WAAW,EAAE7T,WAAW,CAAC,UAAS4T,QAAT,EAAmB;AAC1C,SAAKl9B,IAAL,CAAUjH,IAAI,IAAI;AAChB,UAAIA,IAAI,CAACoY,aAAL,IAAsBpY,IAAI,CAACoY,aAAL,CAAmB+rB,QAAnB,CAA1B,EAAwD;AACtDpF,QAAAA,UAAU,CAAC,IAAD,EAAO/+B,IAAP,EAAa,QAAb,EAAuB,MAAM;AACrCA,UAAAA,IAAI,CAACoY,aAAL,CAAmB+rB,QAAnB,IAA+B,IAA/B;AACA,cAAI/mC,OAAO,CAAC4C,IAAI,CAACoY,aAAN,CAAX,EAAiCpY,IAAI,CAACoY,aAAL,GAAqB,IAArB;AACjC,iBAAO,IAAP;AACD,SAJS,CAAV;AAKD;AACF,KARD;AASD,GAVuB,CA9LuB;AA0M/CisB,EAAAA,QAAQ,EAAE,UAASrkC,IAAT,EAAe;AACvB,QAAIpF,CAAJ;;AACA,QAAI,OAAOoF,IAAP,IAAe,QAAnB,EAA6B;AAC3B,UAAI,CAAC2H,MAAM,CAAC,IAAD,EAAO3H,IAAP,CAAX,EAAyB,OAAO,IAAP;AACzBpF,MAAAA,CAAC,GAAGoF,IAAJ;AACAA,MAAAA,IAAI,GAAGwG,OAAO,CAAC,IAAD,EAAOxG,IAAP,CAAd;AACA,UAAI,CAACA,IAAL,EAAW,OAAO,IAAP;AACZ,KALD,MAKO;AACLpF,MAAAA,CAAC,GAAGyM,MAAM,CAACrH,IAAD,CAAV;AACA,UAAIpF,CAAC,IAAI,IAAT,EAAe,OAAO,IAAP;AAChB;;AACD,WAAO;AAACoF,MAAAA,IAAI,EAAEpF,CAAP;AAAUokC,MAAAA,MAAM,EAAEh/B,IAAlB;AAAwBpkB,MAAAA,IAAI,EAAEokB,IAAI,CAACpkB,IAAnC;AAAyCw8B,MAAAA,aAAa,EAAEpY,IAAI,CAACoY,aAA7D;AACClO,MAAAA,SAAS,EAAElK,IAAI,CAACkK,SADjB;AAC4BD,MAAAA,OAAO,EAAEjK,IAAI,CAACiK,OAD1C;AACmD4N,MAAAA,SAAS,EAAE7X,IAAI,CAAC6X,SADnE;AAECsB,MAAAA,OAAO,EAAEnZ,IAAI,CAACmZ;AAFf,KAAP;AAGD,GAxN8C;AA0N/CmrB,EAAAA,YAAY,EAAE/T,WAAW,CAAC,UAASyO,MAAT,EAAiBuF,KAAjB,EAAwBltC,GAAxB,EAA6B;AACrD,WAAO0nC,UAAU,CAAC,IAAD,EAAOC,MAAP,EAAeuF,KAAK,IAAI,QAAT,GAAoB,QAApB,GAA+B,OAA9C,EAAuDvkC,IAAI,IAAI;AAC9E,UAAI3F,IAAI,GAAGkqC,KAAK,IAAI,MAAT,GAAkB,WAAlB,GACAA,KAAK,IAAI,YAAT,GAAwB,SAAxB,GACAA,KAAK,IAAI,QAAT,GAAoB,aAApB,GAAoC,WAF/C;AAGA,UAAI,CAACvkC,IAAI,CAAC3F,IAAD,CAAT,EAAiB2F,IAAI,CAAC3F,IAAD,CAAJ,GAAahD,GAAb,CAAjB,KACK,IAAID,SAAS,CAACC,GAAD,CAAT,CAAejG,IAAf,CAAoB4O,IAAI,CAAC3F,IAAD,CAAxB,CAAJ,EAAqC,OAAO,KAAP,CAArC,KACA2F,IAAI,CAAC3F,IAAD,CAAJ,IAAc,MAAMhD,GAApB;AACL,aAAO,IAAP;AACD,KARgB,CAAjB;AASD,GAVwB,CA1NsB;AAqO/CmtC,EAAAA,eAAe,EAAEjU,WAAW,CAAC,UAASyO,MAAT,EAAiBuF,KAAjB,EAAwBltC,GAAxB,EAA6B;AACxD,WAAO0nC,UAAU,CAAC,IAAD,EAAOC,MAAP,EAAeuF,KAAK,IAAI,QAAT,GAAoB,QAApB,GAA+B,OAA9C,EAAuDvkC,IAAI,IAAI;AAC9E,UAAI3F,IAAI,GAAGkqC,KAAK,IAAI,MAAT,GAAkB,WAAlB,GACAA,KAAK,IAAI,YAAT,GAAwB,SAAxB,GACAA,KAAK,IAAI,QAAT,GAAoB,aAApB,GAAoC,WAF/C;AAGA,UAAI9lC,GAAG,GAAGuB,IAAI,CAAC3F,IAAD,CAAd;AACA,UAAI,CAACoE,GAAL,EAAU,OAAO,KAAP,CAAV,KACK,IAAIpH,GAAG,IAAI,IAAX,EAAiB2I,IAAI,CAAC3F,IAAD,CAAJ,GAAa,IAAb,CAAjB,KACA;AACH,YAAI6D,KAAK,GAAGO,GAAG,CAAC9J,KAAJ,CAAUyC,SAAS,CAACC,GAAD,CAAnB,CAAZ;AACA,YAAI,CAAC6G,KAAL,EAAY,OAAO,KAAP;AACZ,YAAI5a,GAAG,GAAG4a,KAAK,CAACthB,KAAN,GAAcshB,KAAK,CAAC,CAAD,CAAL,CAASxtB,MAAjC;AACAsvB,QAAAA,IAAI,CAAC3F,IAAD,CAAJ,GAAaoE,GAAG,CAACjiB,KAAJ,CAAU,CAAV,EAAa0hB,KAAK,CAACthB,KAAnB,KAA6B,CAACshB,KAAK,CAACthB,KAAP,IAAgB0G,GAAG,IAAImb,GAAG,CAAC/tB,MAA3B,GAAoC,EAApC,GAAyC,GAAtE,IAA6E+tB,GAAG,CAACjiB,KAAJ,CAAU8G,GAAV,CAA7E,IAA+F,IAA5G;AACD;AACD,aAAO,IAAP;AACD,KAdgB,CAAjB;AAeD,GAhB2B,CArOmB;AAuP/C88C,EAAAA,aAAa,EAAE7P,WAAW,CAAC,UAASyO,MAAT,EAAiBznC,IAAjB,EAAuB1J,OAAvB,EAAgC;AACzD,WAAOuyC,aAAa,CAAC,IAAD,EAAOpB,MAAP,EAAeznC,IAAf,EAAqB1J,OAArB,CAApB;AACD,GAFyB,CAvPqB;AA0P/C42C,EAAAA,gBAAgB,EAAE,UAAShwB,MAAT,EAAiB;AAAEA,IAAAA,MAAM,CAAClyB,KAAP;AAAgB,GA1PN;AA4P/Cq+C,EAAAA,QAAQ,EAAE,UAAS7wC,IAAT,EAAe6N,EAAf,EAAmB/P,OAAnB,EAA4B;AACpC,WAAO+yC,QAAQ,CAAC,IAAD,EAAOt4B,OAAO,CAAC,IAAD,EAAOvY,IAAP,CAAd,EAA4BuY,OAAO,CAAC,IAAD,EAAO1K,EAAP,CAAnC,EAA+C/P,OAA/C,EAAwDA,OAAO,IAAIA,OAAO,CAACnhB,IAAnB,IAA2B,OAAnF,CAAf;AACD,GA9P8C;AA+P/Cg4D,EAAAA,WAAW,EAAE,UAAS5oC,GAAT,EAAcjO,OAAd,EAAuB;AAClC,QAAI82C,QAAQ,GAAG;AAAC7D,MAAAA,YAAY,EAAEjzC,OAAO,KAAKA,OAAO,CAACsL,QAAR,IAAoB,IAApB,GAA2BtL,OAAO,CAAC4mB,MAAnC,GAA4C5mB,OAAjD,CAAtB;AACCigB,MAAAA,UAAU,EAAEjgB,OAAO,IAAIA,OAAO,CAACigB,UADhC;AAECgB,MAAAA,cAAc,EAAE,KAFjB;AAEwBypB,MAAAA,MAAM,EAAE1qC,OAAO,IAAIA,OAAO,CAAC0qC,MAFnD;AAGClf,MAAAA,iBAAiB,EAAExrB,OAAO,IAAIA,OAAO,CAACwrB;AAHvC,KAAf;AAIAvd,IAAAA,GAAG,GAAGwM,OAAO,CAAC,IAAD,EAAOxM,GAAP,CAAb;AACA,WAAO8kC,QAAQ,CAAC,IAAD,EAAO9kC,GAAP,EAAYA,GAAZ,EAAiB6oC,QAAjB,EAA2B,UAA3B,CAAf;AACD,GAtQ8C;AAuQ/CC,EAAAA,WAAW,EAAE,UAAS9oC,GAAT,EAAc;AACzBA,IAAAA,GAAG,GAAGwM,OAAO,CAAC,IAAD,EAAOxM,GAAP,CAAb;AACA,QAAIkT,OAAO,GAAG,EAAd;AAAA,QAAkBlC,KAAK,GAAGtG,OAAO,CAAC,IAAD,EAAO1K,GAAG,CAACkE,IAAX,CAAP,CAAwBqN,WAAlD;AACA,QAAIP,KAAJ,EAAW,KAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AAChD,UAAIsrB,IAAI,GAAGD,KAAK,CAACrrB,CAAD,CAAhB;AACA,UAAI,CAACsrB,IAAI,CAAChd,IAAL,IAAa,IAAb,IAAqBgd,IAAI,CAAChd,IAAL,IAAa+L,GAAG,CAACmB,EAAvC,MACC8P,IAAI,CAACnP,EAAL,IAAW,IAAX,IAAmBmP,IAAI,CAACnP,EAAL,IAAW9B,GAAG,CAACmB,EADnC,CAAJ,EAEE+R,OAAO,CAACpuB,IAAR,CAAamsB,IAAI,CAACH,MAAL,CAAY5U,MAAZ,IAAsB+U,IAAI,CAACH,MAAxC;AACH;AACD,WAAOoC,OAAP;AACD,GAjR8C;AAkR/CuyB,EAAAA,SAAS,EAAE,UAASxxC,IAAT,EAAe6N,EAAf,EAAmBzX,MAAnB,EAA2B;AACpC4J,IAAAA,IAAI,GAAGuY,OAAO,CAAC,IAAD,EAAOvY,IAAP,CAAd;AAA4B6N,IAAAA,EAAE,GAAG0K,OAAO,CAAC,IAAD,EAAO1K,EAAP,CAAZ;AAC5B,QAAIM,KAAK,GAAG,EAAZ;AAAA,QAAgBmJ,MAAM,GAAGtX,IAAI,CAACiQ,IAA9B;AACA,SAAKiH,IAAL,CAAUlX,IAAI,CAACiQ,IAAf,EAAqBpC,EAAE,CAACoC,IAAH,GAAU,CAA/B,EAAkCA,IAAI,IAAI;AACxC,UAAI8M,KAAK,GAAG9M,IAAI,CAACqN,WAAjB;AACA,UAAIP,KAAJ,EAAW,KAAK,IAAIrrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC;AAChD,YAAIsrB,IAAI,GAAGD,KAAK,CAACrrB,CAAD,CAAhB;AACA,YAAI,EAAEsrB,IAAI,CAACnP,EAAL,IAAW,IAAX,IAAmByJ,MAAM,IAAItX,IAAI,CAACiQ,IAAlC,IAA0CjQ,IAAI,CAACkN,EAAL,IAAW8P,IAAI,CAACnP,EAA1D,IACAmP,IAAI,CAAChd,IAAL,IAAa,IAAb,IAAqBsX,MAAM,IAAItX,IAAI,CAACiQ,IADpC,IAEA+M,IAAI,CAAChd,IAAL,IAAa,IAAb,IAAqBsX,MAAM,IAAIzJ,EAAE,CAACoC,IAAlC,IAA0C+M,IAAI,CAAChd,IAAL,IAAa6N,EAAE,CAACX,EAF5D,MAGC,CAAC9W,MAAD,IAAWA,MAAM,CAAC4mB,IAAI,CAACH,MAAN,CAHlB,CAAJ,EAIE1O,KAAK,CAACtd,IAAN,CAAWmsB,IAAI,CAACH,MAAL,CAAY5U,MAAZ,IAAsB+U,IAAI,CAACH,MAAtC;AACH;AACD,QAAEvF,MAAF;AACD,KAXD;AAYA,WAAOnJ,KAAP;AACD,GAlS8C;AAmS/C2mC,EAAAA,WAAW,EAAE,YAAW;AACtB,QAAI71B,OAAO,GAAG,EAAd;AACA,SAAK/H,IAAL,CAAUjH,IAAI,IAAI;AAChB,UAAIqQ,GAAG,GAAGrQ,IAAI,CAACqN,WAAf;AACA,UAAIgD,GAAJ,EAAS,KAAK,IAAI5uB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4uB,GAAG,CAAC3/B,MAAxB,EAAgC,EAAE+Q,CAAlC,EACP,IAAI4uB,GAAG,CAAC5uB,CAAD,CAAH,CAAOsO,IAAP,IAAe,IAAnB,EAAyBif,OAAO,CAACpuB,IAAR,CAAayvB,GAAG,CAAC5uB,CAAD,CAAH,CAAOmrB,MAApB;AAC5B,KAJD;AAKA,WAAOoC,OAAP;AACD,GA3S8C;AA6S/C81B,EAAAA,YAAY,EAAE,UAASzkC,GAAT,EAAc;AAC1B,QAAIpD,EAAJ;AAAA,QAAQoK,MAAM,GAAG,KAAKX,KAAtB;AAAA,QAA6Bq+B,OAAO,GAAG,KAAK5C,aAAL,GAAqBzxD,MAA5D;AACA,SAAKu2B,IAAL,CAAUjH,IAAI,IAAI;AAChB,UAAI8G,EAAE,GAAG9G,IAAI,CAACpkB,IAAL,CAAUlL,MAAV,GAAmBq0D,OAA5B;;AACA,UAAIj+B,EAAE,GAAGzG,GAAT,EAAc;AAAEpD,QAAAA,EAAE,GAAGoD,GAAL;AAAU,eAAO,IAAP;AAAa;;AACvCA,MAAAA,GAAG,IAAIyG,EAAP;AACA,QAAEO,MAAF;AACD,KALD;AAMA,WAAOiB,OAAO,CAAC,IAAD,EAAOP,GAAG,CAACV,MAAD,EAASpK,EAAT,CAAV,CAAd;AACD,GAtT8C;AAuT/C+nC,EAAAA,YAAY,EAAE,UAAUtlB,MAAV,EAAkB;AAC9BA,IAAAA,MAAM,GAAGpX,OAAO,CAAC,IAAD,EAAOoX,MAAP,CAAhB;AACA,QAAI9iC,KAAK,GAAG8iC,MAAM,CAACziB,EAAnB;AACA,QAAIyiB,MAAM,CAAC1f,IAAP,GAAc,KAAK0G,KAAnB,IAA4BgZ,MAAM,CAACziB,EAAP,GAAY,CAA5C,EAA+C,OAAO,CAAP;AAC/C,QAAI8nC,OAAO,GAAG,KAAK5C,aAAL,GAAqBzxD,MAAnC;AACA,SAAKu2B,IAAL,CAAU,KAAKP,KAAf,EAAsBgZ,MAAM,CAAC1f,IAA7B,EAAmCA,IAAI,IAAI;AAAE;AAC3CpjB,MAAAA,KAAK,IAAIojB,IAAI,CAACpkB,IAAL,CAAUlL,MAAV,GAAmBq0D,OAA5B;AACD,KAFD;AAGA,WAAOnoD,KAAP;AACD,GAhU8C;AAkU/CusB,EAAAA,IAAI,EAAE,UAAS87B,WAAT,EAAsB;AAC1B,QAAIx+B,GAAG,GAAG,IAAIs7B,GAAJ,CAAQ76B,QAAQ,CAAC,IAAD,EAAO,KAAKR,KAAZ,EAAmB,KAAKA,KAAL,GAAa,KAAKnzB,IAArC,CAAhB,EACQ,KAAK6jD,UADb,EACyB,KAAK1wB,KAD9B,EACqC,KAAKs7B,OAD1C,EACmD,KAAKvjD,SADxD,CAAV;AAEAgoB,IAAAA,GAAG,CAAC5yB,SAAJ,GAAgB,KAAKA,SAArB;AAAgC4yB,IAAAA,GAAG,CAAC1U,UAAJ,GAAiB,KAAKA,UAAtB;AAChC0U,IAAAA,GAAG,CAAC6d,GAAJ,GAAU,KAAKA,GAAf;AACA7d,IAAAA,GAAG,CAACqrB,MAAJ,GAAa,KAAb;;AACA,QAAImT,WAAJ,EAAiB;AACfx+B,MAAAA,GAAG,CAACuzB,OAAJ,CAAYlB,SAAZ,GAAwB,KAAKkB,OAAL,CAAalB,SAArC;AACAryB,MAAAA,GAAG,CAACu9B,UAAJ,CAAe,KAAKD,UAAL,EAAf;AACD;;AACD,WAAOt9B,GAAP;AACD,GA7U8C;AA+U/Cy+B,EAAAA,SAAS,EAAE,UAASr3C,OAAT,EAAkB;AAC3B,QAAI,CAACA,OAAL,EAAcA,OAAO,GAAG,EAAV;AACd,QAAIkC,IAAI,GAAG,KAAK2W,KAAhB;AAAA,QAAuB9I,EAAE,GAAG,KAAK8I,KAAL,GAAa,KAAKnzB,IAA9C;AACA,QAAIsa,OAAO,CAACkC,IAAR,IAAgB,IAAhB,IAAwBlC,OAAO,CAACkC,IAAR,GAAeA,IAA3C,EAAiDA,IAAI,GAAGlC,OAAO,CAACkC,IAAf;AACjD,QAAIlC,OAAO,CAAC+P,EAAR,IAAc,IAAd,IAAsB/P,OAAO,CAAC+P,EAAR,GAAaA,EAAvC,EAA2CA,EAAE,GAAG/P,OAAO,CAAC+P,EAAb;AAC3C,QAAIuL,IAAI,GAAG,IAAI44B,GAAJ,CAAQ76B,QAAQ,CAAC,IAAD,EAAOnX,IAAP,EAAa6N,EAAb,CAAhB,EAAkC/P,OAAO,CAAC4V,IAAR,IAAgB,KAAK2zB,UAAvD,EAAmErnC,IAAnE,EAAyE,KAAKiyC,OAA9E,EAAuF,KAAKvjD,SAA5F,CAAX;AACA,QAAIoP,OAAO,CAACuqC,UAAZ,EAAwBjvB,IAAI,CAAC6wB,OAAL,GAAe,KAAKA,OAApB;AACvB,KAAC,KAAK3B,MAAL,KAAgB,KAAKA,MAAL,GAAc,EAA9B,CAAD,EAAoCz3C,IAApC,CAAyC;AAAC6lB,MAAAA,GAAG,EAAE0C,IAAN;AAAYivB,MAAAA,UAAU,EAAEvqC,OAAO,CAACuqC;AAAhC,KAAzC;AACDjvB,IAAAA,IAAI,CAACkvB,MAAL,GAAc,CAAC;AAAC5xB,MAAAA,GAAG,EAAE,IAAN;AAAY46B,MAAAA,QAAQ,EAAE,IAAtB;AAA4BjJ,MAAAA,UAAU,EAAEvqC,OAAO,CAACuqC;AAAhD,KAAD,CAAd;AACAoJ,IAAAA,iBAAiB,CAACr4B,IAAD,EAAOm4B,iBAAiB,CAAC,IAAD,CAAxB,CAAjB;AACA,WAAOn4B,IAAP;AACD,GA1V8C;AA2V/Cg8B,EAAAA,SAAS,EAAE,UAAS/kB,KAAT,EAAgB;AACzB,QAAIA,KAAK,YAAYglB,UAArB,EAAiChlB,KAAK,GAAGA,KAAK,CAAC3Z,GAAd;AACjC,QAAI,KAAK4xB,MAAT,EAAiB,KAAK,IAAI52C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK42C,MAAL,CAAY3nD,MAAhC,EAAwC,EAAE+Q,CAA1C,EAA6C;AAC5D,UAAI4jD,IAAI,GAAG,KAAKhN,MAAL,CAAY52C,CAAZ,CAAX;AACA,UAAI4jD,IAAI,CAAC5+B,GAAL,IAAY2Z,KAAhB,EAAuB;AACvB,WAAKiY,MAAL,CAAYx2C,MAAZ,CAAmBJ,CAAnB,EAAsB,CAAtB;AACA2+B,MAAAA,KAAK,CAAC+kB,SAAN,CAAgB,IAAhB;AACAvD,MAAAA,mBAAmB,CAACN,iBAAiB,CAAC,IAAD,CAAlB,CAAnB;AACA;AACD,KATwB;;AAWzB,QAAIlhB,KAAK,CAAC4Z,OAAN,IAAiB,KAAKA,OAA1B,EAAmC;AACjC,UAAIsL,QAAQ,GAAG,CAACllB,KAAK,CAACpiC,EAAP,CAAf;AACAg6C,MAAAA,UAAU,CAAC5X,KAAD,EAAQ3Z,GAAG,IAAI6+B,QAAQ,CAAC1kD,IAAT,CAAc6lB,GAAG,CAACzoB,EAAlB,CAAf,EAAsC,IAAtC,CAAV;AACAoiC,MAAAA,KAAK,CAAC4Z,OAAN,GAAgB,IAAIrB,OAAJ,CAAY,IAAZ,CAAhB;AACAvY,MAAAA,KAAK,CAAC4Z,OAAN,CAAcpB,IAAd,GAAqBmC,gBAAgB,CAAC,KAAKf,OAAL,CAAapB,IAAd,EAAoB0M,QAApB,CAArC;AACAllB,MAAAA,KAAK,CAAC4Z,OAAN,CAAcnB,MAAd,GAAuBkC,gBAAgB,CAAC,KAAKf,OAAL,CAAanB,MAAd,EAAsByM,QAAtB,CAAvC;AACD;AACF,GA7W8C;AA8W/CC,EAAAA,cAAc,EAAE,UAASvrC,CAAT,EAAY;AAACg+B,IAAAA,UAAU,CAAC,IAAD,EAAOh+B,CAAP,CAAV;AAAoB,GA9WF;AAgX/C+J,EAAAA,OAAO,EAAE,YAAW;AAAC,WAAO,KAAKN,IAAZ;AAAiB,GAhXS;AAiX/C+hC,EAAAA,SAAS,EAAE,YAAW;AAAC,WAAO,KAAK/kC,EAAZ;AAAe,GAjXS;AAmX/Ci+B,EAAAA,UAAU,EAAE,UAASlhC,GAAT,EAAc;AACxB,QAAI,KAAKwkC,OAAT,EAAkB,OAAOxkC,GAAG,CAACjuB,KAAJ,CAAU,KAAKyyD,OAAf,CAAP;AAClB,WAAO1/B,cAAc,CAAC9E,GAAD,CAArB;AACD,GAtX8C;AAuX/C2kC,EAAAA,aAAa,EAAE,YAAW;AAAE,WAAO,KAAKH,OAAL,IAAgB,IAAvB;AAA6B,GAvXV;AAyX/CyD,EAAAA,YAAY,EAAElV,WAAW,CAAC,UAAU7+B,GAAV,EAAe;AACvC,QAAIA,GAAG,IAAI,KAAX,EAAkBA,GAAG,GAAG,KAAN;AAClB,QAAIA,GAAG,IAAI,KAAKjT,SAAhB,EAA2B;AAC3B,SAAKA,SAAL,GAAiBiT,GAAjB;AACA,SAAKuV,IAAL,CAAUjH,IAAI,IAAIA,IAAI,CAAC/B,KAAL,GAAa,IAA/B;AACA,QAAI,KAAKwC,EAAT,EAAai4B,gBAAgB,CAAC,KAAKj4B,EAAN,CAAhB;AACd,GANwB;AAzXsB,CAAxB,CAAzB;;AAmYAshC,GAAG,CAACn7C,SAAJ,CAAc8+C,QAAd,GAAyB3D,GAAG,CAACn7C,SAAJ,CAAcqgB,IAAvC;;AClaA;;AACA,IAAI0+B,QAAQ,GAAG,CAAf;AAEA,AAAO,SAASC,MAAT,CAAgB38C,CAAhB,EAAmB;AACxB,MAAIwX,EAAE,GAAG,IAAT;AACAolC,EAAAA,eAAe,CAACplC,EAAD,CAAf;AACA,MAAID,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAd,IAAyBgxB,aAAa,CAACxZ,EAAE,CAACplB,OAAJ,EAAa4N,CAAb,CAA1C,EACE;AACFoY,EAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AACA,MAAI8M,EAAJ,EAAQ4vC,QAAQ,GAAG,CAAC,IAAIrsD,IAAJ,EAAZ;AACR,MAAIwiB,GAAG,GAAG2mB,YAAY,CAAChiB,EAAD,EAAKxX,CAAL,EAAQ,IAAR,CAAtB;AAAA,MAAqC68C,KAAK,GAAG78C,CAAC,CAAC88C,YAAF,CAAeD,KAA5D;AACA,MAAI,CAAChqC,GAAD,IAAQ2E,EAAE,CAACulC,UAAH,EAAZ,EAA6B,OARL;AAUxB;;AACA,MAAIF,KAAK,IAAIA,KAAK,CAACp1D,MAAf,IAAyB2Q,MAAM,CAAC4kD,UAAhC,IAA8C5kD,MAAM,CAAC6kD,IAAzD,EAA+D;AAC7D,QAAItrC,CAAC,GAAGkrC,KAAK,CAACp1D,MAAd;AAAA,QAAsBkL,IAAI,GAAGvD,KAAK,CAACuiB,CAAD,CAAlC;AAAA,QAAuCurC,IAAI,GAAG,CAA9C;;AACA,UAAMC,mCAAmC,GAAG,MAAM;AAChD,UAAI,EAAED,IAAF,IAAUvrC,CAAd,EAAiB;AACfy1B,QAAAA,SAAS,CAAC5vB,EAAD,EAAK,MAAM;AAClB3E,UAAAA,GAAG,GAAGwM,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAAS3K,GAAT,CAAb;AACA,cAAIsS,MAAM,GAAG;AAACre,YAAAA,IAAI,EAAE+L,GAAP;AAAY8B,YAAAA,EAAE,EAAE9B,GAAhB;AACClgB,YAAAA,IAAI,EAAE6kB,EAAE,CAACgG,GAAH,CAAOi4B,UAAP,CACF9iD,IAAI,CAACuK,MAAL,CAAYkgD,CAAC,IAAIA,CAAC,IAAI,IAAtB,EAA4B38C,IAA5B,CAAiC+W,EAAE,CAACgG,GAAH,CAAO07B,aAAP,EAAjC,CADE,CADP;AAGCvxD,YAAAA,MAAM,EAAE;AAHT,WAAb;AAIA0sD,UAAAA,UAAU,CAAC78B,EAAE,CAACgG,GAAJ,EAAS2H,MAAT,CAAV;AACAytB,UAAAA,0BAA0B,CAACp7B,EAAE,CAACgG,GAAJ,EAASiwB,eAAe,CAACpuB,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAAS3K,GAAT,CAAR,EAAuBwM,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAASkwB,SAAS,CAACvoB,MAAD,CAAlB,CAA9B,CAAxB,CAA1B;AACD,SARQ,CAAT;AASD;AACF,KAZD;;AAaA,UAAMk4B,gBAAgB,GAAG,CAACC,IAAD,EAAO9kD,CAAP,KAAa;AACpC,UAAIgf,EAAE,CAAC5S,OAAH,CAAW24C,kBAAX,IACA9lD,OAAO,CAAC+f,EAAE,CAAC5S,OAAH,CAAW24C,kBAAZ,EAAgCD,IAAI,CAAC75D,IAArC,CAAP,IAAqD,CAAC,CAD1D,EAC6D;AAC3D05D,QAAAA,mCAAmC;AACnC;AACD;;AACD,UAAIK,MAAM,GAAG,IAAIR,UAAJ,EAAb;;AACAQ,MAAAA,MAAM,CAACC,OAAP,GAAiB,MAAMN,mCAAmC,EAA1D;;AACAK,MAAAA,MAAM,CAACE,MAAP,GAAgB,MAAM;AACpB,YAAIv0D,OAAO,GAAGq0D,MAAM,CAAC9pD,MAArB;;AACA,YAAI,0BAA0ByU,IAA1B,CAA+Bhf,OAA/B,CAAJ,EAA6C;AAC3Cg0D,UAAAA,mCAAmC;AACnC;AACD;;AACDxqD,QAAAA,IAAI,CAAC6F,CAAD,CAAJ,GAAUrP,OAAV;AACAg0D,QAAAA,mCAAmC;AACpC,OARD;;AASAK,MAAAA,MAAM,CAACG,UAAP,CAAkBL,IAAlB;AACD,KAlBD;;AAmBA,SAAK,IAAI9kD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqkD,KAAK,CAACp1D,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC6kD,gBAAgB,CAACR,KAAK,CAACrkD,CAAD,CAAN,EAAWA,CAAX,CAAhB;AACxC,GAnCD,MAmCO;AAAE;AACP;AACA,QAAIgf,EAAE,CAAC+D,KAAH,CAASojB,YAAT,IAAyBnnB,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWrrB,QAAX,CAAoB6C,GAApB,IAA2B,CAAC,CAAzD,EAA4D;AAC1D2E,MAAAA,EAAE,CAAC+D,KAAH,CAASojB,YAAT,CAAsB3+B,CAAtB,EAD0D;;AAG1D9I,MAAAA,UAAU,CAAC,MAAMsgB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBhgC,KAAjB,EAAP,EAAiC,EAAjC,CAAV;AACA;AACD;;AACD,QAAI;AACF,UAAIkH,IAAI,GAAGqN,CAAC,CAAC88C,YAAF,CAAec,OAAf,CAAuB,MAAvB,CAAX;;AACA,UAAIjrD,IAAJ,EAAU;AACR,YAAIkrD,QAAJ;AACA,YAAIrmC,EAAE,CAAC+D,KAAH,CAASojB,YAAT,IAAyB,CAACnnB,EAAE,CAAC+D,KAAH,CAASojB,YAAT,CAAsBze,IAApD,EACE29B,QAAQ,GAAGrmC,EAAE,CAACiiC,cAAH,EAAX;AACF5G,QAAAA,kBAAkB,CAACr7B,EAAE,CAACgG,GAAJ,EAASiwB,eAAe,CAAC56B,GAAD,EAAMA,GAAN,CAAxB,CAAlB;AACA,YAAIgrC,QAAJ,EAAc,KAAK,IAAIrlD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqlD,QAAQ,CAACp2D,MAA7B,EAAqC,EAAE+Q,CAAvC,EACZg9C,YAAY,CAACh+B,EAAE,CAACgG,GAAJ,EAAS,EAAT,EAAaqgC,QAAQ,CAACrlD,CAAD,CAAR,CAAYugC,MAAzB,EAAiC8kB,QAAQ,CAACrlD,CAAD,CAAR,CAAYvP,IAA7C,EAAmD,MAAnD,CAAZ;AACFuuB,QAAAA,EAAE,CAACuiC,gBAAH,CAAoBpnD,IAApB,EAA0B,QAA1B,EAAoC,OAApC;AACA6kB,QAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBhgC,KAAjB;AACD;AACF,KAZD,CAaA,OAAMuU,CAAN,EAAQ;AACT;AACF;AAED,AAAO,SAAS89C,WAAT,CAAqBtmC,EAArB,EAAyBxX,CAAzB,EAA4B;AACjC,MAAI8M,EAAE,KAAK,CAAC0K,EAAE,CAAC+D,KAAH,CAASojB,YAAV,IAA0B,CAAC,IAAItuC,IAAJ,EAAD,GAAYqsD,QAAZ,GAAuB,GAAtD,CAAN,EAAkE;AAAEpkC,IAAAA,MAAM,CAACtY,CAAD,CAAN;AAAW;AAAQ;;AACvF,MAAIuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAd,IAAyBgxB,aAAa,CAACxZ,EAAE,CAACplB,OAAJ,EAAa4N,CAAb,CAA1C,EAA2D;AAE3DA,EAAAA,CAAC,CAAC88C,YAAF,CAAeiB,OAAf,CAAuB,MAAvB,EAA+BvmC,EAAE,CAACkC,YAAH,EAA/B;AACA1Z,EAAAA,CAAC,CAAC88C,YAAF,CAAekB,aAAf,GAA+B,UAA/B,CALiC;AAQjC;;AACA,MAAIh+C,CAAC,CAAC88C,YAAF,CAAemB,YAAf,IAA+B,CAAC5wC,MAApC,EAA4C;AAC1C,QAAIjoB,GAAG,GAAG4pB,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,mCAApB,CAAb;AACA5pB,IAAAA,GAAG,CAAC5B,GAAJ,GAAU,4EAAV;;AACA,QAAI4pB,MAAJ,EAAY;AACVhoB,MAAAA,GAAG,CAACR,KAAJ,GAAYQ,GAAG,CAACN,MAAJ,GAAa,CAAzB;AACA0yB,MAAAA,EAAE,CAACplB,OAAH,CAAW2+B,OAAX,CAAmB7nC,WAAnB,CAA+B9D,GAA/B,EAFU;;AAIVA,MAAAA,GAAG,CAAC84D,IAAJ,GAAW94D,GAAG,CAACisC,SAAf;AACD;;AACDrxB,IAAAA,CAAC,CAAC88C,YAAF,CAAemB,YAAf,CAA4B74D,GAA5B,EAAiC,CAAjC,EAAoC,CAApC;AACA,QAAIgoB,MAAJ,EAAYhoB,GAAG,CAACqM,UAAJ,CAAeyC,WAAf,CAA2B9O,GAA3B;AACb;AACF;AAED,AAAO,SAAS+4D,UAAT,CAAoB3mC,EAApB,EAAwBxX,CAAxB,EAA2B;AAChC,MAAI6S,GAAG,GAAG2mB,YAAY,CAAChiB,EAAD,EAAKxX,CAAL,CAAtB;AACA,MAAI,CAAC6S,GAAL,EAAU;AACV,MAAIurC,IAAI,GAAGp1D,QAAQ,CAAC8hC,sBAAT,EAAX;AACA4Q,EAAAA,mBAAmB,CAAClkB,EAAD,EAAK3E,GAAL,EAAUurC,IAAV,CAAnB;;AACA,MAAI,CAAC5mC,EAAE,CAACplB,OAAH,CAAWisD,UAAhB,EAA4B;AAC1B7mC,IAAAA,EAAE,CAACplB,OAAH,CAAWisD,UAAX,GAAwBrvC,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,2CAAd,CAA3B;AACAwI,IAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqB5C,YAArB,CAAkChX,EAAE,CAACplB,OAAH,CAAWisD,UAA7C,EAAyD7mC,EAAE,CAACplB,OAAH,CAAW6rC,SAApE;AACD;;AACDnvB,EAAAA,oBAAoB,CAAC0I,EAAE,CAACplB,OAAH,CAAWisD,UAAZ,EAAwBD,IAAxB,CAApB;AACD;AAED,AAAO,SAASxB,eAAT,CAAyBplC,EAAzB,EAA6B;AAClC,MAAIA,EAAE,CAACplB,OAAH,CAAWisD,UAAf,EAA2B;AACzB7mC,IAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBl9B,WAArB,CAAiCsjB,EAAE,CAACplB,OAAH,CAAWisD,UAA5C;AACA7mC,IAAAA,EAAE,CAACplB,OAAH,CAAWisD,UAAX,GAAwB,IAAxB;AACD;AACF;;AC7HD;AACA;;AAEA,SAASC,iBAAT,CAA2BvtC,CAA3B,EAA8B;AAC5B,MAAI,CAAC/nB,QAAQ,CAACu1D,sBAAd,EAAsC;AACtC,MAAIC,OAAO,GAAGx1D,QAAQ,CAACu1D,sBAAT,CAAgC,YAAhC,CAAd;AAAA,MAA6DE,OAAO,GAAG,EAAvE;;AACA,OAAK,IAAIjmD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgmD,OAAO,CAAC/2D,MAA5B,EAAoC+Q,CAAC,EAArC,EAAyC;AACvC,QAAIgf,EAAE,GAAGgnC,OAAO,CAAChmD,CAAD,CAAP,CAAW2jD,UAApB;AACA,QAAI3kC,EAAJ,EAAQinC,OAAO,CAAC9mD,IAAR,CAAa6f,EAAb;AACT;;AACD,MAAIinC,OAAO,CAACh3D,MAAZ,EAAoBg3D,OAAO,CAAC,CAAD,CAAP,CAAWrX,SAAX,CAAqB,MAAM;AAC7C,SAAK,IAAI5uC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGimD,OAAO,CAACh3D,MAA5B,EAAoC+Q,CAAC,EAArC,EAAyCuY,CAAC,CAAC0tC,OAAO,CAACjmD,CAAD,CAAR,CAAD;AAC1C,GAFmB;AAGrB;;AAED,IAAIkmD,iBAAiB,GAAG,KAAxB;AACA,AAAO,SAASC,oBAAT,GAAgC;AACrC,MAAID,iBAAJ,EAAuB;AACvBE,EAAAA,sBAAsB;AACtBF,EAAAA,iBAAiB,GAAG,IAApB;AACD;;AACD,SAASE,sBAAT,GAAkC;AAChC;AACA,MAAIC,WAAJ;AACA5nC,EAAAA,EAAE,CAAC7e,MAAD,EAAS,QAAT,EAAmB,MAAM;AACzB,QAAIymD,WAAW,IAAI,IAAnB,EAAyBA,WAAW,GAAG3nD,UAAU,CAAC,MAAM;AACtD2nD,MAAAA,WAAW,GAAG,IAAd;AACAP,MAAAA,iBAAiB,CAACQ,QAAD,CAAjB;AACD,KAHgD,EAG9C,GAH8C,CAAxB;AAI1B,GALC,CAAF,CAHgC;;AAUhC7nC,EAAAA,EAAE,CAAC7e,MAAD,EAAS,MAAT,EAAiB,MAAMkmD,iBAAiB,CAAChgB,MAAD,CAAxC,CAAF;AACD;;;AAED,SAASwgB,QAAT,CAAkBtnC,EAAlB,EAAsB;AACpB,MAAImR,CAAC,GAAGnR,EAAE,CAACplB,OAAX,CADoB;;AAGpBu2B,EAAAA,CAAC,CAAC8M,eAAF,GAAoB9M,CAAC,CAAC+M,gBAAF,GAAqB/M,CAAC,CAAC6I,cAAF,GAAmB,IAA5D;AACA7I,EAAAA,CAAC,CAAC4f,iBAAF,GAAsB,KAAtB;AACA/wB,EAAAA,EAAE,CAACunC,OAAH;AACD;;AC5CM,IAAIC,QAAQ,GAAG;AACpB,KAAG,OADiB;AACR,KAAG,WADK;AACQ,KAAG,KADX;AACkB,MAAI,OADtB;AAC+B,MAAI,OADnC;AAC4C,MAAI,MADhD;AACwD,MAAI,KAD5D;AAEpB,MAAI,OAFgB;AAEP,MAAI,UAFG;AAES,MAAI,KAFb;AAEoB,MAAI,OAFxB;AAEiC,MAAI,QAFrC;AAE+C,MAAI,UAFnD;AAE+D,MAAI,KAFnE;AAGpB,MAAI,MAHgB;AAGR,MAAI,MAHI;AAGI,MAAI,IAHR;AAGc,MAAI,OAHlB;AAG2B,MAAI,MAH/B;AAGuC,MAAI,WAH3C;AAGwD,MAAI,QAH5D;AAIpB,MAAI,QAJgB;AAIN,MAAI,GAJE;AAIG,MAAI,GAJP;AAIY,MAAI,KAJhB;AAIuB,MAAI,KAJ3B;AAIkC,MAAI,KAJtC;AAKpB,OAAK,GALe;AAKV,OAAK,GALK;AAKA,OAAK,GALL;AAKU,OAAK,GALf;AAKoB,OAAK,GALzB;AAK8B,OAAK,YALnC;AAMpB,OAAK,GANe;AAMV,OAAK,GANK;AAMA,OAAK,GANL;AAMU,OAAK,GANf;AAMoB,OAAK,GANzB;AAM8B,OAAK,GANnC;AAMwC,OAAK,GAN7C;AAMkD,OAAK,GANvD;AAM4D,OAAK,GANjE;AAMsE,OAAK,IAN3E;AAOpB,OAAK,GAPe;AAOV,OAAK,GAPK;AAOA,OAAK,KAPL;AAOY,SAAO,IAPnB;AAOyB,SAAO,MAPhC;AAOwC,SAAO,MAP/C;AAOuD,SAAO,OAP9D;AAOuE,SAAO,QAP9E;AAQpB,SAAO,MARa;AAQL,SAAO,KARF;AAQS,SAAO,QARhB;AAQ0B,SAAO,UARjC;AAQ6C,SAAO;AARpD,CAAf;;AAYP,KAAK,IAAIxmD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6BwmD,QAAQ,CAACxmD,CAAC,GAAG,EAAL,CAAR,GAAmBwmD,QAAQ,CAACxmD,CAAC,GAAG,EAAL,CAAR,GAAmB9U,MAAM,CAAC8U,CAAD,CAA5C;;;AAE7B,KAAK,IAAIA,CAAC,GAAG,EAAb,EAAiBA,CAAC,IAAI,EAAtB,EAA0BA,CAAC,EAA3B,EAA+BwmD,QAAQ,CAACxmD,CAAD,CAAR,GAAc9U,MAAM,CAACu7D,YAAP,CAAoBzmD,CAApB,CAAd;;;AAE/B,KAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,EAArB,EAAyBA,CAAC,EAA1B,EAA8BwmD,QAAQ,CAACxmD,CAAC,GAAG,GAAL,CAAR,GAAoBwmD,QAAQ,CAACxmD,CAAC,GAAG,KAAL,CAAR,GAAsB,MAAMA,CAAhD;;ACXvB,IAAI0mD,MAAM,GAAG,EAAb;AAEPA,MAAM,CAACC,KAAP,GAAe;AACb,UAAQ,YADK;AACS,WAAS,aADlB;AACiC,QAAM,UADvC;AACmD,UAAQ,YAD3D;AAEb,SAAO,WAFM;AAEO,UAAQ,kBAFf;AAEmC,YAAU,UAF7C;AAEyD,cAAY,YAFrE;AAGb,YAAU,cAHG;AAGa,eAAa,eAH1B;AAG2C,qBAAmB,eAH9D;AAIb,SAAO,YAJM;AAIQ,eAAa,YAJrB;AAKb,WAAS,kBALI;AAKgB,YAAU,iBAL1B;AAMb,SAAO;AANM,CAAf;AASA;AACA;;AACAD,MAAM,CAACE,SAAP,GAAmB;AACjB,YAAU,WADO;AACM,YAAU,YADhB;AAC8B,YAAU,MADxC;AACgD,kBAAgB,MADhE;AACwE,YAAU,MADlF;AAEjB,eAAa,YAFI;AAEU,cAAY,UAFtB;AAEkC,aAAW,UAF7C;AAEyD,eAAa,YAFtE;AAGjB,eAAa,aAHI;AAGW,gBAAc,cAHzB;AAGyC,cAAY,aAHrD;AAGoE,eAAa,WAHjF;AAIjB,oBAAkB,gBAJD;AAImB,iBAAe,eAJlC;AAImD,YAAU,MAJ7D;AAIqE,YAAU,MAJ/E;AAKjB,YAAU,UALO;AAKK,kBAAgB,UALrB;AAKiC,kBAAgB,SALjD;AAK4D,kBAAgB,YAL5E;AAMjB,YAAU,YANO;AAMO,YAAU,YANjB;AAOjB,YAAU,eAPO;AAOU,kBAAgB,eAP1B;AAO2C,WAAS,eAPpD;AAQjB,iBAAe;AARE,CAAnB;;AAWAF,MAAM,CAACG,MAAP,GAAgB;AACd,YAAU,aADI;AACW,YAAU,YADrB;AACmC,YAAU,UAD7C;AACyD,YAAU,YADnE;AAEd,YAAU,aAFI;AAEW,YAAU,WAFrB;AAEkC,YAAU,YAF5C;AAE0D,kBAAgB,UAF1E;AAGd,YAAU,cAHI;AAGY,YAAU,eAHtB;AAGuC,mBAAiB,eAHxD;AAGyE,YAAU,UAHnF;AAId,YAAU,gBAJI;AAIc,YAAU;AAJxB,CAAhB;AAMAH,MAAM,CAACI,UAAP,GAAoB;AAClB,WAAS,WADS;AACI,WAAS,YADb;AAC2B,WAAS,MADpC;AAC4C,iBAAe,MAD3D;AACmE,WAAS,MAD5E;AAElB,cAAY,YAFM;AAEQ,YAAU,YAFlB;AAEgC,aAAW,UAF3C;AAEuD,cAAY,UAFnE;AAE+E,cAAY,aAF3F;AAGlB,eAAa,cAHK;AAGW,cAAY,YAHvB;AAGqC,eAAa,aAHlD;AAGiE,mBAAiB,gBAHlF;AAIlB,wBAAsB,eAJJ;AAIqB,gBAAc,eAJnC;AAIoD,WAAS,MAJ7D;AAIqE,WAAS,MAJ9E;AAKlB,WAAS,UALS;AAKG,iBAAe,UALlB;AAK8B,eAAa,SAL3C;AAKsD,qBAAmB,YALzE;AAMlB,WAAS,YANS;AAMK,WAAS,YANd;AAM4B,mBAAiB,oBAN7C;AAMmE,gBAAc,qBANjF;AAOlB,WAAS,eAPS;AAOQ,iBAAe,eAPvB;AAOwC,aAAW,YAPnD;AAOiE,eAAa,UAP9E;AAQlB,iBAAe,CAAC,OAAD,EAAU,QAAV;AARG,CAApB;AAUAJ,MAAM,CAAC,SAAD,CAAN,GAAoBrxC,GAAG,GAAGqxC,MAAM,CAACI,UAAV,GAAuBJ,MAAM,CAACE,SAArD;;AAIA,SAASG,gBAAT,CAA0B99C,IAA1B,EAAgC;AAC9B,MAAIwkB,KAAK,GAAGxkB,IAAI,CAACnb,KAAL,CAAW,QAAX,CAAZ;AACAmb,EAAAA,IAAI,GAAGwkB,KAAK,CAACA,KAAK,CAACx+B,MAAN,GAAe,CAAhB,CAAZ;AACA,MAAI7D,GAAJ,EAAS+X,IAAT,EAAeD,KAAf,EAAsBG,GAAtB;;AACA,OAAK,IAAIrD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGytB,KAAK,CAACx+B,MAAN,GAAe,CAAnC,EAAsC+Q,CAAC,EAAvC,EAA2C;AACzC,QAAIgnD,GAAG,GAAGv5B,KAAK,CAACztB,CAAD,CAAf;AACA,QAAI,kBAAkB2P,IAAlB,CAAuBq3C,GAAvB,CAAJ,EAAiC3jD,GAAG,GAAG,IAAN,CAAjC,KACK,IAAI,YAAYsM,IAAZ,CAAiBq3C,GAAjB,CAAJ,EAA2B57D,GAAG,GAAG,IAAN,CAA3B,KACA,IAAI,sBAAsBukB,IAAtB,CAA2Bq3C,GAA3B,CAAJ,EAAqC7jD,IAAI,GAAG,IAAP,CAArC,KACA,IAAI,cAAcwM,IAAd,CAAmBq3C,GAAnB,CAAJ,EAA6B9jD,KAAK,GAAG,IAAR,CAA7B,KACA,MAAM,IAAI9J,KAAJ,CAAU,iCAAiC4tD,GAA3C,CAAN;AACN;;AACD,MAAI57D,GAAJ,EAAS6d,IAAI,GAAG,SAASA,IAAhB;AACT,MAAI9F,IAAJ,EAAU8F,IAAI,GAAG,UAAUA,IAAjB;AACV,MAAI5F,GAAJ,EAAS4F,IAAI,GAAG,SAASA,IAAhB;AACT,MAAI/F,KAAJ,EAAW+F,IAAI,GAAG,WAAWA,IAAlB;AACX,SAAOA,IAAP;AACD;AAGD;AACA;AACA;AACA;;;AACA,AAAO,SAASg+C,eAAT,CAAyBC,MAAzB,EAAiC;AACtC,MAAIx/B,IAAI,GAAG,EAAX;;AACA,OAAK,IAAIy/B,OAAT,IAAoBD,MAApB,EAA4B,IAAIA,MAAM,CAAC9hD,cAAP,CAAsB+hD,OAAtB,CAAJ,EAAoC;AAC9D,QAAIh8D,KAAK,GAAG+7D,MAAM,CAACC,OAAD,CAAlB;AACA,QAAI,mCAAmCx3C,IAAnC,CAAwCw3C,OAAxC,CAAJ,EAAsD;;AACtD,QAAIh8D,KAAK,IAAI,KAAb,EAAoB;AAAE,aAAO+7D,MAAM,CAACC,OAAD,CAAb;AAAwB;AAAU;;AAExD,QAAIjnD,IAAI,GAAGuG,GAAG,CAAC0gD,OAAO,CAACr5D,KAAR,CAAc,GAAd,CAAD,EAAqBi5D,gBAArB,CAAd;;AACA,SAAK,IAAI/mD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,IAAI,CAACjR,MAAzB,EAAiC+Q,CAAC,EAAlC,EAAsC;AACpC,UAAIijB,GAAJ,EAASha,IAAT;;AACA,UAAIjJ,CAAC,IAAIE,IAAI,CAACjR,MAAL,GAAc,CAAvB,EAA0B;AACxBga,QAAAA,IAAI,GAAG/I,IAAI,CAAC+H,IAAL,CAAU,GAAV,CAAP;AACAgb,QAAAA,GAAG,GAAG93B,KAAN;AACD,OAHD,MAGO;AACL8d,QAAAA,IAAI,GAAG/I,IAAI,CAACnF,KAAL,CAAW,CAAX,EAAciF,CAAC,GAAG,CAAlB,EAAqBiI,IAArB,CAA0B,GAA1B,CAAP;AACAgb,QAAAA,GAAG,GAAG,KAAN;AACD;;AACD,UAAIpF,IAAI,GAAG6J,IAAI,CAACze,IAAD,CAAf;AACA,UAAI,CAAC4U,IAAL,EAAW6J,IAAI,CAACze,IAAD,CAAJ,GAAaga,GAAb,CAAX,KACK,IAAIpF,IAAI,IAAIoF,GAAZ,EAAiB,MAAM,IAAI7pB,KAAJ,CAAU,+BAA+B6P,IAAzC,CAAN;AACvB;;AACD,WAAOi+C,MAAM,CAACC,OAAD,CAAb;AACD;;AACD,OAAK,IAAIvuC,IAAT,IAAiB8O,IAAjB,EAAuBw/B,MAAM,CAACtuC,IAAD,CAAN,GAAe8O,IAAI,CAAC9O,IAAD,CAAnB;;AACvB,SAAOsuC,MAAP;AACD;AAED,AAAO,SAASE,SAAT,CAAmBtnD,GAAnB,EAAwB2G,GAAxB,EAA6B82C,MAA7B,EAAqC31B,OAArC,EAA8C;AACnDnhB,EAAAA,GAAG,GAAG4gD,SAAS,CAAC5gD,GAAD,CAAf;AACA,MAAIgW,KAAK,GAAGhW,GAAG,CAACzL,IAAJ,GAAWyL,GAAG,CAACzL,IAAJ,CAAS8E,GAAT,EAAc8nB,OAAd,CAAX,GAAoCnhB,GAAG,CAAC3G,GAAD,CAAnD;AACA,MAAI2c,KAAK,KAAK,KAAd,EAAqB,OAAO,SAAP;AACrB,MAAIA,KAAK,KAAK,KAAd,EAAqB,OAAO,OAAP;AACrB,MAAIA,KAAK,IAAI,IAAT,IAAiB8gC,MAAM,CAAC9gC,KAAD,CAA3B,EAAoC,OAAO,SAAP;;AAEpC,MAAIhW,GAAG,CAAC6gD,WAAR,EAAqB;AACnB,QAAIxwD,MAAM,CAACqO,SAAP,CAAiBnG,QAAjB,CAA0BhE,IAA1B,CAA+ByL,GAAG,CAAC6gD,WAAnC,KAAmD,gBAAvD,EACE,OAAOF,SAAS,CAACtnD,GAAD,EAAM2G,GAAG,CAAC6gD,WAAV,EAAuB/J,MAAvB,EAA+B31B,OAA/B,CAAhB;;AACF,SAAK,IAAI5nB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyG,GAAG,CAAC6gD,WAAJ,CAAgBr4D,MAApC,EAA4C+Q,CAAC,EAA7C,EAAiD;AAC/C,UAAI9E,MAAM,GAAGksD,SAAS,CAACtnD,GAAD,EAAM2G,GAAG,CAAC6gD,WAAJ,CAAgBtnD,CAAhB,CAAN,EAA0Bu9C,MAA1B,EAAkC31B,OAAlC,CAAtB;AACA,UAAI1sB,MAAJ,EAAY,OAAOA,MAAP;AACb;AACF;AACF;AAGD;;AACA,AAAO,SAASqsD,aAAT,CAAuBp8D,KAAvB,EAA8B;AACnC,MAAI8d,IAAI,GAAG,OAAO9d,KAAP,IAAgB,QAAhB,GAA2BA,KAA3B,GAAmCq7D,QAAQ,CAACr7D,KAAK,CAAC0R,OAAP,CAAtD;AACA,SAAOoM,IAAI,IAAI,MAAR,IAAkBA,IAAI,IAAI,KAA1B,IAAmCA,IAAI,IAAI,OAA3C,IAAsDA,IAAI,IAAI,KAArE;AACD;AAED,AAAO,SAASu+C,gBAAT,CAA0Bv+C,IAA1B,EAAgC7V,KAAhC,EAAuCq0D,OAAvC,EAAgD;AACrD,MAAIvsC,IAAI,GAAGjS,IAAX;AACA,MAAI7V,KAAK,CAACsQ,MAAN,IAAgBwX,IAAI,IAAI,KAA5B,EAAmCjS,IAAI,GAAG,SAASA,IAAhB;AACnC,MAAI,CAACwM,WAAW,GAAGriB,KAAK,CAACuQ,OAAT,GAAmBvQ,KAAK,CAACqQ,OAArC,KAAiDyX,IAAI,IAAI,MAA7D,EAAqEjS,IAAI,GAAG,UAAUA,IAAjB;AACrE,MAAI,CAACwM,WAAW,GAAGriB,KAAK,CAACqQ,OAAT,GAAmBrQ,KAAK,CAACuQ,OAArC,KAAiDuX,IAAI,IAAI,KAA7D,EAAoEjS,IAAI,GAAG,SAASA,IAAhB;AACpE,MAAI,CAACw+C,OAAD,IAAYr0D,KAAK,CAACoQ,QAAlB,IAA8B0X,IAAI,IAAI,OAA1C,EAAmDjS,IAAI,GAAG,WAAWA,IAAlB;AACnD,SAAOA,IAAP;AACD;;AAGD,AAAO,SAAS3B,OAAT,CAAiBlU,KAAjB,EAAwBq0D,OAAxB,EAAiC;AACtC,MAAI7yC,MAAM,IAAIxhB,KAAK,CAACyJ,OAAN,IAAiB,EAA3B,IAAiCzJ,KAAK,CAAC,MAAD,CAA1C,EAAoD,OAAO,KAAP;AACpD,MAAI6V,IAAI,GAAGu9C,QAAQ,CAACpzD,KAAK,CAACyJ,OAAP,CAAnB;AACA,MAAIoM,IAAI,IAAI,IAAR,IAAgB7V,KAAK,CAACs0D,WAA1B,EAAuC,OAAO,KAAP,CAHD;AAKtC;;AACA,MAAIt0D,KAAK,CAACyJ,OAAN,IAAiB,CAAjB,IAAsBzJ,KAAK,CAAC8Q,IAAhC,EAAsC+E,IAAI,GAAG7V,KAAK,CAAC8Q,IAAb;AACtC,SAAOsjD,gBAAgB,CAACv+C,IAAD,EAAO7V,KAAP,EAAcq0D,OAAd,CAAvB;AACD;AAED,AAAO,SAASJ,SAAT,CAAmBpkC,GAAnB,EAAwB;AAC7B,SAAO,OAAOA,GAAP,IAAc,QAAd,GAAyByjC,MAAM,CAACzjC,GAAD,CAA/B,GAAuCA,GAA9C;AACD;;AC3ID;;AACA,AAAO,SAAS0kC,mBAAT,CAA6B3oC,EAA7B,EAAiC4oC,OAAjC,EAA0C;AAC/C,MAAI9kB,MAAM,GAAG9jB,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWC,MAAxB;AAAA,MAAgC+kB,IAAI,GAAG,EAAvC,CAD+C;AAG/C;;AACA,OAAK,IAAI7nD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,QAAI8nD,MAAM,GAAGF,OAAO,CAAC9kB,MAAM,CAAC9iC,CAAD,CAAP,CAApB;;AACA,WAAO6nD,IAAI,CAAC54D,MAAL,IAAes3B,GAAG,CAACuhC,MAAM,CAACx5C,IAAR,EAAcqM,GAAG,CAACktC,IAAD,CAAH,CAAU1rC,EAAxB,CAAH,IAAkC,CAAxD,EAA2D;AACzD,UAAI4rC,QAAQ,GAAGF,IAAI,CAAC95D,GAAL,EAAf;;AACA,UAAIw4B,GAAG,CAACwhC,QAAQ,CAACz5C,IAAV,EAAgBw5C,MAAM,CAACx5C,IAAvB,CAAH,GAAkC,CAAtC,EAAyC;AACvCw5C,QAAAA,MAAM,CAACx5C,IAAP,GAAcy5C,QAAQ,CAACz5C,IAAvB;AACA;AACD;AACF;;AACDu5C,IAAAA,IAAI,CAAC1oD,IAAL,CAAU2oD,MAAV;AACD,GAd8C;;;AAgB/CnZ,EAAAA,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AAChB,SAAK,IAAIhf,CAAC,GAAG6nD,IAAI,CAAC54D,MAAL,GAAc,CAA3B,EAA8B+Q,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EACEg9C,YAAY,CAACh+B,EAAE,CAACgG,GAAJ,EAAS,EAAT,EAAa6iC,IAAI,CAAC7nD,CAAD,CAAJ,CAAQsO,IAArB,EAA2Bu5C,IAAI,CAAC7nD,CAAD,CAAJ,CAAQmc,EAAnC,EAAuC,SAAvC,CAAZ;;AACF0sB,IAAAA,mBAAmB,CAAC7pB,EAAD,CAAnB;AACD,GAJM,CAAP;AAKD;;ACxBD,SAASgpC,iBAAT,CAA2BzpC,IAA3B,EAAiC/C,EAAjC,EAAqCvL,GAArC,EAA0C;AACxC,MAAI1V,MAAM,GAAGuhB,kBAAkB,CAACyC,IAAI,CAACpkB,IAAN,EAAYqhB,EAAE,GAAGvL,GAAjB,EAAsBA,GAAtB,CAA/B;AACA,SAAO1V,MAAM,GAAG,CAAT,IAAcA,MAAM,GAAGgkB,IAAI,CAACpkB,IAAL,CAAUlL,MAAjC,GAA0C,IAA1C,GAAiDsL,MAAxD;AACD;;AAED,AAAO,SAAS0tD,aAAT,CAAuB1pC,IAAvB,EAA6BxH,KAA7B,EAAoC9G,GAApC,EAAyC;AAC9C,MAAIuL,EAAE,GAAGwsC,iBAAiB,CAACzpC,IAAD,EAAOxH,KAAK,CAACyE,EAAb,EAAiBvL,GAAjB,CAA1B;AACA,SAAOuL,EAAE,IAAI,IAAN,GAAa,IAAb,GAAoB,IAAI8K,GAAJ,CAAQvP,KAAK,CAACwH,IAAd,EAAoB/C,EAApB,EAAwBvL,GAAG,GAAG,CAAN,GAAU,OAAV,GAAoB,QAA5C,CAA3B;AACD;AAED,AAAO,SAASi4C,SAAT,CAAmBC,QAAnB,EAA6BnpC,EAA7B,EAAiCgR,OAAjC,EAA0CpK,MAA1C,EAAkD3V,GAAlD,EAAuD;AAC5D,MAAIk4C,QAAJ,EAAc;AACZ,QAAInpC,EAAE,CAACgG,GAAH,CAAOhoB,SAAP,IAAoB,KAAxB,EAA+BiT,GAAG,GAAG,CAACA,GAAP;AAC/B,QAAIuM,KAAK,GAAG8B,QAAQ,CAAC0R,OAAD,EAAUhR,EAAE,CAACgG,GAAH,CAAOhoB,SAAjB,CAApB;;AACA,QAAIwf,KAAJ,EAAW;AACT,UAAIE,IAAI,GAAGzM,GAAG,GAAG,CAAN,GAAU0K,GAAG,CAAC6B,KAAD,CAAb,GAAuBA,KAAK,CAAC,CAAD,CAAvC;AACA,UAAI4rC,kBAAkB,GAAIn4C,GAAG,GAAG,CAAP,KAAcyM,IAAI,CAACE,KAAL,IAAc,CAA5B,CAAzB;AACA,UAAIG,MAAM,GAAGqrC,kBAAkB,GAAG,OAAH,GAAa,QAA5C;AACA,UAAI5sC,EAAJ,CAJS;AAMT;AACA;AACA;AACA;AACA;;AACA,UAAIkB,IAAI,CAACE,KAAL,GAAa,CAAb,IAAkBoC,EAAE,CAACgG,GAAH,CAAOhoB,SAAP,IAAoB,KAA1C,EAAiD;AAC/C,YAAIqrD,IAAI,GAAGztB,qBAAqB,CAAC5b,EAAD,EAAKgR,OAAL,CAAhC;AACAxU,QAAAA,EAAE,GAAGvL,GAAG,GAAG,CAAN,GAAU+f,OAAO,CAAC71B,IAAR,CAAalL,MAAb,GAAsB,CAAhC,GAAoC,CAAzC;AACA,YAAIqwC,SAAS,GAAG3E,mBAAmB,CAAC3b,EAAD,EAAKqpC,IAAL,EAAW7sC,EAAX,CAAnB,CAAkCrL,GAAlD;AACAqL,QAAAA,EAAE,GAAGS,SAAS,CAACT,EAAE,IAAImf,mBAAmB,CAAC3b,EAAD,EAAKqpC,IAAL,EAAW7sC,EAAX,CAAnB,CAAkCrL,GAAlC,IAAyCmvB,SAAhD,EAA4DrvB,GAAG,GAAG,CAAP,KAAcyM,IAAI,CAACE,KAAL,IAAc,CAA5B,IAAiCF,IAAI,CAACpO,IAAtC,GAA6CoO,IAAI,CAACP,EAAL,GAAU,CAAlH,EAAqHX,EAArH,CAAd;AACA,YAAIuB,MAAM,IAAI,QAAd,EAAwBvB,EAAE,GAAGwsC,iBAAiB,CAACh4B,OAAD,EAAUxU,EAAV,EAAc,CAAd,CAAtB;AACzB,OAND,MAMOA,EAAE,GAAGvL,GAAG,GAAG,CAAN,GAAUyM,IAAI,CAACP,EAAf,GAAoBO,IAAI,CAACpO,IAA9B;;AACP,aAAO,IAAIgY,GAAJ,CAAQV,MAAR,EAAgBpK,EAAhB,EAAoBuB,MAApB,CAAP;AACD;AACF;;AACD,SAAO,IAAIuJ,GAAJ,CAAQV,MAAR,EAAgB3V,GAAG,GAAG,CAAN,GAAU+f,OAAO,CAAC71B,IAAR,CAAalL,MAAvB,GAAgC,CAAhD,EAAmDghB,GAAG,GAAG,CAAN,GAAU,QAAV,GAAqB,OAAxE,CAAP;AACD;AAED,AAAO,SAASq4C,YAAT,CAAsBtpC,EAAtB,EAA0BT,IAA1B,EAAgCxH,KAAhC,EAAuC9G,GAAvC,EAA4C;AACjD,MAAIs4C,IAAI,GAAGjqC,QAAQ,CAACC,IAAD,EAAOS,EAAE,CAACgG,GAAH,CAAOhoB,SAAd,CAAnB;AACA,MAAI,CAACurD,IAAL,EAAW,OAAON,aAAa,CAAC1pC,IAAD,EAAOxH,KAAP,EAAc9G,GAAd,CAApB;;AACX,MAAI8G,KAAK,CAACyE,EAAN,IAAY+C,IAAI,CAACpkB,IAAL,CAAUlL,MAA1B,EAAkC;AAChC8nB,IAAAA,KAAK,CAACyE,EAAN,GAAW+C,IAAI,CAACpkB,IAAL,CAAUlL,MAArB;AACA8nB,IAAAA,KAAK,CAACgG,MAAN,GAAe,QAAf;AACD,GAHD,MAGO,IAAIhG,KAAK,CAACyE,EAAN,IAAY,CAAhB,EAAmB;AACxBzE,IAAAA,KAAK,CAACyE,EAAN,GAAW,CAAX;AACAzE,IAAAA,KAAK,CAACgG,MAAN,GAAe,OAAf;AACD;;AACD,MAAI0hB,OAAO,GAAG3hB,aAAa,CAACyrC,IAAD,EAAOxxC,KAAK,CAACyE,EAAb,EAAiBzE,KAAK,CAACgG,MAAvB,CAA3B;AAAA,MAA2DL,IAAI,GAAG6rC,IAAI,CAAC9pB,OAAD,CAAtE;;AACA,MAAIzf,EAAE,CAACgG,GAAH,CAAOhoB,SAAP,IAAoB,KAApB,IAA6B0f,IAAI,CAACE,KAAL,GAAa,CAAb,IAAkB,CAA/C,KAAqD3M,GAAG,GAAG,CAAN,GAAUyM,IAAI,CAACP,EAAL,GAAUpF,KAAK,CAACyE,EAA1B,GAA+BkB,IAAI,CAACpO,IAAL,GAAYyI,KAAK,CAACyE,EAAtG,CAAJ,EAA+G;AAC7G;AACA;AACA,WAAOysC,aAAa,CAAC1pC,IAAD,EAAOxH,KAAP,EAAc9G,GAAd,CAApB;AACD;;AAED,MAAIu4C,EAAE,GAAG,CAACnuC,GAAD,EAAMpK,GAAN,KAAc+3C,iBAAiB,CAACzpC,IAAD,EAAOlE,GAAG,YAAYiM,GAAf,GAAqBjM,GAAG,CAACmB,EAAzB,GAA8BnB,GAArC,EAA0CpK,GAA1C,CAAxC;;AACA,MAAIo4C,IAAJ;;AACA,MAAII,oBAAoB,GAAGjtC,EAAE,IAAI;AAC/B,QAAI,CAACwD,EAAE,CAAC5S,OAAH,CAAW4tB,YAAhB,EAA8B,OAAO;AAACoF,MAAAA,KAAK,EAAE,CAAR;AAAWv9B,MAAAA,GAAG,EAAE0c,IAAI,CAACpkB,IAAL,CAAUlL;AAA1B,KAAP;AAC9Bo5D,IAAAA,IAAI,GAAGA,IAAI,IAAIztB,qBAAqB,CAAC5b,EAAD,EAAKT,IAAL,CAApC;AACA,WAAO8gB,qBAAqB,CAACrgB,EAAD,EAAKT,IAAL,EAAW8pC,IAAX,EAAiB7sC,EAAjB,CAA5B;AACD,GAJD;;AAKA,MAAI2jB,iBAAiB,GAAGspB,oBAAoB,CAAC1xC,KAAK,CAACgG,MAAN,IAAgB,QAAhB,GAA2ByrC,EAAE,CAACzxC,KAAD,EAAQ,CAAC,CAAT,CAA7B,GAA2CA,KAAK,CAACyE,EAAlD,CAA5C;;AAEA,MAAIwD,EAAE,CAACgG,GAAH,CAAOhoB,SAAP,IAAoB,KAApB,IAA6B0f,IAAI,CAACE,KAAL,IAAc,CAA/C,EAAkD;AAChD,QAAIwrC,kBAAkB,GAAI1rC,IAAI,CAACE,KAAL,IAAc,CAAf,IAAsB3M,GAAG,GAAG,CAArD;AACA,QAAIuL,EAAE,GAAGgtC,EAAE,CAACzxC,KAAD,EAAQqxC,kBAAkB,GAAG,CAAH,GAAO,CAAC,CAAlC,CAAX;;AACA,QAAI5sC,EAAE,IAAI,IAAN,KAAe,CAAC4sC,kBAAD,GAAsB5sC,EAAE,IAAIkB,IAAI,CAACpO,IAAX,IAAmBkN,EAAE,IAAI2jB,iBAAiB,CAACC,KAAjE,GAAyE5jB,EAAE,IAAIkB,IAAI,CAACP,EAAX,IAAiBX,EAAE,IAAI2jB,iBAAiB,CAACt9B,GAAjI,CAAJ,EAA2I;AACzI;AACA,UAAIkb,MAAM,GAAGqrC,kBAAkB,GAAG,QAAH,GAAc,OAA7C;AACA,aAAO,IAAI9hC,GAAJ,CAAQvP,KAAK,CAACwH,IAAd,EAAoB/C,EAApB,EAAwBuB,MAAxB,CAAP;AACD;AACF,GAlCgD;AAqCjD;;;AAEA,MAAI2rC,kBAAkB,GAAG,CAACjqB,OAAD,EAAUxuB,GAAV,EAAekvB,iBAAf,KAAqC;AAC5D,QAAIwpB,MAAM,GAAG,CAACntC,EAAD,EAAK4sC,kBAAL,KAA4BA,kBAAkB,GACvD,IAAI9hC,GAAJ,CAAQvP,KAAK,CAACwH,IAAd,EAAoBiqC,EAAE,CAAChtC,EAAD,EAAK,CAAL,CAAtB,EAA+B,QAA/B,CADuD,GAEvD,IAAI8K,GAAJ,CAAQvP,KAAK,CAACwH,IAAd,EAAoB/C,EAApB,EAAwB,OAAxB,CAFJ;;AAIA,WAAOijB,OAAO,IAAI,CAAX,IAAgBA,OAAO,GAAG8pB,IAAI,CAACt5D,MAAtC,EAA8CwvC,OAAO,IAAIxuB,GAAzD,EAA8D;AAC5D,UAAIyM,IAAI,GAAG6rC,IAAI,CAAC9pB,OAAD,CAAf;AACA,UAAI2pB,kBAAkB,GAAIn4C,GAAG,GAAG,CAAP,KAAcyM,IAAI,CAACE,KAAL,IAAc,CAA5B,CAAzB;AACA,UAAIpB,EAAE,GAAG4sC,kBAAkB,GAAGjpB,iBAAiB,CAACC,KAArB,GAA6BopB,EAAE,CAACrpB,iBAAiB,CAACt9B,GAAnB,EAAwB,CAAC,CAAzB,CAA1D;AACA,UAAI6a,IAAI,CAACpO,IAAL,IAAakN,EAAb,IAAmBA,EAAE,GAAGkB,IAAI,CAACP,EAAjC,EAAqC,OAAOwsC,MAAM,CAACntC,EAAD,EAAK4sC,kBAAL,CAAb;AACrC5sC,MAAAA,EAAE,GAAG4sC,kBAAkB,GAAG1rC,IAAI,CAACpO,IAAR,GAAek6C,EAAE,CAAC9rC,IAAI,CAACP,EAAN,EAAU,CAAC,CAAX,CAAxC;AACA,UAAIgjB,iBAAiB,CAACC,KAAlB,IAA2B5jB,EAA3B,IAAiCA,EAAE,GAAG2jB,iBAAiB,CAACt9B,GAA5D,EAAiE,OAAO8mD,MAAM,CAACntC,EAAD,EAAK4sC,kBAAL,CAAb;AAClE;AACF,GAbD,CAvCiD;;;AAuDjD,MAAIQ,GAAG,GAAGF,kBAAkB,CAACjqB,OAAO,GAAGxuB,GAAX,EAAgBA,GAAhB,EAAqBkvB,iBAArB,CAA5B;AACA,MAAIypB,GAAJ,EAAS,OAAOA,GAAP,CAxDwC;;AA2DjD,MAAIC,MAAM,GAAG54C,GAAG,GAAG,CAAN,GAAUkvB,iBAAiB,CAACt9B,GAA5B,GAAkC2mD,EAAE,CAACrpB,iBAAiB,CAACC,KAAnB,EAA0B,CAAC,CAA3B,CAAjD;;AACA,MAAIypB,MAAM,IAAI,IAAV,IAAkB,EAAE54C,GAAG,GAAG,CAAN,IAAW44C,MAAM,IAAItqC,IAAI,CAACpkB,IAAL,CAAUlL,MAAjC,CAAtB,EAAgE;AAC9D25D,IAAAA,GAAG,GAAGF,kBAAkB,CAACz4C,GAAG,GAAG,CAAN,GAAU,CAAV,GAAcs4C,IAAI,CAACt5D,MAAL,GAAc,CAA7B,EAAgCghB,GAAhC,EAAqCw4C,oBAAoB,CAACI,MAAD,CAAzD,CAAxB;AACA,QAAID,GAAJ,EAAS,OAAOA,GAAP;AACV,GA/DgD;;;AAkEjD,SAAO,IAAP;AACD;;ACjGD;;AACA,AAAO,IAAIE,QAAQ,GAAG;AACpBrN,EAAAA,SAAS,EAAEA,SADS;AAEpBsN,EAAAA,eAAe,EAAE/pC,EAAE,IAAIA,EAAE,CAAC66B,YAAH,CAAgB76B,EAAE,CAAC8pB,SAAH,CAAa,QAAb,CAAhB,EAAwC9pB,EAAE,CAAC8pB,SAAH,CAAa,MAAb,CAAxC,EAA8D/uB,cAA9D,CAFH;AAGpBivC,EAAAA,QAAQ,EAAEhqC,EAAE,IAAI2oC,mBAAmB,CAAC3oC,EAAD,EAAKnI,KAAK,IAAI;AAC/C,QAAIA,KAAK,CAACmsB,KAAN,EAAJ,EAAmB;AACjB,UAAIz8B,GAAG,GAAGwe,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASnO,KAAK,CAACpmB,IAAN,CAAW8tB,IAApB,CAAP,CAAiCpkB,IAAjC,CAAsClL,MAAhD;AACA,UAAI4nB,KAAK,CAACpmB,IAAN,CAAW+qB,EAAX,IAAiBjV,GAAjB,IAAwBsQ,KAAK,CAACpmB,IAAN,CAAW8tB,IAAX,GAAkBS,EAAE,CAAC2Q,QAAH,EAA9C,EACE,OAAO;AAACrhB,QAAAA,IAAI,EAAEuI,KAAK,CAACpmB,IAAb;AAAmB0rB,QAAAA,EAAE,EAAEmK,GAAG,CAACzP,KAAK,CAACpmB,IAAN,CAAW8tB,IAAX,GAAkB,CAAnB,EAAsB,CAAtB;AAA1B,OAAP,CADF,KAGE,OAAO;AAACjQ,QAAAA,IAAI,EAAEuI,KAAK,CAACpmB,IAAb;AAAmB0rB,QAAAA,EAAE,EAAEmK,GAAG,CAACzP,KAAK,CAACpmB,IAAN,CAAW8tB,IAAZ,EAAkBhY,GAAlB;AAA1B,OAAP;AACH,KAND,MAMO;AACL,aAAO;AAAC+H,QAAAA,IAAI,EAAEuI,KAAK,CAACvI,IAAN,EAAP;AAAqB6N,QAAAA,EAAE,EAAEtF,KAAK,CAACsF,EAAN;AAAzB,OAAP;AACD;AACF,GAVkC,CAHf;AAcpB8sC,EAAAA,UAAU,EAAEjqC,EAAE,IAAI2oC,mBAAmB,CAAC3oC,EAAD,EAAKnI,KAAK,KAAK;AAClDvI,IAAAA,IAAI,EAAEgY,GAAG,CAACzP,KAAK,CAACvI,IAAN,GAAaiQ,IAAd,EAAoB,CAApB,CADyC;AAElDpC,IAAAA,EAAE,EAAE0K,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAASsB,GAAG,CAACzP,KAAK,CAACsF,EAAN,GAAWoC,IAAX,GAAkB,CAAnB,EAAsB,CAAtB,CAAZ;AAFuC,GAAL,CAAV,CAdjB;AAkBpB2qC,EAAAA,WAAW,EAAElqC,EAAE,IAAI2oC,mBAAmB,CAAC3oC,EAAD,EAAKnI,KAAK,KAAK;AACnDvI,IAAAA,IAAI,EAAEgY,GAAG,CAACzP,KAAK,CAACvI,IAAN,GAAaiQ,IAAd,EAAoB,CAApB,CAD0C;AAClBpC,IAAAA,EAAE,EAAEtF,KAAK,CAACvI,IAAN;AADc,GAAL,CAAV,CAlBlB;AAqBpB66C,EAAAA,kBAAkB,EAAEnqC,EAAE,IAAI2oC,mBAAmB,CAAC3oC,EAAD,EAAKnI,KAAK,IAAI;AACzD,QAAI1G,GAAG,GAAG6O,EAAE,CAACof,UAAH,CAAcvnB,KAAK,CAACpmB,IAApB,EAA0B,KAA1B,EAAiC0f,GAAjC,GAAuC,CAAjD;AACA,QAAIi5C,OAAO,GAAGpqC,EAAE,CAACggB,UAAH,CAAc;AAAC59B,MAAAA,IAAI,EAAE,CAAP;AAAU+O,MAAAA,GAAG,EAAEA;AAAf,KAAd,EAAmC,KAAnC,CAAd;AACA,WAAO;AAAC7B,MAAAA,IAAI,EAAE86C,OAAP;AAAgBjtC,MAAAA,EAAE,EAAEtF,KAAK,CAACvI,IAAN;AAApB,KAAP;AACD,GAJ4C,CArBzB;AA0BpB+6C,EAAAA,mBAAmB,EAAErqC,EAAE,IAAI2oC,mBAAmB,CAAC3oC,EAAD,EAAKnI,KAAK,IAAI;AAC1D,QAAI1G,GAAG,GAAG6O,EAAE,CAACof,UAAH,CAAcvnB,KAAK,CAACpmB,IAApB,EAA0B,KAA1B,EAAiC0f,GAAjC,GAAuC,CAAjD;AACA,QAAIm5C,QAAQ,GAAGtqC,EAAE,CAACggB,UAAH,CAAc;AAAC59B,MAAAA,IAAI,EAAE4d,EAAE,CAACplB,OAAH,CAAW4sC,OAAX,CAAmBjmB,WAAnB,GAAiC,GAAxC;AAA6CpQ,MAAAA,GAAG,EAAEA;AAAlD,KAAd,EAAsE,KAAtE,CAAf;AACA,WAAO;AAAC7B,MAAAA,IAAI,EAAEuI,KAAK,CAACvI,IAAN,EAAP;AAAqB6N,MAAAA,EAAE,EAAEmtC;AAAzB,KAAP;AACD,GAJ6C,CA1B1B;AA+BpB5H,EAAAA,IAAI,EAAE1iC,EAAE,IAAIA,EAAE,CAAC0iC,IAAH,EA/BQ;AAgCpBC,EAAAA,IAAI,EAAE3iC,EAAE,IAAIA,EAAE,CAAC2iC,IAAH,EAhCQ;AAiCpBC,EAAAA,aAAa,EAAE5iC,EAAE,IAAIA,EAAE,CAAC4iC,aAAH,EAjCD;AAkCpBC,EAAAA,aAAa,EAAE7iC,EAAE,IAAIA,EAAE,CAAC6iC,aAAH,EAlCD;AAmCpB0H,EAAAA,UAAU,EAAEvqC,EAAE,IAAIA,EAAE,CAAC46B,eAAH,CAAmBtzB,GAAG,CAACtH,EAAE,CAACk3B,SAAH,EAAD,EAAiB,CAAjB,CAAtB,CAnCE;AAoCpBsT,EAAAA,QAAQ,EAAExqC,EAAE,IAAIA,EAAE,CAAC46B,eAAH,CAAmBtzB,GAAG,CAACtH,EAAE,CAAC2Q,QAAH,EAAD,CAAtB,CApCI;AAqCpB85B,EAAAA,WAAW,EAAEzqC,EAAE,IAAIA,EAAE,CAACmiC,kBAAH,CAAsBtqC,KAAK,IAAI2M,SAAS,CAACxE,EAAD,EAAKnI,KAAK,CAACpmB,IAAN,CAAW8tB,IAAhB,CAAxC,EACjB;AAACpvB,IAAAA,MAAM,EAAE,OAAT;AAAkBurC,IAAAA,IAAI,EAAE;AAAxB,GADiB,CArCC;AAwCpBgvB,EAAAA,gBAAgB,EAAE1qC,EAAE,IAAIA,EAAE,CAACmiC,kBAAH,CAAsBtqC,KAAK,IAAI8yC,cAAc,CAAC3qC,EAAD,EAAKnI,KAAK,CAACpmB,IAAX,CAA7C,EACtB;AAACtB,IAAAA,MAAM,EAAE,OAAT;AAAkBurC,IAAAA,IAAI,EAAE;AAAxB,GADsB,CAxCJ;AA2CpBkvB,EAAAA,SAAS,EAAE5qC,EAAE,IAAIA,EAAE,CAACmiC,kBAAH,CAAsBtqC,KAAK,IAAIgzC,OAAO,CAAC7qC,EAAD,EAAKnI,KAAK,CAACpmB,IAAN,CAAW8tB,IAAhB,CAAtC,EACf;AAACpvB,IAAAA,MAAM,EAAE,OAAT;AAAkBurC,IAAAA,IAAI,EAAE,CAAC;AAAzB,GADe,CA3CG;AA8CpBovB,EAAAA,WAAW,EAAE9qC,EAAE,IAAIA,EAAE,CAACmiC,kBAAH,CAAsBtqC,KAAK,IAAI;AAChD,QAAI1G,GAAG,GAAG6O,EAAE,CAACqf,YAAH,CAAgBxnB,KAAK,CAACpmB,IAAtB,EAA4B,KAA5B,EAAmC0f,GAAnC,GAAyC,CAAnD;AACA,WAAO6O,EAAE,CAACggB,UAAH,CAAc;AAAC59B,MAAAA,IAAI,EAAE4d,EAAE,CAACplB,OAAH,CAAW4sC,OAAX,CAAmBjmB,WAAnB,GAAiC,GAAxC;AAA6CpQ,MAAAA,GAAG,EAAEA;AAAlD,KAAd,EAAsE,KAAtE,CAAP;AACD,GAHkB,EAGhB+J,QAHgB,CA9CC;AAkDpB6vC,EAAAA,UAAU,EAAE/qC,EAAE,IAAIA,EAAE,CAACmiC,kBAAH,CAAsBtqC,KAAK,IAAI;AAC/C,QAAI1G,GAAG,GAAG6O,EAAE,CAACqf,YAAH,CAAgBxnB,KAAK,CAACpmB,IAAtB,EAA4B,KAA5B,EAAmC0f,GAAnC,GAAyC,CAAnD;AACA,WAAO6O,EAAE,CAACggB,UAAH,CAAc;AAAC59B,MAAAA,IAAI,EAAE,CAAP;AAAU+O,MAAAA,GAAG,EAAEA;AAAf,KAAd,EAAmC,KAAnC,CAAP;AACD,GAHiB,EAGf+J,QAHe,CAlDE;AAsDpB8vC,EAAAA,eAAe,EAAEhrC,EAAE,IAAIA,EAAE,CAACmiC,kBAAH,CAAsBtqC,KAAK,IAAI;AACpD,QAAI1G,GAAG,GAAG6O,EAAE,CAACqf,YAAH,CAAgBxnB,KAAK,CAACpmB,IAAtB,EAA4B,KAA5B,EAAmC0f,GAAnC,GAAyC,CAAnD;AACA,QAAIkK,GAAG,GAAG2E,EAAE,CAACggB,UAAH,CAAc;AAAC59B,MAAAA,IAAI,EAAE,CAAP;AAAU+O,MAAAA,GAAG,EAAEA;AAAf,KAAd,EAAmC,KAAnC,CAAV;AACA,QAAIkK,GAAG,CAACmB,EAAJ,GAASwD,EAAE,CAAC+F,OAAH,CAAW1K,GAAG,CAACkE,IAAf,EAAqBrF,MAArB,CAA4B,IAA5B,CAAb,EAAgD,OAAOywC,cAAc,CAAC3qC,EAAD,EAAKnI,KAAK,CAACpmB,IAAX,CAArB;AAChD,WAAO4pB,GAAP;AACD,GALsB,EAKpBH,QALoB,CAtDH;AA4DpB+vC,EAAAA,QAAQ,EAAEjrC,EAAE,IAAIA,EAAE,CAACkrC,KAAH,CAAS,CAAC,CAAV,EAAa,MAAb,CA5DI;AA6DpBC,EAAAA,UAAU,EAAEnrC,EAAE,IAAIA,EAAE,CAACkrC,KAAH,CAAS,CAAT,EAAY,MAAZ,CA7DE;AA8DpBE,EAAAA,QAAQ,EAAEprC,EAAE,IAAIA,EAAE,CAACkrC,KAAH,CAAS,CAAC,CAAV,EAAa,MAAb,CA9DI;AA+DpBG,EAAAA,UAAU,EAAErrC,EAAE,IAAIA,EAAE,CAACkrC,KAAH,CAAS,CAAT,EAAY,MAAZ,CA/DE;AAgEpBI,EAAAA,UAAU,EAAEtrC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAC,CAAV,EAAa,MAAb,CAhEE;AAiEpBC,EAAAA,WAAW,EAAExrC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAT,EAAY,MAAZ,CAjEC;AAkEpBE,EAAAA,YAAY,EAAEzrC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAC,CAAV,EAAa,QAAb,CAlEA;AAmEpBG,EAAAA,aAAa,EAAE1rC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAT,EAAY,QAAZ,CAnED;AAoEpBI,EAAAA,UAAU,EAAE3rC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAC,CAAV,EAAa,MAAb,CApEE;AAqEpBK,EAAAA,YAAY,EAAE5rC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAT,EAAY,OAAZ,CArEA;AAsEpBM,EAAAA,WAAW,EAAE7rC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAC,CAAV,EAAa,OAAb,CAtEC;AAuEpBO,EAAAA,WAAW,EAAE9rC,EAAE,IAAIA,EAAE,CAACurC,KAAH,CAAS,CAAT,EAAY,MAAZ,CAvEC;AAwEpBQ,EAAAA,aAAa,EAAE/rC,EAAE,IAAIA,EAAE,CAACgsC,OAAH,CAAW,CAAC,CAAZ,EAAe,WAAf,CAxED;AAyEpBC,EAAAA,YAAY,EAAEjsC,EAAE,IAAIA,EAAE,CAACgsC,OAAH,CAAW,CAAX,EAAc,MAAd,CAzEA;AA0EpBE,EAAAA,aAAa,EAAElsC,EAAE,IAAIA,EAAE,CAACgsC,OAAH,CAAW,CAAC,CAAZ,EAAe,MAAf,CA1ED;AA2EpBG,EAAAA,YAAY,EAAEnsC,EAAE,IAAIA,EAAE,CAACgsC,OAAH,CAAW,CAAX,EAAc,MAAd,CA3EA;AA4EpBI,EAAAA,cAAc,EAAEpsC,EAAE,IAAIA,EAAE,CAACgsC,OAAH,CAAW,CAAC,CAAZ,EAAe,OAAf,CA5EF;AA6EpBK,EAAAA,aAAa,EAAErsC,EAAE,IAAIA,EAAE,CAACgsC,OAAH,CAAW,CAAX,EAAc,OAAd,CA7ED;AA8EpBM,EAAAA,UAAU,EAAEtsC,EAAE,IAAIA,EAAE,CAACusC,eAAH,CAAmB,OAAnB,CA9EE;AA+EpBC,EAAAA,UAAU,EAAExsC,EAAE,IAAIA,EAAE,CAACusC,eAAH,CAAmB,KAAnB,CA/EE;AAgFpBE,EAAAA,UAAU,EAAEzsC,EAAE,IAAIA,EAAE,CAACusC,eAAH,CAAmB,UAAnB,CAhFE;AAiFpBG,EAAAA,SAAS,EAAE1sC,EAAE,IAAIA,EAAE,CAACuiC,gBAAH,CAAoB,IAApB,CAjFG;AAkFpBoK,EAAAA,aAAa,EAAE3sC,EAAE,IAAI;AACnB,QAAI4sC,MAAM,GAAG,EAAb;AAAA,QAAiB9oB,MAAM,GAAG9jB,EAAE,CAACiiC,cAAH,EAA1B;AAAA,QAA+CloC,OAAO,GAAGiG,EAAE,CAAC5S,OAAH,CAAW2M,OAApE;;AACA,SAAK,IAAI/Y,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,UAAIqa,GAAG,GAAGyoB,MAAM,CAAC9iC,CAAD,CAAN,CAAUsO,IAAV,EAAV;AACA,UAAIgM,GAAG,GAAGzB,WAAW,CAACmG,EAAE,CAAC+F,OAAH,CAAW1K,GAAG,CAACkE,IAAf,CAAD,EAAuBlE,GAAG,CAACmB,EAA3B,EAA+BzC,OAA/B,CAArB;AACA6yC,MAAAA,MAAM,CAACzsD,IAAP,CAAYub,QAAQ,CAAC3B,OAAO,GAAGuB,GAAG,GAAGvB,OAAjB,CAApB;AACD;;AACDiG,IAAAA,EAAE,CAACyiC,iBAAH,CAAqBmK,MAArB;AACD,GA1FmB;AA2FpBC,EAAAA,UAAU,EAAE7sC,EAAE,IAAI;AAChB,QAAIA,EAAE,CAAC21B,iBAAH,EAAJ,EAA4B31B,EAAE,CAACusC,eAAH,CAAmB,KAAnB,EAA5B,KACKvsC,EAAE,CAAC8sC,WAAH,CAAe,WAAf;AACN,GA9FmB;AA+FpB;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,EAAAA,cAAc,EAAE/sC,EAAE,IAAI2vB,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AACtC,QAAI8jB,MAAM,GAAG9jB,EAAE,CAACiiC,cAAH,EAAb;AAAA,QAAkCjH,MAAM,GAAG,EAA3C;;AACA,SAAK,IAAIh6C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,UAAI,CAAC8iC,MAAM,CAAC9iC,CAAD,CAAN,CAAUgjC,KAAV,EAAL,EAAwB;AACxB,UAAIhmB,GAAG,GAAG8lB,MAAM,CAAC9iC,CAAD,CAAN,CAAUvP,IAApB;AAAA,UAA0B8tB,IAAI,GAAGwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAShI,GAAG,CAACuB,IAAb,CAAP,CAA0BpkB,IAA3D;;AACA,UAAIokB,IAAJ,EAAU;AACR,YAAIvB,GAAG,CAACxB,EAAJ,IAAU+C,IAAI,CAACtvB,MAAnB,EAA2B+tB,GAAG,GAAG,IAAIsJ,GAAJ,CAAQtJ,GAAG,CAACuB,IAAZ,EAAkBvB,GAAG,CAACxB,EAAJ,GAAS,CAA3B,CAAN;;AAC3B,YAAIwB,GAAG,CAACxB,EAAJ,GAAS,CAAb,EAAgB;AACdwB,UAAAA,GAAG,GAAG,IAAIsJ,GAAJ,CAAQtJ,GAAG,CAACuB,IAAZ,EAAkBvB,GAAG,CAACxB,EAAJ,GAAS,CAA3B,CAAN;AACAwD,UAAAA,EAAE,CAACg+B,YAAH,CAAgBz+B,IAAI,CAACvC,MAAL,CAAYgB,GAAG,CAACxB,EAAJ,GAAS,CAArB,IAA0B+C,IAAI,CAACvC,MAAL,CAAYgB,GAAG,CAACxB,EAAJ,GAAS,CAArB,CAA1C,EACgB8K,GAAG,CAACtJ,GAAG,CAACuB,IAAL,EAAWvB,GAAG,CAACxB,EAAJ,GAAS,CAApB,CADnB,EAC2CwB,GAD3C,EACgD,YADhD;AAED,SAJD,MAIO,IAAIA,GAAG,CAACuB,IAAJ,GAAWS,EAAE,CAACgG,GAAH,CAAOC,KAAtB,EAA6B;AAClC,cAAIpH,IAAI,GAAGkH,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAShI,GAAG,CAACuB,IAAJ,GAAW,CAApB,CAAP,CAA8BpkB,IAAzC;;AACA,cAAI0jB,IAAJ,EAAU;AACRb,YAAAA,GAAG,GAAG,IAAIsJ,GAAJ,CAAQtJ,GAAG,CAACuB,IAAZ,EAAkB,CAAlB,CAAN;AACAS,YAAAA,EAAE,CAACg+B,YAAH,CAAgBz+B,IAAI,CAACvC,MAAL,CAAY,CAAZ,IAAiBgD,EAAE,CAACgG,GAAH,CAAO07B,aAAP,EAAjB,GACA7iC,IAAI,CAAC7B,MAAL,CAAY6B,IAAI,CAAC5uB,MAAL,GAAc,CAA1B,CADhB,EAEgBq3B,GAAG,CAACtJ,GAAG,CAACuB,IAAJ,GAAW,CAAZ,EAAeV,IAAI,CAAC5uB,MAAL,GAAc,CAA7B,CAFnB,EAEoD+tB,GAFpD,EAEyD,YAFzD;AAGD;AACF;AACF;;AACDg9B,MAAAA,MAAM,CAAC76C,IAAP,CAAY,IAAIu1C,KAAJ,CAAU13B,GAAV,EAAeA,GAAf,CAAZ;AACD;;AACDgC,IAAAA,EAAE,CAACoiC,aAAH,CAAiBpH,MAAjB;AACD,GAxB4B,CAtGT;AA+HpBgS,EAAAA,gBAAgB,EAAEhtC,EAAE,IAAI2vB,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AACxC,QAAIitC,IAAI,GAAGjtC,EAAE,CAACiiC,cAAH,EAAX;;AACA,SAAK,IAAIjhD,CAAC,GAAGisD,IAAI,CAACh9D,MAAL,GAAc,CAA3B,EAA8B+Q,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EACEgf,EAAE,CAACg+B,YAAH,CAAgBh+B,EAAE,CAACgG,GAAH,CAAO07B,aAAP,EAAhB,EAAwCuL,IAAI,CAACjsD,CAAD,CAAJ,CAAQugC,MAAhD,EAAwD0rB,IAAI,CAACjsD,CAAD,CAAJ,CAAQvP,IAAhE,EAAsE,QAAtE;;AACFw7D,IAAAA,IAAI,GAAGjtC,EAAE,CAACiiC,cAAH,EAAP;;AACA,SAAK,IAAIjhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGisD,IAAI,CAACh9D,MAAzB,EAAiC+Q,CAAC,EAAlC,EACEgf,EAAE,CAACktC,UAAH,CAAcD,IAAI,CAACjsD,CAAD,CAAJ,CAAQsO,IAAR,GAAeiQ,IAA7B,EAAmC,IAAnC,EAAyC,IAAzC;;AACFsqB,IAAAA,mBAAmB,CAAC7pB,EAAD,CAAnB;AACD,GAR8B,CA/HX;AAwIpBmtC,EAAAA,QAAQ,EAAEntC,EAAE,IAAIA,EAAE,CAACuiC,gBAAH,CAAoB,IAApB,EAA0B,OAA1B,CAxII;AAyIpB6K,EAAAA,eAAe,EAAEptC,EAAE,IAAIA,EAAE,CAACotC,eAAH;AAzIH,CAAf;;AA6IP,SAAS5oC,SAAT,CAAmBxE,EAAnB,EAAuBwQ,KAAvB,EAA8B;AAC5B,MAAIjR,IAAI,GAAGwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASwK,KAAT,CAAlB;AACA,MAAIyvB,MAAM,GAAG9vB,UAAU,CAAC5Q,IAAD,CAAvB;AACA,MAAI0gC,MAAM,IAAI1gC,IAAd,EAAoBiR,KAAK,GAAG5J,MAAM,CAACq5B,MAAD,CAAd;AACpB,SAAOiJ,SAAS,CAAC,IAAD,EAAOlpC,EAAP,EAAWigC,MAAX,EAAmBzvB,KAAnB,EAA0B,CAA1B,CAAhB;AACD;;AACD,SAASq6B,OAAT,CAAiB7qC,EAAjB,EAAqBwQ,KAArB,EAA4B;AAC1B,MAAIjR,IAAI,GAAGwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASwK,KAAT,CAAlB;AACA,MAAIyvB,MAAM,GAAG5vB,aAAa,CAAC9Q,IAAD,CAA1B;AACA,MAAI0gC,MAAM,IAAI1gC,IAAd,EAAoBiR,KAAK,GAAG5J,MAAM,CAACq5B,MAAD,CAAd;AACpB,SAAOiJ,SAAS,CAAC,IAAD,EAAOlpC,EAAP,EAAWT,IAAX,EAAiBiR,KAAjB,EAAwB,CAAC,CAAzB,CAAhB;AACD;;AACD,SAASm6B,cAAT,CAAwB3qC,EAAxB,EAA4B3E,GAA5B,EAAiC;AAC/B,MAAItD,KAAK,GAAGyM,SAAS,CAACxE,EAAD,EAAK3E,GAAG,CAACkE,IAAT,CAArB;AACA,MAAIA,IAAI,GAAGwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASjO,KAAK,CAACwH,IAAf,CAAlB;AACA,MAAI/B,KAAK,GAAG8B,QAAQ,CAACC,IAAD,EAAOS,EAAE,CAACgG,GAAH,CAAOhoB,SAAd,CAApB;;AACA,MAAI,CAACwf,KAAD,IAAUA,KAAK,CAAC,CAAD,CAAL,CAASI,KAAT,IAAkB,CAAhC,EAAmC;AACjC,QAAIyvC,UAAU,GAAGt0D,IAAI,CAAC4kB,GAAL,CAAS5F,KAAK,CAACyE,EAAf,EAAmB+C,IAAI,CAACpkB,IAAL,CAAU+e,MAAV,CAAiB,IAAjB,CAAnB,CAAjB;AACA,QAAIozC,IAAI,GAAGjyC,GAAG,CAACkE,IAAJ,IAAYxH,KAAK,CAACwH,IAAlB,IAA0BlE,GAAG,CAACmB,EAAJ,IAAU6wC,UAApC,IAAkDhyC,GAAG,CAACmB,EAAjE;AACA,WAAO8K,GAAG,CAACvP,KAAK,CAACwH,IAAP,EAAa+tC,IAAI,GAAG,CAAH,GAAOD,UAAxB,EAAoCt1C,KAAK,CAACgG,MAA1C,CAAV;AACD;;AACD,SAAOhG,KAAP;AACD;;ACpKD,SAASw1C,eAAT,CAAyBvtC,EAAzB,EAA6BwtC,KAA7B,EAAoCC,SAApC,EAA+C;AAC7C,MAAI,OAAOD,KAAP,IAAgB,QAApB,EAA8B;AAC5BA,IAAAA,KAAK,GAAG1D,QAAQ,CAAC0D,KAAD,CAAhB;AACA,QAAI,CAACA,KAAL,EAAY,OAAO,KAAP;AACb,GAJ4C;AAM7C;;;AACAxtC,EAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBy5B,YAAjB;AACA,MAAIC,SAAS,GAAG3tC,EAAE,CAACplB,OAAH,CAAWsJ,KAA3B;AAAA,MAAkCi0C,IAAI,GAAG,KAAzC;;AACA,MAAI;AACF,QAAIn4B,EAAE,CAACulC,UAAH,EAAJ,EAAqBvlC,EAAE,CAAC+D,KAAH,CAASg5B,aAAT,GAAyB,IAAzB;AACrB,QAAI0Q,SAAJ,EAAeztC,EAAE,CAACplB,OAAH,CAAWsJ,KAAX,GAAmB,KAAnB;AACfi0C,IAAAA,IAAI,GAAGqV,KAAK,CAACxtC,EAAD,CAAL,IAAalF,IAApB;AACD,GAJD,SAIU;AACRkF,IAAAA,EAAE,CAACplB,OAAH,CAAWsJ,KAAX,GAAmBypD,SAAnB;AACA3tC,IAAAA,EAAE,CAAC+D,KAAH,CAASg5B,aAAT,GAAyB,KAAzB;AACD;;AACD,SAAO5E,IAAP;AACD;;AAED,SAASyV,kBAAT,CAA4B5tC,EAA5B,EAAgC/V,IAAhC,EAAsCs0C,MAAtC,EAA8C;AAC5C,OAAK,IAAIv9C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgf,EAAE,CAAC+D,KAAH,CAAS8pC,OAAT,CAAiB59D,MAArC,EAA6C+Q,CAAC,EAA9C,EAAkD;AAChD,QAAI9E,MAAM,GAAGksD,SAAS,CAACn+C,IAAD,EAAO+V,EAAE,CAAC+D,KAAH,CAAS8pC,OAAT,CAAiB7sD,CAAjB,CAAP,EAA4Bu9C,MAA5B,EAAoCv+B,EAApC,CAAtB;AACA,QAAI9jB,MAAJ,EAAY,OAAOA,MAAP;AACb;;AACD,SAAQ8jB,EAAE,CAAC5S,OAAH,CAAW0gD,SAAX,IAAwB1F,SAAS,CAACn+C,IAAD,EAAO+V,EAAE,CAAC5S,OAAH,CAAW0gD,SAAlB,EAA6BvP,MAA7B,EAAqCv+B,EAArC,CAAlC,IACFooC,SAAS,CAACn+C,IAAD,EAAO+V,EAAE,CAAC5S,OAAH,CAAWs6C,MAAlB,EAA0BnJ,MAA1B,EAAkCv+B,EAAlC,CADd;AAED;AAGD;;;AAEA,IAAI+tC,OAAO,GAAG,IAAI1zC,OAAJ,EAAd;AAEA,AAAO,SAAS2zC,WAAT,CAAqBhuC,EAArB,EAAyB/V,IAAzB,EAA+BzB,CAA/B,EAAkC+1C,MAAlC,EAA0C;AAC/C,MAAI0P,GAAG,GAAGjuC,EAAE,CAAC+D,KAAH,CAASmqC,MAAnB;;AACA,MAAID,GAAJ,EAAS;AACP,QAAI1F,aAAa,CAACt+C,IAAD,CAAjB,EAAyB,OAAO,SAAP;AACzB,QAAI,MAAM0G,IAAN,CAAW1G,IAAX,CAAJ,EACE+V,EAAE,CAAC+D,KAAH,CAASmqC,MAAT,GAAkB,IAAlB,CADF,KAGEH,OAAO,CAACtzC,GAAR,CAAY,EAAZ,EAAgB,MAAM;AACpB,UAAIuF,EAAE,CAAC+D,KAAH,CAASmqC,MAAT,IAAmBD,GAAvB,EAA4B;AAC1BjuC,QAAAA,EAAE,CAAC+D,KAAH,CAASmqC,MAAT,GAAkB,IAAlB;AACAluC,QAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBpnB,KAAjB;AACD;AACF,KALD;AAMF,QAAIshD,gBAAgB,CAACnuC,EAAD,EAAKiuC,GAAG,GAAG,GAAN,GAAYhkD,IAAjB,EAAuBzB,CAAvB,EAA0B+1C,MAA1B,CAApB,EAAuD,OAAO,IAAP;AACxD;;AACD,SAAO4P,gBAAgB,CAACnuC,EAAD,EAAK/V,IAAL,EAAWzB,CAAX,EAAc+1C,MAAd,CAAvB;AACD;;AAED,SAAS4P,gBAAT,CAA0BnuC,EAA1B,EAA8B/V,IAA9B,EAAoCzB,CAApC,EAAuC+1C,MAAvC,EAA+C;AAC7C,MAAIriD,MAAM,GAAG0xD,kBAAkB,CAAC5tC,EAAD,EAAK/V,IAAL,EAAWs0C,MAAX,CAA/B;AAEA,MAAIriD,MAAM,IAAI,OAAd,EACE8jB,EAAE,CAAC+D,KAAH,CAASmqC,MAAT,GAAkBjkD,IAAlB;AACF,MAAI/N,MAAM,IAAI,SAAd,EACE65B,WAAW,CAAC/V,EAAD,EAAK,YAAL,EAAmBA,EAAnB,EAAuB/V,IAAvB,EAA6BzB,CAA7B,CAAX;;AAEF,MAAItM,MAAM,IAAI,SAAV,IAAuBA,MAAM,IAAI,OAArC,EAA8C;AAC5C0kB,IAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AACA89B,IAAAA,YAAY,CAACtmB,EAAD,CAAZ;AACD;;AAED,SAAO,CAAC,CAAC9jB,MAAT;AACD;;;AAGD,SAASkyD,gBAAT,CAA0BpuC,EAA1B,EAA8BxX,CAA9B,EAAiC;AAC/B,MAAIyB,IAAI,GAAG3B,OAAO,CAACE,CAAD,EAAI,IAAJ,CAAlB;AACA,MAAI,CAACyB,IAAL,EAAW,OAAO,KAAP;;AAEX,MAAIzB,CAAC,CAAChE,QAAF,IAAc,CAACwb,EAAE,CAAC+D,KAAH,CAASmqC,MAA5B,EAAoC;AAClC;AACA;AACA;AACA,WAAOF,WAAW,CAAChuC,EAAD,EAAK,WAAW/V,IAAhB,EAAsBzB,CAAtB,EAAyBwQ,CAAC,IAAIu0C,eAAe,CAACvtC,EAAD,EAAKhH,CAAL,EAAQ,IAAR,CAA7C,CAAX,IACAg1C,WAAW,CAAChuC,EAAD,EAAK/V,IAAL,EAAWzB,CAAX,EAAcwQ,CAAC,IAAI;AAC5B,UAAI,OAAOA,CAAP,IAAY,QAAZ,GAAuB,WAAWrI,IAAX,CAAgBqI,CAAhB,CAAvB,GAA4CA,CAAC,CAACq1C,MAAlD,EACE,OAAOd,eAAe,CAACvtC,EAAD,EAAKhH,CAAL,CAAtB;AACH,KAHU,CADlB;AAKD,GATD,MASO;AACL,WAAOg1C,WAAW,CAAChuC,EAAD,EAAK/V,IAAL,EAAWzB,CAAX,EAAcwQ,CAAC,IAAIu0C,eAAe,CAACvtC,EAAD,EAAKhH,CAAL,CAAlC,CAAlB;AACD;AACF;;;AAGD,SAASs1C,iBAAT,CAA2BtuC,EAA3B,EAA+BxX,CAA/B,EAAkCgU,EAAlC,EAAsC;AACpC,SAAOwxC,WAAW,CAAChuC,EAAD,EAAK,MAAMxD,EAAN,GAAW,GAAhB,EAAqBhU,CAArB,EAAwBwQ,CAAC,IAAIu0C,eAAe,CAACvtC,EAAD,EAAKhH,CAAL,EAAQ,IAAR,CAA5C,CAAlB;AACD;;AAED,IAAIu1C,cAAc,GAAG,IAArB;AACA,AAAO,SAASC,SAAT,CAAmBhmD,CAAnB,EAAsB;AAC3B,MAAIwX,EAAE,GAAG,IAAT;AACA,MAAIxX,CAAC,CAACjN,MAAF,IAAYiN,CAAC,CAACjN,MAAF,IAAYykB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBw6B,QAAjB,EAA5B,EAAyD;AACzDzuC,EAAAA,EAAE,CAACO,KAAH,CAAStsB,KAAT,GAAiB0kB,SAAS,EAA1B;AACA,MAAIoH,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAlB,EAA2B,OAJA;;AAM3B,MAAI8M,EAAE,IAAIC,UAAU,GAAG,EAAnB,IAAyB/M,CAAC,CAAC3K,OAAF,IAAa,EAA1C,EAA8C2K,CAAC,CAACP,WAAF,GAAgB,KAAhB;AAC9C,MAAI/C,IAAI,GAAGsD,CAAC,CAAC3K,OAAb;AACAmiB,EAAAA,EAAE,CAACplB,OAAH,CAAWsJ,KAAX,GAAmBgB,IAAI,IAAI,EAAR,IAAcsD,CAAC,CAAChE,QAAnC;AACA,MAAIkqD,OAAO,GAAGN,gBAAgB,CAACpuC,EAAD,EAAKxX,CAAL,CAA9B;;AACA,MAAIoN,MAAJ,EAAY;AACV24C,IAAAA,cAAc,GAAGG,OAAO,GAAGxpD,IAAH,GAAU,IAAlC,CADU;;AAGV,QAAI,CAACwpD,OAAD,IAAYxpD,IAAI,IAAI,EAApB,IAA0B,CAACod,YAA3B,KAA4CjM,GAAG,GAAG7N,CAAC,CAAC7D,OAAL,GAAe6D,CAAC,CAAC/D,OAAhE,CAAJ,EACEub,EAAE,CAACuiC,gBAAH,CAAoB,EAApB,EAAwB,IAAxB,EAA8B,KAA9B;AACH;;AACD,MAAIrtC,KAAK,IAAI,CAACmB,GAAV,IAAiB,CAACq4C,OAAlB,IAA6BxpD,IAAI,IAAI,EAArC,IAA2CsD,CAAC,CAAChE,QAA7C,IAAyD,CAACgE,CAAC,CAAC/D,OAA5D,IAAuEjT,QAAQ,CAACs7D,WAApF,EACEt7D,QAAQ,CAACs7D,WAAT,CAAqB,KAArB,EAjByB;;AAoB3B,MAAI5nD,IAAI,IAAI,EAAR,IAAc,CAAC,2BAA2ByL,IAA3B,CAAgCqP,EAAE,CAACplB,OAAH,CAAW4sC,OAAX,CAAmBxwB,SAAnD,CAAnB,EACE23C,aAAa,CAAC3uC,EAAD,CAAb;AACH;;AAED,SAAS2uC,aAAT,CAAuB3uC,EAAvB,EAA2B;AACzB,MAAIwnB,OAAO,GAAGxnB,EAAE,CAACplB,OAAH,CAAW4sC,OAAzB;AACA1uB,EAAAA,QAAQ,CAAC0uB,OAAD,EAAU,sBAAV,CAAR;;AAEA,WAASnlC,EAAT,CAAYmG,CAAZ,EAAe;AACb,QAAIA,CAAC,CAAC3K,OAAF,IAAa,EAAb,IAAmB,CAAC2K,CAAC,CAAC9D,MAA1B,EAAkC;AAChCmS,MAAAA,OAAO,CAAC2wB,OAAD,EAAU,sBAAV,CAAP;AACA5nB,MAAAA,GAAG,CAACpuB,QAAD,EAAW,OAAX,EAAoB6Q,EAApB,CAAH;AACAud,MAAAA,GAAG,CAACpuB,QAAD,EAAW,WAAX,EAAwB6Q,EAAxB,CAAH;AACD;AACF;;AACDod,EAAAA,EAAE,CAACjuB,QAAD,EAAW,OAAX,EAAoB6Q,EAApB,CAAF;AACAod,EAAAA,EAAE,CAACjuB,QAAD,EAAW,WAAX,EAAwB6Q,EAAxB,CAAF;AACD;;AAED,AAAO,SAASusD,OAAT,CAAiBpmD,CAAjB,EAAoB;AACzB,MAAIA,CAAC,CAAC3K,OAAF,IAAa,EAAjB,EAAqB,KAAKmoB,GAAL,CAAS6d,GAAT,CAAa3/B,KAAb,GAAqB,KAArB;AACrB6b,EAAAA,cAAc,CAAC,IAAD,EAAOvX,CAAP,CAAd;AACD;AAED,AAAO,SAASqmD,UAAT,CAAoBrmD,CAApB,EAAuB;AAC5B,MAAIwX,EAAE,GAAG,IAAT;AACA,MAAIxX,CAAC,CAACjN,MAAF,IAAYiN,CAAC,CAACjN,MAAF,IAAYykB,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBw6B,QAAjB,EAA5B,EAAyD;AACzD,MAAIj1B,aAAa,CAACxZ,EAAE,CAACplB,OAAJ,EAAa4N,CAAb,CAAb,IAAgCuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAA9C,IAAyDA,CAAC,CAAC/D,OAAF,IAAa,CAAC+D,CAAC,CAAC9D,MAAzE,IAAmF2R,GAAG,IAAI7N,CAAC,CAAC7D,OAAhG,EAAyG;AACzG,MAAI9G,OAAO,GAAG2K,CAAC,CAAC3K,OAAhB;AAAA,MAAyByI,QAAQ,GAAGkC,CAAC,CAAClC,QAAtC;;AACA,MAAIsP,MAAM,IAAI/X,OAAO,IAAI0wD,cAAzB,EAAyC;AAACA,IAAAA,cAAc,GAAG,IAAjB;AAAuB3tC,IAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AAAqB;AAAO;;AAC7F,MAAKoN,MAAM,KAAK,CAACpN,CAAC,CAAC1K,KAAH,IAAY0K,CAAC,CAAC1K,KAAF,GAAU,EAA3B,CAAP,IAA0CswD,gBAAgB,CAACpuC,EAAD,EAAKxX,CAAL,CAA9D,EAAuE;AACvE,MAAIgU,EAAE,GAAGtwB,MAAM,CAACu7D,YAAP,CAAoBnhD,QAAQ,IAAI,IAAZ,GAAmBzI,OAAnB,GAA6ByI,QAAjD,CAAT,CAP4B;;AAS5B,MAAIkW,EAAE,IAAI,MAAV,EAAkB;AAClB,MAAI8xC,iBAAiB,CAACtuC,EAAD,EAAKxX,CAAL,EAAQgU,EAAR,CAArB,EAAkC;AAClCwD,EAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiB46B,UAAjB,CAA4BrmD,CAA5B;AACD;;AC7ID,MAAMsmD,iBAAiB,GAAG,GAA1B;;AAEA,MAAMC,SAAN,CAAgB;AACd/5D,EAAAA,WAAW,CAACslB,IAAD,EAAOe,GAAP,EAAY4F,MAAZ,EAAoB;AAC7B,SAAK3G,IAAL,GAAYA,IAAZ;AACA,SAAKe,GAAL,GAAWA,GAAX;AACA,SAAK4F,MAAL,GAAcA,MAAd;AACD;;AAED+tC,EAAAA,OAAO,CAAC10C,IAAD,EAAOe,GAAP,EAAY4F,MAAZ,EAAoB;AACzB,WAAO,KAAK3G,IAAL,GAAYw0C,iBAAZ,GAAgCx0C,IAAhC,IACLiN,GAAG,CAAClM,GAAD,EAAM,KAAKA,GAAX,CAAH,IAAsB,CADjB,IACsB4F,MAAM,IAAI,KAAKA,MAD5C;AAED;;AAVa;;AAahB,IAAIguC,SAAJ,EAAeC,eAAf;;AACA,SAASC,WAAT,CAAqB9zC,GAArB,EAA0B4F,MAA1B,EAAkC;AAChC,MAAImuC,GAAG,GAAG,CAAC,IAAIv2D,IAAJ,EAAX;;AACA,MAAIq2D,eAAe,IAAIA,eAAe,CAACF,OAAhB,CAAwBI,GAAxB,EAA6B/zC,GAA7B,EAAkC4F,MAAlC,CAAvB,EAAkE;AAChEguC,IAAAA,SAAS,GAAGC,eAAe,GAAG,IAA9B;AACA,WAAO,QAAP;AACD,GAHD,MAGO,IAAID,SAAS,IAAIA,SAAS,CAACD,OAAV,CAAkBI,GAAlB,EAAuB/zC,GAAvB,EAA4B4F,MAA5B,CAAjB,EAAsD;AAC3DiuC,IAAAA,eAAe,GAAG,IAAIH,SAAJ,CAAcK,GAAd,EAAmB/zC,GAAnB,EAAwB4F,MAAxB,CAAlB;AACAguC,IAAAA,SAAS,GAAG,IAAZ;AACA,WAAO,QAAP;AACD,GAJM,MAIA;AACLA,IAAAA,SAAS,GAAG,IAAIF,SAAJ,CAAcK,GAAd,EAAmB/zC,GAAnB,EAAwB4F,MAAxB,CAAZ;AACAiuC,IAAAA,eAAe,GAAG,IAAlB;AACA,WAAO,QAAP;AACD;AACF;AAGD;AACA;AACA;AACA;;;AACA,AAAO,SAASG,WAAT,CAAqB7mD,CAArB,EAAwB;AAC7B,MAAIwX,EAAE,GAAG,IAAT;AAAA,MAAeplB,OAAO,GAAGolB,EAAE,CAACplB,OAA5B;AACA,MAAImlB,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAd,IAAyB5N,OAAO,CAACo5C,WAAR,IAAuBp5C,OAAO,CAACq5B,KAAR,CAAcq7B,aAAd,EAApD,EAAmF;AACnF10D,EAAAA,OAAO,CAACq5B,KAAR,CAAcy5B,YAAd;AACA9yD,EAAAA,OAAO,CAACsJ,KAAR,GAAgBsE,CAAC,CAAChE,QAAlB;;AAEA,MAAIg1B,aAAa,CAAC5+B,OAAD,EAAU4N,CAAV,CAAjB,EAA+B;AAC7B,QAAI,CAACiN,MAAL,EAAa;AACX;AACA;AACA7a,MAAAA,OAAO,CAAC4/B,QAAR,CAAiBqZ,SAAjB,GAA6B,KAA7B;AACAn0C,MAAAA,UAAU,CAAC,MAAM9E,OAAO,CAAC4/B,QAAR,CAAiBqZ,SAAjB,GAA6B,IAApC,EAA0C,GAA1C,CAAV;AACD;;AACD;AACD;;AACD,MAAI0b,aAAa,CAACvvC,EAAD,EAAKxX,CAAL,CAAjB,EAA0B;AAC1B,MAAI6S,GAAG,GAAG2mB,YAAY,CAAChiB,EAAD,EAAKxX,CAAL,CAAtB;AAAA,MAA+ByY,MAAM,GAAGD,QAAQ,CAACxY,CAAD,CAAhD;AAAA,MAAqDgnD,MAAM,GAAGn0C,GAAG,GAAG8zC,WAAW,CAAC9zC,GAAD,EAAM4F,MAAN,CAAd,GAA8B,QAA/F;AACArgB,EAAAA,MAAM,CAAC3M,KAAP,GAjB6B;;AAoB7B,MAAIgtB,MAAM,IAAI,CAAV,IAAejB,EAAE,CAAC+D,KAAH,CAAS0rC,aAA5B,EACEzvC,EAAE,CAAC+D,KAAH,CAAS0rC,aAAT,CAAuBjnD,CAAvB;AAEF,MAAI6S,GAAG,IAAIq0C,kBAAkB,CAAC1vC,EAAD,EAAKiB,MAAL,EAAa5F,GAAb,EAAkBm0C,MAAlB,EAA0BhnD,CAA1B,CAA7B,EAA2D;;AAE3D,MAAIyY,MAAM,IAAI,CAAd,EAAiB;AACf,QAAI5F,GAAJ,EAASs0C,cAAc,CAAC3vC,EAAD,EAAK3E,GAAL,EAAUm0C,MAAV,EAAkBhnD,CAAlB,CAAd,CAAT,KACK,IAAIuY,QAAQ,CAACvY,CAAD,CAAR,IAAe5N,OAAO,CAAC4/B,QAA3B,EAAqC5Z,gBAAgB,CAACpY,CAAD,CAAhB;AAC3C,GAHD,MAGO,IAAIyY,MAAM,IAAI,CAAd,EAAiB;AACtB,QAAI5F,GAAJ,EAASu/B,eAAe,CAAC56B,EAAE,CAACgG,GAAJ,EAAS3K,GAAT,CAAf;AACT3b,IAAAA,UAAU,CAAC,MAAM9E,OAAO,CAACq5B,KAAR,CAAchgC,KAAd,EAAP,EAA8B,EAA9B,CAAV;AACD,GAHM,MAGA,IAAIgtB,MAAM,IAAI,CAAd,EAAiB;AACtB,QAAIvK,iBAAJ,EAAuBsJ,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiB27B,aAAjB,CAA+BpnD,CAA/B,EAAvB,KACKy+B,cAAc,CAACjnB,EAAD,CAAd;AACN;AACF;;AAED,SAAS0vC,kBAAT,CAA4B1vC,EAA5B,EAAgCiB,MAAhC,EAAwC5F,GAAxC,EAA6Cm0C,MAA7C,EAAqDp7D,KAArD,EAA4D;AAC1D,MAAI6V,IAAI,GAAG,OAAX;AACA,MAAIulD,MAAM,IAAI,QAAd,EAAwBvlD,IAAI,GAAG,WAAWA,IAAlB,CAAxB,KACK,IAAIulD,MAAM,IAAI,QAAd,EAAwBvlD,IAAI,GAAG,WAAWA,IAAlB;AAC7BA,EAAAA,IAAI,GAAG,CAACgX,MAAM,IAAI,CAAV,GAAc,MAAd,GAAuBA,MAAM,IAAI,CAAV,GAAc,QAAd,GAAyB,OAAjD,IAA4DhX,IAAnE;AAEA,SAAO+jD,WAAW,CAAChuC,EAAD,EAAMwoC,gBAAgB,CAACv+C,IAAD,EAAO7V,KAAP,CAAtB,EAAqCA,KAArC,EAA4Co5D,KAAK,IAAI;AACrE,QAAI,OAAOA,KAAP,IAAgB,QAApB,EAA8BA,KAAK,GAAG1D,QAAQ,CAAC0D,KAAD,CAAhB;AAC9B,QAAI,CAACA,KAAL,EAAY,OAAO,KAAP;AACZ,QAAIrV,IAAI,GAAG,KAAX;;AACA,QAAI;AACF,UAAIn4B,EAAE,CAACulC,UAAH,EAAJ,EAAqBvlC,EAAE,CAAC+D,KAAH,CAASg5B,aAAT,GAAyB,IAAzB;AACrB5E,MAAAA,IAAI,GAAGqV,KAAK,CAACxtC,EAAD,EAAK3E,GAAL,CAAL,IAAkBP,IAAzB;AACD,KAHD,SAGU;AACRkF,MAAAA,EAAE,CAAC+D,KAAH,CAASg5B,aAAT,GAAyB,KAAzB;AACD;;AACD,WAAO5E,IAAP;AACD,GAXiB,CAAlB;AAYD;;AAED,SAAS0X,cAAT,CAAwB7vC,EAAxB,EAA4BwvC,MAA5B,EAAoCp7D,KAApC,EAA2C;AACzC,MAAI8G,MAAM,GAAG8kB,EAAE,CAACxT,SAAH,CAAa,gBAAb,CAAb;AACA,MAAIrgB,KAAK,GAAG+O,MAAM,GAAGA,MAAM,CAAC8kB,EAAD,EAAKwvC,MAAL,EAAap7D,KAAb,CAAT,GAA+B,EAAjD;;AACA,MAAIjI,KAAK,CAAC2jE,IAAN,IAAc,IAAlB,EAAwB;AACtB,QAAIh1B,IAAI,GAAGxkB,QAAQ,GAAGliB,KAAK,CAACoQ,QAAN,IAAkBpQ,KAAK,CAACuQ,OAA3B,GAAqCvQ,KAAK,CAACsQ,MAA9D;AACAvY,IAAAA,KAAK,CAAC2jE,IAAN,GAAah1B,IAAI,GAAG,WAAH,GAAiB00B,MAAM,IAAI,QAAV,GAAqB,MAArB,GAA8BA,MAAM,IAAI,QAAV,GAAqB,MAArB,GAA8B,MAA9F;AACD;;AACD,MAAIrjE,KAAK,CAACklD,MAAN,IAAgB,IAAhB,IAAwBrxB,EAAE,CAACgG,GAAH,CAAOqrB,MAAnC,EAA2CllD,KAAK,CAACklD,MAAN,GAAerxB,EAAE,CAACgG,GAAH,CAAOqrB,MAAP,IAAiBj9C,KAAK,CAACoQ,QAAtC;AAC3C,MAAIrY,KAAK,CAAC4jE,MAAN,IAAgB,IAApB,EAA0B5jE,KAAK,CAAC4jE,MAAN,GAAe15C,GAAG,GAAGjiB,KAAK,CAACuQ,OAAT,GAAmBvQ,KAAK,CAACqQ,OAA3C;AAC1B,MAAItY,KAAK,CAAC6jE,UAAN,IAAoB,IAAxB,EAA8B7jE,KAAK,CAAC6jE,UAAN,GAAmB,EAAE35C,GAAG,GAAGjiB,KAAK,CAACsQ,MAAT,GAAkBtQ,KAAK,CAACqQ,OAA7B,CAAnB;AAC9B,SAAOtY,KAAP;AACD;;AAED,SAASwjE,cAAT,CAAwB3vC,EAAxB,EAA4B3E,GAA5B,EAAiCm0C,MAAjC,EAAyCp7D,KAAzC,EAAgD;AAC9C,MAAIkhB,EAAJ,EAAQ5V,UAAU,CAACrF,IAAI,CAAC0sC,WAAD,EAAc/mB,EAAd,CAAL,EAAwB,CAAxB,CAAV,CAAR,KACKA,EAAE,CAACO,KAAH,CAAStsB,KAAT,GAAiB0kB,SAAS,EAA1B;AAEL,MAAIs3C,QAAQ,GAAGJ,cAAc,CAAC7vC,EAAD,EAAKwvC,MAAL,EAAap7D,KAAb,CAA7B;AAEA,MAAIyvC,GAAG,GAAG7jB,EAAE,CAACgG,GAAH,CAAO6d,GAAjB;AAAA,MAAsBqsB,SAAtB;AACA,MAAIlwC,EAAE,CAAC5S,OAAH,CAAW+iD,QAAX,IAAuBjvC,WAAvB,IAAsC,CAAClB,EAAE,CAACulC,UAAH,EAAvC,IACAiK,MAAM,IAAI,QADV,IACsB,CAACU,SAAS,GAAGrsB,GAAG,CAACrrB,QAAJ,CAAa6C,GAAb,CAAb,IAAkC,CAAC,CADzD,KAECkM,GAAG,CAAC,CAAC2oC,SAAS,GAAGrsB,GAAG,CAACC,MAAJ,CAAWosB,SAAX,CAAb,EAAoC5gD,IAApC,EAAD,EAA6C+L,GAA7C,CAAH,GAAuD,CAAvD,IAA4DA,GAAG,CAAC0kB,IAAJ,GAAW,CAFxE,MAGCxY,GAAG,CAAC2oC,SAAS,CAAC/yC,EAAV,EAAD,EAAiB9B,GAAjB,CAAH,GAA2B,CAA3B,IAAgCA,GAAG,CAAC0kB,IAAJ,GAAW,CAH5C,CAAJ,EAIEqwB,mBAAmB,CAACpwC,EAAD,EAAK5rB,KAAL,EAAYinB,GAAZ,EAAiB40C,QAAjB,CAAnB,CAJF,KAMEI,gBAAgB,CAACrwC,EAAD,EAAK5rB,KAAL,EAAYinB,GAAZ,EAAiB40C,QAAjB,CAAhB;AACH;AAGD;;;AACA,SAASG,mBAAT,CAA6BpwC,EAA7B,EAAiC5rB,KAAjC,EAAwCinB,GAAxC,EAA6C40C,QAA7C,EAAuD;AACrD,MAAIr1D,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0B01D,KAAK,GAAG,KAAlC;AACA,MAAIC,OAAO,GAAG3gB,SAAS,CAAC5vB,EAAD,EAAKxX,CAAC,IAAI;AAC/B,QAAIiN,MAAJ,EAAY7a,OAAO,CAAC4/B,QAAR,CAAiBqZ,SAAjB,GAA6B,KAA7B;AACZ7zB,IAAAA,EAAE,CAAC+D,KAAH,CAASojB,YAAT,GAAwB,KAAxB;;AACA,QAAInnB,EAAE,CAAC+D,KAAH,CAASmjB,iBAAb,EAAgC;AAC9B,UAAIlnB,EAAE,CAAC6mB,QAAH,EAAJ,EAAmB7mB,EAAE,CAAC+D,KAAH,CAASmjB,iBAAT,GAA6B,KAA7B,CAAnB,KACKD,cAAc,CAACjnB,EAAD,CAAd;AACN;;AACDJ,IAAAA,GAAG,CAAChlB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,SAAhC,EAA2CmuC,OAA3C,CAAH;AACA3wC,IAAAA,GAAG,CAAChlB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,WAAhC,EAA6CouC,SAA7C,CAAH;AACA5wC,IAAAA,GAAG,CAAChlB,OAAO,CAAC4/B,QAAT,EAAmB,WAAnB,EAAgCi2B,SAAhC,CAAH;AACA7wC,IAAAA,GAAG,CAAChlB,OAAO,CAAC4/B,QAAT,EAAmB,MAAnB,EAA2B+1B,OAA3B,CAAH;;AACA,QAAI,CAACD,KAAL,EAAY;AACV1vC,MAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AACA,UAAI,CAACynD,QAAQ,CAACF,MAAd,EACEnV,eAAe,CAAC56B,EAAE,CAACgG,GAAJ,EAAS3K,GAAT,EAAc,IAAd,EAAoB,IAApB,EAA0B40C,QAAQ,CAAC5e,MAAnC,CAAf,CAHQ;;AAKV,UAAK57B,MAAM,IAAI,CAACI,MAAZ,IAAuBP,EAAE,IAAIC,UAAU,IAAI,CAA/C,EACE7V,UAAU,CAAC,MAAM;AAAC9E,QAAAA,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAhB,CAA8B1rB,IAA9B,CAAmCzC,KAAnC,CAAyC;AAACy8D,UAAAA,aAAa,EAAE;AAAhB,SAAzC;AAAiE91D,QAAAA,OAAO,CAACq5B,KAAR,CAAchgC,KAAd;AAAsB,OAA/F,EAAiG,EAAjG,CAAV,CADF,KAGE2G,OAAO,CAACq5B,KAAR,CAAchgC,KAAd;AACH;AACF,GArBsB,CAAvB;;AAsBA,MAAIu8D,SAAS,GAAG,UAASG,EAAT,EAAa;AAC3BL,IAAAA,KAAK,GAAGA,KAAK,IAAIv3D,IAAI,CAAC6pB,GAAL,CAASxuB,KAAK,CAAC+tC,OAAN,GAAgBwuB,EAAE,CAACxuB,OAA5B,IAAuCppC,IAAI,CAAC6pB,GAAL,CAASxuB,KAAK,CAACguC,OAAN,GAAgBuuB,EAAE,CAACvuB,OAA5B,CAAvC,IAA+E,EAAhG;AACD,GAFD;;AAGA,MAAIquB,SAAS,GAAG,MAAMH,KAAK,GAAG,IAA9B,CA3BqD;;;AA6BrD,MAAI76C,MAAJ,EAAY7a,OAAO,CAAC4/B,QAAR,CAAiBqZ,SAAjB,GAA6B,IAA7B;AACZ7zB,EAAAA,EAAE,CAAC+D,KAAH,CAASojB,YAAT,GAAwBopB,OAAxB;AACAA,EAAAA,OAAO,CAAC7nC,IAAR,GAAe,CAACunC,QAAQ,CAACD,UAAzB;AACAvwC,EAAAA,EAAE,CAAC7kB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,SAAhC,EAA2CmuC,OAA3C,CAAF;AACA9wC,EAAAA,EAAE,CAAC7kB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,WAAhC,EAA6CouC,SAA7C,CAAF;AACA/wC,EAAAA,EAAE,CAAC7kB,OAAO,CAAC4/B,QAAT,EAAmB,WAAnB,EAAgCi2B,SAAhC,CAAF;AACAhxC,EAAAA,EAAE,CAAC7kB,OAAO,CAAC4/B,QAAT,EAAmB,MAAnB,EAA2B+1B,OAA3B,CAAF;AAEAvwC,EAAAA,EAAE,CAAC+D,KAAH,CAASmjB,iBAAT,GAA6B,IAA7B;AACAxnC,EAAAA,UAAU,CAAC,MAAM9E,OAAO,CAACq5B,KAAR,CAAchgC,KAAd,EAAP,EAA8B,EAA9B,CAAV,CAtCqD;;AAwCrD,MAAI2G,OAAO,CAAC4/B,QAAR,CAAiB21B,QAArB,EAA+Bv1D,OAAO,CAAC4/B,QAAR,CAAiB21B,QAAjB;AAChC;;AAED,SAASS,YAAT,CAAsB5wC,EAAtB,EAA0B3E,GAA1B,EAA+By0C,IAA/B,EAAqC;AACnC,MAAIA,IAAI,IAAI,MAAZ,EAAoB,OAAO,IAAIpa,KAAJ,CAAUr6B,GAAV,EAAeA,GAAf,CAAP;AACpB,MAAIy0C,IAAI,IAAI,MAAZ,EAAoB,OAAO9vC,EAAE,CAAC6wC,UAAH,CAAcx1C,GAAd,CAAP;AACpB,MAAIy0C,IAAI,IAAI,MAAZ,EAAoB,OAAO,IAAIpa,KAAJ,CAAUpuB,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAW,CAAX,CAAb,EAA4BsI,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAASsB,GAAG,CAACjM,GAAG,CAACkE,IAAJ,GAAW,CAAZ,EAAe,CAAf,CAAZ,CAAnC,CAAP;AACpB,MAAIrjB,MAAM,GAAG4zD,IAAI,CAAC9vC,EAAD,EAAK3E,GAAL,CAAjB;AACA,SAAO,IAAIq6B,KAAJ,CAAUx5C,MAAM,CAACoT,IAAjB,EAAuBpT,MAAM,CAACihB,EAA9B,CAAP;AACD;;;AAGD,SAASkzC,gBAAT,CAA0BrwC,EAA1B,EAA8B5rB,KAA9B,EAAqC2jB,KAArC,EAA4Ck4C,QAA5C,EAAsD;AACpD,MAAI36C,EAAJ,EAAQ2xB,cAAc,CAACjnB,EAAD,CAAd;AACR,MAAIplB,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AAAA,MAA0BorB,GAAG,GAAGhG,EAAE,CAACgG,GAAnC;AACApF,EAAAA,gBAAgB,CAACxsB,KAAD,CAAhB;AAEA,MAAI08D,QAAJ;AAAA,MAAcC,QAAd;AAAA,MAAwBC,QAAQ,GAAGhrC,GAAG,CAAC6d,GAAvC;AAAA,MAA4CC,MAAM,GAAGktB,QAAQ,CAACltB,MAA9D;;AACA,MAAImsB,QAAQ,CAACF,MAAT,IAAmB,CAACE,QAAQ,CAAC5e,MAAjC,EAAyC;AACvC0f,IAAAA,QAAQ,GAAG/qC,GAAG,CAAC6d,GAAJ,CAAQrrB,QAAR,CAAiBT,KAAjB,CAAX;AACA,QAAIg5C,QAAQ,GAAG,CAAC,CAAhB,EACED,QAAQ,GAAGhtB,MAAM,CAACitB,QAAD,CAAjB,CADF,KAGED,QAAQ,GAAG,IAAIpb,KAAJ,CAAU39B,KAAV,EAAiBA,KAAjB,CAAX;AACH,GAND,MAMO;AACL+4C,IAAAA,QAAQ,GAAG9qC,GAAG,CAAC6d,GAAJ,CAAQJ,OAAR,EAAX;AACAstB,IAAAA,QAAQ,GAAG/qC,GAAG,CAAC6d,GAAJ,CAAQE,SAAnB;AACD;;AAED,MAAIksB,QAAQ,CAACH,IAAT,IAAiB,WAArB,EAAkC;AAChC,QAAI,CAACG,QAAQ,CAACF,MAAd,EAAsBe,QAAQ,GAAG,IAAIpb,KAAJ,CAAU39B,KAAV,EAAiBA,KAAjB,CAAX;AACtBA,IAAAA,KAAK,GAAGiqB,YAAY,CAAChiB,EAAD,EAAK5rB,KAAL,EAAY,IAAZ,EAAkB,IAAlB,CAApB;AACA28D,IAAAA,QAAQ,GAAG,CAAC,CAAZ;AACD,GAJD,MAIO;AACL,QAAIl5C,KAAK,GAAG+4C,YAAY,CAAC5wC,EAAD,EAAKjI,KAAL,EAAYk4C,QAAQ,CAACH,IAArB,CAAxB;AACA,QAAIG,QAAQ,CAAC5e,MAAb,EACEyf,QAAQ,GAAGpW,WAAW,CAACoW,QAAD,EAAWj5C,KAAK,CAAC0pB,MAAjB,EAAyB1pB,KAAK,CAACpmB,IAA/B,EAAqCw+D,QAAQ,CAAC5e,MAA9C,CAAtB,CADF,KAGEyf,QAAQ,GAAGj5C,KAAX;AACH;;AAED,MAAI,CAACo4C,QAAQ,CAACF,MAAd,EAAsB;AACpBgB,IAAAA,QAAQ,GAAG,CAAX;AACAlW,IAAAA,YAAY,CAAC70B,GAAD,EAAM,IAAIqvB,SAAJ,CAAc,CAACyb,QAAD,CAAd,EAA0B,CAA1B,CAAN,EAAoC71C,SAApC,CAAZ;AACA+1C,IAAAA,QAAQ,GAAGhrC,GAAG,CAAC6d,GAAf;AACD,GAJD,MAIO,IAAIktB,QAAQ,IAAI,CAAC,CAAjB,EAAoB;AACzBA,IAAAA,QAAQ,GAAGjtB,MAAM,CAAC7zC,MAAlB;AACA4qD,IAAAA,YAAY,CAAC70B,GAAD,EAAM4vB,kBAAkB,CAAC51B,EAAD,EAAK8jB,MAAM,CAACnjC,MAAP,CAAc,CAACmwD,QAAD,CAAd,CAAL,EAAgCC,QAAhC,CAAxB,EACC;AAAC/1C,MAAAA,MAAM,EAAE,KAAT;AAAgB7qB,MAAAA,MAAM,EAAE;AAAxB,KADD,CAAZ;AAED,GAJM,MAIA,IAAI2zC,MAAM,CAAC7zC,MAAP,GAAgB,CAAhB,IAAqB6zC,MAAM,CAACitB,QAAD,CAAN,CAAiB/sB,KAAjB,EAArB,IAAiDisB,QAAQ,CAACH,IAAT,IAAiB,MAAlE,IAA4E,CAACG,QAAQ,CAAC5e,MAA1F,EAAkG;AACvGwJ,IAAAA,YAAY,CAAC70B,GAAD,EAAM4vB,kBAAkB,CAAC51B,EAAD,EAAK8jB,MAAM,CAAC/nC,KAAP,CAAa,CAAb,EAAgBg1D,QAAhB,EAA0BpwD,MAA1B,CAAiCmjC,MAAM,CAAC/nC,KAAP,CAAag1D,QAAQ,GAAG,CAAxB,CAAjC,CAAL,EAAmE,CAAnE,CAAxB,EACC;AAAC/1C,MAAAA,MAAM,EAAE,KAAT;AAAgB7qB,MAAAA,MAAM,EAAE;AAAxB,KADD,CAAZ;AAEA6gE,IAAAA,QAAQ,GAAGhrC,GAAG,CAAC6d,GAAf;AACD,GAJM,MAIA;AACLoX,IAAAA,mBAAmB,CAACj1B,GAAD,EAAM+qC,QAAN,EAAgBD,QAAhB,EAA0B71C,SAA1B,CAAnB;AACD;;AAED,MAAIg2C,OAAO,GAAGl5C,KAAd;;AACA,WAASm5C,QAAT,CAAkB71C,GAAlB,EAAuB;AACrB,QAAIkM,GAAG,CAAC0pC,OAAD,EAAU51C,GAAV,CAAH,IAAqB,CAAzB,EAA4B;AAC5B41C,IAAAA,OAAO,GAAG51C,GAAV;;AAEA,QAAI40C,QAAQ,CAACH,IAAT,IAAiB,WAArB,EAAkC;AAChC,UAAIhsB,MAAM,GAAG,EAAb;AAAA,UAAiB/pB,OAAO,GAAGiG,EAAE,CAAC5S,OAAH,CAAW2M,OAAtC;AACA,UAAIo3C,QAAQ,GAAGt3C,WAAW,CAACkM,OAAO,CAACC,GAAD,EAAMjO,KAAK,CAACwH,IAAZ,CAAP,CAAyBpkB,IAA1B,EAAgC4c,KAAK,CAACyE,EAAtC,EAA0CzC,OAA1C,CAA1B;AACA,UAAIq3C,MAAM,GAAGv3C,WAAW,CAACkM,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAAP,CAAuBpkB,IAAxB,EAA8BkgB,GAAG,CAACmB,EAAlC,EAAsCzC,OAAtC,CAAxB;AACA,UAAI3X,IAAI,GAAGrJ,IAAI,CAACyiB,GAAL,CAAS21C,QAAT,EAAmBC,MAAnB,CAAX;AAAA,UAAuC9uD,KAAK,GAAGvJ,IAAI,CAAC4kB,GAAL,CAASwzC,QAAT,EAAmBC,MAAnB,CAA/C;;AACA,WAAK,IAAI7xC,IAAI,GAAGxmB,IAAI,CAACyiB,GAAL,CAASzD,KAAK,CAACwH,IAAf,EAAqBlE,GAAG,CAACkE,IAAzB,CAAX,EAA2C1c,GAAG,GAAG9J,IAAI,CAACyiB,GAAL,CAASwE,EAAE,CAAC2Q,QAAH,EAAT,EAAwB53B,IAAI,CAAC4kB,GAAL,CAAS5F,KAAK,CAACwH,IAAf,EAAqBlE,GAAG,CAACkE,IAAzB,CAAxB,CAAtD,EACKA,IAAI,IAAI1c,GADb,EACkB0c,IAAI,EADtB,EAC0B;AACxB,YAAIpkB,IAAI,GAAG4qB,OAAO,CAACC,GAAD,EAAMzG,IAAN,CAAP,CAAmBpkB,IAA9B;AAAA,YAAoCivD,OAAO,GAAGjvC,UAAU,CAAChgB,IAAD,EAAOiH,IAAP,EAAa2X,OAAb,CAAxD;AACA,YAAI3X,IAAI,IAAIE,KAAZ,EACEwhC,MAAM,CAAC3jC,IAAP,CAAY,IAAIu1C,KAAJ,CAAUpuB,GAAG,CAAC/H,IAAD,EAAO6qC,OAAP,CAAb,EAA8B9iC,GAAG,CAAC/H,IAAD,EAAO6qC,OAAP,CAAjC,CAAZ,EADF,KAEK,IAAIjvD,IAAI,CAAClL,MAAL,GAAcm6D,OAAlB,EACHtmB,MAAM,CAAC3jC,IAAP,CAAY,IAAIu1C,KAAJ,CAAUpuB,GAAG,CAAC/H,IAAD,EAAO6qC,OAAP,CAAb,EAA8B9iC,GAAG,CAAC/H,IAAD,EAAOpE,UAAU,CAAChgB,IAAD,EAAOmH,KAAP,EAAcyX,OAAd,CAAjB,CAAjC,CAAZ;AACH;;AACD,UAAI,CAAC+pB,MAAM,CAAC7zC,MAAZ,EAAoB6zC,MAAM,CAAC3jC,IAAP,CAAY,IAAIu1C,KAAJ,CAAU39B,KAAV,EAAiBA,KAAjB,CAAZ;AACpB8iC,MAAAA,YAAY,CAAC70B,GAAD,EAAM4vB,kBAAkB,CAAC51B,EAAD,EAAKgxC,QAAQ,CAACltB,MAAT,CAAgB/nC,KAAhB,CAAsB,CAAtB,EAAyBg1D,QAAzB,EAAmCpwD,MAAnC,CAA0CmjC,MAA1C,CAAL,EAAwDitB,QAAxD,CAAxB,EACC;AAAC5gE,QAAAA,MAAM,EAAE,QAAT;AAAmB6qB,QAAAA,MAAM,EAAE;AAA3B,OADD,CAAZ;AAEAgF,MAAAA,EAAE,CAACqoB,cAAH,CAAkBhtB,GAAlB;AACD,KAjBD,MAiBO;AACL,UAAIg2C,QAAQ,GAAGP,QAAf;AACA,UAAIj5C,KAAK,GAAG+4C,YAAY,CAAC5wC,EAAD,EAAK3E,GAAL,EAAU40C,QAAQ,CAACH,IAAnB,CAAxB;AACA,UAAIvuB,MAAM,GAAG8vB,QAAQ,CAAC9vB,MAAtB;AAAA,UAA8B9vC,IAA9B;;AACA,UAAI81B,GAAG,CAAC1P,KAAK,CAAC0pB,MAAP,EAAeA,MAAf,CAAH,GAA4B,CAAhC,EAAmC;AACjC9vC,QAAAA,IAAI,GAAGomB,KAAK,CAACpmB,IAAb;AACA8vC,QAAAA,MAAM,GAAG5Z,MAAM,CAAC0pC,QAAQ,CAAC/hD,IAAT,EAAD,EAAkBuI,KAAK,CAAC0pB,MAAxB,CAAf;AACD,OAHD,MAGO;AACL9vC,QAAAA,IAAI,GAAGomB,KAAK,CAAC0pB,MAAb;AACAA,QAAAA,MAAM,GAAG7Z,MAAM,CAAC2pC,QAAQ,CAACl0C,EAAT,EAAD,EAAgBtF,KAAK,CAACpmB,IAAtB,CAAf;AACD;;AACD,UAAIqyC,MAAM,GAAGktB,QAAQ,CAACltB,MAAT,CAAgB/nC,KAAhB,CAAsB,CAAtB,CAAb;AACA+nC,MAAAA,MAAM,CAACitB,QAAD,CAAN,GAAmBO,YAAY,CAACtxC,EAAD,EAAK,IAAI01B,KAAJ,CAAU7tB,OAAO,CAAC7B,GAAD,EAAMub,MAAN,CAAjB,EAAgC9vC,IAAhC,CAAL,CAA/B;AACAopD,MAAAA,YAAY,CAAC70B,GAAD,EAAM4vB,kBAAkB,CAAC51B,EAAD,EAAK8jB,MAAL,EAAaitB,QAAb,CAAxB,EAAgD91C,SAAhD,CAAZ;AACD;AACF;;AAED,MAAIs2C,UAAU,GAAG32D,OAAO,CAAC2+B,OAAR,CAAgBhlC,qBAAhB,EAAjB,CApFoD;AAsFpD;AACA;AACA;;AACA,MAAIi9D,OAAO,GAAG,CAAd;;AAEA,WAASngB,MAAT,CAAgB7oC,CAAhB,EAAmB;AACjB,QAAIipD,QAAQ,GAAG,EAAED,OAAjB;AACA,QAAIxzC,GAAG,GAAGgkB,YAAY,CAAChiB,EAAD,EAAKxX,CAAL,EAAQ,IAAR,EAAcynD,QAAQ,CAACH,IAAT,IAAiB,WAA/B,CAAtB;AACA,QAAI,CAAC9xC,GAAL,EAAU;;AACV,QAAIuJ,GAAG,CAACvJ,GAAD,EAAMizC,OAAN,CAAH,IAAqB,CAAzB,EAA4B;AAC1BjxC,MAAAA,EAAE,CAACO,KAAH,CAAStsB,KAAT,GAAiB0kB,SAAS,EAA1B;AACAu4C,MAAAA,QAAQ,CAAClzC,GAAD,CAAR;AACA,UAAI0yB,OAAO,GAAG9I,YAAY,CAAChtC,OAAD,EAAUorB,GAAV,CAA1B;AACA,UAAIhI,GAAG,CAACuB,IAAJ,IAAYmxB,OAAO,CAACvzB,EAApB,IAA0Ba,GAAG,CAACuB,IAAJ,GAAWmxB,OAAO,CAACphC,IAAjD,EACE5P,UAAU,CAACkwC,SAAS,CAAC5vB,EAAD,EAAK,MAAM;AAAC,YAAIwxC,OAAO,IAAIC,QAAf,EAAyBpgB,MAAM,CAAC7oC,CAAD,CAAN;AAAU,OAA/C,CAAV,EAA4D,GAA5D,CAAV;AACH,KAND,MAMO;AACL,UAAIs3B,OAAO,GAAGt3B,CAAC,CAAC45B,OAAF,GAAYmvB,UAAU,CAACpgD,GAAvB,GAA6B,CAAC,EAA9B,GAAmC3I,CAAC,CAAC45B,OAAF,GAAYmvB,UAAU,CAACl2B,MAAvB,GAAgC,EAAhC,GAAqC,CAAtF;AACA,UAAIyE,OAAJ,EAAapgC,UAAU,CAACkwC,SAAS,CAAC5vB,EAAD,EAAK,MAAM;AAC1C,YAAIwxC,OAAO,IAAIC,QAAf,EAAyB;AACzB72D,QAAAA,OAAO,CAAC4/B,QAAR,CAAiBpnC,SAAjB,IAA8B0sC,OAA9B;AACAuR,QAAAA,MAAM,CAAC7oC,CAAD,CAAN;AACD,OAJgC,CAAV,EAInB,EAJmB,CAAV;AAKd;AACF;;AAED,WAAS2vC,IAAT,CAAc3vC,CAAd,EAAiB;AACfwX,IAAAA,EAAE,CAAC+D,KAAH,CAAS0rC,aAAT,GAAyB,KAAzB;AACA+B,IAAAA,OAAO,GAAG/8B,QAAV,CAFe;AAIf;AACA;;AACA,QAAIjsB,CAAJ,EAAO;AACLoY,MAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AACA5N,MAAAA,OAAO,CAACq5B,KAAR,CAAchgC,KAAd;AACD;;AACD2rB,IAAAA,GAAG,CAAChlB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,WAAhC,EAA6CsvC,IAA7C,CAAH;AACA9xC,IAAAA,GAAG,CAAChlB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,SAAhC,EAA2C/f,EAA3C,CAAH;AACA2jB,IAAAA,GAAG,CAACuzB,OAAJ,CAAYZ,aAAZ,GAA4B,IAA5B;AACD;;AAED,MAAI+Y,IAAI,GAAG9hB,SAAS,CAAC5vB,EAAD,EAAKxX,CAAC,IAAI;AAC5B,QAAIA,CAAC,CAACmpD,OAAF,KAAc,CAAd,IAAmB,CAAC3wC,QAAQ,CAACxY,CAAD,CAAhC,EAAqC2vC,IAAI,CAAC3vC,CAAD,CAAJ,CAArC,KACK6oC,MAAM,CAAC7oC,CAAD,CAAN;AACN,GAHmB,CAApB;AAIA,MAAInG,EAAE,GAAGutC,SAAS,CAAC5vB,EAAD,EAAKm4B,IAAL,CAAlB;AACAn4B,EAAAA,EAAE,CAAC+D,KAAH,CAAS0rC,aAAT,GAAyBptD,EAAzB;AACAod,EAAAA,EAAE,CAAC7kB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,WAAhC,EAA6CsvC,IAA7C,CAAF;AACAjyC,EAAAA,EAAE,CAAC7kB,OAAO,CAAC2+B,OAAR,CAAgBnX,aAAjB,EAAgC,SAAhC,EAA2C/f,EAA3C,CAAF;AACD;AAGD;;;AACA,SAASivD,YAAT,CAAsBtxC,EAAtB,EAA0BnI,KAA1B,EAAiC;AAC/B,MAAI;AAAC0pB,IAAAA,MAAD;AAAS9vC,IAAAA;AAAT,MAAiBomB,KAArB;AAAA,MAA4B+5C,UAAU,GAAG7rC,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASub,MAAM,CAAChiB,IAAhB,CAAhD;AACA,MAAIgI,GAAG,CAACga,MAAD,EAAS9vC,IAAT,CAAH,IAAqB,CAArB,IAA0B8vC,MAAM,CAACxjB,MAAP,IAAiBtsB,IAAI,CAACssB,MAApD,EAA4D,OAAOlG,KAAP;AAC5D,MAAI2F,KAAK,GAAG8B,QAAQ,CAACsyC,UAAD,CAApB;AACA,MAAI,CAACp0C,KAAL,EAAY,OAAO3F,KAAP;AACZ,MAAI1b,KAAK,GAAG2hB,aAAa,CAACN,KAAD,EAAQ+jB,MAAM,CAAC/kB,EAAf,EAAmB+kB,MAAM,CAACxjB,MAA1B,CAAzB;AAAA,MAA4DL,IAAI,GAAGF,KAAK,CAACrhB,KAAD,CAAxE;AACA,MAAIuhB,IAAI,CAACpO,IAAL,IAAaiyB,MAAM,CAAC/kB,EAApB,IAA0BkB,IAAI,CAACP,EAAL,IAAWokB,MAAM,CAAC/kB,EAAhD,EAAoD,OAAO3E,KAAP;AACpD,MAAIg6C,QAAQ,GAAG11D,KAAK,IAAKuhB,IAAI,CAACpO,IAAL,IAAaiyB,MAAM,CAAC/kB,EAArB,KAA6BkB,IAAI,CAACE,KAAL,IAAc,CAA3C,IAAgD,CAAhD,GAAoD,CAAxD,CAApB;AACA,MAAIi0C,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAIr0C,KAAK,CAACvtB,MAAvC,EAA+C,OAAO4nB,KAAP,CARhB;AAW/B;;AACA,MAAI6sB,QAAJ;;AACA,MAAIjzC,IAAI,CAAC8tB,IAAL,IAAagiB,MAAM,CAAChiB,IAAxB,EAA8B;AAC5BmlB,IAAAA,QAAQ,GAAG,CAACjzC,IAAI,CAAC8tB,IAAL,GAAYgiB,MAAM,CAAChiB,IAApB,KAA6BS,EAAE,CAACgG,GAAH,CAAOhoB,SAAP,IAAoB,KAApB,GAA4B,CAA5B,GAAgC,CAAC,CAA9D,IAAmE,CAA9E;AACD,GAFD,MAEO;AACL,QAAI8zD,SAAS,GAAGh0C,aAAa,CAACN,KAAD,EAAQ/rB,IAAI,CAAC+qB,EAAb,EAAiB/qB,IAAI,CAACssB,MAAtB,CAA7B;AACA,QAAI9M,GAAG,GAAG6gD,SAAS,GAAG31D,KAAZ,IAAqB,CAAC1K,IAAI,CAAC+qB,EAAL,GAAU+kB,MAAM,CAAC/kB,EAAlB,KAAyBkB,IAAI,CAACE,KAAL,IAAc,CAAd,GAAkB,CAAC,CAAnB,GAAuB,CAAhD,CAA/B;AACA,QAAIk0C,SAAS,IAAID,QAAQ,GAAG,CAAxB,IAA6BC,SAAS,IAAID,QAA9C,EACEntB,QAAQ,GAAGzzB,GAAG,GAAG,CAAjB,CADF,KAGEyzB,QAAQ,GAAGzzB,GAAG,GAAG,CAAjB;AACH;;AAED,MAAI8gD,OAAO,GAAGv0C,KAAK,CAACq0C,QAAQ,IAAIntB,QAAQ,GAAG,CAAC,CAAJ,GAAQ,CAApB,CAAT,CAAnB;AACA,MAAIp1B,IAAI,GAAGo1B,QAAQ,KAAKqtB,OAAO,CAACn0C,KAAR,IAAiB,CAAtB,CAAnB;AACA,MAAIpB,EAAE,GAAGlN,IAAI,GAAGyiD,OAAO,CAACziD,IAAX,GAAkByiD,OAAO,CAAC50C,EAAvC;AAAA,MAA2CY,MAAM,GAAGzO,IAAI,GAAG,OAAH,GAAa,QAArE;AACA,SAAOiyB,MAAM,CAAC/kB,EAAP,IAAaA,EAAb,IAAmB+kB,MAAM,CAACxjB,MAAP,IAAiBA,MAApC,GAA6ClG,KAA7C,GAAqD,IAAI69B,KAAJ,CAAU,IAAIpuB,GAAJ,CAAQia,MAAM,CAAChiB,IAAf,EAAqB/C,EAArB,EAAyBuB,MAAzB,CAAV,EAA4CtsB,IAA5C,CAA5D;AACD;AAID;;;AACA,SAASugE,WAAT,CAAqBhyC,EAArB,EAAyBxX,CAAzB,EAA4Bvc,IAA5B,EAAkCgmE,OAAlC,EAA2C;AACzC,MAAIC,EAAJ,EAAQC,EAAR;;AACA,MAAI3pD,CAAC,CAAC4pD,OAAN,EAAe;AACbF,IAAAA,EAAE,GAAG1pD,CAAC,CAAC4pD,OAAF,CAAU,CAAV,EAAajwB,OAAlB;AACAgwB,IAAAA,EAAE,GAAG3pD,CAAC,CAAC4pD,OAAF,CAAU,CAAV,EAAahwB,OAAlB;AACD,GAHD,MAGO;AACL,QAAI;AAAE8vB,MAAAA,EAAE,GAAG1pD,CAAC,CAAC25B,OAAP;AAAgBgwB,MAAAA,EAAE,GAAG3pD,CAAC,CAAC45B,OAAP;AAAgB,KAAtC,CACA,OAAM55B,CAAN,EAAS;AAAE,aAAO,KAAP;AAAc;AAC1B;;AACD,MAAI0pD,EAAE,IAAIn5D,IAAI,CAACC,KAAL,CAAWgnB,EAAE,CAACplB,OAAH,CAAW0+B,OAAX,CAAmB/kC,qBAAnB,GAA2C+N,KAAtD,CAAV,EAAwE,OAAO,KAAP;AACxE,MAAI2vD,OAAJ,EAAarxC,gBAAgB,CAACpY,CAAD,CAAhB;AAEb,MAAI5N,OAAO,GAAGolB,EAAE,CAACplB,OAAjB;AACA,MAAIy3D,OAAO,GAAGz3D,OAAO,CAAC4sC,OAAR,CAAgBjzC,qBAAhB,EAAd;AAEA,MAAI49D,EAAE,GAAGE,OAAO,CAACh3B,MAAb,IAAuB,CAAC5a,UAAU,CAACT,EAAD,EAAK/zB,IAAL,CAAtC,EAAkD,OAAOk0B,kBAAkB,CAAC3X,CAAD,CAAzB;AAClD2pD,EAAAA,EAAE,IAAIE,OAAO,CAAClhD,GAAR,GAAcvW,OAAO,CAACikC,UAA5B;;AAEA,OAAK,IAAI79B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgf,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,CAAuBhoC,MAA3C,EAAmD,EAAE+Q,CAArD,EAAwD;AACtD,QAAIsxD,CAAC,GAAG13D,OAAO,CAAC0+B,OAAR,CAAgBliB,UAAhB,CAA2BpW,CAA3B,CAAR;;AACA,QAAIsxD,CAAC,IAAIA,CAAC,CAAC/9D,qBAAF,GAA0B+N,KAA1B,IAAmC4vD,EAA5C,EAAgD;AAC9C,UAAI3yC,IAAI,GAAGuH,YAAY,CAAC9G,EAAE,CAACgG,GAAJ,EAASmsC,EAAT,CAAvB;AACA,UAAI96B,MAAM,GAAGrX,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,CAAuBj3B,CAAvB,CAAb;AACA8e,MAAAA,MAAM,CAACE,EAAD,EAAK/zB,IAAL,EAAW+zB,EAAX,EAAeT,IAAf,EAAqB8X,MAAM,CAACrgB,SAA5B,EAAuCxO,CAAvC,CAAN;AACA,aAAO2X,kBAAkB,CAAC3X,CAAD,CAAzB;AACD;AACF;AACF;;AAED,AAAO,SAAS+mD,aAAT,CAAuBvvC,EAAvB,EAA2BxX,CAA3B,EAA8B;AACnC,SAAOwpD,WAAW,CAAChyC,EAAD,EAAKxX,CAAL,EAAQ,aAAR,EAAuB,IAAvB,CAAlB;AACD;AAID;AACA;AACA;;AACA,AAAO,SAASonD,aAAT,CAAuB5vC,EAAvB,EAA2BxX,CAA3B,EAA8B;AACnC,MAAIgxB,aAAa,CAACxZ,EAAE,CAACplB,OAAJ,EAAa4N,CAAb,CAAb,IAAgC+pD,mBAAmB,CAACvyC,EAAD,EAAKxX,CAAL,CAAvD,EAAgE;AAChE,MAAIuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,EAAQ,aAAR,CAAlB,EAA0C;AAC1C,MAAI,CAACkO,iBAAL,EAAwBsJ,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiB27B,aAAjB,CAA+BpnD,CAA/B;AACzB;;AAED,SAAS+pD,mBAAT,CAA6BvyC,EAA7B,EAAiCxX,CAAjC,EAAoC;AAClC,MAAI,CAACiY,UAAU,CAACT,EAAD,EAAK,mBAAL,CAAf,EAA0C,OAAO,KAAP;AAC1C,SAAOgyC,WAAW,CAAChyC,EAAD,EAAKxX,CAAL,EAAQ,mBAAR,EAA6B,KAA7B,CAAlB;AACD;;AC9ZM,SAASgqD,YAAT,CAAsBxyC,EAAtB,EAA0B;AAC/BA,EAAAA,EAAE,CAACplB,OAAH,CAAW2+B,OAAX,CAAmBviB,SAAnB,GAA+BgJ,EAAE,CAACplB,OAAH,CAAW2+B,OAAX,CAAmBviB,SAAnB,CAA6BnoB,OAA7B,CAAqC,cAArC,EAAqD,EAArD,IAC7BmxB,EAAE,CAAC5S,OAAH,CAAWwB,KAAX,CAAiB/f,OAAjB,CAAyB,YAAzB,EAAuC,QAAvC,CADF;AAEAmvC,EAAAA,WAAW,CAAChe,EAAD,CAAX;AACD;;ACYM,IAAIyyC,IAAI,GAAG;AAACzyD,EAAAA,QAAQ,EAAE,YAAU;AAAC,WAAO,iBAAP;AAAyB;AAA/C,CAAX;AAEP,AAAO,IAAI0yD,QAAQ,GAAG,EAAf;AACP,AAAO,IAAIC,cAAc,GAAG,EAArB;AAEP,AAAO,SAASC,aAAT,CAAuBjO,UAAvB,EAAmC;AACxC,MAAIgO,cAAc,GAAGhO,UAAU,CAACgO,cAAhC;;AAEA,WAASz3D,MAAT,CAAgB+O,IAAhB,EAAsB4oD,KAAtB,EAA6BtU,MAA7B,EAAqCuU,SAArC,EAAgD;AAC9CnO,IAAAA,UAAU,CAAC+N,QAAX,CAAoBzoD,IAApB,IAA4B4oD,KAA5B;AACA,QAAItU,MAAJ,EAAYoU,cAAc,CAAC1oD,IAAD,CAAd,GACV6oD,SAAS,GAAG,CAAC9yC,EAAD,EAAKiE,GAAL,EAAU8I,GAAV,KAAkB;AAAC,UAAIA,GAAG,IAAI0lC,IAAX,EAAiBlU,MAAM,CAACv+B,EAAD,EAAKiE,GAAL,EAAU8I,GAAV,CAAN;AAAqB,KAA5D,GAA+DwxB,MAD9D;AAEb;;AAEDoG,EAAAA,UAAU,CAACoO,YAAX,GAA0B73D,MAA1B,CATwC;;AAYxCypD,EAAAA,UAAU,CAAC8N,IAAX,GAAkBA,IAAlB,CAZwC;AAexC;;AACAv3D,EAAAA,MAAM,CAAC,OAAD,EAAU,EAAV,EAAc,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAAC2hC,QAAH,CAAY19B,GAAZ,CAA3B,EAA6C,IAA7C,CAAN;AACA/oB,EAAAA,MAAM,CAAC,MAAD,EAAS,IAAT,EAAe,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AAChCjE,IAAAA,EAAE,CAACgG,GAAH,CAAO2wB,UAAP,GAAoB1yB,GAApB;AACAyyB,IAAAA,QAAQ,CAAC12B,EAAD,CAAR;AACD,GAHK,EAGH,IAHG,CAAN;AAKA9kB,EAAAA,MAAM,CAAC,YAAD,EAAe,CAAf,EAAkBw7C,QAAlB,EAA4B,IAA5B,CAAN;AACAx7C,EAAAA,MAAM,CAAC,gBAAD,EAAmB,KAAnB,CAAN;AACAA,EAAAA,MAAM,CAAC,aAAD,EAAgB,IAAhB,CAAN;AACAA,EAAAA,MAAM,CAAC,SAAD,EAAY,CAAZ,EAAe8kB,EAAE,IAAI;AACzB42B,IAAAA,cAAc,CAAC52B,EAAD,CAAd;AACAge,IAAAA,WAAW,CAAChe,EAAD,CAAX;AACAuiB,IAAAA,SAAS,CAACviB,EAAD,CAAT;AACD,GAJK,EAIH,IAJG,CAAN;AAMA9kB,EAAAA,MAAM,CAAC,eAAD,EAAkB,IAAlB,EAAwB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AACzCjE,IAAAA,EAAE,CAACgG,GAAH,CAAOu7B,OAAP,GAAiBt9B,GAAjB;AACA,QAAI,CAACA,GAAL,EAAU;AACV,QAAI+uC,SAAS,GAAG,EAAhB;AAAA,QAAoBpsC,MAAM,GAAG5G,EAAE,CAACgG,GAAH,CAAOC,KAApC;AACAjG,IAAAA,EAAE,CAACgG,GAAH,CAAOQ,IAAP,CAAYjH,IAAI,IAAI;AAClB,WAAK,IAAIlE,GAAG,GAAG,CAAf,IAAoB;AAClB,YAAIoC,KAAK,GAAG8B,IAAI,CAACpkB,IAAL,CAAU8E,OAAV,CAAkBgkB,GAAlB,EAAuB5I,GAAvB,CAAZ;AACA,YAAIoC,KAAK,IAAI,CAAC,CAAd,EAAiB;AACjBpC,QAAAA,GAAG,GAAGoC,KAAK,GAAGwG,GAAG,CAACh0B,MAAlB;AACA+iE,QAAAA,SAAS,CAAC7yD,IAAV,CAAemnB,GAAG,CAACV,MAAD,EAASnJ,KAAT,CAAlB;AACD;;AACDmJ,MAAAA,MAAM;AACP,KARD;;AASA,SAAK,IAAI5lB,CAAC,GAAGgyD,SAAS,CAAC/iE,MAAV,GAAmB,CAAhC,EAAmC+Q,CAAC,IAAI,CAAxC,EAA2CA,CAAC,EAA5C,EACEg9C,YAAY,CAACh+B,EAAE,CAACgG,GAAJ,EAAS/B,GAAT,EAAc+uC,SAAS,CAAChyD,CAAD,CAAvB,EAA4BsmB,GAAG,CAAC0rC,SAAS,CAAChyD,CAAD,CAAT,CAAaue,IAAd,EAAoByzC,SAAS,CAAChyD,CAAD,CAAT,CAAawb,EAAb,GAAkByH,GAAG,CAACh0B,MAA1C,CAA/B,CAAZ;AACH,GAfK,CAAN;AAgBAiL,EAAAA,MAAM,CAAC,cAAD,EAAiB,4FAAjB,EAA+G,CAAC8kB,EAAD,EAAKiE,GAAL,EAAU8I,GAAV,KAAkB;AACrI/M,IAAAA,EAAE,CAAC+D,KAAH,CAASqP,YAAT,GAAwB,IAAI1iB,MAAJ,CAAWuT,GAAG,CAACtsB,MAAJ,IAAcssB,GAAG,CAACtT,IAAJ,CAAS,IAAT,IAAiB,EAAjB,GAAsB,KAApC,CAAX,EAAuD,GAAvD,CAAxB;AACA,QAAIoc,GAAG,IAAI0lC,IAAX,EAAiBzyC,EAAE,CAACizC,OAAH;AAClB,GAHK,CAAN;AAIA/3D,EAAAA,MAAM,CAAC,wBAAD,EAA2B63B,6BAA3B,EAA0D/S,EAAE,IAAIA,EAAE,CAACizC,OAAH,EAAhE,EAA8E,IAA9E,CAAN;AACA/3D,EAAAA,MAAM,CAAC,eAAD,EAAkB,IAAlB,CAAN;AACAA,EAAAA,MAAM,CAAC,YAAD,EAAekb,MAAM,GAAG,iBAAH,GAAuB,UAA5C,EAAwD,MAAM;AAClE,UAAM,IAAIhc,KAAJ,CAAU,yDAAV,CAAN,CADkE;AAEnE,GAFK,EAEH,IAFG,CAAN;AAGAc,EAAAA,MAAM,CAAC,YAAD,EAAe,KAAf,EAAsB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAACkzC,aAAH,GAAmBC,UAAnB,GAAgClvC,GAAnE,EAAwE,IAAxE,CAAN;AACA/oB,EAAAA,MAAM,CAAC,aAAD,EAAgB,KAAhB,EAAuB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAACkzC,aAAH,GAAmBE,WAAnB,GAAiCnvC,GAArE,EAA0E,IAA1E,CAAN;AACA/oB,EAAAA,MAAM,CAAC,gBAAD,EAAmB,KAAnB,EAA0B,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAACkzC,aAAH,GAAmBpoD,cAAnB,GAAoCmZ,GAA3E,EAAgF,IAAhF,CAAN;AACA/oB,EAAAA,MAAM,CAAC,iBAAD,EAAoB,CAACqb,OAArB,CAAN;AACArb,EAAAA,MAAM,CAAC,uBAAD,EAA0B,IAA1B,CAAN;AAEAA,EAAAA,MAAM,CAAC,OAAD,EAAU,SAAV,EAAqB8kB,EAAE,IAAI;AAC/BwyC,IAAAA,YAAY,CAACxyC,EAAD,CAAZ;AACA2zB,IAAAA,aAAa,CAAC3zB,EAAD,CAAb;AACD,GAHK,EAGH,IAHG,CAAN;AAIA9kB,EAAAA,MAAM,CAAC,QAAD,EAAW,SAAX,EAAsB,CAAC8kB,EAAD,EAAKiE,GAAL,EAAU8I,GAAV,KAAkB;AAC5C,QAAInI,IAAI,GAAGyjC,SAAS,CAACpkC,GAAD,CAApB;AACA,QAAIpF,IAAI,GAAGkO,GAAG,IAAI0lC,IAAP,IAAepK,SAAS,CAACt7B,GAAD,CAAnC;AACA,QAAIlO,IAAI,IAAIA,IAAI,CAACw0C,MAAjB,EAAyBx0C,IAAI,CAACw0C,MAAL,CAAYrzC,EAAZ,EAAgB4E,IAAhB;AACzB,QAAIA,IAAI,CAAC0uC,MAAT,EAAiB1uC,IAAI,CAAC0uC,MAAL,CAAYtzC,EAAZ,EAAgBnB,IAAI,IAAI,IAAxB;AAClB,GALK,CAAN;AAMA3jB,EAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAA,EAAAA,MAAM,CAAC,gBAAD,EAAmB,IAAnB,CAAN;AAEAA,EAAAA,MAAM,CAAC,cAAD,EAAiB,KAAjB,EAAwBq4D,eAAxB,EAAyC,IAAzC,CAAN;AACAr4D,EAAAA,MAAM,CAAC,SAAD,EAAY,EAAZ,EAAgB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AACjCjE,IAAAA,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,GAAyBqb,UAAU,CAACrvB,GAAD,EAAMjE,EAAE,CAAC5S,OAAH,CAAWwqB,WAAjB,CAAnC;AACA+b,IAAAA,aAAa,CAAC3zB,EAAD,CAAb;AACD,GAHK,EAGH,IAHG,CAAN;AAIA9kB,EAAAA,MAAM,CAAC,aAAD,EAAgB,IAAhB,EAAsB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AACvCjE,IAAAA,EAAE,CAACplB,OAAH,CAAW0+B,OAAX,CAAmBlrC,KAAnB,CAAyBgU,IAAzB,GAAgC6hB,GAAG,GAAGyd,oBAAoB,CAAC1hB,EAAE,CAACplB,OAAJ,CAApB,GAAmC,IAAtC,GAA6C,GAAhF;AACAolB,IAAAA,EAAE,CAACizC,OAAH;AACD,GAHK,EAGH,IAHG,CAAN;AAIA/3D,EAAAA,MAAM,CAAC,4BAAD,EAA+B,KAA/B,EAAsC8kB,EAAE,IAAI2sB,gBAAgB,CAAC3sB,EAAD,CAA5D,EAAkE,IAAlE,CAAN;AACA9kB,EAAAA,MAAM,CAAC,gBAAD,EAAmB,QAAnB,EAA6B8kB,EAAE,IAAI;AACvCutB,IAAAA,cAAc,CAACvtB,EAAD,CAAd;AACA2sB,IAAAA,gBAAgB,CAAC3sB,EAAD,CAAhB;AACAA,IAAAA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsBJ,YAAtB,CAAmCtqB,EAAE,CAACgG,GAAH,CAAO5yB,SAA1C;AACA4sB,IAAAA,EAAE,CAACplB,OAAH,CAAW8vC,UAAX,CAAsB1B,aAAtB,CAAoChpB,EAAE,CAACgG,GAAH,CAAO1U,UAA3C;AACD,GALK,EAKH,IALG,CAAN;AAMApW,EAAAA,MAAM,CAAC,aAAD,EAAgB,KAAhB,EAAuB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AACxCjE,IAAAA,EAAE,CAACplB,OAAH,CAAWq9B,WAAX,GAAyBqb,UAAU,CAACtzB,EAAE,CAAC5S,OAAH,CAAWksB,OAAZ,EAAqBrV,GAArB,CAAnC;AACA0vB,IAAAA,aAAa,CAAC3zB,EAAD,CAAb;AACD,GAHK,EAGH,IAHG,CAAN;AAIA9kB,EAAAA,MAAM,CAAC,iBAAD,EAAoB,CAApB,EAAuBy4C,aAAvB,EAAsC,IAAtC,CAAN;AACAz4C,EAAAA,MAAM,CAAC,qBAAD,EAAwBs4D,OAAO,IAAIA,OAAnC,EAA4C7f,aAA5C,EAA2D,IAA3D,CAAN;AACAz4C,EAAAA,MAAM,CAAC,yBAAD,EAA4B,KAA5B,EAAmCooC,eAAnC,EAAoD,IAApD,CAAN;AAEApoC,EAAAA,MAAM,CAAC,6BAAD,EAAgC,IAAhC,CAAN;AACAA,EAAAA,MAAM,CAAC,iBAAD,EAAoB,IAApB,CAAN;AACAA,EAAAA,MAAM,CAAC,wBAAD,EAA2B,IAA3B,CAAN;AACAA,EAAAA,MAAM,CAAC,oBAAD,EAAuB,KAAvB,CAAN;AAEAA,EAAAA,MAAM,CAAC,UAAD,EAAa,KAAb,EAAoB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AACrC,QAAIA,GAAG,IAAI,UAAX,EAAuB;AACrB6iB,MAAAA,MAAM,CAAC9mB,EAAD,CAAN;AACAA,MAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBw/B,IAAjB;AACD;;AACDzzC,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBy/B,eAAjB,CAAiCzvC,GAAjC;AACD,GANK,CAAN;AAQA/oB,EAAAA,MAAM,CAAC,mBAAD,EAAsB,IAAtB,EAA4B,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AAC7CA,IAAAA,GAAG,GAAIA,GAAG,KAAK,EAAT,GAAe,IAAf,GAAsBA,GAA5B;AACAjE,IAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiB0/B,wBAAjB,CAA0C1vC,GAA1C;AACD,GAHK,CAAN;AAKA/oB,EAAAA,MAAM,CAAC,cAAD,EAAiB,KAAjB,EAAwB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AAAC,QAAI,CAACA,GAAL,EAAUjE,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBpnB,KAAjB;AAAyB,GAAzE,EAA2E,IAA3E,CAAN;AACA3R,EAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,EAAmB04D,eAAnB,CAAN;AACA14D,EAAAA,MAAM,CAAC,oBAAD,EAAuB,IAAvB,CAAN;AAEAA,EAAAA,MAAM,CAAC,iBAAD,EAAoB,GAApB,CAAN;AACAA,EAAAA,MAAM,CAAC,oBAAD,EAAuB,CAAvB,CAAN;AACAA,EAAAA,MAAM,CAAC,cAAD,EAAiB,CAAjB,EAAoBooC,eAApB,EAAqC,IAArC,CAAN;AACApoC,EAAAA,MAAM,CAAC,2BAAD,EAA8B,IAA9B,EAAoCooC,eAApC,EAAqD,IAArD,CAAN;AACApoC,EAAAA,MAAM,CAAC,UAAD,EAAa,GAAb,CAAN;AACAA,EAAAA,MAAM,CAAC,WAAD,EAAc,GAAd,CAAN;AACAA,EAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,EAAuB07C,cAAvB,EAAuC,IAAvC,CAAN;AACA17C,EAAAA,MAAM,CAAC,cAAD,EAAiB,KAAjB,EAAwB07C,cAAxB,EAAwC,IAAxC,CAAN;AACA17C,EAAAA,MAAM,CAAC,cAAD,EAAiB,GAAjB,CAAN;AACAA,EAAAA,MAAM,CAAC,WAAD,EAAc,GAAd,EAAmB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAACgG,GAAH,CAAOuzB,OAAP,CAAelB,SAAf,GAA2Bp0B,GAA3D,CAAN;AACA/oB,EAAAA,MAAM,CAAC,mBAAD,EAAsB,IAAtB,CAAN;AACAA,EAAAA,MAAM,CAAC,gBAAD,EAAmB,EAAnB,EAAuB8kB,EAAE,IAAIA,EAAE,CAACizC,OAAH,EAA7B,EAA2C,IAA3C,CAAN;AACA/3D,EAAAA,MAAM,CAAC,oBAAD,EAAuB,KAAvB,EAA8B07C,cAA9B,EAA8C,IAA9C,CAAN;AACA17C,EAAAA,MAAM,CAAC,qBAAD,EAAwB,IAAxB,EAA8B,CAAC8kB,EAAD,EAAKiE,GAAL,KAAa;AAC/C,QAAI,CAACA,GAAL,EAAUjE,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiB4/B,aAAjB;AACX,GAFK,CAAN;AAIA34D,EAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,EAAmB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBw6B,QAAjB,GAA4BljB,QAA5B,GAAuCtnB,GAAG,IAAI,EAA9E,CAAN;AACA/oB,EAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAA,EAAAA,MAAM,CAAC,WAAD,EAAc,KAAd,EAAqB,CAAC8kB,EAAD,EAAKiE,GAAL,KAAajE,EAAE,CAACgG,GAAH,CAAOg/B,YAAP,CAAoB/gC,GAApB,CAAlC,EAA4D,IAA5D,CAAN;AACA/oB,EAAAA,MAAM,CAAC,SAAD,EAAY,IAAZ,CAAN;AACD;;AAED,SAAS04D,eAAT,CAAyB5zC,EAAzB,EAA6B7zB,KAA7B,EAAoC4gC,GAApC,EAAyC;AACvC,MAAI+mC,KAAK,GAAG/mC,GAAG,IAAIA,GAAG,IAAI0lC,IAA1B;;AACA,MAAI,CAACtmE,KAAD,IAAU,CAAC2nE,KAAf,EAAsB;AACpB,QAAIC,KAAK,GAAG/zC,EAAE,CAACplB,OAAH,CAAWo5D,aAAvB;AACA,QAAIthE,MAAM,GAAGvG,KAAK,GAAGszB,EAAH,GAAQG,GAA1B;AACAltB,IAAAA,MAAM,CAACstB,EAAE,CAACplB,OAAH,CAAW4/B,QAAZ,EAAsB,WAAtB,EAAmCu5B,KAAK,CAACh8C,KAAzC,CAAN;AACArlB,IAAAA,MAAM,CAACstB,EAAE,CAACplB,OAAH,CAAW4/B,QAAZ,EAAsB,WAAtB,EAAmCu5B,KAAK,CAAChyD,KAAzC,CAAN;AACArP,IAAAA,MAAM,CAACstB,EAAE,CAACplB,OAAH,CAAW4/B,QAAZ,EAAsB,UAAtB,EAAkCu5B,KAAK,CAACE,IAAxC,CAAN;AACAvhE,IAAAA,MAAM,CAACstB,EAAE,CAACplB,OAAH,CAAW4/B,QAAZ,EAAsB,WAAtB,EAAmCu5B,KAAK,CAACG,KAAzC,CAAN;AACAxhE,IAAAA,MAAM,CAACstB,EAAE,CAACplB,OAAH,CAAW4/B,QAAZ,EAAsB,MAAtB,EAA8Bu5B,KAAK,CAACI,IAApC,CAAN;AACD;AACF;;AAED,SAASZ,eAAT,CAAyBvzC,EAAzB,EAA6B;AAC3B,MAAIA,EAAE,CAAC5S,OAAH,CAAW4tB,YAAf,EAA6B;AAC3BliB,IAAAA,QAAQ,CAACkH,EAAE,CAACplB,OAAH,CAAW2+B,OAAZ,EAAqB,iBAArB,CAAR;AACAvZ,IAAAA,EAAE,CAACplB,OAAH,CAAW6+B,KAAX,CAAiBrrC,KAAjB,CAAuBs9C,QAAvB,GAAkC,EAAlC;AACA1rB,IAAAA,EAAE,CAACplB,OAAH,CAAWgqC,UAAX,GAAwB,IAAxB;AACD,GAJD,MAIO;AACL/tB,IAAAA,OAAO,CAACmJ,EAAE,CAACplB,OAAH,CAAW2+B,OAAZ,EAAqB,iBAArB,CAAP;AACArI,IAAAA,WAAW,CAAClR,EAAD,CAAX;AACD;;AACD8hB,EAAAA,mBAAmB,CAAC9hB,EAAD,CAAnB;AACAuiB,EAAAA,SAAS,CAACviB,EAAD,CAAT;AACAge,EAAAA,WAAW,CAAChe,EAAD,CAAX;AACAtgB,EAAAA,UAAU,CAAC,MAAMitC,gBAAgB,CAAC3sB,EAAD,CAAvB,EAA6B,GAA7B,CAAV;AACD;;ACvKD;;AAEA,AAAO,SAAS2kC,UAAT,CAAoB5nB,KAApB,EAA2B3vB,OAA3B,EAAoC;AACzC,MAAI,EAAE,gBAAgBu3C,UAAlB,CAAJ,EAAmC,OAAO,IAAIA,UAAJ,CAAe5nB,KAAf,EAAsB3vB,OAAtB,CAAP;AAEnC,OAAKA,OAAL,GAAeA,OAAO,GAAGA,OAAO,GAAGqM,OAAO,CAACrM,OAAD,CAAV,GAAsB,EAAtD,CAHyC;;AAKzCqM,EAAAA,OAAO,CAACi5C,QAAD,EAAWtlD,OAAX,EAAoB,KAApB,CAAP;AAEA,MAAI4Y,GAAG,GAAG5Y,OAAO,CAACjhB,KAAlB;AACA,MAAI,OAAO65B,GAAP,IAAc,QAAlB,EAA4BA,GAAG,GAAG,IAAIs7B,GAAJ,CAAQt7B,GAAR,EAAa5Y,OAAO,CAAC4V,IAArB,EAA2B,IAA3B,EAAiC5V,OAAO,CAACs0C,aAAzC,EAAwDt0C,OAAO,CAACpP,SAAhE,CAAN,CAA5B,KACK,IAAIoP,OAAO,CAAC4V,IAAZ,EAAkBgD,GAAG,CAAC2wB,UAAJ,GAAiBvpC,OAAO,CAAC4V,IAAzB;AACvB,OAAKgD,GAAL,GAAWA,GAAX;AAEA,MAAIiO,KAAK,GAAG,IAAI0wB,UAAU,CAACyP,WAAX,CAAuBhnD,OAAO,CAACinD,UAA/B,CAAJ,CAA+C,IAA/C,CAAZ;AACA,MAAIz5D,OAAO,GAAG,KAAKA,OAAL,GAAe,IAAIg5C,OAAJ,CAAY7W,KAAZ,EAAmB/W,GAAnB,EAAwBiO,KAAxB,EAA+B7mB,OAA/B,CAA7B;AACAxS,EAAAA,OAAO,CAAC2+B,OAAR,CAAgBorB,UAAhB,GAA6B,IAA7B;AACA6N,EAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,MAAIplD,OAAO,CAAC4tB,YAAZ,EACE,KAAKpgC,OAAL,CAAa2+B,OAAb,CAAqBviB,SAArB,IAAkC,kBAAlC;AACFu2B,EAAAA,cAAc,CAAC,IAAD,CAAd;AAEA,OAAKxpB,KAAL,GAAa;AACX8pC,IAAAA,OAAO,EAAE,EADE;AACG;AACd1kC,IAAAA,QAAQ,EAAE,EAFC;AAEG;AACdJ,IAAAA,OAAO,EAAE,CAHE;AAGG;AACdpP,IAAAA,SAAS,EAAE,KAJA;AAKXutB,IAAAA,iBAAiB,EAAE,KALR;AAMX97B,IAAAA,OAAO,EAAE,KANE;AAOX2xC,IAAAA,aAAa,EAAE,KAPJ;AAOW;AACtBuX,IAAAA,aAAa,EAAE,CAAC,CARL;AAQQC,IAAAA,WAAW,EAAE,CAAC,CARtB;AAQyB;AACpC9E,IAAAA,aAAa,EAAE,KATJ;AAUXtoB,IAAAA,YAAY,EAAE,KAVH;AAWX4I,IAAAA,SAAS,EAAE,IAAI11B,OAAJ,EAXA;AAWe;AAC1B6zC,IAAAA,MAAM,EAAE,IAZG;AAYI;AACf96B,IAAAA,YAAY,EAAE;AAbH,GAAb;AAgBA,MAAIhmB,OAAO,CAAConD,SAAR,IAAqB,CAACp+C,MAA1B,EAAkCxb,OAAO,CAACq5B,KAAR,CAAchgC,KAAd,GApCO;AAuCzC;;AACA,MAAIqhB,EAAE,IAAIC,UAAU,GAAG,EAAvB,EAA2B7V,UAAU,CAAC,MAAM,KAAK9E,OAAL,CAAaq5B,KAAb,CAAmBpnB,KAAnB,CAAyB,IAAzB,CAAP,EAAuC,EAAvC,CAAV;AAE3B4nD,EAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAtN,EAAAA,oBAAoB;AAEpBxZ,EAAAA,cAAc,CAAC,IAAD,CAAd;AACA,OAAKptB,KAAL,CAAWyb,WAAX,GAAyB,IAAzB;AACA+b,EAAAA,SAAS,CAAC,IAAD,EAAO/xB,GAAP,CAAT;AAEA,MAAK5Y,OAAO,CAAConD,SAAR,IAAqB,CAACp+C,MAAvB,IAAkC,KAAKywB,QAAL,EAAtC,EACEnnC,UAAU,CAAC,MAAM;AACf,QAAI,KAAKmnC,QAAL,MAAmB,CAAC,KAAK9iB,KAAL,CAAW3Y,OAAnC,EAA4C47B,OAAO,CAAC,IAAD,CAAP;AAC7C,GAFS,EAEP,EAFO,CAAV,CADF,KAKEF,MAAM,CAAC,IAAD,CAAN;;AAEF,OAAK,IAAI0Y,GAAT,IAAgBmT,cAAhB,EAAgC,IAAIA,cAAc,CAACvsD,cAAf,CAA8Bo5C,GAA9B,CAAJ,EAC9BmT,cAAc,CAACnT,GAAD,CAAd,CAAoB,IAApB,EAA0BpyC,OAAO,CAACoyC,GAAD,CAAjC,EAAwCiT,IAAxC;;AACF1gB,EAAAA,0BAA0B,CAAC,IAAD,CAA1B;AACA,MAAI3kC,OAAO,CAACsnD,UAAZ,EAAwBtnD,OAAO,CAACsnD,UAAR,CAAmB,IAAnB;;AACxB,OAAK,IAAI1zD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2zD,SAAS,CAAC1kE,MAA9B,EAAsC,EAAE+Q,CAAxC,EAA2C2zD,SAAS,CAAC3zD,CAAD,CAAT,CAAa,IAAb;;AAC3CktC,EAAAA,YAAY,CAAC,IAAD,CAAZ,CA7DyC;AA+DzC;;AACA,MAAIz4B,MAAM,IAAIrI,OAAO,CAAC4tB,YAAlB,IACAf,gBAAgB,CAACr/B,OAAO,CAAC4sC,OAAT,CAAhB,CAAkCotB,aAAlC,IAAmD,oBADvD,EAEEh6D,OAAO,CAAC4sC,OAAR,CAAgBp5C,KAAhB,CAAsBwmE,aAAtB,GAAsC,MAAtC;AACH;;AAGDjQ,UAAU,CAAC+N,QAAX,GAAsBA,QAAtB;;AAEA/N,UAAU,CAACgO,cAAX,GAA4BA,cAA5B;AAEA;AAGA,SAAS8B,qBAAT,CAA+Bz0C,EAA/B,EAAmC;AACjC,MAAImR,CAAC,GAAGnR,EAAE,CAACplB,OAAX;AACA6kB,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,WAAb,EAA0BoV,SAAS,CAAC5vB,EAAD,EAAKqvC,WAAL,CAAnC,CAAF,CAFiC;;AAIjC,MAAI/5C,EAAE,IAAIC,UAAU,GAAG,EAAvB,EACEkK,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,UAAb,EAAyBoV,SAAS,CAAC5vB,EAAD,EAAKxX,CAAC,IAAI;AAC5C,QAAIuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAlB,EAA2B;AAC3B,QAAI6S,GAAG,GAAG2mB,YAAY,CAAChiB,EAAD,EAAKxX,CAAL,CAAtB;AACA,QAAI,CAAC6S,GAAD,IAAQk0C,aAAa,CAACvvC,EAAD,EAAKxX,CAAL,CAArB,IAAgCgxB,aAAa,CAACxZ,EAAE,CAACplB,OAAJ,EAAa4N,CAAb,CAAjD,EAAkE;AAClEoY,IAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AACA,QAAIqsD,IAAI,GAAG70C,EAAE,CAAC6wC,UAAH,CAAcx1C,GAAd,CAAX;AACAu/B,IAAAA,eAAe,CAAC56B,EAAE,CAACgG,GAAJ,EAAS6uC,IAAI,CAACtzB,MAAd,EAAsBszB,IAAI,CAACpjE,IAA3B,CAAf;AACD,GAPmC,CAAlC,CAAF,CADF,KAUEguB,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,UAAb,EAAyBhyB,CAAC,IAAIuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAd,IAAyBoY,gBAAgB,CAACpY,CAAD,CAAvE,CAAF,CAd+B;AAgBjC;AACA;;AACAiX,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,aAAb,EAA4BhyB,CAAC,IAAIonD,aAAa,CAAC5vC,EAAD,EAAKxX,CAAL,CAA9C,CAAF;AACAiX,EAAAA,EAAE,CAAC0R,CAAC,CAAC8C,KAAF,CAAQw6B,QAAR,EAAD,EAAqB,aAArB,EAAoCjmD,CAAC,IAAI;AACzC,QAAI,CAAC2oB,CAAC,CAACqJ,QAAF,CAAWhiB,QAAX,CAAoBhQ,CAAC,CAACjN,MAAtB,CAAL,EAAoCq0D,aAAa,CAAC5vC,EAAD,EAAKxX,CAAL,CAAb;AACrC,GAFC,CAAF,CAnBiC;;AAwBjC,MAAIssD,aAAJ;AAAA,MAAmBC,SAAS,GAAG;AAAClyD,IAAAA,GAAG,EAAE;AAAN,GAA/B;;AACA,WAASmyD,WAAT,GAAuB;AACrB,QAAI7jC,CAAC,CAAC6iB,WAAN,EAAmB;AACjB8gB,MAAAA,aAAa,GAAGp1D,UAAU,CAAC,MAAMyxB,CAAC,CAAC6iB,WAAF,GAAgB,IAAvB,EAA6B,IAA7B,CAA1B;AACA+gB,MAAAA,SAAS,GAAG5jC,CAAC,CAAC6iB,WAAd;AACA+gB,MAAAA,SAAS,CAAClyD,GAAV,GAAgB,CAAC,IAAIhK,IAAJ,EAAjB;AACD;AACF;;AACD,WAASo8D,qBAAT,CAA+BzsD,CAA/B,EAAkC;AAChC,QAAIA,CAAC,CAAC4pD,OAAF,CAAUniE,MAAV,IAAoB,CAAxB,EAA2B,OAAO,KAAP;AAC3B,QAAIilE,KAAK,GAAG1sD,CAAC,CAAC4pD,OAAF,CAAU,CAAV,CAAZ;AACA,WAAO8C,KAAK,CAACC,OAAN,IAAiB,CAAjB,IAAsBD,KAAK,CAACE,OAAN,IAAiB,CAA9C;AACD;;AACD,WAASC,OAAT,CAAiBH,KAAjB,EAAwBv1B,KAAxB,EAA+B;AAC7B,QAAIA,KAAK,CAACv9B,IAAN,IAAc,IAAlB,EAAwB,OAAO,IAAP;AACxB,QAAIiyC,EAAE,GAAG1U,KAAK,CAACv9B,IAAN,GAAa8yD,KAAK,CAAC9yD,IAA5B;AAAA,QAAkCmyC,EAAE,GAAG5U,KAAK,CAACxuB,GAAN,GAAY+jD,KAAK,CAAC/jD,GAAzD;AACA,WAAOkjC,EAAE,GAAGA,EAAL,GAAUE,EAAE,GAAGA,EAAf,GAAoB,KAAK,EAAhC;AACD;;AACD90B,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,YAAb,EAA2BhyB,CAAC,IAAI;AAChC,QAAI,CAACuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAf,IAA0B,CAACysD,qBAAqB,CAACzsD,CAAD,CAAhD,IAAuD,CAAC+mD,aAAa,CAACvvC,EAAD,EAAKxX,CAAL,CAAzE,EAAkF;AAChF2oB,MAAAA,CAAC,CAAC8C,KAAF,CAAQy5B,YAAR;AACA/yC,MAAAA,YAAY,CAACm6C,aAAD,CAAZ;AACA,UAAI1F,GAAG,GAAG,CAAC,IAAIv2D,IAAJ,EAAX;AACAs4B,MAAAA,CAAC,CAAC6iB,WAAF,GAAgB;AAACj8B,QAAAA,KAAK,EAAEq3C,GAAR;AAAakB,QAAAA,KAAK,EAAE,KAApB;AACCzxC,QAAAA,IAAI,EAAEuwC,GAAG,GAAG2F,SAAS,CAAClyD,GAAhB,IAAuB,GAAvB,GAA6BkyD,SAA7B,GAAyC;AADhD,OAAhB;;AAEA,UAAIvsD,CAAC,CAAC4pD,OAAF,CAAUniE,MAAV,IAAoB,CAAxB,EAA2B;AACzBkhC,QAAAA,CAAC,CAAC6iB,WAAF,CAAc5xC,IAAd,GAAqBoG,CAAC,CAAC4pD,OAAF,CAAU,CAAV,EAAakD,KAAlC;AACAnkC,QAAAA,CAAC,CAAC6iB,WAAF,CAAc7iC,GAAd,GAAoB3I,CAAC,CAAC4pD,OAAF,CAAU,CAAV,EAAamD,KAAjC;AACD;AACF;AACF,GAZC,CAAF;AAaA91C,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,WAAb,EAA0B,MAAM;AAChC,QAAIrJ,CAAC,CAAC6iB,WAAN,EAAmB7iB,CAAC,CAAC6iB,WAAF,CAAcsc,KAAd,GAAsB,IAAtB;AACpB,GAFC,CAAF;AAGA7wC,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,UAAb,EAAyBhyB,CAAC,IAAI;AAC9B,QAAI0sD,KAAK,GAAG/jC,CAAC,CAAC6iB,WAAd;;AACA,QAAIkhB,KAAK,IAAI,CAAC17B,aAAa,CAACrI,CAAD,EAAI3oB,CAAJ,CAAvB,IAAiC0sD,KAAK,CAAC9yD,IAAN,IAAc,IAA/C,IACA,CAAC8yD,KAAK,CAAC5E,KADP,IACgB,IAAIz3D,IAAJ,KAAWq8D,KAAK,CAACn9C,KAAjB,GAAyB,GAD7C,EACkD;AAChD,UAAIsD,GAAG,GAAG2E,EAAE,CAACggB,UAAH,CAAc7O,CAAC,CAAC6iB,WAAhB,EAA6B,MAA7B,CAAV;AAAA,UAAgDn8B,KAAhD;AACA,UAAI,CAACq9C,KAAK,CAACr2C,IAAP,IAAew2C,OAAO,CAACH,KAAD,EAAQA,KAAK,CAACr2C,IAAd,CAA1B;AACEhH,QAAAA,KAAK,GAAG,IAAI69B,KAAJ,CAAUr6B,GAAV,EAAeA,GAAf,CAAR,CADF,KAEK,IAAI,CAAC65C,KAAK,CAACr2C,IAAN,CAAWA,IAAZ,IAAoBw2C,OAAO,CAACH,KAAD,EAAQA,KAAK,CAACr2C,IAAN,CAAWA,IAAnB,CAA/B;AACHhH,QAAAA,KAAK,GAAGmI,EAAE,CAAC6wC,UAAH,CAAcx1C,GAAd,CAAR,CADG;AAGHxD,QAAAA,KAAK,GAAG,IAAI69B,KAAJ,CAAUpuB,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAW,CAAX,CAAb,EAA4BsI,OAAO,CAAC7H,EAAE,CAACgG,GAAJ,EAASsB,GAAG,CAACjM,GAAG,CAACkE,IAAJ,GAAW,CAAZ,EAAe,CAAf,CAAZ,CAAnC,CAAR;AACFS,MAAAA,EAAE,CAAC66B,YAAH,CAAgBhjC,KAAK,CAAC0pB,MAAtB,EAA8B1pB,KAAK,CAACpmB,IAApC;AACAuuB,MAAAA,EAAE,CAAC/rB,KAAH;AACA2sB,MAAAA,gBAAgB,CAACpY,CAAD,CAAhB;AACD;;AACDwsD,IAAAA,WAAW;AACZ,GAhBC,CAAF;AAiBAv1C,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,aAAb,EAA4Bw6B,WAA5B,CAAF,CA3EiC;AA8EjC;;AACAv1C,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,QAAb,EAAuB,MAAM;AAC7B,QAAIrJ,CAAC,CAACqJ,QAAF,CAAWG,YAAf,EAA6B;AAC3BoO,MAAAA,eAAe,CAAC/oB,EAAD,EAAKmR,CAAC,CAACqJ,QAAF,CAAWpnC,SAAhB,CAAf;AACA41C,MAAAA,aAAa,CAAChpB,EAAD,EAAKmR,CAAC,CAACqJ,QAAF,CAAWlpB,UAAhB,EAA4B,IAA5B,CAAb;AACAwO,MAAAA,MAAM,CAACE,EAAD,EAAK,QAAL,EAAeA,EAAf,CAAN;AACD;AACF,GANC,CAAF,CA/EiC;;AAwFjCP,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,YAAb,EAA2BhyB,CAAC,IAAIssC,aAAa,CAAC90B,EAAD,EAAKxX,CAAL,CAA7C,CAAF;AACAiX,EAAAA,EAAE,CAAC0R,CAAC,CAACqJ,QAAH,EAAa,gBAAb,EAA+BhyB,CAAC,IAAIssC,aAAa,CAAC90B,EAAD,EAAKxX,CAAL,CAAjD,CAAF,CAzFiC;;AA4FjCiX,EAAAA,EAAE,CAAC0R,CAAC,CAACoI,OAAH,EAAY,QAAZ,EAAsB,MAAMpI,CAAC,CAACoI,OAAF,CAAUnmC,SAAV,GAAsB+9B,CAAC,CAACoI,OAAF,CAAUjoB,UAAV,GAAuB,CAAzE,CAAF;AAEA6f,EAAAA,CAAC,CAAC6iC,aAAF,GAAkB;AAChBjyD,IAAAA,KAAK,EAAEyG,CAAC,IAAI;AAAC,UAAI,CAACuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAnB,EAA4BsY,MAAM,CAACtY,CAAD,CAAN;AAAU,KADnC;AAEhByrD,IAAAA,IAAI,EAAEzrD,CAAC,IAAI;AAAC,UAAI,CAACuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAnB,EAA4B;AAAEm+C,QAAAA,UAAU,CAAC3mC,EAAD,EAAKxX,CAAL,CAAV;AAAmBsY,QAAAA,MAAM,CAACtY,CAAD,CAAN;AAAW;AAAC,KAFzD;AAGhBuP,IAAAA,KAAK,EAAEvP,CAAC,IAAI89C,WAAW,CAACtmC,EAAD,EAAKxX,CAAL,CAHP;AAIhB2rD,IAAAA,IAAI,EAAEvkB,SAAS,CAAC5vB,EAAD,EAAKmlC,MAAL,CAJC;AAKhB+O,IAAAA,KAAK,EAAE1rD,CAAC,IAAI;AAAC,UAAI,CAACuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAnB,EAA4B;AAAE48C,QAAAA,eAAe,CAACplC,EAAD,CAAf;AAAqB;AAAC;AALjD,GAAlB;AAQA,MAAIw1C,GAAG,GAAGrkC,CAAC,CAAC8C,KAAF,CAAQw6B,QAAR,EAAV;AACAhvC,EAAAA,EAAE,CAAC+1C,GAAD,EAAM,OAAN,EAAehtD,CAAC,IAAIomD,OAAO,CAAC5yD,IAAR,CAAagkB,EAAb,EAAiBxX,CAAjB,CAApB,CAAF;AACAiX,EAAAA,EAAE,CAAC+1C,GAAD,EAAM,SAAN,EAAiB5lB,SAAS,CAAC5vB,EAAD,EAAKwuC,SAAL,CAA1B,CAAF;AACA/uC,EAAAA,EAAE,CAAC+1C,GAAD,EAAM,UAAN,EAAkB5lB,SAAS,CAAC5vB,EAAD,EAAK6uC,UAAL,CAA3B,CAAF;AACApvC,EAAAA,EAAE,CAAC+1C,GAAD,EAAM,OAAN,EAAehtD,CAAC,IAAIw+B,OAAO,CAAChnB,EAAD,EAAKxX,CAAL,CAA3B,CAAF;AACAiX,EAAAA,EAAE,CAAC+1C,GAAD,EAAM,MAAN,EAAchtD,CAAC,IAAIs+B,MAAM,CAAC9mB,EAAD,EAAKxX,CAAL,CAAzB,CAAF;AACD;;AAED,IAAImsD,SAAS,GAAG,EAAhB;;AACAhQ,UAAU,CAAC8Q,cAAX,GAA4Bl8C,CAAC,IAAIo7C,SAAS,CAACx0D,IAAV,CAAeoZ,CAAf,CAAjC;;AC/MA;AACA;AACA;AACA;;AACA,AAAO,SAAS2zC,UAAT,CAAoBltC,EAApB,EAAwB7F,CAAxB,EAA2Bu7C,GAA3B,EAAgCC,UAAhC,EAA4C;AACjD,MAAI3vC,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkBjC,KAAlB;AACA,MAAI2xC,GAAG,IAAI,IAAX,EAAiBA,GAAG,GAAG,KAAN;;AACjB,MAAIA,GAAG,IAAI,OAAX,EAAoB;AAClB;AACA;AACA,QAAI,CAAC1vC,GAAG,CAAChD,IAAJ,CAAS4yC,MAAd,EAAsBF,GAAG,GAAG,MAAN,CAAtB,KACK3xC,KAAK,GAAG6F,gBAAgB,CAAC5J,EAAD,EAAK7F,CAAL,CAAhB,CAAwB4J,KAAhC;AACN;;AAED,MAAIhK,OAAO,GAAGiG,EAAE,CAAC5S,OAAH,CAAW2M,OAAzB;AACA,MAAIwF,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAM7L,CAAN,CAAlB;AAAA,MAA4B07C,QAAQ,GAAGh8C,WAAW,CAAC0F,IAAI,CAACpkB,IAAN,EAAY,IAAZ,EAAkB4e,OAAlB,CAAlD;AACA,MAAIwF,IAAI,CAACwK,UAAT,EAAqBxK,IAAI,CAACwK,UAAL,GAAkB,IAAlB;AACrB,MAAI+rC,cAAc,GAAGv2C,IAAI,CAACpkB,IAAL,CAAU+Y,KAAV,CAAgB,MAAhB,EAAwB,CAAxB,CAArB;AAAA,MAAiDmR,WAAjD;;AACA,MAAI,CAACswC,UAAD,IAAe,CAAC,KAAKhlD,IAAL,CAAU4O,IAAI,CAACpkB,IAAf,CAApB,EAA0C;AACxCkqB,IAAAA,WAAW,GAAG,CAAd;AACAqwC,IAAAA,GAAG,GAAG,KAAN;AACD,GAHD,MAGO,IAAIA,GAAG,IAAI,OAAX,EAAoB;AACzBrwC,IAAAA,WAAW,GAAGW,GAAG,CAAChD,IAAJ,CAAS4yC,MAAT,CAAgB7xC,KAAhB,EAAuBxE,IAAI,CAACpkB,IAAL,CAAUY,KAAV,CAAgB+5D,cAAc,CAAC7lE,MAA/B,CAAvB,EAA+DsvB,IAAI,CAACpkB,IAApE,CAAd;;AACA,QAAIkqB,WAAW,IAAIvK,IAAf,IAAuBuK,WAAW,GAAG,GAAzC,EAA8C;AAC5C,UAAI,CAACswC,UAAL,EAAiB;AACjBD,MAAAA,GAAG,GAAG,MAAN;AACD;AACF;;AACD,MAAIA,GAAG,IAAI,MAAX,EAAmB;AACjB,QAAIv7C,CAAC,GAAG6L,GAAG,CAACC,KAAZ,EAAmBZ,WAAW,GAAGxL,WAAW,CAACkM,OAAO,CAACC,GAAD,EAAM7L,CAAC,GAAC,CAAR,CAAP,CAAkBhf,IAAnB,EAAyB,IAAzB,EAA+B4e,OAA/B,CAAzB,CAAnB,KACKsL,WAAW,GAAG,CAAd;AACN,GAHD,MAGO,IAAIqwC,GAAG,IAAI,KAAX,EAAkB;AACvBrwC,IAAAA,WAAW,GAAGwwC,QAAQ,GAAG71C,EAAE,CAAC5S,OAAH,CAAW2oD,UAApC;AACD,GAFM,MAEA,IAAIL,GAAG,IAAI,UAAX,EAAuB;AAC5BrwC,IAAAA,WAAW,GAAGwwC,QAAQ,GAAG71C,EAAE,CAAC5S,OAAH,CAAW2oD,UAApC;AACD,GAFM,MAEA,IAAI,OAAOL,GAAP,IAAc,QAAlB,EAA4B;AACjCrwC,IAAAA,WAAW,GAAGwwC,QAAQ,GAAGH,GAAzB;AACD;;AACDrwC,EAAAA,WAAW,GAAGtsB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY0H,WAAZ,CAAd;AAEA,MAAI2wC,YAAY,GAAG,EAAnB;AAAA,MAAuB36C,GAAG,GAAG,CAA7B;AACA,MAAI2E,EAAE,CAAC5S,OAAH,CAAW6oD,cAAf,EACE,KAAK,IAAIj1D,CAAC,GAAGjI,IAAI,CAACC,KAAL,CAAWqsB,WAAW,GAAGtL,OAAzB,CAAb,EAAgD/Y,CAAhD,EAAmD,EAAEA,CAArD,EAAwD;AAACqa,IAAAA,GAAG,IAAItB,OAAP;AAAgBi8C,IAAAA,YAAY,IAAI,IAAhB;AAAqB;AAChG,MAAI36C,GAAG,GAAGgK,WAAV,EAAuB2wC,YAAY,IAAIt6C,QAAQ,CAAC2J,WAAW,GAAGhK,GAAf,CAAxB;;AAEvB,MAAI26C,YAAY,IAAIF,cAApB,EAAoC;AAClC9X,IAAAA,YAAY,CAACh4B,GAAD,EAAMgwC,YAAN,EAAoB1uC,GAAG,CAACnN,CAAD,EAAI,CAAJ,CAAvB,EAA+BmN,GAAG,CAACnN,CAAD,EAAI27C,cAAc,CAAC7lE,MAAnB,CAAlC,EAA8D,QAA9D,CAAZ;AACAsvB,IAAAA,IAAI,CAACwK,UAAL,GAAkB,IAAlB;AACA,WAAO,IAAP;AACD,GAJD,MAIO;AACL;AACA;AACA,SAAK,IAAI/oB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe7zC,MAAnC,EAA2C+Q,CAAC,EAA5C,EAAgD;AAC9C,UAAI6W,KAAK,GAAGmO,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,CAAZ;;AACA,UAAI6W,KAAK,CAACpmB,IAAN,CAAW8tB,IAAX,IAAmBpF,CAAnB,IAAwBtC,KAAK,CAACpmB,IAAN,CAAW+qB,EAAX,GAAgBs5C,cAAc,CAAC7lE,MAA3D,EAAmE;AACjE,YAAIorB,GAAG,GAAGiM,GAAG,CAACnN,CAAD,EAAI27C,cAAc,CAAC7lE,MAAnB,CAAb;AACAgrD,QAAAA,mBAAmB,CAACj1B,GAAD,EAAMhlB,CAAN,EAAS,IAAI00C,KAAJ,CAAUr6B,GAAV,EAAeA,GAAf,CAAT,CAAnB;AACA;AACD;AACF;AACF;AACF;;ACxDD;AACA;;AACA,AAAO,IAAI66C,UAAU,GAAG,IAAjB;AAEP,AAAO,SAASC,aAAT,CAAuBC,aAAvB,EAAsC;AAC3CF,EAAAA,UAAU,GAAGE,aAAb;AACD;AAED,AAAO,SAASC,cAAT,CAAwBr2C,EAAxB,EAA4Bs2C,QAA5B,EAAsCC,OAAtC,EAA+C1yB,GAA/C,EAAoD1zC,MAApD,EAA4D;AACjE,MAAI61B,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AACAhG,EAAAA,EAAE,CAACplB,OAAH,CAAWsJ,KAAX,GAAmB,KAAnB;AACA,MAAI,CAAC2/B,GAAL,EAAUA,GAAG,GAAG7d,GAAG,CAAC6d,GAAV;AAEV,MAAI2yB,MAAM,GAAG,CAAC,IAAI39D,IAAJ,EAAD,GAAY,GAAzB;AACA,MAAI49D,KAAK,GAAGtmE,MAAM,IAAI,OAAV,IAAqB6vB,EAAE,CAAC+D,KAAH,CAASuwC,aAAT,GAAyBkC,MAA1D;AACA,MAAIE,SAAS,GAAG70C,cAAc,CAACy0C,QAAD,CAA9B;AAAA,MAA0CK,UAAU,GAAG,IAAvD,CAPiE;;AASjE,MAAIF,KAAK,IAAI5yB,GAAG,CAACC,MAAJ,CAAW7zC,MAAX,GAAoB,CAAjC,EAAoC;AAClC,QAAIimE,UAAU,IAAIA,UAAU,CAAC/6D,IAAX,CAAgB8N,IAAhB,CAAqB,IAArB,KAA8BqtD,QAAhD,EAA0D;AACxD,UAAIzyB,GAAG,CAACC,MAAJ,CAAW7zC,MAAX,GAAoBimE,UAAU,CAAC/6D,IAAX,CAAgBlL,MAApC,IAA8C,CAAlD,EAAqD;AACnD0mE,QAAAA,UAAU,GAAG,EAAb;;AACA,aAAK,IAAI31D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk1D,UAAU,CAAC/6D,IAAX,CAAgBlL,MAApC,EAA4C+Q,CAAC,EAA7C,EACE21D,UAAU,CAACx2D,IAAX,CAAgB6lB,GAAG,CAACi4B,UAAJ,CAAeiY,UAAU,CAAC/6D,IAAX,CAAgB6F,CAAhB,CAAf,CAAhB;AACH;AACF,KAND,MAMO,IAAI01D,SAAS,CAACzmE,MAAV,IAAoB4zC,GAAG,CAACC,MAAJ,CAAW7zC,MAA/B,IAAyC+vB,EAAE,CAAC5S,OAAH,CAAWwpD,sBAAxD,EAAgF;AACrFD,MAAAA,UAAU,GAAGlvD,GAAG,CAACivD,SAAD,EAAY50C,CAAC,IAAI,CAACA,CAAD,CAAjB,CAAhB;AACD;AACF;;AAED,MAAI8rB,WAAW,GAAG5tB,EAAE,CAACO,KAAH,CAASqtB,WAA3B,CArBiE;;AAuBjE,OAAK,IAAI5sC,CAAC,GAAG6iC,GAAG,CAACC,MAAJ,CAAW7zC,MAAX,GAAoB,CAAjC,EAAoC+Q,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C,EAAiD;AAC/C,QAAI6W,KAAK,GAAGgsB,GAAG,CAACC,MAAJ,CAAW9iC,CAAX,CAAZ;AACA,QAAIsO,IAAI,GAAGuI,KAAK,CAACvI,IAAN,EAAX;AAAA,QAAyB6N,EAAE,GAAGtF,KAAK,CAACsF,EAAN,EAA9B;;AACA,QAAItF,KAAK,CAACmsB,KAAN,EAAJ,EAAmB;AACjB,UAAIuyB,OAAO,IAAIA,OAAO,GAAG,CAAzB;AACEjnD,QAAAA,IAAI,GAAGgY,GAAG,CAAChY,IAAI,CAACiQ,IAAN,EAAYjQ,IAAI,CAACkN,EAAL,GAAU+5C,OAAtB,CAAV,CADF,KAEK,IAAIv2C,EAAE,CAAC+D,KAAH,CAASpK,SAAT,IAAsB,CAAC88C,KAA3B;AACHt5C,QAAAA,EAAE,GAAGmK,GAAG,CAACnK,EAAE,CAACoC,IAAJ,EAAUxmB,IAAI,CAACyiB,GAAL,CAASuK,OAAO,CAACC,GAAD,EAAM7I,EAAE,CAACoC,IAAT,CAAP,CAAsBpkB,IAAtB,CAA2BlL,MAApC,EAA4CktB,EAAE,CAACX,EAAH,GAAQb,GAAG,CAAC+6C,SAAD,CAAH,CAAezmE,MAAnE,CAAV,CAAR,CADG,KAEA,IAAIwmE,KAAK,IAAIP,UAAT,IAAuBA,UAAU,CAACW,QAAlC,IAA8CX,UAAU,CAAC/6D,IAAX,CAAgB8N,IAAhB,CAAqB,IAArB,KAA8BytD,SAAS,CAACztD,IAAV,CAAe,IAAf,CAAhF,EACHqG,IAAI,GAAG6N,EAAE,GAAGmK,GAAG,CAAChY,IAAI,CAACiQ,IAAN,EAAY,CAAZ,CAAf;AACH;;AACD,QAAIu3C,WAAW,GAAG;AAACxnD,MAAAA,IAAI,EAAEA,IAAP;AAAa6N,MAAAA,EAAE,EAAEA,EAAjB;AAAqBhiB,MAAAA,IAAI,EAAEw7D,UAAU,GAAGA,UAAU,CAAC31D,CAAC,GAAG21D,UAAU,CAAC1mE,MAAhB,CAAb,GAAuCymE,SAA5E;AACCvmE,MAAAA,MAAM,EAAEA,MAAM,KAAKsmE,KAAK,GAAG,OAAH,GAAaz2C,EAAE,CAAC+D,KAAH,CAASwwC,WAAT,GAAuBiC,MAAvB,GAAgC,KAAhC,GAAwC,QAA/D;AADf,KAAlB;AAEA3Z,IAAAA,UAAU,CAAC78B,EAAE,CAACgG,GAAJ,EAAS8wC,WAAT,CAAV;AACA/gC,IAAAA,WAAW,CAAC/V,EAAD,EAAK,WAAL,EAAkBA,EAAlB,EAAsB82C,WAAtB,CAAX;AACD;;AACD,MAAIR,QAAQ,IAAI,CAACG,KAAjB,EACEM,eAAe,CAAC/2C,EAAD,EAAKs2C,QAAL,CAAf;AAEFzsB,EAAAA,mBAAmB,CAAC7pB,EAAD,CAAnB;AACA,MAAIA,EAAE,CAACO,KAAH,CAASqtB,WAAT,GAAuB,CAA3B,EAA8B5tB,EAAE,CAACO,KAAH,CAASqtB,WAAT,GAAuBA,WAAvB;AAC9B5tB,EAAAA,EAAE,CAACO,KAAH,CAASstB,MAAT,GAAkB,IAAlB;AACA7tB,EAAAA,EAAE,CAAC+D,KAAH,CAASuwC,aAAT,GAAyBt0C,EAAE,CAAC+D,KAAH,CAASwwC,WAAT,GAAuB,CAAC,CAAjD;AACD;AAED,AAAO,SAASyC,WAAT,CAAqBxuD,CAArB,EAAwBwX,EAAxB,EAA4B;AACjC,MAAIi3C,MAAM,GAAGzuD,CAAC,CAAC0uD,aAAF,IAAmB1uD,CAAC,CAAC0uD,aAAF,CAAgB9Q,OAAhB,CAAwB,MAAxB,CAAhC;;AACA,MAAI6Q,MAAJ,EAAY;AACVzuD,IAAAA,CAAC,CAAC7O,cAAF;AACA,QAAI,CAACqmB,EAAE,CAACulC,UAAH,EAAD,IAAoB,CAACvlC,EAAE,CAAC5S,OAAH,CAAW+pD,YAApC,EACExnB,OAAO,CAAC3vB,EAAD,EAAK,MAAMq2C,cAAc,CAACr2C,EAAD,EAAKi3C,MAAL,EAAa,CAAb,EAAgB,IAAhB,EAAsB,OAAtB,CAAzB,CAAP;AACF,WAAO,IAAP;AACD;AACF;AAED,AAAO,SAASF,eAAT,CAAyB/2C,EAAzB,EAA6Bs2C,QAA7B,EAAuC;AAC5C;AACA,MAAI,CAACt2C,EAAE,CAAC5S,OAAH,CAAWgqD,aAAZ,IAA6B,CAACp3C,EAAE,CAAC5S,OAAH,CAAWiqD,WAA7C,EAA0D;AAC1D,MAAIxzB,GAAG,GAAG7jB,EAAE,CAACgG,GAAH,CAAO6d,GAAjB;;AAEA,OAAK,IAAI7iC,CAAC,GAAG6iC,GAAG,CAACC,MAAJ,CAAW7zC,MAAX,GAAoB,CAAjC,EAAoC+Q,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C,EAAiD;AAC/C,QAAI6W,KAAK,GAAGgsB,GAAG,CAACC,MAAJ,CAAW9iC,CAAX,CAAZ;AACA,QAAI6W,KAAK,CAACpmB,IAAN,CAAW+qB,EAAX,GAAgB,GAAhB,IAAwBxb,CAAC,IAAI6iC,GAAG,CAACC,MAAJ,CAAW9iC,CAAC,GAAG,CAAf,EAAkBvP,IAAlB,CAAuB8tB,IAAvB,IAA+B1H,KAAK,CAACpmB,IAAN,CAAW8tB,IAA3E,EAAkF;AAClF,QAAIyD,IAAI,GAAGhD,EAAE,CAACs3C,SAAH,CAAaz/C,KAAK,CAACpmB,IAAnB,CAAX;AACA,QAAIm6B,QAAQ,GAAG,KAAf;;AACA,QAAI5I,IAAI,CAACo0C,aAAT,EAAwB;AACtB,WAAK,IAAIt4C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkE,IAAI,CAACo0C,aAAL,CAAmBnnE,MAAvC,EAA+C6uB,CAAC,EAAhD,EACE,IAAIw3C,QAAQ,CAACr2D,OAAT,CAAiB+iB,IAAI,CAACo0C,aAAL,CAAmBp6C,MAAnB,CAA0B8B,CAA1B,CAAjB,IAAiD,CAAC,CAAtD,EAAyD;AACvD8M,QAAAA,QAAQ,GAAGshC,UAAU,CAACltC,EAAD,EAAKnI,KAAK,CAACpmB,IAAN,CAAW8tB,IAAhB,EAAsB,OAAtB,CAArB;AACA;AACD;AACJ,KAND,MAMO,IAAIyD,IAAI,CAACu0C,aAAT,EAAwB;AAC7B,UAAIv0C,IAAI,CAACu0C,aAAL,CAAmB5mD,IAAnB,CAAwBoV,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASnO,KAAK,CAACpmB,IAAN,CAAW8tB,IAApB,CAAP,CAAiCpkB,IAAjC,CAAsCY,KAAtC,CAA4C,CAA5C,EAA+C8b,KAAK,CAACpmB,IAAN,CAAW+qB,EAA1D,CAAxB,CAAJ,EACEoP,QAAQ,GAAGshC,UAAU,CAACltC,EAAD,EAAKnI,KAAK,CAACpmB,IAAN,CAAW8tB,IAAhB,EAAsB,OAAtB,CAArB;AACH;;AACD,QAAIqM,QAAJ,EAAcmK,WAAW,CAAC/V,EAAD,EAAK,eAAL,EAAsBA,EAAtB,EAA0BnI,KAAK,CAACpmB,IAAN,CAAW8tB,IAArC,CAAX;AACf;AACF;AAED,AAAO,SAASi4C,cAAT,CAAwBx3C,EAAxB,EAA4B;AACjC,MAAI7kB,IAAI,GAAG,EAAX;AAAA,MAAe2oC,MAAM,GAAG,EAAxB;;AACA,OAAK,IAAI9iC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgf,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWC,MAAX,CAAkB7zC,MAAtC,EAA8C+Q,CAAC,EAA/C,EAAmD;AACjD,QAAIue,IAAI,GAAGS,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWC,MAAX,CAAkB9iC,CAAlB,EAAqBvP,IAArB,CAA0B8tB,IAArC;AACA,QAAIk4C,SAAS,GAAG;AAACl2B,MAAAA,MAAM,EAAEja,GAAG,CAAC/H,IAAD,EAAO,CAAP,CAAZ;AAAuB9tB,MAAAA,IAAI,EAAE61B,GAAG,CAAC/H,IAAI,GAAG,CAAR,EAAW,CAAX;AAAhC,KAAhB;AACAukB,IAAAA,MAAM,CAAC3jC,IAAP,CAAYs3D,SAAZ;AACAt8D,IAAAA,IAAI,CAACgF,IAAL,CAAU6f,EAAE,CAAC4hC,QAAH,CAAY6V,SAAS,CAACl2B,MAAtB,EAA8Bk2B,SAAS,CAAChmE,IAAxC,CAAV;AACD;;AACD,SAAO;AAAC0J,IAAAA,IAAI,EAAEA,IAAP;AAAa2oC,IAAAA,MAAM,EAAEA;AAArB,GAAP;AACD;AAED,AAAO,SAAS4zB,mBAAT,CAA6BC,KAA7B,EAAoCxE,UAApC,EAAgDC,WAAhD,EAA6DtoD,cAA7D,EAA6E;AAClF6sD,EAAAA,KAAK,CAACvmE,YAAN,CAAmB,aAAnB,EAAkCgiE,WAAW,GAAG,EAAH,GAAQ,KAArD;AACAuE,EAAAA,KAAK,CAACvmE,YAAN,CAAmB,gBAAnB,EAAqC0Z,cAAc,GAAG,EAAH,GAAQ,KAA3D;AACA6sD,EAAAA,KAAK,CAACvmE,YAAN,CAAmB,YAAnB,EAAiC,CAAC,CAAC+hE,UAAnC;AACD;AAED,AAAO,SAASyE,cAAT,GAA0B;AAC/B,MAAIz1C,EAAE,GAAG3K,GAAG,CAAC,UAAD,EAAa,IAAb,EAAmB,IAAnB,EAAyB,sFAAzB,CAAZ;AACA,MAAI2J,GAAG,GAAG3J,GAAG,CAAC,KAAD,EAAQ,CAAC2K,EAAD,CAAR,EAAc,IAAd,EAAoB,gEAApB,CAAb,CAF+B;AAI/B;AACA;AACA;;AACA,MAAI1M,MAAJ,EAAY0M,EAAE,CAAC/zB,KAAH,CAAShB,KAAT,GAAiB,QAAjB,CAAZ,KACK+0B,EAAE,CAAC/wB,YAAH,CAAgB,MAAhB,EAAwB,KAAxB,EAR0B;;AAU/B,MAAI6kB,GAAJ,EAASkM,EAAE,CAAC/zB,KAAH,CAASypE,MAAT,GAAkB,iBAAlB;AACTH,EAAAA,mBAAmB,CAACv1C,EAAD,CAAnB;AACA,SAAOhB,GAAP;AACD;;AC5GD;AAEA;AACA;AACA;AACA;;AAEA,AAAe,2BAASwjC,UAAT,EAAqB;AAClC,MAAIgO,cAAc,GAAGhO,UAAU,CAACgO,cAAhC;AAEA,MAAImF,OAAO,GAAGnT,UAAU,CAACmT,OAAX,GAAqB,EAAnC;AAEAnT,EAAAA,UAAU,CAACx+C,SAAX,GAAuB;AACrBnR,IAAAA,WAAW,EAAE2vD,UADQ;AAErB1wD,IAAAA,KAAK,EAAE,YAAU;AAAC2M,MAAAA,MAAM,CAAC3M,KAAP;AAAgB,WAAK2G,OAAL,CAAaq5B,KAAb,CAAmBhgC,KAAnB;AAA2B,KAFxC;AAIrBwY,IAAAA,SAAS,EAAE,UAASvR,MAAT,EAAiB/O,KAAjB,EAAwB;AACjC,UAAIihB,OAAO,GAAG,KAAKA,OAAnB;AAAA,UAA4B2f,GAAG,GAAG3f,OAAO,CAAClS,MAAD,CAAzC;AACA,UAAIkS,OAAO,CAAClS,MAAD,CAAP,IAAmB/O,KAAnB,IAA4B+O,MAAM,IAAI,MAA1C,EAAkD;AAClDkS,MAAAA,OAAO,CAAClS,MAAD,CAAP,GAAkB/O,KAAlB;AACA,UAAIwmE,cAAc,CAACvsD,cAAf,CAA8BlL,MAA9B,CAAJ,EACE00C,SAAS,CAAC,IAAD,EAAO+iB,cAAc,CAACz3D,MAAD,CAArB,CAAT,CAAwC,IAAxC,EAA8C/O,KAA9C,EAAqD4gC,GAArD;AACFjN,MAAAA,MAAM,CAAC,IAAD,EAAO,cAAP,EAAuB,IAAvB,EAA6B5kB,MAA7B,CAAN;AACD,KAXoB;AAarBsR,IAAAA,SAAS,EAAE,UAAStR,MAAT,EAAiB;AAAC,aAAO,KAAKkS,OAAL,CAAalS,MAAb,CAAP;AAA4B,KAbpC;AAcrB68D,IAAAA,MAAM,EAAE,YAAW;AAAC,aAAO,KAAK/xC,GAAZ;AAAgB,KAdf;AAgBrBgyC,IAAAA,SAAS,EAAE,UAASvwD,GAAT,EAAc4zB,MAAd,EAAsB;AAC/B,WAAKtX,KAAL,CAAW8pC,OAAX,CAAmBxyB,MAAM,GAAG,MAAH,GAAY,SAArC,EAAgDgtB,SAAS,CAAC5gD,GAAD,CAAzD;AACD,KAlBoB;AAmBrBwwD,IAAAA,YAAY,EAAE,UAASxwD,GAAT,EAAc;AAC1B,UAAIorB,IAAI,GAAG,KAAK9O,KAAL,CAAW8pC,OAAtB;;AACA,WAAK,IAAI7sD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6xB,IAAI,CAAC5iC,MAAzB,EAAiC,EAAE+Q,CAAnC,EACE,IAAI6xB,IAAI,CAAC7xB,CAAD,CAAJ,IAAWyG,GAAX,IAAkBorB,IAAI,CAAC7xB,CAAD,CAAJ,CAAQiJ,IAAR,IAAgBxC,GAAtC,EAA2C;AACzCorB,QAAAA,IAAI,CAACzxB,MAAL,CAAYJ,CAAZ,EAAe,CAAf;AACA,eAAO,IAAP;AACD;AACJ,KA1BoB;AA4BrBk3D,IAAAA,UAAU,EAAEroB,QAAQ,CAAC,UAASzsB,IAAT,EAAehW,OAAf,EAAwB;AAC3C,UAAI4V,IAAI,GAAGI,IAAI,CAACyH,KAAL,GAAazH,IAAb,GAAoBuhC,UAAU,CAACrhC,OAAX,CAAmB,KAAKlW,OAAxB,EAAiCgW,IAAjC,CAA/B;AACA,UAAIJ,IAAI,CAACmB,UAAT,EAAqB,MAAM,IAAI/pB,KAAJ,CAAU,+BAAV,CAAN;AACrByhB,MAAAA,YAAY,CAAC,KAAKkI,KAAL,CAAWoF,QAAZ,EACC;AAACnG,QAAAA,IAAI,EAAEA,IAAP;AAAam1C,QAAAA,QAAQ,EAAE/0C,IAAvB;AAA6BkG,QAAAA,MAAM,EAAElc,OAAO,IAAIA,OAAO,CAACkc,MAAxD;AACCvN,QAAAA,QAAQ,EAAG3O,OAAO,IAAIA,OAAO,CAAC2O,QAApB,IAAiC;AAD5C,OADD,EAGCqN,OAAO,IAAIA,OAAO,CAACrN,QAHpB,CAAZ;AAIA,WAAKgI,KAAL,CAAWgF,OAAX;AACAwZ,MAAAA,SAAS,CAAC,IAAD,CAAT;AACD,KATmB,CA5BC;AAsCrB61B,IAAAA,aAAa,EAAEvoB,QAAQ,CAAC,UAASzsB,IAAT,EAAe;AACrC,UAAI+F,QAAQ,GAAG,KAAKpF,KAAL,CAAWoF,QAA1B;;AACA,WAAK,IAAInoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmoB,QAAQ,CAACl5B,MAA7B,EAAqC,EAAE+Q,CAAvC,EAA0C;AACxC,YAAIgd,GAAG,GAAGmL,QAAQ,CAACnoB,CAAD,CAAR,CAAYm3D,QAAtB;;AACA,YAAIn6C,GAAG,IAAIoF,IAAP,IAAe,OAAOA,IAAP,IAAe,QAAf,IAA2BpF,GAAG,CAAC/T,IAAJ,IAAYmZ,IAA1D,EAAgE;AAC9D+F,UAAAA,QAAQ,CAAC/nB,MAAT,CAAgBJ,CAAhB,EAAmB,CAAnB;AACA,eAAK+iB,KAAL,CAAWgF,OAAX;AACAwZ,UAAAA,SAAS,CAAC,IAAD,CAAT;AACA;AACD;AACF;AACF,KAXsB,CAtCF;AAmDrB2qB,IAAAA,UAAU,EAAErd,QAAQ,CAAC,UAAS11B,CAAT,EAAYlJ,GAAZ,EAAiB0kD,UAAjB,EAA6B;AAChD,UAAI,OAAO1kD,GAAP,IAAc,QAAd,IAA0B,OAAOA,GAAP,IAAc,QAA5C,EAAsD;AACpD,YAAIA,GAAG,IAAI,IAAX,EAAiBA,GAAG,GAAG,KAAK7D,OAAL,CAAaiqD,WAAb,GAA2B,OAA3B,GAAqC,MAA3C,CAAjB,KACKpmD,GAAG,GAAGA,GAAG,GAAG,KAAH,GAAW,UAApB;AACN;;AACD,UAAIiW,MAAM,CAAC,KAAKlB,GAAN,EAAW7L,CAAX,CAAV,EAAyB+yC,UAAU,CAAC,IAAD,EAAO/yC,CAAP,EAAUlJ,GAAV,EAAe0kD,UAAf,CAAV;AAC1B,KANmB,CAnDC;AA0DrBpJ,IAAAA,eAAe,EAAE1c,QAAQ,CAAC,UAAS6lB,GAAT,EAAc;AACtC,UAAI5xB,MAAM,GAAG,KAAK9d,GAAL,CAAS6d,GAAT,CAAaC,MAA1B;AAAA,UAAkCjhC,GAAG,GAAG,CAAC,CAAzC;;AACA,WAAK,IAAI7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,YAAI6W,KAAK,GAAGisB,MAAM,CAAC9iC,CAAD,CAAlB;;AACA,YAAI,CAAC6W,KAAK,CAACmsB,KAAN,EAAL,EAAoB;AAClB,cAAI10B,IAAI,GAAGuI,KAAK,CAACvI,IAAN,EAAX;AAAA,cAAyB6N,EAAE,GAAGtF,KAAK,CAACsF,EAAN,EAA9B;AACA,cAAIpF,KAAK,GAAGhf,IAAI,CAAC4kB,GAAL,CAAS9a,GAAT,EAAcyM,IAAI,CAACiQ,IAAnB,CAAZ;AACA1c,UAAAA,GAAG,GAAG9J,IAAI,CAACyiB,GAAL,CAAS,KAAKmV,QAAL,EAAT,EAA0BxT,EAAE,CAACoC,IAAH,IAAWpC,EAAE,CAACX,EAAH,GAAQ,CAAR,GAAY,CAAvB,CAA1B,IAAuD,CAA7D;;AACA,eAAK,IAAIsC,CAAC,GAAG/G,KAAb,EAAoB+G,CAAC,GAAGjc,GAAxB,EAA6B,EAAEic,CAA/B,EACEouC,UAAU,CAAC,IAAD,EAAOpuC,CAAP,EAAU42C,GAAV,CAAV;;AACF,cAAI2C,SAAS,GAAG,KAAKryC,GAAL,CAAS6d,GAAT,CAAaC,MAA7B;AACA,cAAIx0B,IAAI,CAACkN,EAAL,IAAW,CAAX,IAAgBsnB,MAAM,CAAC7zC,MAAP,IAAiBooE,SAAS,CAACpoE,MAA3C,IAAqDooE,SAAS,CAACr3D,CAAD,CAAT,CAAasO,IAAb,GAAoBkN,EAApB,GAAyB,CAAlF,EACEy+B,mBAAmB,CAAC,KAAKj1B,GAAN,EAAWhlB,CAAX,EAAc,IAAI00C,KAAJ,CAAUpmC,IAAV,EAAgB+oD,SAAS,CAACr3D,CAAD,CAAT,CAAamc,EAAb,EAAhB,CAAd,EAAkDpC,cAAlD,CAAnB;AACH,SATD,MASO,IAAIlD,KAAK,CAACpmB,IAAN,CAAW8tB,IAAX,GAAkB1c,GAAtB,EAA2B;AAChCqqD,UAAAA,UAAU,CAAC,IAAD,EAAOr1C,KAAK,CAACpmB,IAAN,CAAW8tB,IAAlB,EAAwBm2C,GAAxB,EAA6B,IAA7B,CAAV;AACA7yD,UAAAA,GAAG,GAAGgV,KAAK,CAACpmB,IAAN,CAAW8tB,IAAjB;AACA,cAAIve,CAAC,IAAI,KAAKglB,GAAL,CAAS6d,GAAT,CAAaE,SAAtB,EAAiC8F,mBAAmB,CAAC,IAAD,CAAnB;AAClC;AACF;AACF,KAnBwB,CA1DJ;AA+ErB;AACA;AACAyuB,IAAAA,UAAU,EAAE,UAASj9C,GAAT,EAAc8O,OAAd,EAAuB;AACjC,aAAOY,SAAS,CAAC,IAAD,EAAO1P,GAAP,EAAY8O,OAAZ,CAAhB;AACD,KAnFoB;AAqFrBouC,IAAAA,aAAa,EAAE,UAASh5C,IAAT,EAAe4K,OAAf,EAAwB;AACrC,aAAOY,SAAS,CAAC,IAAD,EAAOzD,GAAG,CAAC/H,IAAD,CAAV,EAAkB4K,OAAlB,EAA2B,IAA3B,CAAhB;AACD,KAvFoB;AAyFrBquC,IAAAA,cAAc,EAAE,UAASn9C,GAAT,EAAc;AAC5BA,MAAAA,GAAG,GAAGwM,OAAO,CAAC,KAAK7B,GAAN,EAAW3K,GAAX,CAAb;AACA,UAAIvlB,MAAM,GAAG4zB,aAAa,CAAC,IAAD,EAAO3D,OAAO,CAAC,KAAKC,GAAN,EAAW3K,GAAG,CAACkE,IAAf,CAAd,CAA1B;AACA,UAAIR,MAAM,GAAG,CAAb;AAAA,UAAgB9H,KAAK,GAAG,CAACnhB,MAAM,CAAC7F,MAAP,GAAgB,CAAjB,IAAsB,CAA9C;AAAA,UAAiDusB,EAAE,GAAGnB,GAAG,CAACmB,EAA1D;AACA,UAAIvwB,IAAJ;AACA,UAAIuwB,EAAE,IAAI,CAAV,EAAavwB,IAAI,GAAG6J,MAAM,CAAC,CAAD,CAAb,CAAb,KACK,SAAS;AACZ,YAAIunB,GAAG,GAAI0B,MAAM,GAAG9H,KAAV,IAAoB,CAA9B;AACA,YAAI,CAACoG,GAAG,GAAGvnB,MAAM,CAACunB,GAAG,GAAG,CAAN,GAAU,CAAX,CAAT,GAAyB,CAA7B,KAAmCb,EAAvC,EAA2CvF,KAAK,GAAGoG,GAAR,CAA3C,KACK,IAAIvnB,MAAM,CAACunB,GAAG,GAAG,CAAN,GAAU,CAAX,CAAN,GAAsBb,EAA1B,EAA8BuC,MAAM,GAAG1B,GAAG,GAAG,CAAf,CAA9B,KACA;AAAEpxB,UAAAA,IAAI,GAAG6J,MAAM,CAACunB,GAAG,GAAG,CAAN,GAAU,CAAX,CAAb;AAA4B;AAAO;AAC3C;AACD,UAAIulB,GAAG,GAAG32C,IAAI,GAAGA,IAAI,CAACgU,OAAL,CAAa,UAAb,CAAH,GAA8B,CAAC,CAA7C;AACA,aAAO2iC,GAAG,GAAG,CAAN,GAAU32C,IAAV,GAAiB22C,GAAG,IAAI,CAAP,GAAW,IAAX,GAAkB32C,IAAI,CAAC8P,KAAL,CAAW,CAAX,EAAc6mC,GAAG,GAAG,CAApB,CAA1C;AACD,KAvGoB;AAyGrB00B,IAAAA,SAAS,EAAE,UAASj8C,GAAT,EAAc;AACvB,UAAI2H,IAAI,GAAG,KAAKgD,GAAL,CAAShD,IAApB;AACA,UAAI,CAACA,IAAI,CAACkB,SAAV,EAAqB,OAAOlB,IAAP;AACrB,aAAO2hC,UAAU,CAACzgC,SAAX,CAAqBlB,IAArB,EAA2B,KAAKs1C,UAAL,CAAgBj9C,GAAhB,EAAqB0I,KAAhD,EAAuDf,IAA9D;AACD,KA7GoB;AA+GrBy1C,IAAAA,SAAS,EAAE,UAASp9C,GAAT,EAAcpvB,IAAd,EAAoB;AAC7B,aAAO,KAAKysE,UAAL,CAAgBr9C,GAAhB,EAAqBpvB,IAArB,EAA2B,CAA3B,CAAP;AACD,KAjHoB;AAmHrBysE,IAAAA,UAAU,EAAE,UAASr9C,GAAT,EAAcpvB,IAAd,EAAoB;AAC9B,UAAIwxB,KAAK,GAAG,EAAZ;AACA,UAAI,CAACq6C,OAAO,CAAC1xD,cAAR,CAAuBna,IAAvB,CAAL,EAAmC,OAAOwxB,KAAP;AACnC,UAAIk7C,IAAI,GAAGb,OAAO,CAAC7rE,IAAD,CAAlB;AAAA,UAA0B+2B,IAAI,GAAG,KAAKs0C,SAAL,CAAej8C,GAAf,CAAjC;;AACA,UAAI,OAAO2H,IAAI,CAAC/2B,IAAD,CAAX,IAAqB,QAAzB,EAAmC;AACjC,YAAI0sE,IAAI,CAAC31C,IAAI,CAAC/2B,IAAD,CAAL,CAAR,EAAsBwxB,KAAK,CAACtd,IAAN,CAAWw4D,IAAI,CAAC31C,IAAI,CAAC/2B,IAAD,CAAL,CAAf;AACvB,OAFD,MAEO,IAAI+2B,IAAI,CAAC/2B,IAAD,CAAR,EAAgB;AACrB,aAAK,IAAI+U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgiB,IAAI,CAAC/2B,IAAD,CAAJ,CAAWgE,MAA/B,EAAuC+Q,CAAC,EAAxC,EAA4C;AAC1C,cAAIijB,GAAG,GAAG00C,IAAI,CAAC31C,IAAI,CAAC/2B,IAAD,CAAJ,CAAW+U,CAAX,CAAD,CAAd;AACA,cAAIijB,GAAJ,EAASxG,KAAK,CAACtd,IAAN,CAAW8jB,GAAX;AACV;AACF,OALM,MAKA,IAAIjB,IAAI,CAACW,UAAL,IAAmBg1C,IAAI,CAAC31C,IAAI,CAACW,UAAN,CAA3B,EAA8C;AACnDlG,QAAAA,KAAK,CAACtd,IAAN,CAAWw4D,IAAI,CAAC31C,IAAI,CAACW,UAAN,CAAf;AACD,OAFM,MAEA,IAAIg1C,IAAI,CAAC31C,IAAI,CAAC/Y,IAAN,CAAR,EAAqB;AAC1BwT,QAAAA,KAAK,CAACtd,IAAN,CAAWw4D,IAAI,CAAC31C,IAAI,CAAC/Y,IAAN,CAAf;AACD;;AACD,WAAK,IAAIjJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG23D,IAAI,CAACC,OAAL,CAAa3oE,MAAjC,EAAyC+Q,CAAC,EAA1C,EAA8C;AAC5C,YAAIgd,GAAG,GAAG26C,IAAI,CAACC,OAAL,CAAa53D,CAAb,CAAV;AACA,YAAIgd,GAAG,CAACd,IAAJ,CAAS8F,IAAT,EAAe,IAAf,KAAwB/iB,OAAO,CAACwd,KAAD,EAAQO,GAAG,CAACiG,GAAZ,CAAP,IAA2B,CAAC,CAAxD,EACExG,KAAK,CAACtd,IAAN,CAAW6d,GAAG,CAACiG,GAAf;AACH;;AACD,aAAOxG,KAAP;AACD,KAzIoB;AA2IrBo7C,IAAAA,aAAa,EAAE,UAASt5C,IAAT,EAAe4K,OAAf,EAAwB;AACrC,UAAInE,GAAG,GAAG,KAAKA,GAAf;AACAzG,MAAAA,IAAI,GAAGqI,QAAQ,CAAC5B,GAAD,EAAMzG,IAAI,IAAI,IAAR,GAAeyG,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAAhB,GAAuB,CAAtC,GAAyCysB,IAA/C,CAAf;AACA,aAAOqK,gBAAgB,CAAC,IAAD,EAAOrK,IAAI,GAAG,CAAd,EAAiB4K,OAAjB,CAAhB,CAA0CpG,KAAjD;AACD,KA/IoB;AAiJrBsb,IAAAA,YAAY,EAAE,UAAStnB,KAAT,EAAgBiL,IAAhB,EAAsB;AAClC,UAAI3H,GAAJ;AAAA,UAASxD,KAAK,GAAG,KAAKmO,GAAL,CAAS6d,GAAT,CAAaJ,OAAb,EAAjB;AACA,UAAI1rB,KAAK,IAAI,IAAb,EAAmBsD,GAAG,GAAGxD,KAAK,CAACpmB,IAAZ,CAAnB,KACK,IAAI,OAAOsmB,KAAP,IAAgB,QAApB,EAA8BsD,GAAG,GAAGwM,OAAO,CAAC,KAAK7B,GAAN,EAAWjO,KAAX,CAAb,CAA9B,KACAsD,GAAG,GAAGtD,KAAK,GAAGF,KAAK,CAACvI,IAAN,EAAH,GAAkBuI,KAAK,CAACsF,EAAN,EAA7B;AACL,aAAOkiB,YAAY,CAAC,IAAD,EAAOhkB,GAAP,EAAY2H,IAAI,IAAI,MAApB,CAAnB;AACD,KAvJoB;AAyJrBoc,IAAAA,UAAU,EAAE,UAAS/jB,GAAT,EAAc2H,IAAd,EAAoB;AAC9B,aAAOoc,UAAU,CAAC,IAAD,EAAOvX,OAAO,CAAC,KAAK7B,GAAN,EAAW3K,GAAX,CAAd,EAA+B2H,IAAI,IAAI,MAAvC,CAAjB;AACD,KA3JoB;AA6JrBgd,IAAAA,UAAU,EAAE,UAASf,MAAT,EAAiBjc,IAAjB,EAAuB;AACjCic,MAAAA,MAAM,GAAGD,eAAe,CAAC,IAAD,EAAOC,MAAP,EAAejc,IAAI,IAAI,MAAvB,CAAxB;AACA,aAAOgd,UAAU,CAAC,IAAD,EAAOf,MAAM,CAAC78B,IAAd,EAAoB68B,MAAM,CAAC9tB,GAA3B,CAAjB;AACD,KAhKoB;AAkKrB2V,IAAAA,YAAY,EAAE,UAASx5B,MAAT,EAAiB01B,IAAjB,EAAuB;AACnC11B,MAAAA,MAAM,GAAG0xC,eAAe,CAAC,IAAD,EAAO;AAAC7tB,QAAAA,GAAG,EAAE7jB,MAAN;AAAc8U,QAAAA,IAAI,EAAE;AAApB,OAAP,EAA+B4gB,IAAI,IAAI,MAAvC,CAAf,CAA8D7R,GAAvE;AACA,aAAO2V,YAAY,CAAC,KAAKd,GAAN,EAAW14B,MAAM,GAAG,KAAKsN,OAAL,CAAaikC,UAAjC,CAAnB;AACD,KArKoB;AAsKrB9N,IAAAA,YAAY,EAAE,UAASxR,IAAT,EAAeyD,IAAf,EAAqB2b,cAArB,EAAqC;AACjD,UAAI97B,GAAG,GAAG,KAAV;AAAA,UAAiBmuB,OAAjB;;AACA,UAAI,OAAOzR,IAAP,IAAe,QAAnB,EAA6B;AAC3B,YAAI/iB,IAAI,GAAG,KAAKwpB,GAAL,CAASC,KAAT,GAAiB,KAAKD,GAAL,CAASlzB,IAA1B,GAAiC,CAA5C;AACA,YAAIysB,IAAI,GAAG,KAAKyG,GAAL,CAASC,KAApB,EAA2B1G,IAAI,GAAG,KAAKyG,GAAL,CAASC,KAAhB,CAA3B,KACK,IAAI1G,IAAI,GAAG/iB,IAAX,EAAiB;AAAE+iB,UAAAA,IAAI,GAAG/iB,IAAP;AAAaqG,UAAAA,GAAG,GAAG,IAAN;AAAY;AACjDmuB,QAAAA,OAAO,GAAGjL,OAAO,CAAC,KAAKC,GAAN,EAAWzG,IAAX,CAAjB;AACD,OALD,MAKO;AACLyR,QAAAA,OAAO,GAAGzR,IAAV;AACD;;AACD,aAAOmf,eAAe,CAAC,IAAD,EAAO1N,OAAP,EAAgB;AAAC7f,QAAAA,GAAG,EAAE,CAAN;AAAS/O,QAAAA,IAAI,EAAE;AAAf,OAAhB,EAAmC4gB,IAAI,IAAI,MAA3C,EAAmD2b,cAAc,IAAI97B,GAArE,CAAf,CAAyFsO,GAAzF,IACJtO,GAAG,GAAG,KAAKmjB,GAAL,CAAS14B,MAAT,GAAkByjC,YAAY,CAACC,OAAD,CAAjC,GAA6C,CAD5C,CAAP;AAED,KAlLoB;AAoLrB8nC,IAAAA,iBAAiB,EAAE,YAAW;AAAE,aAAOx3B,UAAU,CAAC,KAAK1mC,OAAN,CAAjB;AAAiC,KApL5C;AAqLrBm+D,IAAAA,gBAAgB,EAAE,YAAW;AAAE,aAAO77B,SAAS,CAAC,KAAKtiC,OAAN,CAAhB;AAAgC,KArL1C;AAuLrBo+D,IAAAA,WAAW,EAAE,YAAW;AAAE,aAAO;AAAC1pD,QAAAA,IAAI,EAAE,KAAK1U,OAAL,CAAa0vB,QAApB;AAA8BnN,QAAAA,EAAE,EAAE,KAAKviB,OAAL,CAAa2vB;AAA/C,OAAP;AAA8D,KAvLnE;AAyLrB0uC,IAAAA,SAAS,EAAE,UAAS59C,GAAT,EAAcvE,IAAd,EAAoBkE,MAApB,EAA4BqwB,IAA5B,EAAkCC,KAAlC,EAAyC;AAClD,UAAI1wC,OAAO,GAAG,KAAKA,OAAnB;AACAygB,MAAAA,GAAG,GAAGgkB,YAAY,CAAC,IAAD,EAAOxX,OAAO,CAAC,KAAK7B,GAAN,EAAW3K,GAAX,CAAd,CAAlB;AACA,UAAIlK,GAAG,GAAGkK,GAAG,CAACggB,MAAd;AAAA,UAAsBj5B,IAAI,GAAGiZ,GAAG,CAACjZ,IAAjC;AACA0U,MAAAA,IAAI,CAAC1oB,KAAL,CAAW1B,QAAX,GAAsB,UAAtB;AACAoqB,MAAAA,IAAI,CAAC1lB,YAAL,CAAkB,kBAAlB,EAAsC,MAAtC;AACA,WAAKwJ,OAAL,CAAaq5B,KAAb,CAAmBE,aAAnB,CAAiCrd,IAAjC;AACAlc,MAAAA,OAAO,CAAC6+B,KAAR,CAAc/nC,WAAd,CAA0BolB,IAA1B;;AACA,UAAIu0B,IAAI,IAAI,MAAZ,EAAoB;AAClBl6B,QAAAA,GAAG,GAAGkK,GAAG,CAAClK,GAAV;AACD,OAFD,MAEO,IAAIk6B,IAAI,IAAI,OAAR,IAAmBA,IAAI,IAAI,MAA/B,EAAuC;AAC5C,YAAI6tB,MAAM,GAAGngE,IAAI,CAAC4kB,GAAL,CAAS/iB,OAAO,CAAC2+B,OAAR,CAAgBoB,YAAzB,EAAuC,KAAK3U,GAAL,CAAS14B,MAAhD,CAAb;AAAA,YACA6rE,MAAM,GAAGpgE,IAAI,CAAC4kB,GAAL,CAAS/iB,OAAO,CAAC6+B,KAAR,CAAc/nB,WAAvB,EAAoC9W,OAAO,CAACg/B,SAAR,CAAkBloB,WAAtD,CADT,CAD4C;;AAI5C,YAAI,CAAC25B,IAAI,IAAI,OAAR,IAAmBhwB,GAAG,CAACggB,MAAJ,GAAavkB,IAAI,CAAC9Z,YAAlB,GAAiCk8D,MAArD,KAAgE79C,GAAG,CAAClK,GAAJ,GAAU2F,IAAI,CAAC9Z,YAAnF,EACEmU,GAAG,GAAGkK,GAAG,CAAClK,GAAJ,GAAU2F,IAAI,CAAC9Z,YAArB,CADF,KAEK,IAAIqe,GAAG,CAACggB,MAAJ,GAAavkB,IAAI,CAAC9Z,YAAlB,IAAkCk8D,MAAtC,EACH/nD,GAAG,GAAGkK,GAAG,CAACggB,MAAV;AACF,YAAIj5B,IAAI,GAAG0U,IAAI,CAACyK,WAAZ,GAA0B43C,MAA9B,EACE/2D,IAAI,GAAG+2D,MAAM,GAAGriD,IAAI,CAACyK,WAArB;AACH;;AACDzK,MAAAA,IAAI,CAAC1oB,KAAL,CAAW+iB,GAAX,GAAiBA,GAAG,GAAG,IAAvB;AACA2F,MAAAA,IAAI,CAAC1oB,KAAL,CAAWgU,IAAX,GAAkB0U,IAAI,CAAC1oB,KAAL,CAAWkU,KAAX,GAAmB,EAArC;;AACA,UAAIgpC,KAAK,IAAI,OAAb,EAAsB;AACpBlpC,QAAAA,IAAI,GAAGxH,OAAO,CAAC6+B,KAAR,CAAc/nB,WAAd,GAA4BoF,IAAI,CAACyK,WAAxC;AACAzK,QAAAA,IAAI,CAAC1oB,KAAL,CAAWkU,KAAX,GAAmB,KAAnB;AACD,OAHD,MAGO;AACL,YAAIgpC,KAAK,IAAI,MAAb,EAAqBlpC,IAAI,GAAG,CAAP,CAArB,KACK,IAAIkpC,KAAK,IAAI,QAAb,EAAuBlpC,IAAI,GAAG,CAACxH,OAAO,CAAC6+B,KAAR,CAAc/nB,WAAd,GAA4BoF,IAAI,CAACyK,WAAlC,IAAiD,CAAxD;AAC5BzK,QAAAA,IAAI,CAAC1oB,KAAL,CAAWgU,IAAX,GAAkBA,IAAI,GAAG,IAAzB;AACD;;AACD,UAAI4Y,MAAJ,EACEqtB,cAAc,CAAC,IAAD,EAAO;AAACjmC,QAAAA,IAAD;AAAO+O,QAAAA,GAAP;AAAY7O,QAAAA,KAAK,EAAEF,IAAI,GAAG0U,IAAI,CAACyK,WAA/B;AAA4C8Z,QAAAA,MAAM,EAAElqB,GAAG,GAAG2F,IAAI,CAAC9Z;AAA/D,OAAP,CAAd;AACH,KA1NoB;AA4NrBo8D,IAAAA,gBAAgB,EAAEvpB,QAAQ,CAAC2e,SAAD,CA5NL;AA6NrB6K,IAAAA,iBAAiB,EAAExpB,QAAQ,CAACgf,UAAD,CA7NN;AA8NrByK,IAAAA,cAAc,EAAE1K,OA9NK;AA+NrB2K,IAAAA,kBAAkB,EAAE1pB,QAAQ,CAACwf,WAAD,CA/NP;AAiOrBvC,IAAAA,WAAW,EAAE,UAASzoD,GAAT,EAAc;AACzB,UAAIylD,QAAQ,CAAC1jD,cAAT,CAAwB/B,GAAxB,CAAJ,EACE,OAAOylD,QAAQ,CAACzlD,GAAD,CAAR,CAAcrI,IAAd,CAAmB,IAAnB,EAAyB,IAAzB,CAAP;AACH,KApOoB;AAsOrB+6D,IAAAA,eAAe,EAAElnB,QAAQ,CAAC,UAAS10C,IAAT,EAAe;AAAE47D,MAAAA,eAAe,CAAC,IAAD,EAAO57D,IAAP,CAAf;AAA6B,KAA/C,CAtOJ;AAwOrBq+D,IAAAA,QAAQ,EAAE,UAASlqD,IAAT,EAAemqD,MAAf,EAAuB3J,IAAvB,EAA6B3G,QAA7B,EAAuC;AAC/C,UAAIl4C,GAAG,GAAG,CAAV;;AACA,UAAIwoD,MAAM,GAAG,CAAb,EAAgB;AAAExoD,QAAAA,GAAG,GAAG,CAAC,CAAP;AAAUwoD,QAAAA,MAAM,GAAG,CAACA,MAAV;AAAkB;;AAC9C,UAAIz7C,GAAG,GAAG6J,OAAO,CAAC,KAAK7B,GAAN,EAAW1W,IAAX,CAAjB;;AACA,WAAK,IAAItO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGy4D,MAApB,EAA4B,EAAEz4D,CAA9B,EAAiC;AAC/Bgd,QAAAA,GAAG,GAAGw7C,QAAQ,CAAC,KAAKxzC,GAAN,EAAWhI,GAAX,EAAgB/M,GAAhB,EAAqB6+C,IAArB,EAA2B3G,QAA3B,CAAd;AACA,YAAInrC,GAAG,CAAC07C,OAAR,EAAiB;AAClB;;AACD,aAAO17C,GAAP;AACD,KAjPoB;AAmPrButC,IAAAA,KAAK,EAAE1b,QAAQ,CAAC,UAAS5+B,GAAT,EAAc6+C,IAAd,EAAoB;AAClC,WAAK3N,kBAAL,CAAwBtqC,KAAK,IAAI;AAC/B,YAAI,KAAKjd,OAAL,CAAasJ,KAAb,IAAsB,KAAK8hB,GAAL,CAASqrB,MAA/B,IAAyCx5B,KAAK,CAACmsB,KAAN,EAA7C,EACE,OAAOw1B,QAAQ,CAAC,KAAKxzC,GAAN,EAAWnO,KAAK,CAACpmB,IAAjB,EAAuBwf,GAAvB,EAA4B6+C,IAA5B,EAAkC,KAAK1iD,OAAL,CAAausD,eAA/C,CAAf,CADF,KAGE,OAAO1oD,GAAG,GAAG,CAAN,GAAU4G,KAAK,CAACvI,IAAN,EAAV,GAAyBuI,KAAK,CAACsF,EAAN,EAAhC;AACH,OALD,EAKGjC,QALH;AAMD,KAPc,CAnPM;AA4PrB8wC,IAAAA,OAAO,EAAEnc,QAAQ,CAAC,UAAS5+B,GAAT,EAAc6+C,IAAd,EAAoB;AACpC,UAAIjsB,GAAG,GAAG,KAAK7d,GAAL,CAAS6d,GAAnB;AAAA,UAAwB7d,GAAG,GAAG,KAAKA,GAAnC;AACA,UAAI6d,GAAG,CAAC8R,iBAAJ,EAAJ,EACE3vB,GAAG,CAACu8B,gBAAJ,CAAqB,EAArB,EAAyB,IAAzB,EAA+B,SAA/B,EADF,KAGEoG,mBAAmB,CAAC,IAAD,EAAO9wC,KAAK,IAAI;AACjC,YAAI8nB,KAAK,GAAG65B,QAAQ,CAACxzC,GAAD,EAAMnO,KAAK,CAACpmB,IAAZ,EAAkBwf,GAAlB,EAAuB6+C,IAAvB,EAA6B,KAA7B,CAApB;AACA,eAAO7+C,GAAG,GAAG,CAAN,GAAU;AAAC3B,UAAAA,IAAI,EAAEqwB,KAAP;AAAcxiB,UAAAA,EAAE,EAAEtF,KAAK,CAACpmB;AAAxB,SAAV,GAA0C;AAAC6d,UAAAA,IAAI,EAAEuI,KAAK,CAACpmB,IAAb;AAAmB0rB,UAAAA,EAAE,EAAEwiB;AAAvB,SAAjD;AACD,OAHkB,CAAnB;AAIH,KATgB,CA5PI;AAuQrBi6B,IAAAA,QAAQ,EAAE,UAAStqD,IAAT,EAAemqD,MAAf,EAAuB3J,IAAvB,EAA6B+J,UAA7B,EAAyC;AACjD,UAAI5oD,GAAG,GAAG,CAAV;AAAA,UAAa9L,CAAC,GAAG00D,UAAjB;;AACA,UAAIJ,MAAM,GAAG,CAAb,EAAgB;AAAExoD,QAAAA,GAAG,GAAG,CAAC,CAAP;AAAUwoD,QAAAA,MAAM,GAAG,CAACA,MAAV;AAAkB;;AAC9C,UAAIz7C,GAAG,GAAG6J,OAAO,CAAC,KAAK7B,GAAN,EAAW1W,IAAX,CAAjB;;AACA,WAAK,IAAItO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGy4D,MAApB,EAA4B,EAAEz4D,CAA9B,EAAiC;AAC/B,YAAIi+B,MAAM,GAAGI,YAAY,CAAC,IAAD,EAAOrhB,GAAP,EAAY,KAAZ,CAAzB;AACA,YAAI7Y,CAAC,IAAI,IAAT,EAAeA,CAAC,GAAG85B,MAAM,CAAC78B,IAAX,CAAf,KACK68B,MAAM,CAAC78B,IAAP,GAAc+C,CAAd;AACL6Y,QAAAA,GAAG,GAAG47C,QAAQ,CAAC,IAAD,EAAO36B,MAAP,EAAehuB,GAAf,EAAoB6+C,IAApB,CAAd;AACA,YAAI9xC,GAAG,CAAC07C,OAAR,EAAiB;AAClB;;AACD,aAAO17C,GAAP;AACD,KAnRoB;AAqRrBktC,IAAAA,KAAK,EAAErb,QAAQ,CAAC,UAAS5+B,GAAT,EAAc6+C,IAAd,EAAoB;AAClC,UAAI9pC,GAAG,GAAG,KAAKA,GAAf;AAAA,UAAoB8zC,KAAK,GAAG,EAA5B;AACA,UAAItkE,QAAQ,GAAG,CAAC,KAAKoF,OAAL,CAAasJ,KAAd,IAAuB,CAAC8hB,GAAG,CAACqrB,MAA5B,IAAsCrrB,GAAG,CAAC6d,GAAJ,CAAQ8R,iBAAR,EAArD;AACA3vB,MAAAA,GAAG,CAACm8B,kBAAJ,CAAuBtqC,KAAK,IAAI;AAC9B,YAAIriB,QAAJ,EACE,OAAOyb,GAAG,GAAG,CAAN,GAAU4G,KAAK,CAACvI,IAAN,EAAV,GAAyBuI,KAAK,CAACsF,EAAN,EAAhC;AACF,YAAI48C,OAAO,GAAG16B,YAAY,CAAC,IAAD,EAAOxnB,KAAK,CAACpmB,IAAb,EAAmB,KAAnB,CAA1B;AACA,YAAIomB,KAAK,CAACgiD,UAAN,IAAoB,IAAxB,EAA8BE,OAAO,CAAC33D,IAAR,GAAeyV,KAAK,CAACgiD,UAArB;AAC9BC,QAAAA,KAAK,CAAC35D,IAAN,CAAW45D,OAAO,CAAC33D,IAAnB;AACA,YAAIiZ,GAAG,GAAGu+C,QAAQ,CAAC,IAAD,EAAOG,OAAP,EAAgB9oD,GAAhB,EAAqB6+C,IAArB,CAAlB;AACA,YAAIA,IAAI,IAAI,MAAR,IAAkBj4C,KAAK,IAAImO,GAAG,CAAC6d,GAAJ,CAAQJ,OAAR,EAA/B,EACEkG,cAAc,CAAC,IAAD,EAAOvK,UAAU,CAAC,IAAD,EAAO/jB,GAAP,EAAY,KAAZ,CAAV,CAA6BlK,GAA7B,GAAmC4oD,OAAO,CAAC5oD,GAAlD,CAAd;AACF,eAAOkK,GAAP;AACD,OAVD,EAUGH,QAVH;AAWA,UAAI4+C,KAAK,CAAC7pE,MAAV,EAAkB,KAAK,IAAI+Q,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGglB,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe7zC,MAAnC,EAA2C+Q,CAAC,EAA5C,EAChBglB,GAAG,CAAC6d,GAAJ,CAAQC,MAAR,CAAe9iC,CAAf,EAAkB64D,UAAlB,GAA+BC,KAAK,CAAC94D,CAAD,CAApC;AACH,KAhBc,CArRM;AAuSrB;AACA6vD,IAAAA,UAAU,EAAE,UAASx1C,GAAT,EAAc;AACxB,UAAI2K,GAAG,GAAG,KAAKA,GAAf;AAAA,UAAoBzG,IAAI,GAAGwG,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAAP,CAAuBpkB,IAAlD;AACA,UAAI4c,KAAK,GAAGsD,GAAG,CAACmB,EAAhB;AAAA,UAAoB3Z,GAAG,GAAGwY,GAAG,CAACmB,EAA9B;;AACA,UAAI+C,IAAJ,EAAU;AACR,YAAI7C,MAAM,GAAG,KAAK+7C,SAAL,CAAep9C,GAAf,EAAoB,WAApB,CAAb;AACA,YAAI,CAACA,GAAG,CAAC0C,MAAJ,IAAc,QAAd,IAA0Blb,GAAG,IAAI0c,IAAI,CAACtvB,MAAvC,KAAkD8nB,KAAtD,EAA6D,EAAEA,KAAF,CAA7D,KAA2E,EAAElV,GAAF;AAC3E,YAAIm3D,SAAS,GAAGz6C,IAAI,CAACvC,MAAL,CAAYjF,KAAZ,CAAhB;AACA,YAAIkiD,KAAK,GAAGx9C,UAAU,CAACu9C,SAAD,EAAYt9C,MAAZ,CAAV,GACRF,EAAE,IAAIC,UAAU,CAACD,EAAD,EAAKE,MAAL,CADR,GAER,KAAK/L,IAAL,CAAUqpD,SAAV,IAAuBx9C,EAAE,IAAI,KAAK7L,IAAL,CAAU6L,EAAV,CAA7B,GACAA,EAAE,IAAK,CAAC,KAAK7L,IAAL,CAAU6L,EAAV,CAAD,IAAkB,CAACC,UAAU,CAACD,EAAD,CAHxC;;AAIA,eAAOzE,KAAK,GAAG,CAAR,IAAakiD,KAAK,CAAC16C,IAAI,CAACvC,MAAL,CAAYjF,KAAK,GAAG,CAApB,CAAD,CAAzB,EAAmD,EAAEA,KAAF;;AACnD,eAAOlV,GAAG,GAAG0c,IAAI,CAACtvB,MAAX,IAAqBgqE,KAAK,CAAC16C,IAAI,CAACvC,MAAL,CAAYna,GAAZ,CAAD,CAAjC,EAAqD,EAAEA,GAAF;AACtD;;AACD,aAAO,IAAI6yC,KAAJ,CAAUpuB,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAWxH,KAAX,CAAb,EAAgCuP,GAAG,CAACjM,GAAG,CAACkE,IAAL,EAAW1c,GAAX,CAAnC,CAAP;AACD,KAvToB;AAyTrBuqD,IAAAA,eAAe,EAAE,UAASjhE,KAAT,EAAgB;AAC/B,UAAIA,KAAK,IAAI,IAAT,IAAiBA,KAAK,IAAI,KAAK43B,KAAL,CAAWpK,SAAzC,EAAoD;AACpD,UAAI,KAAKoK,KAAL,CAAWpK,SAAX,GAAuB,CAAC,KAAKoK,KAAL,CAAWpK,SAAvC,EACEb,QAAQ,CAAC,KAAKle,OAAL,CAAa6rC,SAAd,EAAyB,sBAAzB,CAAR,CADF,KAGE5vB,OAAO,CAAC,KAAKjc,OAAL,CAAa6rC,SAAd,EAAyB,sBAAzB,CAAP;AAEF3mB,MAAAA,MAAM,CAAC,IAAD,EAAO,iBAAP,EAA0B,IAA1B,EAAgC,KAAKiE,KAAL,CAAWpK,SAA3C,CAAN;AACD,KAjUoB;AAkUrBktB,IAAAA,QAAQ,EAAE,YAAW;AAAE,aAAO,KAAKjsC,OAAL,CAAaq5B,KAAb,CAAmBw6B,QAAnB,MAAiC91C,SAAS,EAAjD;AAAqD,KAlUvD;AAmUrB4sC,IAAAA,UAAU,EAAE,YAAW;AAAE,aAAO,CAAC,EAAE,KAAKn4C,OAAL,CAAangB,QAAb,IAAyB,KAAK+4B,GAAL,CAASw2B,QAApC,CAAR;AAAuD,KAnU3D;AAqUrB0d,IAAAA,QAAQ,EAAErqB,QAAQ,CAAC,UAAU1qC,CAAV,EAAa4C,CAAb,EAAgB;AAAEkiC,MAAAA,cAAc,CAAC,IAAD,EAAO9kC,CAAP,EAAU4C,CAAV,CAAd;AAA4B,KAA/C,CArUG;AAsUrBoyD,IAAAA,aAAa,EAAE,YAAW;AACxB,UAAI3/B,QAAQ,GAAG,KAAK5/B,OAAL,CAAa4/B,QAA5B;AACA,aAAO;AAACp4B,QAAAA,IAAI,EAAEo4B,QAAQ,CAAClpB,UAAhB;AAA4BH,QAAAA,GAAG,EAAEqpB,QAAQ,CAACpnC,SAA1C;AACC9F,QAAAA,MAAM,EAAEktC,QAAQ,CAACiQ,YAAT,GAAwBpQ,SAAS,CAAC,IAAD,CAAjC,GAA0C,KAAKz/B,OAAL,CAAaggC,SADhE;AAECxtC,QAAAA,KAAK,EAAEotC,QAAQ,CAAC/oB,WAAT,GAAuB4oB,SAAS,CAAC,IAAD,CAAhC,GAAyC,KAAKz/B,OAAL,CAAa6/B,QAF9D;AAGCE,QAAAA,YAAY,EAAED,aAAa,CAAC,IAAD,CAH5B;AAGoChpB,QAAAA,WAAW,EAAE6oB,YAAY,CAAC,IAAD;AAH7D,OAAP;AAID,KA5UoB;AA8UrB8N,IAAAA,cAAc,EAAEwH,QAAQ,CAAC,UAASh4B,KAAT,EAAgB0wB,MAAhB,EAAwB;AAC/C,UAAI1wB,KAAK,IAAI,IAAb,EAAmB;AACjBA,QAAAA,KAAK,GAAG;AAACvI,UAAAA,IAAI,EAAE,KAAK0W,GAAL,CAAS6d,GAAT,CAAaJ,OAAb,GAAuBhyC,IAA9B;AAAoC0rB,UAAAA,EAAE,EAAE;AAAxC,SAAR;AACA,YAAIorB,MAAM,IAAI,IAAd,EAAoBA,MAAM,GAAG,KAAKn7B,OAAL,CAAa48B,kBAAtB;AACrB,OAHD,MAGO,IAAI,OAAOnyB,KAAP,IAAgB,QAApB,EAA8B;AACnCA,QAAAA,KAAK,GAAG;AAACvI,UAAAA,IAAI,EAAEgY,GAAG,CAACzP,KAAD,EAAQ,CAAR,CAAV;AAAsBsF,UAAAA,EAAE,EAAE;AAA1B,SAAR;AACD,OAFM,MAEA,IAAItF,KAAK,CAACvI,IAAN,IAAc,IAAlB,EAAwB;AAC7BuI,QAAAA,KAAK,GAAG;AAACvI,UAAAA,IAAI,EAAEuI,KAAP;AAAcsF,UAAAA,EAAE,EAAE;AAAlB,SAAR;AACD;;AACD,UAAI,CAACtF,KAAK,CAACsF,EAAX,EAAetF,KAAK,CAACsF,EAAN,GAAWtF,KAAK,CAACvI,IAAjB;AACfuI,MAAAA,KAAK,CAAC0wB,MAAN,GAAeA,MAAM,IAAI,CAAzB;;AAEA,UAAI1wB,KAAK,CAACvI,IAAN,CAAWiQ,IAAX,IAAmB,IAAvB,EAA6B;AAC3B2qB,QAAAA,aAAa,CAAC,IAAD,EAAOryB,KAAP,CAAb;AACD,OAFD,MAEO;AACLsyB,QAAAA,mBAAmB,CAAC,IAAD,EAAOtyB,KAAK,CAACvI,IAAb,EAAmBuI,KAAK,CAACsF,EAAzB,EAA6BtF,KAAK,CAAC0wB,MAAnC,CAAnB;AACD;AACF,KAjBuB,CA9UH;AAiWrBgf,IAAAA,OAAO,EAAE1X,QAAQ,CAAC,UAASziD,KAAT,EAAgBE,MAAhB,EAAwB;AACxC,UAAI8sE,SAAS,GAAGn2C,GAAG,IAAI,OAAOA,GAAP,IAAc,QAAd,IAA0B,QAAQtT,IAAR,CAAazkB,MAAM,CAAC+3B,GAAD,CAAnB,CAA1B,GAAsDA,GAAG,GAAG,IAA5D,GAAmEA,GAA1F;;AACA,UAAI72B,KAAK,IAAI,IAAb,EAAmB,KAAKwN,OAAL,CAAa2+B,OAAb,CAAqBnrC,KAArB,CAA2BhB,KAA3B,GAAmCgtE,SAAS,CAAChtE,KAAD,CAA5C;AACnB,UAAIE,MAAM,IAAI,IAAd,EAAoB,KAAKsN,OAAL,CAAa2+B,OAAb,CAAqBnrC,KAArB,CAA2Bd,MAA3B,GAAoC8sE,SAAS,CAAC9sE,MAAD,CAA7C;AACpB,UAAI,KAAK8f,OAAL,CAAa4tB,YAAjB,EAA+B8C,yBAAyB,CAAC,IAAD,CAAzB;AAC/B,UAAIlX,MAAM,GAAG,KAAKhsB,OAAL,CAAa0vB,QAA1B;AACA,WAAKtE,GAAL,CAASQ,IAAT,CAAcI,MAAd,EAAsB,KAAKhsB,OAAL,CAAa2vB,MAAnC,EAA2ChL,IAAI,IAAI;AACjD,YAAIA,IAAI,CAACmZ,OAAT,EAAkB,KAAK,IAAI13B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGue,IAAI,CAACmZ,OAAL,CAAazoC,MAAjC,EAAyC+Q,CAAC,EAA1C,EAChB,IAAIue,IAAI,CAACmZ,OAAL,CAAa13B,CAAb,EAAgB+3B,SAApB,EAA+B;AAAEiK,UAAAA,aAAa,CAAC,IAAD,EAAOpc,MAAP,EAAe,QAAf,CAAb;AAAuC;AAAO;AACjF,UAAEA,MAAF;AACD,OAJD;AAKA,WAAKrG,KAAL,CAAWyb,WAAX,GAAyB,IAAzB;AACAlc,MAAAA,MAAM,CAAC,IAAD,EAAO,SAAP,EAAkB,IAAlB,CAAN;AACD,KAbgB,CAjWI;AAgXrB8vB,IAAAA,SAAS,EAAE,UAASr2B,CAAT,EAAW;AAAC,aAAOo2B,OAAO,CAAC,IAAD,EAAOp2B,CAAP,CAAd;AAAwB,KAhX1B;AAiXrBo0B,IAAAA,cAAc,EAAE,YAAU;AAAC,aAAOA,cAAc,CAAC,IAAD,CAArB;AAA4B,KAjXlC;AAkXrBO,IAAAA,YAAY,EAAE,YAAU;AAAC,aAAOA,YAAY,CAAC,IAAD,CAAnB;AAA0B,KAlX9B;AAoXrB+kB,IAAAA,OAAO,EAAEpjB,QAAQ,CAAC,YAAW;AAC3B,UAAIiP,SAAS,GAAG,KAAKlkD,OAAL,CAAasjC,gBAA7B;AACAqE,MAAAA,SAAS,CAAC,IAAD,CAAT;AACA,WAAKhiB,KAAL,CAAWyb,WAAX,GAAyB,IAAzB;AACAgC,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAiM,MAAAA,cAAc,CAAC,IAAD,EAAO,KAAKjkB,GAAL,CAAS1U,UAAhB,EAA4B,KAAK0U,GAAL,CAAS5yB,SAArC,CAAd;AACA2/C,MAAAA,iBAAiB,CAAC,KAAKn4C,OAAN,CAAjB;AACA,UAAIkkD,SAAS,IAAI,IAAb,IAAqB/lD,IAAI,CAAC6pB,GAAL,CAASk8B,SAAS,GAAGxd,UAAU,CAAC,KAAK1mC,OAAN,CAA/B,IAAiD,EAAtE,IAA4E,KAAKwS,OAAL,CAAa4tB,YAA7F,EACE8G,mBAAmB,CAAC,IAAD,CAAnB;AACFhiB,MAAAA,MAAM,CAAC,IAAD,EAAO,SAAP,EAAkB,IAAlB,CAAN;AACD,KAVgB,CApXI;AAgYrBu6C,IAAAA,OAAO,EAAExqB,QAAQ,CAAC,UAAS7pB,GAAT,EAAc;AAC9B,UAAI+G,GAAG,GAAG,KAAK/G,GAAf;AACA+G,MAAAA,GAAG,CAAC/M,EAAJ,GAAS,IAAT,CAF8B;;AAI9B,UAAI,KAAK+D,KAAL,CAAW0rC,aAAf,EAA8B,KAAK1rC,KAAL,CAAW0rC,aAAX;AAC9B1X,MAAAA,SAAS,CAAC,IAAD,EAAO/xB,GAAP,CAAT;AACAgY,MAAAA,WAAW,CAAC,IAAD,CAAX;AACA,WAAKpjC,OAAL,CAAaq5B,KAAb,CAAmBpnB,KAAnB;AACAo9B,MAAAA,cAAc,CAAC,IAAD,EAAOjkB,GAAG,CAAC1U,UAAX,EAAuB0U,GAAG,CAAC5yB,SAA3B,CAAd;AACA,WAAKmtB,KAAL,CAAWiqB,WAAX,GAAyB,IAAzB;AACAzU,MAAAA,WAAW,CAAC,IAAD,EAAO,SAAP,EAAkB,IAAlB,EAAwBhJ,GAAxB,CAAX;AACA,aAAOA,GAAP;AACD,KAZgB,CAhYI;AA8YrButC,IAAAA,MAAM,EAAE,UAASC,UAAT,EAAqB;AAC3B,UAAIC,OAAO,GAAG,KAAKptD,OAAL,CAAaotD,OAA3B;AACA,aAAOA,OAAO,IAAI1iE,MAAM,CAACqO,SAAP,CAAiBC,cAAjB,CAAgCpK,IAAhC,CAAqCw+D,OAArC,EAA8CD,UAA9C,CAAX,GAAuEC,OAAO,CAACD,UAAD,CAA9E,GAA6FA,UAApG;AACD,KAjZoB;AAmZrBrH,IAAAA,aAAa,EAAE,YAAU;AAAC,aAAO,KAAKt4D,OAAL,CAAaq5B,KAAb,CAAmBw6B,QAAnB,EAAP;AAAqC,KAnZ1C;AAoZrBgM,IAAAA,iBAAiB,EAAE,YAAU;AAAC,aAAO,KAAK7/D,OAAL,CAAa2+B,OAApB;AAA4B,KApZrC;AAqZrBmhC,IAAAA,kBAAkB,EAAE,YAAU;AAAC,aAAO,KAAK9/D,OAAL,CAAa4/B,QAApB;AAA6B,KArZvC;AAsZrBmgC,IAAAA,gBAAgB,EAAE,YAAU;AAAC,aAAO,KAAK//D,OAAL,CAAa0+B,OAApB;AAA4B;AAtZpC,GAAvB;AAwZA5Y,EAAAA,UAAU,CAACikC,UAAD,CAAV;;AAEAA,EAAAA,UAAU,CAACiW,cAAX,GAA4B,UAAS3uE,IAAT,EAAege,IAAf,EAAqB9d,KAArB,EAA4B;AACtD,QAAI,CAAC2rE,OAAO,CAAC1xD,cAAR,CAAuBna,IAAvB,CAAL,EAAmC6rE,OAAO,CAAC7rE,IAAD,CAAP,GAAgB04D,UAAU,CAAC14D,IAAD,CAAV,GAAmB;AAAC2sE,MAAAA,OAAO,EAAE;AAAV,KAAnC;AACnCd,IAAAA,OAAO,CAAC7rE,IAAD,CAAP,CAAcge,IAAd,IAAsB9d,KAAtB;AACD,GAHD;;AAIAw4D,EAAAA,UAAU,CAACkW,oBAAX,GAAkC,UAAS5uE,IAAT,EAAege,IAAf,EAAqB6wD,SAArB,EAAgC3uE,KAAhC,EAAuC;AACvEw4D,IAAAA,UAAU,CAACiW,cAAX,CAA0B3uE,IAA1B,EAAgCge,IAAhC,EAAsC9d,KAAtC;;AACA2rE,IAAAA,OAAO,CAAC7rE,IAAD,CAAP,CAAc2sE,OAAd,CAAsBz4D,IAAtB,CAA2B;AAAC+c,MAAAA,IAAI,EAAE49C,SAAP;AAAkB72C,MAAAA,GAAG,EAAE93B;AAAvB,KAA3B;AACD,GAHD;AAID;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASqtE,QAAT,CAAkBxzC,GAAlB,EAAuB3K,GAAvB,EAA4BpK,GAA5B,EAAiC6+C,IAAjC,EAAuC3G,QAAvC,EAAiD;AAC/C,MAAIpN,MAAM,GAAG1gC,GAAb;AACA,MAAI0/C,OAAO,GAAG9pD,GAAd;AACA,MAAI+f,OAAO,GAAGjL,OAAO,CAACC,GAAD,EAAM3K,GAAG,CAACkE,IAAV,CAArB;AACA,MAAIy7C,OAAO,GAAG7R,QAAQ,IAAInjC,GAAG,CAAChoB,SAAJ,IAAiB,KAA7B,GAAqC,CAACiT,GAAtC,GAA4CA,GAA1D;;AACA,WAASgqD,YAAT,GAAwB;AACtB,QAAIn5C,CAAC,GAAGzG,GAAG,CAACkE,IAAJ,GAAWy7C,OAAnB;AACA,QAAIl5C,CAAC,GAAGkE,GAAG,CAACC,KAAR,IAAiBnE,CAAC,IAAIkE,GAAG,CAACC,KAAJ,GAAYD,GAAG,CAAClzB,IAA1C,EAAgD,OAAO,KAAP;AAChDuoB,IAAAA,GAAG,GAAG,IAAIiM,GAAJ,CAAQxF,CAAR,EAAWzG,GAAG,CAACmB,EAAf,EAAmBnB,GAAG,CAAC0C,MAAvB,CAAN;AACA,WAAOiT,OAAO,GAAGjL,OAAO,CAACC,GAAD,EAAMlE,CAAN,CAAxB;AACD;;AACD,WAASo5C,QAAT,CAAkBC,WAAlB,EAA+B;AAC7B,QAAIv2C,IAAJ;;AACA,QAAIkrC,IAAI,IAAI,WAAZ,EAAyB;AACvB,UAAItzC,EAAE,GAAGwU,OAAO,CAAC71B,IAAR,CAAakK,UAAb,CAAwBgW,GAAG,CAACmB,EAAJ,IAAUvL,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAC,CAAzB,CAAxB,CAAT;;AACA,UAAI/hB,KAAK,CAACstB,EAAD,CAAT,EAAe;AACboI,QAAAA,IAAI,GAAG,IAAP;AACD,OAFD,MAEO;AACL,YAAIw2C,MAAM,GAAGnqD,GAAG,GAAG,CAAN,GAAUuL,EAAE,IAAI,MAAN,IAAgBA,EAAE,GAAG,MAA/B,GAAwCA,EAAE,IAAI,MAAN,IAAgBA,EAAE,GAAG,MAA1E;AACAoI,QAAAA,IAAI,GAAG,IAAI0C,GAAJ,CAAQjM,GAAG,CAACkE,IAAZ,EAAkBxmB,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY5kB,IAAI,CAACyiB,GAAL,CAASwV,OAAO,CAAC71B,IAAR,CAAalL,MAAtB,EAA8BorB,GAAG,CAACmB,EAAJ,GAASvL,GAAG,IAAImqD,MAAM,GAAG,CAAH,GAAO,CAAjB,CAA1C,CAAZ,CAAlB,EAA+F,CAACnqD,GAAhG,CAAP;AACD;AACF,KARD,MAQO,IAAIk4C,QAAJ,EAAc;AACnBvkC,MAAAA,IAAI,GAAG0kC,YAAY,CAACtjC,GAAG,CAAChG,EAAL,EAASgR,OAAT,EAAkB3V,GAAlB,EAAuBpK,GAAvB,CAAnB;AACD,KAFM,MAEA;AACL2T,MAAAA,IAAI,GAAGqkC,aAAa,CAACj4B,OAAD,EAAU3V,GAAV,EAAepK,GAAf,CAApB;AACD;;AACD,QAAI2T,IAAI,IAAI,IAAZ,EAAkB;AAChB,UAAI,CAACu2C,WAAD,IAAgBF,YAAY,EAAhC,EACE5/C,GAAG,GAAG6tC,SAAS,CAACC,QAAD,EAAWnjC,GAAG,CAAChG,EAAf,EAAmBgR,OAAnB,EAA4B3V,GAAG,CAACkE,IAAhC,EAAsCy7C,OAAtC,CAAf,CADF,KAGE,OAAO,KAAP;AACH,KALD,MAKO;AACL3/C,MAAAA,GAAG,GAAGuJ,IAAN;AACD;;AACD,WAAO,IAAP;AACD;;AAED,MAAIkrC,IAAI,IAAI,MAAR,IAAkBA,IAAI,IAAI,WAA9B,EAA2C;AACzCoL,IAAAA,QAAQ;AACT,GAFD,MAEO,IAAIpL,IAAI,IAAI,QAAZ,EAAsB;AAC3BoL,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,GAFM,MAEA,IAAIpL,IAAI,IAAI,MAAR,IAAkBA,IAAI,IAAI,OAA9B,EAAuC;AAC5C,QAAIuL,OAAO,GAAG,IAAd;AAAA,QAAoB5lC,KAAK,GAAGq6B,IAAI,IAAI,OAApC;AACA,QAAIpzC,MAAM,GAAGsJ,GAAG,CAAChG,EAAJ,IAAUgG,GAAG,CAAChG,EAAJ,CAAOy4C,SAAP,CAAiBp9C,GAAjB,EAAsB,WAAtB,CAAvB;;AACA,SAAK,IAAI4K,KAAK,GAAG,IAAjB,GAAwBA,KAAK,GAAG,KAAhC,EAAuC;AACrC,UAAIhV,GAAG,GAAG,CAAN,IAAW,CAACiqD,QAAQ,CAAC,CAACj1C,KAAF,CAAxB,EAAkC;AAClC,UAAIjI,GAAG,GAAGgT,OAAO,CAAC71B,IAAR,CAAa6hB,MAAb,CAAoB3B,GAAG,CAACmB,EAAxB,KAA+B,IAAzC;AACA,UAAIvwB,IAAI,GAAGwwB,UAAU,CAACuB,GAAD,EAAMtB,MAAN,CAAV,GAA0B,GAA1B,GACP+Y,KAAK,IAAIzX,GAAG,IAAI,IAAhB,GAAuB,GAAvB,GACA,CAACyX,KAAD,IAAU,KAAK9kB,IAAL,CAAUqN,GAAV,CAAV,GAA2B,IAA3B,GACA,GAHJ;AAIA,UAAIyX,KAAK,IAAI,CAACxP,KAAV,IAAmB,CAACh6B,IAAxB,EAA8BA,IAAI,GAAG,GAAP;;AAC9B,UAAIovE,OAAO,IAAIA,OAAO,IAAIpvE,IAA1B,EAAgC;AAC9B,YAAIglB,GAAG,GAAG,CAAV,EAAa;AAACA,UAAAA,GAAG,GAAG,CAAN;AAASiqD,UAAAA,QAAQ;AAAI7/C,UAAAA,GAAG,CAAC0C,MAAJ,GAAa,OAAb;AAAqB;;AACxD;AACD;;AAED,UAAI9xB,IAAJ,EAAUovE,OAAO,GAAGpvE,IAAV;AACV,UAAIglB,GAAG,GAAG,CAAN,IAAW,CAACiqD,QAAQ,CAAC,CAACj1C,KAAF,CAAxB,EAAkC;AACnC;AACF;;AACD,MAAI/pB,MAAM,GAAG0/C,UAAU,CAAC51B,GAAD,EAAM3K,GAAN,EAAW0gC,MAAX,EAAmBgf,OAAnB,EAA4B,IAA5B,CAAvB;AACA,MAAIvzC,cAAc,CAACu0B,MAAD,EAAS7/C,MAAT,CAAlB,EAAoCA,MAAM,CAACw9D,OAAP,GAAiB,IAAjB;AACpC,SAAOx9D,MAAP;AACD;AAGD;AACA;;;AACA,SAAS09D,QAAT,CAAkB55C,EAAlB,EAAsB3E,GAAtB,EAA2BpK,GAA3B,EAAgC6+C,IAAhC,EAAsC;AACpC,MAAI9pC,GAAG,GAAGhG,EAAE,CAACgG,GAAb;AAAA,MAAkB7gB,CAAC,GAAGkW,GAAG,CAACjZ,IAA1B;AAAA,MAAgC2F,CAAhC;;AACA,MAAI+nD,IAAI,IAAI,MAAZ,EAAoB;AAClB,QAAIwL,QAAQ,GAAGviE,IAAI,CAACyiB,GAAL,CAASwE,EAAE,CAACplB,OAAH,CAAW2+B,OAAX,CAAmBoB,YAA5B,EAA0C/5B,MAAM,CAACunC,WAAP,IAAsB32C,QAAQ,CAAC4gB,eAAT,CAAyBuoB,YAAzF,CAAf;AACA,QAAI4gC,UAAU,GAAGxiE,IAAI,CAAC4kB,GAAL,CAAS29C,QAAQ,GAAG,KAAKh6B,UAAU,CAACthB,EAAE,CAACplB,OAAJ,CAAnC,EAAiD,CAAjD,CAAjB;AACAmN,IAAAA,CAAC,GAAG,CAACkJ,GAAG,GAAG,CAAN,GAAUoK,GAAG,CAACggB,MAAd,GAAuBhgB,GAAG,CAAClK,GAA5B,IAAmCF,GAAG,GAAGsqD,UAA7C;AAED,GALD,MAKO,IAAIzL,IAAI,IAAI,MAAZ,EAAoB;AACzB/nD,IAAAA,CAAC,GAAGkJ,GAAG,GAAG,CAAN,GAAUoK,GAAG,CAACggB,MAAJ,GAAa,CAAvB,GAA2BhgB,GAAG,CAAClK,GAAJ,GAAU,CAAzC;AACD;;AACD,MAAI5V,MAAJ;;AACA,WAAS;AACPA,IAAAA,MAAM,GAAGykC,UAAU,CAAChgB,EAAD,EAAK7a,CAAL,EAAQ4C,CAAR,CAAnB;AACA,QAAI,CAACxM,MAAM,CAACukC,OAAZ,EAAqB;;AACrB,QAAI7uB,GAAG,GAAG,CAAN,GAAUlJ,CAAC,IAAI,CAAf,GAAmBA,CAAC,IAAIie,GAAG,CAAC14B,MAAhC,EAAwC;AAAEiO,MAAAA,MAAM,CAACm+D,OAAP,GAAiB,IAAjB;AAAuB;AAAO;;AACxE3xD,IAAAA,CAAC,IAAIkJ,GAAG,GAAG,CAAX;AACD;;AACD,SAAO1V,MAAP;AACD;;ACxhBc,MAAMigE,oBAAN,CAA2B;AACxCxmE,EAAAA,WAAW,CAACgrB,EAAD,EAAK;AACd,SAAKA,EAAL,GAAUA,EAAV;AACA,SAAKy7C,cAAL,GAAsB,KAAKC,gBAAL,GAAwB,KAAKC,aAAL,GAAqB,KAAKC,eAAL,GAAuB,IAA1F;AACA,SAAKC,OAAL,GAAe,IAAIxhD,OAAJ,EAAf;AACA,SAAKyhD,SAAL,GAAiB,IAAjB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKC,cAAL,GAAsB,IAAtB;AACD;;AAED/nB,EAAAA,IAAI,CAACr5C,OAAD,EAAU;AACZ,QAAIq5B,KAAK,GAAG,IAAZ;AAAA,QAAkBjU,EAAE,GAAGiU,KAAK,CAACjU,EAA7B;AACA,QAAImB,GAAG,GAAG8S,KAAK,CAAC9S,GAAN,GAAYvmB,OAAO,CAAC4sC,OAA9B;AACArmB,IAAAA,GAAG,CAAC86C,eAAJ,GAAsB,IAAtB;AACAvE,IAAAA,mBAAmB,CAACv2C,GAAD,EAAMnB,EAAE,CAAC5S,OAAH,CAAW+lD,UAAjB,EAA6BnzC,EAAE,CAAC5S,OAAH,CAAWgmD,WAAxC,EAAqDpzC,EAAE,CAAC5S,OAAH,CAAWtC,cAAhE,CAAnB;;AAEA,aAASoxD,cAAT,CAAwB1zD,CAAxB,EAA2B;AACzB,WAAK,IAAIo9C,CAAC,GAAGp9C,CAAC,CAACjN,MAAf,EAAuBqqD,CAAvB,EAA0BA,CAAC,GAAGA,CAAC,CAAC3rD,UAAhC,EAA4C;AAC1C,YAAI2rD,CAAC,IAAIzkC,GAAT,EAAc,OAAO,IAAP;AACd,YAAI,iCAAiCxQ,IAAjC,CAAsCi1C,CAAC,CAAC5uC,SAAxC,CAAJ,EAAwD;AACzD;;AACD,aAAO,KAAP;AACD;;AAEDyI,IAAAA,EAAE,CAAC0B,GAAD,EAAM,OAAN,EAAe3Y,CAAC,IAAI;AACpB,UAAI,CAAC0zD,cAAc,CAAC1zD,CAAD,CAAf,IAAsBuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAApC,IAA+CwuD,WAAW,CAACxuD,CAAD,EAAIwX,EAAJ,CAA9D,EAAuE,OADnD;;AAGpB,UAAIzK,UAAU,IAAI,EAAlB,EAAsB7V,UAAU,CAACkwC,SAAS,CAAC5vB,EAAD,EAAK,MAAM,KAAKm8C,aAAL,EAAX,CAAV,EAA4C,EAA5C,CAAV;AACvB,KAJC,CAAF;AAMA18C,IAAAA,EAAE,CAAC0B,GAAD,EAAM,kBAAN,EAA0B3Y,CAAC,IAAI;AAC/B,WAAKszD,SAAL,GAAiB;AAAClmE,QAAAA,IAAI,EAAE4S,CAAC,CAAC5S,IAAT;AAAeuiD,QAAAA,IAAI,EAAE;AAArB,OAAjB;AACD,KAFC,CAAF;AAGA14B,IAAAA,EAAE,CAAC0B,GAAD,EAAM,mBAAN,EAA2B3Y,CAAC,IAAI;AAChC,UAAI,CAAC,KAAKszD,SAAV,EAAqB,KAAKA,SAAL,GAAiB;AAAClmE,QAAAA,IAAI,EAAE4S,CAAC,CAAC5S,IAAT;AAAeuiD,QAAAA,IAAI,EAAE;AAArB,OAAjB;AACtB,KAFC,CAAF;AAGA14B,IAAAA,EAAE,CAAC0B,GAAD,EAAM,gBAAN,EAAwB3Y,CAAC,IAAI;AAC7B,UAAI,KAAKszD,SAAT,EAAoB;AAClB,YAAItzD,CAAC,CAAC5S,IAAF,IAAU,KAAKkmE,SAAL,CAAelmE,IAA7B,EAAmC,KAAKwmE,eAAL;AACnC,aAAKN,SAAL,CAAe3jB,IAAf,GAAsB,IAAtB;AACD;AACF,KALC,CAAF;AAOA14B,IAAAA,EAAE,CAAC0B,GAAD,EAAM,YAAN,EAAoB,MAAM8S,KAAK,CAACooC,mBAAN,EAA1B,CAAF;AAEA58C,IAAAA,EAAE,CAAC0B,GAAD,EAAM,OAAN,EAAe,MAAM;AACrB,UAAI,CAAC,KAAK26C,SAAV,EAAqB,KAAKM,eAAL;AACtB,KAFC,CAAF;;AAIA,aAASE,SAAT,CAAmB9zD,CAAnB,EAAsB;AACpB,UAAI,CAAC0zD,cAAc,CAAC1zD,CAAD,CAAf,IAAsBuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAxC,EAAiD;;AACjD,UAAIwX,EAAE,CAAC21B,iBAAH,EAAJ,EAA4B;AAC1BwgB,QAAAA,aAAa,CAAC;AAACU,UAAAA,QAAQ,EAAE,KAAX;AAAkB17D,UAAAA,IAAI,EAAE6kB,EAAE,CAACsiC,aAAH;AAAxB,SAAD,CAAb;AACA,YAAI95C,CAAC,CAACvc,IAAF,IAAU,KAAd,EAAqB+zB,EAAE,CAACuiC,gBAAH,CAAoB,EAApB,EAAwB,IAAxB,EAA8B,KAA9B;AACtB,OAHD,MAGO,IAAI,CAACviC,EAAE,CAAC5S,OAAH,CAAWmvD,eAAhB,EAAiC;AACtC;AACD,OAFM,MAEA;AACL,YAAIz4B,MAAM,GAAG0zB,cAAc,CAACx3C,EAAD,CAA3B;AACAm2C,QAAAA,aAAa,CAAC;AAACU,UAAAA,QAAQ,EAAE,IAAX;AAAiB17D,UAAAA,IAAI,EAAE2oC,MAAM,CAAC3oC;AAA9B,SAAD,CAAb;;AACA,YAAIqN,CAAC,CAACvc,IAAF,IAAU,KAAd,EAAqB;AACnB+zB,UAAAA,EAAE,CAAC4vB,SAAH,CAAa,MAAM;AACjB5vB,YAAAA,EAAE,CAACoiC,aAAH,CAAiBte,MAAM,CAACA,MAAxB,EAAgC,CAAhC,EAAmC/oB,cAAnC;AACAiF,YAAAA,EAAE,CAACuiC,gBAAH,CAAoB,EAApB,EAAwB,IAAxB,EAA8B,KAA9B;AACD,WAHD;AAID;AACF;;AACD,UAAI/5C,CAAC,CAAC0uD,aAAN,EAAqB;AACnB1uD,QAAAA,CAAC,CAAC0uD,aAAF,CAAgBsF,SAAhB;AACA,YAAI7qE,OAAO,GAAGukE,UAAU,CAAC/6D,IAAX,CAAgB8N,IAAhB,CAAqB,IAArB,CAAd,CAFmB;;AAInBT,QAAAA,CAAC,CAAC0uD,aAAF,CAAgB3Q,OAAhB,CAAwB,MAAxB,EAAgC50D,OAAhC;;AACA,YAAI6W,CAAC,CAAC0uD,aAAF,CAAgB9Q,OAAhB,CAAwB,MAAxB,KAAmCz0D,OAAvC,EAAgD;AAC9C6W,UAAAA,CAAC,CAAC7O,cAAF;AACA;AACD;AACF,OA1BmB;;;AA4BpB,UAAI8iE,MAAM,GAAG7E,cAAc,EAA3B;AAAA,UAA+Bz1C,EAAE,GAAGs6C,MAAM,CAACplD,UAA3C;AACA2I,MAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqB5C,YAArB,CAAkCylC,MAAlC,EAA0Cz8C,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBviB,UAA/D;AACA8K,MAAAA,EAAE,CAACh2B,KAAH,GAAW+pE,UAAU,CAAC/6D,IAAX,CAAgB8N,IAAhB,CAAqB,IAArB,CAAX;AACA,UAAIyzD,QAAQ,GAAG/jD,SAAS,EAAxB;AACAO,MAAAA,WAAW,CAACiJ,EAAD,CAAX;AACAziB,MAAAA,UAAU,CAAC,MAAM;AACfsgB,QAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBl9B,WAArB,CAAiC+/D,MAAjC;AACAC,QAAAA,QAAQ,CAACzoE,KAAT;AACA,YAAIyoE,QAAQ,IAAIv7C,GAAhB,EAAqB8S,KAAK,CAAC0oC,oBAAN;AACtB,OAJS,EAIP,EAJO,CAAV;AAKD;;AACDl9C,IAAAA,EAAE,CAAC0B,GAAD,EAAM,MAAN,EAAcm7C,SAAd,CAAF;AACA78C,IAAAA,EAAE,CAAC0B,GAAD,EAAM,KAAN,EAAam7C,SAAb,CAAF;AACD;;AAED3I,EAAAA,wBAAwB,CAAChpD,KAAD,EAAQ;AAC9B;AACA,QAAGA,KAAH,EAAU;AACR,WAAKwW,GAAL,CAAS/vB,YAAT,CAAsB,YAAtB,EAAoCuZ,KAApC;AACD,KAFD,MAEO;AACL,WAAKwW,GAAL,CAASjzB,eAAT,CAAyB,YAAzB;AACD;AACF;;AAEDs1C,EAAAA,gBAAgB,GAAG;AACjB,QAAItnC,MAAM,GAAGsnC,gBAAgB,CAAC,KAAKxjB,EAAN,EAAU,KAAV,CAA7B;AACA9jB,IAAAA,MAAM,CAACjI,KAAP,GAAe0kB,SAAS,MAAM,KAAKwI,GAAnC;AACA,WAAOjlB,MAAP;AACD;;AAEDqnC,EAAAA,aAAa,CAAC58B,IAAD,EAAOuoC,SAAP,EAAkB;AAC7B,QAAI,CAACvoC,IAAD,IAAS,CAAC,KAAKqZ,EAAL,CAAQplB,OAAR,CAAgBs6B,IAAhB,CAAqBjlC,MAAnC,EAA2C;AAC3C,QAAI0W,IAAI,CAAC1S,KAAL,IAAci7C,SAAlB,EAA6B,KAAKytB,oBAAL;AAC7B,SAAKC,sBAAL,CAA4Bj2D,IAA5B;AACD;;AAEDub,EAAAA,YAAY,GAAG;AACb,WAAO,KAAKlC,EAAL,CAAQplB,OAAR,CAAgB2+B,OAAhB,CAAwBnX,aAAxB,CAAsCF,YAAtC,EAAP;AACD;;AAEDy6C,EAAAA,oBAAoB,GAAG;AACrB,QAAI94B,GAAG,GAAG,KAAK3hB,YAAL,EAAV;AAAA,QAA+BlC,EAAE,GAAG,KAAKA,EAAzC;AAAA,QAA6C+1B,IAAI,GAAG/1B,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWJ,OAAX,EAApD;AACA,QAAIn0B,IAAI,GAAGymC,IAAI,CAACzmC,IAAL,EAAX;AAAA,QAAwB6N,EAAE,GAAG44B,IAAI,CAAC54B,EAAL,EAA7B;;AAEA,QAAI6C,EAAE,CAACplB,OAAH,CAAW2vB,MAAX,IAAqBvK,EAAE,CAACplB,OAAH,CAAW0vB,QAAhC,IAA4Chb,IAAI,CAACiQ,IAAL,IAAaS,EAAE,CAACplB,OAAH,CAAW2vB,MAApE,IAA8EpN,EAAE,CAACoC,IAAH,GAAUS,EAAE,CAACplB,OAAH,CAAW0vB,QAAvG,EAAiH;AAC/GuZ,MAAAA,GAAG,CAAC+N,eAAJ;AACA;AACD;;AAED,QAAIirB,SAAS,GAAGC,QAAQ,CAAC98C,EAAD,EAAK6jB,GAAG,CAACuN,UAAT,EAAqBvN,GAAG,CAACyN,YAAzB,CAAxB;AACA,QAAIyrB,QAAQ,GAAGD,QAAQ,CAAC98C,EAAD,EAAK6jB,GAAG,CAAC0N,SAAT,EAAoB1N,GAAG,CAAC2N,WAAxB,CAAvB;AACA,QAAIqrB,SAAS,IAAI,CAACA,SAAS,CAACG,GAAxB,IAA+BD,QAA/B,IAA2C,CAACA,QAAQ,CAACC,GAArD,IACAz1C,GAAG,CAACI,MAAM,CAACk1C,SAAD,EAAYE,QAAZ,CAAP,EAA8BztD,IAA9B,CAAH,IAA0C,CAD1C,IAEAiY,GAAG,CAACG,MAAM,CAACm1C,SAAD,EAAYE,QAAZ,CAAP,EAA8B5/C,EAA9B,CAAH,IAAwC,CAF5C,EAGE;AAEF,QAAI+X,IAAI,GAAGlV,EAAE,CAACplB,OAAH,CAAWs6B,IAAtB;AACA,QAAInd,KAAK,GAAIzI,IAAI,CAACiQ,IAAL,IAAaS,EAAE,CAACplB,OAAH,CAAW0vB,QAAxB,IAAoC2yC,QAAQ,CAACj9C,EAAD,EAAK1Q,IAAL,CAA7C,IACR;AAACwH,MAAAA,IAAI,EAAEoe,IAAI,CAAC,CAAD,CAAJ,CAAQ5T,OAAR,CAAgB7Z,GAAhB,CAAoB,CAApB,CAAP;AAA+BumB,MAAAA,MAAM,EAAE;AAAvC,KADJ;AAEA,QAAInrB,GAAG,GAAGsa,EAAE,CAACoC,IAAH,GAAUS,EAAE,CAACplB,OAAH,CAAW2vB,MAArB,IAA+B0yC,QAAQ,CAACj9C,EAAD,EAAK7C,EAAL,CAAjD;;AACA,QAAI,CAACta,GAAL,EAAU;AACR,UAAIye,OAAO,GAAG4T,IAAI,CAACA,IAAI,CAACjlC,MAAL,GAAc,CAAf,CAAJ,CAAsBqxB,OAApC;AACA,UAAI7Z,GAAG,GAAG6Z,OAAO,CAACuR,IAAR,GAAevR,OAAO,CAACuR,IAAR,CAAavR,OAAO,CAACuR,IAAR,CAAa5iC,MAAb,GAAsB,CAAnC,CAAf,GAAuDqxB,OAAO,CAAC7Z,GAAzE;AACA5E,MAAAA,GAAG,GAAG;AAACiU,QAAAA,IAAI,EAAErP,GAAG,CAACA,GAAG,CAACxX,MAAJ,GAAa,CAAd,CAAV;AAA4B+9B,QAAAA,MAAM,EAAEvmB,GAAG,CAACA,GAAG,CAACxX,MAAJ,GAAa,CAAd,CAAH,GAAsBwX,GAAG,CAACA,GAAG,CAACxX,MAAJ,GAAa,CAAd;AAA7D,OAAN;AACD;;AAED,QAAI,CAAC8nB,KAAD,IAAU,CAAClV,GAAf,EAAoB;AAClBghC,MAAAA,GAAG,CAAC+N,eAAJ;AACA;AACD;;AAED,QAAI7kB,GAAG,GAAG8W,GAAG,CAACq5B,UAAJ,IAAkBr5B,GAAG,CAACs5B,UAAJ,CAAe,CAAf,CAA5B;AAAA,QAA+CC,GAA/C;;AACA,QAAI;AAAEA,MAAAA,GAAG,GAAGvlD,KAAK,CAACE,KAAK,CAACjB,IAAP,EAAaiB,KAAK,CAACiW,MAAnB,EAA2BnrB,GAAG,CAACmrB,MAA/B,EAAuCnrB,GAAG,CAACiU,IAA3C,CAAX;AAA6D,KAAnE,CACA,OAAMtO,CAAN,EAAS,EAjCY;;;AAkCrB,QAAI40D,GAAJ,EAAS;AACP,UAAI,CAACloD,KAAD,IAAU8K,EAAE,CAAC+D,KAAH,CAAS3Y,OAAvB,EAAgC;AAC9By4B,QAAAA,GAAG,CAACruC,QAAJ,CAAauiB,KAAK,CAACjB,IAAnB,EAAyBiB,KAAK,CAACiW,MAA/B;;AACA,YAAI,CAACovC,GAAG,CAACttC,SAAT,EAAoB;AAClB+T,UAAAA,GAAG,CAAC+N,eAAJ;AACA/N,UAAAA,GAAG,CAACgO,QAAJ,CAAaurB,GAAb;AACD;AACF,OAND,MAMO;AACLv5B,QAAAA,GAAG,CAAC+N,eAAJ;AACA/N,QAAAA,GAAG,CAACgO,QAAJ,CAAaurB,GAAb;AACD;;AACD,UAAIrwC,GAAG,IAAI8W,GAAG,CAACuN,UAAJ,IAAkB,IAA7B,EAAmCvN,GAAG,CAACgO,QAAJ,CAAa9kB,GAAb,EAAnC,KACK,IAAI7X,KAAJ,EAAW,KAAKmoD,gBAAL;AACjB;;AACD,SAAKC,iBAAL;AACD;;AAEDD,EAAAA,gBAAgB,GAAG;AACjB1iD,IAAAA,YAAY,CAAC,KAAKohD,WAAN,CAAZ;AACA,SAAKA,WAAL,GAAmBr8D,UAAU,CAAC,MAAM;AAClC,WAAKq8D,WAAL,GAAmB,KAAnB;AACA,UAAI,KAAKhuB,gBAAL,EAAJ,EACE,KAAK/tB,EAAL,CAAQ4vB,SAAR,CAAkB,MAAM,KAAK5vB,EAAL,CAAQO,KAAR,CAAcwtB,gBAAd,GAAiC,IAAzD;AACH,KAJ4B,EAI1B,EAJ0B,CAA7B;AAKD;;AAED6uB,EAAAA,sBAAsB,CAACj2D,IAAD,EAAO;AAC3B2Q,IAAAA,oBAAoB,CAAC,KAAK0I,EAAL,CAAQplB,OAAR,CAAgB6rC,SAAjB,EAA4B9/B,IAAI,CAACg9B,OAAjC,CAApB;AACArsB,IAAAA,oBAAoB,CAAC,KAAK0I,EAAL,CAAQplB,OAAR,CAAgB23C,YAAjB,EAA+B5rC,IAAI,CAAC4F,SAApC,CAApB;AACD;;AAED+wD,EAAAA,iBAAiB,GAAG;AAClB,QAAIz5B,GAAG,GAAG,KAAK3hB,YAAL,EAAV;AACA,SAAKu5C,cAAL,GAAsB53B,GAAG,CAACuN,UAA1B;AAAsC,SAAKsqB,gBAAL,GAAwB73B,GAAG,CAACyN,YAA5B;AACtC,SAAKqqB,aAAL,GAAqB93B,GAAG,CAAC0N,SAAzB;AAAoC,SAAKqqB,eAAL,GAAuB/3B,GAAG,CAAC2N,WAA3B;AACrC;;AAED+rB,EAAAA,iBAAiB,GAAG;AAClB,QAAI15B,GAAG,GAAG,KAAK3hB,YAAL,EAAV;AACA,QAAI,CAAC2hB,GAAG,CAACq5B,UAAT,EAAqB,OAAO,KAAP;AACrB,QAAIpmD,IAAI,GAAG+sB,GAAG,CAACs5B,UAAJ,CAAe,CAAf,EAAkBK,uBAA7B;AACA,WAAOhlD,QAAQ,CAAC,KAAK2I,GAAN,EAAWrK,IAAX,CAAf;AACD;;AAED7iB,EAAAA,KAAK,GAAG;AACN,QAAI,KAAK+rB,EAAL,CAAQ5S,OAAR,CAAgBngB,QAAhB,IAA4B,UAAhC,EAA4C;AAC1C,UAAI,CAAC,KAAKswE,iBAAL,EAAD,IAA6B5kD,SAAS,MAAM,KAAKwI,GAArD,EACE,KAAKoiB,aAAL,CAAmB,KAAKC,gBAAL,EAAnB,EAA4C,IAA5C;AACF,WAAKriB,GAAL,CAASltB,KAAT;AACD;AACF;;AACDw/D,EAAAA,IAAI,GAAG;AAAE,SAAKtyC,GAAL,CAASsyC,IAAT;AAAiB;;AAC1BhF,EAAAA,QAAQ,GAAG;AAAE,WAAO,KAAKttC,GAAZ;AAAiB;;AAE9BmuC,EAAAA,aAAa,GAAG;AAAE,WAAO,IAAP;AAAa;;AAE/BjoB,EAAAA,aAAa,GAAG;AACd,QAAIpT,KAAK,GAAG,IAAZ;AACA,QAAI,KAAKspC,iBAAL,EAAJ,EACE,KAAKE,aAAL,GADF,KAGE9tB,OAAO,CAAC,KAAK3vB,EAAN,EAAU,MAAMiU,KAAK,CAACjU,EAAN,CAASO,KAAT,CAAewtB,gBAAf,GAAkC,IAAlD,CAAP;;AAEF,aAAS2vB,IAAT,GAAgB;AACd,UAAIzpC,KAAK,CAACjU,EAAN,CAAS+D,KAAT,CAAe3Y,OAAnB,EAA4B;AAC1B6oB,QAAAA,KAAK,CAACwpC,aAAN;AACAxpC,QAAAA,KAAK,CAAC4nC,OAAN,CAAcphD,GAAd,CAAkBwZ,KAAK,CAACjU,EAAN,CAAS5S,OAAT,CAAiBuwD,YAAnC,EAAiDD,IAAjD;AACD;AACF;;AACD,SAAK7B,OAAL,CAAaphD,GAAb,CAAiB,KAAKuF,EAAL,CAAQ5S,OAAR,CAAgBuwD,YAAjC,EAA+CD,IAA/C;AACD;;AAED3vB,EAAAA,gBAAgB,GAAG;AACjB,QAAIlK,GAAG,GAAG,KAAK3hB,YAAL,EAAV;AACA,WAAO2hB,GAAG,CAACuN,UAAJ,IAAkB,KAAKqqB,cAAvB,IAAyC53B,GAAG,CAACyN,YAAJ,IAAoB,KAAKoqB,gBAAlE,IACL73B,GAAG,CAAC0N,SAAJ,IAAiB,KAAKoqB,aADjB,IACkC93B,GAAG,CAAC2N,WAAJ,IAAmB,KAAKoqB,eADjE;AAED;;AAED6B,EAAAA,aAAa,GAAG;AACd,QAAI,KAAKzB,cAAL,IAAuB,IAAvB,IAA+B,KAAKD,WAApC,IAAmD,CAAC,KAAKhuB,gBAAL,EAAxD,EAAiF;AACjF,QAAIlK,GAAG,GAAG,KAAK3hB,YAAL,EAAV;AAAA,QAA+BlC,EAAE,GAAG,KAAKA,EAAzC,CAFc;AAId;AACA;AACA;AACA;AACA;;AACA,QAAI7J,OAAO,IAAIR,MAAX,IAAqB,KAAKqK,EAAL,CAAQplB,OAAR,CAAgBq9B,WAAhB,CAA4BhoC,MAAjD,IAA2D2tE,UAAU,CAAC/5B,GAAG,CAACuN,UAAL,CAAzE,EAA2F;AACzF,WAAKpxB,EAAL,CAAQo5C,gBAAR,CAAyB;AAACntE,QAAAA,IAAI,EAAE,SAAP;AAAkB4R,QAAAA,OAAO,EAAE,CAA3B;AAA8BlE,QAAAA,cAAc,EAAEZ,IAAI,CAAC6pB;AAAnD,OAAzB;AACA,WAAK6wC,IAAL;AACA,WAAKx/D,KAAL;AACA;AACD;;AACD,QAAI,KAAK6nE,SAAT,EAAoB;AACpB,SAAKwB,iBAAL;AACA,QAAI/7B,MAAM,GAAGu7B,QAAQ,CAAC98C,EAAD,EAAK6jB,GAAG,CAACuN,UAAT,EAAqBvN,GAAG,CAACyN,YAAzB,CAArB;AACA,QAAI7/C,IAAI,GAAGqrE,QAAQ,CAAC98C,EAAD,EAAK6jB,GAAG,CAAC0N,SAAT,EAAoB1N,GAAG,CAAC2N,WAAxB,CAAnB;AACA,QAAIjQ,MAAM,IAAI9vC,IAAd,EAAoBk+C,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AACpC66B,MAAAA,YAAY,CAAC76B,EAAE,CAACgG,GAAJ,EAASiwB,eAAe,CAAC1U,MAAD,EAAS9vC,IAAT,CAAxB,EAAwCspB,cAAxC,CAAZ;AACA,UAAIwmB,MAAM,CAACy7B,GAAP,IAAcvrE,IAAI,CAACurE,GAAvB,EAA4Bh9C,EAAE,CAACO,KAAH,CAASwtB,gBAAT,GAA4B,IAA5B;AAC7B,KAH0B,CAAP;AAIrB;;AAED8vB,EAAAA,WAAW,GAAG;AACZ,QAAI,KAAK7B,cAAL,IAAuB,IAA3B,EAAiC;AAC/BrhD,MAAAA,YAAY,CAAC,KAAKqhD,cAAN,CAAZ;AACA,WAAKA,cAAL,GAAsB,IAAtB;AACD;;AAED,QAAIh8C,EAAE,GAAG,KAAKA,EAAd;AAAA,QAAkBplB,OAAO,GAAGolB,EAAE,CAACplB,OAA/B;AAAA,QAAwCipC,GAAG,GAAG7jB,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWJ,OAAX,EAA9C;AACA,QAAIn0B,IAAI,GAAGu0B,GAAG,CAACv0B,IAAJ,EAAX;AAAA,QAAuB6N,EAAE,GAAG0mB,GAAG,CAAC1mB,EAAJ,EAA5B;AACA,QAAI7N,IAAI,CAACkN,EAAL,IAAW,CAAX,IAAgBlN,IAAI,CAACiQ,IAAL,GAAYS,EAAE,CAACk3B,SAAH,EAAhC,EACE5nC,IAAI,GAAGgY,GAAG,CAAChY,IAAI,CAACiQ,IAAL,GAAY,CAAb,EAAgBwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS1W,IAAI,CAACiQ,IAAL,GAAY,CAArB,CAAP,CAA+BtvB,MAA/C,CAAV;AACF,QAAIktB,EAAE,CAACX,EAAH,IAASuJ,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS7I,EAAE,CAACoC,IAAZ,CAAP,CAAyBpkB,IAAzB,CAA8BlL,MAAvC,IAAiDktB,EAAE,CAACoC,IAAH,GAAUS,EAAE,CAAC2Q,QAAH,EAA/D,EACExT,EAAE,GAAGmK,GAAG,CAACnK,EAAE,CAACoC,IAAH,GAAU,CAAX,EAAc,CAAd,CAAR;AACF,QAAIjQ,IAAI,CAACiQ,IAAL,GAAY3kB,OAAO,CAAC0vB,QAApB,IAAgCnN,EAAE,CAACoC,IAAH,GAAU3kB,OAAO,CAAC2vB,MAAR,GAAiB,CAA/D,EAAkE,OAAO,KAAP;AAElE,QAAIuzC,SAAJ,EAAe73B,QAAf,EAAyB83B,QAAzB;;AACA,QAAIzuD,IAAI,CAACiQ,IAAL,IAAa3kB,OAAO,CAAC0vB,QAArB,IAAiC,CAACwzC,SAAS,GAAGhiC,aAAa,CAAC9b,EAAD,EAAK1Q,IAAI,CAACiQ,IAAV,CAA1B,KAA8C,CAAnF,EAAsF;AACpF0mB,MAAAA,QAAQ,GAAGrf,MAAM,CAAChsB,OAAO,CAACs6B,IAAR,CAAa,CAAb,EAAgB3V,IAAjB,CAAjB;AACAw+C,MAAAA,QAAQ,GAAGnjE,OAAO,CAACs6B,IAAR,CAAa,CAAb,EAAgBpe,IAA3B;AACD,KAHD,MAGO;AACLmvB,MAAAA,QAAQ,GAAGrf,MAAM,CAAChsB,OAAO,CAACs6B,IAAR,CAAa4oC,SAAb,EAAwBv+C,IAAzB,CAAjB;AACAw+C,MAAAA,QAAQ,GAAGnjE,OAAO,CAACs6B,IAAR,CAAa4oC,SAAS,GAAG,CAAzB,EAA4BhnD,IAA5B,CAAiCuhB,WAA5C;AACD;;AACD,QAAI2lC,OAAO,GAAGliC,aAAa,CAAC9b,EAAD,EAAK7C,EAAE,CAACoC,IAAR,CAA3B;AACA,QAAI2mB,MAAJ,EAAY+3B,MAAZ;;AACA,QAAID,OAAO,IAAIpjE,OAAO,CAACs6B,IAAR,CAAajlC,MAAb,GAAsB,CAArC,EAAwC;AACtCi2C,MAAAA,MAAM,GAAGtrC,OAAO,CAAC2vB,MAAR,GAAiB,CAA1B;AACA0zC,MAAAA,MAAM,GAAGrjE,OAAO,CAAC4sC,OAAR,CAAgB/qC,SAAzB;AACD,KAHD,MAGO;AACLypC,MAAAA,MAAM,GAAGtf,MAAM,CAAChsB,OAAO,CAACs6B,IAAR,CAAa8oC,OAAO,GAAG,CAAvB,EAA0Bz+C,IAA3B,CAAN,GAAyC,CAAlD;AACA0+C,MAAAA,MAAM,GAAGrjE,OAAO,CAACs6B,IAAR,CAAa8oC,OAAO,GAAG,CAAvB,EAA0BlnD,IAA1B,CAA+BonD,eAAxC;AACD;;AAED,QAAI,CAACH,QAAL,EAAe,OAAO,KAAP;AACf,QAAII,OAAO,GAAGn+C,EAAE,CAACgG,GAAH,CAAOi4B,UAAP,CAAkBmgB,cAAc,CAACp+C,EAAD,EAAK+9C,QAAL,EAAeE,MAAf,EAAuBh4B,QAAvB,EAAiCC,MAAjC,CAAhC,CAAd;AACA,QAAIm4B,OAAO,GAAG93C,UAAU,CAACvG,EAAE,CAACgG,GAAJ,EAASsB,GAAG,CAAC2e,QAAD,EAAW,CAAX,CAAZ,EAA2B3e,GAAG,CAAC4e,MAAD,EAASngB,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAASkgB,MAAT,CAAP,CAAwB/qC,IAAxB,CAA6BlL,MAAtC,CAA9B,CAAxB;;AACA,WAAOkuE,OAAO,CAACluE,MAAR,GAAiB,CAAjB,IAAsBouE,OAAO,CAACpuE,MAAR,GAAiB,CAA9C,EAAiD;AAC/C,UAAI0rB,GAAG,CAACwiD,OAAD,CAAH,IAAgBxiD,GAAG,CAAC0iD,OAAD,CAAvB,EAAkC;AAAEF,QAAAA,OAAO,CAACpvE,GAAR;AAAesvE,QAAAA,OAAO,CAACtvE,GAAR;AAAem3C,QAAAA,MAAM;AAAI,OAA5E,MACK,IAAIi4B,OAAO,CAAC,CAAD,CAAP,IAAcE,OAAO,CAAC,CAAD,CAAzB,EAA8B;AAAEF,QAAAA,OAAO,CAACj6D,KAAR;AAAiBm6D,QAAAA,OAAO,CAACn6D,KAAR;AAAiB+hC,QAAAA,QAAQ;AAAI,OAA9E,MACA;AACN;;AAED,QAAIq4B,QAAQ,GAAG,CAAf;AAAA,QAAkBC,MAAM,GAAG,CAA3B;AACA,QAAIj1B,MAAM,GAAG60B,OAAO,CAAC,CAAD,CAApB;AAAA,QAAyBK,MAAM,GAAGH,OAAO,CAAC,CAAD,CAAzC;AAAA,QAA8CI,WAAW,GAAG1lE,IAAI,CAACyiB,GAAL,CAAS8tB,MAAM,CAACr5C,MAAhB,EAAwBuuE,MAAM,CAACvuE,MAA/B,CAA5D;;AACA,WAAOquE,QAAQ,GAAGG,WAAX,IAA0Bn1B,MAAM,CAACjkC,UAAP,CAAkBi5D,QAAlB,KAA+BE,MAAM,CAACn5D,UAAP,CAAkBi5D,QAAlB,CAAhE,EACE,EAAEA,QAAF;;AACF,QAAII,MAAM,GAAG/iD,GAAG,CAACwiD,OAAD,CAAhB;AAAA,QAA2BQ,MAAM,GAAGhjD,GAAG,CAAC0iD,OAAD,CAAvC;AACA,QAAIO,SAAS,GAAG7lE,IAAI,CAACyiB,GAAL,CAASkjD,MAAM,CAACzuE,MAAP,IAAiBkuE,OAAO,CAACluE,MAAR,IAAkB,CAAlB,GAAsBquE,QAAtB,GAAiC,CAAlD,CAAT,EACSK,MAAM,CAAC1uE,MAAP,IAAiBouE,OAAO,CAACpuE,MAAR,IAAkB,CAAlB,GAAsBquE,QAAtB,GAAiC,CAAlD,CADT,CAAhB;;AAEA,WAAOC,MAAM,GAAGK,SAAT,IACAF,MAAM,CAACr5D,UAAP,CAAkBq5D,MAAM,CAACzuE,MAAP,GAAgBsuE,MAAhB,GAAyB,CAA3C,KAAiDI,MAAM,CAACt5D,UAAP,CAAkBs5D,MAAM,CAAC1uE,MAAP,GAAgBsuE,MAAhB,GAAyB,CAA3C,CADxD,EAEE,EAAEA,MAAF,CAlDU;;;AAoDZ,QAAIJ,OAAO,CAACluE,MAAR,IAAkB,CAAlB,IAAuBouE,OAAO,CAACpuE,MAAR,IAAkB,CAAzC,IAA8Cg2C,QAAQ,IAAI32B,IAAI,CAACiQ,IAAnE,EAAyE;AACvE,aAAO++C,QAAQ,IAAIA,QAAQ,GAAGhvD,IAAI,CAACkN,EAA5B,IACAkiD,MAAM,CAACr5D,UAAP,CAAkBq5D,MAAM,CAACzuE,MAAP,GAAgBsuE,MAAhB,GAAyB,CAA3C,KAAiDI,MAAM,CAACt5D,UAAP,CAAkBs5D,MAAM,CAAC1uE,MAAP,GAAgBsuE,MAAhB,GAAyB,CAA3C,CADxD,EACuG;AACrGD,QAAAA,QAAQ;AACRC,QAAAA,MAAM;AACP;AACF;;AAEDJ,IAAAA,OAAO,CAACA,OAAO,CAACluE,MAAR,GAAiB,CAAlB,CAAP,GAA8ByuE,MAAM,CAAC3iE,KAAP,CAAa,CAAb,EAAgB2iE,MAAM,CAACzuE,MAAP,GAAgBsuE,MAAhC,EAAwC1vE,OAAxC,CAAgD,UAAhD,EAA4D,EAA5D,CAA9B;AACAsvE,IAAAA,OAAO,CAAC,CAAD,CAAP,GAAaA,OAAO,CAAC,CAAD,CAAP,CAAWpiE,KAAX,CAAiBuiE,QAAjB,EAA2BzvE,OAA3B,CAAmC,UAAnC,EAA+C,EAA/C,CAAb;AAEA,QAAIgwE,MAAM,GAAGv3C,GAAG,CAAC2e,QAAD,EAAWq4B,QAAX,CAAhB;AACA,QAAIQ,IAAI,GAAGx3C,GAAG,CAAC4e,MAAD,EAASm4B,OAAO,CAACpuE,MAAR,GAAiB0rB,GAAG,CAAC0iD,OAAD,CAAH,CAAapuE,MAAb,GAAsBsuE,MAAvC,GAAgD,CAAzD,CAAd;;AACA,QAAIJ,OAAO,CAACluE,MAAR,GAAiB,CAAjB,IAAsBkuE,OAAO,CAAC,CAAD,CAA7B,IAAoC52C,GAAG,CAACs3C,MAAD,EAASC,IAAT,CAA3C,EAA2D;AACzD9gB,MAAAA,YAAY,CAACh+B,EAAE,CAACgG,GAAJ,EAASm4C,OAAT,EAAkBU,MAAlB,EAA0BC,IAA1B,EAAgC,QAAhC,CAAZ;AACA,aAAO,IAAP;AACD;AACF;;AAEDpR,EAAAA,YAAY,GAAG;AACb,SAAK2O,mBAAL;AACD;;AACDxvD,EAAAA,KAAK,GAAG;AACN,SAAKwvD,mBAAL;AACD;;AACDA,EAAAA,mBAAmB,GAAG;AACpB,QAAI,CAAC,KAAKP,SAAV,EAAqB;AACrBnhD,IAAAA,YAAY,CAAC,KAAKqhD,cAAN,CAAZ;AACA,SAAKF,SAAL,GAAiB,IAAjB;AACA,SAAKK,aAAL;AACA,SAAKh7C,GAAL,CAASsyC,IAAT;AACA,SAAKtyC,GAAL,CAASltB,KAAT;AACD;;AACDmoE,EAAAA,eAAe,GAAG;AAChB,QAAI,KAAKJ,cAAL,IAAuB,IAA3B,EAAiC;AACjC,SAAKA,cAAL,GAAsBt8D,UAAU,CAAC,MAAM;AACrC,WAAKs8D,cAAL,GAAsB,IAAtB;;AACA,UAAI,KAAKF,SAAT,EAAoB;AAClB,YAAI,KAAKA,SAAL,CAAe3jB,IAAnB,EAAyB,KAAK2jB,SAAL,GAAiB,IAAjB,CAAzB,KACK;AACN;;AACD,WAAKK,aAAL;AACD,KAP+B,EAO7B,EAP6B,CAAhC;AAQD;;AAEDA,EAAAA,aAAa,GAAG;AACd,QAAI,KAAKn8C,EAAL,CAAQulC,UAAR,MAAwB,CAAC,KAAKsY,WAAL,EAA7B,EACEluB,OAAO,CAAC,KAAK3vB,EAAN,EAAU,MAAMuiB,SAAS,CAAC,KAAKviB,EAAN,CAAzB,CAAP;AACH;;AAEDmU,EAAAA,aAAa,CAACrd,IAAD,EAAO;AAClBA,IAAAA,IAAI,CAACmlD,eAAL,GAAuB,OAAvB;AACD;;AAEDpN,EAAAA,UAAU,CAACrmD,CAAD,EAAI;AACZ,QAAIA,CAAC,CAAClC,QAAF,IAAc,CAAd,IAAmB,KAAKw1D,SAA5B,EAAuC;AACvCtzD,IAAAA,CAAC,CAAC7O,cAAF;AACA,QAAI,CAAC,KAAKqmB,EAAL,CAAQulC,UAAR,EAAL,EACE3V,SAAS,CAAC,KAAK5vB,EAAN,EAAUq2C,cAAV,CAAT,CAAmC,KAAKr2C,EAAxC,EAA4C9zB,MAAM,CAACu7D,YAAP,CAAoBj/C,CAAC,CAAClC,QAAF,IAAc,IAAd,GAAqBkC,CAAC,CAAC3K,OAAvB,GAAiC2K,CAAC,CAAClC,QAAvD,CAA5C,EAA8G,CAA9G;AACH;;AAEDotD,EAAAA,eAAe,CAACzvC,GAAD,EAAM;AACnB,SAAK9C,GAAL,CAAS86C,eAAT,GAA2B/vE,MAAM,CAAC+3B,GAAG,IAAI,UAAR,CAAjC;AACD;;AAED2rC,EAAAA,aAAa,GAAG;;AAChBiE,EAAAA,aAAa,GAAG;;AApXwB;AAuX1C2H,oBAAoB,CAACr1D,SAArB,CAA+B+tB,qBAA/B,GAAuD,IAAvD;;AAEA,SAAS+oC,QAAT,CAAkBj9C,EAAlB,EAAsB3E,GAAtB,EAA2B;AACzB,MAAI6Z,IAAI,GAAG2G,eAAe,CAAC7b,EAAD,EAAK3E,GAAG,CAACkE,IAAT,CAA1B;AACA,MAAI,CAAC2V,IAAD,IAASA,IAAI,CAACH,MAAlB,EAA0B,OAAO,IAAP;AAC1B,MAAIxV,IAAI,GAAGwG,OAAO,CAAC/F,EAAE,CAACgG,GAAJ,EAAS3K,GAAG,CAACkE,IAAb,CAAlB;AACA,MAAI5Y,IAAI,GAAG20B,eAAe,CAACpG,IAAD,EAAO3V,IAAP,EAAalE,GAAG,CAACkE,IAAjB,CAA1B;AAEA,MAAI/B,KAAK,GAAG8B,QAAQ,CAACC,IAAD,EAAOS,EAAE,CAACgG,GAAH,CAAOhoB,SAAd,CAApB;AAAA,MAA8CmnC,IAAI,GAAG,MAArD;;AACA,MAAI3nB,KAAJ,EAAW;AACT,QAAIiiB,OAAO,GAAG3hB,aAAa,CAACN,KAAD,EAAQnC,GAAG,CAACmB,EAAZ,CAA3B;AACA2oB,IAAAA,IAAI,GAAG1F,OAAO,GAAG,CAAV,GAAc,OAAd,GAAwB,MAA/B;AACD;;AACD,MAAIvjC,MAAM,GAAGugC,sBAAsB,CAAC91B,IAAI,CAACc,GAAN,EAAW4T,GAAG,CAACmB,EAAf,EAAmB2oB,IAAnB,CAAnC;AACAjpC,EAAAA,MAAM,CAAC8xB,MAAP,GAAgB9xB,MAAM,CAAC1G,QAAP,IAAmB,OAAnB,GAA6B0G,MAAM,CAAC2G,GAApC,GAA0C3G,MAAM,CAAC6b,KAAjE;AACA,SAAO7b,MAAP;AACD;;AAED,SAAS0hE,UAAT,CAAoB9mD,IAApB,EAA0B;AACxB,OAAK,IAAIioD,IAAI,GAAGjoD,IAAhB,EAAsBioD,IAAtB,EAA4BA,IAAI,GAAGA,IAAI,CAAC9kE,UAAxC,EACE,IAAI,4BAA4B0W,IAA5B,CAAiCouD,IAAI,CAAC/nD,SAAtC,CAAJ,EAAsD,OAAO,IAAP;;AACxD,SAAO,KAAP;AACD;;AAED,SAASgoD,MAAT,CAAgB3jD,GAAhB,EAAqB2hD,GAArB,EAA0B;AAAE,MAAIA,GAAJ,EAAS3hD,GAAG,CAAC2hD,GAAJ,GAAU,IAAV;AAAgB,SAAO3hD,GAAP;AAAY;;AAEjE,SAAS+iD,cAAT,CAAwBp+C,EAAxB,EAA4B1Q,IAA5B,EAAkC6N,EAAlC,EAAsC8oB,QAAtC,EAAgDC,MAAhD,EAAwD;AACtD,MAAI/qC,IAAI,GAAG,EAAX;AAAA,MAAe8jE,OAAO,GAAG,KAAzB;AAAA,MAAgC1d,OAAO,GAAGvhC,EAAE,CAACgG,GAAH,CAAO07B,aAAP,EAA1C;AAAA,MAAkEwd,cAAc,GAAG,KAAnF;;AACA,WAASC,eAAT,CAAyB5hE,EAAzB,EAA6B;AAAE,WAAO4uB,MAAM,IAAIA,MAAM,CAAC5uB,EAAP,IAAaA,EAA9B;AAAkC;;AACjE,WAAS7H,KAAT,GAAiB;AACf,QAAIupE,OAAJ,EAAa;AACX9jE,MAAAA,IAAI,IAAIomD,OAAR;AACA,UAAI2d,cAAJ,EAAoB/jE,IAAI,IAAIomD,OAAR;AACpB0d,MAAAA,OAAO,GAAGC,cAAc,GAAG,KAA3B;AACD;AACF;;AACD,WAASE,OAAT,CAAiBriD,GAAjB,EAAsB;AACpB,QAAIA,GAAJ,EAAS;AACPrnB,MAAAA,KAAK;AACLyF,MAAAA,IAAI,IAAI4hB,GAAR;AACD;AACF;;AACD,WAASsiD,IAAT,CAAcvoD,IAAd,EAAoB;AAClB,QAAIA,IAAI,CAAC4B,QAAL,IAAiB,CAArB,EAAwB;AACtB,UAAI4mD,MAAM,GAAGxoD,IAAI,CAAC5lB,YAAL,CAAkB,SAAlB,CAAb;;AACA,UAAIouE,MAAJ,EAAY;AACVF,QAAAA,OAAO,CAACE,MAAD,CAAP;AACA;AACD;;AACD,UAAIC,QAAQ,GAAGzoD,IAAI,CAAC5lB,YAAL,CAAkB,WAAlB,CAAf;AAAA,UAA+C2mB,KAA/C;;AACA,UAAI0nD,QAAJ,EAAc;AACZ,YAAI9hD,KAAK,GAAGuC,EAAE,CAAC8gC,SAAH,CAAax5B,GAAG,CAAC2e,QAAD,EAAW,CAAX,CAAhB,EAA+B3e,GAAG,CAAC4e,MAAM,GAAG,CAAV,EAAa,CAAb,CAAlC,EAAmDi5B,eAAe,CAAC,CAACI,QAAF,CAAlE,CAAZ;AACA,YAAI9hD,KAAK,CAACxtB,MAAN,KAAiB4nB,KAAK,GAAG4F,KAAK,CAAC,CAAD,CAAL,CAASkR,IAAT,CAAc,CAAd,CAAzB,CAAJ,EACEywC,OAAO,CAAC74C,UAAU,CAACvG,EAAE,CAACgG,GAAJ,EAASnO,KAAK,CAACvI,IAAf,EAAqBuI,KAAK,CAACsF,EAA3B,CAAV,CAAyClU,IAAzC,CAA8Cs4C,OAA9C,CAAD,CAAP;AACF;AACD;;AACD,UAAIzqC,IAAI,CAAC5lB,YAAL,CAAkB,iBAAlB,KAAwC,OAA5C,EAAqD;AACrD,UAAIsuE,OAAO,GAAG,6BAA6B7uD,IAA7B,CAAkCmG,IAAI,CAAC66B,QAAvC,CAAd;AACA,UAAI,CAAC,QAAQhhC,IAAR,CAAamG,IAAI,CAAC66B,QAAlB,CAAD,IAAgC76B,IAAI,CAAC9F,WAAL,CAAiB/gB,MAAjB,IAA2B,CAA/D,EAAkE;AAElE,UAAIuvE,OAAJ,EAAa9pE,KAAK;;AAClB,WAAK,IAAIsL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8V,IAAI,CAACM,UAAL,CAAgBnnB,MAApC,EAA4C+Q,CAAC,EAA7C,EACEq+D,IAAI,CAACvoD,IAAI,CAACM,UAAL,CAAgBpW,CAAhB,CAAD,CAAJ;;AAEF,UAAI,aAAa2P,IAAb,CAAkBmG,IAAI,CAAC66B,QAAvB,CAAJ,EAAsCutB,cAAc,GAAG,IAAjB;AACtC,UAAIM,OAAJ,EAAaP,OAAO,GAAG,IAAV;AACd,KAvBD,MAuBO,IAAInoD,IAAI,CAAC4B,QAAL,IAAiB,CAArB,EAAwB;AAC7B0mD,MAAAA,OAAO,CAACtoD,IAAI,CAAC2oD,SAAL,CAAe5wE,OAAf,CAAuB,SAAvB,EAAkC,EAAlC,EAAsCA,OAAtC,CAA8C,SAA9C,EAAyD,GAAzD,CAAD,CAAP;AACD;AACF;;AACD,WAAS;AACPwwE,IAAAA,IAAI,CAAC/vD,IAAD,CAAJ;AACA,QAAIA,IAAI,IAAI6N,EAAZ,EAAgB;AAChB7N,IAAAA,IAAI,GAAGA,IAAI,CAAC+oB,WAAZ;AACA6mC,IAAAA,cAAc,GAAG,KAAjB;AACD;;AACD,SAAO/jE,IAAP;AACD;;AAED,SAAS2hE,QAAT,CAAkB98C,EAAlB,EAAsBlJ,IAAtB,EAA4BkX,MAA5B,EAAoC;AAClC,MAAI0xC,QAAJ;;AACA,MAAI5oD,IAAI,IAAIkJ,EAAE,CAACplB,OAAH,CAAW4sC,OAAvB,EAAgC;AAC9Bk4B,IAAAA,QAAQ,GAAG1/C,EAAE,CAACplB,OAAH,CAAW4sC,OAAX,CAAmBpwB,UAAnB,CAA8B4W,MAA9B,CAAX;AACA,QAAI,CAAC0xC,QAAL,EAAe,OAAOV,MAAM,CAACh/C,EAAE,CAAC6H,OAAH,CAAWP,GAAG,CAACtH,EAAE,CAACplB,OAAH,CAAW2vB,MAAX,GAAoB,CAArB,CAAd,CAAD,EAAyC,IAAzC,CAAb;AACfzT,IAAAA,IAAI,GAAG,IAAP;AAAakX,IAAAA,MAAM,GAAG,CAAT;AACd,GAJD,MAIO;AACL,SAAK0xC,QAAQ,GAAG5oD,IAAhB,GAAuB4oD,QAAQ,GAAGA,QAAQ,CAACzlE,UAA3C,EAAuD;AACrD,UAAI,CAACylE,QAAD,IAAaA,QAAQ,IAAI1/C,EAAE,CAACplB,OAAH,CAAW4sC,OAAxC,EAAiD,OAAO,IAAP;AACjD,UAAIk4B,QAAQ,CAACzlE,UAAT,IAAuBylE,QAAQ,CAACzlE,UAAT,IAAuB+lB,EAAE,CAACplB,OAAH,CAAW4sC,OAA7D,EAAsE;AACvE;AACF;;AACD,OAAK,IAAIxmC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgf,EAAE,CAACplB,OAAH,CAAWs6B,IAAX,CAAgBjlC,MAApC,EAA4C+Q,CAAC,EAA7C,EAAiD;AAC/C,QAAIixB,QAAQ,GAAGjS,EAAE,CAACplB,OAAH,CAAWs6B,IAAX,CAAgBl0B,CAAhB,CAAf;AACA,QAAIixB,QAAQ,CAACnb,IAAT,IAAiB4oD,QAArB,EACE,OAAOC,oBAAoB,CAAC1tC,QAAD,EAAWnb,IAAX,EAAiBkX,MAAjB,CAA3B;AACH;AACF;;AAED,SAAS2xC,oBAAT,CAA8B1tC,QAA9B,EAAwCnb,IAAxC,EAA8CkX,MAA9C,EAAsD;AACpD,MAAIuL,OAAO,GAAGtH,QAAQ,CAAC92B,IAAT,CAAckc,UAA5B;AAAA,MAAwC2lD,GAAG,GAAG,KAA9C;AACA,MAAI,CAAClmD,IAAD,IAAS,CAAC0B,QAAQ,CAAC+gB,OAAD,EAAUziB,IAAV,CAAtB,EAAuC,OAAOkoD,MAAM,CAAC13C,GAAG,CAACV,MAAM,CAACqL,QAAQ,CAAC1S,IAAV,CAAP,EAAwB,CAAxB,CAAJ,EAAgC,IAAhC,CAAb;;AACvC,MAAIzI,IAAI,IAAIyiB,OAAZ,EAAqB;AACnByjC,IAAAA,GAAG,GAAG,IAAN;AACAlmD,IAAAA,IAAI,GAAGyiB,OAAO,CAACniB,UAAR,CAAmB4W,MAAnB,CAAP;AACAA,IAAAA,MAAM,GAAG,CAAT;;AACA,QAAI,CAAClX,IAAL,EAAW;AACT,UAAIyI,IAAI,GAAG0S,QAAQ,CAACK,IAAT,GAAgB3W,GAAG,CAACsW,QAAQ,CAACK,IAAV,CAAnB,GAAqCL,QAAQ,CAAC1S,IAAzD;AACA,aAAOy/C,MAAM,CAAC13C,GAAG,CAACV,MAAM,CAACrH,IAAD,CAAP,EAAeA,IAAI,CAACpkB,IAAL,CAAUlL,MAAzB,CAAJ,EAAsC+sE,GAAtC,CAAb;AACD;AACF;;AAED,MAAI4C,QAAQ,GAAG9oD,IAAI,CAAC4B,QAAL,IAAiB,CAAjB,GAAqB5B,IAArB,GAA4B,IAA3C;AAAA,MAAiD+oD,OAAO,GAAG/oD,IAA3D;;AACA,MAAI,CAAC8oD,QAAD,IAAa9oD,IAAI,CAACM,UAAL,CAAgBnnB,MAAhB,IAA0B,CAAvC,IAA4C6mB,IAAI,CAACO,UAAL,CAAgBqB,QAAhB,IAA4B,CAA5E,EAA+E;AAC7EknD,IAAAA,QAAQ,GAAG9oD,IAAI,CAACO,UAAhB;AACA,QAAI2W,MAAJ,EAAYA,MAAM,GAAG4xC,QAAQ,CAACH,SAAT,CAAmBxvE,MAA5B;AACb;;AACD,SAAO4vE,OAAO,CAAC5lE,UAAR,IAAsBs/B,OAA7B,EAAsCsmC,OAAO,GAAGA,OAAO,CAAC5lE,UAAlB;;AACtC,MAAIqnB,OAAO,GAAG2Q,QAAQ,CAAC3Q,OAAvB;AAAA,MAAgCuR,IAAI,GAAGvR,OAAO,CAACuR,IAA/C;;AAEA,WAASlE,IAAT,CAAcixC,QAAd,EAAwBC,OAAxB,EAAiC7xC,MAAjC,EAAyC;AACvC,SAAK,IAAIhtB,CAAC,GAAG,CAAC,CAAd,EAAiBA,CAAC,IAAI6xB,IAAI,GAAGA,IAAI,CAAC5iC,MAAR,GAAiB,CAAzB,CAAlB,EAA+C+Q,CAAC,EAAhD,EAAoD;AAClD,UAAIyG,GAAG,GAAGzG,CAAC,GAAG,CAAJ,GAAQsgB,OAAO,CAAC7Z,GAAhB,GAAsBorB,IAAI,CAAC7xB,CAAD,CAApC;;AACA,WAAK,IAAI8d,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrX,GAAG,CAACxX,MAAxB,EAAgC6uB,CAAC,IAAI,CAArC,EAAwC;AACtC,YAAIghD,OAAO,GAAGr4D,GAAG,CAACqX,CAAC,GAAG,CAAL,CAAjB;;AACA,YAAIghD,OAAO,IAAIF,QAAX,IAAuBE,OAAO,IAAID,OAAtC,EAA+C;AAC7C,cAAItgD,IAAI,GAAGqH,MAAM,CAAC5lB,CAAC,GAAG,CAAJ,GAAQixB,QAAQ,CAAC1S,IAAjB,GAAwB0S,QAAQ,CAACK,IAAT,CAActxB,CAAd,CAAzB,CAAjB;AACA,cAAIwb,EAAE,GAAG/U,GAAG,CAACqX,CAAD,CAAH,GAASkP,MAAlB;AACA,cAAIA,MAAM,GAAG,CAAT,IAAc8xC,OAAO,IAAIF,QAA7B,EAAuCpjD,EAAE,GAAG/U,GAAG,CAACqX,CAAC,IAAIkP,MAAM,GAAG,CAAH,GAAO,CAAjB,CAAF,CAAR;AACvC,iBAAO1G,GAAG,CAAC/H,IAAD,EAAO/C,EAAP,CAAV;AACD;AACF;AACF;AACF;;AACD,MAAIiB,KAAK,GAAGkR,IAAI,CAACixC,QAAD,EAAWC,OAAX,EAAoB7xC,MAApB,CAAhB;AACA,MAAIvQ,KAAJ,EAAW,OAAOuhD,MAAM,CAACvhD,KAAD,EAAQu/C,GAAR,CAAb,CApCyC;;AAuCpD,OAAK,IAAI/lD,KAAK,GAAG4oD,OAAO,CAACxnC,WAApB,EAAiC+I,IAAI,GAAGw+B,QAAQ,GAAGA,QAAQ,CAACH,SAAT,CAAmBxvE,MAAnB,GAA4B+9B,MAA/B,GAAwC,CAA7F,EAAgG/W,KAAhG,EAAuGA,KAAK,GAAGA,KAAK,CAACohB,WAArH,EAAkI;AAChI5a,IAAAA,KAAK,GAAGkR,IAAI,CAAC1X,KAAD,EAAQA,KAAK,CAACI,UAAd,EAA0B,CAA1B,CAAZ;AACA,QAAIoG,KAAJ,EACE,OAAOuhD,MAAM,CAAC13C,GAAG,CAAC7J,KAAK,CAAC8B,IAAP,EAAa9B,KAAK,CAACjB,EAAN,GAAW4kB,IAAxB,CAAJ,EAAmC47B,GAAnC,CAAb,CADF,KAGE57B,IAAI,IAAInqB,KAAK,CAACjG,WAAN,CAAkB/gB,MAA1B;AACH;;AACD,OAAK,IAAI8uB,MAAM,GAAG8gD,OAAO,CAAC3B,eAArB,EAAsC98B,IAAI,GAAGpT,MAAlD,EAA0DjP,MAA1D,EAAkEA,MAAM,GAAGA,MAAM,CAACm/C,eAAlF,EAAmG;AACjGzgD,IAAAA,KAAK,GAAGkR,IAAI,CAAC5P,MAAD,EAASA,MAAM,CAAC1H,UAAhB,EAA4B,CAAC,CAA7B,CAAZ;AACA,QAAIoG,KAAJ,EACE,OAAOuhD,MAAM,CAAC13C,GAAG,CAAC7J,KAAK,CAAC8B,IAAP,EAAa9B,KAAK,CAACjB,EAAN,GAAW4kB,IAAxB,CAAJ,EAAmC47B,GAAnC,CAAb,CADF,KAGE57B,IAAI,IAAIriB,MAAM,CAAC/N,WAAP,CAAmB/gB,MAA3B;AACH;AACF;;ACjhBc,MAAM8vE,aAAN,CAAoB;AACjC/qE,EAAAA,WAAW,CAACgrB,EAAD,EAAK;AACd,SAAKA,EAAL,GAAUA,EAAV,CADc;;AAGd,SAAKggD,SAAL,GAAiB,EAAjB,CAHc;AAMd;AACA;;AACA,SAAKC,WAAL,GAAmB,KAAnB,CARc;;AAUd,SAAKpE,OAAL,GAAe,IAAIxhD,OAAJ,EAAf,CAVc;;AAYd,SAAK4H,YAAL,GAAoB,KAApB;AACA,SAAK65C,SAAL,GAAiB,IAAjB;AACD;;AAED7nB,EAAAA,IAAI,CAACr5C,OAAD,EAAU;AACZ,QAAIq5B,KAAK,GAAG,IAAZ;AAAA,QAAkBjU,EAAE,GAAG,KAAKA,EAA5B;AACA,SAAKkgD,WAAL,CAAiBtlE,OAAjB;AACA,UAAMunB,EAAE,GAAG,KAAKg+C,QAAhB;AAEAvlE,IAAAA,OAAO,CAAC2+B,OAAR,CAAgBvC,YAAhB,CAA6B,KAAKuC,OAAlC,EAA2C3+B,OAAO,CAAC2+B,OAAR,CAAgBliB,UAA3D,EALY;;AAQZ,QAAIpB,GAAJ,EAASkM,EAAE,CAAC/zB,KAAH,CAAShB,KAAT,GAAiB,KAAjB;AAETqyB,IAAAA,EAAE,CAAC0C,EAAD,EAAK,OAAL,EAAc,MAAM;AACpB,UAAI7M,EAAE,IAAIC,UAAU,IAAI,CAApB,IAAyB,KAAK0M,YAAlC,EAAgD,KAAKA,YAAL,GAAoB,IAApB;AAChDgS,MAAAA,KAAK,CAACypC,IAAN;AACD,KAHC,CAAF;AAKAj+C,IAAAA,EAAE,CAAC0C,EAAD,EAAK,OAAL,EAAc3Z,CAAC,IAAI;AACnB,UAAIuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAd,IAAyBwuD,WAAW,CAACxuD,CAAD,EAAIwX,EAAJ,CAAxC,EAAiD;AAEjDA,MAAAA,EAAE,CAAC+D,KAAH,CAASuwC,aAAT,GAAyB,CAAC,IAAIz7D,IAAJ,EAA1B;AACAo7B,MAAAA,KAAK,CAACmsC,QAAN;AACD,KALC,CAAF;;AAOA,aAASC,cAAT,CAAwB73D,CAAxB,EAA2B;AACzB,UAAIuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAAlB,EAA2B;;AAC3B,UAAIwX,EAAE,CAAC21B,iBAAH,EAAJ,EAA4B;AAC1BwgB,QAAAA,aAAa,CAAC;AAACU,UAAAA,QAAQ,EAAE,KAAX;AAAkB17D,UAAAA,IAAI,EAAE6kB,EAAE,CAACsiC,aAAH;AAAxB,SAAD,CAAb;AACD,OAFD,MAEO,IAAI,CAACtiC,EAAE,CAAC5S,OAAH,CAAWmvD,eAAhB,EAAiC;AACtC;AACD,OAFM,MAEA;AACL,YAAIz4B,MAAM,GAAG0zB,cAAc,CAACx3C,EAAD,CAA3B;AACAm2C,QAAAA,aAAa,CAAC;AAACU,UAAAA,QAAQ,EAAE,IAAX;AAAiB17D,UAAAA,IAAI,EAAE2oC,MAAM,CAAC3oC;AAA9B,SAAD,CAAb;;AACA,YAAIqN,CAAC,CAACvc,IAAF,IAAU,KAAd,EAAqB;AACnB+zB,UAAAA,EAAE,CAACoiC,aAAH,CAAiBte,MAAM,CAACA,MAAxB,EAAgC,IAAhC,EAAsC/oB,cAAtC;AACD,SAFD,MAEO;AACLkZ,UAAAA,KAAK,CAAC+rC,SAAN,GAAkB,EAAlB;AACA79C,UAAAA,EAAE,CAACh2B,KAAH,GAAW23C,MAAM,CAAC3oC,IAAP,CAAY8N,IAAZ,CAAiB,IAAjB,CAAX;AACAiQ,UAAAA,WAAW,CAACiJ,EAAD,CAAX;AACD;AACF;;AACD,UAAI3Z,CAAC,CAACvc,IAAF,IAAU,KAAd,EAAqB+zB,EAAE,CAAC+D,KAAH,CAASwwC,WAAT,GAAuB,CAAC,IAAI17D,IAAJ,EAAxB;AACtB;;AACD4mB,IAAAA,EAAE,CAAC0C,EAAD,EAAK,KAAL,EAAYk+C,cAAZ,CAAF;AACA5gD,IAAAA,EAAE,CAAC0C,EAAD,EAAK,MAAL,EAAak+C,cAAb,CAAF;AAEA5gD,IAAAA,EAAE,CAAC7kB,OAAO,CAAC4/B,QAAT,EAAmB,OAAnB,EAA4BhyB,CAAC,IAAI;AACjC,UAAIgxB,aAAa,CAAC5+B,OAAD,EAAU4N,CAAV,CAAb,IAA6BuX,cAAc,CAACC,EAAD,EAAKxX,CAAL,CAA/C,EAAwD;;AACxD,UAAI,CAAC2Z,EAAE,CAACm+C,aAAR,EAAuB;AACrBtgD,QAAAA,EAAE,CAAC+D,KAAH,CAASuwC,aAAT,GAAyB,CAAC,IAAIz7D,IAAJ,EAA1B;AACAo7B,QAAAA,KAAK,CAAChgC,KAAN;AACA;AACD,OANgC;;;AASjC,YAAMG,KAAK,GAAG,IAAImsE,KAAJ,CAAU,OAAV,CAAd;AACAnsE,MAAAA,KAAK,CAAC8iE,aAAN,GAAsB1uD,CAAC,CAAC0uD,aAAxB;AACA/0C,MAAAA,EAAE,CAACm+C,aAAH,CAAiBlsE,KAAjB;AACD,KAZC,CAAF,CA5CY;;AA2DZqrB,IAAAA,EAAE,CAAC7kB,OAAO,CAACg/B,SAAT,EAAoB,aAApB,EAAmCpxB,CAAC,IAAI;AACxC,UAAI,CAACgxB,aAAa,CAAC5+B,OAAD,EAAU4N,CAAV,CAAlB,EAAgCoY,gBAAgB,CAACpY,CAAD,CAAhB;AACjC,KAFC,CAAF;AAIAiX,IAAAA,EAAE,CAAC0C,EAAD,EAAK,kBAAL,EAAyB,MAAM;AAC/B,UAAIpK,KAAK,GAAGiI,EAAE,CAAC8pB,SAAH,CAAa,MAAb,CAAZ;AACA,UAAI7V,KAAK,CAAC6nC,SAAV,EAAqB7nC,KAAK,CAAC6nC,SAAN,CAAgBjkD,KAAhB,CAAsB/V,KAAtB;AACrBmyB,MAAAA,KAAK,CAAC6nC,SAAN,GAAkB;AAChB/jD,QAAAA,KAAK,EAAEA,KADS;AAEhBF,QAAAA,KAAK,EAAEmI,EAAE,CAACmgC,QAAH,CAAYpoC,KAAZ,EAAmBiI,EAAE,CAAC8pB,SAAH,CAAa,IAAb,CAAnB,EAAuC;AAAC9yB,UAAAA,SAAS,EAAE;AAAZ,SAAvC;AAFS,OAAlB;AAID,KAPC,CAAF;AAQAyI,IAAAA,EAAE,CAAC0C,EAAD,EAAK,gBAAL,EAAuB,MAAM;AAC7B,UAAI8R,KAAK,CAAC6nC,SAAV,EAAqB;AACnB7nC,QAAAA,KAAK,CAACypC,IAAN;AACAzpC,QAAAA,KAAK,CAAC6nC,SAAN,CAAgBjkD,KAAhB,CAAsB/V,KAAtB;AACAmyB,QAAAA,KAAK,CAAC6nC,SAAN,GAAkB,IAAlB;AACD;AACF,KANC,CAAF;AAOD;;AAEDoE,EAAAA,WAAW,CAACM,QAAD,EAAW;AACpB;AACA,SAAKjnC,OAAL,GAAeq+B,cAAc,EAA7B,CAFoB;AAIpB;;AACA,SAAKuI,QAAL,GAAgB,KAAK5mC,OAAL,CAAaliB,UAA7B;AACD;;AAEDs8C,EAAAA,wBAAwB,CAAChpD,KAAD,EAAQ;AAC9B;AACA,QAAGA,KAAH,EAAU;AACR,WAAKw1D,QAAL,CAAc/uE,YAAd,CAA2B,YAA3B,EAAyCuZ,KAAzC;AACD,KAFD,MAEO;AACL,WAAKw1D,QAAL,CAAcjyE,eAAd,CAA8B,YAA9B;AACD;AACF;;AAEDs1C,EAAAA,gBAAgB,GAAG;AACjB;AACA,QAAIxjB,EAAE,GAAG,KAAKA,EAAd;AAAA,QAAkBplB,OAAO,GAAGolB,EAAE,CAACplB,OAA/B;AAAA,QAAwCorB,GAAG,GAAGhG,EAAE,CAACgG,GAAjD;AACA,QAAI9pB,MAAM,GAAGsnC,gBAAgB,CAACxjB,EAAD,CAA7B,CAHiB;;AAMjB,QAAIA,EAAE,CAAC5S,OAAH,CAAWqzD,mBAAf,EAAoC;AAClC,UAAI1G,OAAO,GAAG16B,YAAY,CAACrf,EAAD,EAAKgG,GAAG,CAAC6d,GAAJ,CAAQJ,OAAR,GAAkBhyC,IAAvB,EAA6B,KAA7B,CAA1B;AACA,UAAIivE,OAAO,GAAG9lE,OAAO,CAAC2+B,OAAR,CAAgBhlC,qBAAhB,EAAd;AAAA,UAAuDosE,OAAO,GAAG/lE,OAAO,CAAC4sC,OAAR,CAAgBjzC,qBAAhB,EAAjE;AACA2H,MAAAA,MAAM,CAAC0kE,KAAP,GAAe7nE,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY5kB,IAAI,CAACyiB,GAAL,CAAS5gB,OAAO,CAAC2+B,OAAR,CAAgBoB,YAAhB,GAA+B,EAAxC,EACSo/B,OAAO,CAAC5oD,GAAR,GAAcwvD,OAAO,CAACxvD,GAAtB,GAA4BuvD,OAAO,CAACvvD,GAD7C,CAAZ,CAAf;AAEAjV,MAAAA,MAAM,CAAC2kE,MAAP,GAAgB9nE,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY5kB,IAAI,CAACyiB,GAAL,CAAS5gB,OAAO,CAAC2+B,OAAR,CAAgB7nB,WAAhB,GAA8B,EAAvC,EACSqoD,OAAO,CAAC33D,IAAR,GAAeu+D,OAAO,CAACv+D,IAAvB,GAA8Bs+D,OAAO,CAACt+D,IAD/C,CAAZ,CAAhB;AAED;;AAED,WAAOlG,MAAP;AACD;;AAEDqnC,EAAAA,aAAa,CAACu9B,KAAD,EAAQ;AACnB,QAAI9gD,EAAE,GAAG,KAAKA,EAAd;AAAA,QAAkBplB,OAAO,GAAGolB,EAAE,CAACplB,OAA/B;AACA0c,IAAAA,oBAAoB,CAAC1c,OAAO,CAAC6rC,SAAT,EAAoBq6B,KAAK,CAACn9B,OAA1B,CAApB;AACArsB,IAAAA,oBAAoB,CAAC1c,OAAO,CAAC23C,YAAT,EAAuBuuB,KAAK,CAACv0D,SAA7B,CAApB;;AACA,QAAIu0D,KAAK,CAACF,KAAN,IAAe,IAAnB,EAAyB;AACvB,WAAKrnC,OAAL,CAAanrC,KAAb,CAAmB+iB,GAAnB,GAAyB2vD,KAAK,CAACF,KAAN,GAAc,IAAvC;AACA,WAAKrnC,OAAL,CAAanrC,KAAb,CAAmBgU,IAAnB,GAA0B0+D,KAAK,CAACD,MAAN,GAAe,IAAzC;AACD;AACF,GA5IgC;AA+IjC;;;AACAh0D,EAAAA,KAAK,CAACghC,MAAD,EAAS;AACZ,QAAI,KAAKkzB,kBAAL,IAA2B,KAAKjF,SAApC,EAA+C;AAC/C,QAAI97C,EAAE,GAAG,KAAKA,EAAd;;AACA,QAAIA,EAAE,CAAC21B,iBAAH,EAAJ,EAA4B;AAC1B,WAAKqqB,SAAL,GAAiB,EAAjB;AACA,UAAIruE,OAAO,GAAGquB,EAAE,CAACkC,YAAH,EAAd;AACA,WAAKi+C,QAAL,CAAch0E,KAAd,GAAsBwF,OAAtB;AACA,UAAIquB,EAAE,CAAC+D,KAAH,CAAS3Y,OAAb,EAAsB8N,WAAW,CAAC,KAAKinD,QAAN,CAAX;AACtB,UAAI7qD,EAAE,IAAIC,UAAU,IAAI,CAAxB,EAA2B,KAAK0M,YAAL,GAAoBtwB,OAApB;AAC5B,KAND,MAMO,IAAI,CAACk8C,MAAL,EAAa;AAClB,WAAKmyB,SAAL,GAAiB,KAAKG,QAAL,CAAch0E,KAAd,GAAsB,EAAvC;AACA,UAAImpB,EAAE,IAAIC,UAAU,IAAI,CAAxB,EAA2B,KAAK0M,YAAL,GAAoB,IAApB;AAC5B;AACF;;AAEDwsC,EAAAA,QAAQ,GAAG;AAAE,WAAO,KAAK0R,QAAZ;AAAsB;;AAEnC7Q,EAAAA,aAAa,GAAG;AAAE,WAAO,KAAP;AAAc;;AAEhCr7D,EAAAA,KAAK,GAAG;AACN,QAAI,KAAK+rB,EAAL,CAAQ5S,OAAR,CAAgBngB,QAAhB,IAA4B,UAA5B,KAA2C,CAACmpB,MAAD,IAAWuC,SAAS,MAAM,KAAKwnD,QAA1E,CAAJ,EAAyF;AACvF,UAAI;AAAE,aAAKA,QAAL,CAAclsE,KAAd;AAAuB,OAA7B,CACA,OAAOuU,CAAP,EAAU,EAF6E;;AAGxF;AACF;;AAEDirD,EAAAA,IAAI,GAAG;AAAE,SAAK0M,QAAL,CAAc1M,IAAd;AAAsB;;AAE/BI,EAAAA,aAAa,GAAG;AACd,SAAKt6B,OAAL,CAAanrC,KAAb,CAAmB+iB,GAAnB,GAAyB,KAAKooB,OAAL,CAAanrC,KAAb,CAAmBgU,IAAnB,GAA0B,CAAnD;AACD;;AAEDilC,EAAAA,aAAa,GAAG;AAAE,SAAK25B,QAAL;AAAiB,GAhLF;AAmLjC;;;AACAA,EAAAA,QAAQ,GAAG;AACT,QAAI,KAAKf,WAAT,EAAsB;AACtB,SAAKpE,OAAL,CAAaphD,GAAb,CAAiB,KAAKuF,EAAL,CAAQ5S,OAAR,CAAgBuwD,YAAjC,EAA+C,MAAM;AACnD,WAAKD,IAAL;AACA,UAAI,KAAK19C,EAAL,CAAQ+D,KAAR,CAAc3Y,OAAlB,EAA2B,KAAK41D,QAAL;AAC5B,KAHD;AAID,GA1LgC;AA6LjC;AACA;;;AACAZ,EAAAA,QAAQ,GAAG;AACT,QAAIa,MAAM,GAAG,KAAb;AAAA,QAAoBhtC,KAAK,GAAG,IAA5B;AACAA,IAAAA,KAAK,CAACgsC,WAAN,GAAoB,IAApB;;AACA,aAASrxC,CAAT,GAAa;AACX,UAAI6Z,OAAO,GAAGxU,KAAK,CAACypC,IAAN,EAAd;;AACA,UAAI,CAACj1B,OAAD,IAAY,CAACw4B,MAAjB,EAAyB;AAACA,QAAAA,MAAM,GAAG,IAAT;AAAehtC,QAAAA,KAAK,CAAC4nC,OAAN,CAAcphD,GAAd,CAAkB,EAAlB,EAAsBmU,CAAtB;AAAyB,OAAlE,MACK;AAACqF,QAAAA,KAAK,CAACgsC,WAAN,GAAoB,KAApB;AAA2BhsC,QAAAA,KAAK,CAAC+sC,QAAN;AAAiB;AACnD;;AACD/sC,IAAAA,KAAK,CAAC4nC,OAAN,CAAcphD,GAAd,CAAkB,EAAlB,EAAsBmU,CAAtB;AACD,GAxMgC;AA2MjC;AACA;AACA;AACA;AACA;;;AACA8uC,EAAAA,IAAI,GAAG;AACL,QAAI19C,EAAE,GAAG,KAAKA,EAAd;AAAA,QAAkBiU,KAAK,GAAG,KAAKksC,QAA/B;AAAA,QAAyCH,SAAS,GAAG,KAAKA,SAA1D,CADK;AAGL;AACA;AACA;;AACA,QAAI,KAAKe,kBAAL,IAA2B,CAAC/gD,EAAE,CAAC+D,KAAH,CAAS3Y,OAArC,IACC6W,YAAY,CAACgS,KAAD,CAAZ,IAAuB,CAAC+rC,SAAxB,IAAqC,CAAC,KAAKlE,SAD5C,IAEA97C,EAAE,CAACulC,UAAH,EAFA,IAEmBvlC,EAAE,CAAC5S,OAAH,CAAW+pD,YAF9B,IAE8Cn3C,EAAE,CAAC+D,KAAH,CAASmqC,MAF3D,EAGE,OAAO,KAAP;AAEF,QAAI/yD,IAAI,GAAG84B,KAAK,CAAC9nC,KAAjB,CAXK;;AAaL,QAAIgP,IAAI,IAAI6kE,SAAR,IAAqB,CAAChgD,EAAE,CAAC21B,iBAAH,EAA1B,EAAkD,OAAO,KAAP,CAb7C;AAeL;AACA;;AACA,QAAIrgC,EAAE,IAAIC,UAAU,IAAI,CAApB,IAAyB,KAAK0M,YAAL,KAAsB9mB,IAA/C,IACAkb,GAAG,IAAI,kBAAkB1F,IAAlB,CAAuBxV,IAAvB,CADX,EACyC;AACvC6kB,MAAAA,EAAE,CAACplB,OAAH,CAAWq5B,KAAX,CAAiBpnB,KAAjB;AACA,aAAO,KAAP;AACD;;AAED,QAAImT,EAAE,CAACgG,GAAH,CAAO6d,GAAP,IAAc7jB,EAAE,CAACplB,OAAH,CAAWwsC,iBAA7B,EAAgD;AAC9C,UAAInhB,KAAK,GAAG9qB,IAAI,CAACkK,UAAL,CAAgB,CAAhB,CAAZ;AACA,UAAI4gB,KAAK,IAAI,MAAT,IAAmB,CAAC+5C,SAAxB,EAAmCA,SAAS,GAAG,QAAZ;;AACnC,UAAI/5C,KAAK,IAAI,MAAb,EAAqB;AAAE,aAAKpZ,KAAL;AAAc,eAAO,KAAKmT,EAAL,CAAQ8sC,WAAR,CAAoB,MAApB,CAAP;AAAoC;AAC1E,KA3BI;;;AA6BL,QAAIoU,IAAI,GAAG,CAAX;AAAA,QAAcp/C,CAAC,GAAG/oB,IAAI,CAACyiB,GAAL,CAASwkD,SAAS,CAAC/vE,MAAnB,EAA2BkL,IAAI,CAAClL,MAAhC,CAAlB;;AACA,WAAOixE,IAAI,GAAGp/C,CAAP,IAAYk+C,SAAS,CAAC36D,UAAV,CAAqB67D,IAArB,KAA8B/lE,IAAI,CAACkK,UAAL,CAAgB67D,IAAhB,CAAjD,EAAwE,EAAEA,IAAF;;AAExEvxB,IAAAA,OAAO,CAAC3vB,EAAD,EAAK,MAAM;AAChBq2C,MAAAA,cAAc,CAACr2C,EAAD,EAAK7kB,IAAI,CAACY,KAAL,CAAWmlE,IAAX,CAAL,EAAuBlB,SAAS,CAAC/vE,MAAV,GAAmBixE,IAA1C,EACC,IADD,EACO,KAAKpF,SAAL,GAAiB,UAAjB,GAA8B,IADrC,CAAd,CADgB;;AAKhB,UAAI3gE,IAAI,CAAClL,MAAL,GAAc,IAAd,IAAsBkL,IAAI,CAAC8E,OAAL,CAAa,IAAb,IAAqB,CAAC,CAAhD,EAAmDg0B,KAAK,CAAC9nC,KAAN,GAAc,KAAK6zE,SAAL,GAAiB,EAA/B,CAAnD,KACK,KAAKA,SAAL,GAAiB7kE,IAAjB;;AAEL,UAAI,KAAK2gE,SAAT,EAAoB;AAClB,aAAKA,SAAL,CAAejkD,KAAf,CAAqB/V,KAArB;AACA,aAAKg6D,SAAL,CAAejkD,KAAf,GAAuBmI,EAAE,CAACmgC,QAAH,CAAY,KAAK2b,SAAL,CAAe/jD,KAA3B,EAAkCiI,EAAE,CAAC8pB,SAAH,CAAa,IAAb,CAAlC,EACY;AAAC9yB,UAAAA,SAAS,EAAE;AAAZ,SADZ,CAAvB;AAED;AACF,KAbM,CAAP;AAcA,WAAO,IAAP;AACD;;AAED02C,EAAAA,YAAY,GAAG;AACb,QAAI,KAAKuS,WAAL,IAAoB,KAAKvC,IAAL,EAAxB,EAAqC,KAAKuC,WAAL,GAAmB,KAAnB;AACtC;;AAEDpR,EAAAA,UAAU,GAAG;AACX,QAAIv5C,EAAE,IAAIC,UAAU,IAAI,CAAxB,EAA2B,KAAK0M,YAAL,GAAoB,IAApB;AAC3B,SAAKm+C,QAAL;AACD;;AAEDxQ,EAAAA,aAAa,CAACpnD,CAAD,EAAI;AACf,QAAIyrB,KAAK,GAAG,IAAZ;AAAA,QAAkBjU,EAAE,GAAGiU,KAAK,CAACjU,EAA7B;AAAA,QAAiCplB,OAAO,GAAGolB,EAAE,CAACplB,OAA9C;AAAA,QAAuDunB,EAAE,GAAG8R,KAAK,CAACksC,QAAlE;AACA,QAAIlsC,KAAK,CAAC8sC,kBAAV,EAA8B9sC,KAAK,CAAC8sC,kBAAN;AAC9B,QAAI1lD,GAAG,GAAG2mB,YAAY,CAAChiB,EAAD,EAAKxX,CAAL,CAAtB;AAAA,QAA+BmgC,SAAS,GAAG/tC,OAAO,CAAC4/B,QAAR,CAAiBpnC,SAA5D;AACA,QAAI,CAACioB,GAAD,IAAQzF,MAAZ,EAAoB,OAJL;AAMf;AACA;;AACA,QAAI/I,KAAK,GAAGmT,EAAE,CAAC5S,OAAH,CAAW+zD,2BAAvB;AACA,QAAIt0D,KAAK,IAAImT,EAAE,CAACgG,GAAH,CAAO6d,GAAP,CAAWrrB,QAAX,CAAoB6C,GAApB,KAA4B,CAAC,CAA1C,EACEu0B,SAAS,CAAC5vB,EAAD,EAAK66B,YAAL,CAAT,CAA4B76B,EAAE,CAACgG,GAA/B,EAAoCiwB,eAAe,CAAC56B,GAAD,CAAnD,EAA0DN,cAA1D;AAEF,QAAIqmD,MAAM,GAAGj/C,EAAE,CAAC/zB,KAAH,CAASspB,OAAtB;AAAA,QAA+B2pD,aAAa,GAAGptC,KAAK,CAACsF,OAAN,CAAcnrC,KAAd,CAAoBspB,OAAnE;AACA,QAAI4pD,UAAU,GAAGrtC,KAAK,CAACsF,OAAN,CAAcgoC,YAAd,CAA2BhtE,qBAA3B,EAAjB;AACA0/B,IAAAA,KAAK,CAACsF,OAAN,CAAcnrC,KAAd,CAAoBspB,OAApB,GAA8B,kBAA9B;AACAyK,IAAAA,EAAE,CAAC/zB,KAAH,CAASspB,OAAT,GAAoB;AACxB,aAAalP,CAAC,CAAC45B,OAAF,GAAYk/B,UAAU,CAACnwD,GAAvB,GAA6B,CAAE,aAAY3I,CAAC,CAAC25B,OAAF,GAAYm/B,UAAU,CAACl/D,IAAvB,GAA8B,CAAE;AACxF,mCAAmCkT,EAAE,GAAG,0BAAH,GAAgC,aAAc;AACnF,+GAHI;AAIA,QAAIksD,UAAJ;AACA,QAAI/rD,MAAJ,EAAY+rD,UAAU,GAAG5gE,MAAM,CAAC6gE,OAApB,CApBG;;AAqBf7mE,IAAAA,OAAO,CAACq5B,KAAR,CAAchgC,KAAd;AACA,QAAIwhB,MAAJ,EAAY7U,MAAM,CAACs5D,QAAP,CAAgB,IAAhB,EAAsBsH,UAAtB;AACZ5mE,IAAAA,OAAO,CAACq5B,KAAR,CAAcpnB,KAAd,GAvBe;;AAyBf,QAAI,CAACmT,EAAE,CAAC21B,iBAAH,EAAL,EAA6BxzB,EAAE,CAACh2B,KAAH,GAAW8nC,KAAK,CAAC+rC,SAAN,GAAkB,GAA7B;AAC7B/rC,IAAAA,KAAK,CAAC8sC,kBAAN,GAA2BW,MAA3B;AACA9mE,IAAAA,OAAO,CAACwsC,iBAAR,GAA4BpnB,EAAE,CAACgG,GAAH,CAAO6d,GAAnC;AACAlpB,IAAAA,YAAY,CAAC/f,OAAO,CAAC+mE,kBAAT,CAAZ,CA5Be;AA+Bf;AACA;;AACA,aAASC,oBAAT,GAAgC;AAC9B,UAAIz/C,EAAE,CAAC/I,cAAH,IAAqB,IAAzB,EAA+B;AAC7B,YAAIitC,QAAQ,GAAGrmC,EAAE,CAAC21B,iBAAH,EAAf;AACA,YAAIksB,MAAM,GAAG,YAAYxb,QAAQ,GAAGlkC,EAAE,CAACh2B,KAAN,GAAc,EAAlC,CAAb;AACAg2B,QAAAA,EAAE,CAACh2B,KAAH,GAAW,QAAX,CAH6B;;AAI7Bg2B,QAAAA,EAAE,CAACh2B,KAAH,GAAW01E,MAAX;AACA5tC,QAAAA,KAAK,CAAC+rC,SAAN,GAAkB3Z,QAAQ,GAAG,EAAH,GAAQ,QAAlC;AACAlkC,QAAAA,EAAE,CAAC/I,cAAH,GAAoB,CAApB;AAAuB+I,QAAAA,EAAE,CAAC9I,YAAH,GAAkBwoD,MAAM,CAAC5xE,MAAzB,CANM;AAQ7B;;AACA2K,QAAAA,OAAO,CAACwsC,iBAAR,GAA4BpnB,EAAE,CAACgG,GAAH,CAAO6d,GAAnC;AACD;AACF;;AACD,aAAS69B,MAAT,GAAkB;AAChB,UAAIztC,KAAK,CAAC8sC,kBAAN,IAA4BW,MAAhC,EAAwC;AACxCztC,MAAAA,KAAK,CAAC8sC,kBAAN,GAA2B,KAA3B;AACA9sC,MAAAA,KAAK,CAACsF,OAAN,CAAcnrC,KAAd,CAAoBspB,OAApB,GAA8B2pD,aAA9B;AACAl/C,MAAAA,EAAE,CAAC/zB,KAAH,CAASspB,OAAT,GAAmB0pD,MAAnB;AACA,UAAI9rD,EAAE,IAAIC,UAAU,GAAG,CAAvB,EAA0B3a,OAAO,CAAC8vC,UAAR,CAAmBJ,YAAnB,CAAgC1vC,OAAO,CAAC4/B,QAAR,CAAiBpnC,SAAjB,GAA6Bu1C,SAA7D,EALV;;AAQhB,UAAIxmB,EAAE,CAAC/I,cAAH,IAAqB,IAAzB,EAA+B;AAC7B,YAAI,CAAC9D,EAAD,IAAQA,EAAE,IAAIC,UAAU,GAAG,CAA/B,EAAmCqsD,oBAAoB;;AACvD,YAAI5gE,CAAC,GAAG,CAAR;AAAA,YAAW08D,IAAI,GAAG,MAAM;AACtB,cAAI9iE,OAAO,CAACwsC,iBAAR,IAA6BpnB,EAAE,CAACgG,GAAH,CAAO6d,GAApC,IAA2C1hB,EAAE,CAAC/I,cAAH,IAAqB,CAAhE,IACA+I,EAAE,CAAC9I,YAAH,GAAkB,CADlB,IACuB4a,KAAK,CAAC+rC,SAAN,IAAmB,QAD9C,EACwD;AACtDpwB,YAAAA,SAAS,CAAC5vB,EAAD,EAAKy8B,SAAL,CAAT,CAAyBz8B,EAAzB;AACD,WAHD,MAGO,IAAIhf,CAAC,KAAK,EAAV,EAAc;AACnBpG,YAAAA,OAAO,CAAC+mE,kBAAR,GAA6BjiE,UAAU,CAACg+D,IAAD,EAAO,GAAP,CAAvC;AACD,WAFM,MAEA;AACL9iE,YAAAA,OAAO,CAACwsC,iBAAR,GAA4B,IAA5B;AACAxsC,YAAAA,OAAO,CAACq5B,KAAR,CAAcpnB,KAAd;AACD;AACF,SAVD;;AAWAjS,QAAAA,OAAO,CAAC+mE,kBAAR,GAA6BjiE,UAAU,CAACg+D,IAAD,EAAO,GAAP,CAAvC;AACD;AACF;;AAED,QAAIpoD,EAAE,IAAIC,UAAU,IAAI,CAAxB,EAA2BqsD,oBAAoB;;AAC/C,QAAIlrD,iBAAJ,EAAuB;AACrBoK,MAAAA,MAAM,CAACtY,CAAD,CAAN;;AACA,UAAIs5D,OAAO,GAAG,MAAM;AAClBliD,QAAAA,GAAG,CAAChf,MAAD,EAAS,SAAT,EAAoBkhE,OAApB,CAAH;AACApiE,QAAAA,UAAU,CAACgiE,MAAD,EAAS,EAAT,CAAV;AACD,OAHD;;AAIAjiD,MAAAA,EAAE,CAAC7e,MAAD,EAAS,SAAT,EAAoBkhE,OAApB,CAAF;AACD,KAPD,MAOO;AACLpiE,MAAAA,UAAU,CAACgiE,MAAD,EAAS,EAAT,CAAV;AACD;AACF;;AAEDhO,EAAAA,eAAe,CAACzvC,GAAD,EAAM;AACnB,QAAI,CAACA,GAAL,EAAU,KAAKpX,KAAL;AACV,SAAKszD,QAAL,CAAc90D,QAAd,GAAyB4Y,GAAG,IAAI,UAAhC;AACA,SAAKk8C,QAAL,CAAclzE,QAAd,GAAyB,CAAC,CAACg3B,GAA3B;AACD;;AAEDkQ,EAAAA,aAAa,GAAG;;AApWiB;AAuWnC4rC,aAAa,CAAC55D,SAAd,CAAwB+tB,qBAAxB,GAAgD,KAAhD;;ACjXO,SAAS6tC,YAAT,CAAsB5B,QAAtB,EAAgC/yD,OAAhC,EAAyC;AAC9CA,EAAAA,OAAO,GAAGA,OAAO,GAAGqM,OAAO,CAACrM,OAAD,CAAV,GAAsB,EAAvC;AACAA,EAAAA,OAAO,CAACjhB,KAAR,GAAgBg0E,QAAQ,CAACh0E,KAAzB;AACA,MAAI,CAACihB,OAAO,CAAC9W,QAAT,IAAqB6pE,QAAQ,CAAC50B,QAAlC,EACEn+B,OAAO,CAAC9W,QAAR,GAAmB6pE,QAAQ,CAAC50B,QAA5B;AACF,MAAI,CAACn+B,OAAO,CAACxgB,WAAT,IAAwBuzE,QAAQ,CAACvzE,WAArC,EACEwgB,OAAO,CAACxgB,WAAR,GAAsBuzE,QAAQ,CAACvzE,WAA/B,CAN4C;AAQ9C;;AACA,MAAIwgB,OAAO,CAAConD,SAAR,IAAqB,IAAzB,EAA+B;AAC7B,QAAI3tB,QAAQ,GAAGluB,SAAS,EAAxB;AACAvL,IAAAA,OAAO,CAAConD,SAAR,GAAoB3tB,QAAQ,IAAIs5B,QAAZ,IAClBA,QAAQ,CAACjvE,YAAT,CAAsB,WAAtB,KAAsC,IAAtC,IAA8C21C,QAAQ,IAAIr1C,QAAQ,CAACkF,IADrE;AAED;;AAED,WAAS+xB,IAAT,GAAgB;AAAC03C,IAAAA,QAAQ,CAACh0E,KAAT,GAAiB6zB,EAAE,CAACyhC,QAAH,EAAjB;AAA+B;;AAEhD,MAAIugB,UAAJ;;AACA,MAAI7B,QAAQ,CAAC8B,IAAb,EAAmB;AACjBxiD,IAAAA,EAAE,CAAC0gD,QAAQ,CAAC8B,IAAV,EAAgB,QAAhB,EAA0Bx5C,IAA1B,CAAF,CADiB;;AAGjB,QAAI,CAACrb,OAAO,CAAC80D,sBAAb,EAAqC;AACnC,UAAID,IAAI,GAAG9B,QAAQ,CAAC8B,IAApB;AACAD,MAAAA,UAAU,GAAGC,IAAI,CAACE,MAAlB;;AACA,UAAI;AACF,YAAIC,aAAa,GAAGH,IAAI,CAACE,MAAL,GAAc,MAAM;AACtC15C,UAAAA,IAAI;AACJw5C,UAAAA,IAAI,CAACE,MAAL,GAAcH,UAAd;AACAC,UAAAA,IAAI,CAACE,MAAL;AACAF,UAAAA,IAAI,CAACE,MAAL,GAAcC,aAAd;AACD,SALD;AAMD,OAPD,CAOE,OAAM55D,CAAN,EAAS;AACZ;AACF;;AAED4E,EAAAA,OAAO,CAACsnD,UAAR,GAAqB10C,EAAE,IAAI;AACzBA,IAAAA,EAAE,CAACyI,IAAH,GAAUA,IAAV;;AACAzI,IAAAA,EAAE,CAACqiD,WAAH,GAAiB,MAAMlC,QAAvB;;AACAngD,IAAAA,EAAE,CAACsiD,UAAH,GAAgB,MAAM;AACpBtiD,MAAAA,EAAE,CAACsiD,UAAH,GAAgBpzE,KAAhB,CADoB;;AAEpBu5B,MAAAA,IAAI;AACJ03C,MAAAA,QAAQ,CAAClmE,UAAT,CAAoByC,WAApB,CAAgCsjB,EAAE,CAACy6C,iBAAH,EAAhC;AACA0F,MAAAA,QAAQ,CAAC/xE,KAAT,CAAewM,OAAf,GAAyB,EAAzB;;AACA,UAAIulE,QAAQ,CAAC8B,IAAb,EAAmB;AACjBriD,QAAAA,GAAG,CAACugD,QAAQ,CAAC8B,IAAV,EAAgB,QAAhB,EAA0Bx5C,IAA1B,CAAH;AACA,YAAI,CAACrb,OAAO,CAAC80D,sBAAT,IAAmC,OAAO/B,QAAQ,CAAC8B,IAAT,CAAcE,MAArB,IAA+B,UAAtE,EACEhC,QAAQ,CAAC8B,IAAT,CAAcE,MAAd,GAAuBH,UAAvB;AACH;AACF,KAVD;AAWD,GAdD;;AAgBA7B,EAAAA,QAAQ,CAAC/xE,KAAT,CAAewM,OAAf,GAAyB,MAAzB;AACA,MAAIolB,EAAE,GAAG2kC,UAAU,CAAC7tC,IAAI,IAAIqpD,QAAQ,CAAClmE,UAAT,CAAoB+8B,YAApB,CAAiClgB,IAAjC,EAAuCqpD,QAAQ,CAAC9nC,WAAhD,CAAT,EACjBjrB,OADiB,CAAnB;AAEA,SAAO4S,EAAP;AACD;;ACzCM,SAASuiD,cAAT,CAAwB5d,UAAxB,EAAoC;AACzCA,EAAAA,UAAU,CAAC/kC,GAAX,GAAiBA,GAAjB;AACA+kC,EAAAA,UAAU,CAACllC,EAAX,GAAgBA,EAAhB;AACAklC,EAAAA,UAAU,CAAC/P,gBAAX,GAA8BA,gBAA9B;AACA+P,EAAAA,UAAU,CAACrD,GAAX,GAAiBA,GAAjB;AACAqD,EAAAA,UAAU,CAAC1G,UAAX,GAAwBp8B,cAAxB;AACA8iC,EAAAA,UAAU,CAAC9qC,WAAX,GAAyBA,WAAzB;AACA8qC,EAAAA,UAAU,CAACxpC,UAAX,GAAwBA,UAAxB;AACAwpC,EAAAA,UAAU,CAACloC,UAAX,GAAwBF,eAAxB;AACAooC,EAAAA,UAAU,CAAC7pC,IAAX,GAAkBA,IAAlB;AACA6pC,EAAAA,UAAU,CAAC7kC,MAAX,GAAoBA,MAApB;AACA6kC,EAAAA,UAAU,CAACpzB,IAAX,GAAkBA,IAAlB;AACAozB,EAAAA,UAAU,CAACzO,SAAX,GAAuBA,SAAvB;AACAyO,EAAAA,UAAU,CAACrX,cAAX,GAA4BA,cAA5B;AACAqX,EAAAA,UAAU,CAACr9B,GAAX,GAAiBA,GAAjB;AACAq9B,EAAAA,UAAU,CAAC6d,MAAX,GAAoBj7C,GAApB;AACAo9B,EAAAA,UAAU,CAAC9hC,KAAX,GAAmBA,KAAnB;AACA8hC,EAAAA,UAAU,CAAC7hC,SAAX,GAAuBA,SAAvB;AACA6hC,EAAAA,UAAU,CAACthC,WAAX,GAAyBA,WAAzB;AACAshC,EAAAA,UAAU,CAACrhC,OAAX,GAAqBA,OAArB;AACAqhC,EAAAA,UAAU,CAAClhC,cAAX,GAA4BA,cAA5B;AACAkhC,EAAAA,UAAU,CAAC9gC,UAAX,GAAwBA,UAAxB;AACA8gC,EAAAA,UAAU,CAAC7gC,SAAX,GAAuBA,SAAvB;AACA6gC,EAAAA,UAAU,CAACxgC,UAAX,GAAwBA,UAAxB;AACAwgC,EAAAA,UAAU,CAACzgC,SAAX,GAAuBA,SAAvB;AACAygC,EAAAA,UAAU,CAACmF,QAAX,GAAsBA,QAAtB;AACAnF,EAAAA,UAAU,CAAC+C,MAAX,GAAoBA,MAApB;AACA/C,EAAAA,UAAU,CAACr8C,OAAX,GAAqBA,OAArB;AACAq8C,EAAAA,UAAU,CAAC4D,aAAX,GAA2BA,aAA3B;AACA5D,EAAAA,UAAU,CAACyD,SAAX,GAAuBA,SAAvB;AACAzD,EAAAA,UAAU,CAACsD,eAAX,GAA6BA,eAA7B;AACAtD,EAAAA,UAAU,CAACvgC,YAAX,GAA0BA,YAA1B;AACAugC,EAAAA,UAAU,CAACjE,gBAAX,GAA8BA,gBAA9B;AACAiE,EAAAA,UAAU,CAAC5E,UAAX,GAAwBA,UAAxB;AACA4E,EAAAA,UAAU,CAACpF,UAAX,GAAwBA,UAAxB;AACAoF,EAAAA,UAAU,CAAC/jC,gBAAX,GAA8BA,gBAA9B;AACA+jC,EAAAA,UAAU,CAAC9jC,iBAAX,GAA+BA,iBAA/B;AACA8jC,EAAAA,UAAU,CAAC7jC,MAAX,GAAoBA,MAApB;AACA6jC,EAAAA,UAAU,CAAC7rC,QAAX,GAAsBA,QAAtB;AACA6rC,EAAAA,UAAU,CAACnsC,QAAX,GAAsBA,QAAtB;AACAmsC,EAAAA,UAAU,CAAC9tC,OAAX,GAAqBA,OAArB;AACA8tC,EAAAA,UAAU,CAAC6C,QAAX,GAAsBA,QAAtB;AACD;;AC7DD;AAEA,AAQAoL,aAAa,CAACjO,UAAD,CAAb;AAEA,AAEA8d,gBAAgB,CAAC9d,UAAD,CAAhB;AAEA;AAGA,IAAI+d,YAAY,GAAG,gDAAgD5zE,KAAhD,CAAsD,GAAtD,CAAnB;;AACA,KAAK,IAAI8qB,IAAT,IAAiB0nC,GAAG,CAACn7C,SAArB,EAAgC,IAAIm7C,GAAG,CAACn7C,SAAJ,CAAcC,cAAd,CAA6BwT,IAA7B,KAAsC3Z,OAAO,CAACyiE,YAAD,EAAe9oD,IAAf,CAAP,GAA8B,CAAxE,EAC9B+qC,UAAU,CAACx+C,SAAX,CAAqByT,IAArB,IAA8B,UAASnZ,MAAT,EAAiB;AAC7C,SAAO,YAAW;AAAC,WAAOA,MAAM,CAAC+Y,KAAP,CAAa,KAAKwM,GAAlB,EAAuBlf,SAAvB,CAAP;AAAyC,GAA5D;AACD,CAF4B,CAE1Bw6C,GAAG,CAACn7C,SAAJ,CAAcyT,IAAd,CAF0B,CAA7B;;AAIF8G,UAAU,CAAC4gC,GAAD,CAAV;AAMAqD,UAAU,CAACyP,WAAX,GAAyB;AAAC,cAAY2L,aAAb;AAA4B,qBAAmBvE;AAA/C,CAAzB;AAOA;AACA;;AACA7W,UAAU,CAAC5hC,UAAX,GAAwB,UAAS9Y;AAAI;AAAb,EAA4B;AAClD,MAAI,CAAC06C,UAAU,CAAC+N,QAAX,CAAoB1vC,IAArB,IAA6B/Y,IAAI,IAAI,MAAzC,EAAiD06C,UAAU,CAAC+N,QAAX,CAAoB1vC,IAApB,GAA2B/Y,IAA3B;AACjD8Y,EAAAA,UAAU,CAACvJ,KAAX,CAAiB,IAAjB,EAAuB1S,SAAvB;AACD,CAHD;;AAKA69C,UAAU,CAACzhC,UAAX,GAAwBA,UAAxB;;AAGAyhC,UAAU,CAAC5hC,UAAX,CAAsB,MAAtB,EAA8B,OAAO;AAAC8H,EAAAA,KAAK,EAAEJ,MAAM,IAAIA,MAAM,CAACxF,SAAP;AAAlB,CAAP,CAA9B;AACA0/B,UAAU,CAACzhC,UAAX,CAAsB,YAAtB,EAAoC,MAApC;;AAIAyhC,UAAU,CAACge,eAAX,GAA6B,CAAC14D,IAAD,EAAO24D,IAAP,KAAgB;AAC3Cje,EAAAA,UAAU,CAACx+C,SAAX,CAAqB8D,IAArB,IAA6B24D,IAA7B;AACD,CAFD;;AAGAje,UAAU,CAACke,kBAAX,GAAgC,CAAC54D,IAAD,EAAO24D,IAAP,KAAgB;AAC9CthB,EAAAA,GAAG,CAACn7C,SAAJ,CAAc8D,IAAd,IAAsB24D,IAAtB;AACD,CAFD;AAMAje,UAAU,CAACod,YAAX,GAA0BA,YAA1B;AAEA,AAEAQ,cAAc,CAAC5d,UAAD,CAAd;AAEAA,UAAU,CAACn2C,OAAX,GAAqB,QAArB;;ACpEA,SAASs0D,MAAT,CAAgBne,UAAhB,EAA4B;AAE5BA,EAAAA,UAAU,CAAC5hC,UAAX,CAAsB,QAAtB,EAAgC,YAAW;AAEzC;AACA;AACA;AACA,QAAIggD,QAAQ,GAAG,YAAU;AACvB;AACA,eAASC,EAAT,CAAY/2E,IAAZ,EAAkB;AAAC,eAAO;AAACA,UAAAA,IAAI,EAAEA,IAAP;AAAamC,UAAAA,KAAK,EAAE;AAApB,SAAP;AAAuC;;AAC1D,UAAI60E,QAAQ,GAAGD,EAAE,CAAC,UAAD,CAAjB;AAAA,UACIE,IAAI,GAAG;AAACj3E,QAAAA,IAAI,EAAE,MAAP;AAAemC,QAAAA,KAAK,EAAE;AAAtB,OADX;AAAA,UAEI+0E,WAAW,GAAG;AAACl3E,QAAAA,IAAI,EAAE,aAAP;AAAsBmC,QAAAA,KAAK,EAAE;AAA7B,OAFlB;AAAA,UAGIg1E,SAAS,GAAG;AAACn3E,QAAAA,IAAI,EAAE,gBAAP;AAAyBmC,QAAAA,KAAK,EAAE;AAAhC,OAHhB,CAHuB;;AASvB,UAAIi1E,KAAK,GAAG;AACV,aAAKF;AADK,OAAZ,CATuB;AAcvB;;AACA,UAAIxb,KAAK,GAAG,CAAC,OAAD,EAAU,KAAV,EAAiB,UAAjB,EAA6B,UAA7B,EAAyC,kBAAzC,EAA6D,KAA7D,EAAoE,OAApE,EAA6E,IAA7E,EACZ,WADY,EACC,IADD,EACO,WADP,EACoB,UADpB,EACgC,QADhC,EAC0C,gBAD1C,EAC4D,IAD5D,EACkE,MADlE,EAC0E,MAD1E,EAEZ,UAFY,EAEA,OAFA,EAES,OAFT,EAEkB,WAFlB,EAE+B,SAF/B,EAE0C,cAF1C,EAE0D,UAF1D,EAEsE,SAFtE,EAGZ,SAHY,EAGD,MAHC,EAGO,iBAHP,EAG0B,OAH1B,EAGmC,gBAHnC,EAGqD,SAHrD,EAGgE,SAHhE,EAG2E,QAH3E,EAIZ,YAJY,EAIE,oBAJF,EAIwB,YAJxB,EAIsC,YAJtC,EAIoD,WAJpD,EAIiE,UAJjE,EAKZ,UALY,EAKA,eALA,EAKiB,SALjB,EAK4B,MAL5B,EAKoC,OALpC,EAK6C,gBAL7C,EAK+D,UAL/D,EAK2E,KAL3E,EAMZ,QANY,EAMF,OANE,EAMO,SANP,EAMkB,QANlB,EAM4B,UAN5B,EAMwC,OANxC,EAMiD,WANjD,EAM8D,mBAN9D,EAOZ,KAPY,EAOL,MAPK,EAOG,OAPH,EAOY,OAPZ,EAOqB,WAPrB,EAOkC,MAPlC,EAO0C,UAP1C,EAOsD,OAPtD,EAO+D,UAP/D,EAO2E,OAP3E,EAQZ,IARY,EAQN,QARM,EAQI,IARJ,EAQU,SARV,EAQqB,aARrB,EAQoC,QARpC,EAQ8C,UAR9C,EAQ0D,WAR1D,EAQuE,MARvE,EASZ,QATY,EASF,IATE,EASI,MATJ,EASY,UATZ,EASwB,MATxB,EASgC,KAThC,EASuC,OATvC,EASgD,KAThD,EASuD,QATvD,EASiE,WATjE,EAS8E,KAT9E,EAUZ,QAVY,EAUF,QAVE,EAUQ,MAVR,EAUgB,WAVhB,EAU6B,MAV7B,EAUqC,IAVrC,EAU2C,MAV3C,EAUmD,OAVnD,EAU4D,YAV5D,EAWZ,aAXY,EAWG,KAXH,EAWU,QAXV,EAWoB,IAXpB,EAW0B,MAX1B,EAWkC,QAXlC,EAW4C,OAX5C,EAWqD,SAXrD,EAWgE,UAXhE,EAYZ,WAZY,EAYC,YAZD,EAYe,QAZf,EAYyB,QAZzB,EAYmC,WAZnC,EAYgD,mBAZhD,EAYqE,UAZrE,EAaZ,UAbY,EAaA,wBAbA,EAa0B,cAb1B,EAa0C,QAb1C,EAaoD,SAbpD,EAa+D,QAb/D,EAcZ,cAdY,EAcI,MAdJ,EAcY,WAdZ,EAcyB,QAdzB,EAcmC,kBAdnC,EAcuD,gBAdvD,EAcyE,OAdzE,EAeZ,MAfY,EAeJ,WAfI,EAeS,UAfT,EAeqB,WAfrB,EAekC,UAflC,EAe8C,MAf9C,EAesD,SAftD,EAeiE,MAfjE,EAeyE,QAfzE,EAgBZ,OAhBY,EAgBH,UAhBG,EAgBS,MAhBT,EAgBiB,QAhBjB,EAgB2B,OAhB3B,EAgBoC,QAhBpC,EAgB8C,MAhB9C,EAgBsD,MAhBtD,EAgB8D,WAhB9D,EAgB2E,OAhB3E,EAiBZ,IAjBY,EAiBN,WAjBM,EAiBO,OAjBP,EAiBgB,KAjBhB,EAiBuB,UAjBvB,EAiBmC,MAjBnC,EAiB2C,YAjB3C,EAiByD,OAjBzD,EAiBkE,WAjBlE,EAkBZ,QAlBY,EAkBF,UAlBE,EAkBU,WAlBV,EAkBuB,OAlBvB,EAkBgC,UAlBhC,EAkB4C,OAlB5C,EAkBqD,UAlBrD,EAkBiE,SAlBjE,EAmBZ,QAnBY,EAmBF,MAnBE,EAmBM,OAnBN,EAmBe,WAnBf,EAmB4B,QAnB5B,EAmBsC,MAnBtC,EAmB8C,SAnB9C,EAmByD,MAnBzD,EAmBiE,OAnBjE,EAmB0E,QAnB1E,CAAZ;;AAoBA,WAAI,IAAI3mD,CAAC,GAAC,CAAN,EAAS8gB,CAAC,GAAC6lC,KAAK,CAAC13D,MAArB,EAA6B+Q,CAAC,GAAG8gB,CAAjC,EAAoC9gB,CAAC,EAArC,EAAyC;AAAEqiE,QAAAA,KAAK,CAAC1b,KAAK,CAAC3mD,CAAD,CAAN,CAAL,GAAkBgiE,EAAE,CAACrb,KAAK,CAAC3mD,CAAD,CAAN,CAApB;AAAgC,OAnCpD;AAqCvB;;;AACA,UAAI4d,KAAK,GAAG,CAAC,kBAAD,EAAqB,kBAArB,EAAyC,YAAzC,EAAuD,WAAvD,EACZ,iBADY,EACO,YADP,EACqB,SADrB,EACgC,SADhC,EAC2C,aAD3C,EAC0D,kBAD1D,EAEZ,oBAFY,EAEU,YAFV,EAEwB,WAFxB,EAEqC,aAFrC,EAEoD,aAFpD,EAEmE,WAFnE,EAGZ,UAHY,EAGA,SAHA,EAGW,WAHX,EAGwB,cAHxB,EAGwC,UAHxC,EAGoD,eAHpD,EAGqE,cAHrE,EAIZ,OAJY,EAIH,UAJG,EAIS,WAJT,EAIsB,QAJtB,EAIgC,YAJhC,EAI8C,SAJ9C,EAIyD,SAJzD,EAIoE,aAJpE,EAKZ,SALY,EAKD,SALC,EAKU,WALV,EAKuB,oBALvB,EAK6C,YAL7C,EAK2D,aAL3D,EAMZ,uBANY,EAMa,uBANb,EAMsC,qBANtC,EAM6D,aAN7D,EAOZ,YAPY,EAOE,oBAPF,EAOwB,qBAPxB,EAO+C,UAP/C,EAO2D,UAP3D,EAOuE,WAPvE,EAQZ,SARY,EAQD,UARC,EAQW,iBARX,EAQ8B,gBAR9B,EAQgD,iBARhD,EASZ,kBATY,EASQ,YATR,EASsB,kBATtB,EAS0C,sBAT1C,CAAZ;;AAUA,WAAI,IAAI5d,CAAC,GAAC,CAAN,EAAS8gB,CAAC,GAAClD,KAAK,CAAC3uB,MAArB,EAA6B+Q,CAAC,GAAG8gB,CAAjC,EAAoC9gB,CAAC,EAArC,EAAyC;AAAEqiE,QAAAA,KAAK,CAACzkD,KAAK,CAAC5d,CAAD,CAAN,CAAL,GAAkBkiE,IAAlB;AAAwB,OAhD5C;;;AAkDvB,UAAII,SAAS,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,GAA3C,EAAgD,GAAhD,EAAqD,IAArD,EAA2D,GAA3D,EAAgE,IAAhE,EAAsE,GAAtE,EAA2E,GAA3E,EAAgF,GAAhF,EAAqF,KAArF,EAA4F,IAA5F,EAAkG,KAAlG,EAAyG,MAAzG,EAAiH,KAAjH,EAAwH,GAAxH,EAA6H,GAA7H,EAAkI,GAAlI,EAAuI,GAAvI,CAAhB;;AACA,WAAI,IAAItiE,CAAC,GAAC,CAAN,EAAS8gB,CAAC,GAACwhD,SAAS,CAACrzE,MAAzB,EAAiC+Q,CAAC,GAAG8gB,CAArC,EAAwC9gB,CAAC,EAAzC,EAA6C;AAAEqiE,QAAAA,KAAK,CAACC,SAAS,CAACtiE,CAAD,CAAV,CAAL,GAAsBiiE,QAAtB;AAAgC,OAnDxD;;;AAqDvB,UAAIM,eAAe,GAAG,CAAC,QAAD,EAAW,aAAX,EAA0B,SAA1B,EAAqC,cAArC,EAAqD,sBAArD,EAA6E,UAA7E,EACtB,YADsB,EACR,oBADQ,EACc,aADd,EAC6B,aAD7B,EAC4C,qBAD5C,EACmE,qBADnE,CAAtB;;AAEA,WAAI,IAAIviE,CAAC,GAAC,CAAN,EAAS8gB,CAAC,GAACyhD,eAAe,CAACtzE,MAA/B,EAAuC+Q,CAAC,GAAG8gB,CAA3C,EAA8C9gB,CAAC,EAA/C,EAAmD;AAAEqiE,QAAAA,KAAK,CAACE,eAAe,CAACviE,CAAD,CAAhB,CAAL,GAA4BoiE,SAA5B;AAAwC;;AAC7F,aAAOC,KAAP;AACD,KAzDc,EAAf;;AA2DA,aAASG,KAAT,CAAe/4C,MAAf,EAAuB1G,KAAvB,EAA8BxK,CAA9B,EAAiC;AAC/BwK,MAAAA,KAAK,CAAC0/C,QAAN,GAAiBlqD,CAAjB;AACA,aAAOA,CAAC,CAACkR,MAAD,EAAS1G,KAAT,CAAR;AACD,KAnEwC;;;AAsEzC,aAAS2/C,SAAT,CAAmBj5C,MAAnB,EAA2B1G,KAA3B,EAAkC;AAChC,UAAIvH,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAT;AAAA,UACI++C,eAAe,GAAG,KADtB;AAAA,UAEIC,QAAQ,GAAGC,aAAa,CAACp5C,MAAD,CAF5B,CADgC;;AAMhC,UAAIjO,EAAE,IAAI,GAAV,EAAe;AACb,YAAGiO,MAAM,CAACvW,KAAP,CAAa,KAAb,EAAoB,IAApB,CAAH,EACE,OAAOsvD,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgB+/C,eAAhB,CAAZ;;AAEF,YAAGr5C,MAAM,CAACvW,KAAP,CAAa,SAAb,EAAwB,KAAxB,CAAH,EAAmC;AACjC6P,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBM,UAAjB;AACA,iBAAO,KAAP;AACD;;AAED,YAAGt5C,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,KAAlB,CAAH,EAA6B;AAC3B,iBAAOsvD,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgBigD,kBAAhB,CAAZ;AACD;;AAED,YAAIC,OAAO,GAAGx5C,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAd;AACA4F,QAAAA,MAAM,CAACzF,QAAP;AACA,YAAIpf,OAAO,GAAG,EAAd;AAAA,YAAkBs+D,CAAlB;;AACA,eAAQA,CAAC,GAAGz5C,MAAM,CAAC5F,GAAP,CAAW,uBAAX,CAAZ,EAAkDjf,OAAO,IAAIs+D,CAAX;;AAElD,eAAOV,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgBogD,QAAQ,CAACv+D,OAAD,EAAUq+D,OAAV,CAAxB,CAAZ;AACD,OAnBD;AAAA,WAqBK,IAAGznD,EAAE,IAAI,GAAT,EAAc;AACjB4nD,QAAAA,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,UAAAA,IAAI,EAAE;AAAR,SAAR,CAAd;AACA,eAAO,IAAP;AACD,OAHI;AAAA,WAKA,IAAGuwB,EAAE,IAAI,GAAT,EAAc;AACjB6nD,QAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,eAAO,IAAP;AACD,OAHI;AAAA,WAKA,IAAGugD,YAAY,CAACvgD,KAAD,CAAf,EAAwB;AAC3B,YAAGvH,EAAE,IAAI,GAAT,EACE,OAAO,KAAP,CADF,KAEK,IAAGA,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAhB,EAAiC;AACpCw/C,UAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,iBAAO,KAAP;AACD,SAHI,MAKH,OAAO,UAAP;AACH,OATI;AAAA,WAWA,IAAI,KAAKpT,IAAL,CAAU6L,EAAV,CAAJ,EAAmB;AACtBiO,QAAAA,MAAM,CAACvW,KAAP,CAAa,+BAAb;AACA,eAAO,MAAP;AACD,OAHI;AAAA,WAKA,IAAIsI,EAAE,KAAK,GAAP,IAAciO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAlB,EAAmC;AACtCu/C,QAAAA,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,UAAAA,IAAI,EAAE;AAAR,SAAR,CAAd;AACA,eAAOu3E,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgBwgD,YAAhB,CAAZ;AACD,OAHI;AAAA,WAKA,IAAI,CAACX,QAAD,KAAcpnD,EAAE,KAAK,GAAP,IAAcA,EAAE,KAAK,GAAnC,CAAJ,EACH,OAAOgnD,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgBygD,WAAW,CAAChoD,EAAD,CAA3B,CAAZ,CADG;AAAA,WAGA,IAAGA,EAAE,KAAK,GAAV,EAAe;AAClB,eAAOgnD,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgB0gD,aAAhB,CAAZ;AACD,OAFI;AAAA,WAIA,IAAGjoD,EAAE,KAAI,GAAN,IAAaiO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAhB,EAAiC;AACpC,eAAO,SAAP;AACD,OAFI;AAAA,WAIA,IAAGrI,EAAE,KAAK,GAAV,EAAe;AAClB4nD,QAAAA,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,UAAAA,IAAI,EAAE;AAAR,SAAR,CAAd;AACA,eAAO,IAAP;AACD,OAHI;AAAA,WAKA,IAAGuwB,EAAE,KAAK,GAAV,EAAe;AAClB6nD,QAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,eAAO,IAAP;AACD,OAHI;AAAA,WAKA,IAAGvH,EAAE,KAAK,GAAV,EAAe;AAClB4nD,QAAAA,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,UAAAA,IAAI,EAAE;AAAR,SAAR,CAAd;AACA,eAAO,IAAP;AACD,OAHI;AAAA,WAKA,IAAGuwB,EAAE,KAAK,GAAV,EAAe;AAClB6nD,QAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,eAAO,IAAP;AACD,OAHI,MAIA;AACH,YAAI2gD,KAAK,GAAG3B,QAAQ,CAAC4B,oBAAT,CAA8BnoD,EAA9B,KAAqCumD,QAAQ,CAACvmD,EAAD,CAAzD,CADG;;AAIH,YAAGonD,QAAQ,IAAIpnD,EAAE,KAAK,IAAtB,EAA4B,OAAMiO,MAAM,CAAC7F,IAAP,OAAkB,GAAxB,EAA4B;AACxD,YAAGg/C,QAAQ,IAAIpnD,EAAE,KAAK,IAAtB,EAA4B,OAAMiO,MAAM,CAAC7F,IAAP,OAAkB,IAAxB,EAA6B,EALtD;;AAQH,YAAG,CAAC8/C,KAAJ,EAAWj6C,MAAM,CAAC1F,QAAP,CAAgB,UAAhB,EARR;;AAWH,YAAI6/C,UAAU,GAAGn6C,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAjB,CAXG;AAcH;;AACA,YAAG,CAAC4F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAD,IAAoB+/C,UAAvB,EAAmC;AACjCn6C,UAAAA,MAAM,CAAC1F,QAAP,CAAgB,UAAhB;AACD,SAjBE;;;AAmBH,YAAG0F,MAAM,CAACvW,KAAP,CAAa,WAAb,EAA0B,KAA1B,CAAH,EAAqC;AACnCyvD,UAAAA,eAAe,GAAG,IAAlB;AACD,SArBE;;;AAuBH,YAAI9O,IAAI,GAAGpqC,MAAM,CAAC1T,OAAP,EAAX;AACA2tD,QAAAA,KAAK,GAAG3B,QAAQ,CAAC4B,oBAAT,CAA8B9P,IAA9B,KAAuCkO,QAAQ,CAAClO,IAAD,CAAvD,CAxBG;AA2BH;;AACA,YAAG8O,eAAe,IAAI,CAACe,KAAvB,EAA8BA,KAAK,GAAG;AAACz4E,UAAAA,IAAI,EAAE,eAAP;AAAwBmC,UAAAA,KAAK,EAAE;AAA/B,SAAR,CA5B3B;;AA+BH,YAAGy2E,kBAAkB,CAAC9gD,KAAD,CAArB,EAA8B;AAC5BsgD,UAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,iBAAO,UAAP;AACD,SAlCE;AAoCH;;;AACA,YAAG8wC,IAAI,IAAI,SAAR,IAAqBA,IAAI,IAAI,WAA7B,IAA4C6P,KAAK,CAACz4E,IAAN,IAAc,gBAA7D,EAA+Em4E,cAAc,CAACrgD,KAAD,EAAQ;AAAC93B,UAAAA,IAAI,EAAE;AAAP,SAAR,CAAd,CArC5E;;AAwCH,eAAOy4E,KAAK,GAAGA,KAAK,CAACt2E,KAAT,GAAiB,UAA7B;AACD;AACF,KAxMwC;;;AA2MzC,aAASm2E,YAAT,CAAsB95C,MAAtB,EAA8B1G,KAA9B,EAAqC;AACnC,UAAI+gD,QAAQ,GAAG,KAAf;AAAA,UAAsBC,WAAW,GAAG,KAApC;AAAA,UAA2CC,WAAW,GAAG,CAAzD;AAAA,UAA4DxoD,EAA5D;;AACA,aAAOA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAZ,EAA2B;AACzB,YAAIpI,EAAE,IAAI,GAAN,IAAasoD,QAAjB,EAA2B;AACzB,cAAGE,WAAW,GAAG,CAAjB,EACEA,WAAW,GADb,KAEK;AACHX,YAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA;AACD;AACF,SAPD,MAQK,IAAGvH,EAAE,IAAI,GAAN,IAAauoD,WAAhB,EAA6B;AAChCC,UAAAA,WAAW;AACZ;;AACDF,QAAAA,QAAQ,GAAItoD,EAAE,IAAI,GAAlB;AACAuoD,QAAAA,WAAW,GAAIvoD,EAAE,IAAI,GAArB;AACD;;AAED,aAAO,SAAP;AACD,KA9NwC;AAiOzC;;;AACA,aAASgoD,WAAT,CAAqBS,KAArB,EAA4B1rD,CAA5B,EAA+B;AAC7B,aAAO,UAASkR,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,YAAIvH,EAAJ;;AAEA,YAAG0oD,UAAU,CAACnhD,KAAD,CAAV,IAAqB0G,MAAM,CAAC1T,OAAP,MAAoBkuD,KAA5C,EAAmD;AACjDZ,UAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,cAAGxK,CAAH,EAAMwK,KAAK,CAAC0/C,QAAN,GAAiBlqD,CAAjB;AACN,iBAAO,QAAP;AACD;;AAED6qD,QAAAA,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,UAAAA,IAAI,EAAE,QAAR;AAAkBge,UAAAA,IAAI,EAAEg7D,KAAxB;AAA+BxB,UAAAA,QAAQ,EAAEe,WAAW,CAACS,KAAD,EAAQ1rD,CAAR;AAApD,SAAR,CAAd,CAT6B;;AAY7B,YAAGkR,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,KAAlB,KAA4BixD,qBAAqB,CAACphD,KAAD,CAApD,EAA6D;AAC3DA,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,iBAAO,QAAP;AACD;;AAGD,eAAOlnD,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAZ,EAA2B;AACzB,cAAIpI,EAAE,IAAKyoD,KAAX,EAAkB;AAChBZ,YAAAA,aAAa,CAACtgD,KAAD,CAAb;AACA,gBAAGxK,CAAH,EAAMwK,KAAK,CAAC0/C,QAAN,GAAiBlqD,CAAjB;AACN;AACD,WAJD,MAKK;AACH;AACA,gBAAGkR,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,KAAlB,KAA4BixD,qBAAqB,CAACphD,KAAD,CAApD,EAA6D;AAC3DA,cAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,qBAAO,QAAP;AACD;AAEF;AACF;;AAED,eAAO,QAAP;AACD,OAnCD;AAoCD,KAvQwC;;;AA0QzC,aAASe,aAAT,CAAuBh6C,MAAvB,EAA+B1G,KAA/B,EAAsC;AACpC,UAAIqhD,cAAc,GAAG,UAArB,CADoC;;AAIpC,UAAG36C,MAAM,CAAC5F,GAAP,CAAW,IAAX,CAAH,EAAqB;AACnB,eAAM4F,MAAM,CAAC7F,IAAP,OAAkB,IAAxB,EAA6B;;AAAQ6F,QAAAA,MAAM,CAAC5F,GAAP,CAAW,GAAX;AACtC,OAFD,MAEO;AACL4F,QAAAA,MAAM,CAAC1F,QAAP,CAAgBqgD,cAAhB;AACA,YAAG,CAAC36C,MAAM,CAACvW,KAAP,CAAa,IAAb,EAAmB,KAAnB,CAAJ,EAA+BuW,MAAM,CAAC5F,GAAP,CAAW,GAAX;AAChC;;AACD4F,MAAAA,MAAM,CAAC1F,QAAP,CAAgBqgD,cAAhB;AACArhD,MAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,aAAO,UAAP;AACD,KAvRwC;;;AA0RzC,aAASS,QAAT,CAAkBl6D,IAAlB,EAAwBg6D,OAAxB,EAAiC;AAC/B,aAAO,UAASx5C,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B0G,QAAAA,MAAM,CAACzF,QAAP;;AACA,YAAGi/C,OAAO,IAAIx5C,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAd,EAA+B;AAC7Bw/C,UAAAA,aAAa,CAACtgD,KAAD,CAAb;AACAA,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,iBAAO,KAAP;AACD,SAN4B;;;AAQ7B,YAAG,CAACj5C,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EACEu/C,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,UAAAA,IAAI,EAAE,KAAR;AAAege,UAAAA,IAAI,EAAEA,IAArB;AAA2Bw5D,UAAAA,QAAQ,EAAEC;AAArC,SAAR,CAAd;;AACF,YAAG,CAACj5C,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnBd,UAAAA,KAAK,CAAC0/C,QAAN,GAAiB4B,cAAjB;AACA,iBAAO,KAAP;AACD,SAHD,MAIK;AACHthD,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACD;;AACD,eAAO,KAAP;AACD,OAlBD;AAmBD,KA9SwC;;;AAiTzC,aAAS2B,cAAT,CAAwB56C,MAAxB,EAAgC1G,KAAhC,EAAuC;AACrC,UAAIvH,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAT;;AAEA,UAAGpI,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAhB,EAAiC;AAC/B,YAAGsgD,qBAAqB,CAACphD,KAAD,CAAxB,EAAiCsgD,aAAa,CAACtgD,KAAD,CAAb;AACjC,YAAGugD,YAAY,CAACvgD,KAAD,CAAf,EAAwBsgD,aAAa,CAACtgD,KAAD,CAAb;AACxB,eAAO,KAAP;AACD;;AACD,UAAGvH,EAAE,IAAI,GAAT,EAAc;AACZ,YAAG2oD,qBAAqB,CAACphD,KAAD,CAAxB,EAAiCsgD,aAAa,CAACtgD,KAAD,CAAb;AACjC,eAAO,KAAP;AACD;;AACD,UAAGvH,EAAE,IAAI,GAAT,EACE,OAAO,IAAP,CAbmC;;AAerC,UAAIA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAvB,EACE,OAAOgnD,KAAK,CAAC/4C,MAAD,EAAS1G,KAAT,EAAgBygD,WAAW,CAAChoD,EAAD,EAAK6oD,cAAL,CAA3B,CAAZ;AAEF,UAAG,CAACF,qBAAqB,CAACphD,KAAD,CAAzB,EACEqgD,cAAc,CAACrgD,KAAD,EAAQ;AAAE93B,QAAAA,IAAI,EAAE,WAAR;AAAqBw3E,QAAAA,QAAQ,EAAE4B;AAA/B,OAAR,CAAd;AAEF56C,MAAAA,MAAM,CAAC5F,GAAP,CAAW,YAAX;AACA4F,MAAAA,MAAM,CAAC1F,QAAP,CAAgB,iBAAhB;AACA0F,MAAAA,MAAM,CAACzF,QAAP,GAvBqC;;AA0BrC,UAAGyF,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,KAAlB,KAA4BuW,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,KAAlB,CAA/B,EAAyD;AACvDmwD,QAAAA,aAAa,CAACtgD,KAAD,CAAb;AACAA,QAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACD;;AAED,aAAO,WAAP;AACD,KAjVwC;;;AAoVzC,aAASI,eAAT,CAAyBr5C,MAAzB,EAAiC1G,KAAjC,EAAwC;AACtC,UAAIvH,EAAJ;;AACA,aAAOA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAZ,EAA2B;AACzB,YAAIpI,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAACvW,KAAP,CAAa,IAAb,EAAmB,IAAnB,CAAjB,EAA2C;AACzC6P,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,iBAAO,SAAP;AACD;AACF;AACF,KA5VwC;;;AAgWzC,aAASK,UAAT,CAAoBt5C,MAApB,EAA4B1G,KAA5B,EAAmC;AACjC,UAAIvH,EAAJ;;AACA,aAAOA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAZ,EAA2B;AACzB,YAAIpI,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,IAAlB,CAAjB,EAA0C;AACxC6P,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,iBAAO,SAAP;AACD;AACF;AACF,KAxWwC;;;AA2WzC,aAASM,kBAAT,CAA4Bv5C,MAA5B,EAAoC1G,KAApC,EAA2C;AACzC,UAAIvH,EAAJ;;AACA,aAAOA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAZ,EAA2B;AACzB,YAAIpI,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAACvW,KAAP,CAAa,GAAb,EAAkB,IAAlB,CAAjB,EAA0C;AACxC6P,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBC,SAAjB;AACA,iBAAO,cAAP;AACD;AACF;AACF,KAnXwC;;;AAuXzC,aAASY,YAAT,CAAsBvgD,KAAtB,EAA6B;AAAE,aAAOuhD,IAAI,CAACvhD,KAAD,EAAQ,KAAR,CAAX;AAA4B;;AAC3D,aAASohD,qBAAT,CAA+BphD,KAA/B,EAAsC;AAAE,aAAOuhD,IAAI,CAACvhD,KAAD,EAAQ,WAAR,CAAX;AAAkC;;AAC1E,aAAS8gD,kBAAT,CAA4B9gD,KAA5B,EAAmC;AAAE,aAAOuhD,IAAI,CAACvhD,KAAD,EAAQ,gBAAR,CAAX;AAAuC;;AAC5E,aAASmhD,UAAT,CAAoBnhD,KAApB,EAA2B;AAAE,aAAOuhD,IAAI,CAACvhD,KAAD,EAAQ,QAAR,CAAX;AAA+B;;AAE5D,aAAS8/C,aAAT,CAAuBp5C,MAAvB,EAA+B;AAC7B;AACA,UAAGA,MAAM,CAAC1T,OAAP,OAAqB,GAAxB,EACE,OAAO0T,MAAM,CAACvW,KAAP,CAAa,aAAb,EAA4B,KAA5B,CAAP,CADF,KAEK,IAAGuW,MAAM,CAAC1T,OAAP,OAAqB,IAAxB,EACH,OAAO0T,MAAM,CAACvW,KAAP,CAAa,aAAb,EAA4B,KAA5B,CAAP,CADG,KAGH,OAAO,KAAP;AACH;;AAED,aAASoxD,IAAT,CAAcvhD,KAAd,EAAqB93B,IAArB,EAA2B;AACzB,aAAQ83B,KAAK,CAACwhD,KAAN,CAAYt1E,MAAZ,IAAsB8zB,KAAK,CAACwhD,KAAN,CAAYxhD,KAAK,CAACwhD,KAAN,CAAYt1E,MAAZ,GAAqB,CAAjC,EAAoChE,IAApC,IAA4CA,IAA1E;AACD;;AAED,aAASm4E,cAAT,CAAwBrgD,KAAxB,EAA+ByhD,QAA/B,EAAyC;AACvCzhD,MAAAA,KAAK,CAACwhD,KAAN,CAAYplE,IAAZ,CAAiBqlE,QAAjB;AACD;;AAED,aAASnB,aAAT,CAAuBtgD,KAAvB,EAA8B;AAC5BA,MAAAA,KAAK,CAACwhD,KAAN,CAAYx2E,GAAZ;AACA,UAAI02E,iBAAiB,GAAG1hD,KAAK,CAACwhD,KAAN,CAAYt1E,MAAZ,IAAsB8zB,KAAK,CAACwhD,KAAN,CAAYxhD,KAAK,CAACwhD,KAAN,CAAYt1E,MAAZ,GAAmB,CAA/B,EAAkCwzE,QAAhF;AACA1/C,MAAAA,KAAK,CAAC0/C,QAAN,GAAiBgC,iBAAiB,IAAI/B,SAAtC;AACD,KAlZwC;;;AAqZzC,WAAO;AACLv/C,MAAAA,UAAU,EAAE,YAAW;AACrB,eAAO;AACLs/C,UAAAA,QAAQ,EAAEC,SADL;AAELgC,UAAAA,EAAE,EAAE,EAFC;AAGLH,UAAAA,KAAK,EAAE;AAHF,SAAP;AAKD,OAPI;AASL16C,MAAAA,KAAK,EAAE,UAASJ,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,YAAI0G,MAAM,CAACzF,QAAP,EAAJ,EAAuB,OAAO,IAAP;AACvB,YAAI52B,KAAK,GAAG21B,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAZ;AACA,eAAO31B,KAAP;AACD,OAbI;AAeLu3E,MAAAA,iBAAiB,EAAE,IAfd;AAgBLC,MAAAA,eAAe,EAAE;AAhBZ,KAAP;AAoBD,GAzaD;AA2aAjhB,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,oBAAtB,EAA4C,QAA5C;AAEC;;AC/aD,SAASntB,GAAT,CAAa4uD,UAAb,EAAyB;AAEzBA,EAAAA,UAAU,CAAC5hC,UAAX,CAAsB,KAAtB,EAA6B,UAAS8iD,MAAT,EAAiBC,YAAjB,EAA+B;AAC1D,QAAIC,MAAM,GAAGD,YAAY,CAACC,MAA1B;AACA,QAAI,CAACD,YAAY,CAACE,gBAAlB,EAAoCF,YAAY,GAAGnhB,UAAU,CAACthC,WAAX,CAAuB,UAAvB,CAAf;AAEpC,QAAI0yC,UAAU,GAAG8P,MAAM,CAAC9P,UAAxB;AAAA,QACIkQ,UAAU,GAAGH,YAAY,CAACG,UAD9B;AAAA,QAEIC,aAAa,GAAGJ,YAAY,CAACI,aAAb,IAA8B,EAFlD;AAAA,QAGIC,UAAU,GAAGL,YAAY,CAACK,UAAb,IAA2B,EAH5C;AAAA,QAIIC,aAAa,GAAGN,YAAY,CAACM,aAAb,IAA8B,EAJlD;AAAA,QAKIC,kBAAkB,GAAGP,YAAY,CAACO,kBAAb,IAAmC,EAL5D;AAAA,QAMIL,gBAAgB,GAAGF,YAAY,CAACE,gBAAb,IAAiC,EANxD;AAAA,QAOIM,2BAA2B,GAAGR,YAAY,CAACQ,2BAAb,IAA4C,EAP9E;AAAA,QAQIC,cAAc,GAAGT,YAAY,CAACS,cAAb,IAA+B,EARpD;AAAA,QASIC,kBAAkB,GAAGV,YAAY,CAACU,kBAAb,IAAmC,EAT5D;AAAA,QAUIC,aAAa,GAAGX,YAAY,CAACW,aAAb,IAA8B,EAVlD;AAAA,QAWIC,aAAa,GAAGZ,YAAY,CAACY,aAAb,IAA8B,EAXlD;AAAA,QAYIC,WAAW,GAAGb,YAAY,CAACa,WAZ/B;AAAA,QAaIC,WAAW,GAAGd,YAAY,CAACc,WAb/B;AAAA,QAcIC,mBAAmB,GAAGf,YAAY,CAACe,mBAAb,KAAqC,IAd/D;AAAA,QAeIC,oCAAoC,GAAGjB,MAAM,CAACiB,oCAAP,KAAgD,KAf3F;AAiBA,QAAI76E,IAAJ,EAAUg0B,QAAV;;AACA,aAAS8mD,GAAT,CAAa34E,KAAb,EAAoB44E,EAApB,EAAwB;AAAE/6E,MAAAA,IAAI,GAAG+6E,EAAP;AAAW,aAAO54E,KAAP;AAAe,KAtBM;;;AA0B1D,aAASs1E,SAAT,CAAmBj5C,MAAnB,EAA2B1G,KAA3B,EAAkC;AAChC,UAAIvH,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAT;;AACA,UAAIqhD,UAAU,CAACzpD,EAAD,CAAd,EAAoB;AAClB,YAAItgB,MAAM,GAAG+pE,UAAU,CAACzpD,EAAD,CAAV,CAAeiO,MAAf,EAAuB1G,KAAvB,CAAb;AACA,YAAI7nB,MAAM,KAAK,KAAf,EAAsB,OAAOA,MAAP;AACvB;;AACD,UAAIsgB,EAAE,IAAI,GAAV,EAAe;AACbiO,QAAAA,MAAM,CAAC1F,QAAP,CAAgB,UAAhB;AACA,eAAOgiD,GAAG,CAAC,KAAD,EAAQt8C,MAAM,CAAC1T,OAAP,EAAR,CAAV;AACD,OAHD,MAGO,IAAIyF,EAAE,IAAI,GAAN,IAAa,CAACA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAApB,KAA4BiO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAA7C,EAA8D;AACnE,eAAOkiD,GAAG,CAAC,IAAD,EAAO,SAAP,CAAV;AACD,OAFM,MAEA,IAAIvqD,EAAE,IAAI,IAAN,IAAcA,EAAE,IAAI,GAAxB,EAA6B;AAClCuH,QAAAA,KAAK,CAAC0/C,QAAN,GAAiBe,WAAW,CAAChoD,EAAD,CAA5B;AACA,eAAOuH,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAP;AACD,OAHM,MAGA,IAAIvH,EAAE,IAAI,GAAV,EAAe;AACpBiO,QAAAA,MAAM,CAAC1F,QAAP,CAAgB,UAAhB;AACA,eAAOgiD,GAAG,CAAC,MAAD,EAAS,MAAT,CAAV;AACD,OAHM,MAGA,IAAIvqD,EAAE,IAAI,GAAV,EAAe;AACpBiO,QAAAA,MAAM,CAACvW,KAAP,CAAa,SAAb;AACA,eAAO6yD,GAAG,CAAC,SAAD,EAAY,WAAZ,CAAV;AACD,OAHM,MAGA,IAAI,KAAKp2D,IAAL,CAAU6L,EAAV,KAAiBA,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAAC5F,GAAP,CAAW,IAAX,CAAlC,EAAoD;AACzD4F,QAAAA,MAAM,CAAC1F,QAAP,CAAgB,QAAhB;AACA,eAAOgiD,GAAG,CAAC,QAAD,EAAW,MAAX,CAAV;AACD,OAHM,MAGA,IAAIvqD,EAAE,KAAK,GAAX,EAAgB;AACrB,YAAI,QAAQ7L,IAAR,CAAa8Z,MAAM,CAAC9F,IAAP,EAAb,CAAJ,EAAiC;AAC/B8F,UAAAA,MAAM,CAAC1F,QAAP,CAAgB,QAAhB;AACA,iBAAOgiD,GAAG,CAAC,QAAD,EAAW,MAAX,CAAV;AACD,SAHD,MAGO,IAAIt8C,MAAM,CAACvW,KAAP,CAAa,aAAb,CAAJ,EAAiC;AACtCuW,UAAAA,MAAM,CAAC1F,QAAP,CAAgB,UAAhB;AACA,cAAI0F,MAAM,CAACvW,KAAP,CAAa,OAAb,EAAsB,KAAtB,CAAJ,EACE,OAAO6yD,GAAG,CAAC,YAAD,EAAe,qBAAf,CAAV;AACF,iBAAOA,GAAG,CAAC,YAAD,EAAe,UAAf,CAAV;AACD,SALM,MAKA,IAAIt8C,MAAM,CAACvW,KAAP,CAAa,OAAb,CAAJ,EAA2B;AAChC,iBAAO6yD,GAAG,CAAC,MAAD,EAAS,MAAT,CAAV;AACD;AACF,OAZM,MAYA,IAAI,WAAWp2D,IAAX,CAAgB6L,EAAhB,CAAJ,EAAyB;AAC9B,eAAOuqD,GAAG,CAAC,IAAD,EAAO,WAAP,CAAV;AACD,OAFM,MAEA,IAAIvqD,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAACvW,KAAP,CAAa,uBAAb,CAAjB,EAAwD;AAC7D,eAAO6yD,GAAG,CAAC,WAAD,EAAc,WAAd,CAAV;AACD,OAFM,MAEA,IAAI,iBAAiBp2D,IAAjB,CAAsB6L,EAAtB,CAAJ,EAA+B;AACpC,eAAOuqD,GAAG,CAAC,IAAD,EAAOvqD,EAAP,CAAV;AACD,OAFM,MAEA,IAAIiO,MAAM,CAACvW,KAAP,CAAa,gBAAb,CAAJ,EAAoC;AACzC,YAAI,mCAAmCvD,IAAnC,CAAwC8Z,MAAM,CAAC1T,OAAP,EAAxC,CAAJ,EAA+D;AAC7DgN,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBwD,kBAAjB;AACD;;AACD,eAAOF,GAAG,CAAC,iBAAD,EAAoB,UAApB,CAAV;AACD,OALM,MAKA,IAAI,WAAWp2D,IAAX,CAAgB6L,EAAhB,CAAJ,EAAyB;AAC9BiO,QAAAA,MAAM,CAAC1F,QAAP,CAAgB,UAAhB;AACA,eAAOgiD,GAAG,CAAC,UAAD,EAAa,MAAb,CAAV;AACD,OAHM,MAGA;AACL,eAAOA,GAAG,CAAC,IAAD,EAAO,IAAP,CAAV;AACD;AACF;;AAED,aAASvC,WAAT,CAAqBS,KAArB,EAA4B;AAC1B,aAAO,UAASx6C,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,YAAImjD,OAAO,GAAG,KAAd;AAAA,YAAqB1qD,EAArB;;AACA,eAAO,CAACA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAN,KAAwB,IAA/B,EAAqC;AACnC,cAAIpI,EAAE,IAAIyoD,KAAN,IAAe,CAACiC,OAApB,EAA6B;AAC3B,gBAAIjC,KAAK,IAAI,GAAb,EAAkBx6C,MAAM,CAACtF,MAAP,CAAc,CAAd;AAClB;AACD;;AACD+hD,UAAAA,OAAO,GAAG,CAACA,OAAD,IAAY1qD,EAAE,IAAI,IAA5B;AACD;;AACD,YAAIA,EAAE,IAAIyoD,KAAN,IAAe,CAACiC,OAAD,IAAYjC,KAAK,IAAI,GAAxC,EAA6ClhD,KAAK,CAAC0/C,QAAN,GAAiB,IAAjB;AAC7C,eAAOsD,GAAG,CAAC,QAAD,EAAW,QAAX,CAAV;AACD,OAXD;AAYD;;AAED,aAASE,kBAAT,CAA4Bx8C,MAA5B,EAAoC1G,KAApC,EAA2C;AACzC0G,MAAAA,MAAM,CAAC7F,IAAP,GADyC;;AAEzC,UAAI,CAAC6F,MAAM,CAACvW,KAAP,CAAa,aAAb,EAA4B,KAA5B,CAAL,EACE6P,KAAK,CAAC0/C,QAAN,GAAiBe,WAAW,CAAC,GAAD,CAA5B,CADF,KAGEzgD,KAAK,CAAC0/C,QAAN,GAAiB,IAAjB;AACF,aAAOsD,GAAG,CAAC,IAAD,EAAO,GAAP,CAAV;AACD,KAtGyD;;;AA0G1D,aAAS7+C,OAAT,CAAiBj8B,IAAjB,EAAuB2pE,MAAvB,EAA+B/2C,IAA/B,EAAqC;AACnC,WAAK5yB,IAAL,GAAYA,IAAZ;AACA,WAAK2pE,MAAL,GAAcA,MAAd;AACA,WAAK/2C,IAAL,GAAYA,IAAZ;AACD;;AAED,aAASsoD,WAAT,CAAqBpjD,KAArB,EAA4B0G,MAA5B,EAAoCx+B,IAApC,EAA0C2pE,MAA1C,EAAkD;AAChD7xC,MAAAA,KAAK,CAAC6E,OAAN,GAAgB,IAAIV,OAAJ,CAAYj8B,IAAZ,EAAkBw+B,MAAM,CAACpF,WAAP,MAAwBuwC,MAAM,KAAK,KAAX,GAAmB,CAAnB,GAAuBG,UAA/C,CAAlB,EAA8EhyC,KAAK,CAAC6E,OAApF,CAAhB;AACA,aAAO38B,IAAP;AACD;;AAED,aAASm7E,UAAT,CAAoBrjD,KAApB,EAA2B;AACzB,UAAIA,KAAK,CAAC6E,OAAN,CAAc/J,IAAlB,EACEkF,KAAK,CAAC6E,OAAN,GAAgB7E,KAAK,CAAC6E,OAAN,CAAc/J,IAA9B;AACF,aAAOkF,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD;;AAED,aAASo7E,IAAT,CAAcp7E,IAAd,EAAoBw+B,MAApB,EAA4B1G,KAA5B,EAAmC;AACjC,aAAOujD,MAAM,CAACvjD,KAAK,CAAC6E,OAAN,CAAc38B,IAAf,CAAN,CAA2BA,IAA3B,EAAiCw+B,MAAjC,EAAyC1G,KAAzC,CAAP;AACD;;AACD,aAASwjD,UAAT,CAAoBt7E,IAApB,EAA0Bw+B,MAA1B,EAAkC1G,KAAlC,EAAyC5J,CAAzC,EAA4C;AAC1C,WAAK,IAAInZ,CAAC,GAAGmZ,CAAC,IAAI,CAAlB,EAAqBnZ,CAAC,GAAG,CAAzB,EAA4BA,CAAC,EAA7B,EACE+iB,KAAK,CAAC6E,OAAN,GAAgB7E,KAAK,CAAC6E,OAAN,CAAc/J,IAA9B;;AACF,aAAOwoD,IAAI,CAACp7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAX;AACD,KAlIyD;;;AAsI1D,aAASyjD,WAAT,CAAqB/8C,MAArB,EAA6B;AAC3B,UAAIoqC,IAAI,GAAGpqC,MAAM,CAAC1T,OAAP,GAAiBvb,WAAjB,EAAX;AACA,UAAIkrE,aAAa,CAACtgE,cAAd,CAA6ByuD,IAA7B,CAAJ,EACE50C,QAAQ,GAAG,MAAX,CADF,KAEK,IAAIwmD,aAAa,CAACrgE,cAAd,CAA6ByuD,IAA7B,CAAJ,EACH50C,QAAQ,GAAG,SAAX,CADG,KAGHA,QAAQ,GAAG,UAAX;AACH;;AAED,QAAIqnD,MAAM,GAAG,EAAb;;AAEAA,IAAAA,MAAM,CAACn2D,GAAP,GAAa,UAASllB,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACzC,UAAI93B,IAAI,IAAI,GAAZ,EAAiB;AACf,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,OAAhB,CAAlB;AACD,OAFD,MAEO,IAAIx+B,IAAI,IAAI,GAAR,IAAe83B,KAAK,CAAC6E,OAAN,CAAc/J,IAAjC,EAAuC;AAC5C,eAAOuoD,UAAU,CAACrjD,KAAD,CAAjB;AACD,OAFM,MAEA,IAAI8iD,mBAAmB,IAAI,cAAcl2D,IAAd,CAAmB1kB,IAAnB,CAA3B,EAAqD;AAC1D,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,kBAAhB,CAAlB;AACD,OAFM,MAEA,IAAI,uBAAuB9Z,IAAvB,CAA4B1kB,IAA5B,CAAJ,EAAuC;AAC5C,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,eAAhB,CAAlB;AACD,OAFM,MAEA,IAAI,+CAA+C9Z,IAA/C,CAAoD1kB,IAApD,CAAJ,EAA+D;AACpE,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,SAAhB,CAAlB;AACD,OAFM,MAEA,IAAI,+BAA+B9Z,IAA/B,CAAoC1kB,IAApC,CAAJ,EAA+C;AACpD83B,QAAAA,KAAK,CAAC0jD,QAAN,GAAiBx7E,IAAjB;AACA,eAAO,2BAAP;AACD,OAHM,MAGA,IAAI,sCAAsC0kB,IAAtC,CAA2C1kB,IAA3C,CAAJ,EAAsD;AAC3D,eAAO,WAAP;AACD,OAFM,MAEA,IAAIA,IAAI,IAAIA,IAAI,CAAC+wB,MAAL,CAAY,CAAZ,KAAkB,GAA9B,EAAmC;AACxC,eAAOmqD,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,IAAhB,CAAlB;AACD,OAFM,MAEA,IAAIx+B,IAAI,IAAI,MAAZ,EAAoB;AACzBg0B,QAAAA,QAAQ,GAAG,SAAX;AACD,OAFM,MAEA,IAAIh0B,IAAI,IAAI,MAAZ,EAAoB;AACzBg0B,QAAAA,QAAQ,GAAG,KAAX;AACD,OAFM,MAEA,IAAIh0B,IAAI,IAAI,qBAAZ,EAAmC;AACxC,eAAO,WAAP;AACD,OAFM,MAEA,IAAIA,IAAI,IAAI,eAAZ,EAA6B;AAClC,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,eAAhB,CAAlB;AACD,OAFM,MAEA,IAAIx+B,IAAI,IAAI,GAAZ,EAAiB;AACtB,eAAO,QAAP;AACD,OAFM,MAEA,IAAI06E,WAAW,IAAI16E,IAAI,IAAI,GAA3B,EAAgC;AACrC,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,QAAhB,CAAlB;AACD;;AACD,aAAO1G,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD,KAhCD;;AAkCAq7E,IAAAA,MAAM,CAACI,KAAP,GAAe,UAASz7E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC3C,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAClB,YAAI4oE,IAAI,GAAGpqC,MAAM,CAAC1T,OAAP,GAAiBvb,WAAjB,EAAX;;AACA,YAAIwqE,gBAAgB,CAAC5/D,cAAjB,CAAgCyuD,IAAhC,CAAJ,EAA2C;AACzC50C,UAAAA,QAAQ,GAAG,UAAX;AACA,iBAAO,WAAP;AACD,SAHD,MAGO,IAAIqmD,2BAA2B,CAAClgE,cAA5B,CAA2CyuD,IAA3C,CAAJ,EAAsD;AAC3D50C,UAAAA,QAAQ,GAAG6mD,oCAAoC,GAAG,UAAH,GAAgB,UAA/D;AACA,iBAAO,WAAP;AACD,SAHM,MAGA,IAAIH,WAAJ,EAAiB;AACtB1mD,UAAAA,QAAQ,GAAGwK,MAAM,CAACvW,KAAP,CAAa,eAAb,EAA8B,KAA9B,IAAuC,UAAvC,GAAoD,KAA/D;AACA,iBAAO,OAAP;AACD,SAHM,MAGA;AACL+L,UAAAA,QAAQ,IAAI,QAAZ;AACA,iBAAO,WAAP;AACD;AACF,OAfD,MAeO,IAAIh0B,IAAI,IAAI,MAAZ,EAAoB;AACzB,eAAO,OAAP;AACD,OAFM,MAEA,IAAI,CAAC06E,WAAD,KAAiB16E,IAAI,IAAI,MAAR,IAAkBA,IAAI,IAAI,WAA3C,CAAJ,EAA6D;AAClEg0B,QAAAA,QAAQ,GAAG,OAAX;AACA,eAAO,OAAP;AACD,OAHM,MAGA;AACL,eAAOqnD,MAAM,CAACn2D,GAAP,CAAWllB,IAAX,EAAiBw+B,MAAjB,EAAyB1G,KAAzB,CAAP;AACD;AACF,KAxBD;;AA0BAujD,IAAAA,MAAM,CAACK,SAAP,GAAmB,UAAS17E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC/C,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,MAAhB,CAAlB;AACjB,aAAO48C,IAAI,CAACp7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAX;AACD,KAHD;;AAKAujD,IAAAA,MAAM,CAAC1tD,IAAP,GAAc,UAAS3tB,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC1C,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAjB;AACjB,UAAI93B,IAAI,IAAI,GAAR,IAAe06E,WAAnB,EAAgC,OAAOQ,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,WAAhB,CAAlB;AAChC,UAAIx+B,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GAA3B,EAAgC,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AAChC,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,QAAhB,CAAlB;;AAEjB,UAAIx+B,IAAI,IAAI,MAAR,IAAkB,CAAC,sDAAsD0kB,IAAtD,CAA2D8Z,MAAM,CAAC1T,OAAP,EAA3D,CAAvB,EAAqG;AACnGkJ,QAAAA,QAAQ,IAAI,QAAZ;AACD,OAFD,MAEO,IAAIh0B,IAAI,IAAI,MAAZ,EAAoB;AACzBu7E,QAAAA,WAAW,CAAC/8C,MAAD,CAAX;AACD,OAFM,MAEA,IAAIx+B,IAAI,IAAI,eAAZ,EAA6B;AAClC,eAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,eAAhB,CAAlB;AACD;;AACD,aAAO,MAAP;AACD,KAdD;;AAgBA68C,IAAAA,MAAM,CAACM,SAAP,GAAmB,UAAS37E,IAAT,EAAe47E,OAAf,EAAwB9jD,KAAxB,EAA+B;AAChD,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAjB;;AACjB,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAAEg0B,QAAAA,QAAQ,GAAG,UAAX;AAAuB,eAAO,WAAP;AAAqB;;AAClE,aAAO8D,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD,KAJD;;AAMAq7E,IAAAA,MAAM,CAACQ,MAAP,GAAgB,UAAS77E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC5C,UAAI93B,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GAA3B,EAAgC,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AAChC,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAjB;AACjB,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,QAAhB,CAAlB;AACjB,UAAIx+B,IAAI,IAAI,eAAZ,EAA6B,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,eAAhB,CAAlB;AAC7B,UAAIx+B,IAAI,IAAI,MAAZ,EAAoBu7E,WAAW,CAAC/8C,MAAD,CAAX;AACpB,aAAO,QAAP;AACD,KAPD;;AASA68C,IAAAA,MAAM,CAACS,MAAP,GAAgB,UAAS97E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC5C,UAAI93B,IAAI,IAAI,MAAZ,EAAoB,OAAO,QAAP;;AAEpB,UAAIA,IAAI,IAAI,MAAZ,EAAoB;AAClBg0B,QAAAA,QAAQ,GAAG,YAAX;AACA,eAAO8D,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD;;AACD,aAAOo7E,IAAI,CAACp7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAX;AACD,KARD;;AAUAujD,IAAAA,MAAM,CAACpB,aAAP,GAAuB,UAASj6E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACnD,UAAI93B,IAAI,IAAI,MAAR,IAAkBi6E,aAAa,CAAC9/D,cAAd,CAA6BqkB,MAAM,CAAC1T,OAAP,EAA7B,CAAtB,EAAsE;AACpEkJ,QAAAA,QAAQ,GAAG,KAAX;AACA,eAAO8D,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD,OAHD,MAGO;AACL,eAAOq7E,MAAM,CAACU,OAAP,CAAe/7E,IAAf,EAAqBw+B,MAArB,EAA6B1G,KAA7B,CAAP;AACD;AACF,KAPD;;AASAujD,IAAAA,MAAM,CAACU,OAAP,GAAiB,UAAS/7E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC7C,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,gBAAhB,CAAlB;AACjB,UAAIx+B,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GAA3B,EAAgC,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AAChC,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAV,IAAqBojD,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgBk8C,WAAW,GAAG,OAAH,GAAa,KAAxC,CAAvC;AAEjB,UAAI16E,IAAI,IAAI,eAAZ,EAA6B,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,eAAhB,CAAlB;;AAE7B,UAAIx+B,IAAI,IAAI,MAAZ,EAAoB;AAClB,YAAI4oE,IAAI,GAAGpqC,MAAM,CAAC1T,OAAP,GAAiBvb,WAAjB,EAAX;AACA,YAAIq5D,IAAI,IAAI,MAAR,IAAkBA,IAAI,IAAI,KAA1B,IAAmCA,IAAI,IAAI,KAA3C,IAAoDA,IAAI,IAAI,IAAhE,EACE50C,QAAQ,GAAG,SAAX,CADF,KAEK,IAAIkmD,UAAU,CAAC//D,cAAX,CAA0ByuD,IAA1B,CAAJ,EACH50C,QAAQ,GAAG,WAAX,CADG,KAEA,IAAImmD,aAAa,CAAChgE,cAAd,CAA6ByuD,IAA7B,CAAJ,EACH50C,QAAQ,GAAG,UAAX,CADG,KAEA,IAAIomD,kBAAkB,CAACjgE,cAAnB,CAAkCyuD,IAAlC,CAAJ,EACH50C,QAAQ,GAAG,SAAX,CADG,KAEA,IAAI+lD,gBAAgB,CAAC5/D,cAAjB,CAAgCyuD,IAAhC,CAAJ,EACH50C,QAAQ,GAAG,UAAX,CADG,KAEA,IAAIqmD,2BAA2B,CAAClgE,cAA5B,CAA2CyuD,IAA3C,CAAJ,EACH50C,QAAQ,GAAG6mD,oCAAoC,GAAG,UAAH,GAAgB,UAA/D,CADG,KAEA,IAAIJ,aAAa,CAACtgE,cAAd,CAA6ByuD,IAA7B,CAAJ,EACH50C,QAAQ,GAAG,MAAX,CADG,KAEA,IAAIwmD,aAAa,CAACrgE,cAAd,CAA6ByuD,IAA7B,CAAJ,EACH50C,QAAQ,GAAG,SAAX,CADG,KAGHA,QAAQ,GAAG,OAAX;AACH;;AACD,aAAO8D,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD,KA7BD;;AA+BAq7E,IAAAA,MAAM,CAACW,gBAAP,GAA0B,UAASh8E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACtD,UAAI93B,IAAI,IAAI,GAAZ,EACE,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AACF,UAAI93B,IAAI,IAAI,GAAZ,EACE,OAAOm7E,UAAU,CAACrjD,KAAD,CAAV,IAAqBojD,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgBk8C,WAAW,GAAG,OAAH,GAAa,KAAxC,EAA+C,KAA/C,CAAvC;AACF,UAAI16E,IAAI,IAAI,MAAZ,EACEg0B,QAAQ,GAAG,OAAX;AACF,aAAO8D,KAAK,CAAC6E,OAAN,CAAc38B,IAArB;AACD,KARD;;AAUAq7E,IAAAA,MAAM,CAACY,cAAP,GAAwB,UAASj8E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACpD,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAjB;AACjB,UAAI93B,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GAA3B,EAAgC,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,EAAsB,CAAtB,CAAjB;AAChC,aAAOujD,MAAM,CAACU,OAAP,CAAe/7E,IAAf,EAAqBw+B,MAArB,EAA6B1G,KAA7B,CAAP;AACD,KAJD;;AAMAujD,IAAAA,MAAM,CAACa,yBAAP,GAAmC,UAASl8E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC/D,UAAI93B,IAAI,IAAI,GAAZ,EACE,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,oBAAhB,CAAlB;;AACF,UAAIx+B,IAAI,IAAI,MAAR,IAAkB83B,KAAK,CAAC0jD,QAAN,IAAkB,gBAAxC,EAA0D;AACxDxnD,QAAAA,QAAQ,GAAG,UAAX;AACA,eAAO,2BAAP;AACD;;AACD,aAAOonD,IAAI,CAACp7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAX;AACD,KARD;;AAUAujD,IAAAA,MAAM,CAACc,kBAAP,GAA4B,UAASn8E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACxD,UAAI93B,IAAI,IAAI,GAAZ,EAAiB;AACf83B,QAAAA,KAAK,CAAC0jD,QAAN,GAAiB,IAAjB;AACA,eAAOL,UAAU,CAACrjD,KAAD,CAAjB;AACD;;AACD,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAClB,YAAK83B,KAAK,CAAC0jD,QAAN,IAAkB,YAAlB,IAAkC,CAAClB,cAAc,CAACngE,cAAf,CAA8BqkB,MAAM,CAAC1T,OAAP,GAAiBvb,WAAjB,EAA9B,CAApC,IACCuoB,KAAK,CAAC0jD,QAAN,IAAkB,gBAAlB,IAAsC,CAACjB,kBAAkB,CAACpgE,cAAnB,CAAkCqkB,MAAM,CAAC1T,OAAP,GAAiBvb,WAAjB,EAAlC,CAD5C,EAEEykB,QAAQ,GAAG,OAAX,CAFF,KAIEA,QAAQ,GAAG,UAAX;AACF,eAAO,WAAP;AACD;;AACD,aAAO,oBAAP;AACD,KAdD;;AAgBAqnD,IAAAA,MAAM,CAACe,SAAP,GAAmB,UAASp8E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AAC/C,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAAEg0B,QAAAA,QAAQ,GAAG,UAAX;AAAuB,eAAO,WAAP;AAAqB;;AAClE,UAAIh0B,IAAI,IAAI,GAAZ,EAAiB,OAAOk7E,WAAW,CAACpjD,KAAD,EAAQ0G,MAAR,EAAgB,KAAhB,CAAlB;AACjB,aAAO48C,IAAI,CAACp7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAX;AACD,KAJD;;AAMAujD,IAAAA,MAAM,CAACroD,EAAP,GAAY,UAAShzB,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACxC,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAjB;AACjB,UAAI93B,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GAA3B,EAAgC,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AAChC,UAAI93B,IAAI,IAAI,MAAZ,EAAoBg0B,QAAQ,GAAG,KAAX,CAApB,KACK,IAAIh0B,IAAI,IAAI,MAAZ,EAAoBg0B,QAAQ,GAAG,SAAX;AACzB,aAAO,IAAP;AACD,KAND;;AAQAqnD,IAAAA,MAAM,CAACgB,aAAP,GAAuB,UAASr8E,IAAT,EAAew+B,MAAf,EAAuB1G,KAAvB,EAA8B;AACnD,UAAI93B,IAAI,IAAI,GAAZ,EAAiB,OAAOm7E,UAAU,CAACrjD,KAAD,CAAjB;AACjB,UAAI93B,IAAI,IAAI,GAAR,IAAeA,IAAI,IAAI,GAA3B,EAAgC,OAAOs7E,UAAU,CAACt7E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AAChC,UAAI93B,IAAI,IAAI,MAAZ,EAAoBg0B,QAAQ,GAAG,UAAX,CAApB,KACK,IAAIh0B,IAAI,IAAI,UAAR,IAAsBA,IAAI,IAAI,GAA9B,IAAqCA,IAAI,IAAI,GAAjD,EAAsDg0B,QAAQ,GAAG,OAAX;AAC3D,aAAO,eAAP;AACD,KAND;;AAQA,WAAO;AACLkE,MAAAA,UAAU,EAAE,UAASjI,IAAT,EAAe;AACzB,eAAO;AAACunD,UAAAA,QAAQ,EAAE,IAAX;AACC1/C,UAAAA,KAAK,EAAEgiD,MAAM,GAAG,OAAH,GAAa,KAD3B;AAEC0B,UAAAA,QAAQ,EAAE,IAFX;AAGC7+C,UAAAA,OAAO,EAAE,IAAIV,OAAJ,CAAY69C,MAAM,GAAG,OAAH,GAAa,KAA/B,EAAsC7pD,IAAI,IAAI,CAA9C,EAAiD,IAAjD;AAHV,SAAP;AAID,OANI;AAQL2O,MAAAA,KAAK,EAAE,UAASJ,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,YAAI,CAACA,KAAK,CAAC0/C,QAAP,IAAmBh5C,MAAM,CAACzF,QAAP,EAAvB,EAA0C,OAAO,IAAP;AAC1C,YAAI52B,KAAK,GAAG,CAAC21B,KAAK,CAAC0/C,QAAN,IAAkBC,SAAnB,EAA8Bj5C,MAA9B,EAAsC1G,KAAtC,CAAZ;;AACA,YAAI31B,KAAK,IAAI,OAAOA,KAAP,IAAgB,QAA7B,EAAuC;AACrCnC,UAAAA,IAAI,GAAGmC,KAAK,CAAC,CAAD,CAAZ;AACAA,UAAAA,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAb;AACD;;AACD6xB,QAAAA,QAAQ,GAAG7xB,KAAX;AACA,YAAInC,IAAI,IAAI,SAAZ,EACE83B,KAAK,CAACA,KAAN,GAAcujD,MAAM,CAACvjD,KAAK,CAACA,KAAP,CAAN,CAAoB93B,IAApB,EAA0Bw+B,MAA1B,EAAkC1G,KAAlC,CAAd;AACF,eAAO9D,QAAP;AACD,OAnBI;AAqBL21C,MAAAA,MAAM,EAAE,UAAS7xC,KAAT,EAAgBwkD,SAAhB,EAA2B;AACjC,YAAIC,EAAE,GAAGzkD,KAAK,CAAC6E,OAAf;AAAA,YAAwBpM,EAAE,GAAG+rD,SAAS,IAAIA,SAAS,CAACvrD,MAAV,CAAiB,CAAjB,CAA1C;AACA,YAAI44C,MAAM,GAAG4S,EAAE,CAAC5S,MAAhB;AACA,YAAI4S,EAAE,CAACv8E,IAAH,IAAW,MAAX,KAAsBuwB,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAzC,CAAJ,EAAmDgsD,EAAE,GAAGA,EAAE,CAAC3pD,IAAR;;AACnD,YAAI2pD,EAAE,CAAC3pD,IAAP,EAAa;AACX,cAAIrC,EAAE,IAAI,GAAN,KAAcgsD,EAAE,CAACv8E,IAAH,IAAW,OAAX,IAAsBu8E,EAAE,CAACv8E,IAAH,IAAW,KAAjC,IACAu8E,EAAE,CAACv8E,IAAH,IAAW,eADX,IAC8Bu8E,EAAE,CAACv8E,IAAH,IAAW,oBADvD,CAAJ,EACkF;AAChF;AACAu8E,YAAAA,EAAE,GAAGA,EAAE,CAAC3pD,IAAR;AACA+2C,YAAAA,MAAM,GAAG4S,EAAE,CAAC5S,MAAZ;AACD,WALD,MAKO,IAAIp5C,EAAE,IAAI,GAAN,KAAcgsD,EAAE,CAACv8E,IAAH,IAAW,QAAX,IAAuBu8E,EAAE,CAACv8E,IAAH,IAAW,gBAAhD,KACPuwB,EAAE,IAAI,GAAN,KAAcgsD,EAAE,CAACv8E,IAAH,IAAW,IAAX,IAAmBu8E,EAAE,CAACv8E,IAAH,IAAW,SAA5C,CADG,EACqD;AAC1D;AACA2pE,YAAAA,MAAM,GAAG78D,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAY6qD,EAAE,CAAC5S,MAAH,GAAYG,UAAxB,CAAT;AACD;AACF;;AACD,eAAOH,MAAP;AACD,OAtCI;AAwCLwB,MAAAA,aAAa,EAAE,GAxCV;AAyCLuO,MAAAA,iBAAiB,EAAE,IAzCd;AA0CLC,MAAAA,eAAe,EAAE,IA1CZ;AA2CL6C,MAAAA,oBAAoB,EAAE,KA3CjB;AA4CL7B,MAAAA,WAAW,EAAEA,WA5CR;AA6CL8B,MAAAA,IAAI,EAAE;AA7CD,KAAP;AA+CD,GAnZD;;AAqZE,WAASC,MAAT,CAAgB/tD,KAAhB,EAAuB;AACrB,QAAI1Z,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Z,KAAK,CAAC3qB,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrCE,MAAAA,IAAI,CAAC0Z,KAAK,CAAC5Z,CAAD,CAAL,CAASxF,WAAT,EAAD,CAAJ,GAA+B,IAA/B;AACD;;AACD,WAAO0F,IAAP;AACD;;AAED,MAAI0nE,cAAc,GAAG,CACnB,QADmB,EACT,QADS,EACC,KADD,EACQ,YADR,CAArB;AAAA,MAEG1C,aAAa,GAAGyC,MAAM,CAACC,cAAD,CAFzB;AAIA,MAAIC,WAAW,GAAG,CAChB,KADgB,EACT,OADS,EACA,SADA,EACW,UADX,EACuB,OADvB,EACgC,YADhC,EAC8C,QAD9C,EAEhB,KAFgB,EAET,IAFS,EAEH,UAFG,CAAlB;AAAA,MAGG1C,UAAU,GAAGwC,MAAM,CAACE,WAAD,CAHtB;AAKA,MAAIC,cAAc,GAAG,CACnB,OADmB,EACV,WADU,EACG,WADH,EACgB,QADhB,EAC0B,YAD1B,EACwC,YADxC,EAEnB,cAFmB,EAEH,kBAFG,EAEiB,kBAFjB,EAEqC,eAFrC,EAGnB,mBAHmB,EAGE,mBAHF,EAGuB,cAHvB,EAInB,kBAJmB,EAIC,kBAJD,EAIqB,qBAJrB,EAKnB,yBALmB,EAKQ,yBALR,EAKmC,OALnC,EAK4C,WAL5C,EAMnB,WANmB,EAMN,aANM,EAMS,iBANT,EAM4B,iBAN5B,EAOnB,YAPmB,EAOL,gBAPK,EAOa,gBAPb,EAO+B,YAP/B,EAQnB,gBARmB,EAQD,gBARC,EAQiB,MARjB,EAQyB,MARzB,EAQiC,aARjC,EASnB,oBATmB,EASG,wBATH,EAS6B,wBAT7B,EAUnB,SAVmB,EAUR,aAVQ,EAUO,OAVP,EAUgB,WAVhB,EAU6B,sBAV7B,CAArB;AAAA,MAWG1C,aAAa,GAAGuC,MAAM,CAACG,cAAD,CAXzB;AAaA,MAAIC,mBAAmB,GAAG,CACxB,WADwB,EACX,UADW,EACC,MADD,EACS,QADT,EACmB,MADnB,EAC2B,WAD3B,EACwC,OADxC,EAExB,WAFwB,EAEX,aAFW,EAGxB,MAHwB,EAGhB,OAHgB,CAA1B;AAAA,MAIG1C,kBAAkB,GAAGsC,MAAM,CAACI,mBAAD,CAJ9B;AAMA,MAAIC,iBAAiB,GAAG,CACtB,eADsB,EACL,aADK,EACU,YADV,EACwB,kBADxB,EAEtB,oBAFsB,EAEA,KAFA,EAEO,cAFP,EAEuB,WAFvB,EAEoC,iBAFpC,EAGtB,qBAHsB,EAGC,oBAHD,EAGuB,qBAHvB,EAItB,2BAJsB,EAIO,gBAJP,EAIyB,sBAJzB,EAKtB,2BALsB,EAKO,YALP,EAKqB,SALrB,EAKgC,iBALhC,EAMtB,qBANsB,EAMC,YAND,EAMe,uBANf,EAOtB,uBAPsB,EAOG,iBAPH,EAOsB,kBAPtB,EAQtB,kBARsB,EAQF,mBARE,EAQmB,qBARnB,EAStB,uBATsB,EASG,uBATH,EAS4B,mBAT5B,EAUtB,iBAVsB,EAUH,gBAVG,EAUe,SAVf,EAU0B,OAV1B,EAUmC,YAVnC,EAWtB,gBAXsB,EAWJ,gBAXI,EAWc,gBAXd,EAWgC,iBAXhC,EAYtB,QAZsB,EAYZ,eAZY,EAYK,qBAZL,EAY4B,2BAZ5B,EAatB,4BAbsB,EAaQ,qBAbR,EAa+B,qBAb/B,EActB,iBAdsB,EAcH,cAdG,EAca,cAdb,EAc6B,qBAd7B,EAetB,qBAfsB,EAeC,oBAfD,EAeuB,qBAfvB,EAgBtB,oBAhBsB,EAgBA,aAhBA,EAgBe,mBAhBf,EAgBoC,mBAhBpC,EAiBtB,mBAjBsB,EAiBD,eAjBC,EAiBgB,cAjBhB,EAiBgC,oBAjBhC,EAkBtB,oBAlBsB,EAkBA,oBAlBA,EAkBsB,gBAlBtB,EAkBwC,cAlBxC,EAmBtB,YAnBsB,EAmBR,kBAnBQ,EAmBY,wBAnBZ,EAoBtB,yBApBsB,EAoBK,kBApBL,EAoByB,kBApBzB,EAqBtB,cArBsB,EAqBN,QArBM,EAqBI,sBArBJ,EAqB4B,YArB5B,EAqB0C,YArB1C,EAsBtB,aAtBsB,EAsBP,cAtBO,EAsBS,cAtBT,EAsByB,cAtBzB,EAsByC,aAtBzC,EAuBtB,OAvBsB,EAuBb,MAvBa,EAuBL,OAvBK,EAuBI,eAvBJ,EAuBqB,cAvBrB,EAuBqC,aAvBrC,EAwBtB,YAxBsB,EAwBR,aAxBQ,EAwBO,mBAxBP,EAwB4B,mBAxB5B,EAyBtB,mBAzBsB,EAyBD,aAzBC,EAyBc,cAzBd,EAyB8B,SAzB9B,EAyByC,SAzBzC,EA0BtB,SA1BsB,EA0BX,mBA1BW,EA0BU,eA1BV,EA0B2B,MA1B3B,EA0BmC,KA1BnC,EA0B0C,WA1B1C,EA2BtB,YA3BsB,EA2BR,QA3BQ,EA2BE,WA3BF,EA2Be,SA3Bf,EA2B0B,mBA3B1B,EA4BtB,2BA5BsB,EA4BO,0BA5BP,EA6BtB,4BA7BsB,EA6BQ,2BA7BR,EA6BqC,mBA7BrC,EA8BtB,oBA9BsB,EA8BA,WA9BA,EA8Ba,aA9Bb,EA8B4B,KA9B5B,EA8BmC,cA9BnC,EA+BtB,MA/BsB,EA+Bd,YA/Bc,EA+BA,gBA/BA,EA+BkB,WA/BlB,EA+B+B,WA/B/B,EAgCtB,aAhCsB,EAgCP,WAhCO,EAgCM,OAhCN,EAgCe,cAhCf,EAgC+B,WAhC/B,EAgC4C,WAhC5C,EAiCtB,MAjCsB,EAiCd,aAjCc,EAiCC,uBAjCD,EAiC0B,cAjC1B,EAkCtB,wBAlCsB,EAkCI,qBAlCJ,EAkC2B,WAlC3B,EAmCtB,kBAnCsB,EAmCF,cAnCE,EAmCc,YAnCd,EAmC4B,gBAnC5B,EAoCtB,cApCsB,EAoCN,yBApCM,EAoCqB,mBApCrB,EAqCtB,yBArCsB,EAqCK,wBArCL,EAqC+B,sBArC/B,EAsCtB,uBAtCsB,EAsCG,yBAtCH,EAsC8B,aAtC9B,EAsC6C,KAtC7C,EAuCtB,MAvCsB,EAuCd,WAvCc,EAuCD,mBAvCC,EAuCoB,gBAvCpB,EAuCsC,gBAvCtC,EAwCtB,aAxCsB,EAwCP,iBAxCO,EAwCY,iBAxCZ,EAwC+B,mBAxC/B,EAyCtB,UAzCsB,EAyCV,UAzCU,EAyCE,cAzCF,EAyCkB,cAzClB,EAyCkC,gBAzClC,EA0CtB,eA1CsB,EA0CL,qBA1CK,EA0CkB,uBA1ClB,EA2CtB,oBA3CsB,EA2CA,qBA3CA,EA2CuB,QA3CvB,EA2CiC,SA3CjC,EA2C4C,MA3C5C,EA4CtB,mBA5CsB,EA4CD,iBA5CC,EA4CkB,kBA5ClB,EA4CsC,kBA5CtC,EA6CtB,OA7CsB,EA6Cb,aA7Ca,EA6CE,iBA7CF,EA6CqB,mBA7CrB,EA6C0C,cA7C1C,EA8CtB,kBA9CsB,EA8CF,oBA9CE,EA8CoB,WA9CpB,EA8CiC,iBA9CjC,EA+CtB,eA/CsB,EA+CL,cA/CK,EA+CW,MA/CX,EA+CmB,gBA/CnB,EA+CqC,YA/CrC,EAgDtB,aAhDsB,EAgDP,kBAhDO,EAgDa,eAhDb,EAgD8B,oBAhD9B,EAiDtB,qBAjDsB,EAiDC,wBAjDD,EAiD2B,YAjD3B,EAkDtB,kBAlDsB,EAkDF,qBAlDE,EAkDqB,iBAlDrB,EAkDwC,QAlDxC,EAmDtB,eAnDsB,EAmDL,aAnDK,EAmDU,cAnDV,EAmD0B,YAnD1B,EAmDwC,OAnDxC,EAoDtB,mBApDsB,EAoDD,cApDC,EAoDe,oBApDf,EAoDqC,eApDrC,EAqDtB,eArDsB,EAqDL,WArDK,EAqDQ,gBArDR,EAqD0B,YArD1B,EAqDwC,WArDxC,EAsDtB,aAtDsB,EAsDP,eAtDO,EAsDU,aAtDV,EAsDyB,WAtDzB,EAsDqC,WAtDrC,EAuDtB,gBAvDsB,EAuDJ,YAvDI,EAuDU,iBAvDV,EAwDtB,WAxDsB,EAwDT,gBAxDS,EAwDS,YAxDT,EAwDuB,iBAxDvB,EAwD0C,WAxD1C,EAyDtB,gBAzDsB,EAyDJ,SAzDI,EAyDO,UAzDP,EAyDmB,WAzDnB,EAyDgC,UAzDhC,EAyD4C,WAzD5C,EA0DtB,QA1DsB,EA0DZ,YA1DY,EA0DE,iBA1DF,EA0DqB,QA1DrB,EA0D+B,eA1D/B,EA2DtB,iBA3DsB,EA2DH,aA3DG,EA2DY,iBA3DZ,EA2D+B,eA3D/B,EA4DtB,SA5DsB,EA4DX,OA5DW,EA4DF,SA5DE,EA4DS,SA5DT,EA4DoB,eA5DpB,EA4DqC,gBA5DrC,EA6DtB,eA7DsB,EA6DL,eA7DK,EA6DY,UA7DZ,EA6DwB,gBA7DxB,EA8DtB,eA9DsB,EA8DL,YA9DK,EA8DS,YA9DT,EA8DuB,SA9DvB,EA8DkC,gBA9DlC,EA+DtB,cA/DsB,EA+DN,eA/DM,EA+DW,aA/DX,EA+D0B,MA/D1B,EA+DkC,kBA/DlC,EAgEtB,mBAhEsB,EAgED,mBAhEC,EAgEoB,aAhEpB,EAgEmC,OAhEnC,EAiEtB,aAjEsB,EAiEP,cAjEO,EAiES,aAjET,EAiEwB,oBAjExB,EAiE8C,OAjE9C,EAkEtB,aAlEsB,EAkEP,eAlEO,EAkEU,aAlEV,EAkEyB,YAlEzB,EAkEuC,aAlEvC,EAmEtB,UAnEsB,EAmEV,oBAnEU,EAmEY,kBAnEZ,EAmEgC,QAnEhC,EAoEtB,oBApEsB,EAoEA,qBApEA,EAoEuB,qBApEvB,EAqEtB,iBArEsB,EAqEH,kBArEG,EAqEiB,QArEjB,EAqE2B,MArE3B,EAqEmC,YArEnC,EAsEtB,aAtEsB,EAsEP,UAtEO,EAsEK,OAtEL,EAsEc,QAtEd,EAsEwB,UAtExB,EAsEoC,gBAtEpC,EAuEtB,SAvEsB,EAuEX,YAvEW,EAuEG,eAvEH,EAuEoB,eAvEpB,EAuEqC,WAvErC,EAwEtB,OAxEsB,EAwEb,iBAxEa,EAwEM,eAxEN,EAwEuB,qBAxEvB,EAyEtB,yBAzEsB,EAyEK,2BAzEL,EAyEkC,sBAzElC,EA0EtB,sBA1EsB,EA0EE,0BA1EF,EA2EtB,4BA3EsB,EA2EQ,oBA3ER,EA2E8B,qBA3E9B,EA4EtB,mBA5EsB,EA4ED,gBA5EC,EA4EiB,sBA5EjB,EA6EtB,0BA7EsB,EA6EM,4BA7EN,EA8EtB,uBA9EsB,EA8EG,uBA9EH,EA8E4B,2BA9E5B,EA+EtB,6BA/EsB,EA+ES,qBA/ET,EA+EgC,sBA/EhC,EAgFtB,oBAhFsB,EAgFA,mBAhFA,EAgFqB,kBAhFrB,EAiFtB,uBAjFsB,EAiFG,cAjFH,EAiFmB,cAjFnB,EAiFmC,eAjFnC,EAkFtB,MAlFsB,EAkFd,OAlFc,EAkFL,UAlFK,EAkFO,cAlFP,EAkFuB,eAlFvB,EAmFtB,mBAnFsB,EAmFD,aAnFC,EAmFc,QAnFd,EAmFwB,YAnFxB,EAmFsC,UAnFtC,EAoFtB,cApFsB,EAoFN,QApFM,EAoFI,aApFJ,EAoFmB,YApFnB,EAoFiC,iBApFjC,EAqFtB,YArFsB,EAqFR,iBArFQ,EAqFW,sBArFX,EAqFmC,iBArFnC,EAsFtB,uBAtFsB,EAsFG,sBAtFH,EAsF2B,sBAtF3B,EAuFtB,0BAvFsB,EAuFM,uBAvFN,EAuF+B,eAvF/B,EAwFtB,qBAxFsB,EAwFC,wBAxFD,EAwF2B,qBAxF3B,EAyFtB,aAzFsB,EAyFP,aAzFO,EAyFQ,cAzFR,EAyFwB,kBAzFxB,EA0FtB,cA1FsB,EA0FN,eA1FM,EA0FW,gBA1FX,EA0F6B,aA1F7B,EA2FtB,kBA3FsB,EA2FF,qBA3FE,EA2FqB,gBA3FrB,EA4FtB,yBA5FsB,EA4FK,WA5FL,EA4FkB,KA5FlB,EA4FyB,cA5FzB,EA4FyC,WA5FzC,EA4FsD,kBA5FtD,EA6FtB,iBA7FsB,EA6FH,YA7FG,EA6FW,kBA7FX,EA6F+B,qBA7F/B,EA8FtB,qBA9FsB,EA8FC,4BA9FD,EA8F+B,WA9F/B,EA+FtB,cA/FsB,EA+FN,aA/FM,EA+FS,gBA/FT,EA+F2B,YA/F3B,EA+FyC,eA/FzC,EAgGtB,gBAhGsB,EAgGJ,cAhGI,EAgGY,aAhGZ,EAgG2B,aAhG3B,EAgG0C,YAhG1C,EAiGtB,cAjGsB,EAiGN,cAjGM,EAiGU,QAjGV,EAiGoB,aAjGpB,EAiGmC,QAjGnC,EAiG6C,OAjG7C,EAkGtB,aAlGsB,EAkGP,YAlGO,EAkGO,cAlGP,EAkGuB,WAlGvB,EAkGoC,cAlGpC,EAkGoD,SAlGpD;AAoGtB,aApGsB,EAoGT,WApGS,EAoGI,MApGJ,EAoGY,mBApGZ,EAoGiC,QApGjC,EAoG2C,aApG3C,EAqGtB,eArGsB,EAqGL,gBArGK,EAqGa,YArGb,EAqG2B,cArG3B,EAqG2C,gBArG3C,EAsGtB,qBAtGsB,EAsGC,6BAtGD,EAuGtB,iBAvGsB,EAuGH,MAvGG,EAuGK,cAvGL,EAuGqB,WAvGrB,EAuGkC,iBAvGlC,EAwGtB,QAxGsB,EAwGZ,YAxGY,EAwGE,YAxGF,EAwGgB,cAxGhB,EAwGgC,aAxGhC,EAwG+C,iBAxG/C,EAwGkE,QAxGlE,EAyGtB,kBAzGsB,EAyGF,mBAzGE,EAyGmB,gBAzGnB,EAyGqC,iBAzGrC,EA0GtB,mBA1GsB,EA0GD,gBA1GC,EA0GiB,cA1GjB,EA0GiC,gBA1GjC,EA2GtB,gBA3GsB,EA2GJ,mBA3GI,EA2GiB,8BA3GjB,EA4GtB,4BA5GsB,EA4GQ,aA5GR,EA4GuB,cA5GvB,CAAxB;AAAA,MA6GGhD,gBAAgB,GAAG2C,MAAM,CAACK,iBAAD,CA7G5B;AA+GA,MAAIC,4BAA4B,GAAG,CACjC,cADiC,EACjB,oBADiB,EACK,kBADL,EAEjC,wBAFiC,EAEP,wBAFO,EAEmB,wBAFnB,EAGjC,oBAHiC,EAGX,0BAHW,EAGiB,0BAHjB,EAIjC,0BAJiC,EAIL,oBAJK,EAIiB,oBAJjB,EAKjC,eALiC,EAKhB,qBALgB,EAKO,mBALP,EAMjC,yBANiC,EAMN,yBANM,EAOjC,yBAPiC,EAON,qBAPM,EAOiB,2BAPjB,EAQjC,2BARiC,EAQJ,2BARI,EASjC,qBATiC,EASV,qBATU,EASa,cATb,EAUjC,kBAViC,EAUb,oBAVa,EAUS,eAVT,EAU0B,mBAV1B,EAWjC,qBAXiC,EAWV,eAXU,EAWO,mBAXP,EAYjC,qBAZiC,EAYV,gBAZU,EAYQ,oBAZR,EAajC,sBAbiC,EAaT,kBAbS,EAaW,0BAbX,EAcjC,uBAdiC,EAcR,sBAdQ,EAcgB,6BAdhB,EAejC,sBAfiC,EAeT,2BAfS,EAeoB,wBAfpB,EAgBjC,uBAhBiC,EAgBR,2BAhBQ,EAgBqB,wBAhBrB,EAiBjC,4BAjBiC,EAiBH,gCAjBG,EAiB+B,cAjB/B,EAiB+C,MAjB/C,CAAnC;AAAA,MAkBG3C,2BAA2B,GAAGqC,MAAM,CAACM,4BAAD,CAlBvC;AAoBA,MAAIC,eAAe,GAAG,CACpB,cADoB,EACJ,aADI,EACW,KADX,EACkB,eADlB,EACmC,cADnC,EAEnB,uBAFmB,EAEM,cAFN,EAEsB,aAFtB,EAEqC,YAFrC,CAAtB;AAAA,MAGG3C,cAAc,GAAGoC,MAAM,CAACO,eAAD,CAH1B;AAKA,MAAIC,mBAAmB,GAAG,CACxB,kBADwB,EACJ,UADI,EACQ,UADR,EACoB,KADpB,EAC2B,QAD3B,EACqC,OADrC,EAExB,UAFwB,EAEZ,QAFY,EAEF,SAFE,EAES,QAFT,CAA1B;AAAA,MAGG3C,kBAAkB,GAAGmC,MAAM,CAACQ,mBAAD,CAH9B;AAKA,MAAIC,cAAc,GAAG,CACnB,WADmB,EACN,cADM,EACU,MADV,EACkB,YADlB,EACgC,OADhC,EACyC,OADzC,EAEnB,QAFmB,EAET,OAFS,EAEA,gBAFA,EAEkB,MAFlB,EAE0B,YAF1B,EAEwC,OAFxC,EAGnB,WAHmB,EAGN,WAHM,EAGO,YAHP,EAGqB,WAHrB,EAGkC,OAHlC,EAG2C,gBAH3C,EAInB,UAJmB,EAIP,SAJO,EAII,MAJJ,EAIY,UAJZ,EAIwB,UAJxB,EAIoC,eAJpC,EAKnB,UALmB,EAKP,WALO,EAKM,WALN,EAKmB,aALnB,EAKkC,gBALlC,EAMnB,YANmB,EAML,YANK,EAMS,SANT,EAMoB,YANpB,EAMkC,cANlC,EAOnB,eAPmB,EAOF,eAPE,EAOe,eAPf,EAOgC,YAPhC,EAQnB,UARmB,EAQP,aARO,EAQQ,SARR,EAQmB,YARnB,EAQiC,WARjC,EASnB,aATmB,EASJ,aATI,EASW,SATX,EASsB,WATtB,EASmC,YATnC,EAUnB,MAVmB,EAUX,WAVW,EAUE,MAVF,EAUU,MAVV,EAUkB,OAVlB,EAU2B,aAV3B,EAU0C,UAV1C,EAWnB,SAXmB,EAWR,WAXQ,EAWK,QAXL,EAWe,OAXf,EAWwB,OAXxB,EAWiC,UAXjC,EAYnB,eAZmB,EAYF,WAZE,EAYW,cAZX,EAY2B,WAZ3B,EAYwC,YAZxC,EAanB,WAbmB,EAaN,sBAbM,EAakB,WAblB,EAa+B,YAb/B,EAa6C,WAb7C,EAcnB,aAdmB,EAcJ,eAdI,EAca,cAdb,EAc6B,gBAd7B,EAenB,gBAfmB,EAeD,aAfC,EAec,MAfd,EAesB,WAftB,EAemC,OAfnC,EAe4C,SAf5C,EAgBnB,QAhBmB,EAgBT,kBAhBS,EAgBW,YAhBX,EAgByB,cAhBzB,EAgByC,cAhBzC,EAiBnB,gBAjBmB,EAiBD,iBAjBC,EAiBkB,mBAjBlB,EAiBuC,iBAjBvC,EAkBnB,iBAlBmB,EAkBA,cAlBA,EAkBgB,WAlBhB,EAkB6B,WAlB7B,EAkB0C,UAlB1C,EAmBnB,aAnBmB,EAmBJ,MAnBI,EAmBI,SAnBJ,EAmBe,OAnBf,EAmBwB,WAnBxB,EAmBqC,QAnBrC,EAmB+C,WAnB/C,EAoBnB,QApBmB,EAoBT,eApBS,EAoBQ,WApBR,EAoBqB,eApBrB,EAoBsC,eApBtC,EAqBnB,YArBmB,EAqBL,WArBK,EAqBQ,MArBR,EAqBgB,MArBhB,EAqBwB,MArBxB,EAqBgC,YArBhC,EAsBnB,QAtBmB,EAsBT,eAtBS,EAsBQ,KAtBR,EAsBe,WAtBf,EAsB4B,WAtB5B,EAsByC,aAtBzC,EAuBnB,QAvBmB,EAuBT,YAvBS,EAuBK,UAvBL,EAuBiB,UAvBjB,EAuB6B,QAvB7B,EAuBuC,QAvBvC,EAuBiD,SAvBjD,EAwBnB,WAxBmB,EAwBN,WAxBM,EAwBO,MAxBP,EAwBe,aAxBf,EAwB8B,WAxB9B,EAwB2C,KAxB3C,EAyBnB,MAzBmB,EAyBX,SAzBW,EAyBA,QAzBA,EAyBU,WAzBV,EAyBuB,QAzBvB,EAyBiC,OAzBjC,EAyB0C,OAzB1C,EA0BnB,YA1BmB,EA0BL,QA1BK,EA0BK,aA1BL,CAArB;AAAA,MA2BG3C,aAAa,GAAGkC,MAAM,CAACS,cAAD,CA3BzB;AA6BA,MAAIC,cAAc,GAAG,CACnB,OADmB,EACV,UADU,EACE,cADF,EACkB,UADlB,EAC8B,eAD9B,EAC+C,MAD/C,EAEnB,mBAFmB,EAEE,OAFF,EAEW,OAFX,EAEoB,KAFpB,EAE2B,YAF3B,EAEyC,YAFzC,EAEuD,WAFvD,EAGnB,QAHmB,EAGT,SAHS,EAGE,iBAHF,EAGqB,aAHrB,EAGoC,cAHpC,EAInB,cAJmB,EAIH,UAJG,EAIS,WAJT,EAIsB,MAJtB,EAI8B,MAJ9B,EAIsC,WAJtC,EAImD,OAJnD,EAI4D,cAJ5D,EAI4E,YAJ5E,EAKnB,cALmB,EAKH,UALG,EAKS,YALT,EAKuB,WALvB,EAKoC,UALpC,EAKgD,OALhD,EAKyD,eALzD,EAK0E,QAL1E,EAMnB,SANmB,EAMR,OANQ,EAMC,OAND,EAMU,YANV,EAMwB,MANxB,EAMgC,QANhC,EAM0C,QAN1C,EAMoD,YANpD,EAOnB,MAPmB,EAOX,QAPW,EAOD,OAPC,EAOQ,WAPR,EAOqB,YAPrB,EAOmC,SAPnC,EAO8C,QAP9C,EAOwD,cAPxD,EAQnB,YARmB,EAQL,iBARK,EAQc,cARd,EAQ8B,YAR9B,EAQ4C,MAR5C,EAQoD,WARpD,EASnB,YATmB,EASL,qBATK,EASkB,SATlB,EAS6B,aAT7B,EAS4C,OAT5C,EAUnB,MAVmB,EAUX,QAVW,EAUD,UAVC,EAUW,QAVX,EAUqB,aAVrB,EAUoC,oBAVpC,EAWnB,mBAXmB,EAWE,iBAXF,EAWqB,OAXrB,EAW8B,MAX9B,EAWsC,aAXtC,EAYnB,YAZmB,EAYL,UAZK,EAYO,OAZP,EAYgB,YAZhB,EAY8B,aAZ9B,EAY6C,QAZ7C,EAYuD,gBAZvD,EAanB,SAbmB,EAaR,WAbQ,EAaK,SAbL,EAagB,SAbhB,EAa2B,UAb3B,EAcnB,aAdmB,EAcJ,cAdI,EAcY,YAdZ,EAc0B,MAd1B,EAckC,SAdlC,EAc6C,UAd7C,EAcyD,OAdzD,EAckE,MAdlE,EAenB,OAfmB,EAeV,WAfU,EAeG,cAfH,EAemB,SAfnB,EAe8B,QAf9B,EAewC,QAfxC,EAekD,QAflD,EAe4D,SAf5D,EAgBnB,sBAhBmB,EAgBK,SAhBL,EAgBgB,gBAhBhB,EAgBkC,OAhBlC,EAgB2C,kBAhB3C,EAiBnB,gBAjBmB,EAiBD,iBAjBC,EAiBkB,kBAjBlB,EAiBsC,YAjBtC,EAiBoD,YAjBpD,EAkBnB,MAlBmB,EAkBX,SAlBW,EAkBA,mBAlBA,EAkBqB,iBAlBrB,EAkBwC,UAlBxC,EAmBnB,UAnBmB,EAmBP,cAnBO,EAoBnB,QApBmB,EAoBT,QApBS,EAoBC,MApBD,EAoBS,UApBT,EAoBqB,MApBrB,EAoB6B,SApB7B,EAoBwC,aApBxC,EAoBuD,UApBvD,EAqBnB,SArBmB,EAqBR,SArBQ,EAqBG,UArBH,EAqBe,OArBf,EAqBwB,KArBxB,EAqB+B,UArB/B,EAqB2C,kBArB3C,EAsBnB,wBAtBmB,EAsBO,sBAtBP,EAsB+B,wBAtB/B,EAuBnB,wBAvBmB,EAuBO,yBAvBP,EAwBnB,yBAxBmB,EAwBQ,yBAxBR,EAyBnB,uBAzBmB,EAyBM,yBAzBN,EA0BnB,0BA1BmB,EA0BS,yBA1BT,EA2BnB,yBA3BmB,EA2BQ,yBA3BR,EA2BmC,uBA3BnC,EA4BnB,kBA5BmB,EA4BC,WA5BD,EA4Bc,WA5Bd,EA4B2B,UA5B3B,EA4BuC,SA5BvC,EA4BkD,iBA5BlD,EA6BnB,gBA7BmB,EA6BD,SA7BC,EA6BU,MA7BV,EA6BkB,MA7BlB,EA6B0B,UA7B1B,EA6BsC,OA7BtC,EA6B+C,MA7B/C,EA6BuD,MA7BvD,EA6B+D,UA7B/D,EA6B2E,YA7B3E,EA6ByF,WA7BzF,EA8BnB,UA9BmB,EA8BP,MA9BO,EA8BC,oBA9BD,EA8BuB,UA9BvB,EA8BmC,UA9BnC,EA8B+C,MA9B/C,EA8BuD,QA9BvD,EA+BnB,UA/BmB,EA+BP,UA/BO,EA+BK,MA/BL,EA+Ba,QA/Bb,EA+BuB,kBA/BvB,EA+B2C,YA/B3C,EA+ByD,QA/BzD,EAgCnB,MAhCmB,EAgCX,QAhCW,EAgCD,MAhCC,EAgCO,QAhCP,EAgCiB,WAhCjB,EAgC8B,eAhC9B,EAiCnB,UAjCmB,EAiCP,gBAjCO,EAiCW,YAjCX,EAiCyB,KAjCzB,EAiCgC,MAjChC,EAiCwC,KAjCxC,EAiC+C,MAjC/C,EAiCuD,QAjCvD,EAkCnB,gBAlCmB,EAkCD,iBAlCC,EAkCkB,qBAlClB,EAkCyC,UAlCzC,EAmCnB,gBAnCmB,EAmCD,UAnCC,EAmCW,SAnCX,EAmCsB,SAnCtB,EAmCiC,QAnCjC,EAmC2C,aAnC3C,EAoCnB,cApCmB,EAoCH,aApCG,EAoCY,aApCZ,EAoC2B,cApC3B,EAoC2C,OApC3C,EAoCoD,QApCpD,EAoC8D,WApC9D,EAoC2E,QApC3E,EAqCnB,QArCmB,EAqCT,iBArCS,EAqCU,mBArCV,EAqC+B,SArC/B,EAqC0C,SArC1C,EAsCnB,UAtCmB,EAsCP,gBAtCO,EAsCW,UAtCX,EAsCuB,OAtCvB,EAuCnB,sBAvCmB,EAuCK,qBAvCL,EAuC4B,uBAvC5B,EAwCnB,WAxCmB,EAwCN,KAxCM,EAwCC,OAxCD,EAwCU,QAxCV,EAwCoB,MAxCpB,EAwC4B,OAxC5B,EAwCqC,SAxCrC,EAwCgD,SAxChD,EAyCnB,cAzCmB,EAyCH,QAzCG,EAyCO,iBAzCP,EAyC0B,OAzC1B,EAyCmC,WAzCnC,EAyCgD,SAzChD,EAyC2D,UAzC3D,EA0CnB,OA1CmB,EA0CV,SA1CU,EA0CC,MA1CD,EA0CS,OA1CT,EA0CkB,aA1ClB,EA0CiC,gBA1CjC,EA2CnB,aA3CmB,EA2CJ,mBA3CI,EA2CiB,aA3CjB,EA2CgC,iBA3ChC,EA4CnB,aA5CmB,EA4CJ,WA5CI,EA4CS,KA5CT,EA4CgB,YA5ChB,EA4C8B,WA5C9B,EA4C2C,cA5C3C,EA4C2D,OA5C3D,EA4CoE,QA5CpE,EA4C8E,UA5C9E,EA6CnB,2BA7CmB,EA6CU,4BA7CV,EA8CnB,yBA9CmB,EA8CQ,mBA9CR,EA8C6B,mBA9C7B,EA+CnB,iCA/CmB,EA+CgB,qBA/ChB,EAgDnB,wBAhDmB,EAgDO,2BAhDP,EAgDoC,cAhDpC,EAiDnB,mBAjDmB,EAiDE,8BAjDF,EAiDkC,qBAjDlC,EAkDnB,+BAlDmB,EAkDc,0BAlDd,EAkD0C,QAlD1C,EAmDnB,MAnDmB,EAmDX,UAnDW,EAmDC,iBAnDD,EAmDoB,eAnDpB,EAoDnB,oBApDmB,EAoDG,UApDH,EAoDe,aApDf,EAoD8B,QApD9B,EAoDwC,eApDxC,EAqDnB,KArDmB,EAqDZ,WArDY,EAqDC,WArDD,EAqDc,MArDd,EAqDsB,UArDtB,EAqDkC,sBArDlC,EAqD0D,UArD1D,EAqDsE,SArDtE,EAqDiF,UArDjF,EAsDnB,UAtDmB,EAsDP,WAtDO,EAsDM,aAtDN,EAsDqB,gBAtDrB,EAsDuC,SAtDvC,EAuDnB,eAvDmB,EAuDF,WAvDE,EAuDW,MAvDX,EAuDmB,QAvDnB,EAuD6B,aAvD7B,EAuD4C,QAvD5C,EAwDnB,WAxDmB,EAwDN,SAxDM,EAwDK,SAxDL,EAwDgB,WAxDhB,EAwD6B,aAxD7B,EAwD4C,SAxD5C,EAwDuD,OAxDvD,EAwDgE,SAxDhE,EAwD2E,YAxD3E,EAyDnB,oBAzDmB,EAyDG,eAzDH,EAyDoB,OAzDpB,EAyD6B,OAzD7B,EAyDsC,QAzDtC,EA0DnB,SA1DmB,EA0DR,eA1DQ,EA0DS,SA1DT,EA0DoB,UA1DpB,EA0DgC,SA1DhC,EA0D2C,aA1D3C,EA2DnB,SA3DmB,EA2DR,MA3DQ,EA2DA,QA3DA,EA2DU,SA3DV,EA2DqB,aA3DrB,EA2DoC,YA3DpC,EA2DkD,aA3DlD,EA2DiE,cA3DjE,EA4DnB,SA5DmB,EA4DR,SA5DQ,EA4DG,UA5DH,EA4De,KA5Df,EA4DsB,UA5DtB,EA4DkC,UA5DlC,EA4D8C,aA5D9C,EA6DnB,UA7DmB,EA6DP,aA7DO,EA6DQ,iBA7DR,EA6D2B,OA7D3B,EA6DoC,WA7DpC,EA8DnB,YA9DmB,EA8DL,2BA9DK,EA8DwB,WA9DxB,EA8DqC,QA9DrC,EA+DnB,UA/DmB,EA+DP,QA/DO,EA+DG,2BA/DH,EAgEnB,2BAhEmB,EAgEU,UAhEV,EAgEsB,UAhEtB,EAgEkC,OAhElC,EAgE2C,SAhE3C,EAiEnB,KAjEmB,EAiEZ,MAjEY,EAiEJ,OAjEI,EAiEK,OAjEL,EAiEc,QAjEd,EAiEwB,UAjExB,EAiEoC,SAjEpC,EAiE+C,SAjE/C,EAkEnB,SAlEmB,EAkER,OAlEQ,EAkEC,KAlED,EAkEQ,YAlER,EAkEsB,aAlEtB,EAkEqC,KAlErC,EAkE4C,QAlE5C,EAkEsD,SAlEtD,EAmEnB,UAnEmB,EAmEP,YAnEO,EAmEO,YAnEP,EAmEqB,OAnErB,EAmE8B,SAnE9B,EAmEyC,QAnEzC,EAmEmD,QAnEnD,EAmE6D,QAnE7D,EAmEuE,QAnEvE,EAoEnB,QApEmB,EAoET,WApES,EAoEI,iBApEJ,EAoEuB,WApEvB,EAoEoC,aApEpC,EAqEnB,2BArEmB,EAqEU,wBArEV,EAsEnB,4BAtEmB,EAsEW,gCAtEX,EAsE6C,YAtE7C,EAsE2D,UAtE3D,EAuEnB,gBAvEmB,EAuED,eAvEC,EAuEgB,UAvEhB,EAuE4B,OAvE5B,EAuEqC,MAvErC,EAuE6C,QAvE7C,EAwEnB,qBAxEmB,EAwEI,uBAxEJ,EAwE6B,QAxE7B,EAyEnB,MAzEmB,EAyEX,OAzEW,EAyEF,OAzEE,EAyEO,kBAzEP,EAyE2B,OAzE3B,EAyEoC,mBAzEpC,EA0EnB,iBA1EmB,EA0EA,wBA1EA,EA0E0B,sBA1E1B,EA0EkD,MA1ElD,EA2EnB,OA3EmB,EA2EV,YA3EU,EA2EI,eA3EJ,EA2EqB,SA3ErB,EA2EgC,YA3EhC,EA2E8C,OA3E9C,EA2EuD,QA3EvD,EA4EnB,aA5EmB,EA4EJ,WA5EI,EA4ES,YA5ET,EA4EuB,aA5EvB,EA4EsC,OA5EtC,EA4E+C,cA5E/C,EA4E+D,eA5E/D,EA4EgF,cA5EhF,EA4EgG,WA5EhG,EA4E6G,QA5E7G,EA6EnB,eA7EmB,EA6EF,OA7EE,EA6EO,QA7EP,EA6EiB,YA7EjB,EA6E+B,SA7E/B,EA6E0C,QA7E1C,EA6EoD,YA7EpD,EA6EkE,KA7ElE,EA8EnB,sBA9EmB,EA8EK,WA9EL,EA8EkB,OA9ElB,EA8E2B,WA9E3B,EA8EwC,UA9ExC,EA8EoD,SA9EpD,EA8E+D,WA9E/D,EA8E4E,OA9E5E,EA+EnB,eA/EmB,EA+EF,YA/EE,EA+EY,cA/EZ,EA+E4B,oBA/E5B,EAgFnB,oBAhFmB,EAgFG,oBAhFH,EAgFyB,WAhFzB,EAgFsC,iBAhFtC,EAiFnB,OAjFmB,EAkFnB,QAlFmB,EAkFT,MAlFS,EAkFD,aAlFC,EAkFc,UAlFd,EAkF0B,UAlF1B,EAkFsC,WAlFtC,EAkFmD,MAlFnD,EAmFnB,OAnFmB,EAmFV,MAnFU,EAmFF,kBAnFE,EAmFkB,YAnFlB,EAmFgC,iBAnFhC,EAoFnB,mBApFmB,EAoFE,cApFF,EAoFkB,SApFlB,EAoF6B,OApF7B,EAoFsC,aApFtC,EAqFnB,qBArFmB,EAqFI,aArFJ,EAqFmB,qBArFnB,EAqF0C,IArF1C,EAqFgD,KArFhD,EAsFnB,qBAtFmB,EAsFI,uBAtFJ,EAsF6B,WAtF7B,EAuFnB,WAvFmB,EAuFN,aAvFM,EAuFS,YAvFT,EAuFuB,YAvFvB,EAuFqC,YAvFrC,EAwFnB,aAxFmB,EAwFJ,iBAxFI,EAwFe,gBAxFf,EAwFiC,WAxFjC,EAwF8C,oBAxF9C,EAwFoE,OAxFpE,EAwF6E,IAxF7E,EAyFnB,aAzFmB,EAyFJ,gBAzFI,EAyFc,aAzFd,EAyF6B,mBAzF7B,EA0FnB,aA1FmB,EA0FJ,iBA1FI,EA0Fe,aA1Ff,EA0F8B,WA1F9B,EA0F2C,MA1F3C,EA0FmD,KA1FnD,EA2FnB,KA3FmB,EA2FZ,UA3FY,EA2FA,eA3FA,EA2FiB,UA3FjB,EA2F6B,SA3F7B,EA2FwC,aA3FxC,EA2FuD,gBA3FvD,EA4FnB,eA5FmB,EA4FF,QA5FE,EA4FQ,UA5FR,EA4FoB,MA5FpB,EA4F4B,MA5F5B,EA4FoC,OA5FpC,EA6FnB,QA7FmB,EA6FT,aA7FS,EA6FM,YA7FN,EA6FoB,OA7FpB,EA6F6B,MA7F7B,EA6FqC,cA7FrC,EA6FqD,SA7FrD,EA6FgE,SA7FhE,EA6F2E,KA7F3E,EA8FnB,UA9FmB,EA8FP,UA9FO,CAArB;AAAA,MA+FG3C,aAAa,GAAGiC,MAAM,CAACU,cAAD,CA/FzB;AAiGA,MAAIC,QAAQ,GAAGV,cAAc,CAACjoE,MAAf,CAAsBkoE,WAAtB,EAAmCloE,MAAnC,CAA0CmoE,cAA1C,EAA0DnoE,MAA1D,CAAiEooE,mBAAjE,EACZpoE,MADY,CACLqoE,iBADK,EACcroE,MADd,CACqBsoE,4BADrB,EACmDtoE,MADnD,CAC0DyoE,cAD1D,EAEZzoE,MAFY,CAEL0oE,cAFK,CAAf;AAGA1kB,EAAAA,UAAU,CAACiW,cAAX,CAA0B,WAA1B,EAAuC,KAAvC,EAA8C0O,QAA9C;;AAEA,WAASC,aAAT,CAAuB9+C,MAAvB,EAA+B1G,KAA/B,EAAsC;AACpC,QAAI+gD,QAAQ,GAAG,KAAf;AAAA,QAAsBtoD,EAAtB;;AACA,WAAO,CAACA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAN,KAAwB,IAA/B,EAAqC;AACnC,UAAIkgD,QAAQ,IAAItoD,EAAE,IAAI,GAAtB,EAA2B;AACzBuH,QAAAA,KAAK,CAAC0/C,QAAN,GAAiB,IAAjB;AACA;AACD;;AACDqB,MAAAA,QAAQ,GAAItoD,EAAE,IAAI,GAAlB;AACD;;AACD,WAAO,CAAC,SAAD,EAAY,SAAZ,CAAP;AACD;;AAEDmoC,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,UAAtB,EAAkC;AAChCgjD,IAAAA,aAAa,EAAEA,aADiB;AAEhCC,IAAAA,UAAU,EAAEA,UAFoB;AAGhCC,IAAAA,aAAa,EAAEA,aAHiB;AAIhCC,IAAAA,kBAAkB,EAAEA,kBAJY;AAKhCL,IAAAA,gBAAgB,EAAEA,gBALc;AAMhCM,IAAAA,2BAA2B,EAAEA,2BANG;AAOhCC,IAAAA,cAAc,EAAEA,cAPgB;AAQhCC,IAAAA,kBAAkB,EAAEA,kBARY;AAShCC,IAAAA,aAAa,EAAEA,aATiB;AAUhCC,IAAAA,aAAa,EAAEA,aAViB;AAWhCT,IAAAA,UAAU,EAAE;AACV,WAAK,UAASx7C,MAAT,EAAiB1G,KAAjB,EAAwB;AAC3B,YAAI,CAAC0G,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAL,EAAsB,OAAO,KAAP;AACtBd,QAAAA,KAAK,CAAC0/C,QAAN,GAAiB8F,aAAjB;AACA,eAAOA,aAAa,CAAC9+C,MAAD,EAAS1G,KAAT,CAApB;AACD;AALS,KAXoB;AAkBhC9Z,IAAAA,IAAI,EAAE;AAlB0B,GAAlC;AAqBA06C,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,aAAtB,EAAqC;AACnCijD,IAAAA,UAAU,EAAEA,UADuB;AAEnCC,IAAAA,aAAa,EAAEA,aAFoB;AAGnCC,IAAAA,kBAAkB,EAAEA,kBAHe;AAInCL,IAAAA,gBAAgB,EAAEA,gBAJiB;AAKnCM,IAAAA,2BAA2B,EAAEA,2BALM;AAMnCG,IAAAA,aAAa,EAAEA,aANoB;AAOnCC,IAAAA,aAAa,EAAEA,aAPoB;AAQnCH,IAAAA,cAAc,EAAEA,cARmB;AASnCI,IAAAA,WAAW,EAAE,IATsB;AAUnCC,IAAAA,WAAW,EAAE,IAVsB;AAWnCX,IAAAA,UAAU,EAAE;AACV,WAAK,UAASx7C,MAAT,EAAiB1G,KAAjB,EAAwB;AAC3B,YAAI0G,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnB4F,UAAAA,MAAM,CAACxF,SAAP;AACA,iBAAO,CAAC,SAAD,EAAY,SAAZ,CAAP;AACD,SAHD,MAGO,IAAIwF,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AAC1Bd,UAAAA,KAAK,CAAC0/C,QAAN,GAAiB8F,aAAjB;AACA,iBAAOA,aAAa,CAAC9+C,MAAD,EAAS1G,KAAT,CAApB;AACD,SAHM,MAGA;AACL,iBAAO,CAAC,UAAD,EAAa,UAAb,CAAP;AACD;AACF,OAXS;AAYV,WAAK,UAAS0G,MAAT,EAAiB;AACpB,YAAIA,MAAM,CAACvW,KAAP,CAAa,QAAb,EAAuB,KAAvB,CAAJ,EACE,OAAO,CAAC,IAAD,EAAO,IAAP,CAAP;AACF,eAAO,KAAP;AACD,OAhBS;AAiBV,WAAK,UAASuW,MAAT,EAAiB;AACpBA,QAAAA,MAAM,CAACvW,KAAP,CAAa,SAAb;AACA,YAAIuW,MAAM,CAACvW,KAAP,CAAa,OAAb,EAAsB,KAAtB,CAAJ,EACE,OAAO,CAAC,YAAD,EAAe,qBAAf,CAAP;AACF,eAAO,CAAC,YAAD,EAAe,UAAf,CAAP;AACD,OAtBS;AAuBV,WAAK,UAASuW,MAAT,EAAiB;AACpB,YAAI,CAACA,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAL,EAAsB,OAAO,KAAP;AACtB,eAAO,CAAC,IAAD,EAAO,eAAP,CAAP;AACD;AA1BS,KAXuB;AAuCnC5a,IAAAA,IAAI,EAAE,KAvC6B;AAwCnC0Z,IAAAA,UAAU,EAAE;AAxCuB,GAArC;AA2CAghC,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,aAAtB,EAAqC;AACnCijD,IAAAA,UAAU,EAAEA,UADuB;AAEnCC,IAAAA,aAAa,EAAEA,aAFoB;AAGnCC,IAAAA,kBAAkB,EAAEA,kBAHe;AAInCL,IAAAA,gBAAgB,EAAEA,gBAJiB;AAKnCM,IAAAA,2BAA2B,EAAEA,2BALM;AAMnCG,IAAAA,aAAa,EAAEA,aANoB;AAOnCC,IAAAA,aAAa,EAAEA,aAPoB;AAQnCH,IAAAA,cAAc,EAAEA,cARmB;AASnCI,IAAAA,WAAW,EAAE,IATsB;AAUnCC,IAAAA,WAAW,EAAE,IAVsB;AAWnCX,IAAAA,UAAU,EAAE;AACV,WAAK,UAASx7C,MAAT,EAAiB1G,KAAjB,EAAwB;AAC3B,YAAI0G,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnB4F,UAAAA,MAAM,CAACxF,SAAP;AACA,iBAAO,CAAC,SAAD,EAAY,SAAZ,CAAP;AACD,SAHD,MAGO,IAAIwF,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AAC1Bd,UAAAA,KAAK,CAAC0/C,QAAN,GAAiB8F,aAAjB;AACA,iBAAOA,aAAa,CAAC9+C,MAAD,EAAS1G,KAAT,CAApB;AACD,SAHM,MAGA;AACL,iBAAO,CAAC,UAAD,EAAa,UAAb,CAAP;AACD;AACF,OAXS;AAYV,WAAK,UAAS0G,MAAT,EAAiB;AACpB,YAAIA,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB,OAAO,CAAC,IAAD,EAAO,eAAP,CAAP;AACrB,YAAI4F,MAAM,CAACvW,KAAP,CAAa,uGAAb,EAAsH,KAAtH,CAAJ,EAAkI,OAAO,KAAP;AAClIuW,QAAAA,MAAM,CAAC1F,QAAP,CAAgB,UAAhB;AACA,YAAI0F,MAAM,CAACvW,KAAP,CAAa,OAAb,EAAsB,KAAtB,CAAJ,EACE,OAAO,CAAC,YAAD,EAAe,qBAAf,CAAP;AACF,eAAO,CAAC,YAAD,EAAe,UAAf,CAAP;AACD,OAnBS;AAoBV,WAAK,YAAW;AACd,eAAO,CAAC,MAAD,EAAS,MAAT,CAAP;AACD;AAtBS,KAXuB;AAmCnCjK,IAAAA,IAAI,EAAE,KAnC6B;AAoCnC0Z,IAAAA,UAAU,EAAE;AApCuB,GAArC;AAuCAghC,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,YAAtB,EAAoC;AAClCgjD,IAAAA,aAAa,EAAEA,aADmB;AAElCC,IAAAA,UAAU,EAAEA,UAFsB;AAGlCC,IAAAA,aAAa,EAAEA,aAHmB;AAIlCJ,IAAAA,gBAAgB,EAAEA,gBAJgB;AAKlCM,IAAAA,2BAA2B,EAAEA,2BALK;AAMlCC,IAAAA,cAAc,EAAEA,cANkB;AAOlCC,IAAAA,kBAAkB,EAAEA,kBAPc;AAQlCC,IAAAA,aAAa,EAAEA,aARmB;AASlCC,IAAAA,aAAa,EAAEA,aATmB;AAUlCG,IAAAA,mBAAmB,EAAE,IAVa;AAWlCZ,IAAAA,UAAU,EAAE;AACV,WAAK,UAASx7C,MAAT,EAAiB1G,KAAjB,EAAwB;AAC3B,YAAI,CAAC0G,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAL,EAAsB,OAAO,KAAP;AACtBd,QAAAA,KAAK,CAAC0/C,QAAN,GAAiB8F,aAAjB;AACA,eAAOA,aAAa,CAAC9+C,MAAD,EAAS1G,KAAT,CAApB;AACD;AALS,KAXsB;AAkBlC9Z,IAAAA,IAAI,EAAE,KAlB4B;AAmBlC0Z,IAAAA,UAAU,EAAE;AAnBsB,GAApC;AAsBD;;ACp1BD,SAAS6lD,GAAT,CAAa7kB,UAAb,EAAyB;AAEzB,MAAI8kB,UAAU,GAAG;AACfC,IAAAA,eAAe,EAAE;AAAC,cAAQ,IAAT;AAAe,cAAQ,IAAvB;AAA6B,YAAM,IAAnC;AAAyC,aAAO,IAAhD;AAAsD,iBAAW,IAAjE;AACC,eAAS,IADV;AACgB,eAAS,IADzB;AAC+B,YAAM,IADrC;AAC2C,aAAO,IADlD;AACwD,eAAS,IADjE;AAEC,gBAAU,IAFX;AAEiB,cAAQ,IAFzB;AAE+B,cAAQ,IAFvC;AAE6C,eAAS,IAFtD;AAE4D,gBAAU,IAFtE;AAGC,eAAS,IAHV;AAGgB,aAAO,IAHvB;AAG6B,kBAAY;AAHzC,KADF;AAKfC,IAAAA,gBAAgB,EAAE;AAAC,YAAM,IAAP;AAAa,YAAM,IAAnB;AAAyB,kBAAY,IAArC;AAA2C,gBAAU,IAArD;AAA2D,WAAK,IAAhE;AACC,YAAM,IADP;AACa,YAAM,IADnB;AACyB,eAAS,IADlC;AACwC,YAAM,IAD9C;AACoD,eAAS,IAD7D;AAEC,YAAM,IAFP;AAEa,YAAM;AAFnB,KALH;AAQfC,IAAAA,eAAe,EAAE;AACf,YAAM;AAAC,cAAM,IAAP;AAAa,cAAM;AAAnB,OADS;AAEf,YAAM;AAAC,cAAM,IAAP;AAAa,cAAM;AAAnB,OAFS;AAGf,YAAM;AAAC,cAAM;AAAP,OAHS;AAIf,gBAAU;AAAC,kBAAU,IAAX;AAAiB,oBAAY;AAA7B,OAJK;AAKf,kBAAY;AAAC,oBAAY;AAAb,OALG;AAMf,WAAK;AAAC,mBAAW,IAAZ;AAAkB,mBAAW,IAA7B;AAAmC,iBAAS,IAA5C;AAAkD,sBAAc,IAAhE;AAAsE,eAAO,IAA7E;AACC,eAAO,IADR;AACc,cAAM,IADpB;AAC0B,oBAAY,IADtC;AAC4C,kBAAU,IADtD;AAC4D,gBAAQ,IADpE;AAEC,cAAM,IAFP;AAEa,cAAM,IAFnB;AAEyB,cAAM,IAF/B;AAEqC,cAAM,IAF3C;AAEiD,cAAM,IAFvD;AAE6D,cAAM,IAFnE;AAGC,kBAAU,IAHX;AAGiB,kBAAU,IAH3B;AAGiC,cAAM,IAHvC;AAG6C,gBAAQ,IAHrD;AAG2D,eAAO,IAHlE;AAGwE,cAAM,IAH9E;AAIC,aAAK,IAJN;AAIY,eAAO,IAJnB;AAIyB,mBAAW,IAJpC;AAI0C,iBAAS,IAJnD;AAIyD,cAAM;AAJ/D,OANU;AAWf,YAAM;AAAC,cAAM,IAAP;AAAa,cAAM;AAAnB,OAXS;AAYf,YAAM;AAAC,cAAM,IAAP;AAAa,cAAM;AAAnB,OAZS;AAaf,eAAS;AAAC,iBAAS,IAAV;AAAgB,iBAAS;AAAzB,OAbM;AAcf,YAAM;AAAC,cAAM,IAAP;AAAa,cAAM;AAAnB,OAdS;AAef,eAAS;AAAC,iBAAS;AAAV,OAfM;AAgBf,YAAM;AAAC,cAAM,IAAP;AAAa,cAAM;AAAnB,OAhBS;AAiBf,eAAS;AAAC,iBAAS,IAAV;AAAgB,iBAAS;AAAzB,OAjBM;AAkBf,YAAM;AAAC,cAAM;AAAP;AAlBS,KARF;AA4BfC,IAAAA,WAAW,EAAE;AAAC,aAAO;AAAR,KA5BE;AA6BfC,IAAAA,aAAa,EAAE,IA7BA;AA8BfC,IAAAA,YAAY,EAAE,IA9BC;AA+BfC,IAAAA,QAAQ,EAAE;AA/BK,GAAjB;AAkCA,MAAIC,SAAS,GAAG;AACdP,IAAAA,eAAe,EAAE,EADH;AAEdC,IAAAA,gBAAgB,EAAE,EAFJ;AAGdC,IAAAA,eAAe,EAAE,EAHH;AAIdC,IAAAA,WAAW,EAAE,EAJC;AAKdC,IAAAA,aAAa,EAAE,KALD;AAMdC,IAAAA,YAAY,EAAE,KANA;AAOdG,IAAAA,mBAAmB,EAAE,KAPP;AAQdF,IAAAA,QAAQ,EAAE;AARI,GAAhB;AAWArlB,EAAAA,UAAU,CAAC5hC,UAAX,CAAsB,KAAtB,EAA6B,UAASonD,UAAT,EAAqBC,OAArB,EAA8B;AACzD,QAAIrU,UAAU,GAAGoU,UAAU,CAACpU,UAA5B;AACA,QAAI8P,MAAM,GAAG,EAAb;AACA,QAAInT,QAAQ,GAAG0X,OAAO,CAACC,QAAR,GAAmBZ,UAAnB,GAAgCQ,SAA/C;;AACA,SAAK,IAAIrwD,IAAT,IAAiB84C,QAAjB,EAA2BmT,MAAM,CAACjsD,IAAD,CAAN,GAAe84C,QAAQ,CAAC94C,IAAD,CAAvB;;AAC3B,SAAK,IAAIA,IAAT,IAAiBwwD,OAAjB,EAA0BvE,MAAM,CAACjsD,IAAD,CAAN,GAAewwD,OAAO,CAACxwD,IAAD,CAAtB,CAL+B;;;AAQzD,QAAI3tB,IAAJ,EAAUq+E,QAAV;;AAEA,aAASC,MAAT,CAAgB9/C,MAAhB,EAAwB1G,KAAxB,EAA+B;AAC7B,eAASy/C,KAAT,CAAegH,MAAf,EAAuB;AACrBzmD,QAAAA,KAAK,CAAC0/C,QAAN,GAAiB+G,MAAjB;AACA,eAAOA,MAAM,CAAC//C,MAAD,EAAS1G,KAAT,CAAb;AACD;;AAED,UAAIvH,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAT;;AACA,UAAIpI,EAAE,IAAI,GAAV,EAAe;AACb,YAAIiO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnB,cAAI4F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnB,gBAAI4F,MAAM,CAACvW,KAAP,CAAa,QAAb,CAAJ,EAA4B,OAAOsvD,KAAK,CAACiH,OAAO,CAAC,MAAD,EAAS,KAAT,CAAR,CAAZ,CAA5B,KACK,OAAO,IAAP;AACN,WAHD,MAGO,IAAIhgD,MAAM,CAACvW,KAAP,CAAa,IAAb,CAAJ,EAAwB;AAC7B,mBAAOsvD,KAAK,CAACiH,OAAO,CAAC,SAAD,EAAY,KAAZ,CAAR,CAAZ;AACD,WAFM,MAEA,IAAIhgD,MAAM,CAACvW,KAAP,CAAa,SAAb,EAAwB,IAAxB,EAA8B,IAA9B,CAAJ,EAAyC;AAC9CuW,YAAAA,MAAM,CAAC1F,QAAP,CAAgB,WAAhB;AACA,mBAAOy+C,KAAK,CAACzuD,OAAO,CAAC,CAAD,CAAR,CAAZ;AACD,WAHM,MAGA;AACL,mBAAO,IAAP;AACD;AACF,SAZD,MAYO,IAAI0V,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AAC1B4F,UAAAA,MAAM,CAAC1F,QAAP,CAAgB,WAAhB;AACAhB,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBgH,OAAO,CAAC,MAAD,EAAS,IAAT,CAAxB;AACA,iBAAO,MAAP;AACD,SAJM,MAIA;AACLx+E,UAAAA,IAAI,GAAGw+B,MAAM,CAAC5F,GAAP,CAAW,GAAX,IAAkB,UAAlB,GAA+B,SAAtC;AACAd,UAAAA,KAAK,CAAC0/C,QAAN,GAAiBiH,KAAjB;AACA,iBAAO,aAAP;AACD;AACF,OAtBD,MAsBO,IAAIluD,EAAE,IAAI,GAAV,EAAe;AACpB,YAAIsI,EAAJ;;AACA,YAAI2F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnB,cAAI4F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAJ,EAAqB;AACnBC,YAAAA,EAAE,GAAG2F,MAAM,CAAC1F,QAAP,CAAgB,YAAhB,KAAiC0F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAtC;AACD,WAFD,MAEO;AACLC,YAAAA,EAAE,GAAG2F,MAAM,CAAC1F,QAAP,CAAgB,MAAhB,KAA2B0F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAAhC;AACD;AACF,SAND,MAMO;AACLC,UAAAA,EAAE,GAAG2F,MAAM,CAAC1F,QAAP,CAAgB,WAAhB,KAAgC0F,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAArC;AACD;;AACD,eAAOC,EAAE,GAAG,MAAH,GAAY,OAArB;AACD,OAZM,MAYA;AACL2F,QAAAA,MAAM,CAAC1F,QAAP,CAAgB,OAAhB;AACA,eAAO,IAAP;AACD;AACF;;AACDwlD,IAAAA,MAAM,CAACI,QAAP,GAAkB,IAAlB;;AAEA,aAASD,KAAT,CAAejgD,MAAf,EAAuB1G,KAAvB,EAA8B;AAC5B,UAAIvH,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAT;;AACA,UAAIpI,EAAE,IAAI,GAAN,IAAcA,EAAE,IAAI,GAAN,IAAaiO,MAAM,CAAC5F,GAAP,CAAW,GAAX,CAA/B,EAAiD;AAC/Cd,QAAAA,KAAK,CAAC0/C,QAAN,GAAiB8G,MAAjB;AACAt+E,QAAAA,IAAI,GAAGuwB,EAAE,IAAI,GAAN,GAAY,QAAZ,GAAuB,cAA9B;AACA,eAAO,aAAP;AACD,OAJD,MAIO,IAAIA,EAAE,IAAI,GAAV,EAAe;AACpBvwB,QAAAA,IAAI,GAAG,QAAP;AACA,eAAO,IAAP;AACD,OAHM,MAGA,IAAIuwB,EAAE,IAAI,GAAV,EAAe;AACpBuH,QAAAA,KAAK,CAAC0/C,QAAN,GAAiB8G,MAAjB;AACAxmD,QAAAA,KAAK,CAACA,KAAN,GAAc6mD,SAAd;AACA7mD,QAAAA,KAAK,CAACne,OAAN,GAAgBme,KAAK,CAAC8mD,QAAN,GAAiB,IAAjC;AACA,YAAIjmD,IAAI,GAAGb,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAX;AACA,eAAOa,IAAI,GAAGA,IAAI,GAAG,YAAV,GAAyB,WAApC;AACD,OANM,MAMA,IAAI,SAASjU,IAAT,CAAc6L,EAAd,CAAJ,EAAuB;AAC5BuH,QAAAA,KAAK,CAAC0/C,QAAN,GAAiBqH,WAAW,CAACtuD,EAAD,CAA5B;AACAuH,QAAAA,KAAK,CAACgnD,cAAN,GAAuBtgD,MAAM,CAACrF,MAAP,EAAvB;AACA,eAAOrB,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAP;AACD,OAJM,MAIA;AACL0G,QAAAA,MAAM,CAACvW,KAAP,CAAa,0CAAb;AACA,eAAO,MAAP;AACD;AACF;;AAED,aAAS42D,WAAT,CAAqB7F,KAArB,EAA4B;AAC1B,UAAI+F,OAAO,GAAG,UAASvgD,MAAT,EAAiB1G,KAAjB,EAAwB;AACpC,eAAO,CAAC0G,MAAM,CAAChG,GAAP,EAAR,EAAsB;AACpB,cAAIgG,MAAM,CAAC7F,IAAP,MAAiBqgD,KAArB,EAA4B;AAC1BlhD,YAAAA,KAAK,CAAC0/C,QAAN,GAAiBiH,KAAjB;AACA;AACD;AACF;;AACD,eAAO,QAAP;AACD,OARD;;AASAM,MAAAA,OAAO,CAACC,aAAR,GAAwB,IAAxB;AACA,aAAOD,OAAP;AACD;;AAED,aAASP,OAAT,CAAiBr8E,KAAjB,EAAwB88E,UAAxB,EAAoC;AAClC,aAAO,UAASzgD,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,eAAO,CAAC0G,MAAM,CAAChG,GAAP,EAAR,EAAsB;AACpB,cAAIgG,MAAM,CAACvW,KAAP,CAAag3D,UAAb,CAAJ,EAA8B;AAC5BnnD,YAAAA,KAAK,CAAC0/C,QAAN,GAAiB8G,MAAjB;AACA;AACD;;AACD9/C,UAAAA,MAAM,CAAC7F,IAAP;AACD;;AACD,eAAOx2B,KAAP;AACD,OATD;AAUD;;AAED,aAAS2mB,OAAT,CAAiBo2D,KAAjB,EAAwB;AACtB,aAAO,UAAS1gD,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,YAAIvH,EAAJ;;AACA,eAAO,CAACA,EAAE,GAAGiO,MAAM,CAAC7F,IAAP,EAAN,KAAwB,IAA/B,EAAqC;AACnC,cAAIpI,EAAE,IAAI,GAAV,EAAe;AACbuH,YAAAA,KAAK,CAAC0/C,QAAN,GAAiB1uD,OAAO,CAACo2D,KAAK,GAAG,CAAT,CAAxB;AACA,mBAAOpnD,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAP;AACD,WAHD,MAGO,IAAIvH,EAAE,IAAI,GAAV,EAAe;AACpB,gBAAI2uD,KAAK,IAAI,CAAb,EAAgB;AACdpnD,cAAAA,KAAK,CAAC0/C,QAAN,GAAiB8G,MAAjB;AACA;AACD,aAHD,MAGO;AACLxmD,cAAAA,KAAK,CAAC0/C,QAAN,GAAiB1uD,OAAO,CAACo2D,KAAK,GAAG,CAAT,CAAxB;AACA,qBAAOpnD,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAP;AACD;AACF;AACF;;AACD,eAAO,MAAP;AACD,OAjBD;AAkBD;;AAED,aAASmE,OAAT,CAAiBnE,KAAjB,EAAwBne,OAAxB,EAAiCwlE,WAAjC,EAA8C;AAC5C,WAAKvsD,IAAL,GAAYkF,KAAK,CAAC6E,OAAlB;AACA,WAAKhjB,OAAL,GAAeA,OAAO,IAAI,EAA1B;AACA,WAAKgwD,MAAL,GAAc7xC,KAAK,CAAC6H,QAApB;AACA,WAAKw/C,WAAL,GAAmBA,WAAnB;AACA,UAAIvF,MAAM,CAACgE,WAAP,CAAmBzjE,cAAnB,CAAkCR,OAAlC,KAA+Cme,KAAK,CAAC6E,OAAN,IAAiB7E,KAAK,CAAC6E,OAAN,CAAcyiD,QAAlF,EACE,KAAKA,QAAL,GAAgB,IAAhB;AACH;;AACD,aAASjE,UAAT,CAAoBrjD,KAApB,EAA2B;AACzB,UAAIA,KAAK,CAAC6E,OAAV,EAAmB7E,KAAK,CAAC6E,OAAN,GAAgB7E,KAAK,CAAC6E,OAAN,CAAc/J,IAA9B;AACpB;;AACD,aAASysD,eAAT,CAAyBvnD,KAAzB,EAAgCwnD,WAAhC,EAA6C;AAC3C,UAAIC,aAAJ;;AACA,aAAO,IAAP,EAAa;AACX,YAAI,CAACznD,KAAK,CAAC6E,OAAX,EAAoB;AAClB;AACD;;AACD4iD,QAAAA,aAAa,GAAGznD,KAAK,CAAC6E,OAAN,CAAchjB,OAA9B;;AACA,YAAI,CAACigE,MAAM,CAAC+D,eAAP,CAAuBxjE,cAAvB,CAAsColE,aAAtC,CAAD,IACA,CAAC3F,MAAM,CAAC+D,eAAP,CAAuB4B,aAAvB,EAAsCplE,cAAtC,CAAqDmlE,WAArD,CADL,EACwE;AACtE;AACD;;AACDnE,QAAAA,UAAU,CAACrjD,KAAD,CAAV;AACD;AACF;;AAED,aAAS6mD,SAAT,CAAmB3+E,IAAnB,EAAyBw+B,MAAzB,EAAiC1G,KAAjC,EAAwC;AACtC,UAAI93B,IAAI,IAAI,SAAZ,EAAuB;AACrB83B,QAAAA,KAAK,CAAC8mD,QAAN,GAAiBpgD,MAAM,CAACrF,MAAP,EAAjB;AACA,eAAOqmD,YAAP;AACD,OAHD,MAGO,IAAIx/E,IAAI,IAAI,UAAZ,EAAwB;AAC7B,eAAOy/E,iBAAP;AACD,OAFM,MAEA;AACL,eAAOd,SAAP;AACD;AACF;;AACD,aAASa,YAAT,CAAsBx/E,IAAtB,EAA4Bw+B,MAA5B,EAAoC1G,KAApC,EAA2C;AACzC,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAClB83B,QAAAA,KAAK,CAACne,OAAN,GAAgB6kB,MAAM,CAAC1T,OAAP,EAAhB;AACAuzD,QAAAA,QAAQ,GAAG,KAAX;AACA,eAAOqB,SAAP;AACD,OAJD,MAIO,IAAI9F,MAAM,CAACqE,mBAAP,IAA8Bj+E,IAAI,IAAI,QAA1C,EAAoD;AACzDq+E,QAAAA,QAAQ,GAAG,aAAX;AACA,eAAOqB,SAAS,CAAC1/E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAhB;AACD,OAHM,MAGA;AACLumD,QAAAA,QAAQ,GAAG,OAAX;AACA,eAAOmB,YAAP;AACD;AACF;;AACD,aAASC,iBAAT,CAA2Bz/E,IAA3B,EAAiCw+B,MAAjC,EAAyC1G,KAAzC,EAAgD;AAC9C,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAClB,YAAI2Z,OAAO,GAAG6kB,MAAM,CAAC1T,OAAP,EAAd;AACA,YAAIgN,KAAK,CAAC6E,OAAN,IAAiB7E,KAAK,CAAC6E,OAAN,CAAchjB,OAAd,IAAyBA,OAA1C,IACAigE,MAAM,CAAC8D,gBAAP,CAAwBvjE,cAAxB,CAAuC2d,KAAK,CAAC6E,OAAN,CAAchjB,OAArD,CADJ,EAEEwhE,UAAU,CAACrjD,KAAD,CAAV;;AACF,YAAKA,KAAK,CAAC6E,OAAN,IAAiB7E,KAAK,CAAC6E,OAAN,CAAchjB,OAAd,IAAyBA,OAA3C,IAAuDigE,MAAM,CAAC+F,YAAP,KAAwB,KAAnF,EAA0F;AACxFtB,UAAAA,QAAQ,GAAG,KAAX;AACA,iBAAOuB,UAAP;AACD,SAHD,MAGO;AACLvB,UAAAA,QAAQ,GAAG,WAAX;AACA,iBAAOwB,aAAP;AACD;AACF,OAZD,MAYO,IAAIjG,MAAM,CAACqE,mBAAP,IAA8Bj+E,IAAI,IAAI,QAA1C,EAAoD;AACzDq+E,QAAAA,QAAQ,GAAG,aAAX;AACA,eAAOuB,UAAU,CAAC5/E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AACD,OAHM,MAGA;AACLumD,QAAAA,QAAQ,GAAG,OAAX;AACA,eAAOwB,aAAP;AACD;AACF;;AAED,aAASD,UAAT,CAAoB5/E,IAApB,EAA0B47E,OAA1B,EAAmC9jD,KAAnC,EAA0C;AACxC,UAAI93B,IAAI,IAAI,QAAZ,EAAsB;AACpBq+E,QAAAA,QAAQ,GAAG,OAAX;AACA,eAAOuB,UAAP;AACD;;AACDzE,MAAAA,UAAU,CAACrjD,KAAD,CAAV;AACA,aAAO6mD,SAAP;AACD;;AACD,aAASkB,aAAT,CAAuB7/E,IAAvB,EAA6Bw+B,MAA7B,EAAqC1G,KAArC,EAA4C;AAC1CumD,MAAAA,QAAQ,GAAG,OAAX;AACA,aAAOuB,UAAU,CAAC5/E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAjB;AACD;;AAED,aAAS4nD,SAAT,CAAmB1/E,IAAnB,EAAyB47E,OAAzB,EAAkC9jD,KAAlC,EAAyC;AACvC,UAAI93B,IAAI,IAAI,MAAZ,EAAoB;AAClBq+E,QAAAA,QAAQ,GAAG,WAAX;AACA,eAAOyB,WAAP;AACD,OAHD,MAGO,IAAI9/E,IAAI,IAAI,QAAR,IAAoBA,IAAI,IAAI,cAAhC,EAAgD;AACrD,YAAI2Z,OAAO,GAAGme,KAAK,CAACne,OAApB;AAAA,YAA6BilE,QAAQ,GAAG9mD,KAAK,CAAC8mD,QAA9C;AACA9mD,QAAAA,KAAK,CAACne,OAAN,GAAgBme,KAAK,CAAC8mD,QAAN,GAAiB,IAAjC;;AACA,YAAI5+E,IAAI,IAAI,cAAR,IACA45E,MAAM,CAAC6D,eAAP,CAAuBtjE,cAAvB,CAAsCR,OAAtC,CADJ,EACoD;AAClD0lE,UAAAA,eAAe,CAACvnD,KAAD,EAAQne,OAAR,CAAf;AACD,SAHD,MAGO;AACL0lE,UAAAA,eAAe,CAACvnD,KAAD,EAAQne,OAAR,CAAf;AACAme,UAAAA,KAAK,CAAC6E,OAAN,GAAgB,IAAIV,OAAJ,CAAYnE,KAAZ,EAAmBne,OAAnB,EAA4BilE,QAAQ,IAAI9mD,KAAK,CAAC6H,QAA9C,CAAhB;AACD;;AACD,eAAOg/C,SAAP;AACD;;AACDN,MAAAA,QAAQ,GAAG,OAAX;AACA,aAAOqB,SAAP;AACD;;AACD,aAASI,WAAT,CAAqB9/E,IAArB,EAA2Bw+B,MAA3B,EAAmC1G,KAAnC,EAA0C;AACxC,UAAI93B,IAAI,IAAI,QAAZ,EAAsB,OAAO+/E,cAAP;AACtB,UAAI,CAACnG,MAAM,CAACkE,YAAZ,EAA0BO,QAAQ,GAAG,OAAX;AAC1B,aAAOqB,SAAS,CAAC1/E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAhB;AACD;;AACD,aAASioD,cAAT,CAAwB//E,IAAxB,EAA8Bw+B,MAA9B,EAAsC1G,KAAtC,EAA6C;AAC3C,UAAI93B,IAAI,IAAI,QAAZ,EAAsB,OAAOggF,kBAAP;;AACtB,UAAIhgF,IAAI,IAAI,MAAR,IAAkB45E,MAAM,CAACiE,aAA7B,EAA4C;AAACQ,QAAAA,QAAQ,GAAG,QAAX;AAAqB,eAAOqB,SAAP;AAAkB;;AACpFrB,MAAAA,QAAQ,GAAG,OAAX;AACA,aAAOqB,SAAS,CAAC1/E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAhB;AACD;;AACD,aAASkoD,kBAAT,CAA4BhgF,IAA5B,EAAkCw+B,MAAlC,EAA0C1G,KAA1C,EAAiD;AAC/C,UAAI93B,IAAI,IAAI,QAAZ,EAAsB,OAAOggF,kBAAP;AACtB,aAAON,SAAS,CAAC1/E,IAAD,EAAOw+B,MAAP,EAAe1G,KAAf,CAAhB;AACD;;AAED,WAAO;AACLI,MAAAA,UAAU,EAAE,UAAS+nD,UAAT,EAAqB;AAC/B,YAAInoD,KAAK,GAAG;AAAC0/C,UAAAA,QAAQ,EAAE8G,MAAX;AACCxmD,UAAAA,KAAK,EAAE6mD,SADR;AAECh/C,UAAAA,QAAQ,EAAEsgD,UAAU,IAAI,CAFzB;AAGCtmE,UAAAA,OAAO,EAAE,IAHV;AAGgBilE,UAAAA,QAAQ,EAAE,IAH1B;AAICjiD,UAAAA,OAAO,EAAE;AAJV,SAAZ;AAKA,YAAIsjD,UAAU,IAAI,IAAlB,EAAwBnoD,KAAK,CAACmoD,UAAN,GAAmBA,UAAnB;AACxB,eAAOnoD,KAAP;AACD,OATI;AAWL8G,MAAAA,KAAK,EAAE,UAASJ,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,YAAI,CAACA,KAAK,CAACne,OAAP,IAAkB6kB,MAAM,CAAC/F,GAAP,EAAtB,EACEX,KAAK,CAAC6H,QAAN,GAAiBnB,MAAM,CAACpF,WAAP,EAAjB;AAEF,YAAIoF,MAAM,CAACzF,QAAP,EAAJ,EAAuB,OAAO,IAAP;AACvB/4B,QAAAA,IAAI,GAAG,IAAP;AACA,YAAImC,KAAK,GAAG21B,KAAK,CAAC0/C,QAAN,CAAeh5C,MAAf,EAAuB1G,KAAvB,CAAZ;;AACA,YAAI,CAAC31B,KAAK,IAAInC,IAAV,KAAmBmC,KAAK,IAAI,SAAhC,EAA2C;AACzCk8E,UAAAA,QAAQ,GAAG,IAAX;AACAvmD,UAAAA,KAAK,CAACA,KAAN,GAAcA,KAAK,CAACA,KAAN,CAAY93B,IAAI,IAAImC,KAApB,EAA2Bq8B,MAA3B,EAAmC1G,KAAnC,CAAd;AACA,cAAIumD,QAAJ,EACEl8E,KAAK,GAAGk8E,QAAQ,IAAI,OAAZ,GAAsBl8E,KAAK,GAAG,QAA9B,GAAyCk8E,QAAjD;AACH;;AACD,eAAOl8E,KAAP;AACD,OAzBI;AA2BLwnE,MAAAA,MAAM,EAAE,UAAS7xC,KAAT,EAAgBwkD,SAAhB,EAA2B4D,QAA3B,EAAqC;AAC3C,YAAIvjD,OAAO,GAAG7E,KAAK,CAAC6E,OAApB,CAD2C;;AAG3C,YAAI7E,KAAK,CAAC0/C,QAAN,CAAewH,aAAnB,EAAkC;AAChC,cAAIlnD,KAAK,CAAC8mD,QAAN,IAAkB9mD,KAAK,CAAC6H,QAA5B,EACE,OAAO7H,KAAK,CAACgnD,cAAN,GAAuB,CAA9B,CADF,KAGE,OAAOhnD,KAAK,CAAC6H,QAAN,GAAiBmqC,UAAxB;AACH;;AACD,YAAIntC,OAAO,IAAIA,OAAO,CAACyiD,QAAvB,EAAiC,OAAO1mB,UAAU,CAAC7pC,IAAlB;AACjC,YAAIiJ,KAAK,CAAC0/C,QAAN,IAAkBiH,KAAlB,IAA2B3mD,KAAK,CAAC0/C,QAAN,IAAkB8G,MAAjD,EACE,OAAO4B,QAAQ,GAAGA,QAAQ,CAACj4D,KAAT,CAAe,QAAf,EAAyB,CAAzB,EAA4BjkB,MAA/B,GAAwC,CAAvD,CAXyC;;AAa3C,YAAI8zB,KAAK,CAACne,OAAV,EAAmB;AACjB,cAAIigE,MAAM,CAACuG,yBAAP,KAAqC,KAAzC,EACE,OAAOroD,KAAK,CAAC8mD,QAAN,GAAiB9mD,KAAK,CAACne,OAAN,CAAc3V,MAA/B,GAAwC,CAA/C,CADF,KAGE,OAAO8zB,KAAK,CAAC8mD,QAAN,GAAiB9U,UAAU,IAAI8P,MAAM,CAACwG,wBAAP,IAAmC,CAAvC,CAAlC;AACH;;AACD,YAAIxG,MAAM,CAACyG,UAAP,IAAqB,cAAc37D,IAAd,CAAmB43D,SAAnB,CAAzB,EAAwD,OAAO,CAAP;AACxD,YAAIgE,QAAQ,GAAGhE,SAAS,IAAI,sBAAsBj7D,IAAtB,CAA2Bi7D,SAA3B,CAA5B;;AACA,YAAIgE,QAAQ,IAAIA,QAAQ,CAAC,CAAD,CAAxB,EAA6B;AAAE;AAC7B,iBAAO3jD,OAAP,EAAgB;AACd,gBAAIA,OAAO,CAAChjB,OAAR,IAAmB2mE,QAAQ,CAAC,CAAD,CAA/B,EAAoC;AAClC3jD,cAAAA,OAAO,GAAGA,OAAO,CAAC/J,IAAlB;AACA;AACD,aAHD,MAGO,IAAIgnD,MAAM,CAAC8D,gBAAP,CAAwBvjE,cAAxB,CAAuCwiB,OAAO,CAAChjB,OAA/C,CAAJ,EAA6D;AAClEgjB,cAAAA,OAAO,GAAGA,OAAO,CAAC/J,IAAlB;AACD,aAFM,MAEA;AACL;AACD;AACF;AACF,SAXD,MAWO,IAAI0tD,QAAJ,EAAc;AAAE;AACrB,iBAAO3jD,OAAP,EAAgB;AACd,gBAAI4jD,QAAQ,GAAG3G,MAAM,CAAC+D,eAAP,CAAuBhhD,OAAO,CAAChjB,OAA/B,CAAf;AACA,gBAAI4mE,QAAQ,IAAIA,QAAQ,CAACpmE,cAAT,CAAwBmmE,QAAQ,CAAC,CAAD,CAAhC,CAAhB,EACE3jD,OAAO,GAAGA,OAAO,CAAC/J,IAAlB,CADF,KAGE;AACH;AACF;;AACD,eAAO+J,OAAO,IAAIA,OAAO,CAAC/J,IAAnB,IAA2B,CAAC+J,OAAO,CAACwiD,WAA3C,EACExiD,OAAO,GAAGA,OAAO,CAAC/J,IAAlB;;AACF,YAAI+J,OAAJ,EAAa,OAAOA,OAAO,CAACgtC,MAAR,GAAiBG,UAAxB,CAAb,KACK,OAAOhyC,KAAK,CAACmoD,UAAN,IAAoB,CAA3B;AACN,OAxEI;AA0EL3U,MAAAA,aAAa,EAAE,eA1EV;AA2ELoO,MAAAA,iBAAiB,EAAE,MA3Ed;AA4ELC,MAAAA,eAAe,EAAE,KA5EZ;AA8EL6G,MAAAA,aAAa,EAAE5G,MAAM,CAACwE,QAAP,GAAkB,MAAlB,GAA2B,KA9ErC;AA+EL1mD,MAAAA,UAAU,EAAEkiD,MAAM,CAACwE,QAAP,GAAkB,MAAlB,GAA2B,KA/ElC;AAiFLqC,MAAAA,aAAa,EAAE,UAAS3oD,KAAT,EAAgB;AAC7B,YAAIA,KAAK,CAACA,KAAN,IAAeioD,cAAnB,EACEjoD,KAAK,CAACA,KAAN,GAAc4nD,SAAd;AACH,OApFI;AAsFLgB,MAAAA,aAAa,EAAE,UAAS5oD,KAAT,EAAgB;AAC7B,eAAOA,KAAK,CAACne,OAAN,GAAgB;AAACqE,UAAAA,IAAI,EAAE8Z,KAAK,CAACne,OAAb;AAAsBlQ,UAAAA,KAAK,EAAEquB,KAAK,CAAC93B,IAAN,IAAc;AAA3C,SAAhB,GAAyE,IAAhF;AACD,OAxFI;AA0FL2gF,MAAAA,iBAAiB,EAAE,UAAS7oD,KAAT,EAAgB;AACjC,YAAI6E,OAAO,GAAG,EAAd;;AACA,aAAK,IAAI4/C,EAAE,GAAGzkD,KAAK,CAAC6E,OAApB,EAA6B4/C,EAA7B,EAAiCA,EAAE,GAAGA,EAAE,CAAC3pD,IAAzC,EACE+J,OAAO,CAACzoB,IAAR,CAAaqoE,EAAE,CAAC5iE,OAAhB;;AACF,eAAOgjB,OAAO,CAACvJ,OAAR,EAAP;AACD;AA/FI,KAAP;AAiGD,GA3VD;AA6VAslC,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,UAAtB,EAAkC,KAAlC;AACAyhC,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,iBAAtB,EAAyC,KAAzC;AACA,MAAI,CAACyhC,UAAU,CAAC7hC,SAAX,CAAqB1c,cAArB,CAAoC,WAApC,CAAL,EACEu+C,UAAU,CAACzhC,UAAX,CAAsB,WAAtB,EAAmC;AAACjZ,IAAAA,IAAI,EAAE,KAAP;AAAcogE,IAAAA,QAAQ,EAAE;AAAxB,GAAnC;AAED;;ACjZD,SAASwC,IAAT,CAAcloB,UAAd,EAA0B;AAExBA,EAAAA,UAAU,CAAC5hC,UAAX,CAAsB,MAAtB,EAA8B,UAAS+pD,OAAT,EAAkBhH,YAAlB,EAAgC;AAE5D,aAASiH,WAAT,CAAqBhpD,KAArB,EAA4Bzf,OAA5B,EAAqC;AACnCyf,MAAAA,KAAK,CAACipD,QAAN,CAAe7sE,IAAf,CAAoBmE,OAApB;AACD;;AAED,aAAS2oE,WAAT,CAAqBlpD,KAArB,EAA4B;AAC1B,UAAIA,KAAK,CAACipD,QAAN,CAAe/8E,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,eAAO8zB,KAAK,CAACipD,QAAN,CAAejpD,KAAK,CAACipD,QAAN,CAAe/8E,MAAf,GAAwB,CAAvC,CAAP;AACD,OAFD,MAEO;AACL,eAAO,IAAP;AACD;AACF;;AAED,aAASi9E,UAAT,CAAoBnpD,KAApB,EAA2B;AACzB,UAAIopD,IAAI,GAAGppD,KAAK,CAACipD,QAAN,CAAej+E,GAAf,EAAX;;AACA,UAAIo+E,IAAJ,EAAU;AACRA,QAAAA,IAAI,CAACC,YAAL;AACD;AACF,KAnB2D;;;AAsB5D,aAASC,eAAT,CAAyBtpD,KAAzB,EAAgC;AAC9B,UAAI6E,OAAO,GAAG7E,KAAK,CAACipD,QAApB;;AACA,WAAK,IAAIhsE,CAAC,GAAG4nB,OAAO,CAAC34B,MAAR,GAAiB,CAA9B,EAAiC+Q,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;AAC5C,YAAImsE,IAAI,GAAGvkD,OAAO,CAAC5nB,CAAD,CAAlB;;AACA,YAAImsE,IAAI,CAACljE,IAAL,IAAa,SAAjB,EAA4B;AAC1B;AACD;;AACD,eAAOkjE,IAAP;AACD;;AACD,aAAO;AAAEG,QAAAA,eAAe,EAAE,YAAW;AAAE,iBAAO,IAAP;AAAc;AAA9C,OAAP;AACD;;AAED,aAASC,gBAAT,CAA0BC,UAA1B,EAAsCC,QAAtC,EAAgD33E,MAAhD,EAAwD;AACtD,aAAO,YAAY;AACjB,aAAKmU,IAAL,GAAYujE,UAAZ;AACA,aAAKE,SAAL,GAAiB,CAAjB;AACA,aAAKt/E,KAAL,GAAaq/E,QAAb;AACA,aAAK33E,MAAL,GAAcA,MAAd;AACA,aAAK63E,QAAL,GAAgB,IAAhB,CALiB;;AAOjB,aAAKL,eAAL,GAAuB,YAAW;AAChC,iBAAO,KAAKx3E,MAAL,CAAY,KAAK43E,SAAL,GAAiB,CAA7B,KAAmC,IAA1C;AACD,SAFD;;AAGA,aAAKE,WAAL,GAAmB,YAAW;AAC5B,eAAKF,SAAL;AACA,iBAAO,SAAP;AACD,SAHD;;AAIA,aAAKN,YAAL,GAAoB,YAAW,EAA/B;AACD,OAfD;AAgBD;;AAED,QAAIS,OAAO,GAAG,EAAd;AAEAA,IAAAA,OAAO,CAAC,cAAD,CAAP,GAA0BN,gBAAgB,CAAC,cAAD,EAAiB,KAAjB,EAAwB,CAAC,QAAD,EAAW,SAAX,CAAxB,CAA1C;AACAM,IAAAA,OAAO,CAAC,eAAD,CAAP,GAA2BN,gBAAgB,CAAC,eAAD,EAAkB,KAAlB,EAAyB,CAAC,EAAD,EAAK,MAAL,CAAzB,CAA3C;AACAM,IAAAA,OAAO,CAAC,YAAD,CAAP,GAAwBN,gBAAgB,CAAC,YAAD,EAAe,KAAf,EAAsB,CAAC,MAAD,CAAtB,CAAxC;AACAM,IAAAA,OAAO,CAAC,OAAD,CAAP,GAAmBN,gBAAgB,CAAC,OAAD,EAAU,KAAV,EAAiB,CAAC,MAAD,CAAjB,CAAnC;AACAM,IAAAA,OAAO,CAAC,KAAD,CAAP,GAAiBN,gBAAgB,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAC,MAAD,CAAf,CAAjC;AAEAM,IAAAA,OAAO,CAAC,OAAD,CAAP,GAAuBN,gBAAgB,CAAC,OAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;AACAM,IAAAA,OAAO,CAAC,KAAD,CAAP,GAAuBN,gBAAgB,CAAC,KAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;AACAM,IAAAA,OAAO,CAAC,OAAD,CAAP,GAAuBN,gBAAgB,CAAC,OAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;AACAM,IAAAA,OAAO,CAAC,MAAD,CAAP,GAAuBN,gBAAgB,CAAC,MAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;AACAM,IAAAA,OAAO,CAAC,SAAD,CAAP,GAAuBN,gBAAgB,CAAC,SAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;AACAM,IAAAA,OAAO,CAAC,SAAD,CAAP,GAAuBN,gBAAgB,CAAC,SAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;AACAM,IAAAA,OAAO,CAAC,UAAD,CAAP,GAAuBN,gBAAgB,CAAC,UAAD,EAAc,KAAd,EAAqB,CAAC,MAAD,CAArB,CAAvC;;AAEAM,IAAAA,OAAO,CAAC,SAAD,CAAP,GAAqB,YAAY;AAC/B,WAAK5jE,IAAL,GAAY,SAAZ;AACA,WAAK7b,KAAL,GAAa,KAAb;;AAEA,WAAKk/E,eAAL,GAAuB,KAAKM,WAAL,GAAmB,KAAKR,YAAL,GAAoB,YAAW,EAAzE;AACD,KALD;;AAOA,aAASU,QAAT,CAAkB/pD,KAAlB,EAAyBxK,CAAzB,EAA4B;AAC1BwK,MAAAA,KAAK,CAACxK,CAAN,GAAUA,CAAV;AACD,KA9E2D;;;AAiF5D,aAASmJ,MAAT,CAAgB/qB,MAAhB,EAAwBosB,KAAxB,EAA+B;AAC7B,UAAIopD,IAAJ,CAD6B;;AAG7B,UAAIx1E,MAAM,CAACuc,KAAP,CAAa,eAAb,CAAJ,EAAmC;AACjC,YAAI65D,OAAO,GAAGp2E,MAAM,CAACof,OAAP,GAAiBhb,KAAjB,CAAuB,CAAvB,CAAd;AACAoxE,QAAAA,IAAI,GAAGU,OAAO,CAACznE,cAAR,CAAuB2nE,OAAvB,IAAkCF,OAAO,CAACE,OAAD,CAAzC,GAAqDF,OAAO,CAAC,SAAD,CAAnE;AACAV,QAAAA,IAAI,GAAG,IAAIA,IAAJ,EAAP;AACAJ,QAAAA,WAAW,CAAChpD,KAAD,EAAQopD,IAAR,CAAX;AACAW,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQiqD,WAAR,CAAR;AACA,eAAOb,IAAI,CAAC/+E,KAAZ;AACD,OAV4B;;;AAa7B,UAAIuJ,MAAM,CAACuc,KAAP,CAAa,cAAb,CAAJ,EAAkC;AAChC,eAAO,KAAP;AACD,OAf4B;;;AAkB7B,UAAIvc,MAAM,CAACuc,KAAP,CAAa,cAAb,CAAJ,EAAkC;AAChC,eAAO,KAAP;AACD,OApB4B;;;AAuB7B,UAAIvc,MAAM,CAACuc,KAAP,CAAa,KAAb,CAAJ,EAAyB;AACvB45D,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQ,UAASpsB,MAAT,EAAiBosB,KAAjB,EAAuB;AAAE,iBAAOkqD,UAAU,CAACt2E,MAAD,EAASosB,KAAT,EAAgB,KAAhB,CAAjB;AAA0C,SAA3E,CAAR;AACA,eAAO,SAAP;AACD;;AACD,UAAIpsB,MAAM,CAACuc,KAAP,CAAa,KAAb,CAAJ,EAAyB;AACvB45D,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQ,UAASpsB,MAAT,EAAiBosB,KAAjB,EAAuB;AAAE,iBAAOkqD,UAAU,CAACt2E,MAAD,EAASosB,KAAT,EAAgB,KAAhB,CAAjB;AAA0C,SAA3E,CAAR;AACA,eAAO,SAAP;AACD;;AACD,UAAIpsB,MAAM,CAACuc,KAAP,CAAa,IAAb,CAAJ,EAAwB;AACtB45D,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQ,UAASpsB,MAAT,EAAiBosB,KAAjB,EAAuB;AAAE,iBAAOkqD,UAAU,CAACt2E,MAAD,EAASosB,KAAT,EAAgB,IAAhB,CAAjB;AAAyC,SAA1E,CAAR;AACA,eAAO,SAAP;AACD;;AACD,UAAIpsB,MAAM,CAACuc,KAAP,CAAa,GAAb,CAAJ,EAAuB;AACrB45D,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQ,UAASpsB,MAAT,EAAiBosB,KAAjB,EAAuB;AAAE,iBAAOkqD,UAAU,CAACt2E,MAAD,EAASosB,KAAT,EAAgB,GAAhB,CAAjB;AAAwC,SAAzE,CAAR;AACA,eAAO,SAAP;AACD;;AAED,UAAIvH,EAAE,GAAG7kB,MAAM,CAACitB,IAAP,EAAT;;AACA,UAAIpI,EAAE,IAAI,GAAV,EAAe;AACb7kB,QAAAA,MAAM,CAACstB,SAAP;AACA,eAAO,SAAP;AACD,OAHD,MAGO,IAAIzI,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAvB,EAA4B;AACjC2wD,QAAAA,IAAI,GAAGF,WAAW,CAAClpD,KAAD,CAAlB;;AACA,YAAIopD,IAAJ,EAAU;AACRA,UAAAA,IAAI,CAACC,YAAL,CAAkB5wD,EAAlB;AACAsxD,UAAAA,QAAQ,CAAC/pD,KAAD,EAAQiqD,WAAR,CAAR;AACD,SAHD,MAGO;AACL,iBAAO,OAAP;AACD;;AACD,eAAO,SAAP;AACD,OATM,MASA,IAAIxxD,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAvB,EAA4B;AACjC2wD,QAAAA,IAAI,GAAGU,OAAO,CAAC,SAAD,CAAd;AACAV,QAAAA,IAAI,GAAG,IAAIA,IAAJ,EAAP;AACAJ,QAAAA,WAAW,CAAChpD,KAAD,EAAQopD,IAAR,CAAX;AACA,eAAO,SAAP;AACD,OALM,MAKA,IAAI,KAAKx8D,IAAL,CAAU6L,EAAV,CAAJ,EAAmB;AACxB7kB,QAAAA,MAAM,CAACotB,QAAP,CAAgB,QAAhB;AACA,eAAO,MAAP;AACD,OAHM,MAGA;AACLptB,QAAAA,MAAM,CAACotB,QAAP,CAAgB,SAAhB;AACAooD,QAAAA,IAAI,GAAGE,eAAe,CAACtpD,KAAD,CAAtB;;AACA,YAAIopD,IAAI,CAACljE,IAAL,IAAa,OAAjB,EAA0B;AACxBkjE,UAAAA,IAAI,CAACQ,QAAL,GAAgBh2E,MAAM,CAACof,OAAP,EAAhB;AACD;;AACD,eAAOo2D,IAAI,CAACG,eAAL,EAAP;AACD;AACF;;AAED,aAASW,UAAT,CAAoBt2E,MAApB,EAA4BosB,KAA5B,EAAmCmqD,UAAnC,EAA+C;AAC7C,UAAIv2E,MAAM,CAACqtB,QAAP,EAAJ,EAAuB;AACrB,eAAO,IAAP;AACD;;AACD,UAAIkpD,UAAU,IAAIv2E,MAAM,CAACuc,KAAP,CAAag6D,UAAb,CAAlB,EAA4C;AAC1CJ,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQrB,MAAR,CAAR;AACA,eAAO,SAAP;AACD;;AACD,UAAI/qB,MAAM,CAACuc,KAAP,CAAa,eAAb,CAAJ,EAAmC;AACjC,eAAO,KAAP;AACD;;AACD,UAAIvc,MAAM,CAACuc,KAAP,CAAa,YAAb,CAAJ,EAAgC;AAC9B,eAAO,YAAP;AACD,OAb4C;;;AAe7C,UAAIvc,MAAM,CAACuc,KAAP,CAAa,cAAb,CAAJ,EAAkC;AAChC,eAAO,KAAP;AACD,OAjB4C;;;AAmB7C,UAAIvc,MAAM,CAACuc,KAAP,CAAa,YAAb,CAAJ,EAAgC;AAC9B,eAAO,KAAP;AACD,OArB4C;;;AAuB7C,UAAIvc,MAAM,CAACuc,KAAP,CAAa,SAAb,CAAJ,EAA6B;AAC3B,eAAO,KAAP;AACD,OAzB4C;;;AA2B7C,UAAIvc,MAAM,CAACuc,KAAP,CAAa,0BAAb,CAAJ,EAA8C;AAC5C,eAAO,IAAP;AACD;;AACD,UAAIvc,MAAM,CAACuc,KAAP,CAAa,0BAAb,CAAJ,EAA8C;AAC5C,eAAO,QAAP;AACD;;AACD,UAAIsI,EAAE,GAAG7kB,MAAM,CAACitB,IAAP,EAAT;;AACA,UAAIpI,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAnB,IAA0BA,EAAE,IAAI,GAAhC,IAAuCA,EAAE,IAAI,GAA7C,IAAoDA,EAAE,IAAI,GAA1D,IAAiEA,EAAE,IAAI,GAA3E,EAAgF;AAC9E,eAAO,SAAP;AACD;;AAED,UAAIA,EAAE,IAAI,GAAV,EAAe;AACb7kB,QAAAA,MAAM,CAACstB,SAAP;AACA,eAAO,SAAP;AACD;;AACD,aAAO,OAAP;AACD;;AAED,aAAS+oD,WAAT,CAAqBr2E,MAArB,EAA6BosB,KAA7B,EAAoC;AAClC,UAAIvH,EAAE,GAAG7kB,MAAM,CAACgtB,IAAP,EAAT;AAAA,UAAwBwpD,QAAxB;;AACA,UAAI3xD,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAvB,EAA4B;AAC1B2xD,QAAAA,QAAQ,GAAGlB,WAAW,CAAClpD,KAAD,CAAtB;AACAoqD,QAAAA,QAAQ,CAACP,WAAT,CAAqBpxD,EAArB;AACA7kB,QAAAA,MAAM,CAACktB,GAAP,CAAWrI,EAAX;AACAsxD,QAAAA,QAAQ,CAAC/pD,KAAD,EAAQrB,MAAR,CAAR;AACA,eAAO,SAAP;AACD;;AACD,UAAI,UAAU/R,IAAV,CAAe6L,EAAf,CAAJ,EAAwB;AACtB7kB,QAAAA,MAAM,CAACktB,GAAP,CAAWrI,EAAX;AACA,eAAO,IAAP;AACD;;AACDsxD,MAAAA,QAAQ,CAAC/pD,KAAD,EAAQrB,MAAR,CAAR;AACAwqD,MAAAA,UAAU,CAACnpD,KAAD,CAAV;AAEA,aAAOrB,MAAM,CAAC/qB,MAAD,EAASosB,KAAT,CAAb;AACD;;AAED,WAAO;AACLI,MAAAA,UAAU,EAAE,YAAW;AACrB,YAAI5K,CAAC,GAAGusD,YAAY,CAACmI,UAAb,GAA0B,UAASt2E,MAAT,EAAiBosB,KAAjB,EAAuB;AAAE,iBAAOkqD,UAAU,CAACt2E,MAAD,EAASosB,KAAT,CAAjB;AAAmC,SAAtF,GAAyFrB,MAAjG;AACA,eAAO;AACLsqD,UAAAA,QAAQ,EAAE,EADL;AAELzzD,UAAAA,CAAC,EAAEA;AAFE,SAAP;AAID,OAPI;AAQLuK,MAAAA,SAAS,EAAE,UAASvU,CAAT,EAAY;AACrB,eAAO;AACLy9D,UAAAA,QAAQ,EAAEz9D,CAAC,CAACy9D,QAAF,CAAWjxE,KAAX,EADL;AAELwd,UAAAA,CAAC,EAAEhK,CAAC,CAACgK;AAFA,SAAP;AAID,OAbI;AAcLsR,MAAAA,KAAK,EAAE,UAASJ,MAAT,EAAiB1G,KAAjB,EAAwB;AAC7B,eAAOA,KAAK,CAACxK,CAAN,CAAQkR,MAAR,EAAgB1G,KAAhB,CAAP;AACD,OAhBI;AAiBL6G,MAAAA,SAAS,EAAE,UAAS7G,KAAT,EAAgB;AACzBA,QAAAA,KAAK,CAACxK,CAAN,GAAUmJ,MAAV;AACAqB,QAAAA,KAAK,CAACipD,QAAN,CAAe/8E,MAAf,GAAwB,CAAxB;AACD,OApBI;AAqBL22E,MAAAA,WAAW,EAAE;AArBR,KAAP;AAuBD,GA/OD;AAiPAjiB,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,aAAtB,EAAqC,MAArC;AACAyhC,EAAAA,UAAU,CAACzhC,UAAX,CAAsB,cAAtB,EAAsC,MAAtC;AAED;;ACtPD,SAASt2B,WAAT,CAAqB+3D,UAArB,EAAiC;AAC/BA,EAAAA,UAAU,CAACoO,YAAX,CAAwB,aAAxB,EAAuC,EAAvC,EAA2C,UAAS/yC,EAAT,EAAaiE,GAAb,EAAkB8I,GAAlB,EAAuB;AAChE,QAAIlO,IAAI,GAAGkO,GAAG,IAAIA,GAAG,IAAI43B,UAAU,CAAC8N,IAApC;;AACA,QAAIxuC,GAAG,IAAI,CAACpF,IAAZ,EAAkB;AAChBmB,MAAAA,EAAE,CAACP,EAAH,CAAM,MAAN,EAAcqnB,MAAd;AACA9mB,MAAAA,EAAE,CAACP,EAAH,CAAM,QAAN,EAAgB2uD,QAAhB;AACApuD,MAAAA,EAAE,CAACP,EAAH,CAAM,SAAN,EAAiB2uD,QAAjB;AACAzpB,MAAAA,UAAU,CAACllC,EAAX,CAAcO,EAAE,CAACkzC,aAAH,EAAd,EAAkC,mBAAlC,EAAuDlzC,EAAE,CAAC+D,KAAH,CAASsqD,kBAAT,GAA8B,YAAW;AAAEC,QAAAA,aAAa,CAACtuD,EAAD,CAAb;AAAoB,OAAtH;AACAouD,MAAAA,QAAQ,CAACpuD,EAAD,CAAR;AACD,KAND,MAMO,IAAI,CAACiE,GAAD,IAAQpF,IAAZ,EAAkB;AACvBmB,MAAAA,EAAE,CAACJ,GAAH,CAAO,MAAP,EAAeknB,MAAf;AACA9mB,MAAAA,EAAE,CAACJ,GAAH,CAAO,QAAP,EAAiBwuD,QAAjB;AACApuD,MAAAA,EAAE,CAACJ,GAAH,CAAO,SAAP,EAAkBwuD,QAAlB;AACAzpB,MAAAA,UAAU,CAAC/kC,GAAX,CAAeI,EAAE,CAACkzC,aAAH,EAAf,EAAmC,mBAAnC,EAAwDlzC,EAAE,CAAC+D,KAAH,CAASsqD,kBAAjE;AACAE,MAAAA,gBAAgB,CAACvuD,EAAD,CAAhB;AACA,UAAIuZ,OAAO,GAAGvZ,EAAE,CAACy6C,iBAAH,EAAd;AACAlhC,MAAAA,OAAO,CAACviB,SAAR,GAAoBuiB,OAAO,CAACviB,SAAR,CAAkBnoB,OAAlB,CAA0B,mBAA1B,EAA+C,EAA/C,CAApB;AACD;;AAED,QAAIo1B,GAAG,IAAI,CAACjE,EAAE,CAAC6mB,QAAH,EAAZ,EAA2BC,MAAM,CAAC9mB,EAAD,CAAN;AAC5B,GAnBD;;AAqBA,WAASuuD,gBAAT,CAA0BvuD,EAA1B,EAA8B;AAC5B,QAAIA,EAAE,CAAC+D,KAAH,CAASn3B,WAAb,EAA0B;AACxBozB,MAAAA,EAAE,CAAC+D,KAAH,CAASn3B,WAAT,CAAqBqN,UAArB,CAAgCyC,WAAhC,CAA4CsjB,EAAE,CAAC+D,KAAH,CAASn3B,WAArD;AACAozB,MAAAA,EAAE,CAAC+D,KAAH,CAASn3B,WAAT,GAAuB,IAAvB;AACD;AACF;;AACD,WAAS4hF,cAAT,CAAwBxuD,EAAxB,EAA4B;AAC1BuuD,IAAAA,gBAAgB,CAACvuD,EAAD,CAAhB;AACA,QAAIxI,GAAG,GAAGwI,EAAE,CAAC+D,KAAH,CAASn3B,WAAT,GAAuB4E,QAAQ,CAAC2E,aAAT,CAAuB,KAAvB,CAAjC;AACAqhB,IAAAA,GAAG,CAACppB,KAAJ,CAAUspB,OAAV,GAAoB,8BAApB;AACAF,IAAAA,GAAG,CAACppB,KAAJ,CAAU4P,SAAV,GAAsBgiB,EAAE,CAACxT,SAAH,CAAa,WAAb,CAAtB;AACAgL,IAAAA,GAAG,CAACR,SAAJ,GAAgB,6CAAhB;AACA,QAAIy3D,WAAW,GAAGzuD,EAAE,CAACxT,SAAH,CAAa,aAAb,CAAlB;AACA,QAAI,OAAOiiE,WAAP,IAAsB,QAA1B,EAAoCA,WAAW,GAAGj9E,QAAQ,CAACmmB,cAAT,CAAwB82D,WAAxB,CAAd;AACpCj3D,IAAAA,GAAG,CAAC9lB,WAAJ,CAAgB+8E,WAAhB;AACAzuD,IAAAA,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqB5C,YAArB,CAAkCxf,GAAlC,EAAuCwI,EAAE,CAACplB,OAAH,CAAWg/B,SAAX,CAAqBviB,UAA5D;AACD;;AAED,WAASi3D,aAAT,CAAuBtuD,EAAvB,EAA2B;AACzBtgB,IAAAA,UAAU,CAAC,YAAW;AACpB,UAAIskC,KAAK,GAAG,KAAZ;;AACA,UAAIhkB,EAAE,CAACgiC,SAAH,MAAkB,CAAtB,EAAyB;AACvB,YAAI/tB,KAAK,GAAGjU,EAAE,CAACkzC,aAAH,EAAZ;AACAlvB,QAAAA,KAAK,GAAG/P,KAAK,CAAC0d,QAAN,IAAkB,UAAlB,GAA+B,CAAC3xB,EAAE,CAAC+F,OAAH,CAAW,CAAX,EAAc91B,MAA9C,GACJ,CAAC,YAAY0gB,IAAZ,CAAiBsjB,KAAK,CAAC/5B,aAAN,CAAoB,kBAApB,EAAwC8W,WAAzD,CADL;AAED;;AACD,UAAIgzB,KAAJ,EAAWwqC,cAAc,CAACxuD,EAAD,CAAd,CAAX,KACKuuD,gBAAgB,CAACvuD,EAAD,CAAhB;AACN,KATS,EASP,EATO,CAAV;AAUD;;AAED,WAAS8mB,MAAT,CAAgB9mB,EAAhB,EAAoB;AAClB,QAAIrD,OAAO,CAACqD,EAAD,CAAX,EAAiBwuD,cAAc,CAACxuD,EAAD,CAAd;AAClB;;AACD,WAASouD,QAAT,CAAkBpuD,EAAlB,EAAsB;AACpB,QAAIuZ,OAAO,GAAGvZ,EAAE,CAACy6C,iBAAH,EAAd;AAAA,QAAsCz2B,KAAK,GAAGrnB,OAAO,CAACqD,EAAD,CAArD;AACAuZ,IAAAA,OAAO,CAACviB,SAAR,GAAoBuiB,OAAO,CAACviB,SAAR,CAAkBnoB,OAAlB,CAA0B,mBAA1B,EAA+C,EAA/C,KAAsDm1C,KAAK,GAAG,mBAAH,GAAyB,EAApF,CAApB;AAEA,QAAIA,KAAJ,EAAWwqC,cAAc,CAACxuD,EAAD,CAAd,CAAX,KACKuuD,gBAAgB,CAACvuD,EAAD,CAAhB;AACN;;AAED,WAASrD,OAAT,CAAiBqD,EAAjB,EAAqB;AACnB,WAAQA,EAAE,CAACgiC,SAAH,OAAmB,CAApB,IAA2BhiC,EAAE,CAAC+F,OAAH,CAAW,CAAX,MAAkB,EAApD;AACD;AACF;;ACnED,SAAS2oD,aAAT,CAAuB/pB,UAAvB,EAAmC;AACjC,MAAIgqB,MAAM,GAAG,UAAUh+D,IAAV,CAAetQ,SAAS,CAACC,SAAzB,MACV9O,QAAQ,CAACgkB,YAAT,IAAyB,IAAzB,IAAiChkB,QAAQ,CAACgkB,YAAT,GAAwB,CAD/C,CAAb;AAGA,MAAI8R,GAAG,GAAGq9B,UAAU,CAACr9B,GAArB;AAEA,MAAIsnD,QAAQ,GAAG;AAAC,SAAK,IAAN;AAAY,SAAK,IAAjB;AAAuB,SAAK,IAA5B;AAAkC,SAAK,IAAvC;AAA6C,SAAK,IAAlD;AAAwD,SAAK,IAA7D;AAAmE,SAAK,IAAxE;AAA8E,SAAK;AAAnF,GAAf;;AAEA,WAASC,YAAT,CAAsBhJ,MAAtB,EAA8B;AAC5B,WAAOA,MAAM,IAAIA,MAAM,CAACgJ,YAAjB,IAAiC,WAAxC;AACD;;AAED,WAASC,mBAAT,CAA6B9uD,EAA7B,EAAiC8jC,KAAjC,EAAwC+hB,MAAxC,EAAgD;AAC9C,QAAItmD,IAAI,GAAGS,EAAE,CAAC6hC,aAAH,CAAiBiC,KAAK,CAACvkC,IAAvB,CAAX;AAAA,QAAyClE,GAAG,GAAGyoC,KAAK,CAACtnC,EAAN,GAAW,CAA1D;AACA,QAAIuyD,WAAW,GAAGlJ,MAAM,IAAIA,MAAM,CAACkJ,WAAnC;AACA,QAAIA,WAAW,IAAI,IAAnB,EACEA,WAAW,GAAG,0BAA0Bp+D,IAA1B,CAA+BqP,EAAE,CAACy6C,iBAAH,GAAuBzjD,SAAtD,CAAd;AACF,QAAIg4D,EAAE,GAAGH,YAAY,CAAChJ,MAAD,CAArB,CAL8C;AAQ9C;AACA;AACA;;AACA,QAAI3xD,KAAK,GAAI,CAAC66D,WAAD,IAAgB1zD,GAAG,IAAI,CAAvB,IAA4B2zD,EAAE,CAACr+D,IAAH,CAAQ4O,IAAI,CAACpkB,IAAL,CAAU6hB,MAAV,CAAiB3B,GAAjB,CAAR,CAA5B,IAA8DuzD,QAAQ,CAACrvD,IAAI,CAACpkB,IAAL,CAAU6hB,MAAV,CAAiB3B,GAAjB,CAAD,CAAvE,IACR2zD,EAAE,CAACr+D,IAAH,CAAQ4O,IAAI,CAACpkB,IAAL,CAAU6hB,MAAV,CAAiB3B,GAAG,GAAG,CAAvB,CAAR,KAAsCuzD,QAAQ,CAACrvD,IAAI,CAACpkB,IAAL,CAAU6hB,MAAV,CAAiB,EAAE3B,GAAnB,CAAD,CADlD;AAEA,QAAI,CAACnH,KAAL,EAAY,OAAO,IAAP;AACZ,QAAIjD,GAAG,GAAGiD,KAAK,CAAC8I,MAAN,CAAa,CAAb,KAAmB,GAAnB,GAAyB,CAAzB,GAA6B,CAAC,CAAxC;AACA,QAAI6oD,MAAM,IAAIA,MAAM,CAACoJ,MAAjB,IAA4Bh+D,GAAG,GAAG,CAAP,KAAcoK,GAAG,IAAIyoC,KAAK,CAACtnC,EAA3B,CAA/B,EAA+D,OAAO,IAAP;AAC/D,QAAIpuB,KAAK,GAAG4xB,EAAE,CAACw4C,cAAH,CAAkBlxC,GAAG,CAACw8B,KAAK,CAACvkC,IAAP,EAAalE,GAAG,GAAG,CAAnB,CAArB,CAAZ;AAEA,QAAIoC,KAAK,GAAGyxD,cAAc,CAAClvD,EAAD,EAAKsH,GAAG,CAACw8B,KAAK,CAACvkC,IAAP,EAAalE,GAAG,IAAIpK,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAlB,CAAhB,CAAR,EAA+CA,GAA/C,EAAoD7iB,KAApD,EAA2Dy3E,MAA3D,CAA1B;AACA,QAAIpoD,KAAK,IAAI,IAAb,EAAmB,OAAO,IAAP;AACnB,WAAO;AAACnO,MAAAA,IAAI,EAAEgY,GAAG,CAACw8B,KAAK,CAACvkC,IAAP,EAAalE,GAAb,CAAV;AAA6B8B,MAAAA,EAAE,EAAEM,KAAK,IAAIA,KAAK,CAACpC,GAAhD;AACCnH,MAAAA,KAAK,EAAEuJ,KAAK,IAAIA,KAAK,CAACjB,EAAN,IAAYtI,KAAK,CAAC8I,MAAN,CAAa,CAAb,CAD7B;AAC8CmyD,MAAAA,OAAO,EAAEl+D,GAAG,GAAG;AAD7D,KAAP;AAED,GAlCgC;AAqCjC;AACA;AACA;AACA;AACA;AACA;;;AACA,WAASi+D,cAAT,CAAwBlvD,EAAxB,EAA4B8jC,KAA5B,EAAmC7yC,GAAnC,EAAwC7iB,KAAxC,EAA+Cy3E,MAA/C,EAAuD;AACrD,QAAIuJ,UAAU,GAAIvJ,MAAM,IAAIA,MAAM,CAACwJ,iBAAlB,IAAwC,KAAzD;AACA,QAAIC,YAAY,GAAIzJ,MAAM,IAAIA,MAAM,CAACyJ,YAAlB,IAAmC,IAAtD;AAEA,QAAI/J,KAAK,GAAG,EAAZ;AACA,QAAIyJ,EAAE,GAAGH,YAAY,CAAChJ,MAAD,CAArB;AACA,QAAIhb,OAAO,GAAG55C,GAAG,GAAG,CAAN,GAAUlY,IAAI,CAACyiB,GAAL,CAASsoC,KAAK,CAACvkC,IAAN,GAAa+vD,YAAtB,EAAoCtvD,EAAE,CAAC2Q,QAAH,KAAgB,CAApD,CAAV,GACU53B,IAAI,CAAC4kB,GAAL,CAASqC,EAAE,CAACk3B,SAAH,KAAiB,CAA1B,EAA6B4M,KAAK,CAACvkC,IAAN,GAAa+vD,YAA1C,CADxB;;AAEA,SAAK,IAAI1oD,MAAM,GAAGk9B,KAAK,CAACvkC,IAAxB,EAA8BqH,MAAM,IAAIikC,OAAxC,EAAiDjkC,MAAM,IAAI3V,GAA3D,EAAgE;AAC9D,UAAIsO,IAAI,GAAGS,EAAE,CAAC+F,OAAH,CAAWa,MAAX,CAAX;AACA,UAAI,CAACrH,IAAL,EAAW;AACX,UAAIlE,GAAG,GAAGpK,GAAG,GAAG,CAAN,GAAU,CAAV,GAAcsO,IAAI,CAACtvB,MAAL,GAAc,CAAtC;AAAA,UAAyC4S,GAAG,GAAGoO,GAAG,GAAG,CAAN,GAAUsO,IAAI,CAACtvB,MAAf,GAAwB,CAAC,CAAxE;AACA,UAAIsvB,IAAI,CAACtvB,MAAL,GAAcm/E,UAAlB,EAA8B;AAC9B,UAAIxoD,MAAM,IAAIk9B,KAAK,CAACvkC,IAApB,EAA0BlE,GAAG,GAAGyoC,KAAK,CAACtnC,EAAN,IAAYvL,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAA1B,CAAN;;AAC1B,aAAOoK,GAAG,IAAIxY,GAAd,EAAmBwY,GAAG,IAAIpK,GAA1B,EAA+B;AAC7B,YAAIuL,EAAE,GAAG+C,IAAI,CAACvC,MAAL,CAAY3B,GAAZ,CAAT;;AACA,YAAI2zD,EAAE,CAACr+D,IAAH,CAAQ6L,EAAR,MAAgBpuB,KAAK,KAAKM,SAAV,IACA,CAACsxB,EAAE,CAACw4C,cAAH,CAAkBlxC,GAAG,CAACV,MAAD,EAASvL,GAAG,GAAG,CAAf,CAArB,KAA2C,EAA5C,MAAoDjtB,KAAK,IAAI,EAA7D,CADhB,CAAJ,EACuF;AACrF,cAAI8lB,KAAK,GAAG06D,QAAQ,CAACpyD,EAAD,CAApB;AACA,cAAItI,KAAK,IAAKA,KAAK,CAAC8I,MAAN,CAAa,CAAb,KAAmB,GAApB,IAA6B/L,GAAG,GAAG,CAAhD,EAAoDs0D,KAAK,CAACplE,IAAN,CAAWqc,EAAX,EAApD,KACK,IAAI,CAAC+oD,KAAK,CAACt1E,MAAX,EAAmB,OAAO;AAACorB,YAAAA,GAAG,EAAEiM,GAAG,CAACV,MAAD,EAASvL,GAAT,CAAT;AAAwBmB,YAAAA,EAAE,EAAEA;AAA5B,WAAP,CAAnB,KACA+oD,KAAK,CAACx2E,GAAN;AACN;AACF;AACF;;AACD,WAAO63B,MAAM,GAAG3V,GAAT,KAAiBA,GAAG,GAAG,CAAN,GAAU+O,EAAE,CAAC2Q,QAAH,EAAV,GAA0B3Q,EAAE,CAACk3B,SAAH,EAA3C,IAA6D,KAA7D,GAAqE,IAA5E;AACD;;AAED,WAASq4B,aAAT,CAAuBvvD,EAAvB,EAA2BwvD,SAA3B,EAAsC3J,MAAtC,EAA8C;AAC5C;AACA,QAAI4J,eAAe,GAAGzvD,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBG,sBAAvB,IAAiD,IAAvE;AAAA,QACEC,oBAAoB,GAAG9J,MAAM,IAAIA,MAAM,CAAC8J,oBAD1C;AAEA,QAAIC,KAAK,GAAG,EAAZ;AAAA,QAAgB9rC,MAAM,GAAG9jB,EAAE,CAACiiC,cAAH,EAAzB;;AACA,SAAK,IAAIjhD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8iC,MAAM,CAAC7zC,MAA3B,EAAmC+Q,CAAC,EAApC,EAAwC;AACtC,UAAIkT,KAAK,GAAG4vB,MAAM,CAAC9iC,CAAD,CAAN,CAAUgjC,KAAV,MAAqB8qC,mBAAmB,CAAC9uD,EAAD,EAAK8jB,MAAM,CAAC9iC,CAAD,CAAN,CAAUvP,IAAf,EAAqBo0E,MAArB,CAApD;;AACA,UAAI3xD,KAAK,KAAKA,KAAK,CAACA,KAAN,IAAey7D,oBAAoB,KAAK,KAA7C,CAAL,IAA4D3vD,EAAE,CAAC+F,OAAH,CAAW7R,KAAK,CAAC5E,IAAN,CAAWiQ,IAAtB,EAA4BtvB,MAA5B,IAAsCw/E,eAAtG,EAAuH;AACrH,YAAIrhF,KAAK,GAAG8lB,KAAK,CAACA,KAAN,GAAc,4BAAd,GAA6C,+BAAzD;AACA07D,QAAAA,KAAK,CAACzvE,IAAN,CAAW6f,EAAE,CAACmgC,QAAH,CAAYjsC,KAAK,CAAC5E,IAAlB,EAAwBgY,GAAG,CAACpT,KAAK,CAAC5E,IAAN,CAAWiQ,IAAZ,EAAkBrL,KAAK,CAAC5E,IAAN,CAAWkN,EAAX,GAAgB,CAAlC,CAA3B,EAAiE;AAACxF,UAAAA,SAAS,EAAE5oB;AAAZ,SAAjE,CAAX;AACA,YAAI8lB,KAAK,CAACiJ,EAAN,IAAY6C,EAAE,CAAC+F,OAAH,CAAW7R,KAAK,CAACiJ,EAAN,CAASoC,IAApB,EAA0BtvB,MAA1B,IAAoCw/E,eAApD,EACEG,KAAK,CAACzvE,IAAN,CAAW6f,EAAE,CAACmgC,QAAH,CAAYjsC,KAAK,CAACiJ,EAAlB,EAAsBmK,GAAG,CAACpT,KAAK,CAACiJ,EAAN,CAASoC,IAAV,EAAgBrL,KAAK,CAACiJ,EAAN,CAASX,EAAT,GAAc,CAA9B,CAAzB,EAA2D;AAACxF,UAAAA,SAAS,EAAE5oB;AAAZ,SAA3D,CAAX;AACH;AACF;;AAED,QAAIwhF,KAAK,CAAC3/E,MAAV,EAAkB;AAChB;AACA;AACA,UAAI0+E,MAAM,IAAI3uD,EAAE,CAAC+D,KAAH,CAAS3Y,OAAvB,EAAgC4U,EAAE,CAAC/rB,KAAH;;AAEhC,UAAI6N,KAAK,GAAG,YAAW;AACrBke,QAAAA,EAAE,CAAC4vB,SAAH,CAAa,YAAW;AACtB,eAAK,IAAI5uC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4uE,KAAK,CAAC3/E,MAA1B,EAAkC+Q,CAAC,EAAnC,EAAuC4uE,KAAK,CAAC5uE,CAAD,CAAL,CAASc,KAAT;AACxC,SAFD;AAGD,OAJD;;AAKA,UAAI0tE,SAAJ,EAAe9vE,UAAU,CAACoC,KAAD,EAAQ,GAAR,CAAV,CAAf,KACK,OAAOA,KAAP;AACN;AACF;;AAED,WAAS+tE,eAAT,CAAyB7vD,EAAzB,EAA6B;AAC3BA,IAAAA,EAAE,CAAC4vB,SAAH,CAAa,YAAW;AACtB,UAAI5vB,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAA3B,EAAiD;AAC/C9vD,QAAAA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAAvB;AACA9vD,QAAAA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAAvB,GAA8C,IAA9C;AACD;;AACD9vD,MAAAA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAAvB,GAA8CP,aAAa,CAACvvD,EAAD,EAAK,KAAL,EAAYA,EAAE,CAAC+D,KAAH,CAASwrD,aAArB,CAA3D;AACD,KAND;AAOD;;AAED,WAASQ,gBAAT,CAA0B/vD,EAA1B,EAA8B;AAC5B,QAAIA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,IAA0BvvD,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAArD,EAA2E;AACzE9vD,MAAAA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAAvB;AACA9vD,MAAAA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,CAAuBO,oBAAvB,GAA8C,IAA9C;AACD;AACF;;AAEDnrB,EAAAA,UAAU,CAACoO,YAAX,CAAwB,eAAxB,EAAyC,KAAzC,EAAgD,UAAS/yC,EAAT,EAAaiE,GAAb,EAAkB8I,GAAlB,EAAuB;AACrE,QAAIA,GAAG,IAAIA,GAAG,IAAI43B,UAAU,CAAC8N,IAA7B,EAAmC;AACjCzyC,MAAAA,EAAE,CAACJ,GAAH,CAAO,gBAAP,EAAyBiwD,eAAzB;AACA7vD,MAAAA,EAAE,CAACJ,GAAH,CAAO,OAAP,EAAgBiwD,eAAhB;AACA7vD,MAAAA,EAAE,CAACJ,GAAH,CAAO,MAAP,EAAemwD,gBAAf;AACAA,MAAAA,gBAAgB,CAAC/vD,EAAD,CAAhB;AACD;;AACD,QAAIiE,GAAJ,EAAS;AACPjE,MAAAA,EAAE,CAAC+D,KAAH,CAASwrD,aAAT,GAAyB,OAAOtrD,GAAP,IAAc,QAAd,GAAyBA,GAAzB,GAA+B,EAAxD;AACAjE,MAAAA,EAAE,CAACP,EAAH,CAAM,gBAAN,EAAwBowD,eAAxB;AACA7vD,MAAAA,EAAE,CAACP,EAAH,CAAM,OAAN,EAAeowD,eAAf;AACA7vD,MAAAA,EAAE,CAACP,EAAH,CAAM,MAAN,EAAcswD,gBAAd;AACD;AACF,GAbD;AAeAprB,EAAAA,UAAU,CAACge,eAAX,CAA2B,eAA3B,EAA4C,YAAW;AAAC4M,IAAAA,aAAa,CAAC,IAAD,EAAO,IAAP,CAAb;AAA2B,GAAnF;AACA5qB,EAAAA,UAAU,CAACge,eAAX,CAA2B,qBAA3B,EAAkD,UAAStnD,GAAT,EAAcwqD,MAAd,EAAsBmK,SAAtB,EAAgC;AAChF;AACA,QAAIA,SAAS,IAAI,OAAOnK,MAAP,IAAiB,SAAlC,EAA6C;AAC3C,UAAI,CAACmK,SAAL,EAAgB;AACdnK,QAAAA,MAAM,GAAGA,MAAM,GAAG;AAACoJ,UAAAA,MAAM,EAAE;AAAT,SAAH,GAAoB,IAAnC;AACD,OAFD,MAEO;AACLe,QAAAA,SAAS,CAACf,MAAV,GAAmBpJ,MAAnB;AACAA,QAAAA,MAAM,GAAGmK,SAAT;AACD;AACF;;AACD,WAAOlB,mBAAmB,CAAC,IAAD,EAAOzzD,GAAP,EAAYwqD,MAAZ,CAA1B;AACD,GAXD;AAYAlhB,EAAAA,UAAU,CAACge,eAAX,CAA2B,gBAA3B,EAA6C,UAAStnD,GAAT,EAAcpK,GAAd,EAAmB7iB,KAAnB,EAA0By3E,MAA1B,EAAiC;AAC5E,WAAOqJ,cAAc,CAAC,IAAD,EAAO7zD,GAAP,EAAYpK,GAAZ,EAAiB7iB,KAAjB,EAAwBy3E,MAAxB,CAArB;AACD,GAFD;AAGD;;ACrJD,SAASoK,IAAT,CAActrB,UAAd,EAA0B;AACxB,MAAIurB,SAAS,GAAG,yBAAhB;AACA,MAAIC,YAAY,GAAG,uBAAnB;;AAEA,WAASC,WAAT,CAAqBpwD,EAArB,EAAyBxX,CAAzB,EAA4B7W,OAA5B,EAAqC;AACnC,QAAI0+E,EAAE,GAAG7+E,QAAQ,CAAC2E,aAAT,CAAuB,KAAvB,CAAT;AACAk6E,IAAAA,EAAE,CAACr5D,SAAH,GAAe,kCAAkCgJ,EAAE,CAAC5S,OAAH,CAAWwB,KAA5D;AACAyhE,IAAAA,EAAE,CAAC3+E,WAAH,CAAeC,OAAO,CAACgvD,SAAR,CAAkB,IAAlB,CAAf;AACA,QAAI3gC,EAAE,CAAC+D,KAAH,CAASksD,IAAT,CAAc7iE,OAAd,CAAsBkjE,WAA1B,EACEtwD,EAAE,CAACy6C,iBAAH,GAAuB/oE,WAAvB,CAAmC2+E,EAAnC,EADF,KAGE7+E,QAAQ,CAACkF,IAAT,CAAchF,WAAd,CAA0B2+E,EAA1B;;AAEF,aAAS3jF,QAAT,CAAkB8b,CAAlB,EAAqB;AACnB,UAAI,CAAC6nE,EAAE,CAACp2E,UAAR,EAAoB,OAAO0qD,UAAU,CAAC/kC,GAAX,CAAepuB,QAAf,EAAyB,WAAzB,EAAsC9E,QAAtC,CAAP;AACpB2jF,MAAAA,EAAE,CAACjiF,KAAH,CAAS+iB,GAAT,GAAepY,IAAI,CAAC4kB,GAAL,CAAS,CAAT,EAAYnV,CAAC,CAAC45B,OAAF,GAAYiuC,EAAE,CAACrzE,YAAf,GAA8B,CAA1C,IAA+C,IAA9D;AACAqzE,MAAAA,EAAE,CAACjiF,KAAH,CAASgU,IAAT,GAAiBoG,CAAC,CAAC25B,OAAF,GAAY,CAAb,GAAkB,IAAlC;AACD;;AACDwiB,IAAAA,UAAU,CAACllC,EAAX,CAAcjuB,QAAd,EAAwB,WAAxB,EAAqC9E,QAArC;AACAA,IAAAA,QAAQ,CAAC8b,CAAD,CAAR;AACA,QAAI6nE,EAAE,CAACjiF,KAAH,CAASmiF,OAAT,IAAoB,IAAxB,EAA8BF,EAAE,CAACjiF,KAAH,CAASmiF,OAAT,GAAmB,CAAnB;AAC9B,WAAOF,EAAP;AACD;;AACD,WAASz9B,EAAT,CAAYp7B,GAAZ,EAAiB;AACf,QAAIA,GAAG,CAACvd,UAAR,EAAoBud,GAAG,CAACvd,UAAJ,CAAeyC,WAAf,CAA2B8a,GAA3B;AACrB;;AACD,WAASg5D,WAAT,CAAqBH,EAArB,EAAyB;AACvB,QAAI,CAACA,EAAE,CAACp2E,UAAR,EAAoB;AACpB,QAAIo2E,EAAE,CAACjiF,KAAH,CAASmiF,OAAT,IAAoB,IAAxB,EAA8B39B,EAAE,CAACy9B,EAAD,CAAF;AAC9BA,IAAAA,EAAE,CAACjiF,KAAH,CAASmiF,OAAT,GAAmB,CAAnB;AACA7wE,IAAAA,UAAU,CAAC,YAAW;AAAEkzC,MAAAA,EAAE,CAACy9B,EAAD,CAAF;AAAS,KAAvB,EAAyB,GAAzB,CAAV;AACD;;AAED,WAASI,cAAT,CAAwBzwD,EAAxB,EAA4BxX,CAA5B,EAA+B7W,OAA/B,EAAwCmlB,IAAxC,EAA8C;AAC5C,QAAI45D,OAAO,GAAGN,WAAW,CAACpwD,EAAD,EAAKxX,CAAL,EAAQ7W,OAAR,CAAzB;;AACA,aAASiB,IAAT,GAAgB;AACd+xD,MAAAA,UAAU,CAAC/kC,GAAX,CAAe9I,IAAf,EAAqB,UAArB,EAAiClkB,IAAjC;;AACA,UAAI89E,OAAJ,EAAa;AAAEF,QAAAA,WAAW,CAACE,OAAD,CAAX;AAAsBA,QAAAA,OAAO,GAAG,IAAV;AAAiB;AACvD;;AACD,QAAIhT,IAAI,GAAG92B,WAAW,CAAC,YAAW;AAChC,UAAI8pC,OAAJ,EAAa,KAAK,IAAIv2D,CAAC,GAAGrD,IAAb,GAAoBqD,CAAC,GAAGA,CAAC,CAAClgB,UAA1B,EAAsC;AACjD,YAAIkgB,CAAC,IAAIA,CAAC,CAACzB,QAAF,IAAc,EAAvB,EAA2ByB,CAAC,GAAGA,CAAC,CAAC9pB,IAAN;AAC3B,YAAI8pB,CAAC,IAAI3oB,QAAQ,CAACkF,IAAlB,EAAwB;;AACxB,YAAI,CAACyjB,CAAL,EAAQ;AAAEvnB,UAAAA,IAAI;AAAI;AAAQ;AAC3B;AACD,UAAI,CAAC89E,OAAL,EAAc,OAAOnqC,aAAa,CAACm3B,IAAD,CAApB;AACf,KAPqB,EAOnB,GAPmB,CAAtB;AAQA/Y,IAAAA,UAAU,CAACllC,EAAX,CAAc3I,IAAd,EAAoB,UAApB,EAAgClkB,IAAhC;AACD;;AAED,WAAS+9E,SAAT,CAAmB3wD,EAAnB,EAAuB4wD,IAAvB,EAA6BC,SAA7B,EAAwC;AACtC,SAAKC,MAAL,GAAc,EAAd;AACA,QAAIF,IAAI,YAAYz4E,QAApB,EAA8By4E,IAAI,GAAG;AAACG,MAAAA,cAAc,EAAEH;AAAjB,KAAP;AAC9B,QAAI,CAACA,IAAD,IAASA,IAAI,KAAK,IAAtB,EAA4BA,IAAI,GAAG,EAAP;AAC5B,SAAKxjE,OAAL,GAAe,EAAf;AACA,SAAK4jE,aAAL,GAAqBJ,IAAI,CAACxjE,OAAL,IAAgB,EAArC;;AACA,SAAK,IAAIwM,IAAT,IAAiB84C,QAAjB,EAA2B,KAAKtlD,OAAL,CAAawM,IAAb,IAAqB84C,QAAQ,CAAC94C,IAAD,CAA7B;;AAC3B,SAAK,IAAIA,IAAT,IAAiBg3D,IAAjB,EAAuB;AACrB,UAAIle,QAAQ,CAACtsD,cAAT,CAAwBwT,IAAxB,CAAJ,EAAmC;AACjC,YAAIg3D,IAAI,CAACh3D,IAAD,CAAJ,IAAc,IAAlB,EAAwB,KAAKxM,OAAL,CAAawM,IAAb,IAAqBg3D,IAAI,CAACh3D,IAAD,CAAzB;AACzB,OAFD,MAEO,IAAI,CAACg3D,IAAI,CAACxjE,OAAV,EAAmB;AACxB,aAAK4jE,aAAL,CAAmBp3D,IAAnB,IAA2Bg3D,IAAI,CAACh3D,IAAD,CAA/B;AACD;AACF;;AACD,SAAKq3D,OAAL,GAAe,IAAf;AACA,SAAKJ,SAAL,GAAiBA,SAAjB;;AACA,SAAKK,WAAL,GAAmB,UAAS1oE,CAAT,EAAY;AAAE0oE,MAAAA,WAAW,CAAClxD,EAAD,EAAKxX,CAAL,CAAX;AAAqB,KAAtD;;AACA,SAAK2oE,UAAL,GAAkB,CAAlB;AACD;;AAED,MAAIze,QAAQ,GAAG;AACb0e,IAAAA,cAAc,EAAE,KADH;AAEbC,IAAAA,QAAQ,EAAE,IAFG;AAGb9kC,IAAAA,KAAK,EAAE,GAHM;AAIb+kC,IAAAA,YAAY,EAAE,IAJD;AAKbP,IAAAA,cAAc,EAAE,IALH;AAMbQ,IAAAA,KAAK,EAAE,KANM;AAObjB,IAAAA,WAAW,EAAE,IAPA;AAQbkB,IAAAA,gBAAgB,EAAE,IARL;AASbC,IAAAA,eAAe,EAAE;AATJ,GAAf;;AAYA,WAASC,UAAT,CAAoB1xD,EAApB,EAAwB;AACtB,QAAI+D,KAAK,GAAG/D,EAAE,CAAC+D,KAAH,CAASksD,IAArB;AACA,QAAIlsD,KAAK,CAAC8sD,SAAV,EAAqB7wD,EAAE,CAAC2jC,WAAH,CAAeusB,SAAf;AACrB,QAAInsD,KAAK,CAAC3W,OAAN,CAAcgkE,cAAlB,EAAkCO,eAAe,CAAC3xD,EAAD,CAAf;;AAClC,SAAK,IAAIhf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+iB,KAAK,CAAC+sD,MAAN,CAAa7gF,MAAjC,EAAyC,EAAE+Q,CAA3C,EACE+iB,KAAK,CAAC+sD,MAAN,CAAa9vE,CAAb,EAAgBc,KAAhB;;AACFiiB,IAAAA,KAAK,CAAC+sD,MAAN,CAAa7gF,MAAb,GAAsB,CAAtB;AACD;;AAED,WAAS0hF,eAAT,CAAyB3xD,EAAzB,EAA6B;AAC3BA,IAAAA,EAAE,CAACilC,QAAH,CAAY,UAAS1lC,IAAT,EAAe;AACzB,UAAI3V,GAAG,GAAG2V,IAAI,CAAC6X,SAAL,IAAkB,+BAA+B9pB,IAA/B,CAAoCiS,IAAI,CAAC6X,SAAzC,CAA5B;AACA,UAAIxtB,GAAJ,EAASoW,EAAE,CAAC+jC,eAAH,CAAmBxkC,IAAnB,EAAyB,MAAzB,EAAiC3V,GAAG,CAAC,CAAD,CAApC;AACV,KAHD;AAID;;AAED,WAASgoE,UAAT,CAAoB5xD,EAApB,EAAwB6xD,MAAxB,EAAgCC,QAAhC,EAA0CC,QAA1C,EAAoDV,QAApD,EAA8D;AAC5D,QAAIllD,MAAM,GAAG36B,QAAQ,CAAC2E,aAAT,CAAuB,KAAvB,CAAb;AAAA,QAA4CwvB,KAAK,GAAGwG,MAApD;AACAA,IAAAA,MAAM,CAACnV,SAAP,GAAmB,mDAAmD86D,QAAtE;;AACA,QAAIC,QAAJ,EAAc;AACZpsD,MAAAA,KAAK,GAAGwG,MAAM,CAACz6B,WAAP,CAAmBF,QAAQ,CAAC2E,aAAT,CAAuB,KAAvB,CAAnB,CAAR;AACAwvB,MAAAA,KAAK,CAAC3O,SAAN,GAAkB,wDAAlB;AACD;;AAED,QAAIq6D,QAAQ,IAAI,KAAhB,EAAuB1sB,UAAU,CAACllC,EAAX,CAAckG,KAAd,EAAqB,WAArB,EAAkC,UAASnd,CAAT,EAAY;AACnEioE,MAAAA,cAAc,CAACzwD,EAAD,EAAKxX,CAAL,EAAQqpE,MAAR,EAAgBlsD,KAAhB,CAAd;AACD,KAFsB;AAIvB,WAAOwG,MAAP;AACD;;AAED,WAAS6lD,cAAT,CAAwBjpE,CAAxB,EAA2BiQ,CAA3B,EAA8B;AAC5B,QAAIjQ,CAAC,IAAI,OAAT,EAAkB,OAAOA,CAAP,CAAlB,KACK,OAAOiQ,CAAP;AACN;;AAED,WAASi5D,WAAT,CAAqBC,WAArB,EAAkC;AAChC,QAAI/rD,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAInlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkxE,WAAW,CAACjiF,MAAhC,EAAwC,EAAE+Q,CAA1C,EAA6C;AAC3C,UAAImxE,GAAG,GAAGD,WAAW,CAAClxE,CAAD,CAArB;AAAA,UAA0Bue,IAAI,GAAG4yD,GAAG,CAAC7iE,IAAJ,CAASiQ,IAA1C;AACA,OAAC4G,KAAK,CAAC5G,IAAD,CAAL,KAAgB4G,KAAK,CAAC5G,IAAD,CAAL,GAAc,EAA9B,CAAD,EAAoCpf,IAApC,CAAyCgyE,GAAzC;AACD;;AACD,WAAOhsD,KAAP;AACD;;AAED,WAASisD,iBAAT,CAA2BD,GAA3B,EAAgC;AAC9B,QAAIL,QAAQ,GAAGK,GAAG,CAACL,QAAnB;AACA,QAAI,CAACA,QAAL,EAAeA,QAAQ,GAAG,OAAX;AACf,QAAIO,GAAG,GAAG7gF,QAAQ,CAAC2E,aAAT,CAAuB,KAAvB,CAAV;AACAk8E,IAAAA,GAAG,CAACr7D,SAAJ,GAAgB,qDAAqD86D,QAArE;;AACA,QAAI,OAAOK,GAAG,CAACG,WAAX,IAA0B,WAA9B,EAA2C;AACzCD,MAAAA,GAAG,CAACj8E,SAAJ,GAAgB+7E,GAAG,CAACG,WAApB;AACD,KAFD,MAEO;AACLD,MAAAA,GAAG,CAAC3gF,WAAJ,CAAgBF,QAAQ,CAACmmB,cAAT,CAAwBw6D,GAAG,CAACI,OAA5B,CAAhB;AACD;;AACD,WAAOF,GAAP;AACD;;AAED,WAASG,SAAT,CAAmBxyD,EAAnB,EAAuB+wD,cAAvB,EAAuC;AACrC,QAAIhtD,KAAK,GAAG/D,EAAE,CAAC+D,KAAH,CAASksD,IAArB;AACA,QAAI1yE,EAAE,GAAG,EAAEwmB,KAAK,CAACotD,UAAjB;;AACA,aAASsB,KAAT,GAAiB;AACfl1E,MAAAA,EAAE,GAAG,CAAC,CAAN;AACAyiB,MAAAA,EAAE,CAACJ,GAAH,CAAO,QAAP,EAAiB6yD,KAAjB;AACD;;AACDzyD,IAAAA,EAAE,CAACP,EAAH,CAAM,QAAN,EAAgBgzD,KAAhB;AACA1B,IAAAA,cAAc,CAAC/wD,EAAE,CAACyhC,QAAH,EAAD,EAAgB,UAASywB,WAAT,EAAsBQ,IAAtB,EAA4B;AACxD1yD,MAAAA,EAAE,CAACJ,GAAH,CAAO,QAAP,EAAiB6yD,KAAjB;AACA,UAAI1uD,KAAK,CAACotD,UAAN,IAAoB5zE,EAAxB,EAA4B;AAC5B,UAAIm1E,IAAI,IAAIR,WAAW,YAAYvtB,UAAnC,EAA+CutB,WAAW,GAAGQ,IAAd;AAC/C1yD,MAAAA,EAAE,CAAC4vB,SAAH,CAAa,YAAW;AAAC+iC,QAAAA,aAAa,CAAC3yD,EAAD,EAAKkyD,WAAL,CAAb;AAAgC,OAAzD;AACD,KALa,EAKXnuD,KAAK,CAACitD,aALK,EAKUhxD,EALV,CAAd;AAMD;;AAED,WAAS4yD,YAAT,CAAsB5yD,EAAtB,EAA0B;AACxB,QAAI+D,KAAK,GAAG/D,EAAE,CAAC+D,KAAH,CAASksD,IAArB;AACA,QAAI,CAAClsD,KAAL,EAAY;AACZ,QAAI3W,OAAO,GAAG2W,KAAK,CAAC3W,OAApB;AACA;AACJ;AACA;AACA;;AACI,QAAI2jE,cAAc,GAAG3jE,OAAO,CAAC2jE,cAAR,IAA0B/wD,EAAE,CAACy4C,SAAH,CAAa9T,UAAU,CAACr9B,GAAX,CAAe,CAAf,EAAkB,CAAlB,CAAb,EAAmC,MAAnC,CAA/C;AACA,QAAI,CAACypD,cAAL,EAAqB;;AACrB,QAAI3jE,OAAO,CAACmkE,KAAR,IAAiBR,cAAc,CAACQ,KAApC,EAA2C;AACzCiB,MAAAA,SAAS,CAACxyD,EAAD,EAAK+wD,cAAL,CAAT;AACD,KAFD,MAEO;AACL,UAAImB,WAAW,GAAGnB,cAAc,CAAC/wD,EAAE,CAACyhC,QAAH,EAAD,EAAgB19B,KAAK,CAACitD,aAAtB,EAAqChxD,EAArC,CAAhC;AACA,UAAI,CAACkyD,WAAL,EAAkB;AAClB,UAAIA,WAAW,CAACW,IAAhB,EAAsBX,WAAW,CAACW,IAAZ,CAAiB,UAASC,MAAT,EAAiB;AACtD9yD,QAAAA,EAAE,CAAC4vB,SAAH,CAAa,YAAW;AAAC+iC,UAAAA,aAAa,CAAC3yD,EAAD,EAAK8yD,MAAL,CAAb;AAA2B,SAApD;AACD,OAFqB,EAAtB,KAGK9yD,EAAE,CAAC4vB,SAAH,CAAa,YAAW;AAAC+iC,QAAAA,aAAa,CAAC3yD,EAAD,EAAKkyD,WAAL,CAAb;AAAgC,OAAzD;AACN;AACF;;AAED,WAASS,aAAT,CAAuB3yD,EAAvB,EAA2B+yD,oBAA3B,EAAiD;AAC/C,QAAIhvD,KAAK,GAAG/D,EAAE,CAAC+D,KAAH,CAASksD,IAArB;AACA,QAAI,CAAClsD,KAAL,EAAY;AACZ,QAAI3W,OAAO,GAAG2W,KAAK,CAAC3W,OAApB;AACAskE,IAAAA,UAAU,CAAC1xD,EAAD,CAAV;AAEA,QAAIkyD,WAAW,GAAGD,WAAW,CAACc,oBAAD,CAA7B;;AAEA,SAAK,IAAIxzD,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAG2yD,WAAW,CAACjiF,MAAtC,EAA8C,EAAEsvB,IAAhD,EAAsD;AACpD,UAAIyzD,IAAI,GAAGd,WAAW,CAAC3yD,IAAD,CAAtB;AACA,UAAI,CAACyzD,IAAL,EAAW,SAFyC;;AAKpD,UAAIT,OAAO,GAAG,EAAd;AACAS,MAAAA,IAAI,GAAGA,IAAI,CAACttE,MAAL,CAAY,UAASpJ,IAAT,EAAe;AAAE,eAAOi2E,OAAO,CAACtyE,OAAR,CAAgB3D,IAAI,CAACi2E,OAArB,IAAgC,CAAC,CAAjC,GAAqC,KAArC,GAA6CA,OAAO,CAACpyE,IAAR,CAAa7D,IAAI,CAACi2E,OAAlB,CAApD;AAAgF,OAA7G,CAAP;AAEA,UAAIU,WAAW,GAAG,IAAlB;AACA,UAAIC,QAAQ,GAAGnvD,KAAK,CAAC8sD,SAAN,IAAmBr/E,QAAQ,CAAC8hC,sBAAT,EAAlC;;AAEA,WAAK,IAAItyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgyE,IAAI,CAAC/iF,MAAzB,EAAiC,EAAE+Q,CAAnC,EAAsC;AACpC,YAAImxE,GAAG,GAAGa,IAAI,CAAChyE,CAAD,CAAd;AACA,YAAI8wE,QAAQ,GAAGK,GAAG,CAACL,QAAnB;AACA,YAAI,CAACA,QAAL,EAAeA,QAAQ,GAAG,OAAX;AACfmB,QAAAA,WAAW,GAAGjB,cAAc,CAACiB,WAAD,EAAcnB,QAAd,CAA5B;AAEA,YAAI1kE,OAAO,CAACokE,gBAAZ,EAA8BW,GAAG,GAAG/kE,OAAO,CAACokE,gBAAR,CAAyBW,GAAzB,CAAN;AAC9B,YAAIpuD,KAAK,CAAC8sD,SAAV,EAAqBqC,QAAQ,CAACxhF,WAAT,CAAqB0gF,iBAAiB,CAACD,GAAD,CAAtC;AAErB,YAAIA,GAAG,CAACh1D,EAAR,EAAY4G,KAAK,CAAC+sD,MAAN,CAAa3wE,IAAb,CAAkB6f,EAAE,CAACmgC,QAAH,CAAYgyB,GAAG,CAAC7iE,IAAhB,EAAsB6iE,GAAG,CAACh1D,EAA1B,EAA8B;AAC1DnG,UAAAA,SAAS,EAAE,+CAA+C86D,QADA;AAE1DqB,UAAAA,YAAY,EAAEhB;AAF4C,SAA9B,CAAlB;AAIb,OAxBmD;;;AA0BpD,UAAIpuD,KAAK,CAAC8sD,SAAV,EACE7wD,EAAE,CAACyjC,eAAH,CAAmBlkC,IAAnB,EAAyB2wD,SAAzB,EAAoC0B,UAAU,CAAC5xD,EAAD,EAAKkzD,QAAL,EAAeD,WAAf,EAA4Bf,WAAW,CAAC3yD,IAAD,CAAX,CAAkBtvB,MAAlB,GAA2B,CAAvD,EACCmd,OAAO,CAACikE,QADT,CAA9C;AAGF,UAAIjkE,OAAO,CAACgkE,cAAZ,EACEpxD,EAAE,CAAC6jC,YAAH,CAAgBtkC,IAAhB,EAAsB,MAAtB,EAA8B4wD,YAAY,GAAG8C,WAA7C;AACH;;AACD,QAAI7lE,OAAO,CAACqkE,eAAZ,EAA6BrkE,OAAO,CAACqkE,eAAR,CAAwBsB,oBAAxB,EAA8Cb,WAA9C,EAA2DlyD,EAA3D;AAC9B;;AAED,WAASouD,QAAT,CAAkBpuD,EAAlB,EAAsB;AACpB,QAAI+D,KAAK,GAAG/D,EAAE,CAAC+D,KAAH,CAASksD,IAArB;AACA,QAAI,CAAClsD,KAAL,EAAY;AACZpJ,IAAAA,YAAY,CAACoJ,KAAK,CAACktD,OAAP,CAAZ;AACAltD,IAAAA,KAAK,CAACktD,OAAN,GAAgBvxE,UAAU,CAAC,YAAU;AAACkzE,MAAAA,YAAY,CAAC5yD,EAAD,CAAZ;AAAkB,KAA9B,EAAgC+D,KAAK,CAAC3W,OAAN,CAAcm/B,KAA9C,CAA1B;AACD;;AAED,WAAS6mC,aAAT,CAAuBpzD,EAAvB,EAA2BkyD,WAA3B,EAAwC1pE,CAAxC,EAA2C;AACzC,QAAIjN,MAAM,GAAGiN,CAAC,CAACjN,MAAF,IAAYiN,CAAC,CAAC7C,UAA3B;AACA,QAAI+qE,OAAO,GAAGl/E,QAAQ,CAAC8hC,sBAAT,EAAd;;AACA,SAAK,IAAItyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkxE,WAAW,CAACjiF,MAAhC,EAAwC+Q,CAAC,EAAzC,EAA6C;AAC3C,UAAImxE,GAAG,GAAGD,WAAW,CAAClxE,CAAD,CAArB;AACA0vE,MAAAA,OAAO,CAACh/E,WAAR,CAAoB0gF,iBAAiB,CAACD,GAAD,CAArC;AACD;;AACD1B,IAAAA,cAAc,CAACzwD,EAAD,EAAKxX,CAAL,EAAQkoE,OAAR,EAAiBn1E,MAAjB,CAAd;AACD;;AAED,WAAS21E,WAAT,CAAqBlxD,EAArB,EAAyBxX,CAAzB,EAA4B;AAC1B,QAAIjN,MAAM,GAAGiN,CAAC,CAACjN,MAAF,IAAYiN,CAAC,CAAC7C,UAA3B;AACA,QAAI,CAAC,0BAA0BgL,IAA1B,CAA+BpV,MAAM,CAACyb,SAAtC,CAAL,EAAuD;AACvD,QAAIwpB,GAAG,GAAGjlC,MAAM,CAAChH,qBAAP,EAAV;AAAA,QAA0C4Q,CAAC,GAAG,CAACq7B,GAAG,CAACp+B,IAAJ,GAAWo+B,GAAG,CAACl+B,KAAhB,IAAyB,CAAvE;AAAA,QAA0EyF,CAAC,GAAG,CAACy4B,GAAG,CAACrvB,GAAJ,GAAUqvB,GAAG,CAACnF,MAAf,IAAyB,CAAvG;AACA,QAAIhP,KAAK,GAAGrM,EAAE,CAACmkC,WAAH,CAAenkC,EAAE,CAACggB,UAAH,CAAc;AAAC59B,MAAAA,IAAI,EAAE+C,CAAP;AAAUgM,MAAAA,GAAG,EAAEpJ;AAAf,KAAd,EAAiC,QAAjC,CAAf,CAAZ;AAEA,QAAImqE,WAAW,GAAG,EAAlB;;AACA,SAAK,IAAIlxE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrB,KAAK,CAACp8B,MAA1B,EAAkC,EAAE+Q,CAApC,EAAuC;AACrC,UAAImxE,GAAG,GAAG9lD,KAAK,CAACrrB,CAAD,CAAL,CAASmyE,YAAnB;AACA,UAAIhB,GAAJ,EAASD,WAAW,CAAC/xE,IAAZ,CAAiBgyE,GAAjB;AACV;;AACD,QAAID,WAAW,CAACjiF,MAAhB,EAAwBmjF,aAAa,CAACpzD,EAAD,EAAKkyD,WAAL,EAAkB1pE,CAAlB,CAAb;AACzB;;AAEDm8C,EAAAA,UAAU,CAACoO,YAAX,CAAwB,MAAxB,EAAgC,KAAhC,EAAuC,UAAS/yC,EAAT,EAAaiE,GAAb,EAAkB8I,GAAlB,EAAuB;AAC5D,QAAIA,GAAG,IAAIA,GAAG,IAAI43B,UAAU,CAAC8N,IAA7B,EAAmC;AACjCif,MAAAA,UAAU,CAAC1xD,EAAD,CAAV;AACA,UAAIA,EAAE,CAAC+D,KAAH,CAASksD,IAAT,CAAc7iE,OAAd,CAAsBkkE,YAAtB,KAAuC,KAA3C,EACEtxD,EAAE,CAACJ,GAAH,CAAO,QAAP,EAAiBwuD,QAAjB;AACFzpB,MAAAA,UAAU,CAAC/kC,GAAX,CAAeI,EAAE,CAACy6C,iBAAH,EAAf,EAAuC,WAAvC,EAAoDz6C,EAAE,CAAC+D,KAAH,CAASksD,IAAT,CAAciB,WAAlE;AACAv2D,MAAAA,YAAY,CAACqF,EAAE,CAAC+D,KAAH,CAASksD,IAAT,CAAcgB,OAAf,CAAZ;AACA,aAAOjxD,EAAE,CAAC+D,KAAH,CAASksD,IAAhB;AACD;;AAED,QAAIhsD,GAAJ,EAAS;AACP,UAAIqV,OAAO,GAAGtZ,EAAE,CAACxT,SAAH,CAAa,SAAb,CAAd;AAAA,UAAuC6mE,aAAa,GAAG,KAAvD;;AACA,WAAK,IAAIryE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs4B,OAAO,CAACrpC,MAA5B,EAAoC,EAAE+Q,CAAtC,EAAyC,IAAIs4B,OAAO,CAACt4B,CAAD,CAAP,IAAckvE,SAAlB,EAA6BmD,aAAa,GAAG,IAAhB;;AACtE,UAAItvD,KAAK,GAAG/D,EAAE,CAAC+D,KAAH,CAASksD,IAAT,GAAgB,IAAIU,SAAJ,CAAc3wD,EAAd,EAAkBiE,GAAlB,EAAuBovD,aAAvB,CAA5B;AACA,UAAItvD,KAAK,CAAC3W,OAAN,CAAckkE,YAAlB,EACEtxD,EAAE,CAACP,EAAH,CAAM,QAAN,EAAgB2uD,QAAhB;AACF,UAAIrqD,KAAK,CAAC3W,OAAN,CAAcikE,QAAd,IAA0B,KAA1B,IAAmCttD,KAAK,CAAC3W,OAAN,CAAcikE,QAAd,IAA0B,QAAjE,EACE1sB,UAAU,CAACllC,EAAX,CAAcO,EAAE,CAACy6C,iBAAH,EAAd,EAAsC,WAAtC,EAAmD12C,KAAK,CAACmtD,WAAzD;AAEF0B,MAAAA,YAAY,CAAC5yD,EAAD,CAAZ;AACD;AACF,GArBD;AAuBA2kC,EAAAA,UAAU,CAACge,eAAX,CAA2B,aAA3B,EAA0C,YAAW;AACnDiQ,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,GAFD;AAGD;;ACzQDU,MAAU,CAAC3uB,UAAD,CAAV;AACA4uB,GAAO,CAAC5uB,UAAD,CAAP;AACA6uB,GAAO,CAAC7uB,UAAD,CAAP;AACA8uB,IAAQ,CAAC9uB,UAAD,CAAR;AACA+uB,WAAuB,CAAC/uB,UAAD,CAAvB;AACAgvB,aAAqB,CAAChvB,UAAD,CAArB;AACAivB,IAAS,CAACjvB,UAAD,CAAT;;AAEA,eAAekvB,SAAf,CAAyBjlE,KAAzB,EAAgC;AAC5B,QAAMklE,QAAQ,GAAGC,UAAU,CAAC,oBAAD,CAAV,GAAoC,GAAEnlE,KAAM,MAA7D;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ,EAAyDS,KAAzD,EAAgEklE,QAAhE;AAEA,QAAME,aAAa,GAAG,MAAMC,KAAK,CAACH,QAAD,CAAL,CAAgBjB,IAAhB,CAAqB,MAAMqB,QAAN,IAAkBA,QAAQ,CAAC/4E,IAAT,EAAvC,EAAwDg5E,KAAxD,CAA8D3rE,CAAC,IAAI,EAAnE,CAA5B;AAEA,SAAO3c,MAAK,UAASmoF,aAAc,UAAnC;AACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,AAAO,MAAMI,YAAN,SAA2B1/E,UAA3B,CAAsC;AAExB,aAANoB,MAAM,GAAG;AAChB,WAAOC,KAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAxbQ;AAybH;;AAEoB,aAAVhK,UAAU,GAAG;AACpB,WAAO;AACH;AACZ;AACA;AACYsoF,MAAAA,OAAO,EAAE;AACLpoF,QAAAA,IAAI,EAAE6L;AADD,OAJN;;AAOH;AACZ;AACA;AACYoN,MAAAA,IAAI,EAAE;AACFjZ,QAAAA,IAAI,EAAEC,MADJ;AAEFooF,QAAAA,OAAO,EAAE;AAFP,OAVH;;AAcH;AACZ;AACA;AACYtxD,MAAAA,IAAI,EAAE;AACF/2B,QAAAA,IAAI,EAAEC;AADJ,OAjBH;;AAoBH;AACZ;AACA;AACYU,MAAAA,WAAW,EAAE;AACTX,QAAAA,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"}