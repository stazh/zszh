{"version":3,"file":"es-global-bridge-6abe3a88.js","sources":["../node_modules/@lrnwebcomponents/es-global-bridge/es-global-bridge.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\n\n/**\n * Object to help load things in globally scoped and fire events when ready\n */\nexport class ESGlobalBridge {\n  constructor() {\n    /**\n     * Load location and register it by name\n     */\n    this.load = (name, location, webpack = false) => {\n      //don't try to load file if a story.js is already working on importing the packed version of the file\n      let imported =\n          window.ESGlobalBridge.imports && window.ESGlobalBridge.imports[name],\n        importing =\n          !webpack &&\n          window.ESGlobalBridge.webpack &&\n          window.ESGlobalBridge.webpack[name];\n      if (!importing && !imported) {\n        return new Promise((resolve, reject) => {\n          const script = document.createElement(\"script\");\n          script.src = location;\n          script.setAttribute(\"data-name\", name);\n          window.ESGlobalBridge.imports[name] = location;\n          script.onload = () => {\n            resolve(window.ESGlobalBridge.imports[name]);\n            window.ESGlobalBridge.imports[name] = true;\n            // delay firing the event just to be safe\n            setTimeout(() => {\n              const evt = new CustomEvent(`es-bridge-${name}-loaded`, {\n                bubbles: true,\n                cancelable: true,\n                detail: {\n                  name: name,\n                  location: location,\n                },\n              });\n              document.dispatchEvent(evt);\n            }, 100);\n          };\n          script.onerror = () => {\n            reject(\n              new Error(\n                `Failed to load ${name} script with location ${location}.`\n              )\n            );\n            delete window.ESGlobalBridge.imports[name];\n            window.ESGlobalBridge.imports[name] = false;\n          };\n          document.documentElement.appendChild(script);\n        });\n      }\n    };\n  }\n}\n// register global bridge on window if needed\nwindow.ESGlobalBridge = window.ESGlobalBridge || {};\nwindow.ESGlobalBridge.imports = window.ESGlobalBridge.imports || {};\n\nwindow.ESGlobalBridge.requestAvailability = () => {\n  if (!window.ESGlobalBridge.instance) {\n    window.ESGlobalBridge.instance = new ESGlobalBridge();\n  }\n  return window.ESGlobalBridge;\n};\nexport const ESGlobalBridgeStore = window.ESGlobalBridge.requestAvailability();\n"],"names":["ESGlobalBridge","constructor","load","name","location","webpack","imported","window","imports","importing","Promise","resolve","reject","script","document","createElement","src","setAttribute","onload","setTimeout","evt","CustomEvent","bubbles","cancelable","detail","dispatchEvent","onerror","Error","documentElement","appendChild","requestAvailability","instance","ESGlobalBridgeStore"],"mappings":"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"}